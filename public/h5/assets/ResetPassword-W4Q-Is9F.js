import{_ as G,M as E,v as L,r as l,a4 as A,y as F,b as e,A as t,D as s,F as J,E as M,z as Q,G as k,Q as T,I as W,P as v,C as h,J as j,L as H,aU as K,a9 as B,aW as O}from"./index-D_d4KJfr.js";import{C as X}from"./index-D62Cmqae.js";import"./index-TM-NAyz6.js";import{F as Y}from"./index-DN7gx0eY.js";import{N as Z}from"./index-B7jl8BVg.js";import{F as ee}from"./index-DeiI9hPx.js";import"./use-id-C1OKhF-1.js";const se={class:"label highlight-txt mb-2 mt-4"},oe={class:"label highlight-txt mt-6 mb-2"},ae={class:"label highlight-txt mt-6 mb-2"},te={class:"label highlight-txt mt-6 mb-2"},le={key:1},re={__name:"ResetPassword",setup(ne){const P=E();L();const V=M(),i=l("password");function z(){i.value==="password"?i.value="text":i.value="password"}const d=l("password");function N(){d.value==="password"?d.value="text":d.value="password"}const u=l(""),p=l(""),m=l(""),c=l(""),y=l(!1),_=l(!1),C=A({time:60*1e3,onFinish:()=>{_.value=!1}});function R(){y.value=!0,K({user_string:u.value}).then(a=>{console.log(a),B({type:"primary",message:a.message}),a.type==="ok"&&(_.value=!0,C.start())}).finally(()=>{y.value=!1})}const S=a=>a===p.value,w=l(!1);function U(a){w.value=!0,O({email:u.value,password:p.value,repassword:m.value,code:c.value}).then(o=>{console.log(o),B({type:"primary",message:o.message}),o.type==="ok"&&setTimeout(()=>{V.push("/login")},500)}).finally(()=>{w.value=!1})}function q(){V.go(-1)}return(a,o)=>{var x;const f=W,b=T,D=Z,n=Q("i18n-t"),g=Y,I=X,$=ee;return k(),F(J,null,[e(D,{title:(x=s(P).siteConfig)==null?void 0:x.site_name},{left:t(()=>[e(f,{"class-prefix":"iconfont",name:"back",onClick:q})]),right:t(()=>[e(b,{size:"small"},{default:t(()=>[e(f,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e($,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:U},{default:t(()=>[e(I,{border:!1},{default:t(()=>[v("div",se,[e(n,{keypath:"register.enter_email"})]),e(g,{modelValue:s(u),"onUpdate:modelValue":o[0]||(o[0]=r=>h(u)?u.value=r:null),placeholder:a.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),v("div",oe,[e(n,{keypath:"register.pwd"})]),e(g,{modelValue:s(p),"onUpdate:modelValue":o[1]||(o[1]=r=>h(p)?p.value=r:null),type:s(i),placeholder:a.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:t(()=>[e(f,{name:s(i)==="password"?"closed-eye":"eye",size:"20",onClick:z},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),v("div",ae,[e(n,{keypath:"register.enter_password_again"})]),e(g,{modelValue:s(m),"onUpdate:modelValue":o[2]||(o[2]=r=>h(m)?m.value=r:null),type:s(d),placeholder:a.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:S}]},{button:t(()=>[e(f,{name:s(d)==="password"?"closed-eye":"eye",size:"20",onClick:N},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),v("div",te,[e(n,{keypath:"register.enter_vercode"})]),e(g,{class:"mb-6",modelValue:s(c),"onUpdate:modelValue":o[3]||(o[3]=r=>h(c)?c.value=r:null),placeholder:a.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:t(()=>[e(b,{size:"mini",type:"primary",loading:s(y),disabled:s(_),onClick:R},{default:t(()=>[s(_)?(k(),F("span",le,H(s(C).current.value.seconds)+" S",1)):(k(),j(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(b,{block:"",type:"primary","native-type":"submit",loading:s(w)},{default:t(()=>[e(n,{keypath:"reset.reset_password"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},fe=G(re,[["__scopeId","data-v-99d34641"]]);export{fe as default};
