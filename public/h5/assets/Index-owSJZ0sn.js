import{a6 as ke,_ as Se,r as ht,T as Dr,X as je,W as Ee,ac as Ii,y as nt,P as W,b as L,A as q,K as Ze,L as dt,D,I as kr,C as me,aa as Ae,S as qe,F as Yt,G as U,M as Ar,v as Ke,k as Xt,a7 as Fr,J as Wt,Q as Rr,z as Qe,N as Br,H as _e,R as Lr,U as mr,s as Pi,a8 as Ve,ab as Mi}from"./index-mvt0tvGf.js";import{C as Ti}from"./index-B6byNgHm.js";import{C as Je}from"./index-CoUIz6u_.js";import{T as tr}from"./index-Cq_Bpgrv.js";/* empty css              *//* empty css              */import{q as Di}from"./index-CHpUVmvv.js";import{g as ki,a as be,s as Ai}from"./utils-BXRzNegf.js";import{u as er}from"./scoket-CK0SwY5K.js";import{P as Vr}from"./index-Coa-pYHS.js";import{I as Or}from"./index-D9tMuLgu.js";import{S as rr}from"./index-Bq1O0Z2L.js";import{S as Fi}from"./index-BslyM1GG.js";import{S as Ri,T as Bi,a as Li}from"./index-BPqZD1HN.js";import{F as Nr}from"./index-c5fk6XxJ.js";import{s as zr}from"./function-call-DE_CRiA6.js";import"./moment-C5S46NFB.js";import"./_commonjsHelpers-C932wzq6.js";import"./use-id-C0giu_T8.js";import"./use-tab-status-QZZ0olna.js";import"./index-BwnWPYBz.js";/**
     * @license
     * KLineChart v9.8.12
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var Ye=function(i,t){return Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},Ye(i,t)};function N(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ye(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var B=function(){return B=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},B.apply(this,arguments)};function ne(i,t,e,r){function n(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function l(c){try{u(r.next(c))}catch(h){s(h)}}function o(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):n(c.value).then(l,o)}u((r=r.apply(i,[])).next())})}function ae(i,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(c){return o([u,c])}}function o(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(r=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Jt(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ee(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,a=[],s;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return a}function Wr(i,t,e){if(arguments.length===2)for(var r=0,n=t.length,a;r<n;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return i.concat(a||Array.prototype.slice.call(t))}var G;(function(i){i.Dashed="dashed",i.Solid="solid"})(G||(G={}));var Y;(function(i){i.Stroke="stroke",i.Fill="fill",i.StrokeFill="stroke_fill"})(Y||(Y={}));var le;(function(i){i.Always="always",i.FollowCross="follow_cross",i.None="none"})(le||(le={}));var Mt;(function(i){i.Standard="standard",i.Rect="rect"})(Mt||(Mt={}));var pe;(function(i){i.Left="left",i.Middle="middle",i.Right="right"})(pe||(pe={}));var Ie;(function(i){i.Fixed="fixed",i.Pointer="pointer"})(Ie||(Ie={}));var mt;(function(i){i.CandleSolid="candle_solid",i.CandleStroke="candle_stroke",i.CandleUpStroke="candle_up_stroke",i.CandleDownStroke="candle_down_stroke",i.Ohlc="ohlc",i.Area="area"})(mt||(mt={}));var $t;(function(i){i.Left="left",i.Right="right"})($t||($t={}));var ot;(function(i){i.Normal="normal",i.Percentage="percentage",i.Log="log"})(ot||(ot={}));var we="#F92855",Oe="rgba(249, 40, 85, .7)",Ce="#2DC08E",Ne="rgba(45, 192, 142, .7)",qt="#888888",Fe="#FFFFFF",vt="#1677FF",Kt="#76808F",He="#DDDDDD";function oe(i){return"rgba(22, 119, 255, ".concat(i,")")}function Vi(){function i(){return{show:!0,size:1,color:"#EDEDED",style:G.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:i(),vertical:i()}}function Oi(){var i={show:!0,color:Kt,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:mt.CandleSolid,bar:{upColor:Ce,downColor:we,noChangeColor:qt,upBorderColor:Ce,downBorderColor:we,noChangeBorderColor:qt,upWickColor:Ce,downWickColor:we,noChangeWickColor:qt},area:{lineSize:2,lineColor:vt,smooth:!1,value:"close",backgroundColor:[{offset:0,color:oe(.01)},{offset:1,color:oe(.2)}],point:{show:!0,color:vt,radius:4,rippleColor:oe(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:B({},i),low:B({},i),last:{show:!0,upColor:Ce,downColor:we,noChangeColor:qt,line:{show:!0,style:G.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:Y.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:G.Solid,borderSize:0,borderDashedValue:[2,2],color:Fe,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:le.Always,showType:Mt.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:Ie.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:Kt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function Ni(){var i=["#FF9600","#935EBD",vt,"#E11D74","#01C5C4"].map(function(t){return{style:G.Solid,smooth:!1,size:1,dashedValue:[2,2],color:t}});return{ohlc:{upColor:Ne,downColor:Oe,noChangeColor:qt},bars:[{style:Y.Fill,borderStyle:G.Solid,borderSize:1,borderDashedValue:[2,2],upColor:Ne,downColor:Oe,noChangeColor:qt}],lines:i,circles:[{style:Y.Fill,borderStyle:G.Solid,borderSize:1,borderDashedValue:[2,2],upColor:Ne,downColor:Oe,noChangeColor:qt}],lastValueMark:{show:!1,text:{show:!1,style:Y.Fill,color:Fe,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:G.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:le.Always,showType:Mt.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:Kt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function Xr(){return{show:!0,size:"auto",axisLine:{show:!0,color:He,size:1},tickText:{show:!0,color:Kt,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:He}}}function zi(){var i=Xr();return i.type=ot.Normal,i.position=$t.Right,i.inside=!1,i.reverse=!1,i}function Wi(){function i(){return{show:!0,line:{show:!0,style:G.Dashed,dashedValue:[4,2],size:1,color:Kt},text:{show:!0,style:Y.Fill,color:Fe,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:G.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:Kt,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Kt}}}return{show:!0,horizontal:i(),vertical:i()}}function Xi(){var i=oe(.35),t=oe(.25);function e(){return{style:Y.Fill,color:Fe,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:G.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:vt,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:vt}}return{point:{color:vt,borderColor:i,borderSize:1,radius:5,activeColor:vt,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:G.Solid,smooth:!1,color:vt,size:1,dashedValue:[2,2]},rect:{style:Y.Fill,color:t,borderColor:vt,borderSize:1,borderRadius:0,borderStyle:G.Solid,borderDashedValue:[2,2]},polygon:{style:Y.Fill,color:vt,borderColor:vt,borderSize:1,borderStyle:G.Solid,borderDashedValue:[2,2]},circle:{style:Y.Fill,color:t,borderColor:vt,borderSize:1,borderStyle:G.Solid,borderDashedValue:[2,2]},arc:{style:G.Solid,color:vt,size:1,dashedValue:[2,2]},text:e(),rectText:e()}}function Yi(){return{size:1,color:He,fill:!0,activeBackgroundColor:oe(.08)}}function Hi(){return{grid:Vi(),candle:Oi(),indicator:Ni(),xAxis:Xr(),yAxis:zi(),separator:Yi(),crosshair:Wi(),overlay:Xi()}}function St(i,t){if(!(!Tt(i)&&!Tt(t))){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=i[e],n=t[e];Tt(n)&&Tt(r)?St(r,n):T(t[e])&&(i[e]=ye(t[e]))}}}function ye(i){if(!Tt(i))return i;var t;Ct(i)?t=[]:t={};for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e)){var r=i[e];Tt(r)?t[e]=ye(r):t[e]=r}return t}function Ct(i){return Object.prototype.toString.call(i)==="[object Array]"}function Ft(i){return typeof i=="function"}function Tt(i){return typeof i=="object"&&T(i)}function R(i){return typeof i=="number"&&!isNaN(i)}function T(i){return i!=null}function Qt(i){return typeof i=="boolean"}function O(i){return typeof i=="string"}var $i=/\\(\\)?/g,Gi=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function st(i,t,e){if(T(i)){var r=[];t.replace(Gi,function(l){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var c=l;return T(o[1])?c=o[2].replace($i,"$1"):T(o[0])&&(c=o[0].trim()),r.push(c),""});for(var n=i,a=0,s=r.length;T(n)&&a<s;)n=n==null?void 0:n[r[a++]];return T(n)?n:e??"--"}return e??"--"}function Ui(i,t,e){var r={};return i.formatToParts(new Date(t)).forEach(function(n){var a=n.type,s=n.value;switch(a){case"year":{r.YYYY=s;break}case"month":{r.MM=s;break}case"day":{r.DD=s;break}case"hour":{r.HH=s==="24"?"00":s;break}case"minute":{r.mm=s;break}case"second":{r.ss=s;break}}}),e.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return r[n]})}function Q(i,t){var e=+i;return R(e)?e.toFixed(t??2):"".concat(i)}function ji(i){var t=+i;if(R(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(i)}function rt(i,t){var e="".concat(i);if(t.length===0)return e;if(e.includes(".")){var r=e.split(".");return"".concat(r[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(t)}),".").concat(r[1])}return e.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(t)})}function at(i,t){var e="".concat(i),r=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(r.test(e)){var n=e.split("."),a=n[n.length-1],s=a.match(/0*/);if(T(s)){var l=s[0].length;return n[n.length-1]=a.replace(/0*/,"0{".concat(l,"}")),n.join(".")}}return e}var ve;function Ht(i){var t,e,r;return(r=(e=(t=i.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&r!==void 0?r:1}function te(i,t,e){return"".concat(t??"normal"," ").concat(i??12,"px ").concat(e??"Helvetica Neue")}function Pe(i,t,e,r){if(!T(ve)){var n=document.createElement("canvas"),a=Ht(n);ve=n.getContext("2d"),ve.scale(a,a)}return ve.font=te(t,e,r),Math.round(ve.measureText(i).width)}var yt;(function(i){i.OnDataReady="onDataReady",i.OnZoom="onZoom",i.OnScroll="onScroll",i.OnVisibleRangeChange="onVisibleRangeChange",i.OnTooltipIconClick="onTooltipIconClick",i.OnCrosshairChange="onCrosshairChange",i.OnCandleBarClick="onCandleBarClick",i.OnPaneDrag="onPaneDrag"})(yt||(yt={}));var Zi=function(){function i(){this._callbacks=[]}return i.prototype.subscribe=function(t){var e,r=(e=this._callbacks.indexOf(t))!==null&&e!==void 0?e:-1;r<0&&this._callbacks.push(t)},i.prototype.unsubscribe=function(t){var e;if(Ft(t)){var r=(e=this._callbacks.indexOf(t))!==null&&e!==void 0?e:-1;r>-1&&this._callbacks.splice(r,1)}else this._callbacks=[]},i.prototype.execute=function(t){this._callbacks.forEach(function(e){e(t)})},i.prototype.isEmpty=function(){return this._callbacks.length===0},i}(),_t;(function(i){i.Init="init",i.Forward="forward",i.Backward="backward"})(_t||(_t={}));var ft;(function(i){i.Normal="normal",i.Price="price",i.Volume="volume"})(ft||(ft={}));function ir(i,t,e,r,n){var a=t.result,s=t.figures,l=t.styles,o=st(l,"circles",r.circles),u=o.length,c=st(l,"bars",r.bars),h=c.length,f=st(l,"lines",r.lines),d=f.length,v=0,p=0,g=0,m,_=0;s.forEach(function(S){var y;switch(S.type){case"circle":{_=v;var x=o[v%u];m=B(B({},x),{color:x.noChangeColor}),v++;break}case"bar":{_=p;var w=c[p%h];m=B(B({},w),{color:w.noChangeColor}),p++;break}case"line":{_=g,m=f[g%d],g++;break}}if(T(m)){var b={prev:{kLineData:i[e-1],indicatorData:a[e-1]},current:{kLineData:i[e],indicatorData:a[e]},next:{kLineData:i[e+1],indicatorData:a[e+1]}},E=(y=S.styles)===null||y===void 0?void 0:y.call(S,b,t,r);n(S,B(B({},m),E),_)}})}var qi=function(){function i(t){this.result=[],this._precisionFlag=!1;var e=t.name,r=t.shortName,n=t.series,a=t.calcParams,s=t.figures,l=t.precision,o=t.shouldOhlc,u=t.shouldFormatBigNumber,c=t.visible,h=t.zLevel,f=t.minValue,d=t.maxValue,v=t.styles,p=t.extendData,g=t.regenerateFigures,m=t.createTooltipDataSource,_=t.draw;this.name=e,this.shortName=r??e,this.series=n??ft.Normal,this.precision=l??4,this.calcParams=a??[],this.figures=s??[],this.shouldOhlc=o??!1,this.shouldFormatBigNumber=u??!1,this.visible=c??!0,this.zLevel=h??0,this.minValue=f??null,this.maxValue=d??null,this.styles=ye(v??{}),this.extendData=p,this.regenerateFigures=g??null,this.createTooltipDataSource=m??null,this.draw=_??null}return i.prototype.setShortName=function(t){return this.shortName!==t?(this.shortName=t,!0):!1},i.prototype.setSeries=function(t){return this.series!==t?(this.series=t,!0):!1},i.prototype.setPrecision=function(t,e){var r=e??!1,n=Math.floor(t);return n!==this.precision&&t>=0&&(!r||r&&!this._precisionFlag)?(this.precision=n,r||(this._precisionFlag=!0),!0):!1},i.prototype.setCalcParams=function(t){var e,r;return this.calcParams=t,this.figures=(r=(e=this.regenerateFigures)===null||e===void 0?void 0:e.call(this,t))!==null&&r!==void 0?r:this.figures,!0},i.prototype.setShouldOhlc=function(t){return this.shouldOhlc!==t?(this.shouldOhlc=t,!0):!1},i.prototype.setShouldFormatBigNumber=function(t){return this.shouldFormatBigNumber!==t?(this.shouldFormatBigNumber=t,!0):!1},i.prototype.setVisible=function(t){return this.visible!==t?(this.visible=t,!0):!1},i.prototype.setZLevel=function(t){return this.zLevel!==t?(this.zLevel=t,!0):!1},i.prototype.setStyles=function(t){return St(this.styles,t),!0},i.prototype.setExtendData=function(t){return this.extendData!==t?(this.extendData=t,!0):!1},i.prototype.setFigures=function(t){return this.figures!==t?(this.figures=t,!0):!1},i.prototype.setMinValue=function(t){return this.minValue!==t?(this.minValue=t,!0):!1},i.prototype.setMaxValue=function(t){return this.maxValue!==t?(this.maxValue=t,!0):!1},i.prototype.setRegenerateFigures=function(t){return this.regenerateFigures!==t?(this.regenerateFigures=t,!0):!1},i.prototype.setCreateTooltipDataSource=function(t){return this.createTooltipDataSource!==t?(this.createTooltipDataSource=t,!0):!1},i.prototype.setDraw=function(t){return this.draw!==t?(this.draw=t,!0):!1},i.prototype.calcIndicator=function(t){return ne(this,void 0,void 0,function(){var e;return ae(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return e=r.sent(),this.result=e,[2,!0];case 2:return r.sent(),[2,!1];case 3:return[2]}})})},i.extend=function(t){var e=function(r){N(n,r);function n(){return r.call(this,t)||this}return n.prototype.calc=function(a,s){return t.calc(a,s)},n}(i);return e},i}(),se;(function(i){i.Normal="normal",i.WeakMagnet="weak_magnet",i.StrongMagnet="strong_magnet"})(se||(se={}));function Ki(){return["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]}var _r=1,de=-1,Qi="overlay_",ie="overlay_figure_",Ji=function(){function i(t){this.currentStep=_r,this.points=[],this._prevPressedPoint=null,this._prevPressedPoints=[];var e=t.mode,r=t.modeSensitivity,n=t.extendData,a=t.styles,s=t.name,l=t.totalStep,o=t.lock,u=t.visible,c=t.zLevel,h=t.needDefaultPointFigure,f=t.needDefaultXAxisFigure,d=t.needDefaultYAxisFigure,v=t.createPointFigures,p=t.createXAxisFigures,g=t.createYAxisFigures,m=t.performEventPressedMove,_=t.performEventMoveForDrawing,S=t.onDrawStart,y=t.onDrawing,x=t.onDrawEnd,w=t.onClick,b=t.onDoubleClick,E=t.onRightClick,C=t.onPressedMoveStart,P=t.onPressedMoving,M=t.onPressedMoveEnd,I=t.onMouseEnter,k=t.onMouseLeave,A=t.onRemoved,V=t.onSelected,F=t.onDeselected;this.name=s,this.totalStep=!R(l)||l<2?1:l,this.lock=o??!1,this.visible=u??!0,this.zLevel=c??0,this.needDefaultPointFigure=h??!1,this.needDefaultXAxisFigure=f??!1,this.needDefaultYAxisFigure=d??!1,this.mode=e??se.Normal,this.modeSensitivity=r??8,this.extendData=n,this.styles=ye(a??{}),this.createPointFigures=v??null,this.createXAxisFigures=p??null,this.createYAxisFigures=g??null,this.performEventPressedMove=m??null,this.performEventMoveForDrawing=_??null,this.onDrawStart=S??null,this.onDrawing=y??null,this.onDrawEnd=x??null,this.onClick=w??null,this.onDoubleClick=b??null,this.onRightClick=E??null,this.onPressedMoveStart=C??null,this.onPressedMoving=P??null,this.onPressedMoveEnd=M??null,this.onMouseEnter=I??null,this.onMouseLeave=k??null,this.onRemoved=A??null,this.onSelected=V??null,this.onDeselected=F??null}return i.prototype.setId=function(t){return O(this.id)?!1:(this.id=t,!0)},i.prototype.setGroupId=function(t){return O(this.groupId)?!1:(this.groupId=t,!0)},i.prototype.setPaneId=function(t){this.paneId=t},i.prototype.setExtendData=function(t){return t!==this.extendData?(this.extendData=t,!0):!1},i.prototype.setStyles=function(t){return St(this.styles,t),!0},i.prototype.setPoints=function(t){if(t.length>0){var e=void 0;if(this.points=Wr([],ee(t),!1),t.length>=this.totalStep-1?(this.currentStep=de,e=this.totalStep-1):(this.currentStep=t.length+1,e=t.length),this.performEventMoveForDrawing!==null)for(var r=0;r<e;r++)this.performEventMoveForDrawing({currentStep:r+2,mode:this.mode,points:this.points,performPointIndex:r,performPoint:this.points[r]});return this.currentStep===de&&this.performEventPressedMove!==null&&this.performEventPressedMove({currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}),!0}return!1},i.prototype.setLock=function(t){return this.lock!==t?(this.lock=t,!0):!1},i.prototype.setVisible=function(t){return this.visible!==t?(this.visible=t,!0):!1},i.prototype.setZLevel=function(t){return this.zLevel!==t?(this.zLevel=t,!0):!1},i.prototype.setMode=function(t){return this.mode!==t?(this.mode=t,!0):!1},i.prototype.setModeSensitivity=function(t){return this.modeSensitivity!==t?(this.modeSensitivity=t,!0):!1},i.prototype.setOnDrawStartCallback=function(t){return this.onDrawStart!==t?(this.onDrawStart=t,!0):!1},i.prototype.setOnDrawingCallback=function(t){return this.onDrawing!==t?(this.onDrawing=t,!0):!1},i.prototype.setOnDrawEndCallback=function(t){return this.onDrawEnd!==t?(this.onDrawEnd=t,!0):!1},i.prototype.setOnClickCallback=function(t){return this.onClick!==t?(this.onClick=t,!0):!1},i.prototype.setOnDoubleClickCallback=function(t){return this.onDoubleClick!==t?(this.onDoubleClick=t,!0):!1},i.prototype.setOnRightClickCallback=function(t){return this.onRightClick!==t?(this.onRightClick=t,!0):!1},i.prototype.setOnPressedMoveStartCallback=function(t){return this.onPressedMoveStart!==t?(this.onPressedMoveStart=t,!0):!1},i.prototype.setOnPressedMovingCallback=function(t){return this.onPressedMoving!==t?(this.onPressedMoving=t,!0):!1},i.prototype.setOnPressedMoveEndCallback=function(t){return this.onPressedMoveEnd!==t?(this.onPressedMoveEnd=t,!0):!1},i.prototype.setOnMouseEnterCallback=function(t){return this.onMouseEnter!==t?(this.onMouseEnter=t,!0):!1},i.prototype.setOnMouseLeaveCallback=function(t){return this.onMouseLeave!==t?(this.onMouseLeave=t,!0):!1},i.prototype.setOnRemovedCallback=function(t){return this.onRemoved!==t?(this.onRemoved=t,!0):!1},i.prototype.setOnSelectedCallback=function(t){return this.onSelected!==t?(this.onSelected=t,!0):!1},i.prototype.setOnDeselectedCallback=function(t){return this.onDeselected!==t?(this.onDeselected=t,!0):!1},i.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=de:this.currentStep++},i.prototype.forceComplete=function(){this.currentStep=de},i.prototype.isDrawing=function(){return this.currentStep!==de},i.prototype.isStart=function(){return this.currentStep===_r},i.prototype.eventMoveForDrawing=function(t){var e,r=this.currentStep-1,n={};R(t.timestamp)&&(n.timestamp=t.timestamp),R(t.dataIndex)&&(n.dataIndex=t.dataIndex),R(t.value)&&(n.value=t.value),this.points[r]=n,(e=this.performEventMoveForDrawing)===null||e===void 0||e.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:r,performPoint:n})},i.prototype.eventPressedPointMove=function(t,e){var r;R(t.dataIndex)&&(this.points[e].dataIndex=t.dataIndex,this.points[e].timestamp=t.timestamp),R(t.value)&&(this.points[e].value=t.value),(r=this.performEventPressedMove)===null||r===void 0||r.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:e,performPoint:this.points[e]})},i.prototype.startPressedMove=function(t){this._prevPressedPoint=B({},t),this._prevPressedPoints=ye(this.points)},i.prototype.eventPressedOtherMove=function(t,e){if(this._prevPressedPoint!==null){var r;R(t.dataIndex)&&R(this._prevPressedPoint.dataIndex)&&(r=t.dataIndex-this._prevPressedPoint.dataIndex);var n;R(t.value)&&R(this._prevPressedPoint.value)&&(n=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(a){var s;R(a.timestamp)&&(a.dataIndex=e.timestampToDataIndex(a.timestamp));var l=B({},a);return R(r)&&R(a.dataIndex)&&(l.dataIndex=a.dataIndex+r,l.timestamp=(s=e.dataIndexToTimestamp(l.dataIndex))!==null&&s!==void 0?s:void 0),R(n)&&R(a.value)&&(l.value=a.value+n),l})}},i.extend=function(t){var e=function(r){N(n,r);function n(){return r.call(this,t)||this}return n}(i);return e},i}(),ut;(function(i){i[i.Tooltip=0]="Tooltip",i[i.Crosshair=1]="Crosshair",i[i.XAxis=2]="XAxis"})(ut||(ut={}));function tn(){return{formatDate:Ui,formatBigNumber:ji}}var en="en-US",ze=-1;function Me(i){return Ft(window.requestAnimationFrame)?window.requestAnimationFrame(i):window.setTimeout(i,20)}function yr(i){Ft(window.cancelAnimationFrame)?window.cancelAnimationFrame(i):window.clearTimeout(i)}var $e=function(){function i(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,St(this._options,t)}return i.prototype._loop=function(){var t=this;this._running=!0;var e=function(){var r;if(t._running){var n=new Date().getTime()-t._time;n<t._options.duration?((r=t._doFrameCallback)===null||r===void 0||r.call(t,n),Me(e)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};Me(e)},i.prototype.doFrame=function(t){return this._doFrameCallback=t,this},i.prototype.setDuration=function(t){return this._options.duration=t,this},i.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},i.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},i.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},i}(),We=1,Sr=new Date().getTime();function Yr(i){var t=new Date().getTime();return t===Sr?++We:We=1,Sr=t,"".concat(i??"").concat(t,"_").concat(We)}function Rt(i,t){var e,r=document.createElement(i),n=t??{};for(var a in n)r.style[a]=(e=n[a])!==null&&e!==void 0?e:"";return r}function Ge(i,t,e){var r=0,n=0;for(n=i.length-1;r!==n;){var a=Math.floor((n+r)/2),s=n-r,l=i[a][t];if(e===i[r][t])return r;if(e===i[n][t])return n;if(e===l)return a;if(e>l?r=a:n=a,s<=2)break}return r}function rn(i){var t=Math.floor(fe(i)),e=Zt(t),r=i/e,n=0;return r<1.5?n=1:r<2.5?n=2:r<3.5?n=3:r<4.5?n=4:r<5.5?n=5:r<6.5?n=6:n=8,i=n*e,t>=-20?+i.toFixed(t<0?-t:0):i}function xr(i,t){t==null&&(t=10),t=Math.min(Math.max(0,t),20);var e=(+i).toFixed(t);return+e}function nn(i){var t=i.toString(),e=t.indexOf("e");if(e>0){var r=+t.slice(e+1);return r<0?-r:0}else{var n=t.indexOf(".");return n<0?0:t.length-1-n}}function Hr(i,t,e){var r=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];return i.forEach(function(n){var a,s;r[0]=Math.max((a=n[t])!==null&&a!==void 0?a:n,r[0]),r[1]=Math.min((s=n[e])!==null&&s!==void 0?s:n,r[1])}),r}function fe(i){return Math.log(i)/Math.log(10)}function Zt(i){return Math.pow(10,i)}function br(){return{from:0,to:0,realFrom:0,realTo:0}}var wr={MIN:1,MAX:50},an=8,on=80,sn=.88,Ue=10,ln=function(){function i(t){this._dateTimeFormat=this._buildDateTimeFormat(),this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=an,this._offsetRightDistance=on,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=br(),this._chartStore=t,this._gapBarSpace=this._calcGapBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace}return i.prototype._calcGapBarSpace=function(){var t;return this._barSpace>3?t=Math.floor(this._barSpace*sn):(t=Math.floor(this._barSpace),t===this._barSpace&&t--),t%2===0&&t--,t=Math.max(1,t),t},i.prototype.adjustVisibleRange=function(){var t,e,r=this._chartStore.getDataList(),n=r.length,a=this._totalBarSpace/this._barSpace,s,l;this._scrollLimitRole===1?(s=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,l=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(s=this._minVisibleBarCount.left,l=this._minVisibleBarCount.right),s=Math.max(0,s),l=Math.max(0,l);var o=a-Math.min(s,n);this._lastBarRightSideDiffBarCount>o&&(this._lastBarRightSideDiffBarCount=o);var u=-n+Math.min(l,n);this._lastBarRightSideDiffBarCount<u&&(this._lastBarRightSideDiffBarCount=u);var c=Math.round(this._lastBarRightSideDiffBarCount+n+.5),h=c;c>n&&(c=n);var f=Math.round(c-a)-1;f<0&&(f=0);var d=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-a)-1:f;if(this._visibleRange={from:f,to:c,realFrom:d,realTo:h},this._chartStore.getActionStore().execute(yt.OnVisibleRangeChange,this._visibleRange),this._chartStore.adjustVisibleDataList(),f===0){var v=r[0];this._chartStore.executeLoadMoreCallback((t=v==null?void 0:v.timestamp)!==null&&t!==void 0?t:null),this._chartStore.executeLoadDataCallback({type:_t.Forward,data:v??null})}c===n&&this._chartStore.executeLoadDataCallback({type:_t.Backward,data:(e=r[n-1])!==null&&e!==void 0?e:null})},i.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},i.prototype._buildDateTimeFormat=function(t){var e={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};O(t)&&(e.timeZone=t);var r=null;try{r=new Intl.DateTimeFormat("en",e)}catch{}return r},i.prototype.setTimezone=function(t){var e=this._buildDateTimeFormat(t);e!==null&&(this._dateTimeFormat=e)},i.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},i.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},i.prototype.setBarSpace=function(t,e){t<wr.MIN||t>wr.MAX||this._barSpace===t||(this._barSpace=t,this._gapBarSpace=this._calcGapBarSpace(),e==null||e(),this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0))},i.prototype.setTotalBarSpace=function(t){return this._totalBarSpace!==t&&(this._totalBarSpace=t,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0)),this},i.prototype.setOffsetRightDistance=function(t,e){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(e??!1)&&(this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)),this},i.prototype.resetOffsetRightDistance=function(){this.setOffsetRightDistance(this._offsetRightDistance)},i.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},i.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},i.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},i.prototype.setLastBarRightSideDiffBarCount=function(t){return this._lastBarRightSideDiffBarCount=t,this},i.prototype.setMaxOffsetLeftDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.left=t,this},i.prototype.setMaxOffsetRightDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.right=t,this},i.prototype.setLeftMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.left=t,this},i.prototype.setRightMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.right=t,this},i.prototype.getVisibleRange=function(){return this._visibleRange},i.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},i.prototype.scroll=function(t){if(this._scrollEnabled){var e=t/this._barSpace,r=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-e,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0);var n=Math.round(r-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this._chartStore.getActionStore().execute(yt.OnScroll,{distance:n})}},i.prototype.getDataByDataIndex=function(t){var e;return(e=this._chartStore.getDataList()[t])!==null&&e!==void 0?e:null},i.prototype.coordinateToFloatIndex=function(t){var e=this._chartStore.getDataList().length,r=(this._totalBarSpace-t)/this._barSpace,n=e+this._lastBarRightSideDiffBarCount-r;return Math.round(n*1e6)/1e6},i.prototype.dataIndexToTimestamp=function(t){var e,r=this.getDataByDataIndex(t);return(e=r==null?void 0:r.timestamp)!==null&&e!==void 0?e:null},i.prototype.timestampToDataIndex=function(t){var e=this._chartStore.getDataList();return e.length===0?0:Ge(e,"timestamp",t)},i.prototype.dataIndexToCoordinate=function(t){var e=this._chartStore.getDataList().length,r=e+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(r-.5)*this._barSpace)},i.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},i.prototype.zoom=function(t,e){var r=this,n;if(this._zoomEnabled){var a=e??null;if(!R(a==null?void 0:a.x)){var s=this._chartStore.getTooltipStore().getCrosshair();a={x:(n=s==null?void 0:s.x)!==null&&n!==void 0?n:this._totalBarSpace/2}}var l=a.x,o=this.coordinateToFloatIndex(l),u=this._barSpace,c=this._barSpace+t*(this._barSpace/Ue);this.setBarSpace(c,function(){r._lastBarRightSideDiffBarCount+=o-r.coordinateToFloatIndex(l)});var h=this._barSpace/u;h!==1&&this._chartStore.getActionStore().execute(yt.OnZoom,{scale:h})}},i.prototype.setZoomEnabled=function(t){return this._zoomEnabled=t,this},i.prototype.getZoomEnabled=function(){return this._zoomEnabled},i.prototype.setScrollEnabled=function(t){return this._scrollEnabled=t,this},i.prototype.getScrollEnabled=function(){return this._scrollEnabled},i.prototype.clear=function(){this._visibleRange=br()},i}(),un={name:"AVP",shortName:"AVP",series:ft.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(i){var t=0,e=0;return i.map(function(r){var n,a,s={},l=(n=r==null?void 0:r.turnover)!==null&&n!==void 0?n:0,o=(a=r==null?void 0:r.volume)!==null&&a!==void 0?a:0;return t+=l,e+=o,e!==0&&(s.avp=t/e),s})}},cn={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(i,t,e){var r,n,a,s,l=i.prev,o=i.current,u=(n=(r=l.indicatorData)===null||r===void 0?void 0:r.ao)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(s=(a=o.indicatorData)===null||a===void 0?void 0:a.ao)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER,h;c>u?h=st(t.styles,"bars[0].upColor",e.bars[0].upColor):h=st(t.styles,"bars[0].downColor",e.bars[0].downColor);var f=c>u?Y.Stroke:Y.Fill;return{color:h,style:f,borderColor:h}}}],calc:function(i,t){var e=t.calcParams,r=Math.max(e[0],e[1]),n=0,a=0,s=0,l=0;return i.map(function(o,u){var c={},h=(o.low+o.high)/2;if(n+=h,a+=h,u>=e[0]-1){s=n/e[0];var f=i[u-(e[0]-1)];n-=(f.low+f.high)/2}if(u>=e[1]-1){l=a/e[1];var f=i[u-(e[1]-1)];a-=(f.low+f.high)/2}return u>=r-1&&(c.ao=s-l),c})}},hn={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(i){return i.map(function(t,e){return{key:"bias".concat(e+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(i,t){var e=t.calcParams,r=t.figures,n=[];return i.map(function(a,s){var l={},o=a.close;return e.forEach(function(u,c){var h;if(n[c]=((h=n[c])!==null&&h!==void 0?h:0)+o,s>=u-1){var f=n[c]/e[c];l[r[c].key]=(o-f)/f*100,n[c]-=i[s-(u-1)].close}}),l})}};function vn(i,t){var e=i.length,r=0;return i.forEach(function(n){var a=n.close-t;r+=a*a}),r=Math.abs(r),Math.sqrt(r/e)}var dn={name:"BOLL",shortName:"BOLL",series:ft.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=e[0]-1,n=0;return i.map(function(a,s){var l=a.close,o={};if(n+=l,s>=r){o.mid=n/e[0];var u=vn(i.slice(s-r,s+1),o.mid);o.up=o.mid+e[1]*u,o.dn=o.mid-e[1]*u,n-=i[s-r].close}return o})}},fn={name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=0,a=0,s=0;return i.map(function(l,o){var u,c,h={},f=l.high,d=l.low,v=l.open,p=((u=i[o-1])!==null&&u!==void 0?u:l).close;if(a+=f-v,s+=v-d,r+=f-p,n+=p-d,o>=e[0]-1){s!==0?h.ar=a/s*100:h.ar=0,n!==0?h.br=r/n*100:h.br=0;var g=i[o-(e[0]-1)],m=g.high,_=g.low,S=g.open,y=((c=i[o-e[0]])!==null&&c!==void 0?c:i[o-(e[0]-1)]).close;r-=m-y,n-=y-_,a-=m-S,s-=S-_}return h})}},pn={name:"BBI",shortName:"BBI",series:ft.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=Math.max.apply(Math,Wr([],ee(e),!1)),n=[],a=[];return i.map(function(s,l){var o={},u=s.close;if(e.forEach(function(h,f){var d;n[f]=((d=n[f])!==null&&d!==void 0?d:0)+u,l>=h-1&&(a[f]=n[f]/h,n[f]-=i[l-(h-1)].close)}),l>=r-1){var c=0;a.forEach(function(h){c+=h}),o.bbi=c/4}return o})}},gn={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=e[0]-1,n=0,a=[];return i.map(function(s,l){var o={},u=(s.high+s.low+s.close)/3;if(n+=u,a.push(u),l>=r){var c=n/e[0],h=a.slice(l-r,l+1),f=0;h.forEach(function(p){f+=Math.abs(p-c)});var d=f/e[0];o.cci=d!==0?(u-c)/d/.015:0;var v=(i[l-r].high+i[l-r].low+i[l-r].close)/3;n-=v}return o})}},mn={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=Math.ceil(e[1]/2.5+1),n=Math.ceil(e[2]/2.5+1),a=Math.ceil(e[3]/2.5+1),s=Math.ceil(e[4]/2.5+1),l=0,o=[],u=0,c=[],h=0,f=[],d=0,v=[],p=[];return i.forEach(function(g,m){var _,S,y,x,w,b={},E=(_=i[m-1])!==null&&_!==void 0?_:g,C=(E.high+E.close+E.low+E.open)/4,P=Math.max(0,g.high-C),M=Math.max(0,C-g.low);m>=e[0]-1&&(M!==0?b.cr=P/M*100:b.cr=0,l+=b.cr,u+=b.cr,h+=b.cr,d+=b.cr,m>=e[0]+e[1]-2&&(o.push(l/e[1]),m>=e[0]+e[1]+r-3&&(b.ma1=o[o.length-1-r]),l-=(S=p[m-(e[1]-1)].cr)!==null&&S!==void 0?S:0),m>=e[0]+e[2]-2&&(c.push(u/e[2]),m>=e[0]+e[2]+n-3&&(b.ma2=c[c.length-1-n]),u-=(y=p[m-(e[2]-1)].cr)!==null&&y!==void 0?y:0),m>=e[0]+e[3]-2&&(f.push(h/e[3]),m>=e[0]+e[3]+a-3&&(b.ma3=f[f.length-1-a]),h-=(x=p[m-(e[3]-1)].cr)!==null&&x!==void 0?x:0),m>=e[0]+e[4]-2&&(v.push(d/e[4]),m>=e[0]+e[4]+s-3&&(b.ma4=v[v.length-1-s]),d-=(w=p[m-(e[4]-1)].cr)!==null&&w!==void 0?w:0)),p.push(b)}),p}},_n={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=Math.max(e[0],e[1]),n=0,a=0,s=0,l=[];return i.forEach(function(o,u){var c,h={},f=o.close;n+=f,a+=f;var d=0,v=0;if(u>=e[0]-1&&(d=n/e[0],n-=i[u-(e[0]-1)].close),u>=e[1]-1&&(v=a/e[1],a-=i[u-(e[1]-1)].close),u>=r-1){var p=d-v;h.dma=p,s+=p,u>=r+e[2]-2&&(h.ama=s/e[2],s-=(c=l[u-(e[2]-1)].dma)!==null&&c!==void 0?c:0)}l.push(h)}),l}},yn={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=0,a=0,s=0,l=0,o=0,u=0,c=0,h=[];return i.forEach(function(f,d){var v,p,g={},m=(v=i[d-1])!==null&&v!==void 0?v:f,_=m.close,S=f.high,y=f.low,x=S-y,w=Math.abs(S-_),b=Math.abs(_-y),E=S-m.high,C=m.low-y,P=Math.max(Math.max(x,w),b),M=E>0&&E>C?E:0,I=C>0&&C>E?C:0;if(r+=P,n+=M,a+=I,d>=e[0]-1){d>e[0]-1?(s=s-s/e[0]+P,l=l-l/e[0]+M,o=o-o/e[0]+I):(s=r,l=n,o=a);var k=0,A=0;s!==0&&(k=l*100/s,A=o*100/s),g.pdi=k,g.mdi=A;var V=0;A+k!==0&&(V=Math.abs(A-k)/(A+k)*100),u+=V,d>=e[0]*2-2&&(d>e[0]*2-2?c=(c*(e[0]-1)+V)/e[0]:c=u/e[0],g.adx=c,d>=e[0]*2+e[1]-3&&(g.adxr=(((p=h[d-(e[1]-1)].adx)!==null&&p!==void 0?p:0)+c)/2))}h.push(g)}),h}},Sn={name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=[];return i.map(function(a,s){var l,o={};if(s>0){var u=i[s-1],c=a.high,h=a.low,f=(l=a.volume)!==null&&l!==void 0?l:0,d=(c+h)/2-(u.high+u.low)/2;if(f===0||c-h===0)o.emv=0;else{var v=f/1e8/(c-h);o.emv=d/v}r+=o.emv,n.push(o.emv),s>=e[0]&&(o.maEmv=r/e[0],r-=n[s-e[0]])}return o})}},xn={name:"EMA",shortName:"EMA",series:ft.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(i){return i.map(function(t,e){return{key:"ema".concat(e+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(i,t){var e=t.calcParams,r=t.figures,n=0,a=[];return i.map(function(s,l){var o={},u=s.close;return n+=u,e.forEach(function(c,h){l>=c-1&&(l>c-1?a[h]=(2*u+(c-1)*a[h])/(c+1):a[h]=n/c,o[r[h].key]=a[h])}),o})}},bn={name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=[];return i.forEach(function(a,s){var l,o={};if(s>=e[0]){var u=a.close,c=i[s-e[0]].close;o.mtm=u-c,r+=o.mtm,s>=e[0]+e[1]-1&&(o.maMtm=r/e[1],r-=(l=n[s-(e[1]-1)].mtm)!==null&&l!==void 0?l:0)}n.push(o)}),n}},wn={name:"MA",shortName:"MA",series:ft.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(i){return i.map(function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(i,t){var e=t.calcParams,r=t.figures,n=[];return i.map(function(a,s){var l={},o=a.close;return e.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+o,s>=u-1&&(l[r[c].key]=n[c]/u,n[c]-=i[s-(u-1)].close)}),l})}},Cn={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(i,t,e){var r,n,a,s,l=i.prev,o=i.current,u=(n=(r=l.indicatorData)===null||r===void 0?void 0:r.macd)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(s=(a=o.indicatorData)===null||a===void 0?void 0:a.macd)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER,h;c>0?h=st(t.styles,"bars[0].upColor",e.bars[0].upColor):c<0?h=st(t.styles,"bars[0].downColor",e.bars[0].downColor):h=st(t.styles,"bars[0].noChangeColor",e.bars[0].noChangeColor);var f=u<c?Y.Stroke:Y.Fill;return{style:f,color:h,borderColor:h}}}],calc:function(i,t){var e=t.calcParams,r=0,n,a,s=0,l=0,o=0,u=Math.max(e[0],e[1]);return i.map(function(c,h){var f={},d=c.close;return r+=d,h>=e[0]-1&&(h>e[0]-1?n=(2*d+(e[0]-1)*n)/(e[0]+1):n=r/e[0]),h>=e[1]-1&&(h>e[1]-1?a=(2*d+(e[1]-1)*a)/(e[1]+1):a=r/e[1]),h>=u-1&&(s=n-a,f.dif=s,l+=s,h>=u+e[2]-2&&(h>u+e[2]-2?o=(s*2+o*(e[2]-1))/(e[2]+1):o=l/e[2],f.macd=(s-o)*2,f.dea=o)),f})}},En={name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=0,a=[];return i.forEach(function(s,l){var o,u,c,h,f=(o=i[l-1])!==null&&o!==void 0?o:s;s.close<f.close?n-=(u=s.volume)!==null&&u!==void 0?u:0:s.close>f.close&&(n+=(c=s.volume)!==null&&c!==void 0?c:0);var d={obv:n};r+=n,l>=e[0]-1&&(d.maObv=r/e[0],r-=(h=a[l-(e[0]-1)].obv)!==null&&h!==void 0?h:0),a.push(d)}),a}},In={name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(i){var t=0;return i.map(function(e,r){var n,a,s={},l=e.close,o=(n=e.volume)!==null&&n!==void 0?n:1,u=((a=i[r-1])!==null&&a!==void 0?a:e).close,c=0,h=u*o;return h!==0&&(c=(l-u)/h),t+=c,s.pvt=t,s})}},Pn={name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=0,a=[],s=[];return i.forEach(function(l,o){var u,c,h={},f=((u=i[o-1])!==null&&u!==void 0?u:l).close,d=l.close-f>0?1:0;a.push(d),r+=d,o>=e[0]-1&&(h.psy=r/e[0]*100,n+=h.psy,o>=e[0]+e[1]-2&&(h.maPsy=n/e[1],n-=(c=s[o-(e[1]-1)].psy)!==null&&c!==void 0?c:0),r-=a[o-(e[0]-1)]),s.push(h)}),s}},Mn={name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=[],n=0;return i.forEach(function(a,s){var l,o,u={};if(s>=e[0]-1){var c=a.close,h=((l=i[s-e[0]])!==null&&l!==void 0?l:i[s-(e[0]-1)]).close;h!==0?u.roc=(c-h)/h*100:u.roc=0,n+=u.roc,s>=e[0]-1+e[1]-1&&(u.maRoc=n/e[1],n-=(o=r[s-(e[1]-1)].roc)!==null&&o!==void 0?o:0)}r.push(u)}),r}},Tn={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(i){return i.map(function(t,e){var r=e+1;return{key:"rsi".concat(r),title:"RSI".concat(r,": "),type:"line"}})},calc:function(i,t){var e=t.calcParams,r=t.figures,n=[],a=[];return i.map(function(s,l){var o,u={},c=((o=i[l-1])!==null&&o!==void 0?o:s).close,h=s.close-c;return e.forEach(function(f,d){var v,p,g;if(h>0?n[d]=((v=n[d])!==null&&v!==void 0?v:0)+h:a[d]=((p=a[d])!==null&&p!==void 0?p:0)+Math.abs(h),l>=f-1){a[d]!==0?u[r[d].key]=100-100/(1+n[d]/a[d]):u[r[d].key]=0;var m=i[l-(f-1)],_=(g=i[l-f])!==null&&g!==void 0?g:m,S=m.close-_.close;S>0?n[d]-=S:a[d]-=Math.abs(S)}}),u})}},Dn={name:"SMA",shortName:"SMA",series:ft.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(i,t){var e=t.calcParams,r=0,n=0;return i.map(function(a,s){var l={},o=a.close;return r+=o,s>=e[0]-1&&(s>e[0]-1?n=(o*e[1]+n*(e[0]-e[1]+1))/(e[0]+1):n=r/e[0],l.sma=n),l})}},kn={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=[];return i.forEach(function(n,a){var s,l,o,u,c={},h=n.close;if(a>=e[0]-1){var f=Hr(i.slice(a-(e[0]-1),a+1),"high","low"),d=f[0],v=f[1],p=d-v,g=(h-v)/(p===0?1:p)*100;c.k=((e[1]-1)*((l=(s=r[a-1])===null||s===void 0?void 0:s.k)!==null&&l!==void 0?l:50)+g)/e[1],c.d=((e[2]-1)*((u=(o=r[a-1])===null||o===void 0?void 0:o.d)!==null&&u!==void 0?u:50)+c.k)/e[2],c.j=3*c.k-2*c.d}r.push(c)}),r}},An={name:"SAR",shortName:"SAR",series:ft.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(i,t,e){var r,n,a=i.current,s=(n=(r=a.indicatorData)===null||r===void 0?void 0:r.sar)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,l=a.kLineData,o=((l==null?void 0:l.high)+(l==null?void 0:l.low))/2,u=s<o?st(t.styles,"circles[0].upColor",e.circles[0].upColor):st(t.styles,"circles[0].downColor",e.circles[0].downColor);return{color:u}}}],calc:function(i,t){var e=t.calcParams,r=e[0]/100,n=e[1]/100,a=e[2]/100,s=r,l=-100,o=!1,u=0;return i.map(function(c,h){var f=u,d=c.high,v=c.low;if(o){(l===-100||l<d)&&(l=d,s=Math.min(s+n,a)),u=f+s*(l-f);var p=Math.min(i[Math.max(1,h)-1].low,v);u>c.low?(u=l,s=r,l=-100,o=!o):u>p&&(u=p)}else{(l===-100||l>v)&&(l=v,s=Math.min(s+n,a)),u=f+s*(l-f);var g=Math.max(i[Math.max(1,h)-1].high,d);u<c.high?(u=l,s=0,l=-100,o=!o):u<g&&(u=g)}return{sar:u}})}},Fn={name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n,a,s,l=0,o=0,u=0,c=[];return i.forEach(function(h,f){var d,v={},p=h.close;if(r+=p,f>=e[0]-1&&(f>e[0]-1?n=(2*p+(e[0]-1)*n)/(e[0]+1):n=r/e[0],l+=n,f>=e[0]*2-2&&(f>e[0]*2-2?a=(2*n+(e[0]-1)*a)/(e[0]+1):a=l/e[0],o+=a,f>=e[0]*3-3))){var g=void 0,m=0;f>e[0]*3-3?(g=(2*a+(e[0]-1)*s)/(e[0]+1),m=(g-s)/s*100):g=o/e[0],s=g,v.trix=m,u+=m,f>=e[0]*3+e[1]-4&&(v.maTrix=u/e[1],u-=(d=c[f-(e[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(v)}),c}};function Cr(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(i,t,e){var r=i.current.kLineData,n=st(t.styles,"bars[0].noChangeColor",e.bars[0].noChangeColor);return T(r)&&(r.close>r.open?n=st(t.styles,"bars[0].upColor",e.bars[0].upColor):r.close<r.open&&(n=st(t.styles,"bars[0].downColor",e.bars[0].downColor))),{color:n}}}}var Rn={name:"VOL",shortName:"VOL",series:ft.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Cr()],regenerateFigures:function(i){var t=i.map(function(e,r){return{key:"ma".concat(r+1),title:"MA".concat(e,": "),type:"line"}});return t.push(Cr()),t},calc:function(i,t){var e=t.calcParams,r=t.figures,n=[];return i.map(function(a,s){var l,o=(l=a.volume)!==null&&l!==void 0?l:0,u={volume:o};return e.forEach(function(c,h){var f,d;n[h]=((f=n[h])!==null&&f!==void 0?f:0)+o,s>=c-1&&(u[r[h].key]=n[h]/c,n[h]-=(d=i[s-(c-1)].volume)!==null&&d!==void 0?d:0)}),u})}},Bn={name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(i,t){var e=t.calcParams,r=0,n=0,a=0,s=0,l=[];return i.forEach(function(o,u){var c,h,f,d,v,p={},g=o.close,m=((c=i[u-1])!==null&&c!==void 0?c:o).close,_=(h=o.volume)!==null&&h!==void 0?h:0;if(g>m?r+=_:g<m?n+=_:a+=_,u>=e[0]-1){var S=a/2;n+S===0?p.vr=0:p.vr=(r+S)/(n+S)*100,s+=p.vr,u>=e[0]+e[1]-2&&(p.maVr=s/e[1],s-=(f=l[u-(e[1]-1)].vr)!==null&&f!==void 0?f:0);var y=i[u-(e[0]-1)],x=(d=i[u-e[0]])!==null&&d!==void 0?d:y,w=y.close,b=(v=y.volume)!==null&&v!==void 0?v:0;w>x.close?r-=b:w<x.close?n-=b:a-=b}l.push(p)}),l}},Ln={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(i){return i.map(function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}})},calc:function(i,t){var e=t.calcParams,r=t.figures;return i.map(function(n,a){var s={},l=n.close;return e.forEach(function(o,u){var c=o-1;if(a>=c){var h=Hr(i.slice(a-c,a+1),"high","low"),f=h[0],d=h[1],v=f-d;s[r[u].key]=v===0?0:(l-f)/v*100}}),s})}},$r={},Vn=[un,cn,hn,dn,fn,pn,gn,mn,_n,yn,Sn,xn,bn,wn,Cn,En,In,Pn,Mn,Tn,Dn,kn,An,Fn,Rn,Bn,Ln];Vn.forEach(function(i){$r[i.name]=qi.extend(i)});function Gr(i){var t;return(t=$r[i])!==null&&t!==void 0?t:null}var On=function(){function i(t){this._instances=new Map,this._chartStore=t}return i.prototype._overrideInstance=function(t,e){var r=e.shortName,n=e.series,a=e.calcParams,s=e.precision,l=e.figures,o=e.minValue,u=e.maxValue,c=e.shouldOhlc,h=e.shouldFormatBigNumber,f=e.visible,d=e.zLevel,v=e.styles,p=e.extendData,g=e.regenerateFigures,m=e.createTooltipDataSource,_=e.draw,S=e.calc,y=!1;O(r)&&t.setShortName(r)&&(y=!0),T(n)&&t.setSeries(n)&&(y=!0);var x=!1;Ct(a)&&t.setCalcParams(a)&&(y=!0,x=!0),Ct(l)&&t.setFigures(l)&&(y=!0,x=!0),o!==void 0&&t.setMinValue(o)&&(y=!0),u!==void 0&&t.setMinValue(u)&&(y=!0),R(s)&&t.setPrecision(s)&&(y=!0),Qt(c)&&t.setShouldOhlc(c)&&(y=!0),Qt(h)&&t.setShouldFormatBigNumber(h)&&(y=!0),Qt(f)&&t.setVisible(f)&&(y=!0);var w=!1;return R(d)&&t.setZLevel(d)&&(y=!0,w=!0),T(v)&&t.setStyles(v)&&(y=!0),p!==void 0&&t.setExtendData(p)&&(y=!0,x=!0),g!==void 0&&t.setRegenerateFigures(g)&&(y=!0),m!==void 0&&t.setCreateTooltipDataSource(m)&&(y=!0),_!==void 0&&t.setDraw(_)&&(y=!0),Ft(S)&&(t.calc=S,x=!0),[y,x,w]},i.prototype._sort=function(t){var e;O(t)?(e=this._instances.get(t))===null||e===void 0||e.sort(function(r,n){return r.zLevel-n.zLevel}):this._instances.forEach(function(r){r.sort(function(n,a){return n.zLevel-a.zLevel})})},i.prototype.addInstance=function(t,e,r){return ne(this,void 0,void 0,function(){var n,a,s,l,o;return ae(this,function(u){switch(u.label){case 0:return n=t.name,a=this._instances.get(e),T(a)?(s=a.find(function(c){return c.name===n}),T(s)?[4,Promise.reject(new Error("Duplicate indicators."))]:[3,2]):[3,2];case 1:return[2,u.sent()];case 2:return T(a)||(a=[]),l=Gr(n),o=new l,this.synchronizeSeriesPrecision(o),this._overrideInstance(o,t),r||(a=[]),a.push(o),this._instances.set(e,a),this._sort(e),[4,o.calcIndicator(this._chartStore.getDataList())];case 3:return[2,u.sent()]}})})},i.prototype.getInstances=function(t){var e;return(e=this._instances.get(t))!==null&&e!==void 0?e:[]},i.prototype.removeInstance=function(t,e){var r,n=!1,a=this._instances.get(t);if(T(a)){if(O(e)){var s=a.findIndex(function(l){return l.name===e});s>-1&&(a.splice(s,1),n=!0)}else this._instances.set(t,[]),n=!0;((r=this._instances.get(t))===null||r===void 0?void 0:r.length)===0&&this._instances.delete(t)}return n},i.prototype.hasInstances=function(t){return this._instances.has(t)},i.prototype.calcInstance=function(t,e){return ne(this,void 0,void 0,function(){var r,n,a,s,l=this;return ae(this,function(o){switch(o.label){case 0:return r=[],O(t)?O(e)?(n=this._instances.get(e),T(n)&&(a=n.find(function(u){return u.name===t}),T(a)&&r.push(a.calcIndicator(this._chartStore.getDataList())))):this._instances.forEach(function(u){var c=u.find(function(h){return h.name===t});T(c)&&r.push(c.calcIndicator(l._chartStore.getDataList()))}):this._instances.forEach(function(u){u.forEach(function(c){r.push(c.calcIndicator(l._chartStore.getDataList()))})}),[4,Promise.all(r)];case 1:return s=o.sent(),[2,s.includes(!0)]}})})},i.prototype.getInstanceByPaneId=function(t,e){var r,n,a=function(o){var u=new Map;return o.forEach(function(c){u.set(c.name,c)}),u};if(O(t)){var s=(r=this._instances.get(t))!==null&&r!==void 0?r:[];return O(e)?(n=s==null?void 0:s.find(function(o){return o.name===e}))!==null&&n!==void 0?n:null:a(s)}var l=new Map;return this._instances.forEach(function(o,u){l.set(u,a(o))}),l},i.prototype.synchronizeSeriesPrecision=function(t){var e=this._chartStore.getPrecision(),r=e.price,n=e.volume,a=function(s){switch(s.series){case ft.Price:{s.setPrecision(r,!0);break}case ft.Volume:{s.setPrecision(n,!0);break}}};T(t)?a(t):this._instances.forEach(function(s){s.forEach(function(l){a(l)})})},i.prototype.override=function(t,e){return ne(this,void 0,void 0,function(){var r,n,a,s,l,o,u,c=this;return ae(this,function(h){switch(h.label){case 0:return r=t.name,n=new Map,e!==null?(a=this._instances.get(e),T(a)&&n.set(e,a)):n=this._instances,s=!1,l=[],o=!1,n.forEach(function(f){var d=f.find(function(p){return p.name===r});if(T(d)){var v=c._overrideInstance(d,t);v[2]&&(o=!0),v[1]?l.push(d.calcIndicator(c._chartStore.getDataList())):v[0]&&(s=!0)}}),o&&this._sort(),[4,Promise.all(l)];case 1:return u=h.sent(),[2,[s,u.includes(!0)]]}})})},i}(),Nn=function(){function i(t){this._crosshair={},this._activeIcon=null,this._chartStore=t}return i.prototype.setCrosshair=function(t,e){var r=e??{},n=r.notInvalidate,a=r.notExecuteAction,s=this._chartStore.getDataList(),l=t??{},o,u;R(l.x)?(o=this._chartStore.getTimeScaleStore().coordinateToDataIndex(l.x),o<0?u=0:o>s.length-1?u=s.length-1:u=o):(o=s.length-1,u=o);var c=s[u],h=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(o),f={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=B(B({},l),{realX:h,kLineData:c,realDataIndex:o,dataIndex:u}),(f.x!==l.x||f.y!==l.y||f.paneId!==l.paneId)&&(c!==null&&!(a??!1)&&this._chartStore.getChart().crosshairChange(this._crosshair),(n??!1)||this._chartStore.getChart().updatePane(1))},i.prototype.recalculateCrosshair=function(t){this.setCrosshair(this._crosshair,{notInvalidate:t})},i.prototype.getCrosshair=function(){return this._crosshair},i.prototype.setActiveIcon=function(t){this._activeIcon=t??null},i.prototype.getActiveIcon=function(){return this._activeIcon},i.prototype.clear=function(){this.setCrosshair({},{notInvalidate:!0}),this.setActiveIcon()},i}(),zn={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t,e=i.coordinates,r=i.bounding,n=i.overlay,a=i.precision,s=i.thousandsSeparator,l=i.decimalFoldThreshold,o=i.yAxis,u=n.points;if(e.length>0){var c=!((t=o==null?void 0:o.isInCandle())!==null&&t!==void 0)||t?a.price:a.excludePriceVolumeMax,h=[],f=[],d=0,v=r.width;if(e.length>1&&R(u[0].value)&&R(u[1].value)){var p=[1,.786,.618,.5,.382,.236,0],g=e[0].y-e[1].y,m=u[0].value-u[1].value;p.forEach(function(_){var S,y=e[1].y+g*_,x=at(rt((((S=u[1].value)!==null&&S!==void 0?S:0)+m*_).toFixed(c),s),l);h.push({coordinates:[{x:d,y},{x:v,y}]}),f.push({x:d,y,text:"".concat(x," (").concat((_*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:h},{type:"text",isCheckEvent:!1,attrs:f}]}return[]}},Wn={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding,r={x:0,y:t[0].y};return T(t[1])&&t[0].x<t[1].x&&(r.x=e.width),[{type:"line",attrs:{coordinates:[t[0],r]}}]},performEventPressedMove:function(i){var t=i.points,e=i.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(i){var t=i.currentStep,e=i.points,r=i.performPoint;t===2&&(e[0].value=r.value)}},Xn={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=[];return t.length===2&&e.push({coordinates:t}),[{type:"line",attrs:e}]},performEventPressedMove:function(i){var t=i.points,e=i.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(i){var t=i.currentStep,e=i.points,r=i.performPoint;t===2&&(e[0].value=r.value)}},Yn={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]}}]}},nr=function(){function i(){this._children=[],this._callbacks=new Map}return i.prototype.registerEvent=function(t,e){return this._callbacks.set(t,e),this},i.prototype.onEvent=function(t,e,r){var n=this._callbacks.get(t);return T(n)&&this.checkEventOn(e)?n(e,r):!1},i.prototype.checkEventOn=function(t){var e,r;try{for(var n=Jt(this._children),a=n.next();!a.done;a=n.next()){var s=a.value;if(s.checkEventOn(t))return!0}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return!1},i.prototype.dispatchEvent=function(t,e,r){var n=this._children.length-1;if(n>-1){for(var a=n;a>-1;a--)if(this._children[a].dispatchEvent(t,e,r))return!0}return this.onEvent(t,e,r)},i.prototype.addChild=function(t){return this._children.push(t),this},i.prototype.clear=function(){this._children=[]},i}(),it=2,Hn=function(i){N(t,i);function t(e){var r=i.call(this)||this;return r.attrs=e.attrs,r.styles=e.styles,r}return t.prototype.checkEventOn=function(e){return this.checkEventOnImp(e,this.attrs,this.styles)},t.prototype.setAttrs=function(e){return this.attrs=e,this},t.prototype.setStyles=function(e){return this.styles=e,this},t.prototype.draw=function(e){this.drawImp(e,this.attrs,this.styles)},t.extend=function(e){var r=function(n){N(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.checkEventOnImp=function(s,l,o){return e.checkEventOn(s,l,o)},a.prototype.drawImp=function(s,l,o){e.draw(s,l,o)},a}(t);return r},t}(nr);function $n(i,t){var e=[];e=e.concat(t);for(var r=0;r<e.length;r++){var n=e[r].coordinates;if(n.length>1)for(var a=1;a<n.length;a++){var s=n[a-1],l=n[a];if(s.x===l.x){if(Math.abs(s.y-i.y)+Math.abs(l.y-i.y)-Math.abs(s.y-l.y)<it+it&&Math.abs(i.x-s.x)<it)return!0}else{var o=ar(s,l),u=Ur(o,i),c=Math.abs(u-i.y);if(Math.abs(s.x-i.x)+Math.abs(l.x-i.x)-Math.abs(s.x-l.x)<it+it&&c*c/(o[0]*o[0]+1)<it*it)return!0}}}return!1}function Ur(i,t){return i!==null?t.x*i[0]+i[1]:t.y}function Te(i,t,e){var r=ar(i,t);return Ur(r,e)}function ar(i,t){var e=i.x-t.x;if(e!==0){var r=(i.y-t.y)/e,n=i.y-r*i.x;return[r,n]}return null}function jr(i,t,e){var r=t.length,n=R(e)?e>0&&e<1?e:0:e?.5:0;if(n>0&&r>2){for(var a=t[0].x,s=t[0].y,l=1;l<r-1;l++){var o=t[l-1],u=t[l],c=t[l+1],h=u.x-o.x,f=u.y-o.y,d=c.x-u.x,v=c.y-u.y,p=c.x-o.x,g=c.y-o.y,m=Math.sqrt(h*h+f*f),_=Math.sqrt(d*d+v*v),S=_/(_+m),y=u.x+p*n*S,x=u.y+g*n*S;y=Math.min(y,Math.max(c.x,u.x)),x=Math.min(x,Math.max(c.y,u.y)),y=Math.max(y,Math.min(c.x,u.x)),x=Math.max(x,Math.min(c.y,u.y)),p=y-u.x,g=x-u.y;var w=u.x-p*m/_,b=u.y-g*m/_;w=Math.min(w,Math.max(o.x,u.x)),b=Math.min(b,Math.max(o.y,u.y)),w=Math.max(w,Math.min(o.x,u.x)),b=Math.max(b,Math.min(o.y,u.y)),p=u.x-w,g=u.y-b,y=u.x+p*_/m,x=u.y+g*_/m,i.bezierCurveTo(a,s,w,b,u.x,u.y),a=y,s=x}var E=t[r-1];i.bezierCurveTo(a,s,E.x,E.y,E.x,E.y)}else for(var l=1;l<r;l++)i.lineTo(t[l].x,t[l].y)}function Gn(i,t,e){var r=[];r=r.concat(t);var n=e.style,a=n===void 0?G.Solid:n,s=e.smooth,l=s===void 0?!1:s,o=e.size,u=o===void 0?1:o,c=e.color,h=c===void 0?"currentColor":c,f=e.dashedValue,d=f===void 0?[2,2]:f;i.lineWidth=u,i.strokeStyle=h,a===G.Dashed?i.setLineDash(d):i.setLineDash([]);var v=u%2===1?.5:0;r.forEach(function(p){var g=p.coordinates;g.length>1&&(g.length===2&&(g[0].x===g[1].x||g[0].y===g[1].y)?(i.beginPath(),g[0].x===g[1].x?(i.moveTo(g[0].x+v,g[0].y),i.lineTo(g[1].x+v,g[1].y)):(i.moveTo(g[0].x,g[0].y+v),i.lineTo(g[1].x,g[1].y+v)),i.stroke(),i.closePath()):(i.save(),u%2===1&&i.translate(.5,.5),i.beginPath(),i.moveTo(g[0].x,g[0].y),jr(i,g,l),i.stroke(),i.closePath(),i.restore()))})}var Un={name:"line",checkEventOn:$n,draw:function(i,t,e){Gn(i,t,e)}};function Zr(i,t,e){var r=e??0,n=[];if(i.length>1)if(i[0].x===i[1].x){var a=0,s=t.height;if(n.push({coordinates:[{x:i[0].x,y:a},{x:i[0].x,y:s}]}),i.length>2){n.push({coordinates:[{x:i[2].x,y:a},{x:i[2].x,y:s}]});for(var l=i[0].x-i[2].x,o=0;o<r;o++){var u=l*(o+1);n.push({coordinates:[{x:i[0].x+u,y:a},{x:i[0].x+u,y:s}]})}}}else{var c=0,h=t.width,f=ar(i[0],i[1]),d=f[0],v=f[1];if(n.push({coordinates:[{x:c,y:c*d+v},{x:h,y:h*d+v}]}),i.length>2){var p=i[2].y-d*i[2].x;n.push({coordinates:[{x:c,y:c*d+p},{x:h,y:h*d+p}]});for(var l=v-p,o=0;o<r;o++){var g=v+l*(o+1);n.push({coordinates:[{x:c,y:c*d+g},{x:h,y:h*d+g}]})}}}return n}var jn={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return[{type:"line",attrs:Zr(t,e)}]}},Zn={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return[{type:"line",attrs:Zr(t,e,1)}]}},qn={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t,e=i.coordinates,r=i.bounding,n=i.precision,a=i.overlay,s=i.thousandsSeparator,l=i.decimalFoldThreshold,o=i.yAxis,u=a.points[0].value,c=u===void 0?0:u,h=!((t=o==null?void 0:o.isInCandle())!==null&&t!==void 0)||t?n.price:n.excludePriceVolumeMax;return[{type:"line",attrs:{coordinates:[e[0],{x:r.width,y:e[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:e[0].x,y:e[0].y,text:at(rt(c.toFixed(h),s),l),baseline:"bottom"}}]}};function Kn(i,t){if(i.length>1){var e=void 0;return i[0].x===i[1].x&&i[0].y!==i[1].y?i[0].y<i[1].y?e={x:i[0].x,y:t.height}:e={x:i[0].x,y:0}:i[0].x>i[1].x?e={x:0,y:Te(i[0],i[1],{x:0,y:i[0].y})}:e={x:t.width,y:Te(i[0],i[1],{x:t.width,y:i[0].y})},{coordinates:[i[0],e]}}return[]}var Qn={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return[{type:"line",attrs:Kn(t,e)}]}},Jn={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},ta={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Te(t[0],t[1],{x:0,y:t[0].y})},{x:e.width,y:Te(t[0],t[1],{x:e.width,y:t[0].y})}]}}]:[]}},ea={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;if(t.length===2){var r={x:t[0].x,y:0};return t[0].y<t[1].y&&(r.y=e.height),[{type:"line",attrs:{coordinates:[t[0],r]}}]}return[]},performEventPressedMove:function(i){var t=i.points,e=i.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(i){var t=i.currentStep,e=i.points,r=i.performPoint;t===2&&(e[0].timestamp=r.timestamp,e[0].dataIndex=r.dataIndex)}},ra={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(i){var t=i.points,e=i.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(i){var t=i.currentStep,e=i.points,r=i.performPoint;t===2&&(e[0].timestamp=r.timestamp,e[0].dataIndex=r.dataIndex)}},ia={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(i){var t=i.coordinates,e=i.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]}},na={name:"simpleAnnotation",totalStep:2,styles:{line:{style:G.Dashed}},createPointFigures:function(i){var t,e=i.overlay,r=i.coordinates,n;T(e.extendData)&&(Ft(e.extendData)?n=e.extendData(e):n=(t=e.extendData)!==null&&t!==void 0?t:"");var a=r[0].x,s=r[0].y-6,l=s-50,o=l-5;return[{type:"line",attrs:{coordinates:[{x:a,y:s},{x:a,y:l}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:a,y:l},{x:a-4,y:o},{x:a+4,y:o}]},ignoreEvent:!0},{type:"text",attrs:{x:a,y:o,text:n??"",align:"center",baseline:"bottom"},ignoreEvent:!0}]}},aa={name:"simpleTag",totalStep:2,styles:{line:{style:G.Dashed}},createPointFigures:function(i){var t=i.bounding,e=i.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(i){var t,e,r=i.overlay,n=i.coordinates,a=i.bounding,s=i.yAxis,l=i.precision,o=(t=s==null?void 0:s.isFromZero())!==null&&t!==void 0?t:!1,u,c;o?(u="left",c=0):(u="right",c=a.width);var h;return T(r.extendData)&&(Ft(r.extendData)?h=r.extendData(r):h=(e=r.extendData)!==null&&e!==void 0?e:""),!T(h)&&R(r.points[0].value)&&(h=Q(r.points[0].value,l.price)),{type:"text",attrs:{x:c,y:n[0].y,text:h??"",align:u,baseline:"middle"}}}},qr={},oa=[zn,Wn,Xn,Yn,jn,Zn,qn,Qn,Jn,ta,ea,ra,ia,na,aa];oa.forEach(function(i){qr[i.name]=Ji.extend(i)});function sa(i){var t;return(t=qr[i])!==null&&t!==void 0?t:null}var la=30,ua=100,H={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},ca=function(){function i(t){this._instances=new Map,this._progressInstanceInfo=null,this._pressedInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chartStore=t}return i.prototype._overrideInstance=function(t,e){var r=e.id,n=e.groupId,a=e.points,s=e.styles,l=e.lock,o=e.visible,u=e.zLevel,c=e.mode,h=e.modeSensitivity,f=e.extendData,d=e.onDrawStart,v=e.onDrawing,p=e.onDrawEnd,g=e.onClick,m=e.onDoubleClick,_=e.onRightClick,S=e.onPressedMoveStart,y=e.onPressedMoving,x=e.onPressedMoveEnd,w=e.onMouseEnter,b=e.onMouseLeave,E=e.onRemoved,C=e.onSelected,P=e.onDeselected,M=!1,I=!1;return O(r)&&t.setId(r),O(n)&&t.setGroupId(n),Ct(a)&&t.setPoints(a)&&(M=!0),T(s)&&t.setStyles(s)&&(M=!0),Qt(l)&&t.setLock(l),Qt(o)&&t.setVisible(o)&&(M=!0),R(u)&&t.setZLevel(u)&&(M=!0,I=!0),T(c)&&t.setMode(c),R(h)&&t.setModeSensitivity(h),f!==void 0&&t.setExtendData(f)&&(M=!0),d!==void 0&&t.setOnDrawStartCallback(d),v!==void 0&&t.setOnDrawingCallback(v),p!==void 0&&t.setOnDrawEndCallback(p),g!==void 0&&t.setOnClickCallback(g),m!==void 0&&t.setOnDoubleClickCallback(m),_!==void 0&&t.setOnRightClickCallback(_),S!==void 0&&t.setOnPressedMoveStartCallback(S),y!==void 0&&t.setOnPressedMovingCallback(y),x!==void 0&&t.setOnPressedMoveEndCallback(x),w!==void 0&&t.setOnMouseEnterCallback(w),b!==void 0&&t.setOnMouseLeaveCallback(b),E!==void 0&&t.setOnRemovedCallback(E),C!==void 0&&t.setOnSelectedCallback(C),P!==void 0&&t.setOnDeselectedCallback(P),[M,I]},i.prototype.getInstanceById=function(t){var e,r;try{for(var n=Jt(this._instances),a=n.next();!a.done;a=n.next()){var s=a.value,l=s[1],o=l.find(function(u){return u.id===t});if(T(o))return o}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this._progressInstanceInfo!==null&&this._progressInstanceInfo.instance.id===t?this._progressInstanceInfo.instance:null},i.prototype._sort=function(t){var e;O(t)?(e=this._instances.get(t))===null||e===void 0||e.sort(function(r,n){return r.zLevel-n.zLevel}):this._instances.forEach(function(r){r.sort(function(n,a){return n.zLevel-a.zLevel})})},i.prototype.addInstances=function(t,e,r){var n=this,a=t.map(function(l){var o,u,c,h,f=(o=l.id)!==null&&o!==void 0?o:Yr(Qi);if(n.getInstanceById(f)===null){var d=sa(l.name);if(d!==null){var v=new d;v.setPaneId(e);var p=(u=l.groupId)!==null&&u!==void 0?u:f;return l.id=f,l.groupId=p,n._overrideInstance(v,l),v.isDrawing()?n._progressInstanceInfo={paneId:e,instance:v,appointPaneFlag:r}:(n._instances.has(e)||n._instances.set(e,[]),(c=n._instances.get(e))===null||c===void 0||c.push(v)),v.isStart()&&((h=v.onDrawStart)===null||h===void 0||h.call(v,{overlay:v})),f}}return null});if(a.some(function(l){return l!==null})){this._sort();var s=this._chartStore.getChart();s.updatePane(1,e),s.updatePane(1,H.X_AXIS)}return a},i.prototype.getProgressInstanceInfo=function(){return this._progressInstanceInfo},i.prototype.progressInstanceComplete=function(){var t;if(this._progressInstanceInfo!==null){var e=this._progressInstanceInfo,r=e.instance,n=e.paneId;r.isDrawing()||(this._instances.has(n)||this._instances.set(n,[]),(t=this._instances.get(n))===null||t===void 0||t.push(r),this._sort(n),this._progressInstanceInfo=null)}},i.prototype.updateProgressInstanceInfo=function(t,e){this._progressInstanceInfo!==null&&(Qt(e)&&e&&(this._progressInstanceInfo.appointPaneFlag=e),this._progressInstanceInfo.paneId=t,this._progressInstanceInfo.instance.setPaneId(t))},i.prototype.getInstances=function(t){var e;if(!O(t)){var r=[];return this._instances.forEach(function(n){r=r.concat(n)}),r}return(e=this._instances.get(t))!==null&&e!==void 0?e:[]},i.prototype.override=function(t){var e=this,r=t.id,n=t.groupId,a=t.name,s=!1,l=!1,o=function(d){var v=e._overrideInstance(d,t);v[0]&&(s=!0),v[1]&&(l=!0)};if(O(r)){var u=this.getInstanceById(r);u!==null&&o(u)}else{var c=O(a),h=O(n);if(this._instances.forEach(function(d){d.forEach(function(v){(c&&v.name===a||h&&v.groupId===n||!c&&!h)&&o(v)})}),this._progressInstanceInfo!==null){var f=this._progressInstanceInfo.instance;(c&&f.name===a||h&&f.groupId===n||!c&&!h)&&o(f)}}l&&this._sort(),s&&this._chartStore.getChart().updatePane(1)},i.prototype.removeInstance=function(t){var e,r,n,a=function(p,g){if(O(p.id)){if(g.id!==p.id)return!1}else if(O(p.groupId)){if(g.groupId!==p.groupId)return!1}else if(O(p.name)&&g.name!==p.name)return!1;return!0},s=[],l=T(t);if(this._progressInstanceInfo!==null){var o=this._progressInstanceInfo.instance;(!l||l&&a(t,o))&&(s.push(this._progressInstanceInfo.paneId),(n=o.onRemoved)===null||n===void 0||n.call(o,{overlay:o}),this._progressInstanceInfo=null)}if(l){var u=new Map,c=function(p){var g=p[1],m=g.filter(function(_){var S;return a(t,_)?(s.includes(p[0])||s.push(p[0]),(S=_.onRemoved)===null||S===void 0||S.call(_,{overlay:_}),!1):!0});m.length>0&&u.set(p[0],m)};try{for(var h=Jt(this._instances),f=h.next();!f.done;f=h.next()){var d=f.value;c(d)}}catch(p){e={error:p}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}this._instances=u}else this._instances.forEach(function(p,g){s.push(g),p.forEach(function(m){var _;(_=m.onRemoved)===null||_===void 0||_.call(m,{overlay:m})})}),this._instances.clear();if(s.length>0){var v=this._chartStore.getChart();s.forEach(function(p){v.updatePane(1,p)}),v.updatePane(1,H.X_AXIS)}},i.prototype.setPressedInstanceInfo=function(t){this._pressedInstanceInfo=t},i.prototype.getPressedInstanceInfo=function(){return this._pressedInstanceInfo},i.prototype.updatePointPosition=function(t,e){if(t>0){var r=this._chartStore.getDataList();this._instances.forEach(function(n){n.forEach(function(a){var s=a.points;s.forEach(function(l){if(!T(l.timestamp)&&T(l.dataIndex)){e===_t.Forward&&(l.dataIndex=l.dataIndex+t);var o=r[l.dataIndex];l.timestamp=o==null?void 0:o.timestamp}})})})}},i.prototype.setHoverInstanceInfo=function(t,e){var r,n,a=this._hoverInstanceInfo,s=a.instance,l=a.figureType,o=a.figureKey,u=a.figureIndex;if(((s==null?void 0:s.id)!==((r=t.instance)===null||r===void 0?void 0:r.id)||l!==t.figureType||u!==t.figureIndex)&&(this._hoverInstanceInfo=t,(s==null?void 0:s.id)!==((n=t.instance)===null||n===void 0?void 0:n.id))){var c=!1,h=!1;s!==null&&(h=!0,Ft(s.onMouseLeave)&&(s.onMouseLeave(B({overlay:s,figureKey:o,figureIndex:u},e)),c=!0)),t.instance!==null&&(h=!0,Ft(t.instance.onMouseEnter)&&(t.instance.onMouseEnter(B({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),c=!0)),h&&this._sort(),c||this._chartStore.getChart().updatePane(1)}},i.prototype.getHoverInstanceInfo=function(){return this._hoverInstanceInfo},i.prototype.setClickInstanceInfo=function(t,e){var r,n,a,s,l,o,u,c,h,f=this._clickInstanceInfo,d=f.paneId,v=f.instance,p=f.figureType,g=f.figureKey,m=f.figureIndex;if((n=(r=t.instance)===null||r===void 0?void 0:r.isDrawing())!==null&&n!==void 0&&n||(s=(a=t.instance)===null||a===void 0?void 0:a.onClick)===null||s===void 0||s.call(a,B({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),((v==null?void 0:v.id)!==((l=t.instance)===null||l===void 0?void 0:l.id)||p!==t.figureType||m!==t.figureIndex)&&(this._clickInstanceInfo=t,(v==null?void 0:v.id)!==((o=t.instance)===null||o===void 0?void 0:o.id))){(u=v==null?void 0:v.onDeselected)===null||u===void 0||u.call(v,B({overlay:v,figureKey:g,figureIndex:m},e)),(h=(c=t.instance)===null||c===void 0?void 0:c.onSelected)===null||h===void 0||h.call(c,B({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e));var _=this._chartStore.getChart();_.updatePane(1,t.paneId),d!==t.paneId&&_.updatePane(1,d),_.updatePane(1,H.X_AXIS)}},i.prototype.getClickInstanceInfo=function(){return this._clickInstanceInfo},i.prototype.isEmpty=function(){return this._instances.size===0&&this._progressInstanceInfo===null},i.prototype.isDrawing=function(){var t,e;return this._progressInstanceInfo!==null&&((e=(t=this._progressInstanceInfo)===null||t===void 0?void 0:t.instance.isDrawing())!==null&&e!==void 0?e:!1)},i}(),ha=function(){function i(){this._actions=new Map}return i.prototype.execute=function(t,e){var r;(r=this._actions.get(t))===null||r===void 0||r.execute(e)},i.prototype.subscribe=function(t,e){var r;this._actions.has(t)||this._actions.set(t,new Zi),(r=this._actions.get(t))===null||r===void 0||r.subscribe(e)},i.prototype.unsubscribe=function(t,e){var r=this._actions.get(t);T(r)&&(r.unsubscribe(e),r.isEmpty()&&this._actions.delete(t))},i.prototype.has=function(t){var e=this._actions.get(t);return T(e)&&!e.isEmpty()},i}(),va={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},da={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},fa={light:va,dark:da};function Kr(i){var t;return(t=fa[i])!==null&&t!==void 0?t:null}var pa=function(){function i(t,e){this._styles=Hi(),this._customApi=tn(),this._locale=en,this._precision={price:2,volume:0},this._thousandsSeparator=",",this._decimalFoldThreshold=3,this._dataList=[],this._loadMoreCallback=null,this._loadDataCallback=null,this._loading=!0,this._forwardMore=!0,this._backwardMore=!0,this._timeScaleStore=new ln(this),this._indicatorStore=new On(this),this._overlayStore=new ca(this),this._tooltipStore=new Nn(this),this._actionStore=new ha,this._visibleDataList=[],this._chart=t,this.setOptions(e)}return i.prototype.adjustVisibleDataList=function(){this._visibleDataList=[];for(var t=this._timeScaleStore.getVisibleRange(),e=t.realFrom,r=t.realTo,n=e;n<r;n++){var a=this._dataList[n],s=this._timeScaleStore.dataIndexToCoordinate(n);this._visibleDataList.push({dataIndex:n,x:s,data:a})}},i.prototype.setOptions=function(t){var e,r,n,a;if(T(t)){var s=t.locale,l=t.timezone,o=t.styles,u=t.customApi,c=t.thousandsSeparator,h=t.decimalFoldThreshold;if(O(s)&&(this._locale=s),O(l)&&this._timeScaleStore.setTimezone(l),T(o)){var f=null;O(o)?f=Kr(o):f=o,St(this._styles,f),Ct((r=(e=f==null?void 0:f.candle)===null||e===void 0?void 0:e.tooltip)===null||r===void 0?void 0:r.custom)&&(this._styles.candle.tooltip.custom=(a=(n=f==null?void 0:f.candle)===null||n===void 0?void 0:n.tooltip)===null||a===void 0?void 0:a.custom)}T(u)&&St(this._customApi,u),O(c)&&(this._thousandsSeparator=c),R(h)&&h>0&&(this._decimalFoldThreshold=h)}return this},i.prototype.getStyles=function(){return this._styles},i.prototype.getLocale=function(){return this._locale},i.prototype.getCustomApi=function(){return this._customApi},i.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},i.prototype.getDecimalFoldThreshold=function(){return this._decimalFoldThreshold},i.prototype.getPrecision=function(){return this._precision},i.prototype.setPrecision=function(t){return this._precision=t,this._indicatorStore.synchronizeSeriesPrecision(),this},i.prototype.getDataList=function(){return this._dataList},i.prototype.getVisibleFirstData=function(){var t,e=this._timeScaleStore.getVisibleRange().from;return(t=this._dataList[e])!==null&&t!==void 0?t:null},i.prototype.getVisibleDataList=function(){return this._visibleDataList},i.prototype.addData=function(t,e,r){return ne(this,void 0,void 0,function(){var n,a,s,l,o,u,c;return ae(this,function(h){switch(h.label){case 0:if(n=!1,a=!1,s=0,Ct(t)){switch(s=t.length,e){case _t.Init:{this.clear(),this._dataList=t,this._forwardMore=r??!0,this._timeScaleStore.resetOffsetRightDistance(),a=!0;break}case _t.Backward:{this._dataList=this._dataList.concat(t),this._backwardMore=r??!1,a=s>0;break}case _t.Forward:this._dataList=t.concat(this._dataList),this._forwardMore=r??!1,a=s>0}this._loading=!1,n=!0}else l=this._dataList.length,o=t.timestamp,u=st(this._dataList[l-1],"timestamp",0),o>u?(this._dataList.push(t),c=this._timeScaleStore.getLastBarRightSideDiffBarCount(),c<0&&this._timeScaleStore.setLastBarRightSideDiffBarCount(--c),s=1,n=!0,a=!0):o===u&&(this._dataList[l-1]=t,n=!0,a=!0);if(!n)return[3,5];h.label=1;case 1:return h.trys.push([1,4,,5]),this._overlayStore.updatePointPosition(s,e),a?(this._timeScaleStore.adjustVisibleRange(),this._tooltipStore.recalculateCrosshair(!0),[4,this._indicatorStore.calcInstance()]):[3,3];case 2:h.sent(),this._chart.adjustPaneViewport(!1,!0,!0,!0),h.label=3;case 3:return this._actionStore.execute(yt.OnDataReady),[3,5];case 4:return h.sent(),[3,5];case 5:return[2]}})})},i.prototype.setLoadMoreCallback=function(t){this._loadMoreCallback=t},i.prototype.executeLoadMoreCallback=function(t){this._forwardMore&&!this._loading&&T(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(t))},i.prototype.setLoadDataCallback=function(t){this._loadDataCallback=t},i.prototype.executeLoadDataCallback=function(t){var e=this;if(!this._loading&&T(this._loadDataCallback)&&(this._forwardMore&&t.type===_t.Forward||this._backwardMore&&t.type===_t.Backward)){var r=function(n,a){e.addData(n,t.type,a).then(function(){}).catch(function(){})};this._loading=!0,this._loadDataCallback(B(B({},t),{callback:r}))}},i.prototype.clear=function(){this._forwardMore=!0,this._backwardMore=!0,this._loading=!0,this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear(),this._tooltipStore.clear()},i.prototype.getTimeScaleStore=function(){return this._timeScaleStore},i.prototype.getIndicatorStore=function(){return this._indicatorStore},i.prototype.getOverlayStore=function(){return this._overlayStore},i.prototype.getTooltipStore=function(){return this._tooltipStore},i.prototype.getActionStore=function(){return this._actionStore},i.prototype.getChart=function(){return this._chart},i}(),z={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},ge=7;function ga(){return ne(this,void 0,void 0,function(){return ae(this,function(i){switch(i.label){case 0:return[4,new Promise(function(t){var e=new ResizeObserver(function(r){t(r.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,i.sent()]}})})}var Er=function(){function i(t,e){var r=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=ze,this._mediaQueryListener=function(){var n=Ht(r._element);r._nextPixelWidth=Math.round(r._element.clientWidth*n),r._nextPixelHeight=Math.round(r._element.clientHeight*n),r._resetPixelRatio()},this._listener=e,this._element=Rt("canvas",t),this._ctx=this._element.getContext("2d",{willReadFrequently:!0}),ga().then(function(n){r._supportedDevicePixelContentBox=n,n?(r._resizeObserver=new ResizeObserver(function(a){var s,l=a.find(function(u){return u.target===r._element}),o=(s=l==null?void 0:l.devicePixelContentBoxSize)===null||s===void 0?void 0:s[0];T(o)&&(r._nextPixelWidth=o.inlineSize,r._nextPixelHeight=o.blockSize,(r._pixelWidth!==r._nextPixelWidth||r._pixelHeight!==r._nextPixelHeight)&&r._resetPixelRatio())}),r._resizeObserver.observe(r._element,{box:"device-pixel-content-box"})):(r._mediaQueryList=window.matchMedia("(resolution: ".concat(Ht(r._element),"dppx)")),r._mediaQueryList.addListener(r._mediaQueryListener))}).catch(function(n){return!1})}return i.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var e=t._element.clientWidth,r=t._element.clientHeight,n=t._nextPixelWidth/e,a=t._nextPixelHeight/r;t._width=e,t._height=r,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight,t._ctx.scale(n,a)})},i.prototype._executeListener=function(t){var e=this;this._requestAnimationId===ze&&(this._requestAnimationId=Me(function(){e._ctx.clearRect(0,0,e._width,e._height),t==null||t(),e._listener(),e._requestAnimationId=ze}))},i.prototype.update=function(t,e){if(this._width!==t||this._height!==e){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(e,"px"),!this._supportedDevicePixelContentBox){var r=Ht(this._element);this._nextPixelWidth=Math.round(t*r),this._nextPixelHeight=Math.round(e*r),this._resetPixelRatio()}}else this._executeListener()},i.prototype.getElement=function(){return this._element},i.prototype.getContext=function(){return this._ctx},i.prototype.destroy=function(){T(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),T(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},i}();function Qr(i){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return T(i)&&St(t,i),t}var Jr=function(i){N(t,i);function t(e,r){var n=i.call(this)||this;return n._bounding=Qr(),n._pane=r,n._rootContainer=e,n._container=n.createContainer(),e.appendChild(n._container),n}return t.prototype.setBounding=function(e){return St(this._bounding,e),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.update=function(e){this.updateImp(this._container,this._bounding,e??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t}(nr),or=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;n._mainCanvas=new Er({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new Er({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var a=n.getContainer();return a.appendChild(n._mainCanvas.getElement()),a.appendChild(n._overlayCanvas.getElement()),n}return t.prototype.createContainer=function(){return Rt("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(e,r,n){var a=r.width,s=r.height,l=r.left;e.style.left="".concat(l,"px");var o=n,u=e.clientWidth,c=e.clientHeight;switch((a!==u||s!==c)&&(e.style.width="".concat(a,"px"),e.style.height="".concat(s,"px"),o=3),o){case 0:{this._mainCanvas.update(a,s);break}case 1:{this._overlayCanvas.update(a,s);break}case 3:case 4:{this._mainCanvas.update(a,s),this._overlayCanvas.update(a,s);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(e){var r=this.getBounding(),n=r.width,a=r.height,s=Rt("canvas",{width:"".concat(n,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),o=Ht(s);return s.width=n*o,s.height=a*o,l.scale(o,o),l.drawImage(this._mainCanvas.getElement(),0,0,n,a),e&&l.drawImage(this._overlayCanvas.getElement(),0,0,n,a),s},t}(Jr);function ue(i){return i==="transparent"||i==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(i)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(i)}function ma(i,t){var e=[];e=e.concat(t);for(var r=0;r<e.length;r++){var n=e[r],a=n.x,s=n.y,l=n.r,o=i.x-a,u=i.y-s;if(!(o*o+u*u>l*l))return!0}return!1}function _a(i,t,e){var r=[];r=r.concat(t);var n=e.style,a=n===void 0?Y.Fill:n,s=e.color,l=s===void 0?"currentColor":s,o=e.borderSize,u=o===void 0?1:o,c=e.borderColor,h=c===void 0?"currentColor":c,f=e.borderStyle,d=f===void 0?G.Solid:f,v=e.borderDashedValue,p=v===void 0?[2,2]:v,g=(a===Y.Fill||e.style===Y.StrokeFill)&&(!O(l)||!ue(l));g&&(i.fillStyle=l,r.forEach(function(m){var _=m.x,S=m.y,y=m.r;i.beginPath(),i.arc(_,S,y,0,Math.PI*2),i.closePath(),i.fill()})),(a===Y.Stroke||e.style===Y.StrokeFill)&&u>0&&!ue(h)&&(i.strokeStyle=h,i.lineWidth=u,d===G.Dashed?i.setLineDash(p):i.setLineDash([]),r.forEach(function(m){var _=m.x,S=m.y,y=m.r;(!g||y>u)&&(i.beginPath(),i.arc(_,S,y,0,Math.PI*2),i.closePath(),i.stroke())}))}var ya={name:"circle",checkEventOn:ma,draw:function(i,t,e){_a(i,t,e)}};function Sa(i,t){var e=[];e=e.concat(t);for(var r=0;r<e.length;r++){for(var n=!1,a=e[r].coordinates,s=0,l=a.length-1;s<a.length;l=s++)a[s].y>i.y!=a[l].y>i.y&&i.x<(a[l].x-a[s].x)*(i.y-a[s].y)/(a[l].y-a[s].y)+a[s].x&&(n=!n);if(n)return!0}return!1}function xa(i,t,e){var r=[];r=r.concat(t);var n=e.style,a=n===void 0?Y.Fill:n,s=e.color,l=s===void 0?"currentColor":s,o=e.borderSize,u=o===void 0?1:o,c=e.borderColor,h=c===void 0?"currentColor":c,f=e.borderStyle,d=f===void 0?G.Solid:f,v=e.borderDashedValue,p=v===void 0?[2,2]:v;(a===Y.Fill||e.style===Y.StrokeFill)&&(!O(l)||!ue(l))&&(i.fillStyle=l,r.forEach(function(g){var m=g.coordinates;i.beginPath(),i.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)i.lineTo(m[_].x,m[_].y);i.closePath(),i.fill()})),(a===Y.Stroke||e.style===Y.StrokeFill)&&u>0&&!ue(h)&&(i.strokeStyle=h,i.lineWidth=u,d===G.Dashed?i.setLineDash(p):i.setLineDash([]),r.forEach(function(g){var m=g.coordinates;i.beginPath(),i.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)i.lineTo(m[_].x,m[_].y);i.closePath(),i.stroke()}))}var ba={name:"polygon",checkEventOn:Sa,draw:function(i,t,e){xa(i,t,e)}};function wa(i,t){var e=[];e=e.concat(t);for(var r=0;r<e.length;r++){var n=e[r],a=n.x,s=n.width;s<it*2&&(a-=it,s=it*2);var l=n.y,o=n.height;if(o<it*2&&(l-=it,o=it*2),i.x>=a&&i.x<=a+s&&i.y>=l&&i.y<=l+o)return!0}return!1}function ti(i,t,e){var r,n=[];n=n.concat(t);var a=e.style,s=a===void 0?Y.Fill:a,l=e.color,o=l===void 0?"transparent":l,u=e.borderSize,c=u===void 0?1:u,h=e.borderColor,f=h===void 0?"transparent":h,d=e.borderStyle,v=d===void 0?G.Solid:d,p=e.borderRadius,g=p===void 0?0:p,m=e.borderDashedValue,_=m===void 0?[2,2]:m,S=(r=i.roundRect)!==null&&r!==void 0?r:i.rect,y=(s===Y.Fill||e.style===Y.StrokeFill)&&(!O(o)||!ue(o));if(y&&(i.fillStyle=o,n.forEach(function(b){var E=b.x,C=b.y,P=b.width,M=b.height;i.beginPath(),S.call(i,E,C,P,M,g),i.closePath(),i.fill()})),(s===Y.Stroke||e.style===Y.StrokeFill)&&c>0&&!ue(f)){i.strokeStyle=f,i.fillStyle=f,i.lineWidth=c,v===G.Dashed?i.setLineDash(_):i.setLineDash([]);var x=c%2===1?.5:0,w=Math.round(x*2);n.forEach(function(b){var E=b.x,C=b.y,P=b.width,M=b.height;P>c*2&&M>c*2?(i.beginPath(),S.call(i,E+x,C+x,P-w,M-w,g),i.closePath(),i.stroke()):y||i.fillRect(E,C,P,M)})}}var Ca={name:"rect",checkEventOn:wa,draw:function(i,t,e){ti(i,t,e)}};function ei(i,t){var e=t.size,r=e===void 0?12:e,n=t.paddingLeft,a=n===void 0?0:n,s=t.paddingTop,l=s===void 0?0:s,o=t.paddingRight,u=o===void 0?0:o,c=t.paddingBottom,h=c===void 0?0:c,f=t.weight,d=f===void 0?"normal":f,v=t.family,p=i.x,g=i.y,m=i.text,_=i.align,S=_===void 0?"left":_,y=i.baseline,x=y===void 0?"top":y,w=i.width,b=i.height,E=w??a+Pe(m,r,d,v)+u,C=b??l+r+h,P;switch(S){case"left":case"start":{P=p;break}case"right":case"end":{P=p-E;break}default:{P=p-E/2;break}}var M;switch(x){case"top":case"hanging":{M=g;break}case"bottom":case"ideographic":case"alphabetic":{M=g-C;break}default:{M=g-C/2;break}}return{x:P,y:M,width:E,height:C}}function Ea(i,t,e){var r=[];r=r.concat(t);for(var n=0;n<r.length;n++){var a=ei(r[n],e),s=a.x,l=a.y,o=a.width,u=a.height;if(i.x>=s&&i.x<=s+o&&i.y>=l&&i.y<=l+u)return!0}return!1}function Ia(i,t,e){var r=[];r=r.concat(t);var n=e.color,a=n===void 0?"currentColor":n,s=e.size,l=s===void 0?12:s,o=e.family,u=e.weight,c=e.paddingLeft,h=c===void 0?0:c,f=e.paddingTop,d=f===void 0?0:f,v=e.paddingRight,p=v===void 0?0:v,g=r.map(function(m){return ei(m,e)});ti(i,g,B(B({},e),{color:e.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=te(l,u,o),i.fillStyle=a,r.forEach(function(m,_){var S=g[_];i.fillText(m.text,S.x+h,S.y+d,S.width-h-p)})}var ri={name:"text",checkEventOn:Ea,draw:function(i,t,e){Ia(i,t,e)}},Pa=ri;function Ma(i,t){var e=i.x-t.x,r=i.y-t.y;return Math.sqrt(e*e+r*r)}function Ta(i,t){var e=[];e=e.concat(t);for(var r=0;r<e.length;r++){var n=e[r];if(Math.abs(Ma(i,n)-n.r)<it){var a=n.r,s=n.startAngle,l=n.endAngle,o=a*Math.cos(s)+n.x,u=a*Math.sin(s)+n.y,c=a*Math.cos(l)+n.x,h=a*Math.sin(l)+n.y;if(i.x<=Math.max(o,c)+it&&i.x>=Math.min(o,c)-it&&i.y<=Math.max(u,h)+it&&i.y>=Math.min(u,h)-it)return!0}}return!1}function Da(i,t,e){var r=[];r=r.concat(t);var n=e.style,a=n===void 0?G.Solid:n,s=e.size,l=s===void 0?1:s,o=e.color,u=o===void 0?"currentColor":o,c=e.dashedValue,h=c===void 0?[2,2]:c;i.lineWidth=l,i.strokeStyle=u,a===G.Dashed?i.setLineDash(h):i.setLineDash([]),r.forEach(function(f){var d=f.x,v=f.y,p=f.r,g=f.startAngle,m=f.endAngle;i.beginPath(),i.arc(d,v,p,g,m),i.stroke(),i.closePath()})}var ka={name:"arc",checkEventOn:Ta,draw:function(i,t,e){Da(i,t,e)}},ii={},Aa=[ya,Un,ba,Ca,ri,Pa,ka];Aa.forEach(function(i){ii[i.name]=Hn.extend(i)});function Fa(i){var t;return(t=ii[i])!==null&&t!==void 0?t:null}var Dt=function(i){N(t,i);function t(e){var r=i.call(this)||this;return r._widget=e,r}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(e,r){var n=Fa(e.name);if(n!==null){var a=new n(e);if(T(r)){for(var s in r)r.hasOwnProperty(s)&&a.registerEvent(s,r[s]);this.addChild(a)}return a}return null},t.prototype.draw=function(e){this.clear(),this.drawImp(e)},t}(nr),Ra=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r,n,a=this.getWidget(),s=this.getWidget().getPane(),l=s.getChart(),o=a.getBounding(),u=l.getStyles().grid,c=u.show;if(c){e.save(),e.globalCompositeOperation="destination-over";var h=u.horizontal,f=h.show;if(f){var d=s.getAxisComponent(),v=d.getTicks().map(function(_){return{coordinates:[{x:0,y:_.coord},{x:o.width,y:_.coord}]}});(r=this.createFigure({name:"line",attrs:v,styles:h}))===null||r===void 0||r.draw(e)}var p=u.vertical,g=p.show;if(g){var m=l.getXAxisPane().getAxisComponent(),v=m.getTicks().map(function(S){return{coordinates:[{x:S.coord,y:0},{x:S.coord,y:o.height}]}});(n=this.createFigure({name:"line",attrs:v,styles:p}))===null||n===void 0||n.draw(e)}e.restore()}},t}(Dt),sr=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.eachChildren=function(e){var r=this.getWidget().getPane(),n=r.getChart().getChartStore(),a=n.getVisibleDataList(),s=n.getTimeScaleStore().getBarSpace();a.forEach(function(l,o){e(l,s,o)})},t}(Dt),ni=function(i){N(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._boundCandleBarClickEvent=function(r){return function(){return e.getWidget().getPane().getChart().getChartStore().getActionStore().execute(yt.OnCandleBarClick,r),!1}},e}return t.prototype.drawImp=function(e){var r=this,n=this.getWidget().getPane(),a=n.getId()===H.CANDLE,s=n.getChart().getChartStore(),l=this.getCandleBarOptions(s);if(l!==null){var o=0,u=0;if(l.type===mt.Ohlc){var c=s.getTimeScaleStore().getBarSpace().gapBar;o=Math.min(Math.max(Math.round(c*.2),1),8),o>2&&o%2===1&&o--,u=Math.floor(u/2)}var h=n.getAxisComponent();this.eachChildren(function(f,d){var v=f.data,p=f.x;if(T(v)){var g=v.open,m=v.high,_=v.low,S=v.close,y=l.type,x=l.styles,w=[];S>g?(w[0]=x.upColor,w[1]=x.upBorderColor,w[2]=x.upWickColor):S<g?(w[0]=x.downColor,w[1]=x.downBorderColor,w[2]=x.downWickColor):(w[0]=x.noChangeColor,w[1]=x.noChangeBorderColor,w[2]=x.noChangeWickColor);var b=h.convertToPixel(g),E=h.convertToPixel(S),C=[b,E,h.convertToPixel(m),h.convertToPixel(_)];C.sort(function(M,I){return M-I});var P=[];switch(y){case mt.CandleSolid:{P=r._createSolidBar(p,C,d,w);break}case mt.CandleStroke:{P=r._createStrokeBar(p,C,d,w);break}case mt.CandleUpStroke:{S>g?P=r._createStrokeBar(p,C,d,w):P=r._createSolidBar(p,C,d,w);break}case mt.CandleDownStroke:{g>S?P=r._createStrokeBar(p,C,d,w):P=r._createSolidBar(p,C,d,w);break}case mt.Ohlc:{P=[{name:"rect",attrs:[{x:p-u,y:C[0],width:o,height:C[3]-C[0]},{x:p-d.halfGapBar,y:b+o>C[3]?C[3]-o:b,width:d.halfGapBar,height:o},{x:p+u,y:E+o>C[3]?C[3]-o:E,width:d.halfGapBar-u,height:o}],styles:{color:w[0]}}];break}}P.forEach(function(M){var I,k;a&&(k={mouseClickEvent:r._boundCandleBarClickEvent(f)}),(I=r.createFigure(M,k))===null||I===void 0||I.draw(e)})}})}},t.prototype.getCandleBarOptions=function(e){var r=e.getStyles().candle;return{type:r.type,styles:r.bar}},t.prototype._createSolidBar=function(e,r,n,a){return[{name:"rect",attrs:{x:e,y:r[0],width:1,height:r[3]-r[0]},styles:{color:a[2]}},{name:"rect",attrs:{x:e-n.halfGapBar,y:r[1],width:n.gapBar,height:Math.max(1,r[2]-r[1])},styles:{style:Y.StrokeFill,color:a[0],borderColor:a[1]}}]},t.prototype._createStrokeBar=function(e,r,n,a){return[{name:"rect",attrs:[{x:e,y:r[0],width:1,height:r[1]-r[0]},{x:e,y:r[2],width:1,height:r[3]-r[2]}],styles:{color:a[2]}},{name:"rect",attrs:{x:e-n.halfGapBar,y:r[1],width:n.gapBar,height:Math.max(1,r[2]-r[1])},styles:{style:Y.Stroke,borderColor:a[1]}}]},t}(sr),Ba=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(e){var r,n,a=this.getWidget().getPane(),s=a.getAxisComponent();if(!s.isInCandle()){var l=e.getIndicatorStore().getInstances(a.getId());try{for(var o=Jt(l),u=o.next();!u.done;u=o.next()){var c=u.value;if(c.shouldOhlc&&c.visible){var h=c.styles,f=e.getStyles().indicator,d=st(h,"ohlc.upColor",f.ohlc.upColor),v=st(h,"ohlc.downColor",f.ohlc.downColor),p=st(h,"ohlc.noChangeColor",f.ohlc.noChangeColor);return{type:mt.Ohlc,styles:{upColor:d,downColor:v,noChangeColor:p,upBorderColor:d,downBorderColor:v,noChangeBorderColor:p,upWickColor:d,downWickColor:v,noChangeWickColor:p}}}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}return null},t.prototype.drawImp=function(e){var r=this;i.prototype.drawImp.call(this,e);var n=this.getWidget(),a=n.getPane(),s=a.getChart(),l=n.getBounding(),o=s.getXAxisPane().getAxisComponent(),u=a.getAxisComponent(),c=s.getChartStore(),h=c.getDataList(),f=c.getTimeScaleStore(),d=f.getVisibleRange(),v=c.getIndicatorStore().getInstances(a.getId()),p=c.getStyles().indicator;e.save(),v.forEach(function(g){var m;if(g.visible){g.zLevel<0?e.globalCompositeOperation="destination-over":e.globalCompositeOperation="source-over";var _=!1;if(g.draw!==null&&(e.save(),_=(m=g.draw({ctx:e,kLineDataList:h,indicator:g,visibleRange:d,bounding:l,barSpace:f.getBarSpace(),defaultStyles:p,xAxis:o,yAxis:u}))!==null&&m!==void 0?m:!1,e.restore()),!_){var S=g.result,y=[];r.eachChildren(function(x,w){var b,E,C,P=w.halfGapBar,M=x.dataIndex,I=x.x,k=o.convertToPixel(M-1),A=o.convertToPixel(M+1),V=(b=S[M-1])!==null&&b!==void 0?b:null,F=(E=S[M])!==null&&E!==void 0?E:null,$=(C=S[M+1])!==null&&C!==void 0?C:null,X={x:k},lt={x:I},ct={x:A};g.figures.forEach(function(j){var Z=j.key,tt=V==null?void 0:V[Z];R(tt)&&(X[Z]=u.convertToPixel(tt));var J=F==null?void 0:F[Z];R(J)&&(lt[Z]=u.convertToPixel(J));var et=$==null?void 0:$[Z];R(et)&&(ct[Z]=u.convertToPixel(et))}),ir(h,g,M,p,function(j,Z,tt){var J,et,K;if(T(F==null?void 0:F[j.key])){var Et=lt[j.key],xt=(J=j.attrs)===null||J===void 0?void 0:J.call(j,{data:{prev:V,current:F,next:$},coordinate:{prev:X,current:lt,next:ct},bounding:l,barSpace:w,xAxis:o,yAxis:u});if(!T(xt))switch(j.type){case"circle":{xt={x:I,y:Et,r:Math.max(1,P)};break}case"rect":case"bar":{var Bt=(et=j.baseValue)!==null&&et!==void 0?et:u.getRange().from,Lt=u.convertToPixel(Bt),Gt=Math.abs(Lt-Et);Bt!==(F==null?void 0:F[j.key])&&(Gt=Math.max(1,Gt));var It=void 0;Et>Lt?It=Lt:It=Et,xt={x:I-P,y:It,width:Math.max(1,P*2),height:Gt};break}case"line":{T(y[tt])||(y[tt]=[]),R(lt[j.key])&&R(ct[j.key])&&y[tt].push({coordinates:[{x:lt.x,y:lt[j.key]},{x:ct.x,y:ct[j.key]}],styles:Z});break}}var re=j.type;T(xt)&&re!=="line"&&((K=r.createFigure({name:re==="bar"?"rect":re,attrs:xt,styles:Z}))===null||K===void 0||K.draw(e))}})}),y.forEach(function(x){if(x.length>1){for(var w=[{coordinates:[x[0].coordinates[0],x[0].coordinates[1]],styles:x[0].styles}],b=1;b<x.length;b++){var E=w[w.length-1],C=x[b],P=E.coordinates[E.coordinates.length-1];P.x===C.coordinates[0].x&&P.y===C.coordinates[0].y&&E.styles.style===C.styles.style&&E.styles.color===C.styles.color&&E.styles.size===C.styles.size&&E.styles.smooth===C.styles.smooth&&E.styles.dashedValue[0]===C.styles.dashedValue[0]&&E.styles.dashedValue[1]===C.styles.dashedValue[1]?E.coordinates.push(C.coordinates[1]):w.push({coordinates:[C.coordinates[0],C.coordinates[1]],styles:C.styles})}w.forEach(function(M){var I,k=M.coordinates,A=M.styles;(I=r.createFigure({name:"line",attrs:{coordinates:k},styles:A}))===null||I===void 0||I.draw(e)})}})}}}),e.restore()},t}(ni),La=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r=this.getWidget(),n=r.getPane(),a=r.getBounding(),s=r.getPane().getChart().getChartStore(),l=s.getTooltipStore().getCrosshair(),o=s.getStyles().crosshair;if(O(l.paneId)&&o.show){if(l.paneId===n.getId()){var u=l.y;this._drawLine(e,[{x:0,y:u},{x:a.width,y:u}],o.horizontal)}var c=l.realX;this._drawLine(e,[{x:c,y:0},{x:c,y:a.height}],o.vertical)}},t.prototype._drawLine=function(e,r,n){var a;if(n.show){var s=n.line;s.show&&((a=this.createFigure({name:"line",attrs:{coordinates:r},styles:s}))===null||a===void 0||a.draw(e))}},t}(Dt),ai=function(i){N(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._boundIconClickEvent=function(r){return function(){var n=e.getWidget().getPane();return n.getChart().getChartStore().getActionStore().execute(yt.OnTooltipIconClick,B({},r)),!0}},e._boundIconMouseMoveEvent=function(r){return function(){var n=e.getWidget().getPane(),a=n.getChart().getChartStore().getTooltipStore();return a.setActiveIcon(B({},r)),!0}},e}return t.prototype.drawImp=function(e){var r=this.getWidget(),n=r.getPane(),a=n.getChart().getChartStore(),s=a.getTooltipStore().getCrosshair();if(T(s.kLineData)){var l=r.getBounding(),o=a.getCustomApi(),u=a.getThousandsSeparator(),c=a.getDecimalFoldThreshold(),h=a.getIndicatorStore().getInstances(n.getId()),f=a.getTooltipStore().getActiveIcon(),d=a.getStyles().indicator,v=d.tooltip,p=v.offsetLeft,g=v.offsetTop,m=v.offsetRight;this.drawIndicatorTooltip(e,n.getId(),a.getDataList(),s,f,h,o,u,c,p,g,l.width-m,d)}},t.prototype.drawIndicatorTooltip=function(e,r,n,a,s,l,o,u,c,h,f,d,v){var p=this,g=v.tooltip;if(this.isDrawTooltip(a,g)){var m=g.text;l.forEach(function(_){var S=0,y={x:h,y:f},x=p.getIndicatorTooltipData(n,a,_,o,u,c,v),w=x.name,b=x.calcParamsText,E=x.values,C=x.icons,P=w.length>0,M=E.length>0;if(P||M){var I=ee(p.classifyTooltipIcons(C),3),k=I[0],A=I[1],V=I[2];if(S=p.drawStandardTooltipIcons(e,s,k,y,r,_.name,h,S,d),P){var F=w;b.length>0&&(F="".concat(F).concat(b)),S=p.drawStandardTooltipLegends(e,[{title:{text:"",color:m.color},value:{text:F,color:m.color}}],y,h,S,d,m)}S=p.drawStandardTooltipIcons(e,s,A,y,r,_.name,h,S,d),M&&(S=p.drawStandardTooltipLegends(e,E,y,h,S,d,g.text)),S=p.drawStandardTooltipIcons(e,s,V,y,r,_.name,h,S,d),f=y.y+S}})}return f},t.prototype.drawStandardTooltipIcons=function(e,r,n,a,s,l,o,u,c){var h=this;if(n.length>0){var f=0,d=0;n.forEach(function(v){var p=v.marginLeft,g=p===void 0?0:p,m=v.marginTop,_=m===void 0?0:m,S=v.marginRight,y=S===void 0?0:S,x=v.marginBottom,w=x===void 0?0:x,b=v.paddingLeft,E=b===void 0?0:b,C=v.paddingTop,P=C===void 0?0:C,M=v.paddingRight,I=M===void 0?0:M,k=v.paddingBottom,A=k===void 0?0:k,V=v.size,F=v.fontFamily,$=v.icon;e.font=te(V,"normal",F),f+=g+E+e.measureText($).width+I+y,d=Math.max(d,_+P+V+A+w)}),a.x+f>c?(a.x=o,a.y+=u,u=d):u=Math.max(u,d),n.forEach(function(v){var p,g=v.marginLeft,m=g===void 0?0:g,_=v.marginTop,S=_===void 0?0:_,y=v.marginRight,x=y===void 0?0:y,w=v.paddingLeft,b=w===void 0?0:w,E=v.paddingTop,C=E===void 0?0:E,P=v.paddingRight,M=P===void 0?0:P,I=v.paddingBottom,k=I===void 0?0:I,A=v.color,V=v.activeColor,F=v.size,$=v.fontFamily,X=v.icon,lt=v.backgroundColor,ct=v.activeBackgroundColor,j=(r==null?void 0:r.paneId)===s&&(r==null?void 0:r.indicatorName)===l&&(r==null?void 0:r.iconId)===v.id;(p=h.createFigure({name:"text",attrs:{text:X,x:a.x+m,y:a.y+S},styles:{paddingLeft:b,paddingTop:C,paddingRight:M,paddingBottom:k,color:j?V:A,size:F,family:$,backgroundColor:j?ct:lt}},{mouseClickEvent:h._boundIconClickEvent({paneId:s,indicatorName:l,iconId:v.id}),mouseMoveEvent:h._boundIconMouseMoveEvent({paneId:s,indicatorName:l,iconId:v.id})}))===null||p===void 0||p.draw(e),a.x+=m+b+e.measureText(X).width+M+x})}return u},t.prototype.drawStandardTooltipLegends=function(e,r,n,a,s,l,o){var u=this;if(r.length>0){var c=o.marginLeft,h=o.marginTop,f=o.marginRight,d=o.marginBottom,v=o.size,p=o.family,g=o.weight;e.font=te(v,g,p),r.forEach(function(m){var _,S,y=m.title,x=m.value,w=e.measureText(y.text).width,b=e.measureText(x.text).width,E=w+b,C=h+v+d;n.x+c+E+f>l?(n.x=a,n.y+=s,s=C):s=Math.max(s,C),y.text.length>0&&((_=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:y.text},styles:{color:y.color,size:v,family:p,weight:g}}))===null||_===void 0||_.draw(e)),(S=u.createFigure({name:"text",attrs:{x:n.x+c+w,y:n.y+h,text:x.text},styles:{color:x.color,size:v,family:p,weight:g}}))===null||S===void 0||S.draw(e),n.x+=c+E+f})}return s},t.prototype.isDrawTooltip=function(e,r){var n=r.showRule;return n===le.Always||n===le.FollowCross&&O(e.paneId)},t.prototype.getIndicatorTooltipData=function(e,r,n,a,s,l,o){var u,c,h=o.tooltip,f=h.showName?n.shortName:"",d="",v=n.calcParams;v.length>0&&h.showParams&&(d="(".concat(v.join(","),")"));var p={name:f,calcParamsText:d,values:[],icons:h.icons},g=r.dataIndex,m=(u=n.result)!==null&&u!==void 0?u:[],_=[];if(n.visible){var S=(c=m[g])!==null&&c!==void 0?c:{};ir(e,n,g,o,function(A,V){var F;if(O(A.title)){var $=V.color,X=(F=S[A.key])!==null&&F!==void 0?F:h.defaultValue;R(X)&&(X=Q(X,n.precision),n.shouldFormatBigNumber&&(X=a.formatBigNumber(X)),X=at(rt(X,s),l)),_.push({title:{text:A.title,color:$},value:{text:X,color:$}})}}),p.values=_}if(n.createTooltipDataSource!==null){var y=this.getWidget(),x=y.getPane(),w=x.getChart().getChartStore(),b=n.createTooltipDataSource({kLineDataList:e,indicator:n,visibleRange:w.getTimeScaleStore().getVisibleRange(),bounding:y.getBounding(),crosshair:r,defaultStyles:o,xAxis:x.getChart().getXAxisPane().getAxisComponent(),yAxis:x.getAxisComponent()}),E=b.name,C=b.calcParamsText,P=b.values,M=b.icons;if(O(E)&&h.showName&&(p.name=E),O(C)&&h.showParams&&(p.calcParamsText=C),T(M)&&(p.icons=M),T(P)&&n.visible){var I=[],k=o.tooltip.text.color;P.forEach(function(A){var V,F={text:"",color:k};Tt(A.title)?F=A.title:F.text=A.title;var $={text:"",color:k};if(Tt(A.value)?$=A.value:$.text=(V=A.value)!==null&&V!==void 0?V:h.defaultValue,R($.text)){var X=Q($.text,n.precision);n.shouldFormatBigNumber&&(X=a.formatBigNumber(X)),X=at(rt(X,s),l),$.text=X}I.push({title:F,value:$})}),p.values=I}}return p},t.prototype.classifyTooltipIcons=function(e){var r=[],n=[],a=[];return e.forEach(function(s){switch(s.position){case pe.Left:{r.push(s);break}case pe.Middle:{n.push(s);break}case pe.Right:{a.push(s);break}}}),[r,n,a]},t}(Dt),oi=function(i){N(t,i);function t(e){var r=i.call(this,e)||this;return r._initEvent(),r}return t.prototype._initEvent=function(){var e=this,r=this.getWidget().getPane(),n=r.getId(),a=r.getChart().getChartStore().getOverlayStore();this.registerEvent("mouseMoveEvent",function(s){var l,o=a.getProgressInstanceInfo();if(o!==null){var u=o.instance,c=o.paneId;u.isStart()&&(a.updateProgressInstanceInfo(n),c=n);var h=u.points.length-1,f="".concat(ie,"point_").concat(h);return u.isDrawing()&&c===n&&(u.eventMoveForDrawing(e._coordinateToPoint(o.instance,s)),(l=u.onDrawing)===null||l===void 0||l.call(u,B({overlay:u,figureKey:f,figureIndex:h},s))),e._figureMouseMoveEvent(u,1,f,h,0)(s)}return a.setHoverInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},s),!1}).registerEvent("mouseClickEvent",function(s){var l,o,u=a.getProgressInstanceInfo();if(u!==null){var c=u.instance,h=u.paneId;c.isStart()&&(a.updateProgressInstanceInfo(n,!0),h=n);var f=c.points.length-1,d="".concat(ie,"point_").concat(f);return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(e._coordinateToPoint(c,s)),(l=c.onDrawing)===null||l===void 0||l.call(c,B({overlay:c,figureKey:d,figureIndex:f},s)),c.nextStep(),c.isDrawing()||(a.progressInstanceComplete(),(o=c.onDrawEnd)===null||o===void 0||o.call(c,B({overlay:c,figureKey:d,figureIndex:f},s)))),e._figureMouseClickEvent(c,1,d,f,0)(s)}return a.setClickInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},s),!1}).registerEvent("mouseDoubleClickEvent",function(s){var l,o=a.getProgressInstanceInfo();if(o!==null){var u=o.instance,c=o.paneId;if(u.isDrawing()&&c===n&&(u.forceComplete(),!u.isDrawing())){a.progressInstanceComplete();var h=u.points.length-1,f="".concat(ie,"point_").concat(h);(l=u.onDrawEnd)===null||l===void 0||l.call(u,B({overlay:u,figureKey:f,figureIndex:h},s))}var d=u.points.length-1;return e._figureMouseClickEvent(u,1,"".concat(ie,"point_").concat(d),d,0)(s)}return!1}).registerEvent("mouseRightClickEvent",function(s){var l=a.getProgressInstanceInfo();if(l!==null){var o=l.instance;if(o.isDrawing()){var u=o.points.length-1;return e._figureMouseRightClickEvent(o,1,"".concat(ie,"point_").concat(u),u,0)(s)}}return!1}).registerEvent("mouseUpEvent",function(s){var l,o=a.getPressedInstanceInfo(),u=o.instance,c=o.figureIndex,h=o.figureKey;return u!==null&&((l=u.onPressedMoveEnd)===null||l===void 0||l.call(u,B({overlay:u,figureKey:h,figureIndex:c},s))),a.setPressedInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(s){var l,o,u=a.getPressedInstanceInfo(),c=u.instance,h=u.figureType,f=u.figureIndex,d=u.figureKey;if(c!==null){if(!c.lock&&!((o=(l=c.onPressedMoving)===null||l===void 0?void 0:l.call(c,B({overlay:c,figureIndex:f,figureKey:d},s)))!==null&&o!==void 0&&o)){var v=e._coordinateToPoint(c,s);h===1?c.eventPressedPointMove(v,f):c.eventPressedOtherMove(v,e.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())}return!0}return!1})},t.prototype._createFigureEvents=function(e,r,n,a,s,l){var o;if(!e.isDrawing()){var u=[];if(T(l)&&(Qt(l)?l&&(u=Ki()):u=l),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(e,r,n,a,s),mouseDownEvent:this._figureMouseDownEvent(e,r,n,a,s),mouseClickEvent:this._figureMouseClickEvent(e,r,n,a,s),mouseRightClickEvent:this._figureMouseRightClickEvent(e,r,n,a,s),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(e,r,n,a,s)};o={},!u.includes("mouseMoveEvent")&&!u.includes("touchMoveEvent")&&(o.mouseMoveEvent=this._figureMouseMoveEvent(e,r,n,a,s)),!u.includes("mouseDownEvent")&&!u.includes("touchStartEvent")&&(o.mouseDownEvent=this._figureMouseDownEvent(e,r,n,a,s)),!u.includes("mouseClickEvent")&&!u.includes("tapEvent")&&(o.mouseClickEvent=this._figureMouseClickEvent(e,r,n,a,s)),!u.includes("mouseDoubleClickEvent")&&!u.includes("doubleTapEvent")&&(o.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(e,r,n,a,s)),u.includes("mouseRightClickEvent")||(o.mouseRightClickEvent=this._figureMouseRightClickEvent(e,r,n,a,s))}return o},t.prototype._figureMouseMoveEvent=function(e,r,n,a,s){var l=this;return function(o){var u=l.getWidget().getPane(),c=u.getChart().getChartStore().getOverlayStore();return c.setHoverInstanceInfo({paneId:u.getId(),instance:e,figureType:r,figureKey:n,figureIndex:a,attrsIndex:s},o),!0}},t.prototype._figureMouseDownEvent=function(e,r,n,a,s){var l=this;return function(o){var u,c=l.getWidget().getPane(),h=c.getId(),f=c.getChart().getChartStore().getOverlayStore();return e.startPressedMove(l._coordinateToPoint(e,o)),(u=e.onPressedMoveStart)===null||u===void 0||u.call(e,B({overlay:e,figureIndex:a,figureKey:n},o)),f.setPressedInstanceInfo({paneId:h,instance:e,figureType:r,figureKey:n,figureIndex:a,attrsIndex:s}),!0}},t.prototype._figureMouseClickEvent=function(e,r,n,a,s){var l=this;return function(o){var u=l.getWidget().getPane(),c=u.getId(),h=u.getChart().getChartStore().getOverlayStore();return h.setClickInstanceInfo({paneId:c,instance:e,figureType:r,figureKey:n,figureIndex:a,attrsIndex:s},o),!0}},t.prototype._figureMouseDoubleClickEvent=function(e,r,n,a,s){return function(l){var o;return(o=e.onDoubleClick)===null||o===void 0||o.call(e,B(B({},l),{figureIndex:a,figureKey:n,overlay:e})),!0}},t.prototype._figureMouseRightClickEvent=function(e,r,n,a,s){var l=this;return function(o){var u,c;if(!((c=(u=e.onRightClick)===null||u===void 0?void 0:u.call(e,B({overlay:e,figureIndex:a,figureKey:n},o)))!==null&&c!==void 0&&c)){var h=l.getWidget().getPane(),f=h.getChart().getChartStore().getOverlayStore();f.removeInstance(e)}return!0}},t.prototype._coordinateToPoint=function(e,r){var n,a={},s=this.getWidget().getPane(),l=s.getChart(),o=s.getId(),u=l.getChartStore().getTimeScaleStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=l.getXAxisPane().getAxisComponent(),h=c.convertFromPixel(r.x),f=(n=u.dataIndexToTimestamp(h))!==null&&n!==void 0?n:void 0;a.dataIndex=h,a.timestamp=f}if(this.coordinateToPointValueFlag()){var d=s.getAxisComponent(),v=d.convertFromPixel(r.y);if(e.mode!==se.Normal&&o===H.CANDLE&&R(a.dataIndex)){var p=u.getDataByDataIndex(a.dataIndex);if(p!==null){var g=e.modeSensitivity;if(v>p.high)if(e.mode===se.WeakMagnet){var m=d.convertToPixel(p.high),_=d.convertFromPixel(m-g);v<_&&(v=p.high)}else v=p.high;else if(v<p.low)if(e.mode===se.WeakMagnet){var S=d.convertToPixel(p.low),_=d.convertFromPixel(S-g);v>_&&(v=p.low)}else v=p.low;else{var y=Math.max(p.open,p.close),x=Math.min(p.open,p.close);v>y?v-y<p.high-v?v=y:v=p.high:v<x?v-p.low<x-v?v=p.low:v=x:y-v<v-x?v=y:v=x}}}a.value=v}return a},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(e,r,n){return this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()?this.onEvent(e,r,n):i.prototype.dispatchEvent.call(this,e,r,n)},t.prototype.checkEventOn=function(){return!0},t.prototype.drawImp=function(e){var r=this,n=this.getWidget(),a=n.getPane(),s=a.getId(),l=a.getChart(),o=a.getAxisComponent(),u=l.getXAxisPane().getAxisComponent(),c=n.getBounding(),h=l.getChartStore(),f=h.getCustomApi(),d=h.getThousandsSeparator(),v=h.getDecimalFoldThreshold(),p=h.getTimeScaleStore(),g=p.getDateTimeFormat(),m=p.getBarSpace(),_=h.getPrecision(),S=h.getStyles().overlay,y=h.getOverlayStore(),x=y.getHoverInstanceInfo(),w=y.getClickInstanceInfo(),b=this.getCompleteOverlays(y,s),E=h.getIndicatorStore().getInstances(s),C=E.reduce(function(I,k){var A=k.precision;return I[k.name]=A,I.max=Math.max(I.max,A),I.min=Math.min(I.min,A),I.excludePriceVolumeMax=Math.max(I.excludePriceVolumeMax,A),I.excludePriceVolumeMin=Math.min(I.excludePriceVolumeMin,A),I},B(B({},_),{max:Math.max(_.price,_.volume),min:Math.min(_.price,_.volume),excludePriceVolumeMax:Number.MIN_SAFE_INTEGER,excludePriceVolumeMin:Number.MAX_SAFE_INTEGER}));b.forEach(function(I){I.visible&&r._drawOverlay(e,I,c,m,C,g,f,d,v,S,u,o,x,w,p)});var P=y.getProgressInstanceInfo();if(P!==null){var M=this.getProgressOverlay(P,s);M!==null&&M.visible&&this._drawOverlay(e,M,c,m,C,g,f,d,v,S,u,o,x,w,p)}},t.prototype._drawOverlay=function(e,r,n,a,s,l,o,u,c,h,f,d,v,p,g){var m=r.points,_=m.map(function(y){var x,w,b=y.dataIndex;R(y.timestamp)&&(b=g.timestampToDataIndex(y.timestamp));var E={x:0,y:0};return R(b)&&(E.x=(x=f==null?void 0:f.convertToPixel(b))!==null&&x!==void 0?x:0),R(y.value)&&(E.y=(w=d==null?void 0:d.convertToPixel(y.value))!==null&&w!==void 0?w:0),E});if(_.length>0){var S=new Array().concat(this.getFigures(r,_,n,a,s,u,c,l,h,f,d));this.drawFigures(e,r,S,h)}this.drawDefaultFigures(e,r,_,n,s,l,o,u,c,h,f,d,v,p)},t.prototype.drawFigures=function(e,r,n,a){var s=this;n.forEach(function(l,o){var u=l.type,c=l.styles,h=l.attrs,f=l.ignoreEvent,d=[].concat(h);d.forEach(function(v,p){var g,m,_,S=s._createFigureEvents(r,2,(g=l.key)!==null&&g!==void 0?g:"",o,p,f),y=B(B(B({},a[u]),(m=r.styles)===null||m===void 0?void 0:m[u]),c);(_=s.createFigure({name:u,attrs:v,styles:y},S))===null||_===void 0||_.draw(e)})})},t.prototype.getCompleteOverlays=function(e,r){return e.getInstances(r)},t.prototype.getProgressOverlay=function(e,r){return e.paneId===r?e.instance:null},t.prototype.getFigures=function(e,r,n,a,s,l,o,u,c,h,f){var d,v;return(v=(d=e.createPointFigures)===null||d===void 0?void 0:d.call(e,{overlay:e,coordinates:r,bounding:n,barSpace:a,precision:s,thousandsSeparator:l,decimalFoldThreshold:o,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&v!==void 0?v:[]},t.prototype.drawDefaultFigures=function(e,r,n,a,s,l,o,u,c,h,f,d,v,p){var g=this,m,_;if(r.needDefaultPointFigure&&(((m=v.instance)===null||m===void 0?void 0:m.id)===r.id&&v.figureType!==0||((_=p.instance)===null||_===void 0?void 0:_.id)===r.id&&p.figureType!==0)){var S=r.styles,y=B(B({},h.point),S==null?void 0:S.point);n.forEach(function(x,w){var b,E,C,P=x.x,M=x.y,I=y.radius,k=y.color,A=y.borderColor,V=y.borderSize;((b=v.instance)===null||b===void 0?void 0:b.id)===r.id&&v.figureType===1&&v.figureIndex===w&&(I=y.activeRadius,k=y.activeColor,A=y.activeBorderColor,V=y.activeBorderSize),(E=g.createFigure({name:"circle",attrs:{x:P,y:M,r:I+V},styles:{color:A}},g._createFigureEvents(r,1,"".concat(ie,"point_").concat(w),w,0)))===null||E===void 0||E.draw(e),(C=g.createFigure({name:"circle",attrs:{x:P,y:M,r:I},styles:{color:k}}))===null||C===void 0||C.draw(e)})}},t}(Dt),si=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n._gridView=new Ra(n),n._indicatorView=new Ba(n),n._crosshairLineView=new La(n),n._tooltipView=n.createTooltipView(),n._overlayView=new oi(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return r.getChart().getChartStore().getTooltipStore().setActiveIcon(),!1}),n}return t.prototype.getName=function(){return z.MAIN},t.prototype.updateMain=function(e){this.updateMainContent(e),this._indicatorView.draw(e),this._gridView.draw(e)},t.prototype.createTooltipView=function(){return new ai(this)},t.prototype.updateMainContent=function(e){},t.prototype.updateOverlay=function(e){this._overlayView.draw(e),this._crosshairLineView.draw(e),this._tooltipView.draw(e)},t}(or),Va=function(i){N(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._ripplePoint=e.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),e._animationFrameTime=0,e._animation=new $e({iterationCount:1/0}).doFrame(function(r){e._animationFrameTime=r;var n=e.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),e}return t.prototype.drawImp=function(e){var r,n,a,s=this.getWidget(),l=s.getPane(),o=l.getChart(),u=o.getDataList(),c=u.length-1,h=s.getBounding(),f=l.getAxisComponent(),d=o.getStyles().candle.area,v=[],p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,m=null;if(this.eachChildren(function(b){var E=b.data,C=b.x,P=E==null?void 0:E[d.value];if(R(P)){var M=f.convertToPixel(P);g===Number.MIN_SAFE_INTEGER&&(g=C),v.push({x:C,y:M}),p=Math.min(p,M),b.dataIndex===c&&(m={x:C,y:M})}}),v.length>0){(r=this.createFigure({name:"line",attrs:{coordinates:v},styles:{color:d.lineColor,size:d.lineSize,smooth:d.smooth}}))===null||r===void 0||r.draw(e);var _=d.backgroundColor,S=void 0;if(Ct(_)){var y=e.createLinearGradient(0,h.height,0,p);try{_.forEach(function(b){var E=b.offset,C=b.color;y.addColorStop(E,C)})}catch{}S=y}else S=_;e.fillStyle=S,e.beginPath(),e.moveTo(g,h.height),e.lineTo(v[0].x,v[0].y),jr(e,v,d.smooth),e.lineTo(v[v.length-1].x,h.height),e.closePath(),e.fill()}var x=d.point;if(x.show&&T(m)){(n=this.createFigure({name:"circle",attrs:{x:m.x,y:m.y,r:x.radius},styles:{style:"fill",color:x.color}}))===null||n===void 0||n.draw(e);var w=x.rippleRadius;x.animation&&(w=x.radius+this._animationFrameTime/x.animationDuration*(x.rippleRadius-x.radius),this._animation.setDuration(x.animationDuration).start()),(a=this._ripplePoint)===null||a===void 0||a.setAttrs({x:m.x,y:m.y,r:w}).setStyles({style:"fill",color:x.rippleColor}).draw(e)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t}(sr),Oa=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r=this.getWidget(),n=r.getPane(),a=n.getChart().getChartStore(),s=a.getStyles().candle.priceMark,l=s.high,o=s.low;if(s.show&&(l.show||o.show)){var u=a.getThousandsSeparator(),c=a.getDecimalFoldThreshold(),h=a.getPrecision(),f=n.getAxisComponent(),d=Number.MIN_SAFE_INTEGER,v=0,p=Number.MAX_SAFE_INTEGER,g=0;this.eachChildren(function(S){var y=S.data,x=S.x;T(y)&&(d<y.high&&(d=y.high,v=x),p>y.low&&(p=y.low,g=x))});var m=f.convertToPixel(d),_=f.convertToPixel(p);l.show&&d!==Number.MIN_SAFE_INTEGER&&this._drawMark(e,at(rt(Q(d,h.price),u),c),{x:v,y:m},m<_?[-2,-5]:[2,5],l),o.show&&p!==Number.MAX_SAFE_INTEGER&&this._drawMark(e,at(rt(Q(p,h.price),u),c),{x:g,y:_},m<_?[2,5]:[-2,-5],o)}},t.prototype._drawMark=function(e,r,n,a,s){var l,o,u,c=n.x,h=n.y+a[0];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+a[0]},{x:c,y:h},{x:c+2,y:h+a[0]}]},styles:{color:s.color}}))===null||l===void 0||l.draw(e);var f,d,v,p=this.getWidget().getBounding().width;c>p/2?(f=c-5,d=f-s.textOffset,v="right"):(f=c+5,v="left",d=f+s.textOffset);var g=h+a[1];(o=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:g},{x:f,y:g}]},styles:{color:s.color}}))===null||o===void 0||o.draw(e),(u=this.createFigure({name:"text",attrs:{x:d,y:g,text:r,align:v,baseline:"middle"},styles:{color:s.color,size:s.textSize,family:s.textFamily,weight:s.textWeight}}))===null||u===void 0||u.draw(e)},t}(sr),Na=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r,n=this.getWidget(),a=n.getPane(),s=n.getBounding(),l=a.getChart().getChartStore(),o=l.getStyles().candle.priceMark,u=o.last,c=u.line;if(o.show&&u.show&&c.show){var h=a.getAxisComponent(),f=l.getDataList(),d=f[f.length-1];if(d!=null){var v=d.close,p=d.open,g=h.convertToNicePixel(v),m=void 0;v>p?m=u.upColor:v<p?m=u.downColor:m=u.noChangeColor,(r=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:g},{x:s.width,y:g}]},styles:{style:c.style,color:m,size:c.size,dashedValue:c.dashedValue}}))===null||r===void 0||r.draw(e)}}},t}(Dt),za={time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅："},Wa={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "},Xa={"zh-CN":za,"en-US":Wa};function Ya(i,t){var e,r;return(r=(e=Xa[t])===null||e===void 0?void 0:e[i])!==null&&r!==void 0?r:i}var Ha=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r=this.getWidget(),n=r.getPane(),a=n.getId(),s=n.getChart().getChartStore(),l=s.getTooltipStore().getCrosshair();if(T(l.kLineData)){var o=r.getBounding(),u=n.getYAxisWidget().getBounding(),c=s.getDataList(),h=s.getPrecision(),f=s.getLocale(),d=s.getCustomApi(),v=s.getThousandsSeparator(),p=s.getDecimalFoldThreshold(),g=s.getTooltipStore().getActiveIcon(),m=s.getIndicatorStore().getInstances(n.getId()),_=s.getTimeScaleStore().getDateTimeFormat(),S=s.getStyles(),y=S.candle,x=S.indicator;if(y.tooltip.showType===Mt.Rect&&x.tooltip.showType===Mt.Rect){var w=this.isDrawTooltip(l,y.tooltip),b=this.isDrawTooltip(l,x.tooltip);this._drawRectTooltip(e,c,m,o,u,l,h,_,f,d,v,p,w,b,y.tooltip.offsetTop,S)}else if(y.tooltip.showType===Mt.Standard&&x.tooltip.showType===Mt.Standard){var E=y.tooltip,C=E.offsetLeft,P=E.offsetTop,M=E.offsetRight,I=o.width-M,k=this._drawCandleStandardTooltip(e,c,a,l,g,h,_,f,d,v,p,C,P,I,y);this.drawIndicatorTooltip(e,a,c,l,g,m,d,v,p,C,k,I,x)}else if(y.tooltip.showType===Mt.Rect&&x.tooltip.showType===Mt.Standard){var A=y.tooltip,C=A.offsetLeft,P=A.offsetTop,M=A.offsetRight,I=o.width-M,V=this.drawIndicatorTooltip(e,a,c,l,g,m,d,v,p,C,P,I,x),w=this.isDrawTooltip(l,y.tooltip);this._drawRectTooltip(e,c,m,o,u,l,h,_,f,d,v,p,w,!1,V,S)}else{var F=y.tooltip,C=F.offsetLeft,P=F.offsetTop,M=F.offsetRight,I=o.width-M,$=this._drawCandleStandardTooltip(e,c,a,l,g,h,_,f,d,v,p,C,P,I,y),b=this.isDrawTooltip(l,x.tooltip);this._drawRectTooltip(e,c,m,o,u,l,h,_,f,d,v,p,!1,b,$,S)}}},t.prototype._drawCandleStandardTooltip=function(e,r,n,a,s,l,o,u,c,h,f,d,v,p,g){var m,_,S,y=g.tooltip,x=y.text,w=0,b={x:d,y:v};if(this.isDrawTooltip(a,y)){var E=(m=a.dataIndex)!==null&&m!==void 0?m:0,C=this._getCandleTooltipLegends({prev:(_=r[E-1])!==null&&_!==void 0?_:null,current:a.kLineData,next:(S=r[E+1])!==null&&S!==void 0?S:null},l,o,u,c,h,f,g),P=ee(this.classifyTooltipIcons(y.icons),3),M=P[0],I=P[1],k=P[2];w=this.drawStandardTooltipIcons(e,s,M,b,n,"",d,w,p),w=this.drawStandardTooltipIcons(e,s,I,b,n,"",d,w,p),C.length>0&&(w=this.drawStandardTooltipLegends(e,C,b,d,w,p,x)),w=this.drawStandardTooltipIcons(e,s,k,b,n,"",d,w,p)}return b.y+w},t.prototype._drawRectTooltip=function(e,r,n,a,s,l,o,u,c,h,f,d,v,p,g,m){var _=this,S,y,x,w,b,E=m.candle,C=m.indicator,P=E.tooltip,M=C.tooltip;if(v||p){var I=(S=l.dataIndex)!==null&&S!==void 0?S:0,k=this._getCandleTooltipLegends({prev:(y=r[I-1])!==null&&y!==void 0?y:null,current:l.kLineData,next:(x=r[I+1])!==null&&x!==void 0?x:null},o,u,c,h,f,d,E),A=P.offsetLeft,V=P.offsetTop,F=P.offsetRight,$=P.offsetBottom,X=P.text,lt=X.marginLeft,ct=X.marginRight,j=X.marginTop,Z=X.marginBottom,tt=X.size,J=X.weight,et=X.family,K=P.rect,Et=K.position,xt=K.paddingLeft,Bt=K.paddingRight,Lt=K.paddingTop,Gt=K.paddingBottom,It=K.offsetLeft,re=K.offsetRight,Re=K.offsetTop,lr=K.offsetBottom,Vt=K.borderSize,mi=K.borderRadius,_i=K.borderColor,yi=K.color,ce=0,Ot=0,Nt=0;v&&(e.font=te(tt,J,et),k.forEach(function(kt){var pt=kt.title,gt=kt.value,wt="".concat(pt.text).concat(gt.text),At=e.measureText(wt).width+lt+ct;ce=Math.max(ce,At)}),Nt+=(Z+j+tt)*k.length);var Ut=M.text,ur=Ut.marginLeft,cr=Ut.marginRight,hr=Ut.marginTop,vr=Ut.marginBottom,he=Ut.size,Be=Ut.weight,Le=Ut.family,dr=[];if(p&&(e.font=te(he,Be,Le),n.forEach(function(kt){var pt,gt=(pt=_.getIndicatorTooltipData(r,l,kt,h,f,d,C).values)!==null&&pt!==void 0?pt:[];dr.push(gt),gt.forEach(function(wt){var At=wt.title,xe=wt.value,Ci="".concat(At.text).concat(xe.text),Ei=e.measureText(Ci).width+ur+cr;ce=Math.max(ce,Ei),Nt+=hr+vr+he})})),Ot+=ce,Ot!==0&&Nt!==0){Ot+=Vt*2+xt+Bt,Nt+=Vt*2+Lt+Gt;var Si=a.width/2,fr=Et===Ie.Pointer&&l.paneId===H.CANDLE,pr=((w=l.realX)!==null&&w!==void 0?w:0)>Si,bt=0;if(fr){var gr=l.realX;pr?bt=gr-re-Ot:bt=gr+It}else pr?(bt=It+A,m.yAxis.inside&&m.yAxis.position===$t.Left&&(bt+=s.width)):(bt=a.width-re-Ot-F,m.yAxis.inside&&m.yAxis.position===$t.Right&&(bt-=s.width));var jt=g+Re;if(fr){var xi=l.y;jt=xi-Nt/2,jt+Nt>a.height-lr-$&&(jt=a.height-lr-Nt-$),jt<g+Re&&(jt=g+Re+V)}(b=this.createFigure({name:"rect",attrs:{x:bt,y:jt,width:Ot,height:Nt},styles:{style:Y.StrokeFill,color:yi,borderColor:_i,borderSize:Vt,borderRadius:mi}}))===null||b===void 0||b.draw(e);var bi=bt+Vt+xt+lt,zt=jt+Vt+Lt;if(v&&k.forEach(function(kt){var pt,gt;zt+=j;var wt=kt.title;(pt=_.createFigure({name:"text",attrs:{x:bi,y:zt,text:wt.text},styles:{color:wt.color,size:tt,family:et,weight:J}}))===null||pt===void 0||pt.draw(e);var At=kt.value;(gt=_.createFigure({name:"text",attrs:{x:bt+Ot-Vt-ct-Bt,y:zt,text:At.text,align:"right"},styles:{color:At.color,size:tt,family:et,weight:J}}))===null||gt===void 0||gt.draw(e),zt+=tt+Z}),p){var wi=bt+Vt+xt+ur;dr.forEach(function(kt){kt.forEach(function(pt){var gt,wt;zt+=hr;var At=pt.title,xe=pt.value;(gt=_.createFigure({name:"text",attrs:{x:wi,y:zt,text:At.text},styles:{color:At.color,size:he,family:Le,weight:Be}}))===null||gt===void 0||gt.draw(e),(wt=_.createFigure({name:"text",attrs:{x:bt+Ot-Vt-cr-Bt,y:zt,text:xe.text,align:"right"},styles:{color:xe.color,size:he,family:Le,weight:Be}}))===null||wt===void 0||wt.draw(e),zt+=he+vr})})}}}},t.prototype._getCandleTooltipLegends=function(e,r,n,a,s,l,o,u){var c,h,f,d,v,p=u.tooltip,g=p.text.color,m=e.current,_=(h=(c=e.prev)===null||c===void 0?void 0:c.close)!==null&&h!==void 0?h:m.close,S=m.close-_,y=r.price,x=r.volume,w={"{time}":s.formatDate(n,m.timestamp,"YYYY-MM-DD HH:mm",ut.Tooltip),"{open}":at(rt(Q(m.open,y),l),o),"{high}":at(rt(Q(m.high,y),l),o),"{low}":at(rt(Q(m.low,y),l),o),"{close}":at(rt(Q(m.close,y),l),o),"{volume}":at(rt(s.formatBigNumber(Q((f=m.volume)!==null&&f!==void 0?f:p.defaultValue,x)),l),o),"{turnover}":at(rt(Q((d=m.turnover)!==null&&d!==void 0?d:p.defaultValue,y),l),o),"{change}":_===0?p.defaultValue:"".concat(rt(Q(S/_*100),l),"%")},b=(v=Ft(p.custom)?p.custom(e,u):p.custom)!==null&&v!==void 0?v:[];return b.map(function(E){var C,P=E.title,M=E.value,I={text:"",color:""};Tt(P)?I=B({},P):(I.text=P,I.color=g),I.text=Ya(I.text,a);var k={text:p.defaultValue,color:""};Tt(M)?k=B({},M):(k.text=M,k.color=g);var A=k.text.match(/{(\S*)}/);if(A!==null&&A.length>1){var V="{".concat(A[1],"}");k.text=k.text.replace(V,(C=w[V])!==null&&C!==void 0?C:p.defaultValue),V==="{change}"&&(k.color=S===0?u.priceMark.last.noChangeColor:S>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:I,value:k}})},t}(ai),$a=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n._candleBarView=new ni(n),n._candleAreaView=new Va(n),n._candleHighLowPriceView=new Oa(n),n._candleLastPriceLineView=new Na(n),n.addChild(n._candleBarView),n}return t.prototype.updateMainContent=function(e){var r=this.getPane().getChart().getStyles().candle;r.type!==mt.Area?(this._candleBarView.draw(e),this._candleHighLowPriceView.draw(e),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(e),this._candleLastPriceLineView.draw(e)},t.prototype.createTooltipView=function(){return new Ha(this)},t}(si),li=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r=this,n,a,s=this.getWidget(),l=s.getPane(),o=s.getBounding(),u=l.getAxisComponent(),c=this.getAxisStyles(l.getChart().getStyles());if(c.show){c.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(o,c),styles:c.axisLine}))===null||n===void 0||n.draw(e));var h=u.getTicks();if(c.tickLine.show){var f=this.createTickLines(h,o,c);f.forEach(function(v){var p;(p=r.createFigure({name:"line",attrs:v,styles:c.tickLine}))===null||p===void 0||p.draw(e)})}if(c.tickText.show){var d=this.createTickTexts(h,o,c);(a=this.createFigure({name:"text",attrs:d,styles:c.tickText}))===null||a===void 0||a.draw(e)}}},t}(Dt),Ga=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.yAxis},t.prototype.createAxisLine=function(e,r){var n=this.getWidget().getPane().getAxisComponent(),a=r.axisLine.size,s;return n.isFromZero()?s=0:s=e.width-a,{coordinates:[{x:s,y:0},{x:s,y:e.height}]}},t.prototype.createTickLines=function(e,r,n){var a=this.getWidget().getPane().getAxisComponent(),s=n.axisLine,l=n.tickLine,o=0,u=0;return a.isFromZero()?(o=0,s.show&&(o+=s.size),u=o+l.length):(o=r.width,s.show&&(o-=s.size),u=o-l.length),e.map(function(c){return{coordinates:[{x:o,y:c.coord},{x:u,y:c.coord}]}})},t.prototype.createTickTexts=function(e,r,n){var a=this.getWidget().getPane().getAxisComponent(),s=n.axisLine,l=n.tickLine,o=n.tickText,u=0;a.isFromZero()?(u=o.marginStart,s.show&&(u+=s.size),l.show&&(u+=l.length)):(u=r.width-o.marginEnd,s.show&&(u-=s.size),l.show&&(u-=l.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return e.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},t}(li),Ua=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r,n=this.getWidget(),a=n.getPane(),s=n.getBounding(),l=a.getChart().getChartStore(),o=l.getStyles().candle.priceMark,u=o.last,c=u.text;if(o.show&&u.show&&c.show){var h=l.getPrecision(),f=a.getAxisComponent(),d=l.getDataList(),v=d[d.length-1];if(T(v)){var p=v.close,g=v.open,m=f.convertToNicePixel(p),_=void 0;p>g?_=u.upColor:p<g?_=u.downColor:_=u.noChangeColor;var S=void 0;if(f.getType()===ot.Percentage){var y=l.getVisibleFirstData(),x=y.close;S="".concat(((p-x)/x*100).toFixed(2),"%")}else S=Q(p,h.price);S=at(rt(S,l.getThousandsSeparator()),l.getDecimalFoldThreshold());var w=void 0,b=void 0;f.isFromZero()?(w=0,b="left"):(w=s.width,b="right"),(r=this.createFigure({name:"text",attrs:{x:w,y:m,text:S,align:b,baseline:"middle"},styles:B(B({},c),{backgroundColor:_})}))===null||r===void 0||r.draw(e)}}},t}(Dt),ja=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r=this,n=this.getWidget(),a=n.getPane(),s=n.getBounding(),l=a.getChart().getChartStore(),o=l.getCustomApi(),u=l.getStyles().indicator,c=u.lastValueMark,h=c.text;if(c.show){var f=a.getAxisComponent(),d=l.getDataList(),v=d.length-1,p=l.getIndicatorStore().getInstances(a.getId()),g=l.getThousandsSeparator(),m=l.getDecimalFoldThreshold();p.forEach(function(_){var S=_.result,y=S[v];if(T(y)&&_.visible){var x=_.precision;ir(d,_,v,u,function(w,b){var E,C=y[w.key];if(R(C)){var P=f.convertToNicePixel(C),M=Q(C,x);_.shouldFormatBigNumber&&(M=o.formatBigNumber(M)),M=at(rt(M,g),m);var I=void 0,k=void 0;f.isFromZero()?(I=0,k="left"):(I=s.width,k="right"),(E=r.createFigure({name:"text",attrs:{x:I,y:P,text:M,align:k,baseline:"middle"},styles:B(B({},h),{backgroundColor:b.color})}))===null||E===void 0||E.draw(e)}})}})}},t}(Dt),ui=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(e,r,n,a,s,l,o,u,c,h,f,d,v,p){this.drawFigures(e,r,this.getDefaultFigures(r,n,a,s,l,o,u,c,f,d,p),h)},t.prototype.getDefaultFigures=function(e,r,n,a,s,l,o,u,c,h,f){var d,v,p=[];if(e.needDefaultYAxisFigure&&e.id===((d=f.instance)===null||d===void 0?void 0:d.id)&&f.paneId===this.getWidget().getPane().getId()){var g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,_=(v=h==null?void 0:h.isFromZero())!==null&&v!==void 0?v:!1,S,y;_?(S="left",y=0):(S="right",y=n.width),r.forEach(function(x,w){var b=e.points[w];if(R(b.value)){g=Math.min(g,x.y),m=Math.max(m,x.y);var E=at(rt(Q(b.value,a.price),o),u);p.push({type:"text",attrs:{x:y,y:x.y,text:E,align:S,baseline:"middle"},ignoreEvent:!0})}}),r.length>1&&p.unshift({type:"rect",attrs:{x:0,y:g,width:n.width,height:m-g},ignoreEvent:!0})}return p},t.prototype.getFigures=function(e,r,n,a,s,l,o,u,c,h,f){var d,v;return(v=(d=e.createYAxisFigures)===null||d===void 0?void 0:d.call(e,{overlay:e,coordinates:r,bounding:n,barSpace:a,precision:s,thousandsSeparator:l,decimalFoldThreshold:o,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&v!==void 0?v:[]},t}(oi),ci=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var r,n=this.getWidget(),a=n.getPane(),s=n.getBounding(),l=n.getPane().getChart().getChartStore(),o=l.getTooltipStore().getCrosshair(),u=l.getStyles().crosshair;if(O(o.paneId)&&this.compare(o,a.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var f=a.getAxisComponent(),d=this.getText(o,l,f);e.font=te(h.size,h.weight,h.family),(r=this.createFigure({name:"text",attrs:this.getTextAttrs(d,e.measureText(d).width,o,s,f,h),styles:h}))===null||r===void 0||r.draw(e)}}},t.prototype.compare=function(e,r){return e.paneId===r},t.prototype.getDirectionStyles=function(e){return e.horizontal},t.prototype.getText=function(e,r,n){var a=n,s=n.convertFromPixel(e.y),l;if(a.getType()===ot.Percentage){var o=r.getVisibleFirstData();l="".concat(((s-o.close)/o.close*100).toFixed(2),"%")}else{var u=r.getIndicatorStore().getInstances(e.paneId),c=0,h=!1;a.isInCandle()?c=r.getPrecision().price:u.forEach(function(f){c=Math.max(f.precision,c),h||(h=f.shouldFormatBigNumber)}),l=Q(s,c),h&&(l=r.getCustomApi().formatBigNumber(l))}return at(rt(l,r.getThousandsSeparator()),r.getDecimalFoldThreshold())},t.prototype.getTextAttrs=function(e,r,n,a,s,l){var o=s,u,c;return o.isFromZero()?(u=0,c="left"):(u=a.width,c="right"),{x:u,y:n.y,text:e,align:c,baseline:"middle"}},t}(Dt),Za=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n._yAxisView=new Ga(n),n._candleLastPriceLabelView=new Ua(n),n._indicatorLastValueView=new ja(n),n._overlayYAxisView=new ui(n),n._crosshairHorizontalLabelView=new ci(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return t.prototype.getName=function(){return z.Y_AXIS},t.prototype.updateMain=function(e){this._yAxisView.draw(e),this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(e),this._indicatorLastValueView.draw(e)},t.prototype.updateOverlay=function(e){this._overlayYAxisView.draw(e),this._crosshairHorizontalLabelView.draw(e)},t}(or),hi=function(){function i(t){this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return i.prototype.getParent=function(){return this._parent},i.prototype.buildTicks=function(t){if(this._autoCalcTickFlag&&(this._range=this.calcRange()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t){this._prevRange=this._range;var e=this.optimalTicks(this._calcTicks());return this._ticks=this.createTicks({range:this._range,bounding:this.getSelfBounding(),defaultTicks:e}),!0}return!1},i.prototype.getTicks=function(){return this._ticks},i.prototype.getScrollZoomEnabled=function(){var t;return(t=this.getParent().getOptions().axisOptions.scrollZoomEnabled)!==null&&t!==void 0?t:!0},i.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},i.prototype.getRange=function(){return this._range},i.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},i.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},i.prototype._calcTicks=function(){var t=this._range,e=t.realFrom,r=t.realTo,n=t.realRange,a=[];if(n>=0){var s=ee(this._calcTickInterval(n),2),l=s[0],o=s[1],u=xr(Math.ceil(e/l)*l,o),c=xr(Math.floor(r/l)*l,o),h=0,f=u;if(l!==0)for(;f<=c;){var d=f.toFixed(o);a[h]={text:d,coord:0,value:d},++h,f+=l}}return a},i.prototype._calcTickInterval=function(t){var e=rn(t/8),r=nn(e);return[e,r]},i}(),qa=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.calcRange=function(){var e,r,n,a,s=this.getParent(),l=s.getChart(),o=l.getChartStore(),u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=[],f=!1,d=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,g=o.getIndicatorStore().getInstances(s.getId());g.forEach(function(Z){var tt,J,et;f||(f=(tt=Z.shouldOhlc)!==null&&tt!==void 0?tt:!1),p=Math.min(p,Z.precision),R(Z.minValue)&&(d=Math.min(d,Z.minValue)),R(Z.maxValue)&&(v=Math.max(v,Z.maxValue)),h.push({figures:(J=Z.figures)!==null&&J!==void 0?J:[],result:(et=Z.result)!==null&&et!==void 0?et:[]})});var m=4,_=this.isInCandle();if(_){var S=o.getPrecision().price;p!==Number.MAX_SAFE_INTEGER?m=Math.min(p,S):m=S}else p!==Number.MAX_SAFE_INTEGER&&(m=p);var y=o.getVisibleDataList(),x=l.getStyles().candle,w=x.type===mt.Area,b=x.area.value,E=_&&!w||!_&&f;y.forEach(function(Z){var tt=Z.dataIndex,J=Z.data;if(T(J)&&(E&&(u=Math.min(u,J.low),c=Math.max(c,J.high)),_&&w)){var et=J[b];R(et)&&(u=Math.min(u,et),c=Math.max(c,et))}h.forEach(function(K){var Et,xt=K.figures,Bt=K.result,Lt=(Et=Bt[tt])!==null&&Et!==void 0?Et:{};xt.forEach(function(Gt){var It=Lt[Gt.key];R(It)&&(u=Math.min(u,It),c=Math.max(c,It))})})}),u!==Number.MAX_SAFE_INTEGER&&c!==Number.MIN_SAFE_INTEGER?(u=Math.min(d,u),c=Math.max(v,c)):(u=0,c=10);var C=this.getType(),P;switch(C){case ot.Percentage:{var M=o.getVisibleFirstData();T(M)&&R(M.close)&&(u=(u-M.close)/M.close*100,c=(c-M.close)/M.close*100),P=Math.pow(10,-2);break}case ot.Log:{u=fe(u),c=fe(c),P=.05*Zt(-m);break}default:P=Zt(-m)}if(u===c||Math.abs(u-c)<P){var I=d===u,k=v===c;u=I?u:k?u-8*P:u-4*P,c=k?c:I?c+8*P:c+4*P}var A=(r=(e=this.getParent().getYAxisWidget())===null||e===void 0?void 0:e.getBounding().height)!==null&&r!==void 0?r:0,V=s.getOptions().gap,F=(n=V==null?void 0:V.top)!==null&&n!==void 0?n:.2;F>=1&&(F=F/A);var $=(a=V==null?void 0:V.bottom)!==null&&a!==void 0?a:.1;$>=1&&($=$/A);var X=Math.abs(c-u);u=u-X*$,c=c+X*F,X=Math.abs(c-u);var lt,ct,j;return C===ot.Log?(lt=Zt(u),ct=Zt(c),j=Math.abs(ct-lt)):(lt=u,ct=c,j=X),{from:u,to:c,range:X,realFrom:lt,realTo:ct,realRange:j}},t.prototype._innerConvertToPixel=function(e){var r,n,a=(n=(r=this.getParent().getYAxisWidget())===null||r===void 0?void 0:r.getBounding().height)!==null&&n!==void 0?n:0,s=this.getRange(),l=s.from,o=s.range,u=(e-l)/o;return this.isReverse()?Math.round(u*a):Math.round((1-u)*a)},t.prototype.isInCandle=function(){return this.getParent().getId()===H.CANDLE},t.prototype.getType=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.type:ot.Normal},t.prototype.getPosition=function(){return this.getParent().getChart().getStyles().yAxis.position},t.prototype.isReverse=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.reverse:!1},t.prototype.isFromZero=function(){var e=this.getParent().getChart().getStyles().yAxis,r=e.inside;return e.position===$t.Left&&r||e.position===$t.Right&&!r},t.prototype.optimalTicks=function(e){var r=this,n,a,s=this.getParent(),l=(a=(n=s.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,o=s.getChart().getChartStore(),u=o.getCustomApi(),c=[],h=this.getType(),f=o.getIndicatorStore().getInstances(s.getId()),d=o.getThousandsSeparator(),v=o.getDecimalFoldThreshold(),p=0,g=!1;this.isInCandle()?p=o.getPrecision().price:f.forEach(function(S){p=Math.max(p,S.precision),g||(g=S.shouldFormatBigNumber)});var m=o.getStyles().xAxis.tickText.size,_;return e.forEach(function(S){var y=S.value,x,w=r._innerConvertToPixel(+y);switch(h){case ot.Percentage:{x="".concat(Q(y,2),"%");break}case ot.Log:{w=r._innerConvertToPixel(fe(+y)),x=Q(y,p);break}default:{x=Q(y,p),g&&(x=u.formatBigNumber(y));break}}x=at(rt(x,d),v);var b=R(_);w>m&&w<l-m&&(b&&Math.abs(_-w)>m*2||!b)&&(c.push({text:x,coord:w,value:y}),_=w)}),c},t.prototype.getAutoSize=function(){var e=this.getParent(),r=e.getChart(),n=r.getStyles(),a=n.yAxis,s=a.size;if(s!=="auto")return s;var l=r.getChartStore(),o=l.getCustomApi(),u=0;if(a.show&&(a.axisLine.show&&(u+=a.axisLine.size),a.tickLine.show&&(u+=a.tickLine.length),a.tickText.show)){var c=0;this.getTicks().forEach(function(y){c=Math.max(c,Pe(y.text,a.tickText.size,a.tickText.weight,a.tickText.family))}),u+=a.tickText.marginStart+a.tickText.marginEnd+c}var h=n.crosshair,f=0;if(h.show&&h.horizontal.show&&h.horizontal.text.show){var d=l.getIndicatorStore().getInstances(e.getId()),v=0,p=!1;d.forEach(function(y){v=Math.max(y.precision,v),p||(p=y.shouldFormatBigNumber)});var g=2;if(this.getType()!==ot.Percentage)if(this.isInCandle()){var m=l.getPrecision().price,_=n.indicator.lastValueMark;_.show&&_.text.show?g=Math.max(v,m):g=m}else g=v;var S=Q(this.getRange().to,g);p&&(S=o.formatBigNumber(S)),S=at(S,l.getDecimalFoldThreshold()),f+=h.horizontal.text.paddingLeft+h.horizontal.text.paddingRight+h.horizontal.text.borderSize*2+Pe(S,h.horizontal.text.size,h.horizontal.text.weight,h.horizontal.text.family)}return Math.max(u,f)},t.prototype.getSelfBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(e){var r,n,a=(n=(r=this.getParent().getYAxisWidget())===null||r===void 0?void 0:r.getBounding().height)!==null&&n!==void 0?n:0,s=this.getRange(),l=s.from,o=s.range,u=this.isReverse()?e/a:1-e/a,c=u*o+l;switch(this.getType()){case ot.Percentage:{var h=this.getParent().getChart().getChartStore().getVisibleFirstData();return T(h)&&R(h.close)?h.close*c/100+h.close:0}case ot.Log:return Zt(c);default:return c}},t.prototype.convertToRealValue=function(e){var r=e;return this.getType()===ot.Log&&(r=Zt(e)),r},t.prototype.convertToPixel=function(e){var r=e;switch(this.getType()){case ot.Percentage:{var n=this.getParent().getChart().getChartStore().getVisibleFirstData();T(n)&&R(n.close)&&(r=(e-n.close)/n.close*100);break}case ot.Log:{r=fe(e);break}default:r=e}return this._innerConvertToPixel(r)},t.prototype.convertToNicePixel=function(e){var r,n,a=(n=(r=this.getParent().getYAxisWidget())===null||r===void 0?void 0:r.getBounding().height)!==null&&n!==void 0?n:0,s=this.convertToPixel(e);return Math.round(Math.max(a*.05,Math.min(s,a*.98)))},t.extend=function(e){var r=function(n){N(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.createTicks=function(s){return e.createTicks(s)},a}(t);return r},t}(hi),Ka={name:"default",createTicks:function(i){var t=i.defaultTicks;return t}},Ir={default:qa.extend(Ka)};function Qa(i){var t;return(t=Ir[i])!==null&&t!==void 0?t:Ir.default}var vi=function(){function i(t,e,r,n){this._bounding=Qr(),this._chart=r,this._id=n,this._init(t,e)}return i.prototype._init=function(t,e){this._rootContainer=t,this._container=Rt("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),e!==null?t.insertBefore(this._container,e):t.appendChild(this._container)},i.prototype.getContainer=function(){return this._container},i.prototype.getId=function(){return this._id},i.prototype.getChart=function(){return this._chart},i.prototype.getBounding=function(){return this._bounding},i.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},i.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},i}(),di=function(i){N(t,i);function t(e,r,n,a,s){var l=i.call(this,e,r,n,a)||this;l._yAxisWidget=null,l._options={minHeight:la,dragEnabled:!0,gap:{top:.2,bottom:.1},axisOptions:{name:"default",scrollZoomEnabled:!0}};var o=l.getContainer();return l._mainWidget=l.createMainWidget(o),l._yAxisWidget=l.createYAxisWidget(o),l.setOptions(s),l}return t.prototype.setOptions=function(e){var r,n,a,s=(r=e.axisOptions)===null||r===void 0?void 0:r.name;(this._options.axisOptions.name!==s&&O(s)||!T(this._axis))&&(this._axis=this.createAxisComponent(s??"default")),St(this._options,e);var l,o;return this.getId()===H.X_AXIS?(l=this.getMainWidget().getContainer(),o="ew-resize"):(l=this.getYAxisWidget().getContainer(),o="ns-resize"),!((a=(n=e.axisOptions)===null||n===void 0?void 0:n.scrollZoomEnabled)!==null&&a!==void 0)||a?l.style.cursor=o:l.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(e,r,n){var a,s;St(this.getBounding(),e);var l={};return T(e.height)&&(l.height=e.height),T(e.top)&&(l.top=e.top),this._mainWidget.setBounding(l),(a=this._yAxisWidget)===null||a===void 0||a.setBounding(l),T(r)&&this._mainWidget.setBounding(r),T(n)&&((s=this._yAxisWidget)===null||s===void 0||s.setBounding(n)),this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(e){var r;this._mainWidget.update(e),(r=this._yAxisWidget)===null||r===void 0||r.update(e)},t.prototype.destroy=function(){var e;i.prototype.destroy.call(this),this._mainWidget.destroy(),(e=this._yAxisWidget)===null||e===void 0||e.destroy()},t.prototype.getImage=function(e){var r=this.getBounding(),n=r.width,a=r.height,s=Rt("canvas",{width:"".concat(n,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),o=Ht(s);s.width=n*o,s.height=a*o,l.scale(o,o);var u=this._mainWidget.getBounding();if(l.drawImage(this._mainWidget.getImage(e),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();l.drawImage(this._yAxisWidget.getImage(e),c.left,0,c.width,c.height)}return s},t.prototype.createYAxisWidget=function(e){return null},t}(vi),fi=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var r=Qa(e??"default");return new r(this)},t.prototype.createMainWidget=function(e){return new si(e,this)},t.prototype.createYAxisWidget=function(e){return new Za(e,this)},t}(di),Ja=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createMainWidget=function(e){return new $a(e,this)},t}(fi),to=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.xAxis},t.prototype.createAxisLine=function(e){return{coordinates:[{x:0,y:0},{x:e.width,y:0}]}},t.prototype.createTickLines=function(e,r,n){var a=n.tickLine,s=n.axisLine.size;return e.map(function(l){return{coordinates:[{x:l.coord,y:0},{x:l.coord,y:s+a.length}]}})},t.prototype.createTickTexts=function(e,r,n){var a=n.tickText,s=n.axisLine.size,l=n.tickLine.length;return e.map(function(o){return{x:o.coord,y:s+l+a.marginStart,text:o.text,align:"center",baseline:"top"}})},t}(li),eo=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(e){return e.getInstances()},t.prototype.getProgressOverlay=function(e){return e.instance},t.prototype.getDefaultFigures=function(e,r,n,a,s,l,o,u,c,h,f){var d,v=[];if(e.needDefaultXAxisFigure&&e.id===((d=f.instance)===null||d===void 0?void 0:d.id)){var p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;r.forEach(function(m,_){p=Math.min(p,m.x),g=Math.max(g,m.x);var S=e.points[_];if(R(S.timestamp)){var y=l.formatDate(s,S.timestamp,"YYYY-MM-DD HH:mm",ut.Crosshair);v.push({type:"text",attrs:{x:m.x,y:0,text:y,align:"center"},ignoreEvent:!0})}}),r.length>1&&v.unshift({type:"rect",attrs:{x:p,y:0,width:g-p,height:n.height},ignoreEvent:!0})}return v},t.prototype.getFigures=function(e,r,n,a,s,l,o,u,c,h,f){var d,v;return(v=(d=e.createXAxisFigures)===null||d===void 0?void 0:d.call(e,{overlay:e,coordinates:r,bounding:n,barSpace:a,precision:s,thousandsSeparator:l,decimalFoldThreshold:o,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&v!==void 0?v:[]},t}(ui),ro=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.compare=function(e){return T(e.kLineData)&&e.dataIndex===e.realDataIndex},t.prototype.getDirectionStyles=function(e){return e.vertical},t.prototype.getText=function(e,r){var n,a=(n=e.kLineData)===null||n===void 0?void 0:n.timestamp;return r.getCustomApi().formatDate(r.getTimeScaleStore().getDateTimeFormat(),a,"YYYY-MM-DD HH:mm",ut.Crosshair)},t.prototype.getTextAttrs=function(e,r,n,a,s,l){var o=n.realX,u,c="center";return o-r/2-l.paddingLeft<0?(u=0,c="left"):o+r/2+l.paddingRight>a.width?(u=a.width,c="right"):u=o,{x:u,y:0,text:e,align:c,baseline:"top"}},t}(ci),io=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n._xAxisView=new to(n),n._overlayXAxisView=new eo(n),n._crosshairVerticalLabelView=new ro(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return t.prototype.getName=function(){return z.X_AXIS},t.prototype.updateMain=function(e){this._xAxisView.draw(e)},t.prototype.updateOverlay=function(e){this._overlayXAxisView.draw(e),this._crosshairVerticalLabelView.draw(e)},t}(or),no=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.calcRange=function(){var e=this.getParent().getChart().getChartStore(),r=e.getTimeScaleStore().getVisibleRange(),n=r.from,a=r.to,s=n,l=a-1,o=a-n;return{from:s,to:l,range:o,realFrom:s,realTo:l,realRange:o}},t.prototype.optimalTicks=function(e){var r,n,a=this.getParent().getChart(),s=a.getChartStore(),l=s.getCustomApi().formatDate,o=[],u=e.length,c=s.getDataList();if(u>0){var h=s.getTimeScaleStore().getDateTimeFormat(),f=a.getStyles().xAxis.tickText,d=Pe("00-00 00:00",f.size,f.weight,f.family),v=parseInt(e[0].value,10),p=this.convertToPixel(v),g=1;if(u>1){var m=parseInt(e[1].value,10),_=this.convertToPixel(m),S=Math.abs(_-p);S<d&&(g=Math.ceil(d/S))}for(var y=0;y<u;y+=g){var x=parseInt(e[y].value,10),w=c[x],b=w.timestamp,E=l(h,b,"HH:mm",ut.XAxis);if(y!==0){var C=parseInt(e[y-g].value,10),P=c[C],M=P.timestamp;E=(r=this._optimalTickLabel(l,h,b,M))!==null&&r!==void 0?r:E}var I=this.convertToPixel(x);o.push({text:E,coord:I,value:b})}var k=o.length;if(k===1)o[0].text=l(h,o[0].value,"YYYY-MM-DD HH:mm",ut.XAxis);else{var A=o[0].value,V=o[1].value;if(T(o[2])){var F=o[2].text;/^[0-9]{2}-[0-9]{2}$/.test(F)?o[0].text=l(h,A,"MM-DD",ut.XAxis):/^[0-9]{4}-[0-9]{2}$/.test(F)?o[0].text=l(h,A,"YYYY-MM",ut.XAxis):/^[0-9]{4}$/.test(F)&&(o[0].text=l(h,A,"YYYY",ut.XAxis))}else o[0].text=(n=this._optimalTickLabel(l,h,A,V))!==null&&n!==void 0?n:o[0].text}}return o},t.prototype._optimalTickLabel=function(e,r,n,a){var s=e(r,n,"YYYY",ut.XAxis),l=e(r,n,"YYYY-MM",ut.XAxis),o=e(r,n,"MM-DD",ut.XAxis);return s!==e(r,a,"YYYY",ut.XAxis)?s:l!==e(r,a,"YYYY-MM",ut.XAxis)?l:o!==e(r,a,"MM-DD",ut.XAxis)?o:null},t.prototype.getAutoSize=function(){var e=this.getParent().getChart().getStyles(),r=e.xAxis,n=r.size;if(n!=="auto")return n;var a=e.crosshair,s=0;r.show&&(r.axisLine.show&&(s+=r.axisLine.size),r.tickLine.show&&(s+=r.tickLine.length),r.tickText.show&&(s+=r.tickText.marginStart+r.tickText.marginEnd+r.tickText.size));var l=0;return a.show&&a.vertical.show&&a.vertical.text.show&&(l+=a.vertical.text.paddingTop+a.vertical.text.paddingBottom+a.vertical.text.borderSize*2+a.vertical.text.size),Math.max(s,l)},t.prototype.getSelfBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(e){var r=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=r.coordinateToDataIndex(e);return r.dataIndexToTimestamp(n)},t.prototype.convertTimestampToPixel=function(e){var r=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=r.timestampToDataIndex(e);return r.dataIndexToCoordinate(n)},t.prototype.convertFromPixel=function(e){return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(e)},t.prototype.convertToPixel=function(e){return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(e)},t.extend=function(e){var r=function(n){N(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.createTicks=function(s){return e.createTicks(s)},a}(t);return r},t}(hi),ao={name:"default",createTicks:function(i){var t=i.defaultTicks;return t}},Pr={default:no.extend(ao)};function oo(i){var t;return(t=Pr[i])!==null&&t!==void 0?t:Pr.default}var so=function(i){N(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var r=oo(e);return new r(this)},t.prototype.createMainWidget=function(e){return new io(e,this)},t}(di);function lo(i,t){var e=0;return function(){var r=Date.now();r-e>t&&(i.apply(this,arguments),e=r)}}var uo=function(i){N(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n._dragFlag=!1,n._dragStartY=0,n._topPaneHeight=0,n._bottomPaneHeight=0,n._pressedMouseMoveEvent=lo(n._pressedTouchMouseMoveEvent,20),n.registerEvent("touchStartEvent",n._mouseDownEvent.bind(n)).registerEvent("touchMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("touchEndEvent",n._mouseUpEvent.bind(n)).registerEvent("mouseDownEvent",n._mouseDownEvent.bind(n)).registerEvent("mouseUpEvent",n._mouseUpEvent.bind(n)).registerEvent("pressedMouseMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("mouseEnterEvent",n._mouseEnterEvent.bind(n)).registerEvent("mouseLeaveEvent",n._mouseLeaveEvent.bind(n)),n}return t.prototype.getName=function(){return z.SEPARATOR},t.prototype.checkEventOn=function(){return!0},t.prototype._mouseDownEvent=function(e){this._dragFlag=!0,this._dragStartY=e.pageY;var r=this.getPane();return this._topPaneHeight=r.getTopPane().getBounding().height,this._bottomPaneHeight=r.getBottomPane().getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(e){var r=e.pageY-this._dragStartY,n=this.getPane(),a=n.getTopPane(),s=n.getBottomPane(),l=r<0;if(a!==null&&(s!=null&&s.getOptions().dragEnabled)){var o=void 0,u=void 0,c=void 0,h=void 0;l?(o=a,u=s,c=this._topPaneHeight,h=this._bottomPaneHeight):(o=s,u=a,c=this._bottomPaneHeight,h=this._topPaneHeight);var f=o.getOptions().minHeight;if(c>f){var d=Math.max(c-Math.abs(r),f),v=c-d;o.setBounding({height:d}),u.setBounding({height:h+v});var p=n.getChart();p.getChartStore().getActionStore().execute(yt.OnPaneDrag,{paneId:n.getId()}),p.adjustPaneViewport(!0,!0,!0,!0,!0)}}return!0},t.prototype._mouseEnterEvent=function(){var e,r=this.getPane(),n=r.getBottomPane();if((e=n==null?void 0:n.getOptions().dragEnabled)!==null&&e!==void 0&&e){var a=r.getChart(),s=a.getStyles().separator;return this.getContainer().style.background=s.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="",!0)},t.prototype.createContainer=function(){return Rt("div",{width:"100%",height:"".concat(ge,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(e,r,n){if(n===4||n===2){var a=this.getPane().getChart().getStyles().separator;e.style.top="".concat(-Math.floor((ge-a.size)/2),"px"),e.style.height="".concat(ge,"px")}},t}(Jr),Mr=function(i){N(t,i);function t(e,r,n,a,s,l){var o=i.call(this,e,r,n,a)||this;return o.getContainer().style.overflow="",o._topPane=s,o._bottomPane=l,o._separatorWidget=new uo(o.getContainer(),o),o}return t.prototype.setBounding=function(e){return St(this.getBounding(),e),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(e){return this._topPane=e,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(e){return this._bottomPane=e,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(e){var r=this.getBounding(),n=r.width,a=r.height,s=this.getChart().getStyles().separator,l=Rt("canvas",{width:"".concat(n,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),o=l.getContext("2d"),u=Ht(l);return l.width=n*u,l.height=a*u,o.scale(u,u),o.fillStyle=s.color,o.fillRect(0,0,n,a),l},t.prototype.updateImp=function(e,r,n){if(e===4||e===2){var a=this.getChart().getStyles().separator;r.style.backgroundColor=a.color,r.style.height="".concat(n.height,"px"),r.style.marginLeft="".concat(n.left,"px"),r.style.width="".concat(n.width,"px"),this._separatorWidget.update(e)}},t}(vi);function Tr(){var i;return typeof window>"u"?!1:((i=window.navigator.userAgent.toLowerCase().indexOf("firefox"))!==null&&i!==void 0?i:-1)>-1}function Xe(){return typeof window>"u"?!1:/iPhone|iPad|iPod/.test(window.navigator.platform)}var co=10,ho=function(){function i(t,e,r){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Xe(),this._onFirefoxOutsideMouseUp=function(a){n._mouseUpHandler(a)},this._onMobileSafariDoubleClick=function(a){if(n._firesTouchEvents(a)){if(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1){var s=n._mouseTouchMoveWithDownInfo(n._getCoordinate(a),n._tapCoordinate).manhattanDistance;s<30&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(a),n._handler.doubleTapEvent),n._resetTapTimeout()}}else if(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1){var s=n._mouseTouchMoveWithDownInfo(n._getCoordinate(a),n._clickCoordinate).manhattanDistance;s<5&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(a),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()}},this._target=t,this._handler=e,this._options=r,this._init()}return i.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},i.prototype._mouseEnterHandler=function(t){var e=this,r,n,a;(r=this._unsubscribeMousemove)===null||r===void 0||r.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(a=this._unsubscribeContextMenu)===null||a===void 0||a.call(this);var s=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){e._target.removeEventListener("mousemove",s)},this._target.addEventListener("mousemove",s);var l=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){e._target.removeEventListener("wheel",l)},this._target.addEventListener("wheel",l,{passive:!1});var o=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){e._target.removeEventListener("contextmenu",o)},this._target.addEventListener("contextmenu",o,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},i.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},i.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},i.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},i.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!T(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!T(this._handler.mouseWheelVertEvent))return;var e=-(t.deltaY/100);if(e===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120;break;case t.DOM_DELTA_LINE:e*=32;break}if(e!==0){var r=Math.sign(e)*Math.min(1,Math.abs(e));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),r)}}},i.prototype._contextMenuHandler=function(t){this._preventDefault(t)},i.prototype._touchMoveHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var r=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._touchMoveStartCoordinate),n=r.xOffset,a=r.yOffset,s=r.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&s<5)){if(!this._touchMoveExceededManhattanDistance){var l=n*.5,o=a>=l&&!this._options.treatVertDragAsPageScroll(),u=l>a&&!this._options.treatHorzDragAsPageScroll();!o&&!u&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,e),this._handler.touchMoveEvent)}}},i.prototype._mouseMoveWithDownHandler=function(t){if(t.button===0){var e=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),r=e.manhattanDistance;r>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},i.prototype._mouseTouchMoveWithDownInfo=function(t,e){var r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y),a=r+n;return{xOffset:r,yOffset:n,manhattanDistance:a}},i.prototype._touchEndHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var r=this._makeCompatEvent(t,e);if(this._processEvent(r,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._tapCoordinate).manhattanDistance;n<30&&!this._cancelTap&&this._processEvent(r,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(r,this._handler.tapEvent),T(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},i.prototype._mouseUpHandler=function(t){if(t.button===0){var e=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Tr()){var r=this._target.ownerDocument.documentElement;r.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;n<5&&!this._cancelClick&&this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)}},i.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},i.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var e=t.changedTouches[0];this._activeTouchId=e.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var r=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var n=this._touchMoveHandler.bind(this),a=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){r.removeEventListener("touchmove",n),r.removeEventListener("touchend",a)},r.addEventListener("touchmove",n,{passive:!1}),r.addEventListener("touchend",a,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),500)}this._processEvent(this._makeCompatEvent(t,e),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(e))}},i.prototype._mouseDownHandler=function(t){if(t.button===2){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===0){var e=this._target.ownerDocument.documentElement;Tr()&&e.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var r=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",n)},e.addEventListener("mousemove",r),e.addEventListener("mouseup",n)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(t)))}},i.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var e=this._target.ownerDocument,r=function(n){t._handler.mouseDownOutsideEvent!=null&&(n.composed&&t._target.contains(n.composedPath()[0])||n.target!==null&&t._target.contains(n.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){e.removeEventListener("touchstart",r)},this._unsubscribeOutsideMouseEvents=function(){e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}Xe()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===1)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},i.prototype._initPinch=function(){var t=this;!T(this._handler.pinchStartEvent)&&!T(this._handler.pinchEvent)&&!T(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(e){t._checkPinchState(e.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(e){if(!(e.touches.length!==2||t._startPinchMiddleCoordinate===null)&&T(t._handler.pinchEvent)){var r=t._getTouchDistance(e.touches[0],e.touches[1]),n=r/t._startPinchDistance;t._handler.pinchEvent(B(B({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),n),t._preventDefault(e)}},{passive:!1}),this._target.addEventListener("touchend",function(e){t._checkPinchState(e.touches)}))},i.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},i.prototype._startPinch=function(t){var e,r=(e=this._target.getBoundingClientRect())!==null&&e!==void 0?e:{left:0,top:0};this._startPinchMiddleCoordinate={x:(t[0].clientX-r.left+(t[1].clientX-r.left))/2,y:(t[0].clientY-r.top+(t[1].clientY-r.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),T(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},i.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,T(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},i.prototype._mouseLeaveHandler=function(t){var e,r,n;(e=this._unsubscribeMousemove)===null||e===void 0||e.call(this),(r=this._unsubscribeMouseWheel)===null||r===void 0||r.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Xe())},i.prototype._longTapHandler=function(t){var e=this._touchWithId(t.touches,this._activeTouchId);e!==null&&(this._processEvent(this._makeCompatEvent(t,e),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},i.prototype._firesTouchEvents=function(t){var e;return T((e=t.sourceCapabilities)===null||e===void 0?void 0:e.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+500},i.prototype._processEvent=function(t,e){e==null||e.call(this._handler,t)},i.prototype._makeCompatEvent=function(t,e){var r=this,n,a=e??t,s=(n=this._target.getBoundingClientRect())!==null&&n!==void 0?n:{left:0,top:0};return{x:a.clientX-s.left,y:a.clientY-s.top,pageX:a.pageX,pageY:a.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&r._preventDefault(t)}}},i.prototype._getTouchDistance=function(t,e){var r=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(r*r+n*n)},i.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},i.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},i.prototype._eventTimeStamp=function(t){var e;return(e=t.timeStamp)!==null&&e!==void 0?e:performance.now()},i.prototype._touchWithId=function(t,e){for(var r=0;r<t.length;++r)if(t[r].identifier===e)return t[r];return null},i}(),vo=function(){function i(t,e){var r=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":{r._chart.getChartStore().getTimeScaleStore().zoom(.5);break}case"Minus":{r._chart.getChartStore().getTimeScaleStore().zoom(-.5);break}case"ArrowLeft":{var a=r._chart.getChartStore().getTimeScaleStore();a.startScroll(),a.scroll(-3*a.getBarSpace().bar);break}case"ArrowRight":{var a=r._chart.getChartStore().getTimeScaleStore();a.startScroll(),a.scroll(3*a.getBarSpace().bar);break}}},this._container=t,this._chart=e,this._event=new ho(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return i.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},i.prototype.pinchEvent=function(t,e){var r=this._findWidgetByEvent(t),n=r.pane,a=r.widget;if((n==null?void 0:n.getId())!==H.X_AXIS&&(a==null?void 0:a.getName())===z.MAIN){var s=this._makeWidgetEvent(t,a),l=(e-this._pinchScale)*5;return this._pinchScale=e,this._chart.getChartStore().getTimeScaleStore().zoom(l,{x:s.x,y:s.y}),!0}return!1},i.prototype.mouseWheelHortEvent=function(t,e){var r=this._chart.getChartStore().getTimeScaleStore();return r.startScroll(),r.scroll(e),!0},i.prototype.mouseWheelVertEvent=function(t,e){var r=this._findWidgetByEvent(t).widget,n=this._makeWidgetEvent(t,r),a=r==null?void 0:r.getName();return a===z.MAIN?(this._chart.getChartStore().getTimeScaleStore().zoom(e,{x:n.x,y:n.y}),!0):!1},i.prototype.mouseDownEvent=function(t){var e,r,n=this._findWidgetByEvent(t),a=n.pane,s=n.widget;if(this._mouseDownWidget=s,s!==null){var l=this._makeWidgetEvent(t,s),o=s.getName();switch(o){case z.SEPARATOR:return s.dispatchEvent("mouseDownEvent",l);case z.MAIN:{var u=(e=a.getAxisComponent().getRange())!==null&&e!==void 0?e:null;return this._prevYAxisRange=u===null?u:B({},u),this._startScrollCoordinate={x:l.x,y:l.y},this._chart.getChartStore().getTimeScaleStore().startScroll(),s.dispatchEvent("mouseDownEvent",l)}case z.X_AXIS:{var c=s.dispatchEvent("mouseDownEvent",l);return c&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:l.x,y:l.y},this._xAxisStartScaleDistance=l.pageX,c}case z.Y_AXIS:{var c=s.dispatchEvent("mouseDownEvent",l);c&&this._chart.updatePane(1);var u=(r=a.getAxisComponent().getRange())!==null&&r!==void 0?r:null;return this._prevYAxisRange=u===null?u:B({},u),this._yAxisStartScaleDistance=l.pageY,c}}}return!1},i.prototype.mouseMoveEvent=function(t){var e,r,n,a=this._findWidgetByEvent(t),s=a.pane,l=a.widget,o=this._makeWidgetEvent(t,l);if((((e=this._mouseMoveTriggerWidgetInfo.pane)===null||e===void 0?void 0:e.getId())!==(s==null?void 0:s.getId())||((r=this._mouseMoveTriggerWidgetInfo.widget)===null||r===void 0?void 0:r.getName())!==(l==null?void 0:l.getName()))&&(l==null||l.dispatchEvent("mouseEnterEvent",o),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",o),this._mouseMoveTriggerWidgetInfo={pane:s,widget:l}),l!==null){var u=l.getName();switch(u){case z.MAIN:{var c=l.dispatchEvent("mouseMoveEvent",o),h=this._chart.getChartStore(),f={x:o.x,y:o.y,paneId:s==null?void 0:s.getId()};return c&&h.getTooltipStore().getActiveIcon()!==null&&(f=void 0,l!==null&&(l.getContainer().style.cursor="pointer")),this._chart.getChartStore().getTooltipStore().setCrosshair(f),c}case z.SEPARATOR:case z.X_AXIS:case z.Y_AXIS:{var c=l.dispatchEvent("mouseMoveEvent",o);return this._chart.getChartStore().getTooltipStore().setCrosshair(),c}}}return!1},i.prototype.pressedMouseMoveEvent=function(t){var e,r,n,a,s;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===z.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var l=this._findWidgetByEvent(t),o=l.pane,u=l.widget;if(u!==null&&((e=this._mouseDownWidget)===null||e===void 0?void 0:e.getPane().getId())===(o==null?void 0:o.getId())&&((r=this._mouseDownWidget)===null||r===void 0?void 0:r.getName())===u.getName()){var c=this._makeWidgetEvent(t,u),h=u.getName();switch(h){case z.MAIN:{var f=u.getBounding(),d=u.dispatchEvent("pressedMouseMoveEvent",c);if(!d&&this._startScrollCoordinate!==null){var v=o.getAxisComponent();if(this._prevYAxisRange!==null&&!v.getAutoCalcTickFlag()&&v.getScrollZoomEnabled()){var p=this._prevYAxisRange,g=p.from,m=p.to,_=p.range,S;(n=v==null?void 0:v.isReverse())!==null&&n!==void 0&&n?S=this._startScrollCoordinate.y-c.y:S=c.y-this._startScrollCoordinate.y;var y=S/f.height,x=_*y,w=g+x,b=m+x,E=v.convertToRealValue(w),C=v.convertToRealValue(b);v.setRange({from:w,to:b,range:b-w,realFrom:E,realTo:C,realRange:C-E})}var P=c.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(P)}return this._chart.getChartStore().getTooltipStore().setCrosshair({x:c.x,y:c.y,paneId:o==null?void 0:o.getId()}),d}case z.X_AXIS:{var d=u.dispatchEvent("pressedMouseMoveEvent",c);if(d)this._chart.updatePane(1);else{var M=o.getAxisComponent();if(!((a=M==null?void 0:M.getScrollZoomEnabled())!==null&&a!==void 0)||a){var y=this._xAxisStartScaleDistance/c.pageX;if(Number.isFinite(y)){var I=(y-this._xAxisScale)*10;this._xAxisScale=y,this._chart.getChartStore().getTimeScaleStore().zoom(I,(s=this._xAxisStartScaleCoordinate)!==null&&s!==void 0?s:void 0)}}}return d}case z.Y_AXIS:{var d=u.dispatchEvent("pressedMouseMoveEvent",c);if(d)this._chart.updatePane(1);else{var v=o.getAxisComponent();if(this._prevYAxisRange!==null&&v.getScrollZoomEnabled()){var k=this._prevYAxisRange,g=k.from,m=k.to,_=k.range,y=c.pageY/this._yAxisStartScaleDistance,A=_*y,x=(A-_)/2,w=g-x,b=m+x,E=v.convertToRealValue(w),C=v.convertToRealValue(b);v.setRange({from:w,to:b,range:A,realFrom:E,realTo:C,realRange:C-E}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}}return d}}}return!1},i.prototype.mouseUpEvent=function(t){var e=this._findWidgetByEvent(t).widget,r=!1;if(e!==null){var n=this._makeWidgetEvent(t,e),a=e.getName();switch(a){case z.MAIN:case z.SEPARATOR:case z.X_AXIS:case z.Y_AXIS:{r=e.dispatchEvent("mouseUpEvent",n);break}}r&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,r},i.prototype.mouseClickEvent=function(t){var e=this._findWidgetByEvent(t).widget;if(e!==null){var r=this._makeWidgetEvent(t,e);return e.dispatchEvent("mouseClickEvent",r)}return!1},i.prototype.mouseRightClickEvent=function(t){var e=this._findWidgetByEvent(t).widget,r=!1;if(e!==null){var n=this._makeWidgetEvent(t,e),a=e.getName();switch(a){case z.MAIN:case z.X_AXIS:case z.Y_AXIS:{r=e.dispatchEvent("mouseRightClickEvent",n);break}}r&&this._chart.updatePane(1)}return!1},i.prototype.mouseDoubleClickEvent=function(t){var e=this._findWidgetByEvent(t),r=e.pane,n=e.widget;if(n!==null){var a=n.getName();switch(a){case z.MAIN:{var s=this._makeWidgetEvent(t,n);return n.dispatchEvent("mouseDoubleClickEvent",s)}case z.Y_AXIS:{var l=r.getAxisComponent();if(!l.getAutoCalcTickFlag())return l.setAutoCalcTickFlag(!0),this._chart.adjustPaneViewport(!1,!0,!0,!0),!0;break}}}return!1},i.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().getTooltipStore().setCrosshair(),!0},i.prototype.touchStartEvent=function(t){var e=this._findWidgetByEvent(t),r=e.pane,n=e.widget;if(n!==null){var a=this._makeWidgetEvent(t,n),s=n.getName();switch(s){case z.MAIN:{var l=this._chart.getChartStore(),o=l.getTooltipStore();if(n.dispatchEvent("mouseDownEvent",a))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,o.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&(yr(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:a.x,y:a.y},l.getTimeScaleStore().startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var u=a.x-this._touchCoordinate.x,c=a.y-this._touchCoordinate.y,h=Math.sqrt(u*u+c*c);h<co?(this._touchCoordinate={x:a.x,y:a.y},o.setCrosshair({x:a.x,y:a.y,paneId:r==null?void 0:r.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,o.setCrosshair())}return!0}case z.X_AXIS:case z.Y_AXIS:{var f=n.dispatchEvent("mouseDownEvent",a);return f&&this._chart.updatePane(1),f}}}return!1},i.prototype.touchMoveEvent=function(t){var e,r,n,a=this._findWidgetByEvent(t),s=a.pane,l=a.widget;if(l!==null){var o=this._makeWidgetEvent(t,l),u=l.getName(),c=this._chart.getChartStore(),h=c.getTooltipStore();switch(u){case z.MAIN:{if(l.dispatchEvent("pressedMouseMoveEvent",o))return(e=o.preventDefault)===null||e===void 0||e.call(o),h.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(r=o.preventDefault)===null||r===void 0||r.call(o),h.setCrosshair({x:o.x,y:o.y,paneId:s==null?void 0:s.getId()});else if(this._startScrollCoordinate!==null&&Math.abs(this._startScrollCoordinate.x-o.x)>this._startScrollCoordinate.y-o.y){var f=o.x-this._startScrollCoordinate.x;c.getTimeScaleStore().scroll(f)}return!0}case z.X_AXIS:case z.Y_AXIS:{var d=l.dispatchEvent("pressedMouseMoveEvent",o);return d&&((n=o.preventDefault)===null||n===void 0||n.call(o),this._chart.updatePane(1)),d}}}return!1},i.prototype.touchEndEvent=function(t){var e=this,r=this._findWidgetByEvent(t).widget;if(r!==null){var n=this._makeWidgetEvent(t,r),a=r.getName();switch(a){case z.MAIN:{if(r.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var s=new Date().getTime()-this._flingStartTime,l=n.x-this._startScrollCoordinate.x,o=l/(s>0?s:1)*20;if(s<200&&Math.abs(o)>0){var u=this._chart.getChartStore().getTimeScaleStore(),c=function(){e._flingScrollRequestId=Me(function(){u.startScroll(),u.scroll(o),o=o*(1-.025),Math.abs(o)<1?e._flingScrollRequestId!==null&&(yr(e._flingScrollRequestId),e._flingScrollRequestId=null):c()})};c()}}return!0}case z.X_AXIS:case z.Y_AXIS:{var h=r.dispatchEvent("mouseUpEvent",n);h&&this._chart.updatePane(1)}}}return!1},i.prototype.tapEvent=function(t){var e=this._findWidgetByEvent(t),r=e.pane,n=e.widget,a=!1;if(n!==null){var s=this._makeWidgetEvent(t,n),l=n.dispatchEvent("mouseClickEvent",s);if(n.getName()===z.MAIN){var o=this._makeWidgetEvent(t,n),u=this._chart.getChartStore(),c=u.getTooltipStore();l?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,c.setCrosshair(void 0,{notInvalidate:!0}),a=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:o.x,y:o.y},c.setCrosshair({x:o.x,y:o.y,paneId:r==null?void 0:r.getId()},{notInvalidate:!0}),a=!0),this._touchCancelCrosshair=!1)}(a||l)&&this._chart.updatePane(1)}return a},i.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},i.prototype.longTapEvent=function(t){var e=this._findWidgetByEvent(t),r=e.pane,n=e.widget;if(n!==null&&n.getName()===z.MAIN){var a=this._makeWidgetEvent(t,n);return this._touchCoordinate={x:a.x,y:a.y},this._chart.getChartStore().getTooltipStore().setCrosshair({x:a.x,y:a.y,paneId:r==null?void 0:r.getId()}),!0}return!1},i.prototype._findWidgetByEvent=function(t){var e,r,n,a,s=t.x,l=t.y,o=this._chart.getAllSeparatorPanes(),u=this._chart.getChartStore().getStyles().separator.size;try{for(var c=Jt(o),h=c.next();!h.done;h=c.next()){var f=ee(h.value,2),d=f[1],v=d.getBounding(),p=v.top-Math.round((ge-u)/2);if(s>=v.left&&s<=v.left+v.width&&l>=p&&l<=p+ge)return{pane:d,widget:d.getWidget()}}}catch(P){e={error:P}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}var g=this._chart.getAllDrawPanes(),m=null;try{for(var _=Jt(g),S=_.next();!S.done;S=_.next()){var y=S.value,v=y.getBounding();if(s>=v.left&&s<=v.left+v.width&&l>=v.top&&l<=v.top+v.height){m=y;break}}}catch(P){n={error:P}}finally{try{S&&!S.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}var x=null;if(m!==null){if(x===null){var w=m.getMainWidget(),b=w.getBounding();s>=b.left&&s<=b.left+b.width&&l>=b.top&&l<=b.top+b.height&&(x=w)}if(x===null){var E=m.getYAxisWidget();if(E!==null){var C=E.getBounding();s>=C.left&&s<=C.left+C.width&&l>=C.top&&l<=C.top+C.height&&(x=E)}}}return{pane:m,widget:x}},i.prototype._makeWidgetEvent=function(t,e){var r,n,a,s=(r=e==null?void 0:e.getBounding())!==null&&r!==void 0?r:null;return B(B({},t),{x:t.x-((n=s==null?void 0:s.left)!==null&&n!==void 0?n:0),y:t.y-((a=s==null?void 0:s.top)!==null&&a!==void 0?a:0)})},i.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},i}(),Pt;(function(i){i.Root="root",i.Main="main",i.YAxis="yAxis"})(Pt||(Pt={}));var pi=function(){function i(t,e){this._drawPanes=[],this._separatorPanes=new Map,this._initContainer(t),this._chartEvent=new vo(this._chartContainer,this),this._chartStore=new pa(this,e),this._initPanes(e),this.adjustPaneViewport(!0,!0,!0)}return i.prototype._initContainer=function(t){this._container=t,this._chartContainer=Rt("div",{position:"relative",width:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)},i.prototype._initPanes=function(t){var e=this,r,n=(r=t==null?void 0:t.layout)!==null&&r!==void 0?r:[{type:"candle"}],a=!1,s=!1,l=function(o){if(!s){var u=e._createPane(so,H.X_AXIS,o??{});e._xAxisPane=u,s=!0}};n.forEach(function(o){var u,c,h;switch(o.type){case"candle":{if(!a){var f=(u=o.options)!==null&&u!==void 0?u:{};St(f,{id:H.CANDLE}),e._candlePane=e._createPane(Ja,H.CANDLE,f);var d=(c=o.content)!==null&&c!==void 0?c:[];d.forEach(function(p){e.createIndicator(p,!0,f)}),a=!0}break}case"indicator":{var d=(h=o.content)!==null&&h!==void 0?h:[];if(d.length>0){var v;d.forEach(function(g){T(v)?e.createIndicator(g,!0,{id:v}):v=e.createIndicator(g,!0,o.options)})}break}case"xAxis":{l(o.options);break}}}),l({position:"bottom"})},i.prototype._createPane=function(t,e,r){var n=null,a=null,s=r==null?void 0:r.position;switch(s){case"top":{var l=this._drawPanes[0];T(l)&&(a=new t(this._chartContainer,l.getContainer(),this,e,r??{}),n=0);break}case"bottom":break;default:for(var o=this._drawPanes.length-1;o>-1;o--){var u=this._drawPanes[o],c=this._drawPanes[o-1];if((u==null?void 0:u.getOptions().position)==="bottom"&&(c==null?void 0:c.getOptions().position)!=="bottom"){a=new t(this._chartContainer,u.getContainer(),this,e,r??{}),n=o;break}}}T(a)||(a=new t(this._chartContainer,null,this,e,r??{}));var h;if(R(n)?(this._drawPanes.splice(n,0,a),h=n):(this._drawPanes.push(a),h=this._drawPanes.length-1),a.getId()!==H.X_AXIS){var f=this._drawPanes[h+1];if(T(f)&&f.getId()===H.X_AXIS&&(f=this._drawPanes[h+2]),T(f)){var d=this._separatorPanes.get(f);T(d)?d.setTopPane(a):(d=new Mr(this._chartContainer,f.getContainer(),this,"",a,f),this._separatorPanes.set(f,d))}var v=this._drawPanes[h-1];if(T(v)&&v.getId()===H.X_AXIS&&(v=this._drawPanes[h-2]),T(v)){var d=new Mr(this._chartContainer,a.getContainer(),this,"",v,a);this._separatorPanes.set(a,d)}}return a},i.prototype._measurePaneHeight=function(){var t=this,e,r=Math.floor(this._container.clientHeight),n=this._chartStore.getStyles().separator.size,a=this._xAxisPane.getAxisComponent().getAutoSize(),s=r-a-this._separatorPanes.size*n;s<0&&(s=0);var l=0;this._drawPanes.forEach(function(c){if(c.getId()!==H.CANDLE&&c.getId()!==H.X_AXIS){var h=c.getBounding().height,f=c.getOptions().minHeight;h<f&&(h=f),l+h>s?(l=s,h=Math.max(s-l,0)):l+=h,c.setBounding({height:h})}});var o=s-l;(e=this._candlePane)===null||e===void 0||e.setBounding({height:o}),this._xAxisPane.setBounding({height:a});var u=0;this._drawPanes.forEach(function(c){var h=t._separatorPanes.get(c);T(h)&&(h.setBounding({height:n,top:u}),u+=n),c.setBounding({top:u}),u+=c.getBounding().height})},i.prototype._measurePaneWidth=function(){var t=this,e=Math.floor(this._container.clientWidth),r=this._chartStore.getStyles(),n=r.yAxis,a=n.position===$t.Left,s=!n.inside,l=0,o=0,u=0,c=0;this._drawPanes.forEach(function(g){g.getId()!==H.X_AXIS&&(o=Math.max(o,g.getAxisComponent().getAutoSize()))}),o>e&&(o=e),s?(l=e-o,a?(u=0,c=o):(u=e-o,c=0)):(l=e,c=0,a?u=0:u=e-o),this._chartStore.getTimeScaleStore().setTotalBarSpace(l);var h={width:e},f={width:l,left:c},d={width:o,left:u},v=r.separator.fill,p;s&&!v?p=f:p=h,this._drawPanes.forEach(function(g){var m;(m=t._separatorPanes.get(g))===null||m===void 0||m.setBounding(p),g.setBounding(h,f,d)})},i.prototype._setPaneOptions=function(t,e){var r,n;if(O(t.id)){var a=this.getDrawPaneById(t.id),s=!1;if(a!==null){var l=e;if(t.id!==H.CANDLE&&R(t.height)&&t.height>0){var o=Math.max((r=t.minHeight)!==null&&r!==void 0?r:a.getOptions().minHeight,0),u=Math.max(o,t.height);a.setBounding({height:u}),l=!0,s=!0}(O((n=t.axisOptions)===null||n===void 0?void 0:n.name)||T(t.gap))&&(l=!0),a.setOptions(t),l&&this.adjustPaneViewport(s,!0,!0,!0,!0)}}},i.prototype.getDrawPaneById=function(t){if(t===H.CANDLE)return this._candlePane;if(t===H.X_AXIS)return this._xAxisPane;var e=this._drawPanes.find(function(r){return r.getId()===t});return e??null},i.prototype.getContainer=function(){return this._container},i.prototype.getChartStore=function(){return this._chartStore},i.prototype.getXAxisPane=function(){return this._xAxisPane},i.prototype.getAllDrawPanes=function(){return this._drawPanes},i.prototype.getAllSeparatorPanes=function(){return this._separatorPanes},i.prototype.adjustPaneViewport=function(t,e,r,n,a){t&&this._measurePaneHeight();var s=e,l=n??!1,o=a??!1;(l||o)&&this._drawPanes.forEach(function(u){var c=u.getAxisComponent().buildTicks(o);s||(s=c)}),s&&this._measurePaneWidth(),(r??!1)&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4))},i.prototype.updatePane=function(t,e){if(T(e)){var r=this.getDrawPaneById(e);r==null||r.update(t)}else this._separatorPanes.forEach(function(n){n.update(t)}),this._drawPanes.forEach(function(n){n.update(t)})},i.prototype.crosshairChange=function(t){var e=this,r=this._chartStore.getActionStore();if(r.has(yt.OnCrosshairChange)){var n={};this._drawPanes.forEach(function(a){var s=a.getId(),l={},o=e._chartStore.getIndicatorStore().getInstances(s);o.forEach(function(u){var c,h=u.result;l[u.name]=h[(c=t.dataIndex)!==null&&c!==void 0?c:h.length-1]}),n[s]=l}),O(t.paneId)&&r.execute(yt.OnCrosshairChange,B(B({},t),{indicatorData:n}))}},i.prototype.getDom=function(t,e){var r,n;if(O(t)){var a=this.getDrawPaneById(t);if(a!==null){var s=e??Pt.Root;switch(s){case Pt.Root:return a.getContainer();case Pt.Main:return a.getMainWidget().getContainer();case Pt.YAxis:return(n=(r=a.getYAxisWidget())===null||r===void 0?void 0:r.getContainer())!==null&&n!==void 0?n:null}}}else return this._chartContainer;return null},i.prototype.getSize=function(t,e){var r,n;if(T(t)){var a=this.getDrawPaneById(t);if(a!==null){var s=e??Pt.Root;switch(s){case Pt.Root:return a.getBounding();case Pt.Main:return a.getMainWidget().getBounding();case Pt.YAxis:return(n=(r=a.getYAxisWidget())===null||r===void 0?void 0:r.getBounding())!==null&&n!==void 0?n:null}}}else return{width:Math.floor(this._chartContainer.clientWidth),height:Math.floor(this._chartContainer.clientHeight),left:0,top:0,right:0,bottom:0};return null},i.prototype.setStyles=function(t){var e,r;this._chartStore.setOptions({styles:t});var n;O(t)?n=Kr(t):n=t,T((e=n==null?void 0:n.yAxis)===null||e===void 0?void 0:e.type)&&((r=this._candlePane)===null||r===void 0||r.getAxisComponent().setAutoCalcTickFlag(!0)),this.adjustPaneViewport(!0,!0,!0,!0,!0)},i.prototype.getStyles=function(){return this._chartStore.getStyles()},i.prototype.setLocale=function(t){this._chartStore.setOptions({locale:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},i.prototype.getLocale=function(){return this._chartStore.getLocale()},i.prototype.setCustomApi=function(t){this._chartStore.setOptions({customApi:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},i.prototype.setPriceVolumePrecision=function(t,e){this._chartStore.setPrecision({price:t,volume:e})},i.prototype.getPriceVolumePrecision=function(){return this._chartStore.getPrecision()},i.prototype.setTimezone=function(t){this._chartStore.setOptions({timezone:t}),this._xAxisPane.getAxisComponent().buildTicks(!0),this._xAxisPane.update(3)},i.prototype.getTimezone=function(){return this._chartStore.getTimeScaleStore().getTimezone()},i.prototype.setOffsetRightDistance=function(t){this._chartStore.getTimeScaleStore().setOffsetRightDistance(t,!0)},i.prototype.getOffsetRightDistance=function(){return this._chartStore.getTimeScaleStore().getOffsetRightDistance()},i.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetLeftDistance(t)},i.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetRightDistance(t)},i.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(t))},i.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(t))},i.prototype.setBarSpace=function(t){this._chartStore.getTimeScaleStore().setBarSpace(t)},i.prototype.getBarSpace=function(){return this._chartStore.getTimeScaleStore().getBarSpace().bar},i.prototype.getVisibleRange=function(){return this._chartStore.getTimeScaleStore().getVisibleRange()},i.prototype.clearData=function(){this._chartStore.clear()},i.prototype.getDataList=function(){return this._chartStore.getDataList()},i.prototype.applyNewData=function(t,e,r){this._chartStore.addData(t,_t.Init,e).then(function(){}).catch(function(){}).finally(function(){r==null||r()})},i.prototype.applyMoreData=function(t,e,r){this._chartStore.addData(t,_t.Forward,e??!0).then(function(){}).catch(function(){}).finally(function(){r==null||r()})},i.prototype.updateData=function(t,e){this._chartStore.addData(t).then(function(){}).catch(function(){}).finally(function(){e==null||e()})},i.prototype.loadMore=function(t){this._chartStore.setLoadMoreCallback(t)},i.prototype.setLoadDataCallback=function(t){this._chartStore.setLoadDataCallback(t)},i.prototype.createIndicator=function(t,e,r,n){var a=this,s,l=O(t)?{name:t}:t;if(Gr(l.name)===null)return null;var o=r==null?void 0:r.id,u=this.getDrawPaneById(o??"");if(u!==null)this._chartStore.getIndicatorStore().addInstance(l,o??"",e??!1).then(function(f){var d;a._setPaneOptions(r??{},(d=u.getAxisComponent().buildTicks(!0))!==null&&d!==void 0?d:!1)}).catch(function(f){});else{o??(o=Yr(H.INDICATOR));var c=this._createPane(fi,o,r??{}),h=(s=r==null?void 0:r.height)!==null&&s!==void 0?s:ua;c.setBounding({height:h}),this._chartStore.getIndicatorStore().addInstance(l,o,e??!1).finally(function(){a.adjustPaneViewport(!0,!0,!0,!0,!0),n==null||n()})}return o??null},i.prototype.overrideIndicator=function(t,e,r){var n=this;this._chartStore.getIndicatorStore().override(t,e??null).then(function(a){var s=ee(a,2),l=s[0],o=s[1];(l||o)&&(n.adjustPaneViewport(!1,o,!0,o),r==null||r())}).catch(function(){})},i.prototype.getIndicatorByPaneId=function(t,e){return this._chartStore.getIndicatorStore().getInstanceByPaneId(t,e)},i.prototype.removeIndicator=function(t,e){var r,n,a,s=this._chartStore.getIndicatorStore(),l=s.removeInstance(t,e);if(l){var o=!1;if(t!==H.CANDLE&&!s.hasInstances(t)){var u=this.getDrawPaneById(t),c=this._drawPanes.findIndex(function(m){return m.getId()===t});if(u!==null){o=!0;var h=this._separatorPanes.get(u);if(T(h)){var f=h==null?void 0:h.getTopPane();try{for(var d=Jt(this._separatorPanes),v=d.next();!v.done;v=d.next()){var p=v.value;if(p[1].getTopPane().getId()===u.getId()){p[1].setTopPane(f);break}}}catch(m){r={error:m}}finally{try{v&&!v.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}h.destroy(),this._separatorPanes.delete(u)}this._drawPanes.splice(c,1),u.destroy();var g=this._drawPanes[0];T(g)&&g.getId()===H.X_AXIS&&(g=this._drawPanes[1]),(a=this._separatorPanes.get(g))===null||a===void 0||a.destroy(),this._separatorPanes.delete(g)}}this.adjustPaneViewport(o,!0,!0,!0,!0)}},i.prototype.createOverlay=function(t,e){var r=[];if(O(t))r=[{name:t}];else if(Ct(t))r=t.map(function(l){return O(l)?{name:l}:l});else{var n=t;r=[n]}var a=!0;(!T(e)||this.getDrawPaneById(e)===null)&&(e=H.CANDLE,a=!1);var s=this._chartStore.getOverlayStore().addInstances(r,e,a);return Ct(t)?s:s[0]},i.prototype.getOverlayById=function(t){return this._chartStore.getOverlayStore().getInstanceById(t)},i.prototype.overrideOverlay=function(t){this._chartStore.getOverlayStore().override(t)},i.prototype.removeOverlay=function(t){var e;T(t)&&(O(t)?e={id:t}:e=t),this._chartStore.getOverlayStore().removeInstance(e)},i.prototype.setPaneOptions=function(t){this._setPaneOptions(t,!1)},i.prototype.setZoomEnabled=function(t){this._chartStore.getTimeScaleStore().setZoomEnabled(t)},i.prototype.isZoomEnabled=function(){return this._chartStore.getTimeScaleStore().getZoomEnabled()},i.prototype.setScrollEnabled=function(t){this._chartStore.getTimeScaleStore().setScrollEnabled(t)},i.prototype.isScrollEnabled=function(){return this._chartStore.getTimeScaleStore().getScrollEnabled()},i.prototype.scrollByDistance=function(t,e){var r=R(e)&&e>0?e:0,n=this._chartStore.getTimeScaleStore();if(n.startScroll(),r>0){var a=new $e({duration:r});a.doFrame(function(s){var l=t*(s/r);n.scroll(l)}),a.start()}else n.scroll(t)},i.prototype.scrollToRealTime=function(t){var e=this._chartStore.getTimeScaleStore(),r=e.getBarSpace().bar,n=e.getLastBarRightSideDiffBarCount()-e.getInitialOffsetRightDistance()/r,a=n*r;this.scrollByDistance(a,t)},i.prototype.scrollToDataIndex=function(t,e){var r=this._chartStore.getTimeScaleStore(),n=(r.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*r.getBarSpace().bar;this.scrollByDistance(n,e)},i.prototype.scrollToTimestamp=function(t,e){var r=Ge(this.getDataList(),"timestamp",t);this.scrollToDataIndex(r,e)},i.prototype.zoomAtCoordinate=function(t,e,r){var n=R(r)&&r>0?r:0,a=this._chartStore.getTimeScaleStore(),s=a.getBarSpace().bar,l=s*t,o=l-s;if(n>0){var u=0,c=new $e({duration:n});c.doFrame(function(h){var f=o*(h/n),d=(f-u)/a.getBarSpace().bar*Ue;a.zoom(d,e),u=f}),c.start()}else a.zoom(o/s*Ue,e)},i.prototype.zoomAtDataIndex=function(t,e,r){var n=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:n,y:0},r)},i.prototype.zoomAtTimestamp=function(t,e,r){var n=Ge(this.getDataList(),"timestamp",e);this.zoomAtDataIndex(t,n,r)},i.prototype.convertToPixel=function(t,e){var r,n=e.paneId,a=n===void 0?H.CANDLE:n,s=e.absolute,l=s===void 0?!1:s,o=[];if(a!==H.X_AXIS){var u=this.getDrawPaneById(a);if(u!==null){var c=this._chartStore.getTimeScaleStore(),h=u.getBounding(),f=new Array().concat(t),d=this._xAxisPane.getAxisComponent(),v=u.getAxisComponent();o=f.map(function(p){var g={},m=p.dataIndex;if(R(p.timestamp)&&(m=c.timestampToDataIndex(p.timestamp)),R(m)&&(g.x=d==null?void 0:d.convertToPixel(m)),R(p.value)){var _=v==null?void 0:v.convertToPixel(p.value);g.y=l?h.top+_:_}return g})}}return Ct(t)?o:(r=o[0])!==null&&r!==void 0?r:{}},i.prototype.convertFromPixel=function(t,e){var r,n=e.paneId,a=n===void 0?H.CANDLE:n,s=e.absolute,l=s===void 0?!1:s,o=[];if(a!==H.X_AXIS){var u=this.getDrawPaneById(a);if(u!==null){var c=this._chartStore.getTimeScaleStore(),h=u.getBounding(),f=new Array().concat(t),d=this._xAxisPane.getAxisComponent(),v=u.getAxisComponent();o=f.map(function(p){var g,m,_={};if(R(p.x)){var S=(g=d==null?void 0:d.convertFromPixel(p.x))!==null&&g!==void 0?g:-1;_.dataIndex=S,_.timestamp=(m=c.dataIndexToTimestamp(S))!==null&&m!==void 0?m:void 0}if(R(p.y)){var y=l?p.y-h.top:p.y;_.value=v.convertFromPixel(y)}return _})}}return Ct(t)?o:(r=o[0])!==null&&r!==void 0?r:{}},i.prototype.executeAction=function(t,e){var r;switch(t){case yt.OnCrosshairChange:{var n=B({},e);n.paneId=(r=n.paneId)!==null&&r!==void 0?r:H.CANDLE,this._chartStore.getTooltipStore().setCrosshair(n,{notExecuteAction:!0});break}}},i.prototype.subscribeAction=function(t,e){this._chartStore.getActionStore().subscribe(t,e)},i.prototype.unsubscribeAction=function(t,e){this._chartStore.getActionStore().unsubscribe(t,e)},i.prototype.getConvertPictureUrl=function(t,e,r){var n=this,a=this._chartContainer.clientWidth,s=this._chartContainer.clientHeight,l=Rt("canvas",{width:"".concat(a,"px"),height:"".concat(s,"px"),boxSizing:"border-box"}),o=l.getContext("2d"),u=Ht(l);l.width=a*u,l.height=s*u,o.scale(u,u),o.fillStyle=r??"#FFFFFF",o.fillRect(0,0,a,s);var c=t??!1;return this._drawPanes.forEach(function(h){var f=n._separatorPanes.get(h);if(T(f)){var d=f.getBounding();o.drawImage(f.getImage(c),d.left,d.top,d.width,d.height)}var v=h.getBounding();o.drawImage(h.getImage(c),0,v.top,a,v.height)}),l.toDataURL("image/".concat(e??"jpeg"))},i.prototype.resize=function(){this.adjustPaneViewport(!0,!0,!0,!0,!0)},i.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.forEach(function(t){t.destroy()}),this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},i}(),De=new Map,fo=1;function po(i,t){var e;if(O(i)?e=document.getElementById(i):e=i,e===null)return null;var r=De.get(e.id);if(T(r))return r;var n="k_line_chart_".concat(fo++);return r=new pi(e,t),r.id=n,e.setAttribute("k-line-chart-id",n),De.set(n,r),r}function go(i){var t,e,r;if(i instanceof pi)r=i.id;else{var n=void 0;O(i)?n=document.getElementById(i):n=i,r=(t=n==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&t!==void 0?t:null}r!==null&&((e=De.get(r))===null||e===void 0||e.destroy(),De.delete(r))}function mo(i){return ke({method:"POST",url:"/klineMarket",data:i})}function _o(i){return ke({method:"POST",url:"/lever/submit",data:i})}function yo(){return ke({method:"GET",url:"/seconds"})}function So(i){return ke({method:"POST",url:"/MicroOrder/submit",data:i})}const xo={class:"times my-2 flex space-between"},bo={key:0,class:"text-center"},wo={key:1,id:"klineChart",style:{height:"300px"}},Co={__name:"KlineChart",props:["symbol"],setup(i){const t=er(),e=i,r=ht([{text:"1M",value:"1min",time:1},{text:"5M",value:"5min",time:5},{text:"15M",value:"15min",time:15},{text:"30M",value:"30min",time:30},{text:"1H",value:"60min",time:60},{text:"1D",value:"1day",time:360},{text:"1W",value:"1week",time:1800},{text:"1 Month",value:"1mon",time:1800}]);let n=null;const a=ht({text:"1M",value:"1min",time:1}),s=ht("1M"),l=ht(["1M"]),o=ht(!1),u=ht(!1),c=({selectedValues:d,selectedOptions:v})=>{o.value=!1,a.value.value!==d[0]&&(a.value=r.value.find(p=>p.value===d[0]),l.value=d,s.value=v[0].text)};Dr(()=>{t.on("kline",d=>{const{symbol:v,period:p}=d;d.timestamp=d.time*1e3,v===e.symbol&&p===a.value.value&&n&&n.updateData(d)})}),je(()=>{t.off("kline")});function h(){const d=a.value,v={from:Date.parse(new Date)/1e3-d.time*24*60*60,to:Date.parse(new Date)/1e3,symbol:e.symbol,period:d.value};u.value=!0,mo(v).then(p=>{if((p==null?void 0:p.type)==="ok"){const g=p.data.map(m=>(m.timestamp=m.time,m))||[];setTimeout(()=>{f();const m=[...new Map(g.map(S=>[S.id,S])).values()],_=m[0];(_==null?void 0:_.open)<10?n.setPriceVolumePrecision(4,4):n.setPriceVolumePrecision(2,2),n.applyNewData(m)},300)}}).finally(()=>{u.value=!1})}Ee(()=>e.symbol,d=>{if(d&&n){if(s.value===r.value[0].text)return;a.value=r.value[0],s.value=r.value[0].text,l.value=[r.value[0].value]}}),Ii(()=>{h()});function f(){const d=document.getElementById("klineChart");n&&go(n),n=po(d,{styles:{grid:{show:!1},candle:{bar:{upColor:"#85bd00",downColor:"#f6543e"},tooltip:{custom:[{title:"high",value:"{high}"},{title:"open",value:"{open}"},{title:"low",value:"{low}"}],text:{size:11,marginTop:2,marginBottom:2}}},xAxis:{axisLine:{show:!1},tickText:{marginEnd:1,marginStart:1}},yAxis:{axisLine:{show:!1}}}}),n.setZoomEnabled(!0),n.setOffsetRightDistance(10)}return(d,v)=>{const p=kr,g=tr,m=Vr,_=Ae,S=qe;return U(),nt(Yt,null,[W("div",xo,[L(g,{onClick:v[0]||(v[0]=y=>o.value=!0),size:"medium",plain:"",type:"primary"},{default:q(()=>[Ze(dt(D(s))+" ",1),L(p,{name:"arrow-down"})]),_:1}),L(_,{show:D(o),"onUpdate:show":v[3]||(v[3]=y=>me(o)?o.value=y:null),position:"bottom",round:"","safe-area-inset-bottom":!0},{default:q(()=>[L(m,{columns:D(r),modelValue:D(l),"onUpdate:modelValue":v[1]||(v[1]=y=>me(l)?l.value=y:null),onConfirm:c,onCancel:v[2]||(v[2]=y=>o.value=!1)},null,8,["columns","modelValue"])]),_:1},8,["show"])]),D(u)?(U(),nt("div",bo,[L(S,{size:"24"})])):(U(),nt("div",wo))],64)}}},Eo=Se(Co,[["__scopeId","data-v-7a2ed1d0"]]),gi="/h5/assets/success-DDPA-ryG.png",Io={class:"flex my-1 mt-3"},Po={class:"type mr-1"},Mo={class:"multiple"},To={class:"flex my-1"},Do={class:"mr-1 setting"},ko={class:"mt-1"},Ao={class:"setting"},Fo={class:"mt-1"},Ro={class:"row mt-1"},Bo={class:"success"},Lo={class:"confirmed"},Vo={__name:"ContractTrade",props:["currency"],setup(i){var d,v;const t=Ar(),e=i;Object.keys(t.user).length||t.userInfo(),Object.keys(t.siteConfig).length||t.getConfig();const{t:r}=Ke(),n=Xt(()=>[{text:r("trade.trade"),value:1},{text:r("trade.pending_order"),value:0}]),a=ht(1),s=ht(n.value[0].text),l=Xt(()=>{var g;return((g=e.currency)==null?void 0:g.multiple).map(m=>(m.text=m.value,m))});let o=Fr({multiple:(d=l[0])==null?void 0:d.value,showMultiple:!1,pickerValue:[],isStopLoss:!1,isStopgap:!1,stop_loss_price:0,target_profit_price:0,number:0,each_piece:100,target_price:(v=e.currency)==null?void 0:v.now_price,upLoading:!1,downLoading:!1,show:!1,showType:!1,typePickerValue:[1]});console.log("currency",e.currency),console.log("state",o),Xt(()=>{var p;return e.currency?(((p=e.currency)==null?void 0:p.lever_trade_fee)*o.number).toFixed(5):0});const u=Xt(()=>{if(!e.currency)return 0;const{now_price:p,spread:g,lever_share_num:m,each_piece:_}=e.currency;return p*m*o.number,o.number*1e3});Ee(()=>e.currency,p=>{var g;if(p){const m=p==null?void 0:p.multiple;m.length&&(o.multiple=m[0].value),o.target_price=(g=e.currency)==null?void 0:g.now_price}}),Ee(()=>o.isStopgap,p=>{var g;p?o.target_profit_price=(g=e.currency)==null?void 0:g.now_price:o.target_profit_price=0}),Ee(()=>o.isStopLoss,p=>{var g;p?o.stop_loss_price=(g=e.currency)==null?void 0:g.now_price:o.stop_loss_price=0});const c=({selectedValues:p,selectedOptions:g})=>{var m;o.multiple=(m=g[0])==null?void 0:m.value,o.pickerValue=p,o.showMultiple=!1},h=({selectedValues:p,selectedOptions:g})=>{var m;a.value=(m=g[0])==null?void 0:m.value,s.value=g[0].text,o.typePickerValue=p,o.showType=!1};function f(p){var m,_;if(((m=t.user)==null?void 0:m.status)===1){zr({message:r("mine.frozen")}).then(()=>{var S;window.location.href=(S=t.siteConfig)==null?void 0:S.support_url});return}const g={share:o.number,multiple:o.multiple,legal_id:1,currency_id:(_=e.currency)==null?void 0:_.currency_id,type:p,status:a.value,target_profit_price:o.target_profit_price,stop_loss_price:o.stop_loss_price,target_price:o.target_price};a===1?o.upLoading=!0:o.downLoading=!0,_o(g).then(S=>{S.type==="ok"&&(t.userInfo(),o.show=!0)}).finally(()=>{o.upLoading=!1,o.downLoading=!1})}return(p,g)=>{var M;const m=Nr,_=Vr,S=Ae,y=Ri,x=Je,w=Fi,b=Qe("i18n-t"),E=Rr,C=rr,P=Or;return U(),nt(Yt,null,[W("div",Io,[W("div",Po,[L(m,{modelValue:D(s),"onUpdate:modelValue":g[0]||(g[0]=I=>me(s)?s.value=I:null),"is-link":"",readonly:"",name:"picker",placeholder:"",border:!1,onClick:g[1]||(g[1]=I=>D(o).showType=!0)},null,8,["modelValue"]),L(S,{show:D(o).showType,"onUpdate:show":g[3]||(g[3]=I=>D(o).showType=I),"destroy-on-close":"",position:"bottom","safe-area-inset-bottom":!0},{default:q(()=>[L(_,{columns:D(n),"model-value":D(o).typePickerValue,onConfirm:h,onCancel:g[2]||(g[2]=I=>D(o).showType=!1)},null,8,["columns","model-value"])]),_:1},8,["show"])]),W("div",Mo,[L(m,{modelValue:D(o).multiple,"onUpdate:modelValue":g[4]||(g[4]=I=>D(o).multiple=I),"is-link":"",readonly:"",name:"picker",label:p.$t("trade.multiplier"),placeholder:"",border:!1,onClick:g[5]||(g[5]=I=>D(o).showMultiple=!0)},null,8,["modelValue","label"]),L(S,{show:D(o).showMultiple,"onUpdate:show":g[7]||(g[7]=I=>D(o).showMultiple=I),"destroy-on-close":"",position:"bottom","safe-area-inset-bottom":!0},{default:q(()=>[L(_,{columns:D(l),"model-value":D(o).pickerValue,onConfirm:c,onCancel:g[6]||(g[6]=I=>D(o).showMultiple=!1)},null,8,["columns","model-value"])]),_:1},8,["show"])])]),W("div",null,[D(a)===0?(U(),Wt(x,{key:0,border:!1},{value:q(()=>[L(y,{min:0,modelValue:D(o).target_price,"onUpdate:modelValue":g[8]||(g[8]=I=>D(o).target_price=I)},null,8,["modelValue"])]),_:1})):(U(),Wt(x,{key:1,border:!1,title:p.$t("trade.market_value")},null,8,["title"])),W("div",To,[W("div",Do,[L(x,{center:"",title:p.$t("trade.stop_loss")},{"right-icon":q(()=>[L(w,{size:"20",modelValue:D(o).isStopLoss,"onUpdate:modelValue":g[9]||(g[9]=I=>D(o).isStopLoss=I)},null,8,["modelValue"])]),_:1},8,["title"]),W("div",ko,[L(y,{disabled:!D(o).isStopLoss,min:"0",modelValue:D(o).stop_loss_price,"onUpdate:modelValue":g[10]||(g[10]=I=>D(o).stop_loss_price=I)},null,8,["disabled","modelValue"])])]),W("div",Ao,[L(x,{center:"",title:p.$t("trade.stop_loss")},{"right-icon":q(()=>[L(w,{size:"20",modelValue:D(o).isStopgap,"onUpdate:modelValue":g[11]||(g[11]=I=>D(o).isStopgap=I)},null,8,["modelValue"])]),_:1},8,["title"]),W("div",Fo,[L(y,{disabled:!D(o).isStopgap,min:"0",modelValue:D(o).target_profit_price,"onUpdate:modelValue":g[12]||(g[12]=I=>D(o).target_profit_price=I)},null,8,["disabled","modelValue"])])])]),L(x,{center:"",title:p.$t("trade.buy_quantity"),border:!1},{"right-icon":q(()=>{var I,k;return[L(y,{step:"1",integer:"",min:(I=e.currency)==null?void 0:I.lever_min_share,max:(k=e.currency)==null?void 0:k.lever_max_share,modelValue:D(o).number,"onUpdate:modelValue":g[13]||(g[13]=A=>D(o).number=A)},null,8,["min","max","modelValue"])]}),_:1},8,["title"]),W("div",Ro,[L(x,{border:!1,title:p.$t("trade.estimated_margin"),value:D(u)},null,8,["title","value"]),L(x,{border:!1,title:p.$t("trade.balance"),value:(M=D(t).user)==null?void 0:M.usdt},null,8,["title","value"])]),L(C,null,{default:q(()=>{var I,k;return[L(E,{class:"btn",type:"primary",block:"",size:"small",disabled:!((I=e.currency)!=null&&I.opening),loading:D(o).upLoading,onClick:g[14]||(g[14]=A=>f(1))},{default:q(()=>[L(b,{keypath:"trade.buy_up"})]),_:1},8,["disabled","loading"]),L(E,{class:"btn",type:"danger",block:"",size:"small",disabled:!((k=e.currency)!=null&&k.opening),loading:D(o).downLoading,onClick:g[15]||(g[15]=A=>f(2))},{default:q(()=>[L(b,{keypath:"trade.buy_down"})]),_:1},8,["disabled","loading"])]}),_:1}),L(S,{show:D(o).show,"onUpdate:show":g[16]||(g[16]=I=>D(o).show=I),position:"bottom",round:"",closeable:"","safe-area-inset-bottom":!0},{default:q(()=>[W("div",Bo,[L(P,{src:D(gi),width:"80",height:"80"},null,8,["src"])]),W("p",Lo,[L(b,{keypath:"trade.order_confirmed"})])]),_:1},8,["show"])])],64)}}},Oo=Se(Vo,[["__scopeId","data-v-7ddc18b6"]]),No={class:"ma-3"},zo={class:"font-md my-2"},Wo={class:"second"},Xo={class:"font-md my-2"},Yo={class:"row info"},Ho={class:"success"},$o={class:"confirmed"},Go={__name:"SecondsTrade",props:["currency"],setup(i){const t=Ar(),e=i,{t:r}=Ke(),n=Fr({secondList:[],seconds:null,number:null,fee:0,show:!1,upLoading:!1,downLoading:!1});Br(()=>{Object.keys(t.user).length||t.userInfo(),Object.keys(t.siteConfig).length||t.getConfig(),yo().then(o=>{var u,c;if(o.type==="ok"){const h=((u=o.data)==null?void 0:u.data)||[];n.secondList=h,n.fee=((c=o.data)==null?void 0:c.fee)||0,h.length&&(n.seconds=h[0])}})});function a(o){n.seconds=o}const s=Xt(()=>(n.fee/100).toFixed(2));function l(o){var c,h,f,d;if(((c=t.user)==null?void 0:c.status)===1){zr({message:r("mine.frozen")}).then(()=>{var v;window.location.href=(v=t.siteConfig)==null?void 0:v.support_url});return}const u={number:n.number,currency_id:(h=e.currency)==null?void 0:h.currency_id,type:o,seconds:(f=n.seconds)==null?void 0:f.seconds,match_id:(d=e.currency)==null?void 0:d.match_id};o===1?n.upLoading=!0:n.downLoading=!0,So(u).then(v=>{v.type==="ok"&&(t.userInfo(),n.show=!0)}).finally(()=>{n.upLoading=!1,n.downLoading=!1})}return(o,u)=>{var _,S;const c=Qe("i18n-t"),h=tr,f=Nr,d=Je,v=Rr,p=rr,g=Or,m=Ae;return U(),nt("div",No,[W("div",zo,[L(c,{keypath:"trade.opening_time"})]),W("div",Wo,[(U(!0),nt(Yt,null,_e(D(n).secondList,y=>{var x;return U(),Wt(h,{key:y.id,size:"large",type:"primary",plain:y.seconds!==((x=D(n).seconds)==null?void 0:x.seconds),onClick:w=>a(y)},{default:q(()=>[Ze(dt(y.seconds)+"S",1)]),_:2},1032,["plain","onClick"])}),128))]),W("div",Xo,[L(c,{keypath:"trade.open_number"}),W("span",null,"( >= "+dt((_=D(n).seconds)==null?void 0:_.min_amount)+")",1)]),L(f,{modelValue:D(n).number,"onUpdate:modelValue":u[0]||(u[0]=y=>D(n).number=y),class:"row"},null,8,["modelValue"]),W("div",Yo,[L(d,{border:!1,title:o.$t("trade.estimated_commission"),value:D(s)},null,8,["title","value"]),L(d,{border:!1,title:o.$t("trade.balance"),value:(S=D(t).user)==null?void 0:S.usdt},null,8,["title","value"])]),L(p,null,{default:q(()=>{var y,x;return[L(v,{class:"btn",type:"primary",block:"",size:"small",disabled:!((y=e.currency)!=null&&y.opening),loading:D(n).upLoading,onClick:u[1]||(u[1]=w=>l(1))},{default:q(()=>[L(c,{keypath:"trade.buy_up"})]),_:1},8,["disabled","loading"]),L(v,{class:"btn",type:"danger",block:"",size:"small",disabled:!((x=e.currency)!=null&&x.opening),loading:D(n).downLoading,onClick:u[2]||(u[2]=w=>l(2))},{default:q(()=>[L(c,{keypath:"trade.buy_down"})]),_:1},8,["disabled","loading"])]}),_:1}),L(m,{show:D(n).show,"onUpdate:show":u[3]||(u[3]=y=>D(n).show=y),position:"bottom",round:"",closeable:"","safe-area-inset-bottom":!0},{default:q(()=>[W("div",Ho,[L(g,{src:D(gi),width:"80",height:"80"},null,8,["src"])]),W("p",$o,[L(c,{keypath:"trade.order_confirmed"})])]),_:1},8,["show"])])}}},Uo=Se(Go,[["__scopeId","data-v-da55a9a0"]]),jo={class:"volume font-sm"},Zo={class:"flex space-around title"},qo={key:0,class:"text-center"},Ko={class:"up"},Qo={class:"down"},Jo={__name:"Volume",props:["symbol"],setup(i){const t=er(),e=i,r=ht([]),n=ht([]);return t.on("market_depth",a=>{const{symbol:s,asks:l,bids:o}=a;if(e!=null&&e.symbol&&s===(e==null?void 0:e.symbol)){const u=o.splice(0,5),c=l.splice(0,5),h=Math.max(...u.map(d=>d[1])),f=Math.max(...c.map(d=>d[1]));u.forEach(d=>{d[2]=(1-[d[1]]/h)*100}),c.forEach(d=>{d[2]=(1-[d[1]]/f)*100}),r.value=u,n.value=c}}),je(()=>{t.off("market_depth")}),(a,s)=>{const l=qe,o=rr;return U(),nt("div",jo,[W("div",Zo,[W("span",null,dt(a.$t("trade.price")),1),W("span",null,dt(a.$t("order.quantity")),1)]),D(r).length?Lr("",!0):(U(),nt("div",qo,[L(l,{size:"24"})])),(U(!0),nt(Yt,null,_e(D(r),u=>(U(),nt("div",{class:"flex space-between buy",key:u.id},[W("span",Ko,dt(u[0]),1),W("span",null,dt(u[1]),1),W("div",{class:"bg-bar",style:mr({transform:`translateX(${u[2]}%)`})},null,4)]))),128)),L(o),(U(!0),nt(Yt,null,_e(D(n),u=>(U(),nt("div",{class:"flex space-between sell",key:u.id},[W("span",Qo,dt(u[0]),1),W("span",null,dt(u[1]),1),W("div",{class:"bg-bar",style:mr({transform:`translateX(${u[2]}%)`})},null,4)]))),128))])}}},ts=Se(Jo,[["__scopeId","data-v-912426cd"]]),es={class:"main van-hairline--top"},rs={key:0,class:"text-center"},is={key:1,class:"flex space-between mb-1"},ns={class:"price mr-2 bold"},as={key:1,class:"percentage mr-2 font-sm"},os={class:"chart van-hairline--top pt-1"},ss={class:"flex van-hairline--top"},ls={class:"buy-form mr-1"},us={__name:"Index",setup(i){const{t}=Ke(),e=Pi(),r=er(),n=Xt(()=>[{label:t("order.contract"),comp:Oo,id:"Contract"},{label:t("order.second_contract"),comp:Uo,id:"Seconds"}]),a=ht(null),s=ht([]),l=ht(!1),o=ht(!1),u=Xt(()=>a.value?`${a.value.currency_name}/${a.value.legal_name}`:"");Br(async()=>{await c();const v=e.query.id;if(v){const p=s.value.find(g=>g.currency_id===+v);console.log("defaultCurrency",p),a.value=p}a.value||(a.value=s.value[0])}),Dr(()=>{r.on("daymarket",v=>{var m;const{currency_name:p}=v,g=s.value.findIndex(_=>_.currency_name===p);if(p===((m=a.value)==null?void 0:m.currency_name)&&(a.value={...a.value,...v}),g>=0){const _=s.value[g];s.value[g]={..._,...v}}})}),je(()=>{r.off("daymarket")});function c(){return o.value=!0,Di().then(v=>{(v==null?void 0:v.type)==="ok"&&v.data.forEach(g=>{g.quotation.forEach(_=>{const S={..._,id:_.currency_id,name:_.show_name,opening:_.currency.opening,precision_length:ki(_.now_price)};s.value.push(S)})})}).finally(()=>{o.value=!1})}function h(v){a.value=v,l.value=!1}const f=ht(""),d=Xt(()=>{const v=n.value.find(p=>p.id===f.value);return v==null?void 0:v.comp});return(v,p)=>{var C,P,M,I,k,A,V;const g=Li,m=Bi,_=qe,S=kr,y=Qe("i18n-t"),x=tr,w=Je,b=Ti,E=Ae;return U(),nt(Yt,null,[L(m,{active:D(f),"onUpdate:active":p[0]||(p[0]=F=>me(f)?f.value=F:null),shrink:""},{default:q(()=>[(U(!0),nt(Yt,null,_e(D(n),F=>(U(),Wt(g,{key:F.label,title:F.label,name:F.id},null,8,["title","name"]))),128))]),_:1},8,["active"]),W("div",es,[D(o)?(U(),nt("div",rs,[L(_,{size:"20"})])):(U(),nt("div",is,[W("div",{class:"show-name bold",onClick:p[1]||(p[1]=F=>l.value=!0)},[Ze(dt((C=D(a))==null?void 0:C.show_name)+" ",1),L(S,{name:"arrow-down"})]),W("div",{class:Ve(["trend",{up:D(be)((P=D(a))==null?void 0:P.change),down:!D(be)((M=D(a))==null?void 0:M.change)}])},[W("span",ns,dt(D(Ai)((I=D(a))==null?void 0:I.now_price,(k=D(a))==null?void 0:k.precision_length)),1),(A=D(a))!=null&&A.opening?(U(),nt("span",as,dt((V=D(a))==null?void 0:V.change)+"%",1)):(U(),Wt(x,{key:0},{default:q(()=>[L(y,{keypath:"market.closed"})]),_:1}))],2)])),W("div",os,[D(a)?(U(),Wt(Eo,{key:0,symbol:D(u)},null,8,["symbol"])):Lr("",!0)]),W("div",ss,[W("div",ls,[(U(),Wt(Mi(D(d)),{currency:D(a)},null,8,["currency"]))]),L(ts,{symbol:D(u)},null,8,["symbol"])]),L(E,{show:D(l),"onUpdate:show":p[2]||(p[2]=F=>me(l)?l.value=F:null),position:"left",style:{width:"60%",height:"100%"},"safe-area-inset-bottom":!0,"safe-area-inset-top":!0},{default:q(()=>[L(b,null,{default:q(()=>[(U(!0),nt(Yt,null,_e(D(s),F=>(U(),Wt(w,{title:F.show_name,class:Ve({active:F.show_name===D(a).show_name}),onClick:$=>h(F)},{icon:q(()=>[L(S,{name:F.logo_url,size:"24"},null,8,["name"])]),value:q(()=>[W("span",{class:Ve([{up:D(be)(F==null?void 0:F.change),down:!D(be)(F==null?void 0:F.change)}])},dt(F.now_price),3)]),_:2},1032,["title","class","onClick"]))),256))]),_:1})]),_:1},8,["show"])])],64)}}},ks=Se(us,[["__scopeId","data-v-92927453"]]);export{ks as default};
