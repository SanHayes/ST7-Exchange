import{p as z,r,i as H,o as A,s as f,a as e,x as u,z as t,L as o,I as M,H as g,v as P,y as $,_ as R,F as T,C as y,Z as h}from"./index-CkjxWUjw.js";import{C as U}from"./index-FdoGp2w0.js";import{C as D}from"./index-DarQb0Su.js";import{F as E}from"./index-DT7XygQi.js";import{N as G}from"./index-DiHOUP3p.js";import{g as S,b as Z}from"./news-DSLXvoUC.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as J}from"./index-CF2dZ9Ol.js";import{B as K}from"./index-CznDx_8Y.js";import"./use-route-DfqZuX4K.js";import"./use-id-DABR4HDJ.js";import"./use-placeholder-B0IckSgk.js";const O={key:0,class:"text-center ma-6"},Q={key:1,class:"main ma-5"},W={class:"row my-3 pa-5"},X={class:"flex space-between align-center"},Y={class:"p-name bold flex align-center"},ee={class:"flex space-between ma-3"},ne={class:"text-center"},te={class:"value"},ie={class:"font-sm"},oe={class:"text-center"},le={class:"value"},ae={class:"font-sm"},se={class:"my-3"},ue=["innerHTML"],me={__name:"Apply",setup(ce){const b=A(),{t:p}=z(),d=r(!1),i=r(null),l=r(null),k=H(()=>{var n;return l.value&&(((n=i.value)==null?void 0:n.project_lixi)*l.value/100).toFixed(2)||0}),m=r(!1);C();function C(){d.value=!0,S(b.params.id).then(n=>{n.type==="ok"&&(console.log(n),i.value=n.data||{})}).finally(()=>{d.value=!1})}function B(){if(!l.value){h({type:"warning",message:p("mining.max_number")});return}if(l.value<Number(i.value.project_amount_min)){h({type:"warning",message:p("mining.lazy_weight")});return}m.value=!0}const v=r(!1);function F(){v.value=!0;const n={id:b.params.id,amount:l.value};Z(n).then(s=>{s.type==="ok"&&h({type:"success",message:p("mining.succeed")})}).finally(()=>{v.value=!1,m.value=!1})}return(n,s)=>{const j=M,L=G,N=J,c=P("i18n-t"),a=D,I=E,w=U,x=K,V=R;return y(),f(T,null,[e(L,{title:n.$t("mining.subscription"),fixed:"",placeholder:""},{left:u(()=>[e(j,{"class-prefix":"iconfont",name:"back",onClick:s[0]||(s[0]=_=>n.$router.back())})]),_:1},8,["title"]),t(d)?(y(),f("div",O,[e(N,{size:"24"})])):(y(),f("div",Q,[o("div",W,[o("div",X,[o("div",Y,[e(j,{name:t(i).project_img,size:"30"},null,8,["name"]),o("span",null,g(t(i).project_name),1)])]),o("div",ee,[o("div",ne,[o("div",te,g(t(i).project_lixi)+"%",1),o("div",ie,[e(c,{keypath:"mining.expected_nissan"})])]),o("div",oe,[o("div",le,g(t(i).project_amount),1),o("div",ae,[e(c,{keypath:"mining.mining_machine_rental"})])])])]),e(w,null,{default:u(()=>[e(a,{title:n.$t("mining.mining_life"),value:t(i).lock_dividend_days},null,8,["title","value"]),e(a,{title:n.$t("mining.maximum_subscription"),value:t(i).project_amount_max},null,8,["title","value"]),e(a,{title:n.$t("mining.minimum_subscription"),value:t(i).project_amount_min},null,8,["title","value"]),e(I,{modelValue:t(l),"onUpdate:modelValue":s[1]||(s[1]=_=>$(l)?l.value=_:null),placeholder:n.$t("mining.max_number")},null,8,["modelValue","placeholder"])]),_:1}),e(x,{block:"",type:"primary",class:"mt-3",onClick:B},{default:u(()=>[e(c,{keypath:"mining.subscribe"})]),_:1}),o("div",se,[e(c,{keypath:"mining.product_presentation"})]),o("div",{innerHTML:t(i).project_desc,class:"font-md"},null,8,ue),e(V,{show:t(m),"onUpdate:show":s[2]||(s[2]=_=>$(m)?m.value=_:null),position:"bottom"},{default:u(()=>[e(w,{title:t(i).project_name},{default:u(()=>[e(a,{title:n.$t("mining.mining_machine_rental"),value:t(i).project_amount},null,8,["title","value"]),e(a,{title:n.$t("mining.mining_life"),value:t(i).lock_dividend_days},null,8,["title","value"]),e(a,{title:n.$t("mining.expected_nissan"),value:t(k)},null,8,["title","value"]),e(a,{title:n.$t("mining.projected_total_revenue"),value:(t(k)*t(i).lock_dividend_days).toFixed(2)},null,8,["title","value"]),e(a,{title:n.$t("mining.number_application"),value:t(l)},null,8,["title","value"]),e(a,null,{default:u(()=>[e(x,{block:"",type:"primary",class:"mt-3",loading:t(v),onClick:F},{default:u(()=>[e(c,{keypath:"mining.subscribe"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},we=q(me,[["__scopeId","data-v-059fe817"]]);export{we as default};
