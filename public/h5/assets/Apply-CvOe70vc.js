import{_ as z,v as A,r as _,k as R,s as D,y as f,b as e,A as u,D as t,R as G,O as l,I as H,L as g,z as M,Q as P,C as x,a4 as T,F as U,G as y,a3 as h}from"./index-Bls5mtmE.js";import{C as E}from"./index-BBW8XlNN.js";import{C as O}from"./index-Hmp-CFtI.js";import{F as Q}from"./index-C9Lc3JeH.js";import{N as S}from"./index-DvLt6MaC.js";import{g as q,b as J}from"./news-CaS-QWMN.js";import"./use-id-BTy8-xBR.js";const K={key:0,class:"text-center ma-6"},W={key:1,class:"main ma-5"},X={class:"row my-3 pa-5"},Y={class:"flex space-between align-center"},Z={class:"p-name bold flex align-center"},ee={class:"flex space-between ma-3"},ne={class:"text-center"},te={class:"value"},ie={class:"font-sm"},le={class:"text-center"},ae={class:"value"},oe={class:"font-sm"},se={class:"my-3"},ue=["innerHTML"],ce={__name:"Apply",setup(me){const b=D(),{t:p}=A(),d=_(!1),i=_(null),a=_(null),k=R(()=>{var n;return a.value&&(((n=i.value)==null?void 0:n.project_lixi)*a.value/100).toFixed(2)||0}),c=_(!1);C();function C(){d.value=!0,q(b.params.id).then(n=>{n.type==="ok"&&(console.log(n),i.value=n.data||{})}).finally(()=>{d.value=!1})}function F(){if(!a.value){h({type:"warning",message:p("mining.max_number")});return}if(a.value<Number(i.value.project_amount_min)){h({type:"warning",message:p("mining.lazy_weight")});return}c.value=!0}const v=_(!1);function N(){v.value=!0;const n={id:b.params.id,amount:a.value};J(n).then(s=>{s.type==="ok"&&h({type:"success",message:p("mining.succeed")})}).finally(()=>{v.value=!1,c.value=!1})}return(n,s)=>{const j=H,B=S,I=G,m=M("i18n-t"),o=O,L=Q,w=E,$=P,V=T;return y(),f(U,null,[e(B,{title:n.$t("mining.subscription"),fixed:"",placeholder:""},{left:u(()=>[e(j,{"class-prefix":"iconfont",name:"back",onClick:s[0]||(s[0]=r=>n.$router.back())})]),_:1},8,["title"]),t(d)?(y(),f("div",K,[e(I,{size:"24"})])):(y(),f("div",W,[l("div",X,[l("div",Y,[l("div",Z,[e(j,{name:t(i).project_img,size:"30"},null,8,["name"]),l("span",null,g(t(i).project_name),1)])]),l("div",ee,[l("div",ne,[l("div",te,g(t(i).project_lixi)+"%",1),l("div",ie,[e(m,{keypath:"mining.expected_nissan"})])]),l("div",le,[l("div",ae,g(t(i).project_amount),1),l("div",oe,[e(m,{keypath:"mining.mining_machine_rental"})])])])]),e(w,null,{default:u(()=>[e(o,{title:n.$t("mining.mining_life"),value:t(i).lock_dividend_days},null,8,["title","value"]),e(o,{title:n.$t("mining.maximum_subscription"),value:t(i).project_amount_max},null,8,["title","value"]),e(o,{title:n.$t("mining.minimum_subscription"),value:t(i).project_amount_min},null,8,["title","value"]),e(L,{modelValue:t(a),"onUpdate:modelValue":s[1]||(s[1]=r=>x(a)?a.value=r:null),placeholder:n.$t("mining.max_number")},null,8,["modelValue","placeholder"])]),_:1}),e($,{block:"",type:"primary",class:"mt-3",onClick:F},{default:u(()=>[e(m,{keypath:"mining.subscribe"})]),_:1}),l("div",se,[e(m,{keypath:"mining.product_presentation"})]),l("div",{innerHTML:t(i).project_desc,class:"font-md"},null,8,ue),e(V,{show:t(c),"onUpdate:show":s[2]||(s[2]=r=>x(c)?c.value=r:null),position:"bottom"},{default:u(()=>[e(w,{title:t(i).project_name},{default:u(()=>[e(o,{title:n.$t("mining.mining_machine_rental"),value:t(i).project_amount},null,8,["title","value"]),e(o,{title:n.$t("mining.mining_life"),value:t(i).lock_dividend_days},null,8,["title","value"]),e(o,{title:n.$t("mining.expected_nissan"),value:t(k)},null,8,["title","value"]),e(o,{title:n.$t("mining.projected_total_revenue"),value:(t(k)*t(i).lock_dividend_days).toFixed(2)},null,8,["title","value"]),e(o,{title:n.$t("mining.number_application"),value:t(a)},null,8,["title","value"]),e(o,null,{default:u(()=>[e($,{block:"",type:"primary",class:"mt-3",loading:t(v),onClick:N},{default:u(()=>[e(m,{keypath:"mining.subscribe"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},ye=z(ce,[["__scopeId","data-v-059fe817"]]);export{ye as default};
