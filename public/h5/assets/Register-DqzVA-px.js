import{J as P,p as A,r as l,U as H,K as J,o as K,s as F,a as e,x as r,z as s,F as M,A as T,v as Z,C as V,I as j,L as _,y as f,E as O,H as Q,aF as W,Z as $,aG as X}from"./index-DotFs6hQ.js";import{C as Y}from"./index-CdgWwUic.js";import"./index-BGvW-Xgq.js";import{F as ee}from"./index-CPIY3Ody.js";import{N as oe}from"./index-n0gQ9ulz.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as se}from"./index-CBouzOJA.js";import{B as ae}from"./index-DFHfScTq.js";import"./use-route-_DyoSwqD.js";import"./use-id-DPiuflnV.js";import"./use-placeholder-fxdmpSj4.js";import"./index-CR8qj5FJ.js";const le={class:"label highlight-txt mb-2 mt-4"},re={class:"label highlight-txt mt-6 mb-2"},ne={class:"label highlight-txt mt-6 mb-2"},ie={class:"label highlight-txt mt-6 mb-2"},ue={class:"label highlight-txt mt-6 mb-2"},de={key:1},pe={__name:"Register",setup(me){const q=P();A();const C=T(),R=K(),i=l("password");function U(){i.value==="password"?i.value="text":i.value="password"}const u=l("password");function z(){u.value==="password"?u.value="text":u.value="password"}const d=l(""),p=l(""),g=l(""),v=l(""),m=l(""),b=l(!1),h=l(!1),x=H({time:60*1e3,onFinish:()=>{h.value=!1}});function N(){b.value=!0,W({user_string:d.value}).then(o=>{console.log(o),$({type:"primary",message:o.message}),o.type==="ok"&&(h.value=!0,x.start())}).finally(()=>{b.value=!1})}const S=o=>o===p.value,w=l(!1);function I(o){w.value=!0,X({user_string:d.value,password:p.value,re_password:g.value,code:v.value,type:"email",extension_code:m.value}).then(t=>{console.log(t),t.type==="ok"&&($({type:"primary",message:t.message}),setTimeout(()=>{C.push("/login")},500))}).finally(()=>{w.value=!1})}function D(){C.go(-1)}return J(()=>{const o=R.query;o&&(m.value=o.inviteCode)}),(o,t)=>{var B;const y=j,k=ae,G=oe,n=Z("i18n-t"),c=ee,E=Y,L=se;return V(),F(M,null,[e(G,{title:(B=s(q).siteConfig)==null?void 0:B.site_name},{left:r(()=>[e(y,{"class-prefix":"iconfont",name:"back",onClick:D})]),right:r(()=>[e(k,{size:"small",onClick:t[0]||(t[0]=a=>o.$router.push("/lang"))},{default:r(()=>[e(y,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e(L,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:I},{default:r(()=>[e(E,{border:!1},{default:r(()=>[_("div",le,[e(n,{keypath:"register.enter_email"})]),e(c,{modelValue:s(d),"onUpdate:modelValue":t[1]||(t[1]=a=>f(d)?d.value=a:null),placeholder:o.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),_("div",re,[e(n,{keypath:"register.pwd"})]),e(c,{modelValue:s(p),"onUpdate:modelValue":t[2]||(t[2]=a=>f(p)?p.value=a:null),type:s(i),placeholder:o.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(y,{name:s(i)==="password"?"closed-eye":"eye",size:"20",onClick:U},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),_("div",ne,[e(n,{keypath:"register.enter_password_again"})]),e(c,{modelValue:s(g),"onUpdate:modelValue":t[3]||(t[3]=a=>f(g)?g.value=a:null),type:s(u),placeholder:o.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:S}]},{button:r(()=>[e(y,{name:s(u)==="password"?"closed-eye":"eye",size:"20",onClick:z},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),_("div",ie,[e(n,{keypath:"invite.invitation_code"})]),e(c,{modelValue:s(m),"onUpdate:modelValue":t[4]||(t[4]=a=>f(m)?m.value=a:null),placeholder:o.$t("register.enter_invite_code"),border:!1},null,8,["modelValue","placeholder"]),_("div",ue,[e(n,{keypath:"register.enter_vercode"})]),e(c,{class:"mb-6",modelValue:s(v),"onUpdate:modelValue":t[5]||(t[5]=a=>f(v)?v.value=a:null),placeholder:o.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(k,{size:"mini",type:"primary",loading:s(b),disabled:s(h),onClick:N},{default:r(()=>[s(h)?(V(),F("span",de,Q(s(x).current.value.seconds)+" S",1)):(V(),O(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(k,{block:"",type:"primary","native-type":"submit",loading:s(w)},{default:r(()=>[e(n,{keypath:"register.register"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},xe=te(pe,[["__scopeId","data-v-278c2bc4"]]);export{xe as default};
