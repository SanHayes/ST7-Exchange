import{X as p,s as c,a as s,x as f,z as o,F as d,C as g,I as u,bz as _}from"./index-CkjxWUjw.js";import{L as h}from"./index-Cck9V26t.js";import{N as v}from"./index-DiHOUP3p.js";import"./use-tab-status-QtF-xexY.js";import"./index-CF2dZ9Ol.js";import"./use-placeholder-B0IckSgk.js";const C={__name:"Notice",setup(k){const n=p({page:0,list:[],loading:!1,finished:!1,error:!1,limit:10});function l(){n.page+=1;const e={page:n.page,limit:n.limit};_(e).then(t=>{if((t==null?void 0:t.type)==="ok"){const{data:a=[],last_page:i}=t.data;console.log("notice",t),n.list.push(...a),i===n.page&&(n.finished=!0)}}).catch(t=>{n.error=!0}).finally(()=>{n.loading=!1})}return(e,t)=>{const a=u,i=v,m=h;return g(),c(d,null,[s(i,{title:e.$t("mine.announcement"),fixed:"",placeholder:""},{left:f(()=>[s(a,{"class-prefix":"iconfont",name:"back",onClick:t[0]||(t[0]=r=>e.$router.back())})]),_:1},8,["title"]),s(m,{class:"",loading:o(n).loading,"onUpdate:loading":t[1]||(t[1]=r=>o(n).loading=r),finished:o(n).finished,error:o(n).error,"finished-text":e.$t("mining.no_more"),onLoad:l},null,8,["loading","finished","error","finished-text"])],64)}}};export{C as default};
