import{_ as N,r as h,k as V,N as b,y as l,b as a,P as o,A as g,C as B,D as d,z as S,R as z,S as D,F as k,H as F,G as n,I,L as f,J as y,ad as R}from"./index-DV1i6KxT.js";import{T as E}from"./index-BNdN2Ths.js";import"./index-CAaOaEfp.js";import"./index-CcbNvfut.js";import{S as T}from"./index-CxTNx0a1.js";import{N as U}from"./index-vA-mF5-l.js";import{q as j}from"./index-g-Al9WmY.js";import{i as w}from"./utils-C1q9xzsp.js";import"./use-id-CF8d1TUL.js";const A={class:"main mt-3"},G={class:"px-3"},H={class:"label font-md my-2"},J={class:"list"},M={key:0,class:"text-center"},P=["onClick"],W={class:"icon"},q={class:"name font-md"},K={key:0,class:"price text-right"},O={class:"now font-md"},Q={key:1,class:"price text-right"},X={class:"trend text-right"},Y={__name:"Search",setup(Z){const _=h(!1),p=h([]),i=h(""),x=V(()=>{if(!i.value)return p.value;const t=i.value.toLowerCase();return p.value.filter(s=>s.currency_name.toLowerCase().includes(t))});b(()=>{C()});function C(){return _.value=!0,j().then(t=>{if(t.type==="ok"){const s=t.data||[],r=[];s.map(u=>{const m=u.quotation.map(c=>(c.now_price=c.now_price-(c.floating||0),c))||[];r.push(...m)}),p.value=r}}).finally(()=>{_.value=!1})}return(t,s)=>{const r=I,u=U,m=T,c=S("i18n-t"),$=D,L=E;return n(),l(k,null,[a(u,{title:t.$t("search.search"),fixed:"",placeholder:""},{left:g(()=>[a(r,{"class-prefix":"iconfont",name:"back",onClick:s[0]||(s[0]=e=>t.$router.back())})]),_:1},8,["title"]),o("div",A,[a(m,{placeholder:t.$t("search.enter_product_code"),modelValue:d(i),"onUpdate:modelValue":s[1]||(s[1]=e=>B(i)?i.value=e:null),shape:"round"},null,8,["placeholder","modelValue"]),o("div",G,[o("div",H,[a(c,{keypath:"search.search_result"})]),o("div",J,[d(_)?(n(),l("div",M,[a($,{size:"24"})])):z("",!0),(n(!0),l(k,null,F(d(x),e=>{var v;return n(),l("div",{class:"list-item",key:e.id,onClick:ee=>t.$router.push("/trade?id="+e.currency_id)},[o("div",W,[a(r,{name:e.logo_url,size:"36"},null,8,["name"])]),o("div",q,f(e.show_name),1),(v=e.currency)!=null&&v.opening?(n(),l("div",K,[o("div",O,f(e.now_price),1)])):(n(),l("div",Q,[a(L,null,{default:g(()=>[a(c,{keypath:"market.closed"})]),_:1})])),o("div",{class:"chart",ref_for:!0,ref:"chartRefs"},[o("div",X,[e.change.startsWith("+")?(n(),y(r,{key:0,"class-prefix":"iconfont",name:"rise",color:"#85bd00"})):(n(),y(r,{key:1,"class-prefix":"iconfont",name:"xiajiang",color:"#EF263D"})),o("span",{class:R(["percentage font-md ml-2",{up:d(w)(e.change)},{down:!d(w)(e.change)}])},f(e.change)+"%",3)])],512)],8,P)}),128))])])])],64)}}},de=N(Y,[["__scopeId","data-v-df32d24c"]]);export{de as default};
