import{_ as L,M as P,v as A,r as l,Z as J,N as O,s as Q,y as F,b as e,A as r,D as s,F as T,E as Z,z as j,G as V,Q as H,I as K,O as _,C as g,J as W,L as X,aM as Y,a3 as N,aN as ee}from"./index-Bls5mtmE.js";import{C as te}from"./index-BBW8XlNN.js";import"./index-Hmp-CFtI.js";import{F as oe}from"./index-C9Lc3JeH.js";import{N as se}from"./index-DvLt6MaC.js";import{F as ae}from"./index-EabiJORA.js";import"./use-id-BTy8-xBR.js";const le={class:"label highlight-txt mb-2 mt-4"},re={class:"label highlight-txt mt-6 mb-2"},ne={class:"label highlight-txt mt-6 mb-2"},ie={class:"label highlight-txt mt-6 mb-2"},ue={class:"label highlight-txt mt-6 mb-2"},de={key:1},pe={__name:"Register",setup(me){const $=P();A();const C=Z(),q=Q(),i=l("password");function R(){i.value==="password"?i.value="text":i.value="password"}const u=l("password");function z(){u.value==="password"?u.value="text":u.value="password"}const d=l(""),p=l(""),f=l(""),v=l(""),m=l(""),b=l(!1),h=l(!1),x=J({time:60*1e3,onFinish:()=>{h.value=!1}});function S(){b.value=!0,Y({user_string:d.value}).then(t=>{console.log(t),N({type:"primary",message:t.message}),t.type==="ok"&&(h.value=!0,x.start())}).finally(()=>{b.value=!1})}const U=t=>t===p.value,w=l(!1);function D(t){w.value=!0,ee({user_string:d.value,password:p.value,re_password:f.value,code:v.value,type:"email",extension_code:m.value}).then(o=>{console.log(o),o.type==="ok"&&(N({type:"primary",message:o.message}),setTimeout(()=>{C.push("/login")},500))}).finally(()=>{w.value=!1})}function I(){C.go(-1)}return O(()=>{const t=q.query;t&&(m.value=t.inviteCode)}),(t,o)=>{var B;const y=K,k=H,G=se,n=j("i18n-t"),c=oe,M=te,E=ae;return V(),F(T,null,[e(G,{title:(B=s($).siteConfig)==null?void 0:B.site_name},{left:r(()=>[e(y,{"class-prefix":"iconfont",name:"back",onClick:I})]),right:r(()=>[e(k,{size:"small",onClick:o[0]||(o[0]=a=>t.$router.push("/lang"))},{default:r(()=>[e(y,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e(E,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:D},{default:r(()=>[e(M,{border:!1},{default:r(()=>[_("div",le,[e(n,{keypath:"register.enter_email"})]),e(c,{modelValue:s(d),"onUpdate:modelValue":o[1]||(o[1]=a=>g(d)?d.value=a:null),placeholder:t.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),_("div",re,[e(n,{keypath:"register.pwd"})]),e(c,{modelValue:s(p),"onUpdate:modelValue":o[2]||(o[2]=a=>g(p)?p.value=a:null),type:s(i),placeholder:t.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(y,{name:s(i)==="password"?"closed-eye":"eye",size:"20",onClick:R},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),_("div",ne,[e(n,{keypath:"register.enter_password_again"})]),e(c,{modelValue:s(f),"onUpdate:modelValue":o[3]||(o[3]=a=>g(f)?f.value=a:null),type:s(u),placeholder:t.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:U}]},{button:r(()=>[e(y,{name:s(u)==="password"?"closed-eye":"eye",size:"20",onClick:z},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),_("div",ie,[e(n,{keypath:"invite.invitation_code"})]),e(c,{modelValue:s(m),"onUpdate:modelValue":o[4]||(o[4]=a=>g(m)?m.value=a:null),placeholder:t.$t("register.enter_invite_code"),border:!1},null,8,["modelValue","placeholder"]),_("div",ue,[e(n,{keypath:"register.enter_vercode"})]),e(c,{class:"mb-6",modelValue:s(v),"onUpdate:modelValue":o[5]||(o[5]=a=>g(v)?v.value=a:null),placeholder:t.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(k,{size:"mini",type:"primary",loading:s(b),disabled:s(h),onClick:S},{default:r(()=>[s(h)?(V(),F("span",de,X(s(x).current.value.seconds)+" S",1)):(V(),W(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(k,{block:"",type:"primary","native-type":"submit",loading:s(w)},{default:r(()=>[e(n,{keypath:"register.register"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},be=L(pe,[["__scopeId","data-v-278c2bc4"]]);export{be as default};
