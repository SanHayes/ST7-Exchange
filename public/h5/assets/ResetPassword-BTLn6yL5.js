import{J as E,p as G,r as l,U as H,s as F,a as e,x as a,z as o,F as L,A,v as J,C as k,I as T,L as v,y as h,E as Z,H as j,aF as K,Z as B,aH as M}from"./index-DotFs6hQ.js";import{C as O}from"./index-CdgWwUic.js";import"./index-BGvW-Xgq.js";import{F as Q}from"./index-CPIY3Ody.js";import{N as W}from"./index-n0gQ9ulz.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as Y}from"./index-CBouzOJA.js";import{B as ee}from"./index-DFHfScTq.js";import"./use-route-_DyoSwqD.js";import"./use-id-DPiuflnV.js";import"./use-placeholder-fxdmpSj4.js";import"./index-CR8qj5FJ.js";const oe={class:"label highlight-txt mb-2 mt-4"},se={class:"label highlight-txt mt-6 mb-2"},te={class:"label highlight-txt mt-6 mb-2"},ae={class:"label highlight-txt mt-6 mb-2"},le={key:1},re={__name:"ResetPassword",setup(ne){const z=E();G();const V=A(),i=l("password");function N(){i.value==="password"?i.value="text":i.value="password"}const d=l("password");function P(){d.value==="password"?d.value="text":d.value="password"}const u=l(""),p=l(""),m=l(""),c=l(""),y=l(!1),_=l(!1),C=H({time:60*1e3,onFinish:()=>{_.value=!1}});function R(){y.value=!0,K({user_string:u.value}).then(t=>{console.log(t),B({type:"primary",message:t.message}),t.type==="ok"&&(_.value=!0,C.start())}).finally(()=>{y.value=!1})}const S=t=>t===p.value,w=l(!1);function U(t){w.value=!0,M({email:u.value,password:p.value,repassword:m.value,code:c.value}).then(s=>{console.log(s),B({type:"primary",message:s.message}),s.type==="ok"&&setTimeout(()=>{V.push("/login")},500)}).finally(()=>{w.value=!1})}function q(){V.go(-1)}return(t,s)=>{var x;const f=T,b=ee,I=W,n=J("i18n-t"),g=Q,$=O,D=Y;return k(),F(L,null,[e(I,{title:(x=o(z).siteConfig)==null?void 0:x.site_name},{left:a(()=>[e(f,{"class-prefix":"iconfont",name:"back",onClick:q})]),right:a(()=>[e(b,{size:"small"},{default:a(()=>[e(f,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e(D,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:U},{default:a(()=>[e($,{border:!1},{default:a(()=>[v("div",oe,[e(n,{keypath:"register.enter_email"})]),e(g,{modelValue:o(u),"onUpdate:modelValue":s[0]||(s[0]=r=>h(u)?u.value=r:null),placeholder:t.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),v("div",se,[e(n,{keypath:"register.pwd"})]),e(g,{modelValue:o(p),"onUpdate:modelValue":s[1]||(s[1]=r=>h(p)?p.value=r:null),type:o(i),placeholder:t.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:a(()=>[e(f,{name:o(i)==="password"?"closed-eye":"eye",size:"20",onClick:N},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),v("div",te,[e(n,{keypath:"register.enter_password_again"})]),e(g,{modelValue:o(m),"onUpdate:modelValue":s[2]||(s[2]=r=>h(m)?m.value=r:null),type:o(d),placeholder:t.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:S}]},{button:a(()=>[e(f,{name:o(d)==="password"?"closed-eye":"eye",size:"20",onClick:P},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),v("div",ae,[e(n,{keypath:"register.enter_vercode"})]),e(g,{class:"mb-6",modelValue:o(c),"onUpdate:modelValue":s[3]||(s[3]=r=>h(c)?c.value=r:null),placeholder:t.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:a(()=>[e(b,{size:"mini",type:"primary",loading:o(y),disabled:o(_),onClick:R},{default:a(()=>[o(_)?(k(),F("span",le,j(o(C).current.value.seconds)+" S",1)):(k(),Z(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(b,{block:"",type:"primary","native-type":"submit",loading:o(w)},{default:a(()=>[e(n,{keypath:"reset.reset_password"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},we=X(re,[["__scopeId","data-v-99d34641"]]);export{we as default};
