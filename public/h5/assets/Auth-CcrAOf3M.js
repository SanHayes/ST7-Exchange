import{_ as G,a1 as R,N as J,bg as M,k as O,y as d,b as o,A as p,D as n,R as Q,F as u,O as l,z as j,Q as q,J as P,G as r,I as H,P as $,b7 as U,bh as K,a3 as N}from"./index-BnyLAGZB.js";import{C as T}from"./index-BNj4Mocr.js";import{C as W}from"./index-BfboS-Bn.js";import{I as X}from"./index-WHeVU_O1.js";/* empty css              */import{U as Y}from"./index-9elv8i4S.js";import{F as Z}from"./index-D9k6xK1L.js";import{N as ee}from"./index-BmM0u66y.js";import"./index-C58MDuA5.js";import"./use-id-BGHWcOAm.js";const ae="/h5/assets/id-front-B29VUS8_.png",te="/h5/assets/id-background-BvafEgth.png",oe={key:0,class:"text-center"},ne={key:1,class:"main pa-3"},se={class:"label font-md"},le={class:"label font-md"},re={class:"row"},ie={key:0,class:"front"},de={class:"btn"},ce={class:"font-sm tips"},pe={class:"row"},_e={key:0,class:"front"},me={class:"btn"},ue={class:"font-sm tips"},fe={class:"text-center"},he={class:"row"},ve={class:"row"},ke={__name:"Auth",setup(be){const e=R({name:"",card:"",frontFileList:[],frontFilePath:"",backFileList:[],backFilePath:"",loading:!1,pageLoading:!1,info:null});J(()=>{f()});function f(){e.pageLoading=!0,M().then(t=>{t.type==="ok"&&(e.info=t.data)}).finally(()=>{e.pageLoading=!1})}function z(t){t.status="uploading";const a=new FormData;a.append("file",t.file),a.append("type",0),U(a).then(c=>{t.status="done",e.frontFilePath=c.file_path}).catch(()=>{t.status="error"})}function I(t){t.status="uploading";const a=new FormData;a.append("file",t.file),a.append("type",0),U(a).then(c=>{t.status="done",e.backFilePath=c.file_path}).catch(()=>{t.status="error"})}const D=O(()=>!e.name||!e.card||!e.frontFilePath||!e.backFilePath);function A(){const t={id_type:0,name:e.name,card_id:e.card,real_type:1,front_pic:e.frontFilePath,reverse_pic:e.backFilePath};e.loading=!0,K(t).then(a=>{(a==null?void 0:a.type)==="ok"?(N({type:"success",message:a.message}),e.loading=!1,f()):N({type:"error",message:a.message})}).finally(()=>{e.loading=!0})}return(t,a)=>{var b,g,y,F,V,w;const c=H,S=ee,x=Q,i=j("i18n-t"),h=Z,_=X,m=q,v=Y,k=W,E=T;return r(),d(u,null,[o(S,{title:t.$t("real.real_name_auth"),fixed:"",placeholder:""},{left:p(()=>[o(c,{"class-prefix":"iconfont",name:"back",onClick:a[0]||(a[0]=s=>t.$router.back())})]),_:1},8,["title"]),n(e).pageLoading?(r(),d("div",oe,[o(x,{size:"24"})])):(r(),d("div",ne,[((b=n(e).info)==null?void 0:b.real_status)===0?(r(),d(u,{key:0},[l("div",se,[o(i,{keypath:"real.improve_information"})]),o(h,{class:"row",label:t.$t("real.name"),modelValue:n(e).name,"onUpdate:modelValue":a[1]||(a[1]=s=>n(e).name=s),placeholder:t.$t("real.enter_name")},null,8,["label","modelValue","placeholder"]),o(h,{class:"row",modelValue:n(e).card,"onUpdate:modelValue":a[2]||(a[2]=s=>n(e).card=s),label:t.$t("real.passport_idnumber"),placeholder:t.$t("real.enter_passport_idnumber")},null,8,["modelValue","label","placeholder"]),l("div",le,[o(i,{keypath:"real.upload_the_front_and_back"})]),l("div",re,[o(v,{modelValue:n(e).frontFileList,"onUpdate:modelValue":a[3]||(a[3]=s=>n(e).frontFileList=s),"max-count":1,"preview-size":["auto","20vh"],"after-read":z},{default:p(()=>[n(e).frontFileList.length?$("",!0):(r(),d("div",ie,[o(_,{src:n(ae)},null,8,["src"]),l("div",de,[o(m,{icon:"plus",round:"",type:"primary",size:"small"})]),l("p",ce,[o(i,{keypath:"real.front"})])]))]),_:1},8,["modelValue"])]),l("div",pe,[o(v,{modelValue:n(e).backFileList,"onUpdate:modelValue":a[4]||(a[4]=s=>n(e).backFileList=s),"max-count":1,"preview-size":["auto","20vh"],"after-read":I},{default:p(()=>[n(e).backFileList.length?$("",!0):(r(),d("div",_e,[o(_,{src:n(te)},null,8,["src"]),l("div",me,[o(m,{icon:"plus",round:"",type:"primary",size:"small"})]),l("p",ue,[o(i,{keypath:"real.back"})])]))]),_:1},8,["modelValue"])]),o(m,{type:"primary",block:"",loading:n(e).loading,disabled:n(D),onClick:A},{default:p(()=>[o(i,{keypath:"real.submit"})]),_:1},8,["loading","disabled"])],64)):(r(),d(u,{key:1},[l("div",fe,[((g=n(e).info)==null?void 0:g.real_status)===1?(r(),P(i,{key:0,keypath:"real.under_review"})):(r(),P(i,{key:1,keypath:"real.finish"}))]),l("div",he,[o(_,{src:"/"+((F=(y=n(e).info)==null?void 0:y.real_data)==null?void 0:F.front_pic)},null,8,["src"])]),l("div",ve,[o(_,{src:(w=(V=n(e).info)==null?void 0:V.real_data)==null?void 0:w.reverse_pic},null,8,["src"])]),o(E,null,{default:p(()=>{var s,L,B,C;return[o(k,{title:t.$t("real.name"),value:(L=(s=n(e).info)==null?void 0:s.real_data)==null?void 0:L.name},null,8,["title","value"]),o(k,{title:t.$t("real.passport_idnumber"),value:(C=(B=n(e).info)==null?void 0:B.real_data)==null?void 0:C.card_id},null,8,["title","value"])]}),_:1})],64))]))],64)}}},Ue=G(ke,[["__scopeId","data-v-dd73ad71"]]);export{Ue as default};
