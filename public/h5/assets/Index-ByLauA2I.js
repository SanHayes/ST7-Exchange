import{_ as T,v as D,r as m,bl as E,y as N,b as e,O as a,A as l,J as h,z as A,D as r,C as G,L as v,Q as H,F as z,E as J,G as u,I as K,R as O,H as Q,K as U,a3 as k,bm as j}from"./index-Bls5mtmE.js";import{S as q}from"./index-DFfPZxq9.js";import{T as M}from"./index-Dayh3QWa.js";import"./index-Hmp-CFtI.js";import{F as P}from"./index-C9Lc3JeH.js";import{N as W}from"./index-DvLt6MaC.js";import"./use-id-BTy8-xBR.js";const X={class:"main ma-3"},Y={class:"verified text-center pa-5 mb-3"},Z={class:"font-md"},ee={class:"label font-md mb-3"},ae={class:"label font-md my-2"},oe={class:"row my-3 pa-3 font-md"},ne={class:"flex space-between"},te={class:"label"},se={class:"value"},le={class:"flex space-between"},ie={class:"label"},de={class:"value"},re={class:"flex space-between"},ce={class:"label"},_e={class:"value"},me={class:"rule my-3 font-sm"},ue={__name:"Index",setup(pe){const B=J(),{t:b}=D(),g=m(!0),w=m([]),c=m(""),i=m(null),y=m(!1);E().then(s=>{var o;if(s.type==="ok"){const n=((o=s.data)==null?void 0:o.data)||[];w.value=n.sort((f,t)=>f.lock_dividend_days-t.lock_dividend_days),n!=null&&n.length&&(i.value=n[0])}}).finally(()=>{g.value=!1});function I(s){i.value=s}function V(){var o;if(!c.value){k({type:"warning",message:b("mining.max_number")});return}if(c.value<Number(i.value.borrow_amount_min)){k({type:"warning",message:b("mining.lazy_weight")});return}y.value=!0;const s={id:(o=i.value)==null?void 0:o.id,amount:c.value};j(s).then(n=>{console.log("res",n),n.type==="ok"?B.push("/loaned"):k({type:"warning",message:n==null?void 0:n.message})}).finally(()=>{y.value=!1})}return(s,o)=>{var x,C,$;const n=K,f=W,t=A("i18n-t"),L=O,p=H,F=P,S=M,R=q;return u(),N(z,null,[e(f,{title:s.$t("loan.loan"),fixed:"",placeholder:""},{left:l(()=>[e(n,{"class-prefix":"iconfont",name:"back",onClick:o[0]||(o[0]=d=>s.$router.back())})]),right:l(()=>[e(n,{name:"orders-o",size:"24",onClick:o[1]||(o[1]=d=>s.$router.push("/loan/record"))})]),_:1},8,["title"]),a("div",X,[a("div",Y,[a("p",Z,[e(t,{keypath:"loan.start_loan"})]),r(g)?(u(),h(p,{key:0,type:"primary"},{icon:l(()=>[e(L,{size:"16",color:"white"})]),default:l(()=>[e(t,{keypath:"loan.verify"})]),_:1})):(u(),h(p,{key:1,icon:"checked",type:"primary"},{default:l(()=>[e(t,{keypath:"loan.verified"})]),_:1}))]),a("div",ee,[e(t,{keypath:"loan.amount"})]),e(F,{class:"row",modelValue:r(c),"onUpdate:modelValue":o[3]||(o[3]=d=>G(c)?c.value=d:null),placeholder:s.$t("loan.input_amount")},{"right-icon":l(()=>[e(p,{type:"primary",size:"small",onClick:o[2]||(o[2]=d=>{var _;return c.value=(_=r(i))==null?void 0:_.borrow_amount_max})},{default:l(()=>[e(t,{keypath:"loan.max"})]),_:1})]),_:1},8,["modelValue","placeholder"]),a("div",ae,[e(t,{keypath:"loan.loan_time"})]),e(R,null,{default:l(()=>[(u(!0),N(z,null,Q(r(w),d=>{var _;return u(),h(S,{type:"primary",size:"large",plain:d.lock_dividend_days!==((_=r(i))==null?void 0:_.lock_dividend_days),key:d.id,onClick:ve=>I(d)},{default:l(()=>[U(v(d.lock_dividend_days)+" ",1),e(t,{keypath:"loan.day"})]),_:2},1032,["plain","onClick"])}),128))]),_:1}),a("div",oe,[a("div",ne,[a("div",te,[e(t,{keypath:"loan.day_rate"})]),a("div",se,v((x=r(i))==null?void 0:x.borrow_lixi)+" % ",1)]),a("div",le,[a("div",ie,[e(t,{keypath:"mining.maximum_subscription"})]),a("div",de,v((C=r(i))==null?void 0:C.borrow_amount_max),1)]),a("div",re,[a("div",ce,[e(t,{keypath:"mining.minimum_subscription"})]),a("div",_e,v(($=r(i))==null?void 0:$.borrow_amount_min),1)])]),e(p,{type:"primary",block:"",loading:r(y),onClick:V},{default:l(()=>[e(t,{keypath:"loan.loan_now"})]),_:1},8,["loading"]),a("div",me,[e(t,{keypath:"loan.rule"})])])],64)}}},xe=T(ue,[["__scopeId","data-v-3abea68f"]]);export{xe as default};
