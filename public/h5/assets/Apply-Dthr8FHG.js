import{_ as D,N as M,v as S,r as _,k as G,s as H,y as h,b as e,A as u,D as n,S as R,M as o,I as T,L as g,z as U,Q as E,C as x,ac as O,F as Q,G as k,ai as v}from"./index-TumWjzH3.js";import{C as q}from"./index-BjqWZ1LX.js";import{C as J}from"./index-Ccz0zBtd.js";import{F as K}from"./index-B2w9dJQO.js";import{N as W}from"./index-DXJoUNoH.js";import{g as X,b as Y}from"./news---3vdOSY.js";import{s as Z}from"./function-call-DISSziOY.js";import"./use-id-P00KxrJF.js";const ee={key:0,class:"text-center ma-6"},te={key:1,class:"main ma-5"},ne={class:"row my-3 pa-5"},ae={class:"flex space-between align-center"},oe={class:"p-name bold flex align-center"},se={class:"flex space-between ma-3"},le={class:"text-center"},ie={class:"value"},ue={class:"font-sm"},ce={class:"text-center"},re={class:"value"},me={class:"font-sm"},de={class:"my-3"},_e=["innerHTML"],pe={__name:"Apply",setup(ve){const p=M(),b=H(),{t:c}=S(),f=_(!1),a=_(null),s=_(null),N=G(()=>{var t;return s.value&&(((t=a.value)==null?void 0:t.project_lixi)*s.value/100).toFixed(2)||0}),r=_(!1);F(),Object.keys(p.user).length||p.userInfo();function F(){f.value=!0,X(b.params.id).then(t=>{t.type==="ok"&&(console.log(t),a.value=t.data||{})}).finally(()=>{f.value=!1})}function I(){var t;if(!s.value){v({type:"warning",message:c("mining.max_number")});return}if(s.value<Number(a.value.project_amount_min)){v({type:"warning",message:c("mining.lazy_weight")});return}if(s.value>Number(a.value.project_amount_max)){v({type:"warning",message:c("tc.overstep")});return}if(s.value>((t=p.user)==null?void 0:t.usdt)){Z({message:c("tc.lack")}).then(()=>{router.push("/mine/charge")}).catch(()=>{});return}r.value=!0}const y=_(!1);function A(){y.value=!0;const t={id:b.params.id,amount:s.value};Y(t).then(l=>{l.type==="ok"&&v({type:"success",message:c("mining.succeed")})}).finally(()=>{y.value=!1,r.value=!1})}return(t,l)=>{const w=T,B=W,L=R,m=U("i18n-t"),i=J,V=K,j=q,C=E,z=O;return k(),h(Q,null,[e(B,{title:t.$t("tc.investor"),fixed:"",placeholder:""},{left:u(()=>[e(w,{"class-prefix":"iconfont",name:"back",onClick:l[0]||(l[0]=d=>t.$router.back())})]),_:1},8,["title"]),n(f)?(k(),h("div",ee,[e(L,{size:"24"})])):(k(),h("div",te,[o("div",ne,[o("div",ae,[o("div",oe,[e(w,{name:n(a).project_img,size:"30"},null,8,["name"]),o("span",null,g(n(a).project_name),1)])]),o("div",se,[o("div",le,[o("div",ie,g(n(a).project_lixi)+"%",1),o("div",ue,[e(m,{keypath:"tc.dailyProfit"})])]),o("div",ce,[o("div",re,g(n(a).lock_dividend_days),1),o("div",me,[e(m,{keypath:"tc.days"})])])])]),e(j,null,{default:u(()=>{var d,$;return[e(i,{title:t.$t("tc.return"),value:n(a).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.min"),value:n(a).project_amount_min},null,8,["title","value"]),e(i,{title:t.$t("tc.max"),value:n(a).project_amount_max},null,8,["title","value"]),e(i,{title:t.$t("trade.balance"),value:($=(d=n(p).user)==null?void 0:d.usdt)==null?void 0:$.toFixed(3)},null,8,["title","value"]),e(V,{modelValue:n(s),"onUpdate:modelValue":l[1]||(l[1]=P=>x(s)?s.value=P:null),placeholder:t.$t("tc.enterAmount")},null,8,["modelValue","placeholder"])]}),_:1}),e(C,{block:"",type:"primary",class:"mt-3",onClick:I},{default:u(()=>[e(m,{keypath:"tc.investor"})]),_:1}),o("div",de,[e(m,{keypath:"tc.notes"})]),o("div",{innerHTML:n(a).project_desc,class:"font-md"},null,8,_e),e(z,{show:n(r),"onUpdate:show":l[2]||(l[2]=d=>x(r)?r.value=d:null),position:"bottom","safe-area-inset-bottom":!0},{default:u(()=>[e(j,{title:n(a).project_name},{default:u(()=>[e(i,{title:t.$t("tc.days"),value:n(a).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.dailyProfit"),value:n(N)},null,8,["title","value"]),e(i,{title:t.$t("tc.buyAmount"),value:n(s)},null,8,["title","value"]),e(i,null,{default:u(()=>[e(C,{block:"",type:"primary",class:"mt-3",loading:n(y),onClick:A},{default:u(()=>[e(m,{keypath:"tc.investor"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},Ce=D(pe,[["__scopeId","data-v-a0eb5313"]]);export{Ce as default};
