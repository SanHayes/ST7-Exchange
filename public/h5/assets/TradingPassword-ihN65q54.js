import{_ as $,r,v as h,N as z,O as B,am as T,k as q,y as D,b as o,A as p,E as N,z as O,G as R,D as e,C as v,I as S,Q as U,bp as x,ai as E}from"./index-Dz2FhLUK.js";import"./index-IEZPsQoy.js";import{F as M}from"./index-x8bv8pe9.js";import{u as j}from"./useFieldManager-CSFYbj9G.js";import{p as A}from"./utils-Rtcwlnw2.js";import{F as G}from"./index-BPev7FSy.js";import"./use-id-DfC-P2Rh.js";const Q={class:"main mx-3 mt-8"},H={__name:"TradingPassword",setup(J){r("");const{t:_}=h(),b=N(),y=z();r(!1);const g=r(!1);B(async()=>{Object.keys(y.user).length||(u.value=!0,await y.userInfo(),u.value=!1)}),T({time:60*1e3,onFinish:()=>{g.value=!1}});const n=r(""),l=r(""),d=r(""),u=r(!1),k=q(()=>!n.value||!l.value||!d.value),V=a=>a===l.value,{getType:i,getIcon:m,toggleVisible:w}=j({oldpassword:{type:"password"},password:{type:"password"},repassword:{type:"password"}});function C(){u.value=!0,x({oldpassword:n.value,password:l.value,repassword:d.value}).then(a=>{a.type==="ok"&&(E({type:"success",message:a.message||_("deposit.completed")}),setTimeout(()=>{b.back()},2e3))}).finally(()=>{u.value=!1})}return(a,s)=>{const c=S,f=M,F=O("i18n-t"),I=U,P=G;return R(),D("div",Q,[o(P,{"show-error":!0,"show-error-message":!1,onSubmit:C},{default:p(()=>[o(f,{class:"row",modelValue:e(n),"onUpdate:modelValue":s[1]||(s[1]=t=>v(n)?n.value=t:null),type:e(i)("oldpassword"),placeholder:a.$t("tc.enterOldPassword"),border:!1,rules:[{required:!0}]},{button:p(()=>[o(c,{name:e(m)("oldpassword"),size:"20",onClick:s[0]||(s[0]=t=>e(w)("oldpassword"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),o(f,{class:"row",modelValue:e(l),"onUpdate:modelValue":s[3]||(s[3]=t=>v(l)?l.value=t:null),type:e(i)("password"),placeholder:a.$t("tc.payPass"),border:!1,rules:[{required:!0,pattern:e(A)}]},{button:p(()=>[o(c,{name:e(m)("password"),size:"20",onClick:s[2]||(s[2]=t=>e(w)("password"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),o(f,{class:"row",modelValue:e(d),"onUpdate:modelValue":s[5]||(s[5]=t=>v(d)?d.value=t:null),type:e(i)("repassword"),placeholder:a.$t("reset.enter_new_password_again"),border:!1,rules:[{required:!0},{validator:V}]},{button:p(()=>[o(c,{name:e(m)("repassword"),size:"20",onClick:s[4]||(s[4]=t=>e(w)("repassword"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),o(I,{block:"",type:"primary",disabled:e(k),loading:e(u),"native-type":"submit"},{default:p(()=>[o(F,{keypath:"order.modify"})]),_:1},8,["disabled","loading"])]),_:1})])}}},se=$(H,[["__scopeId","data-v-30c6208e"]]);export{se as default};
