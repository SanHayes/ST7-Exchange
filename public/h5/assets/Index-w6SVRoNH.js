import{_ as T,v as D,r as m,bo as E,y as N,b as e,O as o,A as l,J as h,z as A,D as r,C as G,L as v,Q as H,F as z,E as J,G as p,I as K,R as O,H as Q,K as U,a8 as k,bp as j}from"./index-0ixFw3OK.js";import{S as q}from"./index-C1C5DEL0.js";import{T as M}from"./index-Bs5IzW5P.js";import"./index-CR2ItRj-.js";import{F as P}from"./index-8BOhLeSt.js";import{N as W}from"./index-Rsdy_2dq.js";import"./use-id-CgNGtBDG.js";const X={class:"main ma-3"},Y={class:"verified text-center pa-5 mb-3"},Z={class:"font-md"},ee={class:"label font-md mb-3"},oe={class:"label font-md my-2"},ae={class:"row my-3 pa-3 font-md"},ne={class:"flex space-between"},te={class:"label"},se={class:"value"},le={class:"flex space-between"},ie={class:"label"},de={class:"value"},re={class:"flex space-between"},ce={class:"label"},_e={class:"value"},me={class:"rule my-3 font-sm"},pe={__name:"Index",setup(ue){const B=J(),{t:b}=D(),g=m(!0),w=m([]),c=m(""),i=m(null),y=m(!1);E().then(s=>{var a;if(s.type==="ok"){const n=((a=s.data)==null?void 0:a.data)||[];w.value=n.sort((f,t)=>f.lock_dividend_days-t.lock_dividend_days),n!=null&&n.length&&(i.value=n[0])}}).finally(()=>{g.value=!1});function I(s){i.value=s}function V(){var a;if(!c.value){k({type:"warning",message:b("mining.max_number")});return}if(c.value<Number(i.value.borrow_amount_min)){k({type:"warning",message:b("mining.lazy_weight")});return}y.value=!0;const s={id:(a=i.value)==null?void 0:a.id,amount:c.value};j(s).then(n=>{console.log("res",n),n.type==="ok"?B.push("/loaned"):k({type:"warning",message:n==null?void 0:n.message})}).finally(()=>{y.value=!1})}return(s,a)=>{var x,C,$;const n=K,f=W,t=A("i18n-t"),L=O,u=H,F=P,S=M,R=q;return p(),N(z,null,[e(f,{title:s.$t("loan.loan"),fixed:"",placeholder:""},{left:l(()=>[e(n,{"class-prefix":"iconfont",name:"back",onClick:a[0]||(a[0]=d=>s.$router.back())})]),right:l(()=>[e(n,{name:"orders-o",size:"24",onClick:a[1]||(a[1]=d=>s.$router.push("/loan/record"))})]),_:1},8,["title"]),o("div",X,[o("div",Y,[o("p",Z,[e(t,{keypath:"loan.start_loan"})]),r(g)?(p(),h(u,{key:0,type:"primary"},{icon:l(()=>[e(L,{size:"16",color:"white"})]),default:l(()=>[e(t,{keypath:"loan.verify"})]),_:1})):(p(),h(u,{key:1,icon:"checked",type:"primary"},{default:l(()=>[e(t,{keypath:"loan.verified"})]),_:1}))]),o("div",ee,[e(t,{keypath:"loan.amount"})]),e(F,{class:"row",modelValue:r(c),"onUpdate:modelValue":a[3]||(a[3]=d=>G(c)?c.value=d:null),placeholder:s.$t("loan.input_amount")},{"right-icon":l(()=>[e(u,{type:"primary",size:"small",onClick:a[2]||(a[2]=d=>{var _;return c.value=(_=r(i))==null?void 0:_.borrow_amount_max})},{default:l(()=>[e(t,{keypath:"loan.max"})]),_:1})]),_:1},8,["modelValue","placeholder"]),o("div",oe,[e(t,{keypath:"loan.loan_time"})]),e(R,null,{default:l(()=>[(p(!0),N(z,null,Q(r(w),d=>{var _;return p(),h(S,{type:"primary",size:"large",plain:d.lock_dividend_days!==((_=r(i))==null?void 0:_.lock_dividend_days),key:d.id,onClick:ve=>I(d)},{default:l(()=>[U(v(d.lock_dividend_days)+" ",1),e(t,{keypath:"loan.day"})]),_:2},1032,["plain","onClick"])}),128))]),_:1}),o("div",ae,[o("div",ne,[o("div",te,[e(t,{keypath:"loan.day_rate"})]),o("div",se,v((x=r(i))==null?void 0:x.borrow_lixi)+" % ",1)]),o("div",le,[o("div",ie,[e(t,{keypath:"mining.maximum_subscription"})]),o("div",de,v((C=r(i))==null?void 0:C.borrow_amount_max),1)]),o("div",re,[o("div",ce,[e(t,{keypath:"mining.minimum_subscription"})]),o("div",_e,v(($=r(i))==null?void 0:$.borrow_amount_min),1)])]),e(u,{type:"primary",block:"",loading:r(y),onClick:V},{default:l(()=>[e(t,{keypath:"loan.loan_now"})]),_:1},8,["loading"]),o("div",me,[e(t,{keypath:"loan.rule"})])])],64)}}},xe=T(pe,[["__scopeId","data-v-3abea68f"]]);export{xe as default};
