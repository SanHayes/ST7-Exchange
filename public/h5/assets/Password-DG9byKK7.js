import{_ as h,r as n,v as z,N as U,O as q,am as D,k as M,y as O,b as s,A as r,C as m,D as o,F as S,E,z as R,G as j,I as A,M as G,Q as L,a$ as Q,ai as x}from"./index-Cji0LIog.js";/* empty css              *//* empty css              */import"./index-BXv81Z5_.js";import{F as H}from"./index-Dm8RlGeV.js";import{N as J}from"./index-QZQPgCsf.js";import{u as K}from"./useFieldManager-BkIBiD39.js";import W from"./TradingPassword-BlIeurI7.js";import{r as X}from"./utils-Wlz_s_Bf.js";import{T as Y,a as Z}from"./index-DBH-Q_yq.js";import{F as ee}from"./index-PGc_Qvyb.js";import"./use-id-D6HqoPij.js";import"./use-tab-status-Csvhw6TT.js";import"./index-Br1Gm7DY.js";const oe={class:"main mx-3 mt-8"},se={__name:"Password",setup(ae){n("");const{t:g}=z(),k=E(),c=U();n(!1);const V=n(!1),f=n(0);q(async()=>{Object.keys(c.user).length||(u.value=!0,await c.userInfo(),u.value=!1)}),D({time:60*1e3,onFinish:()=>{V.value=!1}});const d=n(""),l=n(""),p=n(""),u=n(!1),$=M(()=>!d.value||!l.value||!p.value),C=a=>a===l.value,{getType:w,getIcon:v,toggleVisible:_}=K({oldpassword:{type:"password"},password:{type:"password"},repassword:{type:"password"}});function F(){u.value=!0,Q({oldpassword:d.value,password:l.value,repassword:p.value}).then(a=>{a.type==="ok"&&(x({type:"success",message:a.message||g("deposit.completed")}),c.logout(),setTimeout(()=>{k.push("/login")},500))}).finally(()=>{u.value=!1})}return(a,e)=>{const i=A,P=J,b=H,B=R("i18n-t"),I=L,N=ee,y=Z,T=Y;return j(),O(S,null,[s(P,{title:a.$t("mine.change_password"),fixed:"",placeholder:""},{left:r(()=>[s(i,{"class-prefix":"iconfont",name:"back",onClick:e[0]||(e[0]=t=>a.$router.back())})]),_:1},8,["title"]),s(T,{active:o(f),"onUpdate:active":e[7]||(e[7]=t=>m(f)?f.value=t:null)},{default:r(()=>[s(y,{title:a.$t("tc.modifyLoginPassword")},{default:r(()=>[G("div",oe,[s(N,{"show-error":!0,"show-error-message":!1,onSubmit:F},{default:r(()=>[s(b,{class:"row",modelValue:o(d),"onUpdate:modelValue":e[2]||(e[2]=t=>m(d)?d.value=t:null),type:o(w)("oldpassword"),placeholder:a.$t("tc.enterOldPassword"),border:!1,rules:[{required:!0}]},{button:r(()=>[s(i,{name:o(v)("oldpassword"),size:"20",onClick:e[1]||(e[1]=t=>o(_)("oldpassword"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),s(b,{class:"row",modelValue:o(l),"onUpdate:modelValue":e[4]||(e[4]=t=>m(l)?l.value=t:null),type:o(w)("password"),placeholder:a.$t("tc.enterPass"),border:!1,rules:[{required:!0,pattern:o(X)}]},{button:r(()=>[s(i,{name:o(v)("password"),size:"20",onClick:e[3]||(e[3]=t=>o(_)("password"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),s(b,{class:"row",modelValue:o(p),"onUpdate:modelValue":e[6]||(e[6]=t=>m(p)?p.value=t:null),type:o(w)("repassword"),placeholder:a.$t("reset.enter_new_password_again"),border:!1,rules:[{required:!0},{validator:C}]},{button:r(()=>[s(i,{name:o(v)("repassword"),size:"20",onClick:e[5]||(e[5]=t=>o(_)("repassword"))},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),s(I,{block:"",type:"primary",disabled:o($),loading:o(u),"native-type":"submit"},{default:r(()=>[s(B,{keypath:"order.modify"})]),_:1},8,["disabled","loading"])]),_:1})])]),_:1},8,["title"]),s(y,{title:a.$t("mine.change_trading_password")},{default:r(()=>[s(W)]),_:1},8,["title"])]),_:1},8,["active"])],64)}}},be=h(se,[["__scopeId","data-v-b3c9300e"]]);export{be as default};
