import{_ as G,M as E,v as L,r as l,Z as M,y as F,b as e,A as a,D as s,F as O,E as A,z as J,G as k,Q,I as T,O as v,C as h,J as Z,L as j,aM as H,a3 as B,aO as K}from"./index-DnIob8_j.js";import{C as W}from"./index-Dgu3waGc.js";import"./index-Cp5D7UjK.js";import{F as X}from"./index-Bheu1lUi.js";import{N as Y}from"./index-hvZgoHL9.js";import{F as ee}from"./index-ewlIaP2l.js";import"./use-id-CxdRtbeS.js";const se={class:"label highlight-txt mb-2 mt-4"},oe={class:"label highlight-txt mt-6 mb-2"},te={class:"label highlight-txt mt-6 mb-2"},ae={class:"label highlight-txt mt-6 mb-2"},le={key:1},re={__name:"ResetPassword",setup(ne){const z=E();L();const V=A(),i=l("password");function N(){i.value==="password"?i.value="text":i.value="password"}const d=l("password");function P(){d.value==="password"?d.value="text":d.value="password"}const u=l(""),p=l(""),m=l(""),c=l(""),y=l(!1),_=l(!1),C=M({time:60*1e3,onFinish:()=>{_.value=!1}});function R(){y.value=!0,H({user_string:u.value}).then(t=>{console.log(t),B({type:"primary",message:t.message}),t.type==="ok"&&(_.value=!0,C.start())}).finally(()=>{y.value=!1})}const S=t=>t===p.value,w=l(!1);function q(t){w.value=!0,K({email:u.value,password:p.value,repassword:m.value,code:c.value}).then(o=>{console.log(o),B({type:"primary",message:o.message}),o.type==="ok"&&setTimeout(()=>{V.push("/login")},500)}).finally(()=>{w.value=!1})}function D(){V.go(-1)}return(t,o)=>{var x;const f=T,b=Q,I=Y,n=J("i18n-t"),g=X,U=W,$=ee;return k(),F(O,null,[e(I,{title:(x=s(z).siteConfig)==null?void 0:x.site_name},{left:a(()=>[e(f,{"class-prefix":"iconfont",name:"back",onClick:D})]),right:a(()=>[e(b,{size:"small"},{default:a(()=>[e(f,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e($,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:q},{default:a(()=>[e(U,{border:!1},{default:a(()=>[v("div",se,[e(n,{keypath:"register.enter_email"})]),e(g,{modelValue:s(u),"onUpdate:modelValue":o[0]||(o[0]=r=>h(u)?u.value=r:null),placeholder:t.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),v("div",oe,[e(n,{keypath:"register.pwd"})]),e(g,{modelValue:s(p),"onUpdate:modelValue":o[1]||(o[1]=r=>h(p)?p.value=r:null),type:s(i),placeholder:t.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:a(()=>[e(f,{name:s(i)==="password"?"closed-eye":"eye",size:"20",onClick:N},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),v("div",te,[e(n,{keypath:"register.enter_password_again"})]),e(g,{modelValue:s(m),"onUpdate:modelValue":o[2]||(o[2]=r=>h(m)?m.value=r:null),type:s(d),placeholder:t.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:S}]},{button:a(()=>[e(f,{name:s(d)==="password"?"closed-eye":"eye",size:"20",onClick:P},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),v("div",ae,[e(n,{keypath:"register.enter_vercode"})]),e(g,{class:"mb-6",modelValue:s(c),"onUpdate:modelValue":o[3]||(o[3]=r=>h(c)?c.value=r:null),placeholder:t.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:a(()=>[e(b,{size:"mini",type:"primary",loading:s(y),disabled:s(_),onClick:R},{default:a(()=>[s(_)?(k(),F("span",le,j(s(C).current.value.seconds)+" S",1)):(k(),Z(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(b,{block:"",type:"primary","native-type":"submit",loading:s(w)},{default:a(()=>[e(n,{keypath:"reset.reset_password"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},fe=G(re,[["__scopeId","data-v-99d34641"]]);export{fe as default};
