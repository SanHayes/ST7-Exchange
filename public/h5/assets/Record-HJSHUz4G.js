import{_ as L,v as N,ae as T,r as x,y as h,b as e,A as s,D as l,F as k,z,G as i,I as Y,H,J as d,P,R as f,Q as R}from"./index-Cn7BGcOt.js";import{L as S}from"./index-xfgXq3bM.js";import{C as V}from"./index-CSOd3mdl.js";import{S as F}from"./index-CoxKsZf5.js";import{C as G}from"./index-Cs-yTW2k.js";import{T as M}from"./index-CAgrVyQ0.js";import{N as U}from"./index-CNd8bKm9.js";import{r as q,a as A}from"./news-DR6Mwohz.js";import{h as E}from"./moment-C5S46NFB.js";import{s as J}from"./function-call-BXfx4N2j.js";import"./use-tab-status-48ZaJUwN.js";const O={class:"text-right flex justify-right align-center px-4"},Q={__name:"Record",setup(K){const{t:m}=N(),n=T({page:0,list:[],loading:!1,finished:!1,error:!1,limit:10});function b(){n.page+=1;const a={page:n.page,limit:n.limit};A(a).then(o=>{if((o==null?void 0:o.type)==="ok"){const{data:u=[],total:g,last_page:r}=o.data;n.list.push(...u),r===n.page&&(n.finished=!0)}}).catch(o=>{n.error=!0}).finally(()=>{n.loading=!1})}const _=x(null),C=a=>new Promise(async o=>{a!=="confirm"&&o(!0),await q({orderId:_.value.id}),o(!0),w()});function $(a){_.value=a,J({message:m("mining.payment")+a.wyj+m("mining.liquidated_damages"),beforeClose:C})}function w(){Object.assign(n,{page:0,loading:!1,finished:!1,error:!1,list:[]})}return(a,o)=>{const u=Y,g=U,r=z("i18n-t"),p=M,c=G,y=R,j=F,B=V,D=S;return i(),h(k,null,[e(g,{title:a.$t("tc.mine"),fixed:"",placeholder:""},{left:s(()=>[e(u,{"class-prefix":"iconfont",name:"back",onClick:o[0]||(o[0]=t=>a.$router.back())})]),_:1},8,["title"]),e(D,{class:"list ma-5",loading:l(n).loading,"onUpdate:loading":o[1]||(o[1]=t=>l(n).loading=t),finished:l(n).finished,error:l(n).error,"finished-text":a.$t("mining.no_more"),onLoad:b},{default:s(()=>[(i(!0),h(k,null,H(l(n).list,t=>(i(),d(B,{key:t.id,class:"mb-3 row",border:!1},{default:s(()=>[e(c,{title:t.project.project_name,border:!1,size:"normal"},{"right-icon":s(()=>[t.status===1?(i(),d(p,{key:0,type:"primary",plain:""},{default:s(()=>[e(r,{keypath:"mining.underway"})]),_:1})):f("",!0),t.status===2?(i(),d(p,{key:1,type:"warning"},{default:s(()=>[e(r,{keypath:"mining.applying_refund"})]),_:1})):f("",!0),t.status===3?(i(),d(p,{key:2},{default:s(()=>[e(r,{keypath:"mining.deposit"})]),_:1})):f("",!0),t.status===4?(i(),d(p,{key:3,type:"success"},{default:s(()=>[e(r,{keypath:"mining.refund_successful"})]),_:1})):f("",!0)]),_:2},1032,["title"]),e(c,{title:a.$t("tc.buyTime"),value:t.interest_gen_next_time,border:!1},null,8,["title","value"]),e(c,{title:a.$t("tc.endTime"),value:l(E)(t.end_time).format("YYYY-MM-DD HH:mm:ss"),border:!1},null,8,["title","value"]),e(c,{title:a.$t("tc.currency"),value:"USDT",border:!1},null,8,["title"]),e(c,{title:a.$t("tc.dailyProfit"),value:t.day_profit,border:!1},null,8,["title","value"]),P("div",O,[e(j,null,{default:s(()=>[e(y,{size:"small",type:"warning",disabled:t.status!==1,onClick:I=>$(t)},{default:s(()=>[e(r,{keypath:"mining.redemption_default"})]),_:2},1032,["disabled","onClick"]),e(y,{size:"small",type:"primary",onClick:I=>{var v;return a.$router.push(`/earnings/${t.id}/${(v=t.project)==null?void 0:v.project_name}`)}},{default:s(()=>[e(r,{keypath:"tc.detail"})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1},8,["loading","finished","error","finished-text"])],64)}}},le=L(Q,[["__scopeId","data-v-637ae2fb"]]);export{le as default};
