import{_ as T,v as D,r as m,bl as R,y as N,b as e,O as a,A as i,J as b,z as A,D as d,C as E,L as v,Q as G,F as z,G as p,I as H,R as J,H as K,K as O,a3 as y,bm as Q}from"./index-a_fu6Xi9.js";import{S as U}from"./index-C-DvemXl.js";import{T as j}from"./index-BsAbmYts.js";import"./index-pR4yqAnW.js";import{F as q}from"./index-C3icelMe.js";import{N as M}from"./index-RD5ECf8h.js";import"./use-id-CahSlt6t.js";const P={class:"main ma-3"},W={class:"verified text-center pa-5 mb-3"},X={class:"font-md"},Y={class:"label font-md mb-3"},Z={class:"label font-md my-2"},ee={class:"row my-3 pa-3 font-md"},ae={class:"flex space-between"},oe={class:"label"},ne={class:"value"},te={class:"flex space-between"},se={class:"label"},ie={class:"value"},le={class:"flex space-between"},ce={class:"label"},de={class:"value"},_e={class:"rule my-3 font-sm"},re={__name:"Index",setup(me){const{t:f}=D(),g=m(!0),w=m([]),_=m(""),l=m(null),k=m(!1);R().then(s=>{var n;if(s.type==="ok"){const o=((n=s.data)==null?void 0:n.data)||[];w.value=o.sort((h,t)=>h.lock_dividend_days-t.lock_dividend_days),o!=null&&o.length&&(l.value=o[0])}}).finally(()=>{g.value=!1});function B(s){l.value=s}function I(){var n;if(!_.value){y({type:"warning",message:f("mining.max_number")});return}if(_.value<Number(l.value.borrow_amount_min)){y({type:"warning",message:f("mining.lazy_weight")});return}k.value=!0;const s={id:(n=l.value)==null?void 0:n.id,amount:_.value};Q(s).then(o=>{console.log("res",o),o.type==="ok"?y({type:"success",message:o.message||f("mining.succeed")}):y({type:"warning",message:o==null?void 0:o.message})}).finally(()=>{k.value=!1})}return(s,n)=>{var x,C,$;const o=H,h=M,t=A("i18n-t"),V=J,u=G,L=q,F=j,S=U;return p(),N(z,null,[e(h,{title:s.$t("loan.loan"),fixed:"",placeholder:""},{left:i(()=>[e(o,{"class-prefix":"iconfont",name:"back",onClick:n[0]||(n[0]=c=>s.$router.back())})]),right:i(()=>[e(o,{name:"orders-o",size:"24",onClick:n[1]||(n[1]=c=>s.$router.push("/loan/record"))})]),_:1},8,["title"]),a("div",P,[a("div",W,[a("p",X,[e(t,{keypath:"loan.start_loan"})]),d(g)?(p(),b(u,{key:0,type:"primary"},{icon:i(()=>[e(V,{size:"16",color:"white"})]),default:i(()=>[e(t,{keypath:"loan.verify"})]),_:1})):(p(),b(u,{key:1,icon:"checked",type:"primary"},{default:i(()=>[e(t,{keypath:"loan.verified"})]),_:1}))]),a("div",Y,[e(t,{keypath:"loan.amount"})]),e(L,{class:"row",modelValue:d(_),"onUpdate:modelValue":n[3]||(n[3]=c=>E(_)?_.value=c:null),placeholder:s.$t("loan.input_amount")},{"right-icon":i(()=>[e(u,{type:"primary",size:"small",onClick:n[2]||(n[2]=c=>{var r;return _.value=(r=d(l))==null?void 0:r.borrow_amount_max})},{default:i(()=>[e(t,{keypath:"loan.max"})]),_:1})]),_:1},8,["modelValue","placeholder"]),a("div",Z,[e(t,{keypath:"loan.loan_time"})]),e(S,null,{default:i(()=>[(p(!0),N(z,null,K(d(w),c=>{var r;return p(),b(F,{type:"primary",size:"large",plain:c.lock_dividend_days!==((r=d(l))==null?void 0:r.lock_dividend_days),key:c.id,onClick:pe=>B(c)},{default:i(()=>[O(v(c.lock_dividend_days)+" ",1),e(t,{keypath:"loan.day"})]),_:2},1032,["plain","onClick"])}),128))]),_:1}),a("div",ee,[a("div",ae,[a("div",oe,[e(t,{keypath:"loan.day_rate"})]),a("div",ne,v((x=d(l))==null?void 0:x.borrow_lixi)+" % ",1)]),a("div",te,[a("div",se,[e(t,{keypath:"mining.maximum_subscription"})]),a("div",ie,v((C=d(l))==null?void 0:C.borrow_amount_max),1)]),a("div",le,[a("div",ce,[e(t,{keypath:"mining.minimum_subscription"})]),a("div",de,v(($=d(l))==null?void 0:$.borrow_amount_min),1)])]),e(u,{type:"primary",block:"",loading:d(k),onClick:I},{default:i(()=>[e(t,{keypath:"loan.loan_now"})]),_:1},8,["loading"]),a("div",_e,[e(t,{keypath:"loan.rule"})])])],64)}}},ge=T(re,[["__scopeId","data-v-dc77a6c3"]]);export{ge as default};
