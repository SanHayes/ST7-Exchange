import{r as t,p as U,U as q,i as D,s as h,a as s,L as R,x as l,F as E,A as H,v as L,C as w,I as A,z as o,y,E as G,H as T,aH as Z,Z as V,bu as j}from"./index-Chl5sOYf.js";import"./index-BhLj47ak.js";import{F as J}from"./index-BnSUr8up.js";import{N as K}from"./index-YJFsT3sC.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as O}from"./index-DZ89jFPU.js";import{B as Q}from"./index-DRUMjFUK.js";import"./use-route-C0CRl_Gd.js";import"./use-id-BXkr5rCl.js";import"./use-placeholder-Bru7x8Ob.js";import"./index-BoqFuH1H.js";const W={class:"main mx-3 mt-8"},X={key:1},Y={__name:"Password",setup(ee){const d=t(""),{t:C}=U(),B=H(),c=t(!1),m=t(!1),b=q({time:60*1e3,onFinish:()=>{m.value=!1}}),u=t("password"),r=t(""),i=t(""),f=t(!1),F=D(()=>!d.value||!r.value||!i.value),$=e=>e===r.value;function x(){u.value==="password"?u.value="text":u.value="password"}const p=t("password");function N(){p.value==="password"?p.value="text":p.value="password"}function P(){c.value=!0,Z({user_string:user_string.value}).then(e=>{console.log(e),V({type:"primary",message:e.message}),e.type==="ok"&&(m.value=!0,b.start())}).finally(()=>{c.value=!1})}function z(){f.value=!0,j({code:d.value,password:r.value,repassword:i.value}).then(e=>{e.type==="ok"&&(V({type:"success",message:e.message||C("deposit.completed")}),setTimeout(()=>{B.back()},300))}).finally(()=>{f.value=!1})}return(e,a)=>{const _=A,I=K,g=L("i18n-t"),k=Q,v=J,S=O;return w(),h(E,null,[s(I,{title:e.$t("mine.change_password"),fixed:"",placeholder:""},{left:l(()=>[s(_,{"class-prefix":"iconfont",name:"back",onClick:a[0]||(a[0]=n=>e.$router.back())})]),_:1},8,["title"]),R("div",W,[s(S,{"show-error":!0,"show-error-message":!1,onSubmit:z},{default:l(()=>[s(v,{class:"row",modelValue:o(d),"onUpdate:modelValue":a[1]||(a[1]=n=>y(d)?d.value=n:null),placeholder:e.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:l(()=>[s(k,{size:"mini",type:"primary",loading:o(c),disabled:o(m),onClick:P},{default:l(()=>[o(m)?(w(),h("span",X,T(o(b).current.value.seconds)+" S",1)):(w(),G(g,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),s(v,{class:"row",modelValue:o(r),"onUpdate:modelValue":a[2]||(a[2]=n=>y(r)?r.value=n:null),type:o(u),placeholder:e.$t("reset.enter_new_password"),border:!1,rules:[{required:!0}]},{button:l(()=>[s(_,{name:o(u)==="password"?"closed-eye":"eye",size:"20",onClick:x},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),s(v,{class:"row",modelValue:o(i),"onUpdate:modelValue":a[3]||(a[3]=n=>y(i)?i.value=n:null),type:o(p),placeholder:e.$t("reset.enter_new_password_again"),border:!1,rules:[{required:!0},{validator:$}]},{button:l(()=>[s(_,{name:o(p)==="password"?"closed-eye":"eye",size:"20",onClick:N},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),s(k,{block:"",type:"primary",disabled:o(F),loading:o(f),"native-type":"submit"},{default:l(()=>[s(g,{keypath:"order.modify"})]),_:1},8,["disabled","loading"])]),_:1})])],64)}}},me=M(Y,[["__scopeId","data-v-f4b55356"]]);export{me as default};
