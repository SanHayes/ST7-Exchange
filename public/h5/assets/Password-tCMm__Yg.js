import{_ as S,r as t,v as q,a3 as R,k as U,y as h,b as s,O as E,A as l,F as G,E as L,z as T,G as w,I as A,D as o,C as y,P as J,J as O,L as j,aT as H,a8 as V,bp as K}from"./index-DmIop49X.js";import"./index-B_3MZZmh.js";import{F as M}from"./index-CaMzILHU.js";import{N as Q}from"./index-CbbDvDIj.js";import{F as W}from"./index-DDfjIU7b.js";import"./use-id-lXEIs3KW.js";const X={class:"main mx-3 mt-8"},Y={key:1},Z={__name:"Password",setup(ee){const d=t(""),{t:C}=q(),F=L(),m=t(!1),c=t(!1),b=R({time:60*1e3,onFinish:()=>{c.value=!1}}),u=t("password"),n=t(""),i=t(""),f=t(!1),B=U(()=>!d.value||!n.value||!i.value),P=e=>e===n.value;function $(){u.value==="password"?u.value="text":u.value="password"}const p=t("password");function N(){p.value==="password"?p.value="text":p.value="password"}function x(){m.value=!0,H({user_string:user_string.value}).then(e=>{console.log(e),V({type:"primary",message:e.message}),e.type==="ok"&&(c.value=!0,b.start())}).finally(()=>{m.value=!1})}function z(){f.value=!0,K({code:d.value,password:n.value,repassword:i.value}).then(e=>{e.type==="ok"&&(V({type:"success",message:e.message||C("deposit.completed")}),setTimeout(()=>{F.back()},300))}).finally(()=>{f.value=!1})}return(e,a)=>{const _=A,D=Q,g=T("i18n-t"),k=J,v=M,I=W;return w(),h(G,null,[s(D,{title:e.$t("mine.change_password"),fixed:"",placeholder:""},{left:l(()=>[s(_,{"class-prefix":"iconfont",name:"back",onClick:a[0]||(a[0]=r=>e.$router.back())})]),_:1},8,["title"]),E("div",X,[s(I,{"show-error":!0,"show-error-message":!1,onSubmit:z},{default:l(()=>[s(v,{class:"row",modelValue:o(d),"onUpdate:modelValue":a[1]||(a[1]=r=>y(d)?d.value=r:null),placeholder:e.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:l(()=>[s(k,{size:"mini",type:"primary",loading:o(m),disabled:o(c),onClick:x},{default:l(()=>[o(c)?(w(),h("span",Y,j(o(b).current.value.seconds)+" S",1)):(w(),O(g,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),s(v,{class:"row",modelValue:o(n),"onUpdate:modelValue":a[2]||(a[2]=r=>y(n)?n.value=r:null),type:o(u),placeholder:e.$t("reset.enter_new_password"),border:!1,rules:[{required:!0}]},{button:l(()=>[s(_,{name:o(u)==="password"?"closed-eye":"eye",size:"20",onClick:$},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),s(v,{class:"row",modelValue:o(i),"onUpdate:modelValue":a[3]||(a[3]=r=>y(i)?i.value=r:null),type:o(p),placeholder:e.$t("reset.enter_new_password_again"),border:!1,rules:[{required:!0},{validator:P}]},{button:l(()=>[s(_,{name:o(p)==="password"?"closed-eye":"eye",size:"20",onClick:N},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),s(k,{block:"",type:"primary",disabled:o(B),loading:o(f),"native-type":"submit"},{default:l(()=>[s(g,{keypath:"order.modify"})]),_:1},8,["disabled","loading"])]),_:1})])],64)}}},re=S(Z,[["__scopeId","data-v-f4b55356"]]);export{re as default};
