import{p as L,X as I,r as N,s as y,a as e,x as o,z as p,F as h,v as z,C as r,I as R,D as V,E as d,L as A,M as f}from"./index-DotFs6hQ.js";import{L as D}from"./index-YthvjXtT.js";import{C as E}from"./index-CdgWwUic.js";import{S as F}from"./index-C0Tn6jmm.js";import{C as S}from"./index-BGvW-Xgq.js";import{T}from"./index-Djjd3pTP.js";import{N as q}from"./index-n0gQ9ulz.js";import{r as G,a as M}from"./news-CyCkuVm0.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as P}from"./index-DFHfScTq.js";import{s as U}from"./function-call-BHFvmiO2.js";import"./use-tab-status-CQMEfgWc.js";import"./index-CR8qj5FJ.js";import"./use-route-_DyoSwqD.js";import"./use-placeholder-fxdmpSj4.js";const X={class:"text-right flex justify-right align-center px-4"},H={__name:"Record",setup(J){const{t:m}=L(),a=I({page:0,list:[],loading:!1,finished:!1,error:!1,limit:10});function k(){a.page+=1;const n={page:a.page,limit:a.limit};M(n).then(i=>{if((i==null?void 0:i.type)==="ok"){const{data:c=[],total:g,last_page:s}=i.data;a.list.push(...c),s===a.page&&(a.finished=!0)}}).catch(i=>{a.error=!0}).finally(()=>{a.loading=!1})}const _=N(null),b=n=>new Promise(async i=>{n!=="confirm"&&i(!0),await G({orderId:_.value.id}),i(!0),$()});function C(n){_.value=n,U({message:m("mining.payment")+n.wyj+m("mining.liquidated_damages"),beforeClose:b})}function $(){Object.assign(a,{page:0,loading:!1,finished:!1,error:!1,list:[]})}return(n,i)=>{const c=R,g=q,s=z("i18n-t"),u=T,l=S,v=P,w=F,j=E,B=D;return r(),y(h,null,[e(g,{title:n.$t("mining.subscription_list"),fixed:"",placeholder:""},{left:o(()=>[e(c,{"class-prefix":"iconfont",name:"back",onClick:i[0]||(i[0]=t=>n.$router.back())})]),_:1},8,["title"]),e(B,{class:"list ma-5",loading:p(a).loading,"onUpdate:loading":i[1]||(i[1]=t=>p(a).loading=t),finished:p(a).finished,error:p(a).error,"finished-text":n.$t("mining.no_more"),onLoad:k},{default:o(()=>[(r(!0),y(h,null,V(p(a).list,t=>(r(),d(j,{key:t.id,class:"mb-3 row",border:!1},{default:o(()=>[e(l,{title:t.project.project_name,border:!1,size:"normal"},{"right-icon":o(()=>[t.status==="have in hand"?(r(),d(u,{key:0,type:"primary",plain:""},{default:o(()=>[e(s,{keypath:"mining.underway"})]),_:1})):f("",!0),t.status==="Apply for refund"?(r(),d(u,{key:1,type:"warning"},{default:o(()=>[e(s,{keypath:"mining.applying_refund"})]),_:1})):f("",!0),t.status==="deposit"?(r(),d(u,{key:2},{default:o(()=>[e(s,{keypath:"mining.deposit"})]),_:1})):f("",!0),t.status==="Refunded"?(r(),d(u,{key:3,type:"success"},{default:o(()=>[e(s,{keypath:"mining.refund_successful"})]),_:1})):f("",!0)]),_:2},1032,["title"]),e(l,{title:n.$t("mining.number_application"),value:t.amount,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.Application_time"),value:t.interest_gen_next_time,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.expected_nissan"),value:t.day_profit,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.projected_total_revenue"),value:t.sum_profit,border:!1},null,8,["title","value"]),A("div",X,[e(w,null,{default:o(()=>[e(v,{size:"small",type:"warning",disabled:t.status!=="have in hand",onClick:x=>C(t)},{default:o(()=>[e(s,{keypath:"mining.redemption_default"})]),_:2},1032,["disabled","onClick"]),e(v,{size:"small",type:"primary",onClick:x=>n.$router.push(`/earnings/${t.id}`)},{default:o(()=>[e(s,{keypath:"mining.view_earnings_list"})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1},8,["loading","finished","error","finished-text"])],64)}}},de=O(H,[["__scopeId","data-v-b5ff5d6c"]]);export{de as default};
