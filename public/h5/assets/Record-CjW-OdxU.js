import{_ as I,v as L,a6 as N,r as z,y,b as e,A as o,D as p,F as h,z as A,G as r,I as R,H as V,J as d,O as D,P as c,Q as F}from"./index-0ixFw3OK.js";import{L as G}from"./index-DXIAQirT.js";import{C as O}from"./index-BWfMSj2-.js";import{S as P}from"./index-C1C5DEL0.js";import{C as S}from"./index-CR2ItRj-.js";import{T}from"./index-Bs5IzW5P.js";import{N as q}from"./index-Rsdy_2dq.js";import{r as E,a as H}from"./news-DAU0Hu1h.js";import{s as J}from"./function-call-DR6ZRas_.js";import"./use-tab-status-Bi9PMuoh.js";const Q={class:"text-right flex justify-right align-center px-4"},U={__name:"Record",setup(K){const{t:_}=L(),a=N({page:0,list:[],loading:!1,finished:!1,error:!1,limit:10});function k(){a.page+=1;const n={page:a.page,limit:a.limit};H(n).then(i=>{if((i==null?void 0:i.type)==="ok"){const{data:f=[],total:g,last_page:s}=i.data;a.list.push(...f),s===a.page&&(a.finished=!0)}}).catch(i=>{a.error=!0}).finally(()=>{a.loading=!1})}const m=z(null),b=n=>new Promise(async i=>{n!=="confirm"&&i(!0),await E({orderId:m.value.id}),i(!0),$()});function C(n){m.value=n,J({message:_("mining.payment")+n.wyj+_("mining.liquidated_damages"),beforeClose:b})}function $(){Object.assign(a,{page:0,loading:!1,finished:!1,error:!1,list:[]})}return(n,i)=>{const f=R,g=q,s=A("i18n-t"),u=T,l=S,v=F,w=P,j=O,B=G;return r(),y(h,null,[e(g,{title:n.$t("mining.subscription_list"),fixed:"",placeholder:""},{left:o(()=>[e(f,{"class-prefix":"iconfont",name:"back",onClick:i[0]||(i[0]=t=>n.$router.back())})]),_:1},8,["title"]),e(B,{class:"list ma-5",loading:p(a).loading,"onUpdate:loading":i[1]||(i[1]=t=>p(a).loading=t),finished:p(a).finished,error:p(a).error,"finished-text":n.$t("mining.no_more"),onLoad:k},{default:o(()=>[(r(!0),y(h,null,V(p(a).list,t=>(r(),d(j,{key:t.id,class:"mb-3 row",border:!1},{default:o(()=>[e(l,{title:t.project.project_name,border:!1,size:"normal"},{"right-icon":o(()=>[t.status==="have in hand"?(r(),d(u,{key:0,type:"primary",plain:""},{default:o(()=>[e(s,{keypath:"mining.underway"})]),_:1})):c("",!0),t.status==="Apply for refund"?(r(),d(u,{key:1,type:"warning"},{default:o(()=>[e(s,{keypath:"mining.applying_refund"})]),_:1})):c("",!0),t.status==="deposit"?(r(),d(u,{key:2},{default:o(()=>[e(s,{keypath:"mining.deposit"})]),_:1})):c("",!0),t.status==="Refunded"?(r(),d(u,{key:3,type:"success"},{default:o(()=>[e(s,{keypath:"mining.refund_successful"})]),_:1})):c("",!0)]),_:2},1032,["title"]),e(l,{title:n.$t("mining.number_application"),value:t.amount,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.Application_time"),value:t.interest_gen_next_time,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.expected_nissan"),value:t.day_profit,border:!1},null,8,["title","value"]),e(l,{title:n.$t("mining.projected_total_revenue"),value:t.sum_profit,border:!1},null,8,["title","value"]),D("div",Q,[e(w,null,{default:o(()=>[e(v,{size:"small",type:"warning",disabled:t.status!=="have in hand",onClick:x=>C(t)},{default:o(()=>[e(s,{keypath:"mining.redemption_default"})]),_:2},1032,["disabled","onClick"]),e(v,{size:"small",type:"primary",onClick:x=>n.$router.push(`/earnings/${t.id}`)},{default:o(()=>[e(s,{keypath:"mining.view_earnings_list"})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1},8,["loading","finished","error","finished-text"])],64)}}},oe=I(U,[["__scopeId","data-v-b5ff5d6c"]]);export{oe as default};
