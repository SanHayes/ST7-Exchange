import{_ as D,N as M,v as S,r as _,k as G,s as H,y as h,b as e,A as c,D as n,S as R,M as o,I as T,L as g,z as U,Q as E,C as x,ac as Q,F as q,G as k,ai as p}from"./index-Utr_697-.js";import{C as J}from"./index-CPZ-78UI.js";import{C as K}from"./index-PvkBJVyW.js";import{F as O}from"./index-Dv9sCOur.js";import{N as W}from"./index-DhRCR3RW.js";import{g as X,b as Y}from"./news-7BE9nVtj.js";import{s as Z}from"./function-call-B896GD_D.js";import"./use-id-lEQi9dah.js";const ee={key:0,class:"text-center ma-6"},te={key:1,class:"main ma-5"},ne={class:"row my-3 pa-5"},ae={class:"flex space-between align-center"},oe={class:"p-name bold flex align-center"},se={class:"flex space-between ma-3"},le={class:"text-center"},ie={class:"value"},ce={class:"font-sm"},ue={class:"text-center"},re={class:"value"},me={class:"font-sm"},de={class:"my-3"},_e=["innerHTML"],pe={__name:"Apply",setup(ve){const v=M(),b=H(),{t:u}=S(),f=_(!1),a=_(null),s=_(null),N=G(()=>{var t;return s.value&&(((t=a.value)==null?void 0:t.project_lixi)*s.value/100).toFixed(2)||0}),r=_(!1);F(),v.userInfo();function F(){f.value=!0,X(b.params.id).then(t=>{t.type==="ok"&&(console.log(t),a.value=t.data||{})}).finally(()=>{f.value=!1})}function I(){var t;if(!s.value){p({type:"warning",message:u("mining.max_number")});return}if(s.value<Number(a.value.project_amount_min)){p({type:"warning",message:u("mining.lazy_weight")});return}if(s.value>Number(a.value.project_amount_max)){p({type:"warning",message:u("tc.overstep")});return}if(s.value>((t=v.user)==null?void 0:t.usdt)){Z({message:u("tc.lack")}).then(()=>{router.push("/mine/charge")}).catch(()=>{});return}r.value=!0}const y=_(!1);function A(){y.value=!0;const t={id:b.params.id,amount:s.value};Y(t).then(l=>{l.type==="ok"&&p({type:"success",message:u("mining.succeed")})}).finally(()=>{y.value=!1,r.value=!1})}return(t,l)=>{const w=T,B=W,L=R,m=U("i18n-t"),i=K,V=O,C=J,j=E,z=Q;return k(),h(q,null,[e(B,{title:t.$t("tc.investor"),fixed:"",placeholder:""},{left:c(()=>[e(w,{"class-prefix":"iconfont",name:"back",onClick:l[0]||(l[0]=d=>t.$router.back())})]),_:1},8,["title"]),n(f)?(k(),h("div",ee,[e(L,{size:"24"})])):(k(),h("div",te,[o("div",ne,[o("div",ae,[o("div",oe,[e(w,{name:n(a).project_img,size:"30"},null,8,["name"]),o("span",null,g(n(a).project_name),1)])]),o("div",se,[o("div",le,[o("div",ie,g(n(a).project_lixi)+"%",1),o("div",ce,[e(m,{keypath:"tc.dailyProfit"})])]),o("div",ue,[o("div",re,g(n(a).lock_dividend_days),1),o("div",me,[e(m,{keypath:"tc.days"})])])])]),e(C,null,{default:c(()=>{var d,$;return[e(i,{title:t.$t("tc.return"),value:n(a).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.min"),value:n(a).project_amount_min},null,8,["title","value"]),e(i,{title:t.$t("tc.max"),value:n(a).project_amount_max},null,8,["title","value"]),e(i,{title:t.$t("trade.balance"),value:($=(d=n(v).user)==null?void 0:d.usdt)==null?void 0:$.toFixed(3)},null,8,["title","value"]),e(V,{modelValue:n(s),"onUpdate:modelValue":l[1]||(l[1]=P=>x(s)?s.value=P:null),placeholder:t.$t("tc.enterAmount")},null,8,["modelValue","placeholder"])]}),_:1}),e(j,{block:"",type:"primary",class:"mt-3",onClick:I},{default:c(()=>[e(m,{keypath:"tc.investor"})]),_:1}),o("div",de,[e(m,{keypath:"tc.notes"})]),o("div",{innerHTML:n(a).project_desc,class:"font-md"},null,8,_e),e(z,{show:n(r),"onUpdate:show":l[2]||(l[2]=d=>x(r)?r.value=d:null),position:"bottom","safe-area-inset-bottom":!0},{default:c(()=>[e(C,{title:n(a).project_name},{default:c(()=>[e(i,{title:t.$t("tc.days"),value:n(a).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.dailyProfit"),value:n(N)},null,8,["title","value"]),e(i,{title:t.$t("tc.buyAmount"),value:n(s)},null,8,["title","value"]),e(i,null,{default:c(()=>[e(j,{block:"",type:"primary",class:"mt-3",loading:n(y),onClick:A},{default:c(()=>[e(m,{keypath:"tc.investor"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},je=D(pe,[["__scopeId","data-v-5592fceb"]]);export{je as default};
