import{a1 as f,y as m,b as s,A as p,D as a,F as d,G as g,I as u,bk as _}from"./index-B6y_dhsN.js";import{L as h}from"./index-ChF4_BEP.js";import{N as k}from"./index-D615yVX5.js";import"./use-tab-status-D2yeI2Ye.js";const $={__name:"Notice",setup(v){const n=f({page:0,list:[],loading:!1,finished:!1,error:!1,limit:10});function l(){n.page+=1;const t={page:n.page,limit:n.limit};_(t).then(e=>{if((e==null?void 0:e.type)==="ok"){const{data:o=[],last_page:i}=e.data;console.log("notice",e),n.list.push(...o),i===n.page&&(n.finished=!0)}}).catch(e=>{n.error=!0}).finally(()=>{n.loading=!1})}return(t,e)=>{const o=u,i=k,c=h;return g(),m(d,null,[s(i,{title:t.$t("mine.announcement"),fixed:"",placeholder:""},{left:p(()=>[s(o,{"class-prefix":"iconfont",name:"back",onClick:e[0]||(e[0]=r=>t.$router.back())})]),_:1},8,["title"]),s(c,{class:"",loading:a(n).loading,"onUpdate:loading":e[1]||(e[1]=r=>a(n).loading=r),finished:a(n).finished,error:a(n).error,"finished-text":t.$t("mining.no_more"),onLoad:l},null,8,["loading","finished","error","finished-text"])],64)}}};export{$ as default};
