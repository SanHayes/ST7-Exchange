import{_ as z,v as A,r,k as P,s as D,y as f,b as e,A as u,D as t,S as G,P as i,I as H,L as g,z as M,Q as R,C as x,aa as S,F as T,G as y,a9 as h}from"./index-DbTlp3SP.js";import{C as U}from"./index-B62dnESp.js";import{C as E}from"./index-BHvnwRqI.js";import{F as Q}from"./index-BcxPB8UG.js";import{N as q}from"./index-HiN-1LuV.js";import{g as J,b as K}from"./news-5uPHV091.js";import"./use-id-C5pIMbTR.js";const O={key:0,class:"text-center ma-6"},W={key:1,class:"main ma-5"},X={class:"row my-3 pa-5"},Y={class:"flex space-between align-center"},Z={class:"p-name bold flex align-center"},ee={class:"flex space-between ma-3"},ne={class:"text-center"},te={class:"value"},ae={class:"font-sm"},ie={class:"text-center"},le={class:"value"},oe={class:"font-sm"},se={class:"my-3"},ue=["innerHTML"],ce={__name:"Apply",setup(me){const b=D(),{t:p}=A(),d=r(!1),a=r(null),l=r(null),k=P(()=>{var n;return l.value&&(((n=a.value)==null?void 0:n.project_lixi)*l.value/100).toFixed(2)||0}),c=r(!1);C();function C(){d.value=!0,J(b.params.id).then(n=>{n.type==="ok"&&(console.log(n),a.value=n.data||{})}).finally(()=>{d.value=!1})}function F(){if(!l.value){h({type:"warning",message:p("mining.max_number")});return}if(l.value<Number(a.value.project_amount_min)){h({type:"warning",message:p("mining.lazy_weight")});return}c.value=!0}const v=r(!1);function N(){v.value=!0;const n={id:b.params.id,amount:l.value};K(n).then(s=>{s.type==="ok"&&h({type:"success",message:p("mining.succeed")})}).finally(()=>{v.value=!1,c.value=!1})}return(n,s)=>{const j=H,B=q,I=G,m=M("i18n-t"),o=E,L=Q,w=U,$=R,V=S;return y(),f(T,null,[e(B,{title:n.$t("mining.subscription"),fixed:"",placeholder:""},{left:u(()=>[e(j,{"class-prefix":"iconfont",name:"back",onClick:s[0]||(s[0]=_=>n.$router.back())})]),_:1},8,["title"]),t(d)?(y(),f("div",O,[e(I,{size:"24"})])):(y(),f("div",W,[i("div",X,[i("div",Y,[i("div",Z,[e(j,{name:t(a).project_img,size:"30"},null,8,["name"]),i("span",null,g(t(a).project_name),1)])]),i("div",ee,[i("div",ne,[i("div",te,g(t(a).project_lixi)+"%",1),i("div",ae,[e(m,{keypath:"mining.expected_nissan"})])]),i("div",ie,[i("div",le,g(t(a).project_amount),1),i("div",oe,[e(m,{keypath:"mining.mining_machine_rental"})])])])]),e(w,null,{default:u(()=>[e(o,{title:n.$t("mining.mining_life"),value:t(a).lock_dividend_days},null,8,["title","value"]),e(o,{title:n.$t("mining.maximum_subscription"),value:t(a).project_amount_max},null,8,["title","value"]),e(o,{title:n.$t("mining.minimum_subscription"),value:t(a).project_amount_min},null,8,["title","value"]),e(L,{modelValue:t(l),"onUpdate:modelValue":s[1]||(s[1]=_=>x(l)?l.value=_:null),placeholder:n.$t("mining.max_number")},null,8,["modelValue","placeholder"])]),_:1}),e($,{block:"",type:"primary",class:"mt-3",onClick:F},{default:u(()=>[e(m,{keypath:"mining.subscribe"})]),_:1}),i("div",se,[e(m,{keypath:"mining.product_presentation"})]),i("div",{innerHTML:t(a).project_desc,class:"font-md"},null,8,ue),e(V,{show:t(c),"onUpdate:show":s[2]||(s[2]=_=>x(c)?c.value=_:null),position:"bottom","safe-area-inset-bottom":!0},{default:u(()=>[e(w,{title:t(a).project_name},{default:u(()=>[e(o,{title:n.$t("mining.mining_machine_rental"),value:t(a).project_amount},null,8,["title","value"]),e(o,{title:n.$t("mining.mining_life"),value:t(a).lock_dividend_days},null,8,["title","value"]),e(o,{title:n.$t("mining.expected_nissan"),value:t(k)},null,8,["title","value"]),e(o,{title:n.$t("mining.projected_total_revenue"),value:(t(k)*t(a).lock_dividend_days).toFixed(2)},null,8,["title","value"]),e(o,{title:n.$t("mining.number_application"),value:t(l)},null,8,["title","value"]),e(o,null,{default:u(()=>[e($,{block:"",type:"primary",class:"mt-3",loading:t(v),onClick:N},{default:u(()=>[e(m,{keypath:"mining.subscribe"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},ye=z(ce,[["__scopeId","data-v-4556abe0"]]);export{ye as default};
