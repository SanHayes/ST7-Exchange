import{_ as L,M,v as A,r as l,a4 as J,N as Q,s as T,y as F,b as e,A as r,D as s,F as j,E as H,z as K,G as V,Q as O,I as W,P as _,C as g,J as X,L as Y,aU as Z,a9 as $,aV as ee}from"./index-_TYWltFa.js";import{C as te}from"./index-BXdRs1kM.js";import"./index-Bqt59G08.js";import{F as oe}from"./index-Cg53vqg9.js";import{N as se}from"./index-BUB-Wu0h.js";import{F as ae}from"./index-drqdmrOt.js";import"./use-id-DPZACrbK.js";const le={class:"label highlight-txt mb-2 mt-4"},re={class:"label highlight-txt mt-6 mb-2"},ne={class:"label highlight-txt mt-6 mb-2"},ie={class:"label highlight-txt mt-6 mb-2"},ue={class:"label highlight-txt mt-6 mb-2"},de={key:1},pe={__name:"Register",setup(me){const q=M();A();const C=H(),N=T(),i=l("password");function R(){i.value==="password"?i.value="text":i.value="password"}const u=l("password");function U(){u.value==="password"?u.value="text":u.value="password"}const d=l(""),p=l(""),f=l(""),v=l(""),m=l(""),b=l(!1),h=l(!1),x=J({time:60*1e3,onFinish:()=>{h.value=!1}});function z(){b.value=!0,Z({user_string:d.value}).then(t=>{console.log(t),$({type:"primary",message:t.message}),t.type==="ok"&&(h.value=!0,x.start())}).finally(()=>{b.value=!1})}const S=t=>t===p.value,w=l(!1);function D(t){w.value=!0,ee({user_string:d.value,password:p.value,re_password:f.value,code:v.value,type:"email",extension_code:m.value}).then(o=>{console.log(o),o.type==="ok"&&($({type:"primary",message:o.message}),setTimeout(()=>{C.push("/login")},500))}).finally(()=>{w.value=!1})}function I(){C.go(-1)}return Q(()=>{const t=N.query;t&&(m.value=t.inviteCode)}),(t,o)=>{var B;const y=W,k=O,G=se,n=K("i18n-t"),c=oe,P=te,E=ae;return V(),F(j,null,[e(G,{title:(B=s(q).siteConfig)==null?void 0:B.site_name},{left:r(()=>[e(y,{"class-prefix":"iconfont",name:"back",onClick:I})]),right:r(()=>[e(k,{size:"small",onClick:o[0]||(o[0]=a=>t.$router.push("/lang"))},{default:r(()=>[e(y,{"class-prefix":"iconfont",name:"language_full"})]),_:1})]),_:1},8,["title"]),e(E,{class:"form font-md","show-error":!0,"show-error-message":!1,onSubmit:D},{default:r(()=>[e(P,{border:!1},{default:r(()=>[_("div",le,[e(n,{keypath:"register.enter_email"})]),e(c,{modelValue:s(d),"onUpdate:modelValue":o[1]||(o[1]=a=>g(d)?d.value=a:null),placeholder:t.$t("register.enter_email"),border:!1,rules:[{required:!0}]},null,8,["modelValue","placeholder"]),_("div",re,[e(n,{keypath:"register.pwd"})]),e(c,{modelValue:s(p),"onUpdate:modelValue":o[2]||(o[2]=a=>g(p)?p.value=a:null),type:s(i),placeholder:t.$t("register.enter_password"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(y,{name:s(i)==="password"?"closed-eye":"eye",size:"20",onClick:R},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"]),_("div",ne,[e(n,{keypath:"register.enter_password_again"})]),e(c,{modelValue:s(f),"onUpdate:modelValue":o[3]||(o[3]=a=>g(f)?f.value=a:null),type:s(u),placeholder:t.$t("register.enter_password_again"),border:!1,rules:[{required:!0},{validator:S}]},{button:r(()=>[e(y,{name:s(u)==="password"?"closed-eye":"eye",size:"20",onClick:U},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","rules"]),_("div",ie,[e(n,{keypath:"invite.invitation_code"})]),e(c,{modelValue:s(m),"onUpdate:modelValue":o[4]||(o[4]=a=>g(m)?m.value=a:null),placeholder:t.$t("register.enter_invite_code"),border:!1},null,8,["modelValue","placeholder"]),_("div",ue,[e(n,{keypath:"register.enter_vercode"})]),e(c,{class:"mb-6",modelValue:s(v),"onUpdate:modelValue":o[5]||(o[5]=a=>g(v)?v.value=a:null),placeholder:t.$t("register.enter_vercode"),border:!1,rules:[{required:!0}]},{button:r(()=>[e(k,{size:"mini",type:"primary",loading:s(b),disabled:s(h),onClick:z},{default:r(()=>[s(h)?(V(),F("span",de,Y(s(x).current.value.seconds)+" S",1)):(V(),X(n,{key:0,keypath:"register.get_ver_code"}))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","placeholder"]),e(k,{block:"",type:"primary","native-type":"submit",loading:s(w)},{default:r(()=>[e(n,{keypath:"register.register"})]),_:1},8,["loading"])]),_:1})]),_:1})],64)}}},be=L(pe,[["__scopeId","data-v-278c2bc4"]]);export{be as default};
