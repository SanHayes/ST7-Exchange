import{X as F,i as v,N as L,a$ as U,P as R,O as j,s as x,a,L as s,x as c,z as l,I as D,v as I,_ as q,H as z,F as E,C as M,b0 as O,b1 as Q,Z as y}from"./index-DotFs6hQ.js";import"./index-CYJzgihW.js";/* empty css              */import{U as T}from"./index-D4wHe91h.js";/* empty css              */import{P as Z}from"./index-D-_dDmgc.js";import{C as G}from"./index-BGvW-Xgq.js";import{F as H}from"./index-CPIY3Ody.js";import{C as J}from"./index-CdgWwUic.js";import{N as S}from"./index-n0gQ9ulz.js";import{Q as X}from"./browser-DT0BrSGx.js";import{c as A}from"./utils-BNJ9K5xU.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as W}from"./index-DFHfScTq.js";import"./index-CkMyTJnu.js";import"./index-CR8qj5FJ.js";import"./use-route-_DyoSwqD.js";import"./use-id-DPiuflnV.js";import"./use-placeholder-fxdmpSj4.js";import"./_commonjsHelpers-C932wzq6.js";const Y="/h5/assets/confirm-loan-CMZaJElv.png",ee={class:"main ma-3"},te={class:"top mt-4 text-center"},oe={class:"font-md tips"},ae={class:"label font-md"},ne={class:"flex qr-code justify-center"},le={class:"code"},se={class:"row"},re={class:"text-center mb-3"},ie={class:"label font-md"},me={class:"flex align-center justify-center my-3"},ce={class:"my-5"},de={__name:"Payment",setup(pe){const e=F({currency:"",pickerValue:[],columns:[],show:!1,loading:!1,fileList:[],filePath:""}),d=v(()=>e.columns.find(t=>t.agreement===e.currency)),h=({selectedValues:t,selectedOptions:o})=>{var n;e.currency=(n=o[0])==null?void 0:n.agreement,e.pickerValue=t,e.show=!1};L(()=>{U().then(t=>{if(t.type==="ok"){const o=t.data||[];e.columns=o;const n=o[0];n&&(e.currency=n.agreement,e.pickerValue=[n])}})});const b={text:"agreement",value:"id"},p=R("canvas");j(d,t=>{t&&X.toCanvas(p.value,t.payment_address,{width:240,height:240})});function g(t){console.log(t.file),t.status="uploading";const o=new FormData;o.append("file",t.file),o.append("type",0),O(o).then(n=>{t.status="done",e.filePath=n.file_path}).catch(n=>{t.status="error"})}const k=v(()=>!e.currency||!e.filePath);function w(){var o;const t={currency:(o=d.value)==null?void 0:o.id,account:e.filePath,amount:e.cnumbers};e.loading=!0,Q(t).then(n=>{n.type==="ok"?(y({type:"success",message:n.message}),setTimeout(()=>{e.cnumbers=null,e.filePath="",e.fileList=[]},200)):y({type:"danger",message:n.message})}).finally(()=>{e.loading=!1})}return(t,o)=>{var f;const n=D,C=S,m=I("i18n-t"),i=G,$=J,V=H,P=Z,N=q,u=W,B=T;return M(),x(E,null,[a(C,{title:t.$t("loan.loan"),fixed:"",placeholder:""},{left:c(()=>[a(n,{"class-prefix":"iconfont",name:"back",onClick:o[0]||(o[0]=r=>t.$router.back())})]),_:1},8,["title"]),s("div",ee,[s("div",te,[a(n,{name:l(Y),size:"60"},null,8,["name"]),s("div",null,[a(m,{keypath:"loan.confirm_repayment"})]),s("div",oe,[a(m,{keypath:"loan.confirm_repay_tip"})])]),a($,{class:"my-3 row",border:!1},{default:c(()=>[a(i,{title:t.$t("loan.amount"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.loan_time"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.total_profit"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.day_rate"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.need_repay"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.penalty_amount"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.reviewed_at"),value:1,border:!1},null,8,["title"]),a(i,{title:t.$t("loan.repayment_time"),value:1,border:!1},null,8,["title"])]),_:1}),s("div",ae,[a(m,{keypath:"deposit.digital_currency"})]),a(V,{class:"row",modelValue:l(e).currency,"onUpdate:modelValue":o[1]||(o[1]=r=>l(e).currency=r),"is-link":"",readonly:"",name:"picker",placeholder:"",border:!1,onClick:o[2]||(o[2]=r=>l(e).show=!0)},null,8,["modelValue"]),a(N,{show:l(e).show,"onUpdate:show":o[4]||(o[4]=r=>l(e).show=r),"destroy-on-close":"",position:"bottom"},{default:c(()=>[a(P,{columns:l(e).columns,"columns-field-names":b,"model-value":l(e).pickerValue,onConfirm:h,onCancel:o[3]||(o[3]=r=>l(e).show=!1)},null,8,["columns","model-value"])]),_:1},8,["show"]),s("div",ne,[s("div",le,[s("canvas",{ref_key:"canvas",ref:p},null,512)])]),s("div",se,z((f=l(d))==null?void 0:f.payment_address),1),s("div",re,[a(u,{type:"primary",onClick:o[5]||(o[5]=r=>{var _;return l(A)((_=l(d))==null?void 0:_.payment_address)})},{default:c(()=>[a(m,{keypath:"deposit.copy"})]),_:1})]),s("div",ie,[a(m,{keypath:"deposit.payment_voucher"})]),s("div",me,[a(B,{accept:"image/*",multiple:!1,"max-count":1,modelValue:l(e).fileList,"onUpdate:modelValue":o[6]||(o[6]=r=>l(e).fileList=r),"after-read":g},null,8,["modelValue"])]),s("div",ce,[a(u,{type:"primary",block:"",loading:l(e).loading,disabled:l(k),onClick:w},{default:c(()=>[a(m,{keypath:"loan.confirm_repayment"})]),_:1},8,["loading","disabled"])])])],64)}}},je=K(de,[["__scopeId","data-v-d25e2019"]]);export{je as default};
