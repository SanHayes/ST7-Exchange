import{_ as M,N as R,v as S,r as _,k as T,s as E,y as h,b as e,A as c,D as a,S as G,M as o,I as H,L as g,z as U,Q,C as N,ac as q,F as J,E as K,G as k,ai as p}from"./index-DdXfmoUO.js";import{C as O}from"./index-WuuT-FeN.js";import{C as W}from"./index-CEYVb9uv.js";import{F as X}from"./index-B-AeEoX-.js";import{N as Y}from"./index-D1pXX4fG.js";import{g as Z,b as ee}from"./news-CP9hf_pR.js";import{s as te}from"./function-call-BYLo52FO.js";import"./use-id-CyRpw6o5.js";const ae={key:0,class:"text-center ma-6"},ne={key:1,class:"main ma-5"},oe={class:"row my-3 pa-5"},se={class:"flex space-between align-center"},le={class:"p-name bold flex align-center"},ie={class:"flex space-between ma-3"},ce={class:"text-center"},ue={class:"value"},re={class:"font-sm"},me={class:"text-center"},de={class:"value"},_e={class:"font-sm"},pe={class:"my-3"},ve=["innerHTML"],fe={__name:"Apply",setup(ye){const v=R(),b=E(),w=K(),{t:u}=S(),f=_(!1),n=_(null),s=_(null),F=T(()=>{var t;return s.value&&(((t=n.value)==null?void 0:t.project_lixi)*s.value/100).toFixed(2)||0}),r=_(!1);I(),v.userInfo();function I(){f.value=!0,Z(b.params.id).then(t=>{t.type==="ok"&&(console.log(t),n.value=t.data||{})}).finally(()=>{f.value=!1})}function A(){var t;if(!s.value){p({type:"warning",message:u("mining.max_number")});return}if(s.value<Number(n.value.project_amount_min)){p({type:"warning",message:u("mining.lazy_weight")});return}if(s.value>Number(n.value.project_amount_max)){p({type:"warning",message:u("tc.overstep")});return}if(s.value>((t=v.user)==null?void 0:t.usdt)){te({message:u("tc.lack")}).then(()=>{w.push("/mine/charge")}).catch(()=>{});return}r.value=!0}const y=_(!1);function B(){y.value=!0;const t={id:b.params.id,amount:s.value};ee(t).then(l=>{l.type==="ok"&&(p({type:"success",message:u("mining.succeed")}),setTimeout(()=>{w.back()},1e3))}).finally(()=>{y.value=!1,r.value=!1})}return(t,l)=>{const C=H,L=Y,V=G,m=U("i18n-t"),i=W,z=X,j=O,$=Q,P=q;return k(),h(J,null,[e(L,{title:t.$t("tc.investor"),fixed:"",placeholder:""},{left:c(()=>[e(C,{"class-prefix":"iconfont",name:"back",onClick:l[0]||(l[0]=d=>t.$router.back())})]),_:1},8,["title"]),a(f)?(k(),h("div",ae,[e(V,{size:"24"})])):(k(),h("div",ne,[o("div",oe,[o("div",se,[o("div",le,[e(C,{name:a(n).project_img,size:"30"},null,8,["name"]),o("span",null,g(a(n).project_name),1)])]),o("div",ie,[o("div",ce,[o("div",ue,g(a(n).project_lixi)+"%",1),o("div",re,[e(m,{keypath:"tc.dailyProfit"})])]),o("div",me,[o("div",de,g(a(n).lock_dividend_days),1),o("div",_e,[e(m,{keypath:"tc.days"})])])])]),e(j,null,{default:c(()=>{var d,x;return[e(i,{title:t.$t("tc.return"),value:a(n).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.min"),value:a(n).project_amount_min},null,8,["title","value"]),e(i,{title:t.$t("tc.max"),value:a(n).project_amount_max},null,8,["title","value"]),e(i,{title:t.$t("trade.balance"),value:(x=(d=a(v).user)==null?void 0:d.usdt)==null?void 0:x.toFixed(3)},null,8,["title","value"]),e(z,{modelValue:a(s),"onUpdate:modelValue":l[1]||(l[1]=D=>N(s)?s.value=D:null),placeholder:t.$t("tc.enterAmount")},null,8,["modelValue","placeholder"])]}),_:1}),e($,{block:"",type:"primary",class:"mt-3",onClick:A},{default:c(()=>[e(m,{keypath:"tc.investor"})]),_:1}),o("div",pe,[e(m,{keypath:"tc.notes"})]),o("div",{innerHTML:a(n).project_desc,class:"font-md"},null,8,ve),e(P,{show:a(r),"onUpdate:show":l[2]||(l[2]=d=>N(r)?r.value=d:null),position:"bottom","safe-area-inset-bottom":!0},{default:c(()=>[e(j,{title:a(n).project_name},{default:c(()=>[e(i,{title:t.$t("tc.days"),value:a(n).lock_dividend_days},null,8,["title","value"]),e(i,{title:t.$t("tc.dailyProfit"),value:a(F)},null,8,["title","value"]),e(i,{title:t.$t("tc.buyAmount"),value:a(s)},null,8,["title","value"]),e(i,null,{default:c(()=>[e($,{block:"",type:"primary",class:"mt-3",loading:a(y),onClick:B},{default:c(()=>[e(m,{keypath:"tc.investor"})]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]))],64)}}},xe=M(fe,[["__scopeId","data-v-acd3486c"]]);export{xe as default};
