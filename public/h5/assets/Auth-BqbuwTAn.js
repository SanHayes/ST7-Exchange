import{X as M,K as q,bp as G,i as K,s as d,a as o,x as p,z as n,F as u,L as l,v as R,E as $,C as r,I as X,M as P,b2 as U,bq as Z,Z as z}from"./index-C7glgVMJ.js";import{C as j}from"./index-D17H275x.js";import{C as H}from"./index-CCE9-dNp.js";import{I as J}from"./index-RXgUNEZp.js";/* empty css              */import{U as O}from"./index-YR-UtePE.js";import{F as Q}from"./index-Ck8PWbsX.js";import{N as T}from"./index-RB0KY4Iw.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as Y}from"./index-BsuD2U6L.js";import{B as ee}from"./index-DGKYMm1Q.js";import"./use-route-CYJMck8x.js";import"./index-Cn_80Dps.js";import"./use-id-2OeZF1aH.js";import"./use-placeholder-DOMsP5qW.js";const ae="/h5/assets/id-front-B29VUS8_.png",te="/h5/assets/id-background-BvafEgth.png",oe={key:0,class:"text-center"},ne={key:1,class:"main pa-3"},se={class:"label font-md"},le={class:"label font-md"},re={class:"row"},ie={key:0,class:"front"},de={class:"btn"},ce={class:"font-sm tips"},pe={class:"row"},me={key:0,class:"front"},_e={class:"btn"},ue={class:"font-sm tips"},fe={class:"text-center"},he={class:"row"},ve={class:"row"},ke={__name:"Auth",setup(be){const e=M({name:"",card:"",frontFileList:[],frontFilePath:"",backFileList:[],backFilePath:"",loading:!1,pageLoading:!1,info:null});q(()=>{f()});function f(){e.pageLoading=!0,G().then(t=>{t.type==="ok"&&(e.info=t.data)}).finally(()=>{e.pageLoading=!1})}function I(t){t.status="uploading";const a=new FormData;a.append("file",t.file),a.append("type",0),U(a).then(c=>{t.status="done",e.frontFilePath=c.file_path}).catch(()=>{t.status="error"})}function N(t){t.status="uploading";const a=new FormData;a.append("file",t.file),a.append("type",0),U(a).then(c=>{t.status="done",e.backFilePath=c.file_path}).catch(()=>{t.status="error"})}const D=K(()=>!e.name||!e.card||!e.frontFilePath||!e.backFilePath);function x(){const t={id_type:0,name:e.name,card_id:e.card,real_type:1,front_pic:e.frontFilePath,reverse_pic:e.backFilePath};e.loading=!0,Z(t).then(a=>{(a==null?void 0:a.type)==="ok"?(z({type:"success",message:a.message}),e.loading=!1,f()):z({type:"error",message:a.message})}).finally(()=>{e.loading=!0})}return(t,a)=>{var b,g,y,F,V,L;const c=X,E=T,S=Y,i=R("i18n-t"),h=Q,m=J,_=ee,v=O,k=H,A=j;return r(),d(u,null,[o(E,{title:t.$t("real.real_name_auth"),fixed:"",placeholder:""},{left:p(()=>[o(c,{"class-prefix":"iconfont",name:"back",onClick:a[0]||(a[0]=s=>t.$router.back())})]),_:1},8,["title"]),n(e).pageLoading?(r(),d("div",oe,[o(S,{size:"24"})])):(r(),d("div",ne,[((b=n(e).info)==null?void 0:b.real_status)===0?(r(),d(u,{key:0},[l("div",se,[o(i,{keypath:"real.improve_information"})]),o(h,{class:"row",label:t.$t("real.name"),modelValue:n(e).name,"onUpdate:modelValue":a[1]||(a[1]=s=>n(e).name=s),placeholder:t.$t("real.enter_name")},null,8,["label","modelValue","placeholder"]),o(h,{class:"row",modelValue:n(e).card,"onUpdate:modelValue":a[2]||(a[2]=s=>n(e).card=s),label:t.$t("real.passport_idnumber"),placeholder:t.$t("real.enter_passport_idnumber")},null,8,["modelValue","label","placeholder"]),l("div",le,[o(i,{keypath:"real.upload_the_front_and_back"})]),l("div",re,[o(v,{modelValue:n(e).frontFileList,"onUpdate:modelValue":a[3]||(a[3]=s=>n(e).frontFileList=s),"max-count":1,"preview-size":["auto","20vh"],"after-read":I},{default:p(()=>[n(e).frontFileList.length?P("",!0):(r(),d("div",ie,[o(m,{src:n(ae)},null,8,["src"]),l("div",de,[o(_,{icon:"plus",round:"",type:"primary",size:"small"})]),l("p",ce,[o(i,{keypath:"real.front"})])]))]),_:1},8,["modelValue"])]),l("div",pe,[o(v,{modelValue:n(e).backFileList,"onUpdate:modelValue":a[4]||(a[4]=s=>n(e).backFileList=s),"max-count":1,"preview-size":["auto","20vh"],"after-read":N},{default:p(()=>[n(e).backFileList.length?P("",!0):(r(),d("div",me,[o(m,{src:n(te)},null,8,["src"]),l("div",_e,[o(_,{icon:"plus",round:"",type:"primary",size:"small"})]),l("p",ue,[o(i,{keypath:"real.back"})])]))]),_:1},8,["modelValue"])]),o(_,{type:"primary",block:"",loading:n(e).loading,disabled:n(D),onClick:x},{default:p(()=>[o(i,{keypath:"real.submit"})]),_:1},8,["loading","disabled"])],64)):(r(),d(u,{key:1},[l("div",fe,[((g=n(e).info)==null?void 0:g.real_status)===1?(r(),$(i,{key:0,keypath:"real.under_review"})):(r(),$(i,{key:1,keypath:"real.finish"}))]),l("div",he,[o(m,{src:"/"+((F=(y=n(e).info)==null?void 0:y.real_data)==null?void 0:F.front_pic)},null,8,["src"])]),l("div",ve,[o(m,{src:(L=(V=n(e).info)==null?void 0:V.real_data)==null?void 0:L.reverse_pic},null,8,["src"])]),o(A,null,{default:p(()=>{var s,w,B,C;return[o(k,{title:t.$t("real.name"),value:(w=(s=n(e).info)==null?void 0:s.real_data)==null?void 0:w.name},null,8,["title","value"]),o(k,{title:t.$t("real.passport_idnumber"),value:(C=(B=n(e).info)==null?void 0:B.real_data)==null?void 0:C.card_id},null,8,["title","value"])]}),_:1})],64))]))],64)}}},xe=W(ke,[["__scopeId","data-v-dd73ad71"]]);export{xe as default};
