import{_ as E,a7 as G,N as R,bo as J,k as M,y as d,b as o,A as p,D as n,S as Q,F as u,P as s,z as j,Q as q,J as P,G as r,I as H,R as $,bf as U,bp as K,a9 as O}from"./index-B5cGjNwt.js";import{C as T}from"./index-Drd8wZm-.js";import{C as W}from"./index-D1xla6DC.js";import{I as X}from"./index-BaLLLCea.js";/* empty css              */import{U as Y}from"./index-krX1UomT.js";import{F as Z}from"./index-C1AW1Aqa.js";import{N as ee}from"./index-LWaT0rVW.js";import"./index-GG-PFPL3.js";import"./use-id-BTB9pl-0.js";const ae="/h5/assets/id-front-B29VUS8_.png",te="/h5/assets/id-background-BvafEgth.png",oe={key:0,class:"text-center"},ne={key:1,class:"main pa-3"},le={class:"label font-md"},se={class:"label font-md"},re={class:"row"},ie={key:0,class:"front"},de={class:"btn"},ce={class:"font-sm tips"},pe={class:"row"},_e={key:0,class:"front"},me={class:"btn"},ue={class:"font-sm tips"},fe={class:"text-center"},he={class:"row"},ve={class:"row"},ke={__name:"Auth",setup(be){const e=G({name:"",card:"",frontFileList:[],frontFilePath:"",backFileList:[],backFilePath:"",loading:!1,pageLoading:!1,info:null});R(()=>{f()});function f(){e.pageLoading=!0,J().then(a=>{a.type==="ok"&&(e.info=a.data)}).finally(()=>{e.pageLoading=!1})}function N(a){a.status="uploading";const t=new FormData;t.append("file",a.file),t.append("type",0),U(t).then(c=>{a.status="done",e.frontFilePath=c.file_path}).catch(()=>{a.status="error"})}function z(a){a.status="uploading";const t=new FormData;t.append("file",a.file),t.append("type",0),U(t).then(c=>{a.status="done",e.backFilePath=c.file_path}).catch(()=>{a.status="error"})}const I=M(()=>!e.name||!e.card||!e.frontFilePath||!e.backFilePath);function D(){const a={id_type:0,name:e.name,card_id:e.card,real_type:1,front_pic:e.frontFilePath,reverse_pic:e.backFilePath};e.loading=!0,K(a).then(t=>{(t==null?void 0:t.type)==="ok"&&(O({type:"success",message:t.message}),e.loading=!1,f())}).finally(()=>{e.loading=!0})}return(a,t)=>{var b,g,y,F,V,w;const c=H,S=ee,A=Q,i=j("i18n-t"),h=Z,_=X,m=q,v=Y,k=W,x=T;return r(),d(u,null,[o(S,{title:a.$t("real.real_name_auth"),fixed:"",placeholder:""},{left:p(()=>[o(c,{"class-prefix":"iconfont",name:"back",onClick:t[0]||(t[0]=l=>a.$router.back())})]),_:1},8,["title"]),n(e).pageLoading?(r(),d("div",oe,[o(A,{size:"24"})])):(r(),d("div",ne,[((b=n(e).info)==null?void 0:b.real_status)===0?(r(),d(u,{key:0},[s("div",le,[o(i,{keypath:"real.improve_information"})]),o(h,{class:"row",label:a.$t("real.name"),modelValue:n(e).name,"onUpdate:modelValue":t[1]||(t[1]=l=>n(e).name=l),placeholder:a.$t("real.enter_name")},null,8,["label","modelValue","placeholder"]),o(h,{class:"row",modelValue:n(e).card,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).card=l),label:a.$t("real.passport_idnumber"),placeholder:a.$t("real.enter_passport_idnumber")},null,8,["modelValue","label","placeholder"]),s("div",se,[o(i,{keypath:"real.upload_the_front_and_back"})]),s("div",re,[o(v,{modelValue:n(e).frontFileList,"onUpdate:modelValue":t[3]||(t[3]=l=>n(e).frontFileList=l),"max-count":1,"preview-size":["auto","20vh"],"after-read":N},{default:p(()=>[n(e).frontFileList.length?$("",!0):(r(),d("div",ie,[o(_,{src:n(ae)},null,8,["src"]),s("div",de,[o(m,{icon:"plus",round:"",type:"primary",size:"small"})]),s("p",ce,[o(i,{keypath:"real.front"})])]))]),_:1},8,["modelValue"])]),s("div",pe,[o(v,{modelValue:n(e).backFileList,"onUpdate:modelValue":t[4]||(t[4]=l=>n(e).backFileList=l),"max-count":1,"preview-size":["auto","20vh"],"after-read":z},{default:p(()=>[n(e).backFileList.length?$("",!0):(r(),d("div",_e,[o(_,{src:n(te)},null,8,["src"]),s("div",me,[o(m,{icon:"plus",round:"",type:"primary",size:"small"})]),s("p",ue,[o(i,{keypath:"real.back"})])]))]),_:1},8,["modelValue"])]),o(m,{type:"primary",block:"",loading:n(e).loading,disabled:n(I),onClick:D},{default:p(()=>[o(i,{keypath:"real.submit"})]),_:1},8,["loading","disabled"])],64)):(r(),d(u,{key:1},[s("div",fe,[((g=n(e).info)==null?void 0:g.real_status)===1?(r(),P(i,{key:0,keypath:"real.under_review"})):(r(),P(i,{key:1,keypath:"real.finish"}))]),s("div",he,[o(_,{src:"/"+((F=(y=n(e).info)==null?void 0:y.real_data)==null?void 0:F.front_pic)},null,8,["src"])]),s("div",ve,[o(_,{src:(w=(V=n(e).info)==null?void 0:V.real_data)==null?void 0:w.reverse_pic},null,8,["src"])]),o(x,null,{default:p(()=>{var l,L,B,C;return[o(k,{title:a.$t("real.name"),value:(L=(l=n(e).info)==null?void 0:l.real_data)==null?void 0:L.name},null,8,["title","value"]),o(k,{title:a.$t("real.passport_idnumber"),value:(C=(B=n(e).info)==null?void 0:B.real_data)==null?void 0:C.card_id},null,8,["title","value"])]}),_:1})],64))]))],64)}}},Ue=E(ke,[["__scopeId","data-v-fae82b02"]]);export{Ue as default};
