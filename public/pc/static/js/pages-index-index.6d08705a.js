(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index","pages-order-order~pages-users-banks-banks~pages-users-digital-digital~pages-users-others-others","pages-order-order~pages-search-search~pages-users-financial-financial","pages-detail-detail~pages-socket-socket","pages-login-login","pages-registerTwo-registerTwo~pages-resetPass-resetPass","pages-search-search~pages-users-withdraw-withdraw","pages-users-amount-amount~pages-users-authen-authen","pages-users-amount-amount~pages-users-invite-invite","pages-users-others-others~pages-users-users","pages-resetPass-resetPass","pages-users-complaint-complaint","pages-users-contact-contact","pages-users-financial-financial","pages-users-invite-invite","pages-users-notice-notice","pages-users-uppwd-uppwd"],{"0035":function(t,e,a){"use strict";a.r(e);var i=a("8845"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"00ac":function(t,e,a){a("7a76"),a("c9b5"),a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1");var i=a("8b6b");function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var e=new Uint8Array(t.length+this.degree);e.set(t);var a=i.mod(e,this.genPoly),r=this.degree-a.length;if(r>0){var n=new Uint8Array(this.degree);return n.set(a,r),n}return a},t.exports=r},"0213":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-line",style:[this.lineStyle]})},r=[]},"0270":function(t,e,a){"use strict";a.r(e);var i=a("bad6"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"0287":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-easyinput[data-v-102d68aa]{width:100%;flex:1;position:relative;text-align:left;color:#333;font-size:14px}.uni-easyinput__content[data-v-102d68aa]{flex:1;width:100%;display:flex;box-sizing:border-box;flex-direction:row;align-items:center;border-color:#fff;transition-property:border-color;transition-duration:.3s}.uni-easyinput__content-input[data-v-102d68aa]{width:auto;position:relative;overflow:hidden;flex:1;line-height:1;font-size:14px;height:35px}.uni-easyinput__placeholder-class[data-v-102d68aa]{color:#999;font-size:12px}.is-textarea[data-v-102d68aa]{align-items:flex-start}.is-textarea-icon[data-v-102d68aa]{margin-top:5px}.uni-easyinput__content-textarea[data-v-102d68aa]{position:relative;overflow:hidden;flex:1;line-height:1.5;font-size:14px;margin:6px;margin-left:0;height:80px;min-height:80px;min-height:80px;width:auto}.input-padding[data-v-102d68aa]{padding-left:10px}.content-clear-icon[data-v-102d68aa]{padding:0 5px}.label-icon[data-v-102d68aa]{margin-right:5px;margin-top:-1px}.is-input-border[data-v-102d68aa]{display:flex;box-sizing:border-box;flex-direction:row;align-items:center;border:1px solid #dcdfe6;border-radius:4px}.uni-error-message[data-v-102d68aa]{position:absolute;bottom:-17px;left:0;line-height:12px;color:#e43d33;font-size:12px;text-align:left}.uni-error-msg--boeder[data-v-102d68aa]{position:relative;bottom:0;line-height:22px}.is-input-error-border[data-v-102d68aa]{border-color:#e43d33}.is-input-error-border .uni-easyinput__placeholder-class[data-v-102d68aa]{color:#f29e99}.uni-easyinput--border[data-v-102d68aa]{margin-bottom:0;padding:10px 15px;border-top:1px #eee solid}.uni-easyinput-error[data-v-102d68aa]{padding-bottom:0}.is-first-border[data-v-102d68aa]{border:none}.is-disabled[data-v-102d68aa]{background-color:#f7f6f6;color:#d5d5d5}.is-disabled .uni-easyinput__placeholder-class[data-v-102d68aa]{color:#d5d5d5;font-size:12px}',""]),t.exports=e},"02da":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.YAxisType=e.YAxisPosition=e.TooltipShowType=e.TooltipShowRule=e.TooltipIconPosition=e.PolygonType=e.OverlayMode=e.LineType=e.IndicatorSeries=e.FormatDateType=e.DomPosition=e.CandleType=e.CandleTooltipRectPosition=e.ActionType=void 0,e.dispose=function(t){var e,a,i;if(t instanceof Wa)i=t.id;else{var r=void 0;r=z(t)?document.getElementById(t):t,i=null!==(e=null===r||void 0===r?void 0:r.getAttribute("k-line-chart-id"))&&void 0!==e?e:null}null!==i&&(null===(a=Ua.get(i))||void 0===a||a.destroy(),Ua.delete(i))},e.getFigureClass=function(t){var e;return null!==(e=qe[t])&&void 0!==e?e:null},e.getOverlayClass=function(t){var e;return null!==(e=ge[t])&&void 0!==e?e:null},e.getSupportedFigures=function(){return Object.keys(qe)},e.getSupportedIndicators=function(){return Object.keys(Jt)},e.getSupportedLocales=function(){return Object.keys(fa)},e.getSupportedOverlays=function(){return Object.keys(ge)},e.init=function(t,e){var a;(function(){B("%c❤️ Welcome to klinecharts. Version is 9.8.10","border-radius:4px;border:dashed 1px #1677FF;line-height:70px;padding:0 20px;margin:16px 0;font-size:14px;color:#1677FF;","","","","")})(),a=z(t)?document.getElementById(t):t;if(null===a)return function(t,e,a){B("%c😟 klinecharts error%c %s%s%s","padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#F92855;","color:#F92855;",t,e,a)}("","","The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!"),null;var i=Ua.get(a.id);if(W(i))return _("","","The chart has been initialized on the dom！！！"),i;var r="k_line_chart_".concat(za++);return i=new Wa(a,e),i.id=r,a.setAttribute("k-line-chart-id",r),Ua.set(r,i),i},e.registerFigure=function(t){qe[t.name]=ae.extend(t)},e.registerIndicator=function(t){Jt[t.name]=ut.extend(t)},e.registerLocale=function(t,e){fa[t]=D(D({},fa[t]),e)},e.registerOverlay=function(t){ge[t.name]=ft.extend(t)},e.registerStyles=function(t,e){Ae[t]=e},e.registerXAxis=function(t){Ra[t.name]=Oa.extend(t)},e.registerYAxis=function(t){Aa[t.name]=ya.extend(t)},e.utils=void 0,e.version=function(){return"9.8.10"};var r=i(a("fcf3"));a("8a8d"),a("7a76"),a("c9b5"),a("bf0f"),a("01a2"),a("e39c"),a("844d"),a("18f7"),a("de6c"),a("aa9c"),a("f7a5"),a("c223"),a("fd3c"),a("dc69"),a("23f4"),a("7d2f"),a("5c47"),a("9c4e"),a("ab80"),a("a1c1"),a("0c26"),a("2797"),a("4626"),a("5ac7"),a("0506"),a("2c10"),a("5ef2"),a("dd2b"),a("e062"),a("64aa"),a("4259"),a("dc8a"),a("c1a3"),a("4100"),a("aa77"),a("bd06"),a("8f71"),a("1851"),a("473f"),a("3efd"),a("e966"),a("f042"),a("9db6");
/**
     * @license
     * KLineChart v9.8.10
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},n(t,e)};function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}var o,h,l,u,c,d,f,C,m,D=function(){return D=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++)for(var r in e=arguments[a],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},D.apply(this,arguments)};function p(t,e,a,i){return new(a||(a=Promise))((function(r,n){function s(t){try{h(i.next(t))}catch(e){n(e)}}function o(t){try{h(i["throw"](t))}catch(e){n(e)}}function h(t){t.done?r(t.value):function(t){return t instanceof a?t:new a((function(e){e(t)}))}(t.value).then(s,o)}h((i=i.apply(t,e||[])).next())}))}function v(t,e){var a,i,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(o){return function(h){return function(o){if(a)throw new TypeError("Generator is already executing.");while(n&&(n=0,o[0]&&(s=0)),s)try{if(a=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(h){o=[6,h],i=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}function g(t){var e="function"===typeof Symbol&&Symbol.iterator,a=e&&t[e],i=0;if(a)return a.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(t,e){var a="function"===typeof Symbol&&t[Symbol.iterator];if(!a)return t;var i,r,n=a.call(t),s=[];try{while((void 0===e||e-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(o){r={error:o}}finally{try{i&&!i.done&&(a=n["return"])&&a.call(n)}finally{if(r)throw r.error}}return s}function I(t,e,a){if(a||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}"function"===typeof SuppressedError&&SuppressedError,e.LineType=o,function(t){t["Dashed"]="dashed",t["Solid"]="solid"}(o||(e.LineType=o={})),e.PolygonType=h,function(t){t["Stroke"]="stroke",t["Fill"]="fill",t["StrokeFill"]="stroke_fill"}(h||(e.PolygonType=h={})),e.TooltipShowRule=l,function(t){t["Always"]="always",t["FollowCross"]="follow_cross",t["None"]="none"}(l||(e.TooltipShowRule=l={})),e.TooltipShowType=u,function(t){t["Standard"]="standard",t["Rect"]="rect"}(u||(e.TooltipShowType=u={})),e.TooltipIconPosition=c,function(t){t["Left"]="left",t["Middle"]="middle",t["Right"]="right"}(c||(e.TooltipIconPosition=c={})),e.CandleTooltipRectPosition=d,function(t){t["Fixed"]="fixed",t["Pointer"]="pointer"}(d||(e.CandleTooltipRectPosition=d={})),e.CandleType=f,function(t){t["CandleSolid"]="candle_solid",t["CandleStroke"]="candle_stroke",t["CandleUpStroke"]="candle_up_stroke",t["CandleDownStroke"]="candle_down_stroke",t["Ohlc"]="ohlc",t["Area"]="area"}(f||(e.CandleType=f={})),e.YAxisPosition=C,function(t){t["Left"]="left",t["Right"]="right"}(C||(e.YAxisPosition=C={})),e.YAxisType=m,function(t){t["Normal"]="normal",t["Percentage"]="percentage",t["Log"]="log"}(m||(e.YAxisType=m={}));var T="#F92855",x="rgba(249, 40, 85, .7)",y="rgba(45, 192, 142, .7)",A="#888888",b="#1677FF";function w(t){return"rgba(22, 119, 255, ".concat(t,")")}function F(){function t(){return{show:!0,size:1,color:"#EDEDED",style:o.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:t(),vertical:t()}}function M(){var t={show:!0,color:"#76808F",textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:f.CandleSolid,bar:{upColor:"#2DC08E",downColor:T,noChangeColor:A,upBorderColor:"#2DC08E",downBorderColor:T,noChangeBorderColor:A,upWickColor:"#2DC08E",downWickColor:T,noChangeWickColor:A},area:{lineSize:2,lineColor:b,smooth:!1,value:"close",backgroundColor:[{offset:0,color:w(.01)},{offset:1,color:w(.2)}],point:{show:!0,color:b,radius:4,rippleColor:w(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:D({},t),low:D({},t),last:{show:!0,upColor:"#2DC08E",downColor:T,noChangeColor:A,line:{show:!0,style:o.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:h.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:o.Solid,borderSize:0,borderDashedValue:[2,2],color:"#FFFFFF",family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:l.Always,showType:u.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:d.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function L(){var t=["#FF9600","#935EBD",b,"#E11D74","#01C5C4"].map((function(t){return{style:o.Solid,smooth:!1,size:1,dashedValue:[2,2],color:t}}));return{ohlc:{upColor:y,downColor:x,noChangeColor:A},bars:[{style:h.Fill,borderStyle:o.Solid,borderSize:1,borderDashedValue:[2,2],upColor:y,downColor:x,noChangeColor:A}],lines:t,circles:[{style:h.Fill,borderStyle:o.Solid,borderSize:1,borderDashedValue:[2,2],upColor:y,downColor:x,noChangeColor:A}],lastValueMark:{show:!1,text:{show:!1,style:h.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:o.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:l.Always,showType:u.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function E(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function N(){var t=E();return t.type=m.Normal,t.position=C.Right,t.inside=!1,t.reverse=!1,t}function P(){function t(){return{show:!0,line:{show:!0,style:o.Dashed,dashedValue:[4,2],size:1,color:"#76808F"},text:{show:!0,style:h.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:o.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:"#76808F",borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#76808F"}}}return{show:!0,horizontal:t(),vertical:t()}}function O(){var t=w(.35),e=w(.25);function a(){return{style:h.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:o.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:b,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:b}}return{point:{color:b,borderColor:t,borderSize:1,radius:5,activeColor:b,activeBorderColor:t,activeBorderSize:3,activeRadius:5},line:{style:o.Solid,smooth:!1,color:b,size:1,dashedValue:[2,2]},rect:{style:h.Fill,color:e,borderColor:b,borderSize:1,borderRadius:0,borderStyle:o.Solid,borderDashedValue:[2,2]},polygon:{style:h.Fill,color:b,borderColor:b,borderSize:1,borderStyle:o.Solid,borderDashedValue:[2,2]},circle:{style:h.Fill,color:e,borderColor:b,borderSize:1,borderStyle:o.Solid,borderDashedValue:[2,2]},arc:{style:o.Solid,color:b,size:1,dashedValue:[2,2]},text:a(),rectText:a()}}function R(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:w(.08)}}function B(t,e,a,i,r,n){}function _(t,e,a){}function k(t,e){if(Y(t)||Y(e))for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=t[a],r=e[a];Y(r)&&Y(i)?k(i,r):W(e[a])&&(t[a]=G(e[a]))}}function G(t){if(!Y(t))return t;var e;for(var a in e=V(t)?[]:{},t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=t[a];Y(i)?e[a]=G(i):e[a]=i}return e}function V(t){return"[object Array]"===Object.prototype.toString.call(t)}function H(t){return"function"===typeof t}function Y(t){return"object"===(0,r.default)(t)&&W(t)}function X(t){return"number"===typeof t&&!isNaN(t)}function W(t){return null!==t&&void 0!==t}function U(t){return"boolean"===typeof t}function z(t){return"string"===typeof t}var K,J,Q=/\\(\\)?/g,$=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g");function j(t,e,a){if(W(t)){var i=[];e.replace($,(function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var r=t;return W(e[1])?r=e[2].replace(Q,"$1"):W(e[0])&&(r=e[0].trim()),i.push(r),""}));var r=t,n=0,s=i.length;while(W(r)&&n<s)r=null===r||void 0===r?void 0:r[i[n++]];return W(r)?r:null!==a&&void 0!==a?a:"--"}return null!==a&&void 0!==a?a:"--"}function Z(t,e,a){var i={};return t.formatToParts(new Date(e)).forEach((function(t){var e=t.type,a=t.value;switch(e){case"year":i.YYYY=a;break;case"month":i.MM=a;break;case"day":i.DD=a;break;case"hour":i.HH="24"===a?"00":a;break;case"minute":i.mm=a;break;case"second":i.ss=a;break}})),a.replace(/YYYY|MM|DD|HH|mm|ss/g,(function(t){return i[t]}))}function q(t,e){var a=+t;return X(a)?a.toFixed(null!==e&&void 0!==e?e:2):"".concat(t)}function tt(t){var e=+t;if(X(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(t)}function et(t,e){var a="".concat(t);if(0===e.length)return a;if(a.includes(".")){var i=a.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,(function(t){return"".concat(t).concat(e)})),".").concat(i[1])}return a.replace(/(\d)(?=(\d{3})+$)/g,(function(t){return"".concat(t).concat(e)}))}function at(t,e){var a="".concat(t),i=new RegExp("\\.0{"+e+",}[1-9][0-9]*$");if(i.test(a)){var r=a.split("."),n=r[r.length-1],s=n.match(/0*/);if(W(s)){var o=s[0].length;return r[r.length-1]=n.replace(/0*/,"0{".concat(o,"}")),r.join(".")}}return a}function it(t){var e,a,i;return null!==(i=null===(a=null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)||void 0===a?void 0:a.devicePixelRatio)&&void 0!==i?i:1}function rt(t,e,a){return"".concat(null!==e&&void 0!==e?e:"normal"," ").concat(null!==t&&void 0!==t?t:12,"px ").concat(null!==a&&void 0!==a?a:"Helvetica Neue")}function nt(t,e,a,i){if(!W(K)){var r=document.createElement("canvas"),n=it(r);K=r.getContext("2d"),K.scale(n,n)}return K.font=rt(e,a,i),Math.round(K.measureText(t).width)}e.ActionType=J,function(t){t["OnDataReady"]="onDataReady",t["OnZoom"]="onZoom",t["OnScroll"]="onScroll",t["OnVisibleRangeChange"]="onVisibleRangeChange",t["OnTooltipIconClick"]="onTooltipIconClick",t["OnCrosshairChange"]="onCrosshairChange",t["OnCandleBarClick"]="onCandleBarClick",t["OnPaneDrag"]="onPaneDrag"}(J||(e.ActionType=J={}));var st,ot=function(){function t(){this._callbacks=[]}return t.prototype.subscribe=function(t){var e,a=null!==(e=this._callbacks.indexOf(t))&&void 0!==e?e:-1;a<0&&this._callbacks.push(t)},t.prototype.unsubscribe=function(t){var e;if(H(t)){var a=null!==(e=this._callbacks.indexOf(t))&&void 0!==e?e:-1;a>-1&&this._callbacks.splice(a,1)}else this._callbacks=[]},t.prototype.execute=function(t){this._callbacks.forEach((function(e){e(t)}))},t.prototype.isEmpty=function(){return 0===this._callbacks.length},t}();function ht(t,e,a,i,r){var n,s=e.result,o=e.figures,h=e.styles,l=j(h,"circles",i.circles),u=l.length,c=j(h,"bars",i.bars),d=c.length,f=j(h,"lines",i.lines),C=f.length,m=0,p=0,v=0,g=0;o.forEach((function(o){var h;switch(o.type){case"circle":g=m;var S=l[m%u];n=D(D({},S),{color:S.noChangeColor}),m++;break;case"bar":g=p;var I=c[p%d];n=D(D({},I),{color:I.noChangeColor}),p++;break;case"line":g=v,n=f[v%C],v++;break}if(W(n)){var T={prev:{kLineData:t[a-1],indicatorData:s[a-1]},current:{kLineData:t[a],indicatorData:s[a]},next:{kLineData:t[a+1],indicatorData:s[a+1]}},x=null===(h=o.styles)||void 0===h?void 0:h.call(o,T,e,i);r(o,D(D({},n),x),g)}}))}e.IndicatorSeries=st,function(t){t["Normal"]="normal",t["Price"]="price",t["Volume"]="volume"}(st||(e.IndicatorSeries=st={}));var lt,ut=function(){function t(t){this.result=[],this._precisionFlag=!1;var e=t.name,a=t.shortName,i=t.series,r=t.calcParams,n=t.figures,s=t.precision,o=t.shouldOhlc,h=t.shouldFormatBigNumber,l=t.visible,u=t.zLevel,c=t.minValue,d=t.maxValue,f=t.styles,C=t.extendData,m=t.regenerateFigures,D=t.createTooltipDataSource,p=t.draw;this.name=e,this.shortName=null!==a&&void 0!==a?a:e,this.series=null!==i&&void 0!==i?i:st.Normal,this.precision=null!==s&&void 0!==s?s:4,this.calcParams=null!==r&&void 0!==r?r:[],this.figures=null!==n&&void 0!==n?n:[],this.shouldOhlc=null!==o&&void 0!==o&&o,this.shouldFormatBigNumber=null!==h&&void 0!==h&&h,this.visible=null===l||void 0===l||l,this.zLevel=null!==u&&void 0!==u?u:0,this.minValue=null!==c&&void 0!==c?c:null,this.maxValue=null!==d&&void 0!==d?d:null,this.styles=G(null!==f&&void 0!==f?f:{}),this.extendData=C,this.regenerateFigures=null!==m&&void 0!==m?m:null,this.createTooltipDataSource=null!==D&&void 0!==D?D:null,this.draw=null!==p&&void 0!==p?p:null}return t.prototype.setShortName=function(t){return this.shortName!==t&&(this.shortName=t,!0)},t.prototype.setSeries=function(t){return this.series!==t&&(this.series=t,!0)},t.prototype.setPrecision=function(t,e){var a=null!==e&&void 0!==e&&e,i=Math.floor(t);return!(!(i!==this.precision&&t>=0)||a&&(!a||this._precisionFlag))&&(this.precision=i,a||(this._precisionFlag=!0),!0)},t.prototype.setCalcParams=function(t){var e,a;return this.calcParams=t,this.figures=null!==(a=null===(e=this.regenerateFigures)||void 0===e?void 0:e.call(this,t))&&void 0!==a?a:this.figures,!0},t.prototype.setShouldOhlc=function(t){return this.shouldOhlc!==t&&(this.shouldOhlc=t,!0)},t.prototype.setShouldFormatBigNumber=function(t){return this.shouldFormatBigNumber!==t&&(this.shouldFormatBigNumber=t,!0)},t.prototype.setVisible=function(t){return this.visible!==t&&(this.visible=t,!0)},t.prototype.setZLevel=function(t){return this.zLevel!==t&&(this.zLevel=t,!0)},t.prototype.setStyles=function(t){return k(this.styles,t),!0},t.prototype.setExtendData=function(t){return this.extendData!==t&&(this.extendData=t,!0)},t.prototype.setFigures=function(t){return this.figures!==t&&(this.figures=t,!0)},t.prototype.setMinValue=function(t){return this.minValue!==t&&(this.minValue=t,!0)},t.prototype.setMaxValue=function(t){return this.maxValue!==t&&(this.maxValue=t,!0)},t.prototype.setRegenerateFigures=function(t){return this.regenerateFigures!==t&&(this.regenerateFigures=t,!0)},t.prototype.setCreateTooltipDataSource=function(t){return this.createTooltipDataSource!==t&&(this.createTooltipDataSource=t,!0)},t.prototype.setDraw=function(t){return this.draw!==t&&(this.draw=t,!0)},t.prototype.calcIndicator=function(t){return p(this,void 0,void 0,(function(){var e;return v(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return e=a.sent(),this.result=e,[2,!0];case 2:return a.sent(),[2,!1];case 3:return[2]}}))}))},t.extend=function(e){var a=function(t){function a(){return t.call(this,e)||this}return s(a,t),a.prototype.calc=function(t,a){return e.calc(t,a)},a}(t);return a},t}();e.OverlayMode=lt,function(t){t["Normal"]="normal",t["WeakMagnet"]="weak_magnet",t["StrongMagnet"]="strong_magnet"}(lt||(e.OverlayMode=lt={}));var ct,dt=Number.MAX_SAFE_INTEGER,ft=function(){function t(t){this.currentStep=1,this.points=[],this._prevPressedPoint=null,this._prevPressedPoints=[];var e=t.mode,a=t.modeSensitivity,i=t.extendData,r=t.styles,n=t.name,s=t.totalStep,o=t.lock,h=t.visible,l=t.zLevel,u=t.needDefaultPointFigure,c=t.needDefaultXAxisFigure,d=t.needDefaultYAxisFigure,f=t.createPointFigures,C=t.createXAxisFigures,m=t.createYAxisFigures,D=t.performEventPressedMove,p=t.performEventMoveForDrawing,v=t.onDrawStart,g=t.onDrawing,S=t.onDrawEnd,I=t.onClick,T=t.onDoubleClick,x=t.onRightClick,y=t.onPressedMoveStart,A=t.onPressedMoving,b=t.onPressedMoveEnd,w=t.onMouseEnter,F=t.onMouseLeave,M=t.onRemoved,L=t.onSelected,E=t.onDeselected;this.name=n,this.totalStep=!X(s)||s<2?1:s,this.lock=null!==o&&void 0!==o&&o,this.visible=null===h||void 0===h||h,this.zLevel=null!==l&&void 0!==l?l:0,this.needDefaultPointFigure=null!==u&&void 0!==u&&u,this.needDefaultXAxisFigure=null!==c&&void 0!==c&&c,this.needDefaultYAxisFigure=null!==d&&void 0!==d&&d,this.mode=null!==e&&void 0!==e?e:lt.Normal,this.modeSensitivity=null!==a&&void 0!==a?a:8,this.extendData=i,this.styles=G(null!==r&&void 0!==r?r:{}),this.createPointFigures=null!==f&&void 0!==f?f:null,this.createXAxisFigures=null!==C&&void 0!==C?C:null,this.createYAxisFigures=null!==m&&void 0!==m?m:null,this.performEventPressedMove=null!==D&&void 0!==D?D:null,this.performEventMoveForDrawing=null!==p&&void 0!==p?p:null,this.onDrawStart=null!==v&&void 0!==v?v:null,this.onDrawing=null!==g&&void 0!==g?g:null,this.onDrawEnd=null!==S&&void 0!==S?S:null,this.onClick=null!==I&&void 0!==I?I:null,this.onDoubleClick=null!==T&&void 0!==T?T:null,this.onRightClick=null!==x&&void 0!==x?x:null,this.onPressedMoveStart=null!==y&&void 0!==y?y:null,this.onPressedMoving=null!==A&&void 0!==A?A:null,this.onPressedMoveEnd=null!==b&&void 0!==b?b:null,this.onMouseEnter=null!==w&&void 0!==w?w:null,this.onMouseLeave=null!==F&&void 0!==F?F:null,this.onRemoved=null!==M&&void 0!==M?M:null,this.onSelected=null!==L&&void 0!==L?L:null,this.onDeselected=null!==E&&void 0!==E?E:null}return t.prototype.setId=function(t){return!z(this.id)&&(this.id=t,!0)},t.prototype.setGroupId=function(t){return!z(this.groupId)&&(this.groupId=t,!0)},t.prototype.setPaneId=function(t){this.paneId=t},t.prototype.setExtendData=function(t){return t!==this.extendData&&(this.extendData=t,!0)},t.prototype.setStyles=function(t){return k(this.styles,t),!0},t.prototype.setPoints=function(t){if(t.length>0){var e=void 0;if(this.points=I([],S(t),!1),t.length>=this.totalStep-1?(this.currentStep=-1,e=this.totalStep-1):(this.currentStep=t.length+1,e=t.length),null!==this.performEventMoveForDrawing)for(var a=0;a<e;a++)this.performEventMoveForDrawing({currentStep:a+2,mode:this.mode,points:this.points,performPointIndex:a,performPoint:this.points[a]});return-1===this.currentStep&&null!==this.performEventPressedMove&&this.performEventPressedMove({currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}),!0}return!1},t.prototype.setLock=function(t){return this.lock!==t&&(this.lock=t,!0)},t.prototype.setVisible=function(t){return this.visible!==t&&(this.visible=t,!0)},t.prototype.setZLevel=function(t){return this.zLevel!==t&&(this.zLevel=t,!0)},t.prototype.setMode=function(t){return this.mode!==t&&(this.mode=t,!0)},t.prototype.setModeSensitivity=function(t){return this.modeSensitivity!==t&&(this.modeSensitivity=t,!0)},t.prototype.setOnDrawStartCallback=function(t){return this.onDrawStart!==t&&(this.onDrawStart=t,!0)},t.prototype.setOnDrawingCallback=function(t){return this.onDrawing!==t&&(this.onDrawing=t,!0)},t.prototype.setOnDrawEndCallback=function(t){return this.onDrawEnd!==t&&(this.onDrawEnd=t,!0)},t.prototype.setOnClickCallback=function(t){return this.onClick!==t&&(this.onClick=t,!0)},t.prototype.setOnDoubleClickCallback=function(t){return this.onDoubleClick!==t&&(this.onDoubleClick=t,!0)},t.prototype.setOnRightClickCallback=function(t){return this.onRightClick!==t&&(this.onRightClick=t,!0)},t.prototype.setOnPressedMoveStartCallback=function(t){return this.onPressedMoveStart!==t&&(this.onPressedMoveStart=t,!0)},t.prototype.setOnPressedMovingCallback=function(t){return this.onPressedMoving!==t&&(this.onPressedMoving=t,!0)},t.prototype.setOnPressedMoveEndCallback=function(t){return this.onPressedMoveEnd!==t&&(this.onPressedMoveEnd=t,!0)},t.prototype.setOnMouseEnterCallback=function(t){return this.onMouseEnter!==t&&(this.onMouseEnter=t,!0)},t.prototype.setOnMouseLeaveCallback=function(t){return this.onMouseLeave!==t&&(this.onMouseLeave=t,!0)},t.prototype.setOnRemovedCallback=function(t){return this.onRemoved!==t&&(this.onRemoved=t,!0)},t.prototype.setOnSelectedCallback=function(t){return this.onSelected!==t&&(this.onSelected=t,!0)},t.prototype.setOnDeselectedCallback=function(t){return this.onDeselected!==t&&(this.onDeselected=t,!0)},t.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},t.prototype.forceComplete=function(){this.currentStep=-1},t.prototype.isDrawing=function(){return-1!==this.currentStep},t.prototype.isStart=function(){return 1===this.currentStep},t.prototype.eventMoveForDrawing=function(t){var e,a=this.currentStep-1,i={};X(t.timestamp)&&(i.timestamp=t.timestamp),X(t.dataIndex)&&(i.dataIndex=t.dataIndex),X(t.value)&&(i.value=t.value),this.points[a]=i,null===(e=this.performEventMoveForDrawing)||void 0===e||e.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:a,performPoint:i})},t.prototype.eventPressedPointMove=function(t,e){var a;X(t.dataIndex)&&(this.points[e].dataIndex=t.dataIndex,this.points[e].timestamp=t.timestamp),X(t.value)&&(this.points[e].value=t.value),null===(a=this.performEventPressedMove)||void 0===a||a.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:e,performPoint:this.points[e]})},t.prototype.startPressedMove=function(t){this._prevPressedPoint=D({},t),this._prevPressedPoints=G(this.points)},t.prototype.eventPressedOtherMove=function(t,e){var a,i;null!==this._prevPressedPoint&&(X(t.dataIndex)&&X(this._prevPressedPoint.dataIndex)&&(a=t.dataIndex-this._prevPressedPoint.dataIndex),X(t.value)&&X(this._prevPressedPoint.value)&&(i=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map((function(t){var r;X(t.timestamp)&&(t.dataIndex=e.timestampToDataIndex(t.timestamp));var n=D({},t);return X(a)&&X(t.dataIndex)&&(n.dataIndex=t.dataIndex+a,n.timestamp=null!==(r=e.dataIndexToTimestamp(n.dataIndex))&&void 0!==r?r:void 0),X(i)&&X(t.value)&&(n.value=t.value+i),n})))},t.extend=function(e){var a=function(t){function a(){return t.call(this,e)||this}return s(a,t),a}(t);return a},t}();e.FormatDateType=ct,function(t){t[t["Tooltip"]=0]="Tooltip",t[t["Crosshair"]=1]="Crosshair",t[t["XAxis"]=2]="XAxis"}(ct||(e.FormatDateType=ct={}));function Ct(t){return H(window.requestAnimationFrame)?window.requestAnimationFrame(t):window.setTimeout(t,20)}function mt(t){H(window.cancelAnimationFrame)?window.cancelAnimationFrame(t):window.clearTimeout(t)}var Dt,pt=function(){function t(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,k(this._options,t)}return t.prototype._loop=function(){var t=this;this._running=!0;Ct((function e(){var a;if(t._running){var i=(new Date).getTime()-t._time;i<t._options.duration?(null===(a=t._doFrameCallback)||void 0===a||a.call(t,i),Ct(e)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}}))},t.prototype.doFrame=function(t){return this._doFrameCallback=t,this},t.prototype.setDuration=function(t){return this._options.duration=t,this},t.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},t.prototype.start=function(){this._running||(this._time=(new Date).getTime(),this._loop())},t.prototype.stop=function(){var t;this._running&&(null===(t=this._doFrameCallback)||void 0===t||t.call(this,this._options.duration)),this._running=!1},t}(),vt=1,gt=(new Date).getTime();function St(t){var e=(new Date).getTime();return e===gt?++vt:vt=1,gt=e,"".concat(null!==t&&void 0!==t?t:"").concat(e,"_").concat(vt)}function It(t,e){var a,i=document.createElement(t),r=null!==e&&void 0!==e?e:{};for(var n in r)i.style[n]=null!==(a=r[n])&&void 0!==a?a:"";return i}function Tt(t,e,a){var i=0,r=0;for(r=t.length-1;i!==r;){var n=Math.floor((r+i)/2),s=r-i,o=t[n][e];if(a===t[i][e])return i;if(a===t[r][e])return r;if(a===o)return n;if(a>o?i=n:r=n,s<=2)break}return i}function xt(t,e){null==e&&(e=10),e=Math.min(Math.max(0,e),20);var a=(+t).toFixed(e);return+a}function yt(t,e,a){var i=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];return t.forEach((function(t){var r,n;i[0]=Math.max(null!==(r=t[e])&&void 0!==r?r:t,i[0]),i[1]=Math.min(null!==(n=t[a])&&void 0!==n?n:t,i[1])})),i}function At(t){return Math.log(t)/Math.log(10)}function bt(t){return Math.pow(10,t)}function wt(){return{from:0,to:0,realFrom:0,realTo:0}}(function(t){t["Init"]="init",t["Forward"]="forward",t["Backward"]="backward"})(Dt||(Dt={}));var Ft={MIN:1,MAX:50},Mt=function(){function t(t){this._dateTimeFormat=this._buildDateTimeFormat(),this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=8,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=wt(),this._chartStore=t,this._gapBarSpace=this._calcGapBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace}return t.prototype._calcGapBarSpace=function(){var t;return this._barSpace>3?t=Math.floor(.88*this._barSpace):(t=Math.floor(this._barSpace),t===this._barSpace&&t--),t%2===0&&t--,t=Math.max(1,t),t},t.prototype.adjustVisibleRange=function(){var t,e,a,i,r=this._chartStore.getDataList(),n=r.length,s=this._totalBarSpace/this._barSpace;1===this._scrollLimitRole?(a=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,i=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(a=this._minVisibleBarCount.left,i=this._minVisibleBarCount.right),a=Math.max(0,a),i=Math.max(0,i);var o=s-Math.min(a,n);this._lastBarRightSideDiffBarCount>o&&(this._lastBarRightSideDiffBarCount=o);var h=-n+Math.min(i,n);this._lastBarRightSideDiffBarCount<h&&(this._lastBarRightSideDiffBarCount=h);var l=Math.round(this._lastBarRightSideDiffBarCount+n+.5),u=l;l>n&&(l=n);var c=Math.round(l-s)-1;c<0&&(c=0);var d=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-s)-1:c;if(this._visibleRange={from:c,to:l,realFrom:d,realTo:u},this._chartStore.getActionStore().execute(J.OnVisibleRangeChange,this._visibleRange),this._chartStore.adjustVisibleDataList(),0===c){var f=r[0];this._chartStore.executeLoadMoreCallback(null!==(t=null===f||void 0===f?void 0:f.timestamp)&&void 0!==t?t:null),this._chartStore.executeLoadDataCallback({type:Dt.Forward,data:null!==f&&void 0!==f?f:null})}l===n&&this._chartStore.executeLoadDataCallback({type:Dt.Backward,data:null!==(e=r[n-1])&&void 0!==e?e:null})},t.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},t.prototype._buildDateTimeFormat=function(t){var e={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};z(t)&&(e.timeZone=t);var a=null;try{a=new Intl.DateTimeFormat("en",e)}catch(i){}return a},t.prototype.setTimezone=function(t){var e=this._buildDateTimeFormat(t);null!==e&&(this._dateTimeFormat=e)},t.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},t.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},t.prototype.setBarSpace=function(t,e){t<Ft.MIN||t>Ft.MAX||this._barSpace===t||(this._barSpace=t,this._gapBarSpace=this._calcGapBarSpace(),null===e||void 0===e||e(),this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0))},t.prototype.setTotalBarSpace=function(t){return this._totalBarSpace!==t&&(this._totalBarSpace=t,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0)),this},t.prototype.setOffsetRightDistance=function(t,e){return this._offsetRightDistance=1===this._scrollLimitRole?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,null!==e&&void 0!==e&&e&&(this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)),this},t.prototype.resetOffsetRightDistance=function(){this.setOffsetRightDistance(this._offsetRightDistance)},t.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},t.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},t.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},t.prototype.setLastBarRightSideDiffBarCount=function(t){return this._lastBarRightSideDiffBarCount=t,this},t.prototype.setMaxOffsetLeftDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.left=t,this},t.prototype.setMaxOffsetRightDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.right=t,this},t.prototype.setLeftMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.left=t,this},t.prototype.setRightMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.right=t,this},t.prototype.getVisibleRange=function(){return this._visibleRange},t.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},t.prototype.scroll=function(t){if(this._scrollEnabled){var e=t/this._barSpace,a=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-e,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0);var i=Math.round(a-this._lastBarRightSideDiffBarCount*this._barSpace);0!==i&&this._chartStore.getActionStore().execute(J.OnScroll,{distance:i})}},t.prototype.getDataByDataIndex=function(t){var e;return null!==(e=this._chartStore.getDataList()[t])&&void 0!==e?e:null},t.prototype.coordinateToFloatIndex=function(t){var e=this._chartStore.getDataList().length,a=(this._totalBarSpace-t)/this._barSpace,i=e+this._lastBarRightSideDiffBarCount-a;return Math.round(1e6*i)/1e6},t.prototype.dataIndexToTimestamp=function(t){var e,a=this.getDataByDataIndex(t);return null!==(e=null===a||void 0===a?void 0:a.timestamp)&&void 0!==e?e:null},t.prototype.timestampToDataIndex=function(t){var e=this._chartStore.getDataList();return 0===e.length?0:Tt(e,"timestamp",t)},t.prototype.dataIndexToCoordinate=function(t){var e=this._chartStore.getDataList().length,a=e+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(a-.5)*this._barSpace)},t.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},t.prototype.zoom=function(t,e){var a,i=this;if(this._zoomEnabled){var r=null!==e&&void 0!==e?e:null;if(!X(null===r||void 0===r?void 0:r.x)){var n=this._chartStore.getTooltipStore().getCrosshair();r={x:null!==(a=null===n||void 0===n?void 0:n.x)&&void 0!==a?a:this._totalBarSpace/2}}var s=r.x,o=this.coordinateToFloatIndex(s),h=this._barSpace,l=this._barSpace+t*(this._barSpace/10);this.setBarSpace(l,(function(){i._lastBarRightSideDiffBarCount+=o-i.coordinateToFloatIndex(s)}));var u=this._barSpace/h;1!==u&&this._chartStore.getActionStore().execute(J.OnZoom,{scale:u})}},t.prototype.setZoomEnabled=function(t){return this._zoomEnabled=t,this},t.prototype.getZoomEnabled=function(){return this._zoomEnabled},t.prototype.setScrollEnabled=function(t){return this._scrollEnabled=t,this},t.prototype.getScrollEnabled=function(){return this._scrollEnabled},t.prototype.clear=function(){this._visibleRange=wt()},t}(),Lt={name:"AVP",shortName:"AVP",series:st.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(t){var e=0,a=0;return t.map((function(t){var i,r,n={},s=null!==(i=null===t||void 0===t?void 0:t.turnover)&&void 0!==i?i:0,o=null!==(r=null===t||void 0===t?void 0:t.volume)&&void 0!==r?r:0;return e+=s,a+=o,0!==a&&(n.avp=e/a),n}))}},Et={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(t,e,a){var i,r,n,s,o,l=t.prev,u=t.current,c=null!==(r=null===(i=l.indicatorData)||void 0===i?void 0:i.ao)&&void 0!==r?r:Number.MIN_SAFE_INTEGER,d=null!==(s=null===(n=u.indicatorData)||void 0===n?void 0:n.ao)&&void 0!==s?s:Number.MIN_SAFE_INTEGER;o=d>c?j(e.styles,"bars[0].upColor",a.bars[0].upColor):j(e.styles,"bars[0].downColor",a.bars[0].downColor);var f=d>c?h.Stroke:h.Fill;return{color:o,style:f,borderColor:o}}}],calc:function(t,e){var a=e.calcParams,i=Math.max(a[0],a[1]),r=0,n=0,s=0,o=0;return t.map((function(e,h){var l={},u=(e.low+e.high)/2;if(r+=u,n+=u,h>=a[0]-1){s=r/a[0];var c=t[h-(a[0]-1)];r-=(c.low+c.high)/2}if(h>=a[1]-1){o=n/a[1];c=t[h-(a[1]-1)];n-=(c.low+c.high)/2}return h>=i-1&&(l.ao=s-o),l}))}};var Nt={name:"BOLL",shortName:"BOLL",series:st.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=a[0]-1,r=0;return t.map((function(e,n){var s=e.close,o={};if(r+=s,n>=i){o.mid=r/a[0];var h=function(t,e){var a=t.length,i=0;return t.forEach((function(t){var a=t.close-e;i+=a*a})),i=Math.abs(i),Math.sqrt(i/a)}(t.slice(n-i,n+1),o.mid);o.up=o.mid+a[1]*h,o.dn=o.mid-a[1]*h,r-=t[n-i].close}return o}))}},Pt={name:"BBI",shortName:"BBI",series:st.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=Math.max.apply(Math,I([],S(a),!1)),r=[],n=[];return t.map((function(e,s){var o={},h=e.close;if(a.forEach((function(e,a){var i;r[a]=(null!==(i=r[a])&&void 0!==i?i:0)+h,s>=e-1&&(n[a]=r[a]/e,r[a]-=t[s-(e-1)].close)})),s>=i-1){var l=0;n.forEach((function(t){l+=t})),o.bbi=l/4}return o}))}},Ot={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=a[0]-1,r=0,n=[];return t.map((function(e,s){var o={},h=(e.high+e.low+e.close)/3;if(r+=h,n.push(h),s>=i){var l=r/a[0],u=n.slice(s-i,s+1),c=0;u.forEach((function(t){c+=Math.abs(t-l)}));var d=c/a[0];o.cci=0!==d?(h-l)/d/.015:0;var f=(t[s-i].high+t[s-i].low+t[s-i].close)/3;r-=f}return o}))}},Rt={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=Math.ceil(a[1]/2.5+1),r=Math.ceil(a[2]/2.5+1),n=Math.ceil(a[3]/2.5+1),s=Math.ceil(a[4]/2.5+1),o=0,h=[],l=0,u=[],c=0,d=[],f=0,C=[],m=[];return t.forEach((function(e,D){var p,v,g,S,I,T={},x=null!==(p=t[D-1])&&void 0!==p?p:e,y=(x.high+x.close+x.low+x.open)/4,A=Math.max(0,e.high-y),b=Math.max(0,y-e.low);D>=a[0]-1&&(T.cr=0!==b?A/b*100:0,o+=T.cr,l+=T.cr,c+=T.cr,f+=T.cr,D>=a[0]+a[1]-2&&(h.push(o/a[1]),D>=a[0]+a[1]+i-3&&(T.ma1=h[h.length-1-i]),o-=null!==(v=m[D-(a[1]-1)].cr)&&void 0!==v?v:0),D>=a[0]+a[2]-2&&(u.push(l/a[2]),D>=a[0]+a[2]+r-3&&(T.ma2=u[u.length-1-r]),l-=null!==(g=m[D-(a[2]-1)].cr)&&void 0!==g?g:0),D>=a[0]+a[3]-2&&(d.push(c/a[3]),D>=a[0]+a[3]+n-3&&(T.ma3=d[d.length-1-n]),c-=null!==(S=m[D-(a[3]-1)].cr)&&void 0!==S?S:0),D>=a[0]+a[4]-2&&(C.push(f/a[4]),D>=a[0]+a[4]+s-3&&(T.ma4=C[C.length-1-s]),f-=null!==(I=m[D-(a[4]-1)].cr)&&void 0!==I?I:0)),m.push(T)})),m}},Bt={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=Math.max(a[0],a[1]),r=0,n=0,s=0,o=[];return t.forEach((function(e,h){var l,u={},c=e.close;r+=c,n+=c;var d=0,f=0;if(h>=a[0]-1&&(d=r/a[0],r-=t[h-(a[0]-1)].close),h>=a[1]-1&&(f=n/a[1],n-=t[h-(a[1]-1)].close),h>=i-1){var C=d-f;u.dma=C,s+=C,h>=i+a[2]-2&&(u.ama=s/a[2],s-=null!==(l=o[h-(a[2]-1)].dma)&&void 0!==l?l:0)}o.push(u)})),o}},_t={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=0,n=0,s=0,o=0,h=0,l=0,u=0,c=[];return t.forEach((function(e,d){var f,C,m={},D=null!==(f=t[d-1])&&void 0!==f?f:e,p=D.close,v=e.high,g=e.low,S=v-g,I=Math.abs(v-p),T=Math.abs(p-g),x=v-D.high,y=D.low-g,A=Math.max(Math.max(S,I),T),b=x>0&&x>y?x:0,w=y>0&&y>x?y:0;if(i+=A,r+=b,n+=w,d>=a[0]-1){d>a[0]-1?(s=s-s/a[0]+A,o=o-o/a[0]+b,h=h-h/a[0]+w):(s=i,o=r,h=n);var F=0,M=0;0!==s&&(F=100*o/s,M=100*h/s),m.pdi=F,m.mdi=M;var L=0;M+F!==0&&(L=Math.abs(M-F)/(M+F)*100),l+=L,d>=2*a[0]-2&&(u=d>2*a[0]-2?(u*(a[0]-1)+L)/a[0]:l/a[0],m.adx=u,d>=2*a[0]+a[1]-3&&(m.adxr=((null!==(C=c[d-(a[1]-1)].adx)&&void 0!==C?C:0)+u)/2))}c.push(m)})),c}},kt={name:"EMA",shortName:"EMA",series:st.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(t){return t.map((function(t,e){return{key:"ema".concat(e+1),title:"EMA".concat(t,": "),type:"line"}}))},calc:function(t,e){var a=e.calcParams,i=e.figures,r=0,n=[];return t.map((function(t,e){var s={},o=t.close;return r+=o,a.forEach((function(t,a){e>=t-1&&(n[a]=e>t-1?(2*o+(t-1)*n[a])/(t+1):r/t,s[i[a].key]=n[a])})),s}))}},Gt={name:"MA",shortName:"MA",series:st.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(t){return t.map((function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}}))},calc:function(t,e){var a=e.calcParams,i=e.figures,r=[];return t.map((function(e,n){var s={},o=e.close;return a.forEach((function(e,a){var h;r[a]=(null!==(h=r[a])&&void 0!==h?h:0)+o,n>=e-1&&(s[i[a].key]=r[a]/e,r[a]-=t[n-(e-1)].close)})),s}))}},Vt={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(t,e,a){var i,r,n,s,o,l=t.prev,u=t.current,c=null!==(r=null===(i=l.indicatorData)||void 0===i?void 0:i.macd)&&void 0!==r?r:Number.MIN_SAFE_INTEGER,d=null!==(s=null===(n=u.indicatorData)||void 0===n?void 0:n.macd)&&void 0!==s?s:Number.MIN_SAFE_INTEGER;o=d>0?j(e.styles,"bars[0].upColor",a.bars[0].upColor):d<0?j(e.styles,"bars[0].downColor",a.bars[0].downColor):j(e.styles,"bars[0].noChangeColor",a.bars[0].noChangeColor);var f=c<d?h.Stroke:h.Fill;return{style:f,color:o,borderColor:o}}}],calc:function(t,e){var a,i,r=e.calcParams,n=0,s=0,o=0,h=0,l=Math.max(r[0],r[1]);return t.map((function(t,e){var u={},c=t.close;return n+=c,e>=r[0]-1&&(a=e>r[0]-1?(2*c+(r[0]-1)*a)/(r[0]+1):n/r[0]),e>=r[1]-1&&(i=e>r[1]-1?(2*c+(r[1]-1)*i)/(r[1]+1):n/r[1]),e>=l-1&&(s=a-i,u.dif=s,o+=s,e>=l+r[2]-2&&(h=e>l+r[2]-2?(2*s+h*(r[2]-1))/(r[2]+1):o/r[2],u.macd=2*(s-h),u.dea=h)),u}))}},Ht={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(t){return t.map((function(t,e){var a=e+1;return{key:"rsi".concat(a),title:"RSI".concat(a,": "),type:"line"}}))},calc:function(t,e){var a=e.calcParams,i=e.figures,r=[],n=[];return t.map((function(e,s){var o,h={},l=(null!==(o=t[s-1])&&void 0!==o?o:e).close,u=e.close-l;return a.forEach((function(e,a){var o,l,c;if(u>0?r[a]=(null!==(o=r[a])&&void 0!==o?o:0)+u:n[a]=(null!==(l=n[a])&&void 0!==l?l:0)+Math.abs(u),s>=e-1){0!==n[a]?h[i[a].key]=100-100/(1+r[a]/n[a]):h[i[a].key]=0;var d=t[s-(e-1)],f=null!==(c=t[s-e])&&void 0!==c?c:d,C=d.close-f.close;C>0?r[a]-=C:n[a]-=Math.abs(C)}})),h}))}},Yt={name:"SMA",shortName:"SMA",series:st.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(t,e){var a=e.calcParams,i=0,r=0;return t.map((function(t,e){var n={},s=t.close;return i+=s,e>=a[0]-1&&(r=e>a[0]-1?(s*a[1]+r*(a[0]-a[1]+1))/(a[0]+1):i/a[0],n.sma=r),n}))}},Xt={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=[];return t.forEach((function(e,r){var n,s,o,h,l={},u=e.close;if(r>=a[0]-1){var c=yt(t.slice(r-(a[0]-1),r+1),"high","low"),d=c[0],f=c[1],C=d-f,m=(u-f)/(0===C?1:C)*100;l.k=((a[1]-1)*(null!==(s=null===(n=i[r-1])||void 0===n?void 0:n.k)&&void 0!==s?s:50)+m)/a[1],l.d=((a[2]-1)*(null!==(h=null===(o=i[r-1])||void 0===o?void 0:o.d)&&void 0!==h?h:50)+l.k)/a[2],l.j=3*l.k-2*l.d}i.push(l)})),i}},Wt={name:"SAR",shortName:"SAR",series:st.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(t,e,a){var i,r,n=t.current,s=null!==(r=null===(i=n.indicatorData)||void 0===i?void 0:i.sar)&&void 0!==r?r:Number.MIN_SAFE_INTEGER,o=n.kLineData,h=((null===o||void 0===o?void 0:o.high)+(null===o||void 0===o?void 0:o.low))/2,l=s<h?j(e.styles,"circles[0].upColor",a.circles[0].upColor):j(e.styles,"circles[0].downColor",a.circles[0].downColor);return{color:l}}}],calc:function(t,e){var a=e.calcParams,i=a[0]/100,r=a[1]/100,n=a[2]/100,s=i,o=-100,h=!1,l=0;return t.map((function(e,a){var u=l,c=e.high,d=e.low;if(h){(-100===o||o<c)&&(o=c,s=Math.min(s+r,n)),l=u+s*(o-u);var f=Math.min(t[Math.max(1,a)-1].low,d);l>e.low?(l=o,s=i,o=-100,h=!h):l>f&&(l=f)}else{(-100===o||o>d)&&(o=d,s=Math.min(s+r,n)),l=u+s*(o-u);var C=Math.max(t[Math.max(1,a)-1].high,c);l<e.high?(l=o,s=0,o=-100,h=!h):l<C&&(l=C)}return{sar:l}}))}};function Ut(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(t,e,a){var i=t.current.kLineData,r=j(e.styles,"bars[0].noChangeColor",a.bars[0].noChangeColor);return W(i)&&(i.close>i.open?r=j(e.styles,"bars[0].upColor",a.bars[0].upColor):i.close<i.open&&(r=j(e.styles,"bars[0].downColor",a.bars[0].downColor))),{color:r}}}}var zt={name:"VOL",shortName:"VOL",series:st.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Ut()],regenerateFigures:function(t){var e=t.map((function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}}));return e.push(Ut()),e},calc:function(t,e){var a=e.calcParams,i=e.figures,r=[];return t.map((function(e,n){var s,o=null!==(s=e.volume)&&void 0!==s?s:0,h={volume:o};return a.forEach((function(e,a){var s,l;r[a]=(null!==(s=r[a])&&void 0!==s?s:0)+o,n>=e-1&&(h[i[a].key]=r[a]/e,r[a]-=null!==(l=t[n-(e-1)].volume)&&void 0!==l?l:0)})),h}))}},Kt={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(t){return t.map((function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}}))},calc:function(t,e){var a=e.calcParams,i=e.figures;return t.map((function(e,r){var n={},s=e.close;return a.forEach((function(e,a){var o=e-1;if(r>=o){var h=yt(t.slice(r-o,r+1),"high","low"),l=h[0],u=h[1],c=l-u;n[i[a].key]=0===c?0:(s-l)/c*100}})),n}))}},Jt={},Qt=[Lt,Et,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(t){return t.map((function(t,e){return{key:"bias".concat(e+1),title:"BIAS".concat(t,": "),type:"line"}}))},calc:function(t,e){var a=e.calcParams,i=e.figures,r=[];return t.map((function(e,n){var s={},o=e.close;return a.forEach((function(e,h){var l;if(r[h]=(null!==(l=r[h])&&void 0!==l?l:0)+o,n>=e-1){var u=r[h]/a[h];s[i[h].key]=(o-u)/u*100,r[h]-=t[n-(e-1)].close}})),s}))}},Nt,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=0,n=0,s=0;return t.map((function(e,o){var h,l,u={},c=e.high,d=e.low,f=e.open,C=(null!==(h=t[o-1])&&void 0!==h?h:e).close;if(n+=c-f,s+=f-d,i+=c-C,r+=C-d,o>=a[0]-1){u.ar=0!==s?n/s*100:0,u.br=0!==r?i/r*100:0;var m=t[o-(a[0]-1)],D=m.high,p=m.low,v=m.open,g=(null!==(l=t[o-a[0]])&&void 0!==l?l:t[o-(a[0]-1)]).close;i-=D-g,r-=g-p,n-=D-v,s-=v-p}return u}))}},Pt,Ot,Rt,Bt,_t,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=[];return t.map((function(e,n){var s,o={};if(n>0){var h=t[n-1],l=e.high,u=e.low,c=null!==(s=e.volume)&&void 0!==s?s:0,d=(l+u)/2-(h.high+h.low)/2;if(0===c||l-u===0)o.emv=0;else{var f=c/1e8/(l-u);o.emv=d/f}i+=o.emv,r.push(o.emv),n>=a[0]&&(o.maEmv=i/a[0],i-=r[n-a[0]])}return o}))}},kt,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=[];return t.forEach((function(e,n){var s,o={};if(n>=a[0]){var h=e.close,l=t[n-a[0]].close;o.mtm=h-l,i+=o.mtm,n>=a[0]+a[1]-1&&(o.maMtm=i/a[1],i-=null!==(s=r[n-(a[1]-1)].mtm)&&void 0!==s?s:0)}r.push(o)})),r}},Gt,Vt,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=0,n=[];return t.forEach((function(e,s){var o,h,l,u,c=null!==(o=t[s-1])&&void 0!==o?o:e;e.close<c.close?r-=null!==(h=e.volume)&&void 0!==h?h:0:e.close>c.close&&(r+=null!==(l=e.volume)&&void 0!==l?l:0);var d={obv:r};i+=r,s>=a[0]-1&&(d.maObv=i/a[0],i-=null!==(u=n[s-(a[0]-1)].obv)&&void 0!==u?u:0),n.push(d)})),n}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(t){var e=0;return t.map((function(a,i){var r,n,s={},o=a.close,h=null!==(r=a.volume)&&void 0!==r?r:1,l=(null!==(n=t[i-1])&&void 0!==n?n:a).close,u=0,c=l*h;return 0!==c&&(u=(o-l)/c),e+=u,s.pvt=e,s}))}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=0,n=[],s=[];return t.forEach((function(e,o){var h,l,u={},c=(null!==(h=t[o-1])&&void 0!==h?h:e).close,d=e.close-c>0?1:0;n.push(d),i+=d,o>=a[0]-1&&(u.psy=i/a[0]*100,r+=u.psy,o>=a[0]+a[1]-2&&(u.maPsy=r/a[1],r-=null!==(l=s[o-(a[1]-1)].psy)&&void 0!==l?l:0),i-=n[o-(a[0]-1)]),s.push(u)})),s}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=[],r=0;return t.forEach((function(e,n){var s,o,h={};if(n>=a[0]-1){var l=e.close,u=(null!==(s=t[n-a[0]])&&void 0!==s?s:t[n-(a[0]-1)]).close;h.roc=0!==u?(l-u)/u*100:0,r+=h.roc,n>=a[0]-1+a[1]-1&&(h.maRoc=r/a[1],r-=null!==(o=i[n-(a[1]-1)].roc)&&void 0!==o?o:0)}i.push(h)})),i}},Ht,Yt,Xt,Wt,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(t,e){var a,i,r,n=e.calcParams,s=0,o=0,h=0,l=0,u=[];return t.forEach((function(t,e){var c,d={},f=t.close;if(s+=f,e>=n[0]-1&&(a=e>n[0]-1?(2*f+(n[0]-1)*a)/(n[0]+1):s/n[0],o+=a,e>=2*n[0]-2&&(i=e>2*n[0]-2?(2*a+(n[0]-1)*i)/(n[0]+1):o/n[0],h+=i,e>=3*n[0]-3))){var C=void 0,m=0;e>3*n[0]-3?(C=(2*i+(n[0]-1)*r)/(n[0]+1),m=(C-r)/r*100):C=h/n[0],r=C,d.trix=m,l+=m,e>=3*n[0]+n[1]-4&&(d.maTrix=l/n[1],l-=null!==(c=u[e-(n[1]-1)].trix)&&void 0!==c?c:0)}u.push(d)})),u}},zt,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(t,e){var a=e.calcParams,i=0,r=0,n=0,s=0,o=[];return t.forEach((function(e,h){var l,u,c,d,f,C={},m=e.close,D=(null!==(l=t[h-1])&&void 0!==l?l:e).close,p=null!==(u=e.volume)&&void 0!==u?u:0;if(m>D?i+=p:m<D?r+=p:n+=p,h>=a[0]-1){var v=n/2;C.vr=r+v===0?0:(i+v)/(r+v)*100,s+=C.vr,h>=a[0]+a[1]-2&&(C.maVr=s/a[1],s-=null!==(c=o[h-(a[1]-1)].vr)&&void 0!==c?c:0);var g=t[h-(a[0]-1)],S=null!==(d=t[h-a[0]])&&void 0!==d?d:g,I=g.close,T=null!==(f=g.volume)&&void 0!==f?f:0;I>S.close?i-=T:I<S.close?r-=T:n-=T}o.push(C)})),o}},Kt];function $t(t){var e;return null!==(e=Jt[t])&&void 0!==e?e:null}Qt.forEach((function(t){Jt[t.name]=ut.extend(t)}));var jt=function(){function t(t){this._instances=new Map,this._chartStore=t}return t.prototype._overrideInstance=function(t,e){var a=e.shortName,i=e.series,r=e.calcParams,n=e.precision,s=e.figures,o=e.minValue,h=e.maxValue,l=e.shouldOhlc,u=e.shouldFormatBigNumber,c=e.visible,d=e.zLevel,f=e.styles,C=e.extendData,m=e.regenerateFigures,D=e.createTooltipDataSource,p=e.draw,v=e.calc,g=!1;z(a)&&t.setShortName(a)&&(g=!0),W(i)&&t.setSeries(i)&&(g=!0);var S=!1;V(r)&&t.setCalcParams(r)&&(g=!0,S=!0),V(s)&&t.setFigures(s)&&(g=!0,S=!0),void 0!==o&&t.setMinValue(o)&&(g=!0),void 0!==h&&t.setMinValue(h)&&(g=!0),X(n)&&t.setPrecision(n)&&(g=!0),U(l)&&t.setShouldOhlc(l)&&(g=!0),U(u)&&t.setShouldFormatBigNumber(u)&&(g=!0),U(c)&&t.setVisible(c)&&(g=!0);var I=!1;return X(d)&&t.setZLevel(d)&&(g=!0,I=!0),W(f)&&t.setStyles(f)&&(g=!0),void 0!==C&&t.setExtendData(C)&&(g=!0,S=!0),void 0!==m&&t.setRegenerateFigures(m)&&(g=!0),void 0!==D&&t.setCreateTooltipDataSource(D)&&(g=!0),void 0!==p&&t.setDraw(p)&&(g=!0),H(v)&&(t.calc=v,S=!0),[g,S,I]},t.prototype._sort=function(t){var e;z(t)?null===(e=this._instances.get(t))||void 0===e||e.sort((function(t,e){return t.zLevel-e.zLevel})):this._instances.forEach((function(t){t.sort((function(t,e){return t.zLevel-e.zLevel}))}))},t.prototype.addInstance=function(t,e,a){return p(this,void 0,void 0,(function(){var i,r,n,s,o;return v(this,(function(h){switch(h.label){case 0:return i=t.name,r=this._instances.get(e),W(r)?(n=r.find((function(t){return t.name===i})),W(n)?[4,Promise.reject(new Error("Duplicate indicators."))]:[3,2]):[3,2];case 1:return[2,h.sent()];case 2:return W(r)||(r=[]),s=$t(i),o=new s,this.synchronizeSeriesPrecision(o),this._overrideInstance(o,t),a||(r=[]),r.push(o),this._instances.set(e,r),this._sort(e),[4,o.calcIndicator(this._chartStore.getDataList())];case 3:return[2,h.sent()]}}))}))},t.prototype.getInstances=function(t){var e;return null!==(e=this._instances.get(t))&&void 0!==e?e:[]},t.prototype.removeInstance=function(t,e){var a,i=!1,r=this._instances.get(t);if(W(r)){if(z(e)){var n=r.findIndex((function(t){return t.name===e}));n>-1&&(r.splice(n,1),i=!0)}else this._instances.set(t,[]),i=!0;0===(null===(a=this._instances.get(t))||void 0===a?void 0:a.length)&&this._instances.delete(t)}return i},t.prototype.hasInstances=function(t){return this._instances.has(t)},t.prototype.calcInstance=function(t,e){return p(this,void 0,void 0,(function(){var a,i,r,n,s=this;return v(this,(function(o){switch(o.label){case 0:return a=[],z(t)?z(e)?(i=this._instances.get(e),W(i)&&(r=i.find((function(e){return e.name===t})),W(r)&&a.push(r.calcIndicator(this._chartStore.getDataList())))):this._instances.forEach((function(e){var i=e.find((function(e){return e.name===t}));W(i)&&a.push(i.calcIndicator(s._chartStore.getDataList()))})):this._instances.forEach((function(t){t.forEach((function(t){a.push(t.calcIndicator(s._chartStore.getDataList()))}))})),[4,Promise.all(a)];case 1:return n=o.sent(),[2,n.includes(!0)]}}))}))},t.prototype.getInstanceByPaneId=function(t,e){var a,i,r=function(t){var e=new Map;return t.forEach((function(t){e.set(t.name,t)})),e};if(z(t)){var n=null!==(a=this._instances.get(t))&&void 0!==a?a:[];return z(e)?null!==(i=null===n||void 0===n?void 0:n.find((function(t){return t.name===e})))&&void 0!==i?i:null:r(n)}var s=new Map;return this._instances.forEach((function(t,e){s.set(e,r(t))})),s},t.prototype.synchronizeSeriesPrecision=function(t){var e=this._chartStore.getPrecision(),a=e.price,i=e.volume,r=function(t){switch(t.series){case st.Price:t.setPrecision(a,!0);break;case st.Volume:t.setPrecision(i,!0);break}};W(t)?r(t):this._instances.forEach((function(t){t.forEach((function(t){r(t)}))}))},t.prototype.override=function(t,e){return p(this,void 0,void 0,(function(){var a,i,r,n,s,o,h,l=this;return v(this,(function(u){switch(u.label){case 0:return a=t.name,i=new Map,null!==e?(r=this._instances.get(e),W(r)&&i.set(e,r)):i=this._instances,n=!1,s=[],o=!1,i.forEach((function(e){var i=e.find((function(t){return t.name===a}));if(W(i)){var r=l._overrideInstance(i,t);r[2]&&(o=!0),r[1]?s.push(i.calcIndicator(l._chartStore.getDataList())):r[0]&&(n=!0)}})),o&&this._sort(),[4,Promise.all(s)];case 1:return h=u.sent(),[2,[n,h.includes(!0)]]}}))}))},t}(),Zt=function(){function t(t){this._crosshair={},this._activeIcon=null,this._chartStore=t}return t.prototype.setCrosshair=function(t,e){var a,i,r=this._chartStore.getDataList(),n=null!==t&&void 0!==t?t:{};X(n.x)?(a=this._chartStore.getTimeScaleStore().coordinateToDataIndex(n.x),i=a<0?0:a>r.length-1?r.length-1:a):(a=r.length-1,i=a);var s=r[i],o=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(a),h={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=D(D({},n),{realX:o,kLineData:s,realDataIndex:a,dataIndex:i}),h.x===n.x&&h.y===n.y&&h.paneId===n.paneId||(null!==s&&this._chartStore.getChart().crosshairChange(this._crosshair),null!==e&&void 0!==e&&e||this._chartStore.getChart().updatePane(1))},t.prototype.recalculateCrosshair=function(t){this.setCrosshair(this._crosshair,t)},t.prototype.getCrosshair=function(){return this._crosshair},t.prototype.setActiveIcon=function(t){this._activeIcon=null!==t&&void 0!==t?t:null},t.prototype.getActiveIcon=function(){return this._activeIcon},t.prototype.clear=function(){this.setCrosshair({},!0),this.setActiveIcon()},t}(),qt={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e,a=t.coordinates,i=t.bounding,r=t.overlay,n=t.precision,s=t.thousandsSeparator,o=t.decimalFoldThreshold,h=t.yAxis,l=r.points;if(a.length>0){var u=null===(e=null===h||void 0===h?void 0:h.isInCandle())||void 0===e||e?n.price:n.excludePriceVolumeMax,c=[],d=[],f=i.width;if(a.length>1&&X(l[0].value)&&X(l[1].value)){var C=a[0].y-a[1].y,m=l[0].value-l[1].value;[1,.786,.618,.5,.382,.236,0].forEach((function(t){var e,i=a[1].y+C*t,r=at(et(((null!==(e=l[1].value)&&void 0!==e?e:0)+m*t).toFixed(u),s),o);c.push({coordinates:[{x:0,y:i},{x:f,y:i}]}),d.push({x:0,y:i,text:"".concat(r," (").concat((100*t).toFixed(1),"%)"),baseline:"bottom"})}))}return[{type:"line",attrs:c},{type:"text",isCheckEvent:!1,attrs:d}]}return[]}},te={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding,i={x:0,y:e[0].y};return W(e[1])&&e[0].x<e[1].x&&(i.x=a.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(t){var e=t.points,a=t.performPoint;e[0].value=a.value,e[1].value=a.value},performEventMoveForDrawing:function(t){var e=t.currentStep,a=t.points,i=t.performPoint;2===e&&(a[0].value=i.value)}},ee=function(){function t(){this._children=[],this._callbacks=new Map}return t.prototype.registerEvent=function(t,e){return this._callbacks.set(t,e),this},t.prototype.onEvent=function(t,e,a){var i=this._callbacks.get(t);return!(!W(i)||!this.checkEventOn(e))&&i(e,a)},t.prototype.checkEventOn=function(t){var e,a;try{for(var i=g(this._children),r=i.next();!r.done;r=i.next()){var n=r.value;if(n.checkEventOn(t))return!0}}catch(s){e={error:s}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}return!1},t.prototype.dispatchEvent=function(t,e,a){var i=this._children.length-1;if(i>-1)for(var r=i;r>-1;r--)if(this._children[r].dispatchEvent(t,e,a))return!0;return this.onEvent(t,e,a)},t.prototype.addChild=function(t){return this._children.push(t),this},t.prototype.clear=function(){this._children=[]},t}(),ae=function(t){function e(e){var a=t.call(this)||this;return a.attrs=e.attrs,a.styles=e.styles,a}return s(e,t),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return s(a,e),a.prototype.checkEventOnImp=function(e,a,i){return t.checkEventOn(e,a,i)},a.prototype.drawImp=function(e,a,i){t.draw(e,a,i)},a}(e);return a},e}(ee);function ie(t,e){var a=[];a=a.concat(e);for(var i=0;i<a.length;i++){var r=a[i].coordinates;if(r.length>1)for(var n=1;n<r.length;n++){var s=r[n-1],o=r[n];if(s.x===o.x){if(Math.abs(s.y-t.y)+Math.abs(o.y-t.y)-Math.abs(s.y-o.y)<4&&Math.abs(t.x-s.x)<2)return!0}else{var h=se(s,o),l=re(h,t),u=Math.abs(l-t.y);if(Math.abs(s.x-t.x)+Math.abs(o.x-t.x)-Math.abs(s.x-o.x)<4&&u*u/(h[0]*h[0]+1)<4)return!0}}}return!1}function re(t,e){return null!==t?e.x*t[0]+t[1]:e.y}function ne(t,e,a){var i=se(t,e);return re(i,a)}function se(t,e){var a=t.x-e.x;if(0!==a){var i=(t.y-e.y)/a,r=t.y-i*t.x;return[i,r]}return null}function oe(t,e,a){var i=e.length,r=X(a)?a>0&&a<1?a:0:a?.5:0;if(r>0&&i>2){for(var n=e[0].x,s=e[0].y,o=1;o<i-1;o++){var h=e[o-1],l=e[o],u=e[o+1],c=l.x-h.x,d=l.y-h.y,f=u.x-l.x,C=u.y-l.y,m=u.x-h.x,D=u.y-h.y,p=Math.sqrt(c*c+d*d),v=Math.sqrt(f*f+C*C),g=v/(v+p),S=l.x+m*r*g,I=l.y+D*r*g;S=Math.min(S,Math.max(u.x,l.x)),I=Math.min(I,Math.max(u.y,l.y)),S=Math.max(S,Math.min(u.x,l.x)),I=Math.max(I,Math.min(u.y,l.y)),m=S-l.x,D=I-l.y;var T=l.x-m*p/v,x=l.y-D*p/v;T=Math.min(T,Math.max(h.x,l.x)),x=Math.min(x,Math.max(h.y,l.y)),T=Math.max(T,Math.min(h.x,l.x)),x=Math.max(x,Math.min(h.y,l.y)),m=l.x-T,D=l.y-x,S=l.x+m*v/p,I=l.y+D*v/p,t.bezierCurveTo(n,s,T,x,l.x,l.y),n=S,s=I}var y=e[i-1];t.bezierCurveTo(n,s,y.x,y.y,y.x,y.y)}else for(o=1;o<i;o++)t.lineTo(e[o].x,e[o].y)}function he(t,e,a){var i=[];i=i.concat(e);var r=a.style,n=void 0===r?o.Solid:r,s=a.smooth,h=void 0!==s&&s,l=a.size,u=void 0===l?1:l,c=a.color,d=void 0===c?"currentColor":c,f=a.dashedValue,C=void 0===f?[2,2]:f;t.lineWidth=u,t.strokeStyle=d,n===o.Dashed?t.setLineDash(C):t.setLineDash([]);var m=u%2===1?.5:0;i.forEach((function(e){var a=e.coordinates;a.length>1&&(2!==a.length||a[0].x!==a[1].x&&a[0].y!==a[1].y?(t.save(),u%2===1&&t.translate(.5,.5),t.beginPath(),t.moveTo(a[0].x,a[0].y),oe(t,a,h),t.stroke(),t.closePath(),t.restore()):(t.beginPath(),a[0].x===a[1].x?(t.moveTo(a[0].x+m,a[0].y),t.lineTo(a[1].x+m,a[1].y)):(t.moveTo(a[0].x,a[0].y+m),t.lineTo(a[1].x,a[1].y+m)),t.stroke(),t.closePath()))}))}var le={name:"line",checkEventOn:ie,draw:function(t,e,a){he(t,e,a)}};function ue(t,e,a){var i=null!==a&&void 0!==a?a:0,r=[];if(t.length>1)if(t[0].x===t[1].x){var n=e.height;if(r.push({coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:n}]}),t.length>2){r.push({coordinates:[{x:t[2].x,y:0},{x:t[2].x,y:n}]});for(var s=t[0].x-t[2].x,o=0;o<i;o++){var h=s*(o+1);r.push({coordinates:[{x:t[0].x+h,y:0},{x:t[0].x+h,y:n}]})}}}else{var l=e.width,u=se(t[0],t[1]),c=u[0],d=u[1];if(r.push({coordinates:[{x:0,y:0*c+d},{x:l,y:l*c+d}]}),t.length>2){var f=t[2].y-c*t[2].x;r.push({coordinates:[{x:0,y:0*c+f},{x:l,y:l*c+f}]});for(s=d-f,o=0;o<i;o++){var C=d+s*(o+1);r.push({coordinates:[{x:0,y:0*c+C},{x:l,y:l*c+C}]})}}}return r}var ce={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return[{type:"line",attrs:ue(e,a)}]}},de={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return[{type:"line",attrs:ue(e,a,1)}]}},fe={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e,a=t.coordinates,i=t.bounding,r=t.precision,n=t.overlay,s=t.thousandsSeparator,o=t.decimalFoldThreshold,h=t.yAxis,l=n.points[0].value,u=void 0===l?0:l,c=null===(e=null===h||void 0===h?void 0:h.isInCandle())||void 0===e||e?r.price:r.excludePriceVolumeMax;return[{type:"line",attrs:{coordinates:[a[0],{x:i.width,y:a[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:a[0].x,y:a[0].y,text:at(et(u.toFixed(c),s),o),baseline:"bottom"}}]}};function Ce(t,e){if(t.length>1){var a=void 0;return a=t[0].x===t[1].x&&t[0].y!==t[1].y?t[0].y<t[1].y?{x:t[0].x,y:e.height}:{x:t[0].x,y:0}:t[0].x>t[1].x?{x:0,y:ne(t[0],t[1],{x:0,y:t[0].y})}:{x:e.width,y:ne(t[0],t[1],{x:e.width,y:t[0].y})},{coordinates:[t[0],a]}}return[]}var me={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return[{type:"line",attrs:Ce(e,a)}]}},De={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return 2===e.length?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:a.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:ne(e[0],e[1],{x:0,y:e[0].y})},{x:a.width,y:ne(e[0],e[1],{x:a.width,y:e[0].y})}]}}]:[]}},pe={name:"simpleAnnotation",totalStep:2,styles:{line:{style:o.Dashed}},createPointFigures:function(t){var e,a,i=t.overlay,r=t.coordinates;W(i.extendData)&&(a=H(i.extendData)?i.extendData(i):null!==(e=i.extendData)&&void 0!==e?e:"");var n=r[0].x,s=r[0].y-6,o=s-50,h=o-5;return[{type:"line",attrs:{coordinates:[{x:n,y:s},{x:n,y:o}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:n,y:o},{x:n-4,y:h},{x:n+4,y:h}]},ignoreEvent:!0},{type:"text",attrs:{x:n,y:h,text:null!==a&&void 0!==a?a:"",align:"center",baseline:"bottom"},ignoreEvent:!0}]}},ve={name:"simpleTag",totalStep:2,styles:{line:{style:o.Dashed}},createPointFigures:function(t){var e=t.bounding,a=t.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:a[0].y},{x:e.width,y:a[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(t){var e,a,i,r,n,s=t.overlay,o=t.coordinates,h=t.bounding,l=t.yAxis,u=t.precision,c=null!==(e=null===l||void 0===l?void 0:l.isFromZero())&&void 0!==e&&e;return c?(i="left",r=0):(i="right",r=h.width),W(s.extendData)&&(n=H(s.extendData)?s.extendData(s):null!==(a=s.extendData)&&void 0!==a?a:""),!W(n)&&X(s.points[0].value)&&(n=q(s.points[0].value,u.price)),{type:"text",attrs:{x:r,y:o[0].y,text:null!==n&&void 0!==n?n:"",align:i,baseline:"middle"}}}},ge={},Se=[qt,te,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=[];return 2===e.length&&a.push({coordinates:e}),[{type:"line",attrs:a}]},performEventPressedMove:function(t){var e=t.points,a=t.performPoint;e[0].value=a.value,e[1].value=a.value},performEventMoveForDrawing:function(t){var e=t.currentStep,a=t.points,i=t.performPoint;2===e&&(a[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:a.width,y:e[0].y}]}}]}},ce,de,fe,me,{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates;return 2===e.length?[{type:"line",attrs:{coordinates:e}}]:[]}},De,{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;if(2===e.length){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=a.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(t){var e=t.points,a=t.performPoint;e[0].timestamp=a.timestamp,e[0].dataIndex=a.dataIndex,e[1].timestamp=a.timestamp,e[1].dataIndex=a.dataIndex},performEventMoveForDrawing:function(t){var e=t.currentStep,a=t.points,i=t.performPoint;2===e&&(a[0].timestamp=i.timestamp,a[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates;return 2===e.length?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(t){var e=t.points,a=t.performPoint;e[0].timestamp=a.timestamp,e[0].dataIndex=a.dataIndex,e[1].timestamp=a.timestamp,e[1].dataIndex=a.dataIndex},performEventMoveForDrawing:function(t){var e=t.currentStep,a=t.points,i=t.performPoint;2===e&&(a[0].timestamp=i.timestamp,a[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,a=t.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:a.height}]}}]}},pe,ve];function Ie(t){var e;return null!==(e=ge[t])&&void 0!==e?e:null}Se.forEach((function(t){ge[t.name]=ft.extend(t)}));var Te={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},xe=function(){function t(t){this._instances=new Map,this._progressInstanceInfo=null,this._pressedInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chartStore=t}return t.prototype._overrideInstance=function(t,e){var a=e.id,i=e.groupId,r=e.points,n=e.styles,s=e.lock,o=e.visible,h=e.zLevel,l=e.mode,u=e.modeSensitivity,c=e.extendData,d=e.onDrawStart,f=e.onDrawing,C=e.onDrawEnd,m=e.onClick,D=e.onDoubleClick,p=e.onRightClick,v=e.onPressedMoveStart,g=e.onPressedMoving,S=e.onPressedMoveEnd,I=e.onMouseEnter,T=e.onMouseLeave,x=e.onRemoved,y=e.onSelected,A=e.onDeselected,b=!1,w=!1;return z(a)&&t.setId(a),z(i)&&t.setGroupId(i),V(r)&&t.setPoints(r)&&(b=!0),W(n)&&t.setStyles(n)&&(b=!0),U(s)&&t.setLock(s),U(o)&&t.setVisible(o)&&(b=!0),X(h)&&t.setZLevel(h)&&(b=!0,w=!0),W(l)&&t.setMode(l),X(u)&&t.setModeSensitivity(u),void 0!==c&&t.setExtendData(c)&&(b=!0),void 0!==d&&t.setOnDrawStartCallback(d),void 0!==f&&t.setOnDrawingCallback(f),void 0!==C&&t.setOnDrawEndCallback(C),void 0!==m&&t.setOnClickCallback(m),void 0!==D&&t.setOnDoubleClickCallback(D),void 0!==p&&t.setOnRightClickCallback(p),void 0!==v&&t.setOnPressedMoveStartCallback(v),void 0!==g&&t.setOnPressedMovingCallback(g),void 0!==S&&t.setOnPressedMoveEndCallback(S),void 0!==I&&t.setOnMouseEnterCallback(I),void 0!==T&&t.setOnMouseLeaveCallback(T),void 0!==x&&t.setOnRemovedCallback(x),void 0!==y&&t.setOnSelectedCallback(y),void 0!==A&&t.setOnDeselectedCallback(A),[b,w]},t.prototype.getInstanceById=function(t){var e,a;try{for(var i=g(this._instances),r=i.next();!r.done;r=i.next()){var n=r.value,s=n[1],o=s.find((function(e){return e.id===t}));if(W(o))return o}}catch(h){e={error:h}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}return null!==this._progressInstanceInfo&&this._progressInstanceInfo.instance.id===t?this._progressInstanceInfo.instance:null},t.prototype._sort=function(t){var e;z(t)?null===(e=this._instances.get(t))||void 0===e||e.sort((function(t,e){return t.zLevel-e.zLevel})):this._instances.forEach((function(t){t.sort((function(t,e){return t.zLevel-e.zLevel}))}))},t.prototype.addInstances=function(t,e,a){var i=this,r=t.map((function(t){var r,n,s,o,h=null!==(r=t.id)&&void 0!==r?r:St("overlay_");if(null===i.getInstanceById(h)){var l=Ie(t.name);if(null!==l){var u=new l;u.setPaneId(e);var c=null!==(n=t.groupId)&&void 0!==n?n:h;return t.id=h,t.groupId=c,i._overrideInstance(u,t),u.isDrawing()?i._progressInstanceInfo={paneId:e,instance:u,appointPaneFlag:a}:(i._instances.has(e)||i._instances.set(e,[]),null===(s=i._instances.get(e))||void 0===s||s.push(u)),u.isStart()&&(null===(o=u.onDrawStart)||void 0===o||o.call(u,{overlay:u})),h}}return null}));if(r.some((function(t){return null!==t}))){this._sort();var n=this._chartStore.getChart();n.updatePane(1,e),n.updatePane(1,Te.X_AXIS)}return r},t.prototype.getProgressInstanceInfo=function(){return this._progressInstanceInfo},t.prototype.progressInstanceComplete=function(){var t;if(null!==this._progressInstanceInfo){var e=this._progressInstanceInfo,a=e.instance,i=e.paneId;a.isDrawing()||(this._instances.has(i)||this._instances.set(i,[]),null===(t=this._instances.get(i))||void 0===t||t.push(a),this._sort(i),this._progressInstanceInfo=null)}},t.prototype.updateProgressInstanceInfo=function(t,e){null!==this._progressInstanceInfo&&(U(e)&&e&&(this._progressInstanceInfo.appointPaneFlag=e),this._progressInstanceInfo.paneId=t,this._progressInstanceInfo.instance.setPaneId(t))},t.prototype.getInstances=function(t){var e;if(!z(t)){var a=[];return this._instances.forEach((function(t){a=a.concat(t)})),a}return null!==(e=this._instances.get(t))&&void 0!==e?e:[]},t.prototype.override=function(t){var e=this,a=t.id,i=t.groupId,r=t.name,n=!1,s=!1,o=function(a){var i=e._overrideInstance(a,t);i[0]&&(n=!0),i[1]&&(s=!0)};if(z(a)){var h=this.getInstanceById(a);null!==h&&o(h)}else{var l=z(r),u=z(i);if(this._instances.forEach((function(t){t.forEach((function(t){(l&&t.name===r||u&&t.groupId===i||!l&&!u)&&o(t)}))})),null!==this._progressInstanceInfo){var c=this._progressInstanceInfo.instance;(l&&c.name===r||u&&c.groupId===i||!l&&!u)&&o(c)}}s&&this._sort(),n&&this._chartStore.getChart().updatePane(1)},t.prototype.removeInstance=function(t){var e,a,i,r=function(t,e){if(z(t.id)){if(e.id!==t.id)return!1}else if(z(t.groupId)){if(e.groupId!==t.groupId)return!1}else if(z(t.name)&&e.name!==t.name)return!1;return!0},n=[],s=W(t);if(null!==this._progressInstanceInfo){var o=this._progressInstanceInfo.instance;(!s||s&&r(t,o))&&(n.push(this._progressInstanceInfo.paneId),null===(i=o.onRemoved)||void 0===i||i.call(o,{overlay:o}),this._progressInstanceInfo=null)}if(s){var h=new Map,l=function(e){var a=e[1],i=a.filter((function(a){var i;return!r(t,a)||(n.includes(e[0])||n.push(e[0]),null===(i=a.onRemoved)||void 0===i||i.call(a,{overlay:a}),!1)}));i.length>0&&h.set(e[0],i)};try{for(var u=g(this._instances),c=u.next();!c.done;c=u.next()){var d=c.value;l(d)}}catch(C){e={error:C}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(e)throw e.error}}this._instances=h}else this._instances.forEach((function(t,e){n.push(e),t.forEach((function(t){var e;null===(e=t.onRemoved)||void 0===e||e.call(t,{overlay:t})}))})),this._instances.clear();if(n.length>0){var f=this._chartStore.getChart();n.forEach((function(t){f.updatePane(1,t)})),f.updatePane(1,Te.X_AXIS)}},t.prototype.setPressedInstanceInfo=function(t){this._pressedInstanceInfo=t},t.prototype.getPressedInstanceInfo=function(){return this._pressedInstanceInfo},t.prototype.updatePointPosition=function(t,e){if(t>0){var a=this._chartStore.getDataList();this._instances.forEach((function(i){i.forEach((function(i){var r=i.points;r.forEach((function(i){if(!W(i.timestamp)&&W(i.dataIndex)){e===Dt.Forward&&(i.dataIndex=i.dataIndex+t);var r=a[i.dataIndex];i.timestamp=null===r||void 0===r?void 0:r.timestamp}}))}))}))}},t.prototype.setHoverInstanceInfo=function(t,e){var a,i,r=this._hoverInstanceInfo,n=r.instance,s=r.figureType,o=r.figureKey,h=r.figureIndex;if(((null===n||void 0===n?void 0:n.id)!==(null===(a=t.instance)||void 0===a?void 0:a.id)||s!==t.figureType||h!==t.figureIndex)&&(this._hoverInstanceInfo=t,(null===n||void 0===n?void 0:n.id)!==(null===(i=t.instance)||void 0===i?void 0:i.id))){var l=!1,u=!1;null!==n&&(u=!0,H(n.onMouseLeave)&&(n.onMouseLeave(D({overlay:n,figureKey:o,figureIndex:h},e)),l=!0)),null!==t.instance&&(u=!0,t.instance.setZLevel(dt),H(t.instance.onMouseEnter)&&(t.instance.onMouseEnter(D({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),l=!0)),u&&this._sort(),l||this._chartStore.getChart().updatePane(1)}},t.prototype.getHoverInstanceInfo=function(){return this._hoverInstanceInfo},t.prototype.setClickInstanceInfo=function(t,e){var a,i,r,n,s,o,h,l,u,c=this._clickInstanceInfo,d=c.paneId,f=c.instance,C=c.figureType,m=c.figureKey,p=c.figureIndex;if(null!==(i=null===(a=t.instance)||void 0===a?void 0:a.isDrawing())&&void 0!==i&&i||null===(n=null===(r=t.instance)||void 0===r?void 0:r.onClick)||void 0===n||n.call(r,D({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),((null===f||void 0===f?void 0:f.id)!==(null===(s=t.instance)||void 0===s?void 0:s.id)||C!==t.figureType||p!==t.figureIndex)&&(this._clickInstanceInfo=t,(null===f||void 0===f?void 0:f.id)!==(null===(o=t.instance)||void 0===o?void 0:o.id))){null===(h=null===f||void 0===f?void 0:f.onDeselected)||void 0===h||h.call(f,D({overlay:f,figureKey:m,figureIndex:p},e)),null===(u=null===(l=t.instance)||void 0===l?void 0:l.onSelected)||void 0===u||u.call(l,D({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},e));var v=this._chartStore.getChart();v.updatePane(1,t.paneId),d!==t.paneId&&v.updatePane(1,d),v.updatePane(1,Te.X_AXIS)}},t.prototype.getClickInstanceInfo=function(){return this._clickInstanceInfo},t.prototype.isEmpty=function(){return 0===this._instances.size&&null===this._progressInstanceInfo},t.prototype.isDrawing=function(){var t,e;return null!==this._progressInstanceInfo&&null!==(e=null===(t=this._progressInstanceInfo)||void 0===t?void 0:t.instance.isDrawing())&&void 0!==e&&e},t}(),ye=function(){function t(){this._actions=new Map}return t.prototype.execute=function(t,e){var a;null===(a=this._actions.get(t))||void 0===a||a.execute(e)},t.prototype.subscribe=function(t,e){var a;this._actions.has(t)||this._actions.set(t,new ot),null===(a=this._actions.get(t))||void 0===a||a.subscribe(e)},t.prototype.unsubscribe=function(t,e){var a=this._actions.get(t);W(a)&&(a.unsubscribe(e),a.isEmpty()&&this._actions.delete(t))},t.prototype.has=function(t){var e=this._actions.get(t);return W(e)&&!e.isEmpty()},t}(),Ae={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function be(t){var e;return null!==(e=Ae[t])&&void 0!==e?e:null}var we=function(){function t(t,e){this._styles=function(){return{grid:F(),candle:M(),indicator:L(),xAxis:E(),yAxis:N(),separator:R(),crosshair:P(),overlay:O()}}(),this._customApi=function(){return{formatDate:Z,formatBigNumber:tt}}(),this._locale="en-US",this._precision={price:2,volume:0},this._thousandsSeparator=",",this._decimalFoldThreshold=3,this._dataList=[],this._loadMoreCallback=null,this._loadDataCallback=null,this._loading=!0,this._forwardMore=!0,this._backwardMore=!0,this._timeScaleStore=new Mt(this),this._indicatorStore=new jt(this),this._overlayStore=new xe(this),this._tooltipStore=new Zt(this),this._actionStore=new ye,this._visibleDataList=[],this._chart=t,this.setOptions(e)}return t.prototype.adjustVisibleDataList=function(){this._visibleDataList=[];for(var t=this._timeScaleStore.getVisibleRange(),e=t.realFrom,a=t.realTo,i=e;i<a;i++){var r=this._dataList[i],n=this._timeScaleStore.dataIndexToCoordinate(i);this._visibleDataList.push({dataIndex:i,x:n,data:r})}},t.prototype.setOptions=function(t){var e,a,i,r;if(W(t)){var n=t.locale,s=t.timezone,o=t.styles,h=t.customApi,l=t.thousandsSeparator,u=t.decimalFoldThreshold;if(z(n)&&(this._locale=n),z(s)&&this._timeScaleStore.setTimezone(s),W(o)){var c=null;c=z(o)?be(o):o,k(this._styles,c),V(null===(a=null===(e=null===c||void 0===c?void 0:c.candle)||void 0===e?void 0:e.tooltip)||void 0===a?void 0:a.custom)&&(this._styles.candle.tooltip.custom=null===(r=null===(i=null===c||void 0===c?void 0:c.candle)||void 0===i?void 0:i.tooltip)||void 0===r?void 0:r.custom)}W(h)&&k(this._customApi,h),z(l)&&(this._thousandsSeparator=l),X(u)&&u>0&&(this._decimalFoldThreshold=u)}return this},t.prototype.getStyles=function(){return this._styles},t.prototype.getLocale=function(){return this._locale},t.prototype.getCustomApi=function(){return this._customApi},t.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},t.prototype.getDecimalFoldThreshold=function(){return this._decimalFoldThreshold},t.prototype.getPrecision=function(){return this._precision},t.prototype.setPrecision=function(t){return this._precision=t,this._indicatorStore.synchronizeSeriesPrecision(),this},t.prototype.getDataList=function(){return this._dataList},t.prototype.getVisibleFirstData=function(){var t,e=this._timeScaleStore.getVisibleRange().from;return null!==(t=this._dataList[e])&&void 0!==t?t:null},t.prototype.getVisibleDataList=function(){return this._visibleDataList},t.prototype.addData=function(t,e,a){return p(this,void 0,void 0,(function(){var i,r,n,s,o,h,l;return v(this,(function(u){switch(u.label){case 0:if(i=!1,r=!1,n=0,V(t)){switch(n=t.length,e){case Dt.Init:this.clear(),this._dataList=t,this._forwardMore=null===a||void 0===a||a,this._timeScaleStore.resetOffsetRightDistance(),r=!0;break;case Dt.Backward:this._dataList=this._dataList.concat(t),this._backwardMore=null!==a&&void 0!==a&&a,r=n>0;break;case Dt.Forward:this._dataList=t.concat(this._dataList),this._forwardMore=null!==a&&void 0!==a&&a,r=n>0}this._loading=!1,i=!0}else s=this._dataList.length,o=t.timestamp,h=j(this._dataList[s-1],"timestamp",0),o>h?(this._dataList.push(t),l=this._timeScaleStore.getLastBarRightSideDiffBarCount(),l<0&&this._timeScaleStore.setLastBarRightSideDiffBarCount(--l),n=1,i=!0,r=!0):o===h&&(this._dataList[s-1]=t,i=!0,r=!0);if(!i)return[3,5];u.label=1;case 1:return u.trys.push([1,4,,5]),this._overlayStore.updatePointPosition(n,e),r?(this._timeScaleStore.adjustVisibleRange(),this._tooltipStore.recalculateCrosshair(!0),[4,this._indicatorStore.calcInstance()]):[3,3];case 2:u.sent(),this._chart.adjustPaneViewport(!1,!0,!0,!0),u.label=3;case 3:return this._actionStore.execute(J.OnDataReady),[3,5];case 4:return u.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.setLoadMoreCallback=function(t){this._loadMoreCallback=t},t.prototype.executeLoadMoreCallback=function(t){this._forwardMore&&!this._loading&&W(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(t))},t.prototype.setLoadDataCallback=function(t){this._loadDataCallback=t},t.prototype.executeLoadDataCallback=function(t){var e=this;if(!this._loading&&W(this._loadDataCallback)&&(this._forwardMore&&t.type===Dt.Forward||this._backwardMore&&t.type===Dt.Backward)){this._loading=!0,this._loadDataCallback(D(D({},t),{callback:function(a,i){e.addData(a,t.type,i).then((function(){})).catch((function(){}))}}))}},t.prototype.clear=function(){this._forwardMore=!0,this._backwardMore=!0,this._loading=!0,this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear(),this._tooltipStore.clear()},t.prototype.getTimeScaleStore=function(){return this._timeScaleStore},t.prototype.getIndicatorStore=function(){return this._indicatorStore},t.prototype.getOverlayStore=function(){return this._overlayStore},t.prototype.getTooltipStore=function(){return this._tooltipStore},t.prototype.getActionStore=function(){return this._actionStore},t.prototype.getChart=function(){return this._chart},t}(),Fe={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"};var Me=function(){function t(t,e){var a=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=-1,this._mediaQueryListener=function(){var t=it(a._element);a._nextPixelWidth=Math.round(a._element.clientWidth*t),a._nextPixelHeight=Math.round(a._element.clientHeight*t),a._resetPixelRatio()},this._listener=e,this._element=It("canvas",t),this._ctx=this._element.getContext("2d",{willReadFrequently:!0}),function(){return p(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){var e=new ResizeObserver((function(a){t(a.every((function(t){return"devicePixelContentBoxSize"in t}))),e.disconnect()}));e.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1}))];case 1:return[2,t.sent()]}}))}))}().then((function(t){a._supportedDevicePixelContentBox=t,t?(a._resizeObserver=new ResizeObserver((function(t){var e,i=t.find((function(t){return t.target===a._element})),r=null===(e=null===i||void 0===i?void 0:i.devicePixelContentBoxSize)||void 0===e?void 0:e[0];W(r)&&(a._nextPixelWidth=r.inlineSize,a._nextPixelHeight=r.blockSize,a._pixelWidth===a._nextPixelWidth&&a._pixelHeight===a._nextPixelHeight||a._resetPixelRatio())})),a._resizeObserver.observe(a._element,{box:"device-pixel-content-box"})):(a._mediaQueryList=window.matchMedia("(resolution: ".concat(it(a._element),"dppx)")),a._mediaQueryList.addListener(a._mediaQueryListener))})).catch((function(t){return!1}))}return t.prototype._resetPixelRatio=function(){var t=this;this._executeListener((function(){var e=t._element.clientWidth,a=t._element.clientHeight,i=t._nextPixelWidth/e,r=t._nextPixelHeight/a;t._width=e,t._height=a,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight,t._ctx.scale(i,r)}))},t.prototype._executeListener=function(t){var e=this;-1===this._requestAnimationId&&(this._requestAnimationId=Ct((function(){e._ctx.clearRect(0,0,e._width,e._height),null===t||void 0===t||t(),e._listener(),e._requestAnimationId=-1})))},t.prototype.update=function(t,e){if(this._width!==t||this._height!==e){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(e,"px"),!this._supportedDevicePixelContentBox){var a=it(this._element);this._nextPixelWidth=Math.round(t*a),this._nextPixelHeight=Math.round(e*a),this._resetPixelRatio()}}else this._executeListener()},t.prototype.getElement=function(){return this._element},t.prototype.getContext=function(){return this._ctx},t.prototype.destroy=function(){var t,e;null===(t=this._resizeObserver)||void 0===t||t.unobserve(this._element),null===(e=this._mediaQueryList)||void 0===e||e.removeListener(this._mediaQueryListener)},t}();function Le(t){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return W(t)&&k(e,t),e}var Ee=function(t){function e(e,a){var i=t.call(this)||this;return i._bounding=Le(),i._pane=a,i.init(e),i}return s(e,t),e.prototype.init=function(t){this._rootContainer=t,this._container=this.createContainer(),t.appendChild(this._container)},e.prototype.setBounding=function(t){return k(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,null!==t&&void 0!==t?t:3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(ee),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.init=function(e){var a=this;t.prototype.init.call(this,e),this._mainCanvas=new Me({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},(function(){a.updateMain(a._mainCanvas.getContext())})),this._overlayCanvas=new Me({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},(function(){a.updateOverlay(a._overlayCanvas.getContext())}));var i=this.getContainer();i.appendChild(this._mainCanvas.getElement()),i.appendChild(this._overlayCanvas.getElement())},e.prototype.createContainer=function(){return It("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,e,a){var i=e.width,r=e.height,n=e.left;t.style.left="".concat(n,"px");var s=a,o=t.clientWidth,h=t.clientHeight;switch(i===o&&r===h||(t.style.width="".concat(i,"px"),t.style.height="".concat(r,"px"),s=3),s){case 0:this._mainCanvas.update(i,r);break;case 1:this._overlayCanvas.update(i,r);break;case 3:case 4:this._mainCanvas.update(i,r),this._overlayCanvas.update(i,r);break}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var e=this.getBounding(),a=e.width,i=e.height,r=It("canvas",{width:"".concat(a,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),n=r.getContext("2d"),s=it(r);return r.width=a*s,r.height=i*s,n.scale(s,s),n.drawImage(this._mainCanvas.getElement(),0,0,a,i),t&&n.drawImage(this._overlayCanvas.getElement(),0,0,a,i),r},e}(Ee);function Pe(t){return"transparent"===t||"none"===t||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(t)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(t)}function Oe(t,e){var a=[];a=a.concat(e);for(var i=0;i<a.length;i++){var r=a[i],n=r.x,s=r.y,o=r.r,h=t.x-n,l=t.y-s;if(!(h*h+l*l>o*o))return!0}return!1}function Re(t,e,a){var i=[];i=i.concat(e);var r=a.style,n=void 0===r?h.Fill:r,s=a.color,l=void 0===s?"currentColor":s,u=a.borderSize,c=void 0===u?1:u,d=a.borderColor,f=void 0===d?"currentColor":d,C=a.borderStyle,m=void 0===C?o.Solid:C,D=a.borderDashedValue,p=void 0===D?[2,2]:D,v=(n===h.Fill||a.style===h.StrokeFill)&&(!z(l)||!Pe(l));v&&(t.fillStyle=l,i.forEach((function(e){var a=e.x,i=e.y,r=e.r;t.beginPath(),t.arc(a,i,r,0,2*Math.PI),t.closePath(),t.fill()}))),(n===h.Stroke||a.style===h.StrokeFill)&&c>0&&!Pe(f)&&(t.strokeStyle=f,t.lineWidth=c,m===o.Dashed?t.setLineDash(p):t.setLineDash([]),i.forEach((function(e){var a=e.x,i=e.y,r=e.r;(!v||r>c)&&(t.beginPath(),t.arc(a,i,r,0,2*Math.PI),t.closePath(),t.stroke())})))}var Be={name:"circle",checkEventOn:Oe,draw:function(t,e,a){Re(t,e,a)}};function _e(t,e){var a=[];a=a.concat(e);for(var i=0;i<a.length;i++){for(var r=!1,n=a[i].coordinates,s=0,o=n.length-1;s<n.length;o=s++)n[s].y>t.y!==n[o].y>t.y&&t.x<(n[o].x-n[s].x)*(t.y-n[s].y)/(n[o].y-n[s].y)+n[s].x&&(r=!r);if(r)return!0}return!1}function ke(t,e,a){var i=[];i=i.concat(e);var r=a.style,n=void 0===r?h.Fill:r,s=a.color,l=void 0===s?"currentColor":s,u=a.borderSize,c=void 0===u?1:u,d=a.borderColor,f=void 0===d?"currentColor":d,C=a.borderStyle,m=void 0===C?o.Solid:C,D=a.borderDashedValue,p=void 0===D?[2,2]:D;n!==h.Fill&&a.style!==h.StrokeFill||z(l)&&Pe(l)||(t.fillStyle=l,i.forEach((function(e){var a=e.coordinates;t.beginPath(),t.moveTo(a[0].x,a[0].y);for(var i=1;i<a.length;i++)t.lineTo(a[i].x,a[i].y);t.closePath(),t.fill()}))),(n===h.Stroke||a.style===h.StrokeFill)&&c>0&&!Pe(f)&&(t.strokeStyle=f,t.lineWidth=c,m===o.Dashed?t.setLineDash(p):t.setLineDash([]),i.forEach((function(e){var a=e.coordinates;t.beginPath(),t.moveTo(a[0].x,a[0].y);for(var i=1;i<a.length;i++)t.lineTo(a[i].x,a[i].y);t.closePath(),t.stroke()})))}var Ge={name:"polygon",checkEventOn:_e,draw:function(t,e,a){ke(t,e,a)}};function Ve(t,e){var a=[];a=a.concat(e);for(var i=0;i<a.length;i++){var r=a[i],n=r.x,s=r.width;s<4&&(n-=2,s=4);var o=r.y,h=r.height;if(h<4&&(o-=2,h=4),t.x>=n&&t.x<=n+s&&t.y>=o&&t.y<=o+h)return!0}return!1}function He(t,e,a){var i,r=[];r=r.concat(e);var n=a.style,s=void 0===n?h.Fill:n,l=a.color,u=void 0===l?"transparent":l,c=a.borderSize,d=void 0===c?1:c,f=a.borderColor,C=void 0===f?"transparent":f,m=a.borderStyle,D=void 0===m?o.Solid:m,p=a.borderRadius,v=void 0===p?0:p,g=a.borderDashedValue,S=void 0===g?[2,2]:g,I=null!==(i=t.roundRect)&&void 0!==i?i:t.rect,T=(s===h.Fill||a.style===h.StrokeFill)&&(!z(u)||!Pe(u));if(T&&(t.fillStyle=u,r.forEach((function(e){var a=e.x,i=e.y,r=e.width,n=e.height;t.beginPath(),I.call(t,a,i,r,n,v),t.closePath(),t.fill()}))),(s===h.Stroke||a.style===h.StrokeFill)&&d>0&&!Pe(C)){t.strokeStyle=C,t.fillStyle=C,t.lineWidth=d,D===o.Dashed?t.setLineDash(S):t.setLineDash([]);var x=d%2===1?.5:0,y=Math.round(2*x);r.forEach((function(e){var a=e.x,i=e.y,r=e.width,n=e.height;r>2*d&&n>2*d?(t.beginPath(),I.call(t,a+x,i+x,r-y,n-y,v),t.closePath(),t.stroke()):T||t.fillRect(a,i,r,n)}))}}var Ye={name:"rect",checkEventOn:Ve,draw:function(t,e,a){He(t,e,a)}};function Xe(t,e){var a,i,r=e.size,n=void 0===r?12:r,s=e.paddingLeft,o=void 0===s?0:s,h=e.paddingTop,l=void 0===h?0:h,u=e.paddingRight,c=void 0===u?0:u,d=e.paddingBottom,f=void 0===d?0:d,C=e.weight,m=void 0===C?"normal":C,D=e.family,p=t.x,v=t.y,g=t.text,S=t.align,I=void 0===S?"left":S,T=t.baseline,x=void 0===T?"top":T,y=t.width,A=t.height,b=null!==y&&void 0!==y?y:o+nt(g,n,m,D)+c,w=null!==A&&void 0!==A?A:l+n+f;switch(I){case"left":case"start":a=p;break;case"right":case"end":a=p-b;break;default:a=p-b/2;break}switch(x){case"top":case"hanging":i=v;break;case"bottom":case"ideographic":case"alphabetic":i=v-w;break;default:i=v-w/2;break}return{x:a,y:i,width:b,height:w}}function We(t,e,a){var i=[];i=i.concat(e);for(var r=0;r<i.length;r++){var n=Xe(i[r],a),s=n.x,o=n.y,h=n.width,l=n.height;if(t.x>=s&&t.x<=s+h&&t.y>=o&&t.y<=o+l)return!0}return!1}function Ue(t,e,a){var i=[];i=i.concat(e);var r=a.color,n=void 0===r?"currentColor":r,s=a.size,o=void 0===s?12:s,h=a.family,l=a.weight,u=a.paddingLeft,c=void 0===u?0:u,d=a.paddingTop,f=void 0===d?0:d,C=a.paddingRight,m=void 0===C?0:C,p=i.map((function(t){return Xe(t,a)}));He(t,p,D(D({},a),{color:a.backgroundColor})),t.textAlign="left",t.textBaseline="top",t.font=rt(o,l,h),t.fillStyle=n,i.forEach((function(e,a){var i=p[a];t.fillText(e.text,i.x+c,i.y+f,i.width-c-m)}))}var ze={name:"text",checkEventOn:We,draw:function(t,e,a){Ue(t,e,a)}},Ke=ze,Je=Ue;function Qe(t,e){var a=t.x-e.x,i=t.y-e.y;return Math.sqrt(a*a+i*i)}function $e(t,e){var a=[];a=a.concat(e);for(var i=0;i<a.length;i++){var r=a[i];if(Math.abs(Qe(t,r)-r.r)<2){var n=r.r,s=r.startAngle,o=r.endAngle,h=n*Math.cos(s)+r.x,l=n*Math.sin(s)+r.y,u=n*Math.cos(o)+r.x,c=n*Math.sin(o)+r.y;if(t.x<=Math.max(h,u)+2&&t.x>=Math.min(h,u)-2&&t.y<=Math.max(l,c)+2&&t.y>=Math.min(l,c)-2)return!0}}return!1}function je(t,e,a){var i=[];i=i.concat(e);var r=a.style,n=void 0===r?o.Solid:r,s=a.size,h=void 0===s?1:s,l=a.color,u=void 0===l?"currentColor":l,c=a.dashedValue,d=void 0===c?[2,2]:c;t.lineWidth=h,t.strokeStyle=u,n===o.Dashed?t.setLineDash(d):t.setLineDash([]),i.forEach((function(e){var a=e.x,i=e.y,r=e.r,n=e.startAngle,s=e.endAngle;t.beginPath(),t.arc(a,i,r,n,s),t.stroke(),t.closePath()}))}var Ze={name:"arc",checkEventOn:$e,draw:function(t,e,a){je(t,e,a)}},qe={},ta=[Be,le,Ge,Ye,ze,Ke,Ze];ta.forEach((function(t){qe[t.name]=ae.extend(t)}));var ea=function(t){function e(e){var a=t.call(this)||this;return a._widget=e,a}return s(e,t),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,e){var a=function(t){var e;return null!==(e=qe[t])&&void 0!==e?e:null}(t.name);if(null!==a){var i=new a(t);if(W(e)){for(var r in e)e.hasOwnProperty(r)&&i.registerEvent(r,e[r]);this.addChild(i)}return i}return null},e.prototype.draw=function(t){this.clear(),this.drawImp(t)},e}(ee),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e,a,i=this.getWidget(),r=this.getWidget().getPane(),n=r.getChart(),s=i.getBounding(),o=n.getStyles().grid,h=o.show;if(h){t.save(),t.globalCompositeOperation="destination-over";var l=o.horizontal,u=l.show;if(u){var c=r.getAxisComponent(),d=c.getTicks().map((function(t){return{coordinates:[{x:0,y:t.coord},{x:s.width,y:t.coord}]}}));null===(e=this.createFigure({name:"line",attrs:d,styles:l}))||void 0===e||e.draw(t)}var f=o.vertical,C=f.show;if(C){var m=n.getXAxisPane().getAxisComponent();d=m.getTicks().map((function(t){return{coordinates:[{x:t.coord,y:0},{x:t.coord,y:s.height}]}}));null===(a=this.createFigure({name:"line",attrs:d,styles:f}))||void 0===a||a.draw(t)}t.restore()}},e}(ea),ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.eachChildren=function(t){var e=this.getWidget().getPane(),a=e.getChart().getChartStore(),i=a.getVisibleDataList(),r=a.getTimeScaleStore().getBarSpace();i.forEach((function(e,a){t(e,r,a)}))},e}(ea),ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._boundCandleBarClickEvent=function(t){return function(){return e.getWidget().getPane().getChart().getChartStore().getActionStore().execute(J.OnCandleBarClick,t),!1}},e}return s(e,t),e.prototype.drawImp=function(t){var e=this,a=this.getWidget().getPane(),i=a.getId()===Te.CANDLE,r=a.getChart().getChartStore(),n=this.getCandleBarOptions(r);if(null!==n){var s=0,o=0;if(n.type===f.Ohlc){var h=r.getTimeScaleStore().getBarSpace().gapBar;s=Math.min(Math.max(Math.round(.2*h),1),8),s>2&&s%2===1&&s--,o=Math.floor(o/2)}var l=a.getAxisComponent();this.eachChildren((function(a,r){var h=a.data,u=a.x;if(W(h)){var c=h.open,d=h.high,C=h.low,m=h.close,D=n.type,p=n.styles,v=[];m>c?(v[0]=p.upColor,v[1]=p.upBorderColor,v[2]=p.upWickColor):m<c?(v[0]=p.downColor,v[1]=p.downBorderColor,v[2]=p.downWickColor):(v[0]=p.noChangeColor,v[1]=p.noChangeBorderColor,v[2]=p.noChangeWickColor);var g=l.convertToPixel(c),S=l.convertToPixel(m),I=[g,S,l.convertToPixel(d),l.convertToPixel(C)];I.sort((function(t,e){return t-e}));var T=[];switch(D){case f.CandleSolid:T=e._createSolidBar(u,I,r,v);break;case f.CandleStroke:T=e._createStrokeBar(u,I,r,v);break;case f.CandleUpStroke:T=m>c?e._createStrokeBar(u,I,r,v):e._createSolidBar(u,I,r,v);break;case f.CandleDownStroke:T=c>m?e._createStrokeBar(u,I,r,v):e._createSolidBar(u,I,r,v);break;case f.Ohlc:T=[{name:"rect",attrs:[{x:u-o,y:I[0],width:s,height:I[3]-I[0]},{x:u-r.halfGapBar,y:g+s>I[3]?I[3]-s:g,width:r.halfGapBar,height:s},{x:u+o,y:S+s>I[3]?I[3]-s:S,width:r.halfGapBar-o,height:s}],styles:{color:v[0]}}];break}T.forEach((function(r){var n,s;i&&(s={mouseClickEvent:e._boundCandleBarClickEvent(a)}),null===(n=e.createFigure(r,s))||void 0===n||n.draw(t)}))}}))}},e.prototype.getCandleBarOptions=function(t){var e=t.getStyles().candle;return{type:e.type,styles:e.bar}},e.prototype._createSolidBar=function(t,e,a,i){return[{name:"rect",attrs:{x:t,y:e[0],width:1,height:e[3]-e[0]},styles:{color:i[2]}},{name:"rect",attrs:{x:t-a.halfGapBar,y:e[1],width:a.gapBar,height:Math.max(1,e[2]-e[1])},styles:{style:h.StrokeFill,color:i[0],borderColor:i[1]}}]},e.prototype._createStrokeBar=function(t,e,a,i){return[{name:"rect",attrs:[{x:t,y:e[0],width:1,height:e[1]-e[0]},{x:t,y:e[2],width:1,height:e[3]-e[2]}],styles:{color:i[2]}},{name:"rect",attrs:{x:t-a.halfGapBar,y:e[1],width:a.gapBar,height:Math.max(1,e[2]-e[1])},styles:{style:h.Stroke,borderColor:i[1]}}]},e}(ia),na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getCandleBarOptions=function(t){var e,a,i=this.getWidget().getPane(),r=i.getAxisComponent();if(!r.isInCandle()){var n=t.getIndicatorStore().getInstances(i.getId());try{for(var s=g(n),o=s.next();!o.done;o=s.next()){var h=o.value;if(h.shouldOhlc&&h.visible){var l=h.styles,u=t.getStyles().indicator,c=j(l,"ohlc.upColor",u.ohlc.upColor),d=j(l,"ohlc.downColor",u.ohlc.downColor),C=j(l,"ohlc.noChangeColor",u.ohlc.noChangeColor);return{type:f.Ohlc,styles:{upColor:c,downColor:d,noChangeColor:C,upBorderColor:c,downBorderColor:d,noChangeBorderColor:C,upWickColor:c,downWickColor:d,noChangeWickColor:C}}}}}catch(m){e={error:m}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(e)throw e.error}}}return null},e.prototype.drawImp=function(e){var a=this;t.prototype.drawImp.call(this,e);var i=this.getWidget(),r=i.getPane(),n=r.getChart(),s=i.getBounding(),o=n.getXAxisPane().getAxisComponent(),h=r.getAxisComponent(),l=n.getChartStore(),u=l.getDataList(),c=l.getTimeScaleStore(),d=c.getVisibleRange(),f=l.getIndicatorStore().getInstances(r.getId()),C=l.getStyles().indicator;e.save(),f.forEach((function(t){var i;if(t.visible){t.zLevel<0?e.globalCompositeOperation="destination-over":e.globalCompositeOperation="source-over";var r=!1;if(null!==t.draw&&(e.save(),r=null!==(i=t.draw({ctx:e,kLineDataList:u,indicator:t,visibleRange:d,bounding:s,barSpace:c.getBarSpace(),defaultStyles:C,xAxis:o,yAxis:h}))&&void 0!==i&&i,e.restore()),!r){var n=t.result,l=[];a.eachChildren((function(i,r){var c,d,f,m=r.halfGapBar,D=i.dataIndex,p=i.x,v=o.convertToPixel(D-1),g=o.convertToPixel(D+1),S=null!==(c=n[D-1])&&void 0!==c?c:null,I=null!==(d=n[D])&&void 0!==d?d:null,T=null!==(f=n[D+1])&&void 0!==f?f:null,x={x:v},y={x:p},A={x:g};t.figures.forEach((function(t){var e=t.key,a=null===S||void 0===S?void 0:S[e];X(a)&&(x[e]=h.convertToPixel(a));var i=null===I||void 0===I?void 0:I[e];X(i)&&(y[e]=h.convertToPixel(i));var r=null===T||void 0===T?void 0:T[e];X(r)&&(A[e]=h.convertToPixel(r))})),ht(u,t,D,C,(function(t,i,n){var u,c,d;if(W(null===I||void 0===I?void 0:I[t.key])){var f=y[t.key],C=null===(u=t.attrs)||void 0===u?void 0:u.call(t,{data:{prev:S,current:I,next:T},coordinate:{prev:x,current:y,next:A},bounding:s,barSpace:r,xAxis:o,yAxis:h});if(!W(C))switch(t.type){case"circle":C={x:p,y:f,r:Math.max(1,m)};break;case"rect":case"bar":var D=null!==(c=t.baseValue)&&void 0!==c?c:h.getRange().from,v=h.convertToPixel(D),g=Math.abs(v-f);D!==(null===I||void 0===I?void 0:I[t.key])&&(g=Math.max(1,g));var b=void 0;b=f>v?v:f,C={x:p-m,y:b,width:Math.max(1,2*m),height:g};break;case"line":W(l[n])||(l[n]=[]),X(y[t.key])&&X(A[t.key])&&l[n].push({coordinates:[{x:y.x,y:y[t.key]},{x:A.x,y:A[t.key]}],styles:i});break}var w=t.type;W(C)&&"line"!==w&&(null===(d=a.createFigure({name:"bar"===w?"rect":w,attrs:C,styles:i}))||void 0===d||d.draw(e))}}))})),l.forEach((function(t){if(t.length>1){for(var i=[{coordinates:[t[0].coordinates[0],t[0].coordinates[1]],styles:t[0].styles}],r=1;r<t.length;r++){var n=i[i.length-1],s=t[r],o=n.coordinates[n.coordinates.length-1];o.x===s.coordinates[0].x&&o.y===s.coordinates[0].y&&n.styles.style===s.styles.style&&n.styles.color===s.styles.color&&n.styles.size===s.styles.size&&n.styles.smooth===s.styles.smooth&&n.styles.dashedValue[0]===s.styles.dashedValue[0]&&n.styles.dashedValue[1]===s.styles.dashedValue[1]?n.coordinates.push(s.coordinates[1]):i.push({coordinates:[s.coordinates[0],s.coordinates[1]],styles:s.styles})}i.forEach((function(t){var i,r=t.coordinates,n=t.styles;null===(i=a.createFigure({name:"line",attrs:{coordinates:r},styles:n}))||void 0===i||i.draw(e)}))}}))}}})),e.restore()},e}(ra),sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),a=e.getPane(),i=e.getBounding(),r=e.getPane().getChart().getChartStore(),n=r.getTooltipStore().getCrosshair(),s=r.getStyles().crosshair;if(z(n.paneId)&&s.show){if(n.paneId===a.getId()){var o=n.y;this._drawLine(t,[{x:0,y:o},{x:i.width,y:o}],s.horizontal)}var h=n.realX;this._drawLine(t,[{x:h,y:0},{x:h,y:i.height}],s.vertical)}},e.prototype._drawLine=function(t,e,a){var i;if(a.show){var r=a.line;r.show&&(null===(i=this.createFigure({name:"line",attrs:{coordinates:e},styles:r}))||void 0===i||i.draw(t))}},e}(ea),oa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._boundIconClickEvent=function(t){return function(){var a=e.getWidget().getPane();return a.getChart().getChartStore().getActionStore().execute(J.OnTooltipIconClick,D({},t)),!0}},e._boundIconMouseMoveEvent=function(t){return function(){var a=e.getWidget().getPane(),i=a.getChart().getChartStore().getTooltipStore();return i.setActiveIcon(D({},t)),!0}},e}return s(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),a=e.getPane(),i=a.getChart().getChartStore(),r=i.getTooltipStore().getCrosshair();if(W(r.kLineData)){var n=e.getBounding(),s=i.getCustomApi(),o=i.getThousandsSeparator(),h=i.getDecimalFoldThreshold(),l=i.getIndicatorStore().getInstances(a.getId()),u=i.getTooltipStore().getActiveIcon(),c=i.getStyles().indicator,d=c.tooltip,f=d.offsetLeft,C=d.offsetTop,m=d.offsetRight;this.drawIndicatorTooltip(t,a.getId(),i.getDataList(),r,u,l,s,o,h,f,C,n.width-m,c)}},e.prototype.drawIndicatorTooltip=function(t,e,a,i,r,n,s,o,h,l,u,c,d){var f=this,C=d.tooltip;if(this.isDrawTooltip(i,C)){var m=C.text;n.forEach((function(n){var D=0,p={x:l,y:u},v=f.getIndicatorTooltipData(a,i,n,s,o,h,d),g=v.name,I=v.calcParamsText,T=v.values,x=v.icons,y=g.length>0,A=T.length>0;if(y||A){var b=S(f.classifyTooltipIcons(x),3),w=b[0],F=b[1],M=b[2];if(D=f.drawStandardTooltipIcons(t,r,w,p,e,n.name,l,D,c),y){var L=g;I.length>0&&(L="".concat(L).concat(I)),D=f.drawStandardTooltipLegends(t,[{title:{text:"",color:m.color},value:{text:L,color:m.color}}],p,l,D,c,m)}D=f.drawStandardTooltipIcons(t,r,F,p,e,n.name,l,D,c),A&&(D=f.drawStandardTooltipLegends(t,T,p,l,D,c,C.text)),D=f.drawStandardTooltipIcons(t,r,M,p,e,n.name,l,D,c),u=p.y+D}}))}return u},e.prototype.drawStandardTooltipIcons=function(t,e,a,i,r,n,s,o,h){var l=this;if(a.length>0){var u=0,c=0;a.forEach((function(e){var a=e.marginLeft,i=void 0===a?0:a,r=e.marginTop,n=void 0===r?0:r,s=e.marginRight,o=void 0===s?0:s,h=e.marginBottom,l=void 0===h?0:h,d=e.paddingLeft,f=void 0===d?0:d,C=e.paddingTop,m=void 0===C?0:C,D=e.paddingRight,p=void 0===D?0:D,v=e.paddingBottom,g=void 0===v?0:v,S=e.size,I=e.fontFamily,T=e.icon;t.font=rt(S,"normal",I),u+=i+f+t.measureText(T).width+p+o,c=Math.max(c,n+m+S+g+l)})),i.x+u>h?(i.x=s,i.y+=o,o=c):o=Math.max(o,c),a.forEach((function(a){var s,o=a.marginLeft,h=void 0===o?0:o,u=a.marginTop,c=void 0===u?0:u,d=a.marginRight,f=void 0===d?0:d,C=a.paddingLeft,m=void 0===C?0:C,D=a.paddingTop,p=void 0===D?0:D,v=a.paddingRight,g=void 0===v?0:v,S=a.paddingBottom,I=void 0===S?0:S,T=a.color,x=a.activeColor,y=a.size,A=a.fontFamily,b=a.icon,w=a.backgroundColor,F=a.activeBackgroundColor,M=(null===e||void 0===e?void 0:e.paneId)===r&&(null===e||void 0===e?void 0:e.indicatorName)===n&&(null===e||void 0===e?void 0:e.iconId)===a.id;null===(s=l.createFigure({name:"text",attrs:{text:b,x:i.x+h,y:i.y+c},styles:{paddingLeft:m,paddingTop:p,paddingRight:g,paddingBottom:I,color:M?x:T,size:y,family:A,backgroundColor:M?F:w}},{mouseClickEvent:l._boundIconClickEvent({paneId:r,indicatorName:n,iconId:a.id}),mouseMoveEvent:l._boundIconMouseMoveEvent({paneId:r,indicatorName:n,iconId:a.id})}))||void 0===s||s.draw(t),i.x+=h+m+t.measureText(b).width+g+f}))}return o},e.prototype.drawStandardTooltipLegends=function(t,e,a,i,r,n,s){var o=this;if(e.length>0){var h=s.marginLeft,l=s.marginTop,u=s.marginRight,c=s.marginBottom,d=s.size,f=s.family,C=s.weight;t.font=rt(d,C,f),e.forEach((function(e){var s,m,D=e.title,p=e.value,v=t.measureText(D.text).width,g=t.measureText(p.text).width,S=v+g,I=l+d+c;a.x+h+S+u>n?(a.x=i,a.y+=r,r=I):r=Math.max(r,I),D.text.length>0&&(null===(s=o.createFigure({name:"text",attrs:{x:a.x+h,y:a.y+l,text:D.text},styles:{color:D.color,size:d,family:f,weight:C}}))||void 0===s||s.draw(t)),null===(m=o.createFigure({name:"text",attrs:{x:a.x+h+v,y:a.y+l,text:p.text},styles:{color:p.color,size:d,family:f,weight:C}}))||void 0===m||m.draw(t),a.x+=h+S+u}))}return r},e.prototype.isDrawTooltip=function(t,e){var a=e.showRule;return a===l.Always||a===l.FollowCross&&z(t.paneId)},e.prototype.getIndicatorTooltipData=function(t,e,a,i,r,n,s){var o,h,l=s.tooltip,u=l.showName?a.shortName:"",c="",d=a.calcParams;d.length>0&&l.showParams&&(c="(".concat(d.join(","),")"));var f={name:u,calcParamsText:c,values:[],icons:l.icons},C=e.dataIndex,m=null!==(o=a.result)&&void 0!==o?o:[],D=[];if(a.visible){var p=null!==(h=m[C])&&void 0!==h?h:{};ht(t,a,C,s,(function(t,e){if(z(t.title)){var s=e.color,o=p[t.key];X(o)&&(o=q(o,a.precision),a.shouldFormatBigNumber&&(o=i.formatBigNumber(o))),D.push({title:{text:t.title,color:s},value:{text:at(et(null!==o&&void 0!==o?o:l.defaultValue,r),n),color:s}})}})),f.values=D}if(null!==a.createTooltipDataSource){var v=this.getWidget(),g=v.getPane(),S=g.getChart().getChartStore(),I=a.createTooltipDataSource({kLineDataList:t,indicator:a,visibleRange:S.getTimeScaleStore().getVisibleRange(),bounding:v.getBounding(),crosshair:e,defaultStyles:s,xAxis:g.getChart().getXAxisPane().getAxisComponent(),yAxis:g.getAxisComponent()}),T=I.name,x=I.calcParamsText,y=I.values,A=I.icons;if(z(T)&&l.showName&&(f.name=T),z(x)&&l.showParams&&(f.calcParamsText=x),W(A)&&(f.icons=A),W(y)&&a.visible){var b=[],w=s.tooltip.text.color;y.forEach((function(t){var e={text:"",color:w};Y(t.title)?e=t.title:e.text=t.title;var a={text:"",color:w};Y(t.value)?a=t.value:a.text=t.value,a.text=at(et(a.text,r),n),b.push({title:e,value:a})})),f.values=b}}return f},e.prototype.classifyTooltipIcons=function(t){var e=[],a=[],i=[];return t.forEach((function(t){switch(t.position){case c.Left:e.push(t);break;case c.Middle:a.push(t);break;case c.Right:i.push(t);break}})),[e,a,i]},e}(ea),ha=function(t){function e(e){var a=t.call(this,e)||this;return a._initEvent(),a}return s(e,t),e.prototype._initEvent=function(){var t=this,e=this.getWidget().getPane(),a=e.getId(),i=e.getChart().getChartStore().getOverlayStore();this.registerEvent("mouseMoveEvent",(function(e){var r,n=i.getProgressInstanceInfo();if(null!==n){var s=n.instance,o=n.paneId;s.isStart()&&(i.updateProgressInstanceInfo(a),o=a);var h=s.points.length-1,l="".concat("overlay_figure_","point_").concat(h);return s.isDrawing()&&o===a&&(s.eventMoveForDrawing(t._coordinateToPoint(n.instance,e)),null===(r=s.onDrawing)||void 0===r||r.call(s,D({overlay:s,figureKey:l,figureIndex:h},e))),t._figureMouseMoveEvent(s,1,l,h,0)(e)}return i.setHoverInstanceInfo({paneId:a,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},e),!1})).registerEvent("mouseClickEvent",(function(e){var r,n,s=i.getProgressInstanceInfo();if(null!==s){var o=s.instance,h=s.paneId;o.isStart()&&(i.updateProgressInstanceInfo(a,!0),h=a);var l=o.points.length-1,u="".concat("overlay_figure_","point_").concat(l);return o.isDrawing()&&h===a&&(o.eventMoveForDrawing(t._coordinateToPoint(o,e)),null===(r=o.onDrawing)||void 0===r||r.call(o,D({overlay:o,figureKey:u,figureIndex:l},e)),o.nextStep(),o.isDrawing()||(i.progressInstanceComplete(),null===(n=o.onDrawEnd)||void 0===n||n.call(o,D({overlay:o,figureKey:u,figureIndex:l},e)))),t._figureMouseClickEvent(o,1,u,l,0)(e)}return i.setClickInstanceInfo({paneId:a,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},e),!1})).registerEvent("mouseDoubleClickEvent",(function(e){var r,n=i.getProgressInstanceInfo();if(null!==n){var s=n.instance,o=n.paneId;if(s.isDrawing()&&o===a&&(s.forceComplete(),!s.isDrawing())){i.progressInstanceComplete();var h=s.points.length-1,l="".concat("overlay_figure_","point_").concat(h);null===(r=s.onDrawEnd)||void 0===r||r.call(s,D({overlay:s,figureKey:l,figureIndex:h},e))}var u=s.points.length-1;return t._figureMouseClickEvent(s,1,"".concat("overlay_figure_","point_").concat(u),u,0)(e)}return!1})).registerEvent("mouseRightClickEvent",(function(e){var a=i.getProgressInstanceInfo();if(null!==a){var r=a.instance;if(r.isDrawing()){var n=r.points.length-1;return t._figureMouseRightClickEvent(r,1,"".concat("overlay_figure_","point_").concat(n),n,0)(e)}}return!1})).registerEvent("mouseUpEvent",(function(t){var e,r=i.getPressedInstanceInfo(),n=r.instance,s=r.figureIndex,o=r.figureKey;return null!==n&&(null===(e=n.onPressedMoveEnd)||void 0===e||e.call(n,D({overlay:n,figureKey:o,figureIndex:s},t))),i.setPressedInstanceInfo({paneId:a,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1})).registerEvent("pressedMouseMoveEvent",(function(e){var a,r,n=i.getPressedInstanceInfo(),s=n.instance,o=n.figureType,h=n.figureIndex,l=n.figureKey;if(null!==s){if(!s.lock&&(null===(r=null===(a=s.onPressedMoving)||void 0===a?void 0:a.call(s,D({overlay:s,figureIndex:h,figureKey:l},e)))||void 0===r||!r)){var u=t._coordinateToPoint(s,e);1===o?s.eventPressedPointMove(u,h):s.eventPressedOtherMove(u,t.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())}return!0}return!1}))},e.prototype._createFigureEvents=function(t,e,a,i,r,n){var s;if(!t.isDrawing()){var o=[];if(W(n)&&(U(n)?n&&(o=function(){return["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]}()):o=n),0===o.length)return{mouseMoveEvent:this._figureMouseMoveEvent(t,e,a,i,r),mouseDownEvent:this._figureMouseDownEvent(t,e,a,i,r),mouseClickEvent:this._figureMouseClickEvent(t,e,a,i,r),mouseRightClickEvent:this._figureMouseRightClickEvent(t,e,a,i,r),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,e,a,i,r)};s={},o.includes("mouseMoveEvent")||o.includes("touchMoveEvent")||(s.mouseMoveEvent=this._figureMouseMoveEvent(t,e,a,i,r)),o.includes("mouseDownEvent")||o.includes("touchStartEvent")||(s.mouseDownEvent=this._figureMouseDownEvent(t,e,a,i,r)),o.includes("mouseClickEvent")||o.includes("tapEvent")||(s.mouseClickEvent=this._figureMouseClickEvent(t,e,a,i,r)),o.includes("mouseDoubleClickEvent")||o.includes("doubleTapEvent")||(s.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,e,a,i,r)),o.includes("mouseRightClickEvent")||(s.mouseRightClickEvent=this._figureMouseRightClickEvent(t,e,a,i,r))}return s},e.prototype._figureMouseMoveEvent=function(t,e,a,i,r){var n=this;return function(s){var o=n.getWidget().getPane(),h=o.getChart().getChartStore().getOverlayStore();return h.setHoverInstanceInfo({paneId:o.getId(),instance:t,figureType:e,figureKey:a,figureIndex:i,attrsIndex:r},s),!0}},e.prototype._figureMouseDownEvent=function(t,e,a,i,r){var n=this;return function(s){var o,h=n.getWidget().getPane(),l=h.getId(),u=h.getChart().getChartStore().getOverlayStore();return t.startPressedMove(n._coordinateToPoint(t,s)),null===(o=t.onPressedMoveStart)||void 0===o||o.call(t,D({overlay:t,figureIndex:i,figureKey:a},s)),u.setPressedInstanceInfo({paneId:l,instance:t,figureType:e,figureKey:a,figureIndex:i,attrsIndex:r}),!0}},e.prototype._figureMouseClickEvent=function(t,e,a,i,r){var n=this;return function(s){var o=n.getWidget().getPane(),h=o.getId(),l=o.getChart().getChartStore().getOverlayStore();return l.setClickInstanceInfo({paneId:h,instance:t,figureType:e,figureKey:a,figureIndex:i,attrsIndex:r},s),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,e,a,i,r){return function(e){var r;return null===(r=t.onDoubleClick)||void 0===r||r.call(t,D(D({},e),{figureIndex:i,figureKey:a,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,e,a,i,r){var n=this;return function(e){var r,s;if(null===(s=null===(r=t.onRightClick)||void 0===r?void 0:r.call(t,D({overlay:t,figureIndex:i,figureKey:a},e)))||void 0===s||!s){var o=n.getWidget().getPane(),h=o.getChart().getChartStore().getOverlayStore();h.removeInstance(t)}return!0}},e.prototype._coordinateToPoint=function(t,e){var a,i={},r=this.getWidget().getPane(),n=r.getChart(),s=r.getId(),o=n.getChartStore().getTimeScaleStore();if(this.coordinateToPointTimestampDataIndexFlag()){var h=n.getXAxisPane().getAxisComponent(),l=h.convertFromPixel(e.x),u=null!==(a=o.dataIndexToTimestamp(l))&&void 0!==a?a:void 0;i.dataIndex=l,i.timestamp=u}if(this.coordinateToPointValueFlag()){var c=r.getAxisComponent(),d=c.convertFromPixel(e.y);if(t.mode!==lt.Normal&&s===Te.CANDLE&&X(i.dataIndex)){var f=o.getDataByDataIndex(i.dataIndex);if(null!==f){var C=t.modeSensitivity;if(d>f.high)if(t.mode===lt.WeakMagnet){var m=c.convertToPixel(f.high),D=c.convertFromPixel(m-C);d<D&&(d=f.high)}else d=f.high;else if(d<f.low)if(t.mode===lt.WeakMagnet){var p=c.convertToPixel(f.low);D=c.convertFromPixel(p-C);d>D&&(d=f.low)}else d=f.low;else{var v=Math.max(f.open,f.close),g=Math.min(f.open,f.close);d=d>v?d-v<f.high-d?v:f.high:d<g?d-f.low<g-d?f.low:g:v-d<d-g?v:g}}}i.value=d}return i},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(e,a,i){return this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()?this.onEvent(e,a,i):t.prototype.dispatchEvent.call(this,e,a,i)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var e=this,a=this.getWidget(),i=a.getPane(),r=i.getId(),n=i.getChart(),s=i.getAxisComponent(),o=n.getXAxisPane().getAxisComponent(),h=a.getBounding(),l=n.getChartStore(),u=l.getCustomApi(),c=l.getThousandsSeparator(),d=l.getDecimalFoldThreshold(),f=l.getTimeScaleStore(),C=f.getDateTimeFormat(),m=f.getBarSpace(),p=l.getPrecision(),v=l.getStyles().overlay,g=l.getOverlayStore(),S=g.getHoverInstanceInfo(),I=g.getClickInstanceInfo(),T=this.getCompleteOverlays(g,r),x=l.getIndicatorStore().getInstances(r),y=x.reduce((function(t,e){var a=e.precision;return t[e.name]=a,t.max=Math.max(t.max,a),t.min=Math.min(t.min,a),t.excludePriceVolumeMax=Math.max(t.excludePriceVolumeMax,a),t.excludePriceVolumeMin=Math.min(t.excludePriceVolumeMin,a),t}),D(D({},p),{max:Math.max(p.price,p.volume),min:Math.min(p.price,p.volume),excludePriceVolumeMax:Number.MIN_SAFE_INTEGER,excludePriceVolumeMin:Number.MAX_SAFE_INTEGER}));T.forEach((function(a){a.visible&&e._drawOverlay(t,a,h,m,y,C,u,c,d,v,o,s,S,I,f)}));var A=g.getProgressInstanceInfo();if(null!==A){var b=this.getProgressOverlay(A,r);null!==b&&b.visible&&this._drawOverlay(t,b,h,m,y,C,u,c,d,v,o,s,S,I,f)}},e.prototype._drawOverlay=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f,C){var m=e.points,D=m.map((function(t){var e,a,i=t.dataIndex;X(t.timestamp)&&(i=C.timestampToDataIndex(t.timestamp));var r={x:0,y:0};return X(i)&&(r.x=null!==(e=null===u||void 0===u?void 0:u.convertToPixel(i))&&void 0!==e?e:0),X(t.value)&&(r.y=null!==(a=null===c||void 0===c?void 0:c.convertToPixel(t.value))&&void 0!==a?a:0),r}));if(D.length>0){var p=(new Array).concat(this.getFigures(e,D,a,i,r,o,h,n,l,u,c));this.drawFigures(t,e,p,l)}this.drawDefaultFigures(t,e,D,a,r,n,s,o,h,l,u,c,d,f)},e.prototype.drawFigures=function(t,e,a,i){var r=this;a.forEach((function(a,n){var s=a.type,o=a.styles,h=a.attrs,l=a.ignoreEvent,u=[].concat(h);u.forEach((function(h,u){var c,d,f,C=r._createFigureEvents(e,2,null!==(c=a.key)&&void 0!==c?c:"",n,u,l),m=D(D(D({},i[s]),null===(d=e.styles)||void 0===d?void 0:d[s]),o);null===(f=r.createFigure({name:s,attrs:h,styles:m},C))||void 0===f||f.draw(t)}))}))},e.prototype.getCompleteOverlays=function(t,e){return t.getInstances(e)},e.prototype.getProgressOverlay=function(t,e){return t.paneId===e?t.instance:null},e.prototype.getFigures=function(t,e,a,i,r,n,s,o,h,l,u){var c,d;return null!==(d=null===(c=t.createPointFigures)||void 0===c?void 0:c.call(t,{overlay:t,coordinates:e,bounding:a,barSpace:i,precision:r,thousandsSeparator:n,decimalFoldThreshold:s,dateTimeFormat:o,defaultStyles:h,xAxis:l,yAxis:u}))&&void 0!==d?d:[]},e.prototype.drawDefaultFigures=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f){var C,m,p=this;if(e.needDefaultPointFigure&&((null===(C=d.instance)||void 0===C?void 0:C.id)===e.id&&0!==d.figureType||(null===(m=f.instance)||void 0===m?void 0:m.id)===e.id&&0!==f.figureType)){var v=e.styles,g=D(D({},l.point),null===v||void 0===v?void 0:v.point);a.forEach((function(a,i){var r,n,s,o=a.x,h=a.y,l=g.radius,u=g.color,c=g.borderColor,f=g.borderSize;(null===(r=d.instance)||void 0===r?void 0:r.id)===e.id&&1===d.figureType&&d.figureIndex===i&&(l=g.activeRadius,u=g.activeColor,c=g.activeBorderColor,f=g.activeBorderSize),null===(n=p.createFigure({name:"circle",attrs:{x:o,y:h,r:l+f},styles:{color:c}},p._createFigureEvents(e,1,"".concat("overlay_figure_","point_").concat(i),i,0)))||void 0===n||n.draw(t),null===(s=p.createFigure({name:"circle",attrs:{x:o,y:h,r:l},styles:{color:u}}))||void 0===s||s.draw(t)}))}},e}(ea),la=function(t){function e(e,a){var i=t.call(this,e,a)||this;return i._gridView=new aa(i),i._indicatorView=new na(i),i._crosshairLineView=new sa(i),i._tooltipView=i.createTooltipView(),i._overlayView=new ha(i),i.addChild(i._tooltipView),i.addChild(i._overlayView),i.getContainer().style.cursor="crosshair",i.registerEvent("mouseMoveEvent",(function(){return a.getChart().getChartStore().getTooltipStore().setActiveIcon(),!1})),i}return s(e,t),e.prototype.getName=function(){return Fe.MAIN},e.prototype.updateMain=function(t){this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t)},e.prototype.createTooltipView=function(){return new oa(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this._overlayView.draw(t),this._crosshairLineView.draw(t),this._tooltipView.draw(t)},e}(Ne),ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ripplePoint=e.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),e._animationFrameTime=0,e._animation=new pt({iterationCount:1/0}).doFrame((function(t){e._animationFrameTime=t;var a=e.getWidget().getPane();a.getChart().updatePane(0,a.getId())})),e}return s(e,t),e.prototype.drawImp=function(t){var e,a,i,r=this.getWidget(),n=r.getPane(),s=n.getChart(),o=s.getDataList(),h=o.length-1,l=r.getBounding(),u=n.getAxisComponent(),c=s.getStyles().candle.area,d=[],f=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,m=null;if(this.eachChildren((function(t){var e=t.data,a=t.x,i=null===e||void 0===e?void 0:e[c.value];if(X(i)){var r=u.convertToPixel(i);C===Number.MIN_SAFE_INTEGER&&(C=a),d.push({x:a,y:r}),f=Math.min(f,r),t.dataIndex===h&&(m={x:a,y:r})}})),d.length>0){null===(e=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:c.lineColor,size:c.lineSize,smooth:c.smooth}}))||void 0===e||e.draw(t);var D=c.backgroundColor,p=void 0;if(V(D)){var v=t.createLinearGradient(0,l.height,0,f);try{D.forEach((function(t){var e=t.offset,a=t.color;v.addColorStop(e,a)}))}catch(I){}p=v}else p=D;t.fillStyle=p,t.beginPath(),t.moveTo(C,l.height),t.lineTo(d[0].x,d[0].y),oe(t,d,c.smooth),t.lineTo(d[d.length-1].x,l.height),t.closePath(),t.fill()}var g=c.point;if(g.show&&W(m)){null===(a=this.createFigure({name:"circle",attrs:{x:m.x,y:m.y,r:g.radius},styles:{style:"fill",color:g.color}}))||void 0===a||a.draw(t);var S=g.rippleRadius;g.animation&&(S=g.radius+this._animationFrameTime/g.animationDuration*(g.rippleRadius-g.radius),this._animation.setDuration(g.animationDuration).start()),null===(i=this._ripplePoint)||void 0===i||i.setAttrs({x:m.x,y:m.y,r:S}).setStyles({style:"fill",color:g.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(ia),ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),a=e.getPane(),i=a.getChart().getChartStore(),r=i.getStyles().candle.priceMark,n=r.high,s=r.low;if(r.show&&(n.show||s.show)){var o=i.getThousandsSeparator(),h=i.getDecimalFoldThreshold(),l=i.getPrecision(),u=a.getAxisComponent(),c=Number.MIN_SAFE_INTEGER,d=0,f=Number.MAX_SAFE_INTEGER,C=0;this.eachChildren((function(t){var e=t.data,a=t.x;W(e)&&(c<e.high&&(c=e.high,d=a),f>e.low&&(f=e.low,C=a))}));var m=u.convertToPixel(c),D=u.convertToPixel(f);n.show&&c!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,at(et(q(c,l.price),o),h),{x:d,y:m},m<D?[-2,-5]:[2,5],n),s.show&&f!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,at(et(q(f,l.price),o),h),{x:C,y:D},m<D?[2,5]:[-2,-5],s)}},e.prototype._drawMark=function(t,e,a,i,r){var n,s,o,h,l,u,c=a.x,d=a.y+i[0];null===(n=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:d+i[0]},{x:c,y:d},{x:c+2,y:d+i[0]}]},styles:{color:r.color}}))||void 0===n||n.draw(t);var f=this.getWidget().getBounding().width;c>f/2?(h=c-5,l=h-r.textOffset,u="right"):(h=c+5,u="left",l=h+r.textOffset);var C=d+i[1];null===(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:d},{x:c,y:C},{x:h,y:C}]},styles:{color:r.color}}))||void 0===s||s.draw(t),null===(o=this.createFigure({name:"text",attrs:{x:l,y:C,text:e,align:u,baseline:"middle"},styles:{color:r.color,size:r.textSize,family:r.textFamily,weight:r.textWeight}}))||void 0===o||o.draw(t)},e}(ia),da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e,a=this.getWidget(),i=a.getPane(),r=a.getBounding(),n=i.getChart().getChartStore(),s=n.getStyles().candle.priceMark,o=s.last,h=o.line;if(s.show&&o.show&&h.show){var l=i.getAxisComponent(),u=n.getDataList(),c=u[u.length-1];if(null!=c){var d=c.close,f=c.open,C=l.convertToNicePixel(d),m=void 0;m=d>f?o.upColor:d<f?o.downColor:o.noChangeColor,null===(e=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:C},{x:r.width,y:C}]},styles:{style:h.style,color:m,size:h.size,dashedValue:h.dashedValue}}))||void 0===e||e.draw(t)}}},e}(ea),fa={"zh-CN":{time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅："},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}};var Ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),a=e.getPane(),i=a.getId(),r=a.getChart().getChartStore(),n=r.getTooltipStore().getCrosshair();if(W(n.kLineData)){var s=e.getBounding(),o=a.getYAxisWidget().getBounding(),h=r.getDataList(),l=r.getPrecision(),c=r.getLocale(),d=r.getCustomApi(),f=r.getThousandsSeparator(),C=r.getDecimalFoldThreshold(),m=r.getTooltipStore().getActiveIcon(),D=r.getIndicatorStore().getInstances(a.getId()),p=r.getTimeScaleStore().getDateTimeFormat(),v=r.getStyles(),g=v.candle,S=v.indicator;if(g.tooltip.showType===u.Rect&&S.tooltip.showType===u.Rect){var I=this.isDrawTooltip(n,g.tooltip),T=this.isDrawTooltip(n,S.tooltip);this._drawRectTooltip(t,h,D,s,o,n,l,p,c,d,f,C,I,T,g.tooltip.offsetTop,v)}else if(g.tooltip.showType===u.Standard&&S.tooltip.showType===u.Standard){var x=g.tooltip,y=x.offsetLeft,A=x.offsetTop,b=x.offsetRight,w=s.width-b,F=this._drawCandleStandardTooltip(t,h,i,n,m,l,p,c,d,f,C,y,A,w,g);this.drawIndicatorTooltip(t,i,h,n,m,D,d,f,C,y,F,w,S)}else if(g.tooltip.showType===u.Rect&&S.tooltip.showType===u.Standard){var M=g.tooltip,L=(y=M.offsetLeft,A=M.offsetTop,b=M.offsetRight,w=s.width-b,this.drawIndicatorTooltip(t,i,h,n,m,D,d,f,C,y,A,w,S));I=this.isDrawTooltip(n,g.tooltip);this._drawRectTooltip(t,h,D,s,o,n,l,p,c,d,f,C,I,!1,L,v)}else{var E=g.tooltip,N=(y=E.offsetLeft,A=E.offsetTop,b=E.offsetRight,w=s.width-b,this._drawCandleStandardTooltip(t,h,i,n,m,l,p,c,d,f,C,y,A,w,g));T=this.isDrawTooltip(n,S.tooltip);this._drawRectTooltip(t,h,D,s,o,n,l,p,c,d,f,C,!1,T,N,v)}}},e.prototype._drawCandleStandardTooltip=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f,C){var m,D,p,v=C.tooltip,g=v.text,I=0,T={x:c,y:d};if(this.isDrawTooltip(i,v)){var x=null!==(m=i.dataIndex)&&void 0!==m?m:0,y=this._getCandleTooltipLegends({prev:null!==(D=e[x-1])&&void 0!==D?D:null,current:i.kLineData,next:null!==(p=e[x+1])&&void 0!==p?p:null},n,s,o,h,l,u,C),A=S(this.classifyTooltipIcons(v.icons),3),b=A[0],w=A[1],F=A[2];I=this.drawStandardTooltipIcons(t,r,b,T,a,"",c,I,f),I=this.drawStandardTooltipIcons(t,r,w,T,a,"",c,I,f),y.length>0&&(I=this.drawStandardTooltipLegends(t,y,T,c,I,f,g)),I=this.drawStandardTooltipIcons(t,r,F,T,a,"",c,I,f)}return T.y+I},e.prototype._drawRectTooltip=function(t,e,a,i,r,n,s,o,l,u,c,f,m,D,p,v){var g,S,I,T,x,y=this,A=v.candle,b=v.indicator,w=A.tooltip,F=b.tooltip;if(m||D){var M=null!==(g=n.dataIndex)&&void 0!==g?g:0,L=this._getCandleTooltipLegends({prev:null!==(S=e[M-1])&&void 0!==S?S:null,current:n.kLineData,next:null!==(I=e[M+1])&&void 0!==I?I:null},s,o,l,u,c,f,A),E=w.offsetLeft,N=w.offsetTop,P=w.offsetRight,O=w.offsetBottom,R=w.text,B=R.marginLeft,_=R.marginRight,k=R.marginTop,G=R.marginBottom,V=R.size,H=R.weight,Y=R.family,X=w.rect,W=X.position,U=X.paddingLeft,z=X.paddingRight,K=X.paddingTop,J=X.paddingBottom,Q=X.offsetLeft,$=X.offsetRight,j=X.offsetTop,Z=X.offsetBottom,q=X.borderSize,tt=X.borderRadius,et=X.borderColor,at=X.color,it=0,nt=0,st=0;m&&(t.font=rt(V,H,Y),L.forEach((function(e){var a=e.title,i=e.value,r="".concat(a.text).concat(i.text),n=t.measureText(r).width+B+_;it=Math.max(it,n)})),st+=(G+k+V)*L.length);var ot=F.text,ht=ot.marginLeft,lt=ot.marginRight,ut=ot.marginTop,ct=ot.marginBottom,dt=ot.size,ft=ot.weight,Ct=ot.family,mt=[];if(D&&(t.font=rt(dt,ft,Ct),a.forEach((function(a){var i,r=null!==(i=y.getIndicatorTooltipData(e,n,a,u,c,f,b).values)&&void 0!==i?i:[];mt.push(r),r.forEach((function(e){var a=e.title,i=e.value,r="".concat(a.text).concat(i.text),n=t.measureText(r).width+ht+lt;it=Math.max(it,n),st+=ut+ct+dt}))}))),nt+=it,0!==nt&&0!==st){nt+=2*q+U+z,st+=2*q+K+J;var Dt=i.width/2,pt=W===d.Pointer&&n.paneId===Te.CANDLE,vt=(null!==(T=n.realX)&&void 0!==T?T:0)>Dt,gt=0;if(pt){var St=n.realX;gt=vt?St-$-nt:St+Q}else vt?(gt=Q+E,v.yAxis.inside&&v.yAxis.position===C.Left&&(gt+=r.width)):(gt=i.width-$-nt-P,v.yAxis.inside&&v.yAxis.position===C.Right&&(gt-=r.width));var It=p+j;if(pt){var Tt=n.y;It=Tt-st/2,It+st>i.height-Z-O&&(It=i.height-Z-st-O),It<p+j&&(It=p+j+N)}null===(x=this.createFigure({name:"rect",attrs:{x:gt,y:It,width:nt,height:st},styles:{style:h.StrokeFill,color:at,borderColor:et,borderSize:q,borderRadius:tt}}))||void 0===x||x.draw(t);var xt=gt+q+U+B,yt=It+q+K;if(m&&L.forEach((function(e){var a,i;yt+=k;var r=e.title;null===(a=y.createFigure({name:"text",attrs:{x:xt,y:yt,text:r.text},styles:{color:r.color,size:V,family:Y,weight:H}}))||void 0===a||a.draw(t);var n=e.value;null===(i=y.createFigure({name:"text",attrs:{x:gt+nt-q-_-z,y:yt,text:n.text,align:"right"},styles:{color:n.color,size:V,family:Y,weight:H}}))||void 0===i||i.draw(t),yt+=V+G})),D){var At=gt+q+U+ht;mt.forEach((function(e){e.forEach((function(e){var a,i;yt+=ut;var r=e.title,n=e.value;null===(a=y.createFigure({name:"text",attrs:{x:At,y:yt,text:r.text},styles:{color:r.color,size:dt,family:Ct,weight:ft}}))||void 0===a||a.draw(t),null===(i=y.createFigure({name:"text",attrs:{x:gt+nt-q-lt-z,y:yt,text:n.text,align:"right"},styles:{color:n.color,size:dt,family:Ct,weight:ft}}))||void 0===i||i.draw(t),yt+=dt+ct}))}))}}}},e.prototype._getCandleTooltipLegends=function(t,e,a,i,r,n,s,o){var h,l,u,c,d,f=o.tooltip,C=f.text.color,m=t.current,p=null!==(l=null===(h=t.prev)||void 0===h?void 0:h.close)&&void 0!==l?l:m.close,v=m.close-p,g=e.price,S=e.volume,I={"{time}":r.formatDate(a,m.timestamp,"YYYY-MM-DD HH:mm",ct.Tooltip),"{open}":at(et(q(m.open,g),n),s),"{high}":at(et(q(m.high,g),n),s),"{low}":at(et(q(m.low,g),n),s),"{close}":at(et(q(m.close,g),n),s),"{volume}":at(et(r.formatBigNumber(q(null!==(u=m.volume)&&void 0!==u?u:f.defaultValue,S)),n),s),"{turnover}":at(et(q(null!==(c=m.turnover)&&void 0!==c?c:f.defaultValue,g),n),s),"{change}":0===p?f.defaultValue:"".concat(et(q(v/p*100),n),"%")},T=null!==(d=H(f.custom)?f.custom(t,o):f.custom)&&void 0!==d?d:[];return T.map((function(t){var e,a=t.title,r=t.value,n={text:"",color:""};Y(a)?n=D({},a):(n.text=a,n.color=C),n.text=function(t,e){var a,i;return null!==(i=null===(a=fa[e])||void 0===a?void 0:a[t])&&void 0!==i?i:t}(n.text,i);var s={text:f.defaultValue,color:""};Y(r)?s=D({},r):(s.text=r,s.color=C);var h=s.text.match(/{(\S*)}/);if(null!==h&&h.length>1){var l="{".concat(h[1],"}");s.text=s.text.replace(l,null!==(e=I[l])&&void 0!==e?e:f.defaultValue),"{change}"===l&&(s.color=0===v?o.priceMark.last.noChangeColor:v>0?o.priceMark.last.upColor:o.priceMark.last.downColor)}return{title:n,value:s}}))},e}(oa),ma=function(t){function e(e,a){var i=t.call(this,e,a)||this;return i._candleBarView=new ra(i),i._candleAreaView=new ua(i),i._candleHighLowPriceView=new ca(i),i._candleLastPriceLineView=new da(i),i.addChild(i._candleBarView),i}return s(e,t),e.prototype.updateMainContent=function(t){var e=this.getPane().getChart().getStyles().candle;e.type!==f.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Ca(this)},e}(la),Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e,a,i=this,r=this.getWidget(),n=r.getPane(),s=r.getBounding(),o=n.getAxisComponent(),h=this.getAxisStyles(n.getChart().getStyles());if(h.show){h.axisLine.show&&(null===(e=this.createFigure({name:"line",attrs:this.createAxisLine(s,h),styles:h.axisLine}))||void 0===e||e.draw(t));var l=o.getTicks();if(h.tickLine.show){var u=this.createTickLines(l,s,h);u.forEach((function(e){var a;null===(a=i.createFigure({name:"line",attrs:e,styles:h.tickLine}))||void 0===a||a.draw(t)}))}if(h.tickText.show){var c=this.createTickTexts(l,s,h);null===(a=this.createFigure({name:"text",attrs:c,styles:h.tickText}))||void 0===a||a.draw(t)}}},e}(ea),pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,e){var a,i=this.getWidget().getPane().getAxisComponent(),r=e.axisLine.size;return a=i.isFromZero()?0:t.width-r,{coordinates:[{x:a,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,e,a){var i=this.getWidget().getPane().getAxisComponent(),r=a.axisLine,n=a.tickLine,s=0,o=0;return i.isFromZero()?(s=0,r.show&&(s+=r.size),o=s+n.length):(s=e.width,r.show&&(s-=r.size),o=s-n.length),t.map((function(t){return{coordinates:[{x:s,y:t.coord},{x:o,y:t.coord}]}}))},e.prototype.createTickTexts=function(t,e,a){var i=this.getWidget().getPane().getAxisComponent(),r=a.axisLine,n=a.tickLine,s=a.tickText,o=0;i.isFromZero()?(o=s.marginStart,r.show&&(o+=r.size),n.show&&(o+=n.length)):(o=e.width-s.marginEnd,r.show&&(o-=r.size),n.show&&(o-=n.length));var h=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map((function(t){return{x:o,y:t.coord,text:t.text,align:h,baseline:"middle"}}))},e}(Da),va=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e,a=this.getWidget(),i=a.getPane(),r=a.getBounding(),n=i.getChart().getChartStore(),s=n.getStyles().candle.priceMark,o=s.last,h=o.text;if(s.show&&o.show&&h.show){var l=n.getPrecision(),u=i.getAxisComponent(),c=n.getDataList(),d=c[c.length-1];if(W(d)){var f=d.close,C=d.open,p=u.convertToNicePixel(f),v=void 0;v=f>C?o.upColor:f<C?o.downColor:o.noChangeColor;var g=void 0;if(u.getType()===m.Percentage){var S=n.getVisibleFirstData(),I=S.close;g="".concat(((f-I)/I*100).toFixed(2),"%")}else g=q(f,l.price);g=at(et(g,n.getThousandsSeparator()),n.getDecimalFoldThreshold());var T=void 0,x=void 0;u.isFromZero()?(T=0,x="left"):(T=r.width,x="right"),null===(e=this.createFigure({name:"text",attrs:{x:T,y:p,text:g,align:x,baseline:"middle"},styles:D(D({},h),{backgroundColor:v})}))||void 0===e||e.draw(t)}}},e}(ea),ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e=this,a=this.getWidget(),i=a.getPane(),r=a.getBounding(),n=i.getChart().getChartStore(),s=n.getCustomApi(),o=n.getStyles().indicator,h=o.lastValueMark,l=h.text;if(h.show){var u=i.getAxisComponent(),c=n.getDataList(),d=c.length-1,f=n.getIndicatorStore().getInstances(i.getId()),C=n.getThousandsSeparator(),m=n.getDecimalFoldThreshold();f.forEach((function(a){var i=a.result,n=i[d];if(W(n)&&a.visible){var h=a.precision;ht(c,a,d,o,(function(i,o){var c,d=n[i.key];if(X(d)){var f=u.convertToNicePixel(d),p=q(d,h);a.shouldFormatBigNumber&&(p=s.formatBigNumber(p)),p=at(et(p,C),m);var v=void 0,g=void 0;u.isFromZero()?(v=0,g="left"):(v=r.width,g="right"),null===(c=e.createFigure({name:"text",attrs:{x:v,y:f,text:p,align:g,baseline:"middle"},styles:D(D({},l),{backgroundColor:o.color})}))||void 0===c||c.draw(t)}}))}}))}},e}(ea),Sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f){this.drawFigures(t,e,this.getDefaultFigures(e,a,i,r,n,s,o,h,u,c,f),l)},e.prototype.getDefaultFigures=function(t,e,a,i,r,n,s,o,h,l,u){var c,d,f=[];if(t.needDefaultYAxisFigure&&t.id===(null===(c=u.instance)||void 0===c?void 0:c.id)&&u.paneId===this.getWidget().getPane().getId()){var C,m,D=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,v=null!==(d=null===l||void 0===l?void 0:l.isFromZero())&&void 0!==d&&d;v?(C="left",m=0):(C="right",m=a.width),e.forEach((function(e,a){var r=t.points[a];if(X(r.value)){D=Math.min(D,e.y),p=Math.max(p,e.y);var n=at(et(q(r.value,i.price),s),o);f.push({type:"text",attrs:{x:m,y:e.y,text:n,align:C,baseline:"middle"},ignoreEvent:!0})}})),e.length>1&&f.unshift({type:"rect",attrs:{x:0,y:D,width:a.width,height:p-D},ignoreEvent:!0})}return f},e.prototype.getFigures=function(t,e,a,i,r,n,s,o,h,l,u){var c,d;return null!==(d=null===(c=t.createYAxisFigures)||void 0===c?void 0:c.call(t,{overlay:t,coordinates:e,bounding:a,barSpace:i,precision:r,thousandsSeparator:n,decimalFoldThreshold:s,dateTimeFormat:o,defaultStyles:h,xAxis:l,yAxis:u}))&&void 0!==d?d:[]},e}(ha),Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.drawImp=function(t){var e,a=this.getWidget(),i=a.getPane(),r=a.getBounding(),n=a.getPane().getChart().getChartStore(),s=n.getTooltipStore().getCrosshair(),o=n.getStyles().crosshair;if(z(s.paneId)&&this.compare(s,i.getId())&&o.show){var h=this.getDirectionStyles(o),l=h.text;if(h.show&&l.show){var u=i.getAxisComponent(),c=this.getText(s,n,u);t.font=rt(l.size,l.weight,l.family),null===(e=this.createFigure({name:"text",attrs:this.getTextAttrs(c,t.measureText(c).width,s,r,u,l),styles:l}))||void 0===e||e.draw(t)}}},e.prototype.compare=function(t,e){return t.paneId===e},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,e,a){var i,r=a,n=a.convertFromPixel(t.y);if(r.getType()===m.Percentage){var s=e.getVisibleFirstData();i="".concat(((n-s.close)/s.close*100).toFixed(2),"%")}else{var o=e.getIndicatorStore().getInstances(t.paneId),h=0,l=!1;r.isInCandle()?h=e.getPrecision().price:o.forEach((function(t){h=Math.max(t.precision,h),l||(l=t.shouldFormatBigNumber)})),i=q(n,h),l&&(i=e.getCustomApi().formatBigNumber(i))}return at(et(i,e.getThousandsSeparator()),e.getDecimalFoldThreshold())},e.prototype.getTextAttrs=function(t,e,a,i,r,n){var s,o,h=r;return h.isFromZero()?(s=0,o="left"):(s=i.width,o="right"),{x:s,y:a.y,text:t,align:o,baseline:"middle"}},e}(ea),Ta=function(t){function e(e,a){var i=t.call(this,e,a)||this;return i._yAxisView=new pa(i),i._candleLastPriceLabelView=new va(i),i._indicatorLastValueView=new ga(i),i._overlayYAxisView=new Sa(i),i._crosshairHorizontalLabelView=new Ia(i),i.getContainer().style.cursor="ns-resize",i.addChild(i._overlayYAxisView),i}return s(e,t),e.prototype.getName=function(){return Fe.Y_AXIS},e.prototype.updateMain=function(t){this._yAxisView.draw(t),this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t)},e}(Ne),xa=function(){function t(t){this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return t.prototype.getParent=function(){return this._parent},t.prototype.buildTicks=function(t){if(this._autoCalcTickFlag&&(this._range=this.calcRange()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t){this._prevRange=this._range;var e=this.optimalTicks(this._calcTicks());return this._ticks=this.createTicks({range:this._range,bounding:this.getSelfBounding(),defaultTicks:e}),!0}return!1},t.prototype.getTicks=function(){return this._ticks},t.prototype.getScrollZoomEnabled=function(){var t;return null===(t=this.getParent().getOptions().axisOptions.scrollZoomEnabled)||void 0===t||t},t.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},t.prototype.getRange=function(){return this._range},t.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},t.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},t.prototype._calcTicks=function(){var t=this._range,e=t.realFrom,a=t.realTo,i=t.realRange,r=[];if(i>=0){var n=S(this._calcTickInterval(i),2),s=n[0],o=n[1],h=xt(Math.ceil(e/s)*s,o),l=xt(Math.floor(a/s)*s,o),u=0,c=h;if(0!==s)while(c<=l){var d=c.toFixed(o);r[u]={text:d,coord:0,value:d},++u,c+=s}}return r},t.prototype._calcTickInterval=function(t){var e=function(t){var e=Math.floor(At(t)),a=bt(e),i=t/a,r=0;return r=i<1.5?1:i<2.5?2:i<3.5?3:i<4.5?4:i<5.5?5:i<6.5?6:8,t=r*a,e>=-20?+t.toFixed(e<0?-e:0):t}(t/8),a=function(t){var e=t.toString(),a=e.indexOf("e");if(a>0){var i=+e.slice(a+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r}(e);return[e,a]},t}(),ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.calcRange=function(){var t,e,a,i,r=this.getParent(),n=r.getChart(),s=n.getChartStore(),o=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,l=[],u=!1,c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,C=Number.MAX_SAFE_INTEGER,D=s.getIndicatorStore().getInstances(r.getId());D.forEach((function(t){var e,a,i;u||(u=null!==(e=t.shouldOhlc)&&void 0!==e&&e),C=Math.min(C,t.precision),X(t.minValue)&&(c=Math.min(c,t.minValue)),X(t.maxValue)&&(d=Math.max(d,t.maxValue)),l.push({figures:null!==(a=t.figures)&&void 0!==a?a:[],result:null!==(i=t.result)&&void 0!==i?i:[]})}));var p=4,v=this.isInCandle();if(v){var g=s.getPrecision().price;p=C!==Number.MAX_SAFE_INTEGER?Math.min(C,g):g}else C!==Number.MAX_SAFE_INTEGER&&(p=C);var S=s.getVisibleDataList(),I=n.getStyles().candle,T=I.type===f.Area,x=I.area.value,y=v&&!T||!v&&u;S.forEach((function(t){var e=t.dataIndex,a=t.data;if(W(a)&&(y&&(o=Math.min(o,a.low),h=Math.max(h,a.high)),v&&T)){var i=a[x];X(i)&&(o=Math.min(o,i),h=Math.max(h,i))}l.forEach((function(t){var a,i=t.figures,r=t.result,n=null!==(a=r[e])&&void 0!==a?a:{};i.forEach((function(t){var e=n[t.key];X(e)&&(o=Math.min(o,e),h=Math.max(h,e))}))}))})),o!==Number.MAX_SAFE_INTEGER&&h!==Number.MIN_SAFE_INTEGER?(o=Math.min(c,o),h=Math.max(d,h)):(o=0,h=10);var A,b=this.getType();switch(b){case m.Percentage:var w=s.getVisibleFirstData();W(w)&&X(w.close)&&(o=(o-w.close)/w.close*100,h=(h-w.close)/w.close*100),A=Math.pow(10,-2);break;case m.Log:o=At(o),h=At(h),A=.05*bt(-p);break;default:A=bt(-p)}if(o===h||Math.abs(o-h)<A){var F=c===o,M=d===h;o=F?o:M?o-8*A:o-4*A,h=M?h:F?h+8*A:h+4*A}var L=null!==(e=null===(t=this.getParent().getYAxisWidget())||void 0===t?void 0:t.getBounding().height)&&void 0!==e?e:0,E=r.getOptions().gap,N=null!==(a=null===E||void 0===E?void 0:E.top)&&void 0!==a?a:.2;N>=1&&(N/=L);var P=null!==(i=null===E||void 0===E?void 0:E.bottom)&&void 0!==i?i:.1;P>=1&&(P/=L);var O,R,B,_=Math.abs(h-o);return o-=_*P,h+=_*N,_=Math.abs(h-o),b===m.Log?(O=bt(o),R=bt(h),B=Math.abs(R-O)):(O=o,R=h,B=_),{from:o,to:h,range:_,realFrom:O,realTo:R,realRange:B}},e.prototype._innerConvertToPixel=function(t){var e,a,i=null!==(a=null===(e=this.getParent().getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==a?a:0,r=this.getRange(),n=r.from,s=r.range,o=(t-n)/s;return this.isReverse()?Math.round(o*i):Math.round((1-o)*i)},e.prototype.isInCandle=function(){return this.getParent().getId()===Te.CANDLE},e.prototype.getType=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.type:m.Normal},e.prototype.getPosition=function(){return this.getParent().getChart().getStyles().yAxis.position},e.prototype.isReverse=function(){return!!this.isInCandle()&&this.getParent().getChart().getStyles().yAxis.reverse},e.prototype.isFromZero=function(){var t=this.getParent().getChart().getStyles().yAxis,e=t.inside;return t.position===C.Left&&e||t.position===C.Right&&!e},e.prototype.optimalTicks=function(t){var e,a,i=this,r=this.getParent(),n=null!==(a=null===(e=r.getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==a?a:0,s=r.getChart().getChartStore(),o=s.getCustomApi(),h=[],l=this.getType(),u=s.getIndicatorStore().getInstances(r.getId()),c=s.getThousandsSeparator(),d=s.getDecimalFoldThreshold(),f=0,C=!1;this.isInCandle()?f=s.getPrecision().price:u.forEach((function(t){f=Math.max(f,t.precision),C||(C=t.shouldFormatBigNumber)}));var D,p=s.getStyles().xAxis.tickText.size;return t.forEach((function(t){var e,a=t.value,r=i._innerConvertToPixel(+a);switch(l){case m.Percentage:e="".concat(q(a,2),"%");break;case m.Log:r=i._innerConvertToPixel(At(+a)),e=q(a,f);break;default:e=q(a,f),C&&(e=o.formatBigNumber(a));break}e=at(et(e,c),d);var s=X(D);r>p&&r<n-p&&(s&&Math.abs(D-r)>2*p||!s)&&(h.push({text:e,coord:r,value:a}),D=r)})),h},e.prototype.getAutoSize=function(){var t=this.getParent(),e=t.getChart(),a=e.getStyles(),i=a.yAxis,r=i.size;if("auto"!==r)return r;var n=e.getChartStore(),s=n.getCustomApi(),o=0;if(i.show&&(i.axisLine.show&&(o+=i.axisLine.size),i.tickLine.show&&(o+=i.tickLine.length),i.tickText.show)){var h=0;this.getTicks().forEach((function(t){h=Math.max(h,nt(t.text,i.tickText.size,i.tickText.weight,i.tickText.family))})),o+=i.tickText.marginStart+i.tickText.marginEnd+h}var l=a.crosshair,u=0;if(l.show&&l.horizontal.show&&l.horizontal.text.show){var c=n.getIndicatorStore().getInstances(t.getId()),d=0,f=!1;c.forEach((function(t){d=Math.max(t.precision,d),f||(f=t.shouldFormatBigNumber)}));var C=2;if(this.getType()!==m.Percentage)if(this.isInCandle()){var D=n.getPrecision().price,p=a.indicator.lastValueMark;C=p.show&&p.text.show?Math.max(d,D):D}else C=d;var v=q(this.getRange().to,C);f&&(v=s.formatBigNumber(v)),v=at(v,n.getDecimalFoldThreshold()),u+=l.horizontal.text.paddingLeft+l.horizontal.text.paddingRight+2*l.horizontal.text.borderSize+nt(v,l.horizontal.text.size,l.horizontal.text.weight,l.horizontal.text.family)}return Math.max(o,u)},e.prototype.getSelfBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var e,a,i=null!==(a=null===(e=this.getParent().getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==a?a:0,r=this.getRange(),n=r.from,s=r.range,o=this.isReverse()?t/i:1-t/i,h=o*s+n;switch(this.getType()){case m.Percentage:var l=this.getParent().getChart().getChartStore().getVisibleFirstData();return W(l)&&X(l.close)?l.close*h/100+l.close:0;case m.Log:return bt(h);default:return h}},e.prototype.convertToRealValue=function(t){var e=t;return this.getType()===m.Log&&(e=bt(t)),e},e.prototype.convertToPixel=function(t){var e=t;switch(this.getType()){case m.Percentage:var a=this.getParent().getChart().getChartStore().getVisibleFirstData();W(a)&&X(a.close)&&(e=(t-a.close)/a.close*100);break;case m.Log:e=At(t);break;default:e=t}return this._innerConvertToPixel(e)},e.prototype.convertToNicePixel=function(t){var e,a,i=null!==(a=null===(e=this.getParent().getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==a?a:0,r=this.convertToPixel(t);return Math.round(Math.max(.05*i,Math.min(r,.98*i)))},e.extend=function(t){var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return s(a,e),a.prototype.createTicks=function(e){return t.createTicks(e)},a}(e);return a},e}(xa),Aa={default:ya.extend({name:"default",createTicks:function(t){var e=t.defaultTicks;return e}})};var ba=function(){function t(t,e,a,i){this._bounding=Le(),this._chart=a,this._id=i,this._init(t,e)}return t.prototype._init=function(t,e){this._rootContainer=t,this._container=It("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),null!==e?t.insertBefore(this._container,e):t.appendChild(this._container)},t.prototype.getContainer=function(){return this._container},t.prototype.getId=function(){return this._id},t.prototype.getChart=function(){return this._chart},t.prototype.getBounding=function(){return this._bounding},t.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(null!==t&&void 0!==t?t:3,this._container,this._bounding)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t}(),wa=function(t){function e(e,a,i,r,n){var s=t.call(this,e,a,i,r)||this;s._yAxisWidget=null,s._options={minHeight:30,dragEnabled:!0,gap:{top:.2,bottom:.1},axisOptions:{name:"default",scrollZoomEnabled:!0}};var o=s.getContainer();return s._mainWidget=s.createMainWidget(o),s._yAxisWidget=s.createYAxisWidget(o),s.setOptions(n),s}return s(e,t),e.prototype.setOptions=function(t){var e,a,i,r,n,s=null===(e=t.axisOptions)||void 0===e?void 0:e.name;return(this._options.axisOptions.name!==s&&z(s)||!W(this._axis))&&(this._axis=this.createAxisComponent(null!==s&&void 0!==s?s:"default")),k(this._options,t),this.getId()===Te.X_AXIS?(r=this.getMainWidget().getContainer(),n="ew-resize"):(r=this.getYAxisWidget().getContainer(),n="ns-resize"),null===(i=null===(a=t.axisOptions)||void 0===a?void 0:a.scrollZoomEnabled)||void 0===i||i?r.style.cursor=n:r.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,e,a){var i,r;k(this.getBounding(),t);var n={};return W(t.height)&&(n.height=t.height),W(t.top)&&(n.top=t.top),this._mainWidget.setBounding(n),null===(i=this._yAxisWidget)||void 0===i||i.setBounding(n),W(e)&&this._mainWidget.setBounding(e),W(a)&&(null===(r=this._yAxisWidget)||void 0===r||r.setBounding(a)),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var e;this._mainWidget.update(t),null===(e=this._yAxisWidget)||void 0===e||e.update(t)},e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),this._mainWidget.destroy(),null===(e=this._yAxisWidget)||void 0===e||e.destroy()},e.prototype.getImage=function(t){var e=this.getBounding(),a=e.width,i=e.height,r=It("canvas",{width:"".concat(a,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),n=r.getContext("2d"),s=it(r);r.width=a*s,r.height=i*s,n.scale(s,s);var o=this._mainWidget.getBounding();if(n.drawImage(this._mainWidget.getImage(t),o.left,0,o.width,o.height),null!==this._yAxisWidget){var h=this._yAxisWidget.getBounding();n.drawImage(this._yAxisWidget.getImage(t),h.left,0,h.width,h.height)}return r},e.prototype.createYAxisWidget=function(t){return null},e}(ba),Fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.createAxisComponent=function(t){var e=function(t){var e;return null!==(e=Aa[t])&&void 0!==e?e:Aa.default}(null!==t&&void 0!==t?t:"default");return new e(this)},e.prototype.createMainWidget=function(t){return new la(t,this)},e.prototype.createYAxisWidget=function(t){return new Ta(t,this)},e}(wa),Ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.createMainWidget=function(t){return new ma(t,this)},e}(Fa),La=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,e,a){var i=a.tickLine,r=a.axisLine.size;return t.map((function(t){return{coordinates:[{x:t.coord,y:0},{x:t.coord,y:r+i.length}]}}))},e.prototype.createTickTexts=function(t,e,a){var i=a.tickText,r=a.axisLine.size,n=a.tickLine.length;return t.map((function(t){return{x:t.coord,y:r+n+i.marginStart,text:t.text,align:"center",baseline:"top"}}))},e}(Da),Ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(t){return t.getInstances()},e.prototype.getProgressOverlay=function(t){return t.instance},e.prototype.getDefaultFigures=function(t,e,a,i,r,n,s,o,h,l,u){var c,d=[];if(t.needDefaultXAxisFigure&&t.id===(null===(c=u.instance)||void 0===c?void 0:c.id)){var f=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER;e.forEach((function(e,a){f=Math.min(f,e.x),C=Math.max(C,e.x);var i=t.points[a];if(X(i.timestamp)){var s=n.formatDate(r,i.timestamp,"YYYY-MM-DD HH:mm",ct.Crosshair);d.push({type:"text",attrs:{x:e.x,y:0,text:s,align:"center"},ignoreEvent:!0})}})),e.length>1&&d.unshift({type:"rect",attrs:{x:f,y:0,width:C-f,height:a.height},ignoreEvent:!0})}return d},e.prototype.getFigures=function(t,e,a,i,r,n,s,o,h,l,u){var c,d;return null!==(d=null===(c=t.createXAxisFigures)||void 0===c?void 0:c.call(t,{overlay:t,coordinates:e,bounding:a,barSpace:i,precision:r,thousandsSeparator:n,decimalFoldThreshold:s,dateTimeFormat:o,defaultStyles:h,xAxis:l,yAxis:u}))&&void 0!==d?d:[]},e}(Sa),Na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t){return W(t.kLineData)&&t.dataIndex===t.realDataIndex},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,e){var a,i=null===(a=t.kLineData)||void 0===a?void 0:a.timestamp;return e.getCustomApi().formatDate(e.getTimeScaleStore().getDateTimeFormat(),i,"YYYY-MM-DD HH:mm",ct.Crosshair)},e.prototype.getTextAttrs=function(t,e,a,i,r,n){var s,o=a.realX,h="center";return o-e/2-n.paddingLeft<0?(s=0,h="left"):o+e/2+n.paddingRight>i.width?(s=i.width,h="right"):s=o,{x:s,y:0,text:t,align:h,baseline:"top"}},e}(Ia),Pa=function(t){function e(e,a){var i=t.call(this,e,a)||this;return i._xAxisView=new La(i),i._overlayXAxisView=new Ea(i),i._crosshairVerticalLabelView=new Na(i),i.getContainer().style.cursor="ew-resize",i.addChild(i._overlayXAxisView),i}return s(e,t),e.prototype.getName=function(){return Fe.X_AXIS},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(Ne),Oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.calcRange=function(){var t=this.getParent().getChart().getChartStore(),e=t.getTimeScaleStore().getVisibleRange(),a=e.from,i=e.to,r=a,n=i-1,s=i-a;return{from:r,to:n,range:s,realFrom:r,realTo:n,realRange:s}},e.prototype.optimalTicks=function(t){var e,a,i=this.getParent().getChart(),r=i.getChartStore(),n=r.getCustomApi().formatDate,s=[],o=t.length,h=r.getDataList();if(o>0){var l=r.getTimeScaleStore().getDateTimeFormat(),u=i.getStyles().xAxis.tickText,c=nt("00-00 00:00",u.size,u.weight,u.family),d=parseInt(t[0].value,10),f=this.convertToPixel(d),C=1;if(o>1){var m=parseInt(t[1].value,10),D=this.convertToPixel(m),p=Math.abs(D-f);p<c&&(C=Math.ceil(c/p))}for(var v=0;v<o;v+=C){var g=parseInt(t[v].value,10),S=h[g],I=S.timestamp,T=n(l,I,"HH:mm",ct.XAxis);if(0!==v){var x=parseInt(t[v-C].value,10),y=h[x],A=y.timestamp;T=null!==(e=this._optimalTickLabel(n,l,I,A))&&void 0!==e?e:T}var b=this.convertToPixel(g);s.push({text:T,coord:b,value:I})}var w=s.length;if(1===w)s[0].text=n(l,s[0].value,"YYYY-MM-DD HH:mm",ct.XAxis);else{var F=s[0].value,M=s[1].value;if(W(s[2])){var L=s[2].text;/^[0-9]{2}-[0-9]{2}$/.test(L)?s[0].text=n(l,F,"MM-DD",ct.XAxis):/^[0-9]{4}-[0-9]{2}$/.test(L)?s[0].text=n(l,F,"YYYY-MM",ct.XAxis):/^[0-9]{4}$/.test(L)&&(s[0].text=n(l,F,"YYYY",ct.XAxis))}else s[0].text=null!==(a=this._optimalTickLabel(n,l,F,M))&&void 0!==a?a:s[0].text}}return s},e.prototype._optimalTickLabel=function(t,e,a,i){var r=t(e,a,"YYYY",ct.XAxis),n=t(e,a,"YYYY-MM",ct.XAxis),s=t(e,a,"MM-DD",ct.XAxis);return r!==t(e,i,"YYYY",ct.XAxis)?r:n!==t(e,i,"YYYY-MM",ct.XAxis)?n:s!==t(e,i,"MM-DD",ct.XAxis)?s:null},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),e=t.xAxis,a=e.size;if("auto"!==a)return a;var i=t.crosshair,r=0;e.show&&(e.axisLine.show&&(r+=e.axisLine.size),e.tickLine.show&&(r+=e.tickLine.length),e.tickText.show&&(r+=e.tickText.marginStart+e.tickText.marginEnd+e.tickText.size));var n=0;return i.show&&i.vertical.show&&i.vertical.text.show&&(n+=i.vertical.text.paddingTop+i.vertical.text.paddingBottom+2*i.vertical.text.borderSize+i.vertical.text.size),Math.max(r,n)},e.prototype.getSelfBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var e=this.getParent().getChart().getChartStore().getTimeScaleStore(),a=e.coordinateToDataIndex(t);return e.dataIndexToTimestamp(a)},e.prototype.convertTimestampToPixel=function(t){var e=this.getParent().getChart().getChartStore().getTimeScaleStore(),a=e.timestampToDataIndex(t);return e.dataIndexToCoordinate(a)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(t)},e.extend=function(t){var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return s(a,e),a.prototype.createTicks=function(e){return t.createTicks(e)},a}(e);return a},e}(xa),Ra={default:Oa.extend({name:"default",createTicks:function(t){var e=t.defaultTicks;return e}})};var Ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.createAxisComponent=function(t){var e=function(t){var e;return null!==(e=Ra[t])&&void 0!==e?e:Ra.default}(t);return new e(this)},e.prototype.createMainWidget=function(t){return new Pa(t,this)},e}(wa);var _a=function(t){function e(e,a){var i=t.call(this,e,a)||this;return i._dragFlag=!1,i._dragStartY=0,i._topPaneHeight=0,i._bottomPaneHeight=0,i._pressedMouseMoveEvent=function(t,e){var a=0;return function(){var i=Date.now();i-a>e&&(t.apply(this,arguments),a=i)}}(i._pressedTouchMouseMoveEvent,20),i.registerEvent("touchStartEvent",i._mouseDownEvent.bind(i)).registerEvent("touchMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("touchEndEvent",i._mouseUpEvent.bind(i)).registerEvent("mouseDownEvent",i._mouseDownEvent.bind(i)).registerEvent("mouseUpEvent",i._mouseUpEvent.bind(i)).registerEvent("pressedMouseMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("mouseEnterEvent",i._mouseEnterEvent.bind(i)).registerEvent("mouseLeaveEvent",i._mouseLeaveEvent.bind(i)),i}return s(e,t),e.prototype.getName=function(){return Fe.SEPARATOR},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){this._dragFlag=!0,this._dragStartY=t.pageY;var e=this.getPane();return this._topPaneHeight=e.getTopPane().getBounding().height,this._bottomPaneHeight=e.getBottomPane().getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var e=t.pageY-this._dragStartY,a=this.getPane(),i=a.getTopPane(),r=a.getBottomPane(),n=e<0;if(null!==i&&(null===r||void 0===r?void 0:r.getOptions().dragEnabled)){var s=void 0,o=void 0,h=void 0,l=void 0;n?(s=i,o=r,h=this._topPaneHeight,l=this._bottomPaneHeight):(s=r,o=i,h=this._bottomPaneHeight,l=this._topPaneHeight);var u=s.getOptions().minHeight;if(h>u){var c=Math.max(h-Math.abs(e),u),d=h-c;s.setBounding({height:c}),o.setBounding({height:l+d});var f=a.getChart();f.getChartStore().getActionStore().execute(J.OnPaneDrag,{paneId:a.getId()}),f.adjustPaneViewport(!0,!0,!0,!0,!0)}}return!0},e.prototype._mouseEnterEvent=function(){var t,e=this.getPane(),a=e.getBottomPane();if(null!==(t=null===a||void 0===a?void 0:a.getOptions().dragEnabled)&&void 0!==t&&t){var i=e.getChart(),r=i.getStyles().separator;return this.getContainer().style.background=r.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="",!0)},e.prototype.createContainer=function(){return It("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,e,a){if(4===a||2===a){var i=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-i.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(Ee),ka=function(t){function e(e,a,i,r,n,s){var o=t.call(this,e,a,i,r)||this;return o.getContainer().style.overflow="",o._topPane=n,o._bottomPane=s,o._separatorWidget=new _a(o.getContainer(),o),o}return s(e,t),e.prototype.setBounding=function(t){return k(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var e=this.getBounding(),a=e.width,i=e.height,r=this.getChart().getStyles().separator,n=It("canvas",{width:"".concat(a,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),s=n.getContext("2d"),o=it(n);return n.width=a*o,n.height=i*o,s.scale(o,o),s.fillStyle=r.color,s.fillRect(0,0,a,i),n},e.prototype.updateImp=function(t,e,a){if(4===t||2===t){var i=this.getChart().getStyles().separator;e.style.backgroundColor=i.color,e.style.height="".concat(a.height,"px"),e.style.marginLeft="".concat(a.left,"px"),e.style.width="".concat(a.width,"px"),this._separatorWidget.update(t)}},e}(ba);function Ga(){var t;return"undefined"!==typeof window&&(null!==(t=window.navigator.userAgent.toLowerCase().indexOf("firefox"))&&void 0!==t?t:-1)>-1}function Va(){return"undefined"!==typeof window&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var Ha,Ya=function(){function t(t,e,a){var i=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Va(),this._onFirefoxOutsideMouseUp=function(t){i._mouseUpHandler(t)},this._onMobileSafariDoubleClick=function(t){if(i._firesTouchEvents(t)){if(++i._tapCount,null!==i._tapTimeoutId&&i._tapCount>1){var e=i._mouseTouchMoveWithDownInfo(i._getCoordinate(t),i._tapCoordinate).manhattanDistance;e<30&&!i._cancelTap&&i._processEvent(i._makeCompatEvent(t),i._handler.doubleTapEvent),i._resetTapTimeout()}}else if(++i._clickCount,null!==i._clickTimeoutId&&i._clickCount>1){e=i._mouseTouchMoveWithDownInfo(i._getCoordinate(t),i._clickCoordinate).manhattanDistance;e<5&&!i._cancelClick&&i._processEvent(i._makeCompatEvent(t),i._handler.mouseDoubleClickEvent),i._resetClickTimeout()}},this._target=t,this._handler=e,this._options=a,this._init()}return t.prototype.destroy=function(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeMouseWheel&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),null!==this._unsubscribeContextMenu&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},t.prototype._mouseEnterHandler=function(t){var e,a,i,r=this;null===(e=this._unsubscribeMousemove)||void 0===e||e.call(this),null===(a=this._unsubscribeMouseWheel)||void 0===a||a.call(this),null===(i=this._unsubscribeContextMenu)||void 0===i||i.call(this);var n=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",n)},this._target.addEventListener("mousemove",n);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var o=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",o)},this._target.addEventListener("contextmenu",o,{passive:!1}),this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},t.prototype._resetClickTimeout=function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},t.prototype._resetTapTimeout=function(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},t.prototype._mouseMoveHandler=function(t){this._mousePressed||null!==this._touchMoveStartCoordinate||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},t.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!W(this._handler.mouseWheelHortEvent))return;if(this._preventDefault(t),0===Math.abs(t.deltaX))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!W(this._handler.mouseWheelVertEvent))return;var e=-t.deltaY/100;if(0===e)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120;break;case t.DOM_DELTA_LINE:e*=32;break}if(0!==e){var a=Math.sign(e)*Math.min(1,Math.abs(e));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),a)}}},t.prototype._contextMenuHandler=function(t){this._preventDefault(t)},t.prototype._touchMoveHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(null!==e&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),null===this._startPinchMiddleCoordinate&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var a=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._touchMoveStartCoordinate),i=a.xOffset,r=a.yOffset,n=a.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(n<5)){if(!this._touchMoveExceededManhattanDistance){var s=.5*i,o=r>=s&&!this._options.treatVertDragAsPageScroll(),h=s>r&&!this._options.treatHorzDragAsPageScroll();o||h||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,e),this._handler.touchMoveEvent)}}},t.prototype._mouseMoveWithDownHandler=function(t){if(0===t.button){var e=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),a=e.manhattanDistance;a>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},t.prototype._mouseTouchMoveWithDownInfo=function(t,e){var a=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),r=a+i;return{xOffset:a,yOffset:i,manhattanDistance:r}},t.prototype._touchEndHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null!==e){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var a=this._makeCompatEvent(t,e);if(this._processEvent(a,this._handler.touchEndEvent),++this._tapCount,null!==this._tapTimeoutId&&this._tapCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._tapCoordinate).manhattanDistance;i<30&&!this._cancelTap&&this._processEvent(a,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(a,this._handler.tapEvent),W(this._handler.tapEvent)&&this._preventDefault(t));0===this._tapCount&&this._preventDefault(t),0===t.touches.length&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},t.prototype._mouseUpHandler=function(t){if(0===t.button){var e=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Ga()){var a=this._target.ownerDocument.documentElement;a.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,null!==this._clickTimeoutId&&this._clickCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;i<5&&!this._cancelClick&&this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)}},t.prototype._clearLongTapTimeout=function(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},t.prototype._touchStartHandler=function(t){if(null===this._activeTouchId){var e=t.changedTouches[0];this._activeTouchId=e.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var a=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(e),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._touchMoveHandler.bind(this),r=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){a.removeEventListener("touchmove",i),a.removeEventListener("touchend",r)},a.addEventListener("touchmove",i,{passive:!1}),a.addEventListener("touchend",r,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),500),this._processEvent(this._makeCompatEvent(t,e),this._handler.touchStartEvent),null===this._tapTimeoutId&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(e))}},t.prototype._mouseDownHandler=function(t){if(2===t.button)return this._preventDefault(t),void this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);if(0===t.button){var e=this._target.ownerDocument.documentElement;Ga()&&e.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var a=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",a),e.addEventListener("mouseup",i),this._mousePressed=!0,this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),null===this._clickTimeoutId&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(t)))}},t.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var e=this._target.ownerDocument,a=function(e){null!=t._handler.mouseDownOutsideEvent&&(e.composed&&t._target.contains(e.composedPath()[0])||null!==e.target&&t._target.contains(e.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){e.removeEventListener("touchstart",a)},this._unsubscribeOutsideMouseEvents=function(){e.removeEventListener("mousedown",a)},e.addEventListener("mousedown",a),e.addEventListener("touchstart",a,{passive:!0}),Va()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1})),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype._initPinch=function(){var t=this;(W(this._handler.pinchStartEvent)||W(this._handler.pinchEvent)||W(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",(function(e){t._checkPinchState(e.touches)}),{passive:!0}),this._target.addEventListener("touchmove",(function(e){if(2===e.touches.length&&null!==t._startPinchMiddleCoordinate&&W(t._handler.pinchEvent)){var a=t._getTouchDistance(e.touches[0],e.touches[1]),i=a/t._startPinchDistance;t._handler.pinchEvent(D(D({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),t._preventDefault(e)}}),{passive:!1}),this._target.addEventListener("touchend",(function(e){t._checkPinchState(e.touches)})))},t.prototype._checkPinchState=function(t){1===t.length&&(this._pinchPrevented=!1),2!==t.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},t.prototype._startPinch=function(t){var e,a=null!==(e=this._target.getBoundingClientRect())&&void 0!==e?e:{left:0,top:0};this._startPinchMiddleCoordinate={x:(t[0].clientX-a.left+(t[1].clientX-a.left))/2,y:(t[0].clientY-a.top+(t[1].clientY-a.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),W(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},t.prototype._stopPinch=function(){null!==this._startPinchMiddleCoordinate&&(this._startPinchMiddleCoordinate=null,W(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},t.prototype._mouseLeaveHandler=function(t){var e,a,i;null===(e=this._unsubscribeMousemove)||void 0===e||e.call(this),null===(a=this._unsubscribeMouseWheel)||void 0===a||a.call(this),null===(i=this._unsubscribeContextMenu)||void 0===i||i.call(this),this._firesTouchEvents(t)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Va())},t.prototype._longTapHandler=function(t){var e=this._touchWithId(t.touches,this._activeTouchId);null!==e&&(this._processEvent(this._makeCompatEvent(t,e),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},t.prototype._firesTouchEvents=function(t){var e;return W(null===(e=t.sourceCapabilities)||void 0===e?void 0:e.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+500},t.prototype._processEvent=function(t,e){null===e||void 0===e||e.call(this._handler,t)},t.prototype._makeCompatEvent=function(t,e){var a,i=this,r=null!==e&&void 0!==e?e:t,n=null!==(a=this._target.getBoundingClientRect())&&void 0!==a?a:{left:0,top:0};return{x:r.clientX-n.left,y:r.clientY-n.top,pageX:r.pageX,pageY:r.pageY,isTouch:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type&&"wheel"!==t.type,preventDefault:function(){"touchstart"!==t.type&&i._preventDefault(t)}}},t.prototype._getTouchDistance=function(t,e){var a=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(a*a+i*i)},t.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},t.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},t.prototype._eventTimeStamp=function(t){var e;return null!==(e=t.timeStamp)&&void 0!==e?e:performance.now()},t.prototype._touchWithId=function(t,e){for(var a=0;a<t.length;++a)if(t[a].identifier===e)return t[a];return null},t}(),Xa=function(){function t(t,e){var a=this;this._flingStartTime=(new Date).getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(t){if(t.shiftKey)switch(t.code){case"Equal":a._chart.getChartStore().getTimeScaleStore().zoom(.5);break;case"Minus":a._chart.getChartStore().getTimeScaleStore().zoom(-.5);break;case"ArrowLeft":var e=a._chart.getChartStore().getTimeScaleStore();e.startScroll(),e.scroll(-3*e.getBarSpace().bar);break;case"ArrowRight":e=a._chart.getChartStore().getTimeScaleStore();e.startScroll(),e.scroll(3*e.getBarSpace().bar);break}},this._container=t,this._chart=e,this._event=new Ya(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return t.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},t.prototype.pinchEvent=function(t,e){var a=this._findWidgetByEvent(t),i=a.pane,r=a.widget;if((null===i||void 0===i?void 0:i.getId())!==Te.X_AXIS&&(null===r||void 0===r?void 0:r.getName())===Fe.MAIN){var n=this._makeWidgetEvent(t,r),s=5*(e-this._pinchScale);return this._pinchScale=e,this._chart.getChartStore().getTimeScaleStore().zoom(s,{x:n.x,y:n.y}),!0}return!1},t.prototype.mouseWheelHortEvent=function(t,e){var a=this._chart.getChartStore().getTimeScaleStore();return a.startScroll(),a.scroll(e),!0},t.prototype.mouseWheelVertEvent=function(t,e){var a=this._findWidgetByEvent(t).widget,i=this._makeWidgetEvent(t,a),r=null===a||void 0===a?void 0:a.getName();return r===Fe.MAIN&&(this._chart.getChartStore().getTimeScaleStore().zoom(e,{x:i.x,y:i.y}),!0)},t.prototype.mouseDownEvent=function(t){var e,a,i=this._findWidgetByEvent(t),r=i.pane,n=i.widget;if(this._mouseDownWidget=n,null!==n){var s=this._makeWidgetEvent(t,n),o=n.getName();switch(o){case Fe.SEPARATOR:return n.dispatchEvent("mouseDownEvent",s);case Fe.MAIN:var h=null!==(e=r.getAxisComponent().getRange())&&void 0!==e?e:null;return this._prevYAxisRange=null===h?h:D({},h),this._startScrollCoordinate={x:s.x,y:s.y},this._chart.getChartStore().getTimeScaleStore().startScroll(),n.dispatchEvent("mouseDownEvent",s);case Fe.X_AXIS:var l=n.dispatchEvent("mouseDownEvent",s);return l&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:s.x,y:s.y},this._xAxisStartScaleDistance=s.pageX,l;case Fe.Y_AXIS:l=n.dispatchEvent("mouseDownEvent",s);l&&this._chart.updatePane(1);h=null!==(a=r.getAxisComponent().getRange())&&void 0!==a?a:null;return this._prevYAxisRange=null===h?h:D({},h),this._yAxisStartScaleDistance=s.pageY,l}}return!1},t.prototype.mouseMoveEvent=function(t){var e,a,i,r=this._findWidgetByEvent(t),n=r.pane,s=r.widget,o=this._makeWidgetEvent(t,s);if((null===(e=this._mouseMoveTriggerWidgetInfo.pane)||void 0===e?void 0:e.getId())===(null===n||void 0===n?void 0:n.getId())&&(null===(a=this._mouseMoveTriggerWidgetInfo.widget)||void 0===a?void 0:a.getName())===(null===s||void 0===s?void 0:s.getName())||(null===s||void 0===s||s.dispatchEvent("mouseEnterEvent",o),null===(i=this._mouseMoveTriggerWidgetInfo.widget)||void 0===i||i.dispatchEvent("mouseLeaveEvent",o),this._mouseMoveTriggerWidgetInfo={pane:n,widget:s}),null!==s){var h=s.getName();switch(h){case Fe.MAIN:var l=s.dispatchEvent("mouseMoveEvent",o),u=this._chart.getChartStore(),c={x:o.x,y:o.y,paneId:null===n||void 0===n?void 0:n.getId()};return l&&null!==u.getTooltipStore().getActiveIcon()&&(c=void 0,null!==s&&(s.getContainer().style.cursor="pointer")),this._chart.getChartStore().getTooltipStore().setCrosshair(c),l;case Fe.SEPARATOR:case Fe.X_AXIS:case Fe.Y_AXIS:l=s.dispatchEvent("mouseMoveEvent",o);return this._chart.getChartStore().getTooltipStore().setCrosshair(),l}}return!1},t.prototype.pressedMouseMoveEvent=function(t){var e,a,i,r,n;if(null!==this._mouseDownWidget&&this._mouseDownWidget.getName()===Fe.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var s=this._findWidgetByEvent(t),o=s.pane,h=s.widget;if(null!==h&&(null===(e=this._mouseDownWidget)||void 0===e?void 0:e.getPane().getId())===(null===o||void 0===o?void 0:o.getId())&&(null===(a=this._mouseDownWidget)||void 0===a?void 0:a.getName())===h.getName()){var l=this._makeWidgetEvent(t,h),u=h.getName();switch(u){case Fe.MAIN:var c=h.getBounding(),d=h.dispatchEvent("pressedMouseMoveEvent",l);if(!d&&null!==this._startScrollCoordinate){var f=o.getAxisComponent();if(null!==this._prevYAxisRange&&!f.getAutoCalcTickFlag()&&f.getScrollZoomEnabled()){var C,m=this._prevYAxisRange,D=m.from,p=m.to,v=m.range;C=null!==(i=null===f||void 0===f?void 0:f.isReverse())&&void 0!==i&&i?this._startScrollCoordinate.y-l.y:l.y-this._startScrollCoordinate.y;var g=C/c.height,S=v*g,I=D+S,T=p+S,x=f.convertToRealValue(I),y=f.convertToRealValue(T);f.setRange({from:I,to:T,range:T-I,realFrom:x,realTo:y,realRange:y-x})}var A=l.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(A)}return this._chart.getChartStore().getTooltipStore().setCrosshair({x:l.x,y:l.y,paneId:null===o||void 0===o?void 0:o.getId()}),d;case Fe.X_AXIS:d=h.dispatchEvent("pressedMouseMoveEvent",l);if(d)this._chart.updatePane(1);else{var b=o.getAxisComponent();if(null===(r=null===b||void 0===b?void 0:b.getScrollZoomEnabled())||void 0===r||r){g=this._xAxisStartScaleDistance/l.pageX;if(Number.isFinite(g)){var w=10*(g-this._xAxisScale);this._xAxisScale=g,this._chart.getChartStore().getTimeScaleStore().zoom(w,null!==(n=this._xAxisStartScaleCoordinate)&&void 0!==n?n:void 0)}}}return d;case Fe.Y_AXIS:d=h.dispatchEvent("pressedMouseMoveEvent",l);if(d)this._chart.updatePane(1);else{f=o.getAxisComponent();if(null!==this._prevYAxisRange&&f.getScrollZoomEnabled()){var F=this._prevYAxisRange,M=(D=F.from,p=F.to,v=F.range,g=l.pageY/this._yAxisStartScaleDistance,v*g);S=(M-v)/2,I=D-S,T=p+S,x=f.convertToRealValue(I),y=f.convertToRealValue(T);f.setRange({from:I,to:T,range:M,realFrom:x,realTo:y,realRange:y-x}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}}return d}}return!1},t.prototype.mouseUpEvent=function(t){var e=this._findWidgetByEvent(t).widget,a=!1;if(null!==e){var i=this._makeWidgetEvent(t,e),r=e.getName();switch(r){case Fe.MAIN:case Fe.SEPARATOR:case Fe.X_AXIS:case Fe.Y_AXIS:a=e.dispatchEvent("mouseUpEvent",i);break}a&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,a},t.prototype.mouseClickEvent=function(t){var e=this._findWidgetByEvent(t).widget;if(null!==e){var a=this._makeWidgetEvent(t,e);return e.dispatchEvent("mouseClickEvent",a)}return!1},t.prototype.mouseRightClickEvent=function(t){var e=this._findWidgetByEvent(t).widget,a=!1;if(null!==e){var i=this._makeWidgetEvent(t,e),r=e.getName();switch(r){case Fe.MAIN:case Fe.X_AXIS:case Fe.Y_AXIS:a=e.dispatchEvent("mouseRightClickEvent",i);break}a&&this._chart.updatePane(1)}return!1},t.prototype.mouseDoubleClickEvent=function(t){var e=this._findWidgetByEvent(t),a=e.pane,i=e.widget;if(null!==i){var r=i.getName();switch(r){case Fe.MAIN:var n=this._makeWidgetEvent(t,i);return i.dispatchEvent("mouseDoubleClickEvent",n);case Fe.Y_AXIS:var s=a.getAxisComponent();if(!s.getAutoCalcTickFlag())return s.setAutoCalcTickFlag(!0),this._chart.adjustPaneViewport(!1,!0,!0,!0),!0;break}}return!1},t.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().getTooltipStore().setCrosshair(),!0},t.prototype.touchStartEvent=function(t){var e=this._findWidgetByEvent(t),a=e.pane,i=e.widget;if(null!==i){var r=this._makeWidgetEvent(t,i),n=i.getName();switch(n){case Fe.MAIN:var s=this._chart.getChartStore(),o=s.getTooltipStore();if(i.dispatchEvent("mouseDownEvent",r))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,o.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(null!==this._flingScrollRequestId&&(mt(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=(new Date).getTime(),this._startScrollCoordinate={x:r.x,y:r.y},s.getTimeScaleStore().startScroll(),this._touchZoomed=!1,null!==this._touchCoordinate){var h=r.x-this._touchCoordinate.x,l=r.y-this._touchCoordinate.y,u=Math.sqrt(h*h+l*l);u<10?(this._touchCoordinate={x:r.x,y:r.y},o.setCrosshair({x:r.x,y:r.y,paneId:null===a||void 0===a?void 0:a.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,o.setCrosshair())}return!0;case Fe.X_AXIS:case Fe.Y_AXIS:var c=i.dispatchEvent("mouseDownEvent",r);return c&&this._chart.updatePane(1),c}}return!1},t.prototype.touchMoveEvent=function(t){var e,a,i,r=this._findWidgetByEvent(t),n=r.pane,s=r.widget;if(null!==s){var o=this._makeWidgetEvent(t,s),h=s.getName(),l=this._chart.getChartStore(),u=l.getTooltipStore();switch(h){case Fe.MAIN:if(s.dispatchEvent("pressedMouseMoveEvent",o))return null===(e=o.preventDefault)||void 0===e||e.call(o),u.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(null!==this._touchCoordinate)null===(a=o.preventDefault)||void 0===a||a.call(o),u.setCrosshair({x:o.x,y:o.y,paneId:null===n||void 0===n?void 0:n.getId()});else if(null!==this._startScrollCoordinate&&Math.abs(this._startScrollCoordinate.x-o.x)>this._startScrollCoordinate.y-o.y){var c=o.x-this._startScrollCoordinate.x;l.getTimeScaleStore().scroll(c)}return!0;case Fe.X_AXIS:case Fe.Y_AXIS:var d=s.dispatchEvent("pressedMouseMoveEvent",o);return d&&(null===(i=o.preventDefault)||void 0===i||i.call(o),this._chart.updatePane(1)),d}}return!1},t.prototype.touchEndEvent=function(t){var e=this,a=this._findWidgetByEvent(t).widget;if(null!==a){var i=this._makeWidgetEvent(t,a),r=a.getName();switch(r){case Fe.MAIN:if(a.dispatchEvent("mouseUpEvent",i),null!==this._startScrollCoordinate){var n=(new Date).getTime()-this._flingStartTime,s=i.x-this._startScrollCoordinate.x,o=s/(n>0?n:1)*20;if(n<200&&Math.abs(o)>0){var h=this._chart.getChartStore().getTimeScaleStore();(function t(){e._flingScrollRequestId=Ct((function(){h.startScroll(),h.scroll(o),o*=.975,Math.abs(o)<1?null!==e._flingScrollRequestId&&(mt(e._flingScrollRequestId),e._flingScrollRequestId=null):t()}))})()}}return!0;case Fe.X_AXIS:case Fe.Y_AXIS:var l=a.dispatchEvent("mouseUpEvent",i);l&&this._chart.updatePane(1)}}return!1},t.prototype.tapEvent=function(t){var e=this._findWidgetByEvent(t),a=e.pane,i=e.widget,r=!1;if(null!==i){var n=this._makeWidgetEvent(t,i),s=i.dispatchEvent("mouseClickEvent",n);if(i.getName()===Fe.MAIN){var o=this._makeWidgetEvent(t,i),h=this._chart.getChartStore(),l=h.getTooltipStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,l.setCrosshair(void 0,!0),r=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:o.x,y:o.y},l.setCrosshair({x:o.x,y:o.y,paneId:null===a||void 0===a?void 0:a.getId()},!0),r=!0),this._touchCancelCrosshair=!1)}(r||s)&&this._chart.updatePane(1)}return r},t.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},t.prototype.longTapEvent=function(t){var e=this._findWidgetByEvent(t),a=e.pane,i=e.widget;if(null!==i&&i.getName()===Fe.MAIN){var r=this._makeWidgetEvent(t,i);return this._touchCoordinate={x:r.x,y:r.y},this._chart.getChartStore().getTooltipStore().setCrosshair({x:r.x,y:r.y,paneId:null===a||void 0===a?void 0:a.getId()}),!0}return!1},t.prototype._findWidgetByEvent=function(t){var e,a,i,r,n=t.x,s=t.y,o=this._chart.getAllSeparatorPanes(),h=this._chart.getChartStore().getStyles().separator.size;try{for(var l=g(o),u=l.next();!u.done;u=l.next()){var c=S(u.value,2),d=c[1],f=d.getBounding(),C=f.top-Math.round((7-h)/2);if(n>=f.left&&n<=f.left+f.width&&s>=C&&s<=C+7)return{pane:d,widget:d.getWidget()}}}catch(w){e={error:w}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(e)throw e.error}}var m=this._chart.getAllDrawPanes(),D=null;try{for(var p=g(m),v=p.next();!v.done;v=p.next()){var I=v.value;f=I.getBounding();if(n>=f.left&&n<=f.left+f.width&&s>=f.top&&s<=f.top+f.height){D=I;break}}}catch(F){i={error:F}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}var T=null;if(null!==D){if(null===T){var x=D.getMainWidget(),y=x.getBounding();n>=y.left&&n<=y.left+y.width&&s>=y.top&&s<=y.top+y.height&&(T=x)}if(null===T){var A=D.getYAxisWidget();if(null!==A){var b=A.getBounding();n>=b.left&&n<=b.left+b.width&&s>=b.top&&s<=b.top+b.height&&(T=A)}}}return{pane:D,widget:T}},t.prototype._makeWidgetEvent=function(t,e){var a,i,r,n=null!==(a=null===e||void 0===e?void 0:e.getBounding())&&void 0!==a?a:null;return D(D({},t),{x:t.x-(null!==(i=null===n||void 0===n?void 0:n.left)&&void 0!==i?i:0),y:t.y-(null!==(r=null===n||void 0===n?void 0:n.top)&&void 0!==r?r:0)})},t.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},t}();e.DomPosition=Ha,function(t){t["Root"]="root",t["Main"]="main",t["YAxis"]="yAxis"}(Ha||(e.DomPosition=Ha={}));var Wa=function(){function t(t,e){this._drawPanes=[],this._separatorPanes=new Map,this._initContainer(t),this._chartEvent=new Xa(this._chartContainer,this),this._chartStore=new we(this,e),this._initPanes(e),this.adjustPaneViewport(!0,!0,!0)}return t.prototype._initContainer=function(t){this._container=t,this._chartContainer=It("div",{position:"relative",width:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)},t.prototype._initPanes=function(t){var e,a=this,i=null!==(e=null===t||void 0===t?void 0:t.layout)&&void 0!==e?e:[{type:"candle"}],r=!1,n=!1,s=function(t){if(!n){var e=a._createPane(Ba,Te.X_AXIS,null!==t&&void 0!==t?t:{});a._xAxisPane=e,n=!0}};i.forEach((function(t){var e,i,n;switch(t.type){case"candle":if(!r){var o=null!==(e=t.options)&&void 0!==e?e:{};k(o,{id:Te.CANDLE}),a._candlePane=a._createPane(Ma,Te.CANDLE,o);var h=null!==(i=t.content)&&void 0!==i?i:[];h.forEach((function(t){a.createIndicator(t,!0,o)})),r=!0}break;case"indicator":var l;h=null!==(n=t.content)&&void 0!==n?n:[];if(h.length>0)h.forEach((function(e){W(l)?a.createIndicator(e,!0,{id:l}):l=a.createIndicator(e,!0,t.options)}));break;case"xAxis":s(t.options);break}})),s({position:"bottom"})},t.prototype._createPane=function(t,e,a){var i,r=null,n=null,s=null===a||void 0===a?void 0:a.position;switch(s){case"top":var o=this._drawPanes[0];W(o)&&(n=new t(this._chartContainer,o.getContainer(),this,e,null!==a&&void 0!==a?a:{}),r=0);break;case"bottom":break;default:for(var h=this._drawPanes.length-1;h>-1;h--){var l=this._drawPanes[h],u=this._drawPanes[h-1];if("bottom"===(null===l||void 0===l?void 0:l.getOptions().position)&&"bottom"!==(null===u||void 0===u?void 0:u.getOptions().position)){n=new t(this._chartContainer,l.getContainer(),this,e,null!==a&&void 0!==a?a:{}),r=h;break}}}if(W(n)||(n=new t(this._chartContainer,null,this,e,null!==a&&void 0!==a?a:{})),X(r)?(this._drawPanes.splice(r,0,n),i=r):(this._drawPanes.push(n),i=this._drawPanes.length-1),n.getId()!==Te.X_AXIS){var c=this._drawPanes[i+1];if(W(c)&&c.getId()===Te.X_AXIS&&(c=this._drawPanes[i+2]),W(c)){var d=this._separatorPanes.get(c);W(d)?d.setTopPane(n):(d=new ka(this._chartContainer,c.getContainer(),this,"",n,c),this._separatorPanes.set(c,d))}var f=this._drawPanes[i-1];if(W(f)&&f.getId()===Te.X_AXIS&&(f=this._drawPanes[i-2]),W(f)){d=new ka(this._chartContainer,n.getContainer(),this,"",f,n);this._separatorPanes.set(n,d)}}return n},t.prototype._measurePaneHeight=function(){var t,e=this,a=Math.floor(this._container.clientHeight),i=this._chartStore.getStyles().separator.size,r=this._xAxisPane.getAxisComponent().getAutoSize(),n=a-r-this._separatorPanes.size*i;n<0&&(n=0);var s=0;this._drawPanes.forEach((function(t){if(t.getId()!==Te.CANDLE&&t.getId()!==Te.X_AXIS){var e=t.getBounding().height,a=t.getOptions().minHeight;e<a&&(e=a),s+e>n?(s=n,e=Math.max(n-s,0)):s+=e,t.setBounding({height:e})}}));var o=n-s;null===(t=this._candlePane)||void 0===t||t.setBounding({height:o}),this._xAxisPane.setBounding({height:r});var h=0;this._drawPanes.forEach((function(t){var a=e._separatorPanes.get(t);W(a)&&(a.setBounding({height:i,top:h}),h+=i),t.setBounding({top:h}),h+=t.getBounding().height}))},t.prototype._measurePaneWidth=function(){var t=this,e=Math.floor(this._container.clientWidth),a=this._chartStore.getStyles(),i=a.yAxis,r=i.position===C.Left,n=!i.inside,s=0,o=0,h=0,l=0;this._drawPanes.forEach((function(t){t.getId()!==Te.X_AXIS&&(o=Math.max(o,t.getAxisComponent().getAutoSize()))})),o>e&&(o=e),n?(s=e-o,r?(h=0,l=o):(h=e-o,l=0)):(s=e,l=0,h=r?0:e-o),this._chartStore.getTimeScaleStore().setTotalBarSpace(s);var u,c={width:e},d={width:s,left:l},f={width:o,left:h},m=a.separator.fill;u=n&&!m?d:c,this._drawPanes.forEach((function(e){var a;null===(a=t._separatorPanes.get(e))||void 0===a||a.setBounding(u),e.setBounding(c,d,f)}))},t.prototype._setPaneOptions=function(t,e){var a,i;if(z(t.id)){var r=this.getDrawPaneById(t.id),n=!1;if(null!==r){var s=e;if(t.id!==Te.CANDLE&&X(t.height)&&t.height>0){var o=Math.max(null!==(a=t.minHeight)&&void 0!==a?a:r.getOptions().minHeight,0),h=Math.max(o,t.height);r.setBounding({height:h}),s=!0,n=!0}(z(null===(i=t.axisOptions)||void 0===i?void 0:i.name)||W(t.gap))&&(s=!0),r.setOptions(t),s&&this.adjustPaneViewport(n,!0,!0,!0,!0)}}},t.prototype.getDrawPaneById=function(t){if(t===Te.CANDLE)return this._candlePane;if(t===Te.X_AXIS)return this._xAxisPane;var e=this._drawPanes.find((function(e){return e.getId()===t}));return null!==e&&void 0!==e?e:null},t.prototype.getContainer=function(){return this._container},t.prototype.getChartStore=function(){return this._chartStore},t.prototype.getXAxisPane=function(){return this._xAxisPane},t.prototype.getAllDrawPanes=function(){return this._drawPanes},t.prototype.getAllSeparatorPanes=function(){return this._separatorPanes},t.prototype.adjustPaneViewport=function(t,e,a,i,r){t&&this._measurePaneHeight();var n=e,s=null!==i&&void 0!==i&&i,o=null!==r&&void 0!==r&&r;(s||o)&&this._drawPanes.forEach((function(t){var e=t.getAxisComponent().buildTicks(o);n||(n=e)})),n&&this._measurePaneWidth(),null!==a&&void 0!==a&&a&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4))},t.prototype.updatePane=function(t,e){if(W(e)){var a=this.getDrawPaneById(e);null===a||void 0===a||a.update(t)}else this._separatorPanes.forEach((function(e){e.update(t)})),this._drawPanes.forEach((function(e){e.update(t)}))},t.prototype.crosshairChange=function(t){var e=this,a=this._chartStore.getActionStore();if(a.has(J.OnCrosshairChange)){var i={};this._drawPanes.forEach((function(a){var r=a.getId(),n={},s=e._chartStore.getIndicatorStore().getInstances(r);s.forEach((function(e){var a,i=e.result;n[e.name]=i[null!==(a=t.dataIndex)&&void 0!==a?a:i.length-1]})),i[r]=n})),z(t.paneId)&&a.execute(J.OnCrosshairChange,D(D({},t),{indicatorData:i}))}},t.prototype.getDom=function(t,e){var a,i;if(!z(t))return this._chartContainer;var r=this.getDrawPaneById(t);if(null!==r){var n=null!==e&&void 0!==e?e:Ha.Root;switch(n){case Ha.Root:return r.getContainer();case Ha.Main:return r.getMainWidget().getContainer();case Ha.YAxis:return null!==(i=null===(a=r.getYAxisWidget())||void 0===a?void 0:a.getContainer())&&void 0!==i?i:null}}return null},t.prototype.getSize=function(t,e){var a,i;if(!W(t))return{width:Math.floor(this._chartContainer.clientWidth),height:Math.floor(this._chartContainer.clientHeight),left:0,top:0,right:0,bottom:0};var r=this.getDrawPaneById(t);if(null!==r){var n=null!==e&&void 0!==e?e:Ha.Root;switch(n){case Ha.Root:return r.getBounding();case Ha.Main:return r.getMainWidget().getBounding();case Ha.YAxis:return null!==(i=null===(a=r.getYAxisWidget())||void 0===a?void 0:a.getBounding())&&void 0!==i?i:null}}return null},t.prototype.setStyles=function(t){var e,a,i;this._chartStore.setOptions({styles:t}),i=z(t)?be(t):t,W(null===(e=null===i||void 0===i?void 0:i.yAxis)||void 0===e?void 0:e.type)&&(null===(a=this._candlePane)||void 0===a||a.getAxisComponent().setAutoCalcTickFlag(!0)),this.adjustPaneViewport(!0,!0,!0,!0,!0)},t.prototype.getStyles=function(){return this._chartStore.getStyles()},t.prototype.setLocale=function(t){this._chartStore.setOptions({locale:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},t.prototype.getLocale=function(){return this._chartStore.getLocale()},t.prototype.setCustomApi=function(t){this._chartStore.setOptions({customApi:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},t.prototype.setPriceVolumePrecision=function(t,e){this._chartStore.setPrecision({price:t,volume:e})},t.prototype.getPriceVolumePrecision=function(){return this._chartStore.getPrecision()},t.prototype.setTimezone=function(t){this._chartStore.setOptions({timezone:t}),this._xAxisPane.getAxisComponent().buildTicks(!0),this._xAxisPane.update(3)},t.prototype.getTimezone=function(){return this._chartStore.getTimeScaleStore().getTimezone()},t.prototype.setOffsetRightDistance=function(t){this._chartStore.getTimeScaleStore().setOffsetRightDistance(t,!0)},t.prototype.getOffsetRightDistance=function(){return this._chartStore.getTimeScaleStore().getOffsetRightDistance()},t.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetLeftDistance(t)},t.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetRightDistance(t)},t.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(t))},t.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(t))},t.prototype.setBarSpace=function(t){this._chartStore.getTimeScaleStore().setBarSpace(t)},t.prototype.getBarSpace=function(){return this._chartStore.getTimeScaleStore().getBarSpace().bar},t.prototype.getVisibleRange=function(){return this._chartStore.getTimeScaleStore().getVisibleRange()},t.prototype.clearData=function(){this._chartStore.clear()},t.prototype.getDataList=function(){return this._chartStore.getDataList()},t.prototype.applyNewData=function(t,e,a){W(a),this._chartStore.addData(t,Dt.Init,e).then((function(){})).catch((function(){})).finally((function(){null===a||void 0===a||a()}))},t.prototype.applyMoreData=function(t,e,a){this._chartStore.addData(t,Dt.Forward,null===e||void 0===e||e).then((function(){})).catch((function(){})).finally((function(){null===a||void 0===a||a()}))},t.prototype.updateData=function(t,e){W(e),this._chartStore.addData(t).then((function(){})).catch((function(){})).finally((function(){null===e||void 0===e||e()}))},t.prototype.loadMore=function(t){this._chartStore.setLoadMoreCallback(t)},t.prototype.setLoadDataCallback=function(t){this._chartStore.setLoadDataCallback(t)},t.prototype.createIndicator=function(t,e,a,i){var r,n=this,s=z(t)?{name:t}:t;if(null===$t(s.name))return null;var o=null===a||void 0===a?void 0:a.id,h=this.getDrawPaneById(null!==o&&void 0!==o?o:"");if(null!==h)this._chartStore.getIndicatorStore().addInstance(s,null!==o&&void 0!==o?o:"",null!==e&&void 0!==e&&e).then((function(t){var e;n._setPaneOptions(null!==a&&void 0!==a?a:{},null!==(e=h.getAxisComponent().buildTicks(!0))&&void 0!==e&&e)})).catch((function(t){}));else{null!==o&&void 0!==o||(o=St(Te.INDICATOR));var l=this._createPane(Fa,o,null!==a&&void 0!==a?a:{}),u=null!==(r=null===a||void 0===a?void 0:a.height)&&void 0!==r?r:100;l.setBounding({height:u}),this._chartStore.getIndicatorStore().addInstance(s,o,null!==e&&void 0!==e&&e).finally((function(){n.adjustPaneViewport(!0,!0,!0,!0,!0),null===i||void 0===i||i()}))}return null!==o&&void 0!==o?o:null},t.prototype.overrideIndicator=function(t,e,a){var i=this;this._chartStore.getIndicatorStore().override(t,null!==e&&void 0!==e?e:null).then((function(t){var e=S(t,2),r=e[0],n=e[1];(r||n)&&(i.adjustPaneViewport(!1,n,!0,n),null===a||void 0===a||a())})).catch((function(){}))},t.prototype.getIndicatorByPaneId=function(t,e){return this._chartStore.getIndicatorStore().getInstanceByPaneId(t,e)},t.prototype.removeIndicator=function(t,e){var a,i,r,n=this._chartStore.getIndicatorStore(),s=n.removeInstance(t,e);if(s){var o=!1;if(t!==Te.CANDLE&&!n.hasInstances(t)){var h=this.getDrawPaneById(t),l=this._drawPanes.findIndex((function(e){return e.getId()===t}));if(null!==h){o=!0;var u=this._separatorPanes.get(h);if(W(u)){var c=null===u||void 0===u?void 0:u.getTopPane();try{for(var d=g(this._separatorPanes),f=d.next();!f.done;f=d.next()){var C=f.value;if(C[1].getTopPane().getId()===h.getId()){C[1].setTopPane(c);break}}}catch(D){a={error:D}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}u.destroy(),this._separatorPanes.delete(h)}this._drawPanes.splice(l,1),h.destroy();var m=this._drawPanes[0];W(m)&&m.getId()===Te.X_AXIS&&(m=this._drawPanes[1]),null===(r=this._separatorPanes.get(m))||void 0===r||r.destroy(),this._separatorPanes.delete(m)}}this.adjustPaneViewport(o,!0,!0,!0,!0)}},t.prototype.createOverlay=function(t,e){var a=[];if(z(t))a=[{name:t}];else if(V(t))a=t.map((function(t){return z(t)?{name:t}:t}));else{var i=t;a=[i]}var r=!0;W(e)&&null!==this.getDrawPaneById(e)||(e=Te.CANDLE,r=!1);var n=this._chartStore.getOverlayStore().addInstances(a,e,r);return V(t)?n:n[0]},t.prototype.getOverlayById=function(t){return this._chartStore.getOverlayStore().getInstanceById(t)},t.prototype.overrideOverlay=function(t){this._chartStore.getOverlayStore().override(t)},t.prototype.removeOverlay=function(t){var e;W(t)&&(e=z(t)?{id:t}:t),this._chartStore.getOverlayStore().removeInstance(e)},t.prototype.setPaneOptions=function(t){this._setPaneOptions(t,!1)},t.prototype.setZoomEnabled=function(t){this._chartStore.getTimeScaleStore().setZoomEnabled(t)},t.prototype.isZoomEnabled=function(){return this._chartStore.getTimeScaleStore().getZoomEnabled()},t.prototype.setScrollEnabled=function(t){this._chartStore.getTimeScaleStore().setScrollEnabled(t)},t.prototype.isScrollEnabled=function(){return this._chartStore.getTimeScaleStore().getScrollEnabled()},t.prototype.scrollByDistance=function(t,e){var a=X(e)&&e>0?e:0,i=this._chartStore.getTimeScaleStore();if(i.startScroll(),a>0){var r=new pt({duration:a});r.doFrame((function(e){var r=t*(e/a);i.scroll(r)})),r.start()}else i.scroll(t)},t.prototype.scrollToRealTime=function(t){var e=this._chartStore.getTimeScaleStore(),a=e.getBarSpace().bar,i=e.getLastBarRightSideDiffBarCount()-e.getInitialOffsetRightDistance()/a,r=i*a;this.scrollByDistance(r,t)},t.prototype.scrollToDataIndex=function(t,e){var a=this._chartStore.getTimeScaleStore(),i=(a.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*a.getBarSpace().bar;this.scrollByDistance(i,e)},t.prototype.scrollToTimestamp=function(t,e){var a=Tt(this.getDataList(),"timestamp",t);this.scrollToDataIndex(a,e)},t.prototype.zoomAtCoordinate=function(t,e,a){var i=X(a)&&a>0?a:0,r=this._chartStore.getTimeScaleStore(),n=r.getBarSpace().bar,s=n*t,o=s-n;if(i>0){var h=0,l=new pt({duration:i});l.doFrame((function(t){var a=o*(t/i),n=(a-h)/r.getBarSpace().bar*10;r.zoom(n,e),h=a})),l.start()}else r.zoom(o/n*10,e)},t.prototype.zoomAtDataIndex=function(t,e,a){var i=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:i,y:0},a)},t.prototype.zoomAtTimestamp=function(t,e,a){var i=Tt(this.getDataList(),"timestamp",e);this.zoomAtDataIndex(t,i,a)},t.prototype.convertToPixel=function(t,e){var a,i=e.paneId,r=void 0===i?Te.CANDLE:i,n=e.absolute,s=void 0!==n&&n,o=[];if(r!==Te.X_AXIS){var h=this.getDrawPaneById(r);if(null!==h){var l=this._chartStore.getTimeScaleStore(),u=h.getBounding(),c=(new Array).concat(t),d=this._xAxisPane.getAxisComponent(),f=h.getAxisComponent();o=c.map((function(t){var e={},a=t.dataIndex;if(X(t.timestamp)&&(a=l.timestampToDataIndex(t.timestamp)),X(a)&&(e.x=null===d||void 0===d?void 0:d.convertToPixel(a)),X(t.value)){var i=null===f||void 0===f?void 0:f.convertToPixel(t.value);e.y=s?u.top+i:i}return e}))}}return V(t)?o:null!==(a=o[0])&&void 0!==a?a:{}},t.prototype.convertFromPixel=function(t,e){var a,i=e.paneId,r=void 0===i?Te.CANDLE:i,n=e.absolute,s=void 0!==n&&n,o=[];if(r!==Te.X_AXIS){var h=this.getDrawPaneById(r);if(null!==h){var l=this._chartStore.getTimeScaleStore(),u=h.getBounding(),c=(new Array).concat(t),d=this._xAxisPane.getAxisComponent(),f=h.getAxisComponent();o=c.map((function(t){var e,a,i={};if(X(t.x)){var r=null!==(e=null===d||void 0===d?void 0:d.convertFromPixel(t.x))&&void 0!==e?e:-1;i.dataIndex=r,i.timestamp=null!==(a=l.dataIndexToTimestamp(r))&&void 0!==a?a:void 0}if(X(t.y)){var n=s?t.y-u.top:t.y;i.value=f.convertFromPixel(n)}return i}))}}return V(t)?o:null!==(a=o[0])&&void 0!==a?a:{}},t.prototype.executeAction=function(t,e){var a;switch(t){case J.OnCrosshairChange:var i=D({},e);i.paneId=null!==(a=i.paneId)&&void 0!==a?a:Te.CANDLE,this._chartStore.getTooltipStore().setCrosshair(i);break}},t.prototype.subscribeAction=function(t,e){this._chartStore.getActionStore().subscribe(t,e)},t.prototype.unsubscribeAction=function(t,e){this._chartStore.getActionStore().unsubscribe(t,e)},t.prototype.getConvertPictureUrl=function(t,e,a){var i=this,r=this._chartContainer.clientWidth,n=this._chartContainer.clientHeight,s=It("canvas",{width:"".concat(r,"px"),height:"".concat(n,"px"),boxSizing:"border-box"}),o=s.getContext("2d"),h=it(s);s.width=r*h,s.height=n*h,o.scale(h,h),o.fillStyle=null!==a&&void 0!==a?a:"#FFFFFF",o.fillRect(0,0,r,n);var l=null!==t&&void 0!==t&&t;return this._drawPanes.forEach((function(t){var e=i._separatorPanes.get(t);if(W(e)){var a=e.getBounding();o.drawImage(e.getImage(l),a.left,a.top,a.width,a.height)}var n=t.getBounding();o.drawImage(t.getImage(l),0,n.top,r,n.height)})),s.toDataURL("image/".concat(null!==e&&void 0!==e?e:"jpeg"))},t.prototype.resize=function(){this.adjustPaneViewport(!0,!0,!0,!0,!0)},t.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach((function(t){t.destroy()})),this._drawPanes=[],this._separatorPanes.forEach((function(t){t.destroy()})),this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},t}(),Ua=new Map,za=1;var Ka={clone:G,merge:k,isString:z,isNumber:X,isValid:W,isObject:Y,isArray:V,isFunction:H,isBoolean:U,formatValue:j,formatPrecision:q,formatBigNumber:tt,formatDate:Z,formatThousands:et,formatFoldDecimal:at,calcTextWidth:nt,getLinearSlopeIntercept:se,getLinearYFromSlopeIntercept:re,getLinearYFromCoordinates:ne,checkCoordinateOnArc:$e,checkCoordinateOnCircle:Oe,checkCoordinateOnLine:ie,checkCoordinateOnPolygon:_e,checkCoordinateOnRect:Ve,checkCoordinateOnText:We,drawArc:je,drawCircle:Re,drawLine:he,drawPolygon:ke,drawRect:He,drawText:Ue,drawRectText:Je};e.utils=Ka},"04e9":function(t,e,a){"use strict";a.r(e);var i=a("6dc7"),r=a("8477");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("509a");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"16d5ce06",null,!1,i["a"],void 0);e["default"]=o.exports},"053d":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uPopup:a("4b98").default,uLine:a("b62d").default,uLoadingIcon:a("639a").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u-popup",{attrs:{mode:"center",zoom:t.zoom,show:t.show,customStyle:{borderRadius:"6px",overflow:"hidden",marginTop:"-"+t.$u.addUnit(t.negativeTop)},closeOnClickOverlay:t.closeOnClickOverlay,safeAreaInsetBottom:!1,duration:400},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"u-modal",style:{width:t.$u.addUnit(t.width)}},[t.title?a("v-uni-text",{staticClass:"u-modal__title"},[t._v(t._s(t.title))]):t._e(),a("v-uni-view",{staticClass:"u-modal__content",style:{paddingTop:(t.title?12:25)+"px"}},[t._t("default",[a("v-uni-text",{staticClass:"u-modal__content__text"},[t._v(t._s(t.content))])])],2),t.$slots.confirmButton?a("v-uni-view",{staticClass:"u-modal__button-group--confirm-button"},[t._t("confirmButton")],2):[a("u-line"),a("v-uni-view",{staticClass:"u-modal__button-group",style:{flexDirection:t.buttonReverse?"row-reverse":"row"}},[t.showCancelButton?a("v-uni-view",{staticClass:"u-modal__button-group__wrapper u-modal__button-group__wrapper--cancel",class:[t.showCancelButton&&!t.showConfirmButton&&"u-modal__button-group__wrapper--only-cancel"],attrs:{"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelHandler.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"u-modal__button-group__wrapper__text",style:{color:t.cancelColor}},[t._v(t._s(t.cancelText))])],1):t._e(),t.showConfirmButton&&t.showCancelButton?a("u-line",{attrs:{direction:"column"}}):t._e(),t.showConfirmButton?a("v-uni-view",{staticClass:"u-modal__button-group__wrapper u-modal__button-group__wrapper--confirm",class:[!t.showCancelButton&&t.showConfirmButton&&"u-modal__button-group__wrapper--only-confirm"],attrs:{"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHandler.apply(void 0,arguments)}}},[t.loading?a("u-loading-icon"):a("v-uni-text",{staticClass:"u-modal__button-group__wrapper__text",style:{color:t.confirmColor}},[t._v(t._s(t.confirmText))])],1):t._e()],1)]],2)],1)},n=[]},"0619":function(t,e,a){var i=a("6239");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("7a607c2e",i,!0,{sourceMap:!1,shadowMode:!1})},"0637":function(t,e,a){"use strict";a.r(e);var i=a("3601"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"068b":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-83991a1a], uni-scroll-view[data-v-83991a1a], uni-swiper-item[data-v-83991a1a]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),t.exports=e},"06a8":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'uni-page-body[data-v-4b14a8cb]{background-color:#fff}body.?%PAGE?%[data-v-4b14a8cb]{background-color:#fff}[data-v-4b14a8cb] .u-input{background:#fff}.u-border[data-v-4b14a8cb]{border-color:#d2d6e8!important}.u-button--info[data-v-3bf2dba7][data-v-4b14a8cb]{border:none;color:#0166fc;border-color:#ebedf0;border-width:0;font-weight:700}\n\n\t/* \t.inps {\n\t\tpadding: 10px !important;\n\t} */[data-v-4b14a8cb] .u-icon__img{width:20px!important;height:20px!important}\n\n\t/* /deep/.u-icon__icon[data-v-172979f2] {\n\t\n\t    font-size: 22px !important;\n\t} */[data-v-4b14a8cb] .content-clear-icon{color:initial!important}[data-v-4b14a8cb] .uni-easyinput__content[data-v-abe12412]{background-color:#f8f8f8!important;border-radius:6vh;border:none;padding:4px}[data-v-4b14a8cb] .uni-easyinput__placeholder-class{font-size:15px;color:#c0c4cc;padding-left:3px!important}[data-v-4b14a8cb] .uni-easyinput__content-input{padding-left:3px!important}uni-page-body[data-v-4b14a8cb]{position:inherit}\n\n\t/* \t/deep/.u-checkbox__icon-wrap--square{\n\t    border-radius: 50%;\n\t} */.DrawerPage[data-v-4b14a8cb]{position:relative;width:100vw;height:100vh;left:0;background-color:#f7f8fa;transition:all .4s}.DrawerPage.show[data-v-4b14a8cb]{-webkit-transform:scale(.9);transform:scale(.9);left:65vw;box-shadow:0 0 %?60?% rgba(0,0,0,.2);-webkit-transform-origin:0;transform-origin:0}.DrawerWindow[data-v-4b14a8cb]{position:absolute;width:65vw;height:100vh;left:0;top:0;-webkit-transform:scale(.9) translateX(-100%);transform:scale(.9) translateX(-100%);opacity:0;pointer-events:none;transition:all .4s;padding:%?100?% 0}.DrawerWindow.show[data-v-4b14a8cb]{-webkit-transform:scale(1) translateX(0);transform:scale(1) translateX(0);opacity:1;pointer-events:all}.DrawerClose[data-v-4b14a8cb]{position:absolute;width:40vw;height:100vh;right:0;top:0;color:transparent;padding-bottom:%?30?%;display:flex;align-items:flex-end;justify-content:center;background-image:linear-gradient(90deg,rgba(0,0,0,.01),rgba(0,0,0,.6));letter-spacing:5px;font-size:%?50?%;opacity:0;pointer-events:none;transition:all .4s}.DrawerClose.show[data-v-4b14a8cb]{opacity:1;pointer-events:all;width:35vw;color:#fff}.DrawerPage .cu-bar.tabbar .action uni-button.cuIcon[data-v-4b14a8cb]{width:%?64?%;height:%?64?%;line-height:%?64?%;margin:0;display:inline-block}.DrawerPage .cu-bar.tabbar .action .cu-avatar[data-v-4b14a8cb]{margin:0}.DrawerPage .nav[data-v-4b14a8cb]{flex:1}.DrawerPage .nav .cu-item.cur[data-v-4b14a8cb]{border-bottom:0;position:relative}.DrawerPage .nav .cu-item.cur[data-v-4b14a8cb]::after{content:"";width:%?10?%;height:%?10?%;background-color:currentColor;position:absolute;bottom:%?10?%;border-radius:%?10?%;left:0;right:0;margin:auto}.DrawerPage .cu-bar.tabbar .action[data-v-4b14a8cb]{flex:initial}.DrawerWindow uni-view[data-v-4b14a8cb],\n\tuni-scroll-view[data-v-4b14a8cb],\n\tuni-swiper[data-v-4b14a8cb],\n\tuni-button[data-v-4b14a8cb],\n\tuni-input[data-v-4b14a8cb],\n\tuni-textarea[data-v-4b14a8cb],\n\tuni-label[data-v-4b14a8cb],\n\tuni-navigator[data-v-4b14a8cb],\n\tuni-image[data-v-4b14a8cb]{box-sizing:border-box}.DrawerClose uni-view[data-v-4b14a8cb],\n\tuni-scroll-view[data-v-4b14a8cb],\n\tuni-swiper[data-v-4b14a8cb],\n\tuni-button[data-v-4b14a8cb],\n\tuni-input[data-v-4b14a8cb],\n\tuni-textarea[data-v-4b14a8cb],\n\tuni-label[data-v-4b14a8cb],\n\tuni-navigator[data-v-4b14a8cb],\n\tuni-image[data-v-4b14a8cb]{box-sizing:border-box}uni-view[data-v-4b14a8cb],\n\tuni-image[data-v-4b14a8cb]{box-sizing:border-box}\n.uni-scroll-view-content uni-view[data-v-4b14a8cb],\n\tuni-image[data-v-4b14a8cb]{box-sizing:initial!important}.inps[data-v-4b14a8cb]{background-color:#f8f8f8!important;border:none;padding:10px!important;\n\t\t/* height: 35px; */border-radius:55px}.my_u_button[data-v-4b14a8cb]{background-color:#0166fc;min-height:34px;max-height:44px;border-radius:45px;color:#fff!important}.wrap_text[data-v-4b14a8cb]{display:block;margin-bottom:2vh;font-size:%?25?%;font-weight:600}',""]),t.exports=e},"06f4":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{}},created:function(){this.popup=this.getParent()},methods:{getParent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniPopup",e=this.$parent,a=e.$options.name;while(a!==t){if(e=e.$parent,!e)return!1;a=e.$options.name}return e}}};e.default=i},"06fd":function(t,e,a){"use strict";a.r(e);var i=a("bba6"),r=a("aac1");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("b6b7");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"4d47c3fb",null,!1,i["a"],void 0);e["default"]=o.exports},"0732":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("4028").default,uButton:a("e196").default,uPicker:a("3090").default,uPopup:a("4b98").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:"black"==t.$store.state.bgColor?"jybs":"jys"},[i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"right",margin:"20px 15px 0",padding:"5px 10px","border-radius":"10px","box-shadow":"rgba(204, 204, 204, 0.34) 0px 0px 26px 0px"}},["while"==t.$store.state.bgColor?i("v-uni-view",{staticStyle:{flex:"1",height:"20px","line-height":"20px","font-size":"14px","font-weight":"bold"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bzsClick()}}},[i("v-uni-text",[t._v(t._s(t.currency_name)),i("uni-icons",{staticStyle:{"font-weight":"bold"},attrs:{type:"bottom",size:"14"}})],1)],1):t._e(),i("v-uni-view",{staticStyle:{"text-align":"right",color:"#0164f7",display:"flex","justify-content":"center","align-items":"center"}},[t.symbolQuotation.now_price?i("v-uni-text",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t._f("setPrecision")(t.symbolQuotation.now_price,t.symbolQuotation.precision_length)))]):t._e(),i("v-uni-view",{staticStyle:{"margin-left":"10px","font-size":"14px",display:"flex","justify-content":"center","align-items":"center"}},[i("v-uni-view",[t._v(t._s(t.symbolQuotation.change))]),t.symbolQuotation.now_price?i("v-uni-view",{staticStyle:{height:"15px","line-height":"15px"}},[12==t.$utils.getColor(t.symbolQuotation.now_price)?i("img",{staticStyle:{width:"15px"},attrs:{src:a("dba9"),alt:""}}):13==t.$utils.getColor(t.symbolQuotation.now_price)||14==t.$utils.getColor(t.symbolQuotation.now_price)?i("img",{staticStyle:{width:"15px"},attrs:{src:a("9b3f"),alt:""}}):t._e()]):t._e()],1)],1)],1),i("v-uni-view",{staticStyle:{width:"95%",padding:"0px 10px"}},[i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","text-align":"center","align-items":"center"}},[i("v-uni-view",{staticStyle:{width:"100%",overflow:"hidden","overflow-x":"scroll","white-space":"nowrap"}},[i("v-uni-view",{class:4==t.pids?t.sdhbts:t.dhbts,staticStyle:{"border-radius":"100px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(4)}}},[t._v("1M")]),i("v-uni-view",{class:6==t.pids?t.sdhbts:t.dhbts,staticStyle:{"border-radius":"100px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(6)}}},[t._v("15M")]),i("v-uni-view",{class:7==t.pids?t.sdhbts:t.dhbts,staticStyle:{"border-radius":"100px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(7)}}},[t._v("30M")]),i("v-uni-view",{class:8==t.pids?t.sdhbts:t.dhbts,staticStyle:{"border-radius":"100px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(8)}}},[t._v("1H")]),i("v-uni-view",{class:0==t.pids?t.sdhbts:t.dhbts,staticStyle:{"border-radius":"100px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(0)}}},[t._v("1D")])],1)],1)],1),i("v-uni-view",{},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.currentNav,expression:"currentNav == 0"}],staticStyle:{width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("div",{staticClass:"jypzs"},[i("div",{staticStyle:{width:"324px",height:"100%"}},[i("div",{staticStyle:{width:"324",padding:"10px 20px","background-color":"#0166fc","box-shadow":"0 0 10px #a1a1a11f","margin-bottom":"18px","border-radius":"8px",color:"#ffffff",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[t.users.net_worth?i("p",{staticStyle:{width:"284",height:"21px"}},[t._v(t._s(t.users.net_worth))]):t._e(),i("p",{staticStyle:{width:"284",height:"21px"}},[t._v(t._s(t.i18n.balance))]),t.users.usdt?i("p",{staticStyle:{width:"284",height:"42px","line-height":"42px","font-size":"20px"}},[t._v(t._s(t.users.usdt.toFixed(2)))]):t._e(),t.users.usdt?t._e():i("p",{staticStyle:{width:"284",height:"42px","font-size":"33px","line-height":"42px"}},[t._v("----")])]),i("div",{staticStyle:{padding:"20px","box-shadow":"0 0 10px #a1a1a11f"}},[i("p",{staticStyle:{"font-size":"16px"}},[t._v("UKOIL")]),i("p",{staticStyle:{color:"#0166fc","font-size":"20px"}},[t._v("80.688")]),i("p",{staticStyle:{width:"100%","margin-top":"10px"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.switchingTransactions,callback:function(e){t.switchingTransactions=e},expression:"switchingTransactions"}},t._l(t.switchingTransactionsOptions,(function(t){return i("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),"marketPrice"===t.switchingTransactions?i("div",[i("div",{staticStyle:{display:"flex","flex-direction":"column",width:"284px","margin-top":"10px"}},[i("p",{staticStyle:{flex:"1","font-size":"15px",color:"black"}},[t._v(t._s(t.i18n.multiplier))]),i("p",{staticStyle:{width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.stop_loss))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.hyzs,callback:function(e){t.hyzs=e},expression:"hyzs"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",color:t.hyzsc,min:0,disabled:t.hyzsd},model:{value:t.target_profit_price,callback:function(e){t.target_profit_price=e},expression:"target_profit_price"}})],1)]):t._e(),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.take_prodit))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.hyzy,callback:function(e){t.hyzy=e},expression:"hyzy"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",color:t.hyzyc,min:0,disabled:t.hyzyd},model:{value:t.target_profit_price,callback:function(e){t.target_profit_price=e},expression:"target_profit_price"}})],1)]):t._e(),i("div",{staticClass:"composings",staticStyle:{width:"100%",display:"flex","flex-direction":"column","margin-top":"10px"}},[i("div",{staticStyle:{display:"flex",flex:"1",width:"50%","flex-direction":"column"}},[i("p",[t._v(t._s(t.i18n.buy_quantity))])]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",color:t.hyzyc,min:t.symbolQuotation.lever_min_share,max:t.symbolQuotation.lever_max_share},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)]):t._e()]),"while"==t.$store.state.bgColor?i("div",{staticStyle:{height:"3rpx","background-color":"#F5F5F4","margin-top":"20px"}}):t._e(),"black"==t.$store.state.bgColor?i("div",{staticStyle:{height:"3rpx","background-color":"#424656","margin-top":"20px"}}):t._e(),i("div",{staticStyle:{width:"100%","font-size":"12px","font-weight":"bold"}},[i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.each))]),i("v-uni-text",[t._v(t._s(t.i18n.each)+"="+t._s(this.each_piece)+t._s(this.currency_name)+"/"+t._s(this.legal_name))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_commission))]),i("v-uni-text",[t._v(t._s(t.handlingFee))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_margin))]),i("v-uni-text",[t._v(t._s(t.margin))])],1)]),i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{display:"flex",width:"100%","padding-top":"10px"}},[i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#0166fc",border:"0",width:"49%","font-size":"12px",height:"35px",color:"#FFFFFF","line-height":"45px"},attrs:{loading:t.xdloading,disabled:t.mrdis,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(1,1)}}},[t._v(t._s(t.i18n.buy_up))]),i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#F23C48",border:"0",width:"49%",height:"35px","line-height":"45px","font-size":"12px","margin-left":"13px",color:"#FFFFFF"},attrs:{loading:t.xdmloading,disabled:t.mcdis,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(2,1)}}},[t._v(t._s(t.$t("trade.buy_down")))])],1)])]):t._e(),"pendingOrder"===t.switchingTransactions?i("div",[i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.price))])]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input",{staticStyle:{height:"25px"},attrs:{disabledColor:"#ffffff",placeholder:"",inputAlign:"center",suffixIcon:"arrow-right",suffixIconStyle:"color: #909399;font-size:16px;font-weight: bold;"},model:{value:t.target_price,callback:function(e){t.target_price=e},expression:"target_price"}})],1)]):t._e(),i("div",{staticStyle:{display:"flex","flex-direction":"column",width:"284px","margin-top":"10px"}},[i("p",{staticStyle:{flex:"1","font-size":"15px",color:"black"}},[t._v(t._s(t.i18n.multiplier))]),i("p",{staticStyle:{width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.multiple1,callback:function(e){t.multiple1=e},expression:"multiple1"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.stop_loss))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.ghyzs,callback:function(e){t.ghyzs=e},expression:"ghyzs"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,disabled:t.ghyzsd},model:{value:t.gstop_loss_price,callback:function(e){t.gstop_loss_price=e},expression:"gstop_loss_price"}})],1)]):t._e(),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.take_prodit))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.ghyzy,callback:function(e){t.ghyzy=e},expression:"ghyzy"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,disabled:t.ghyzyd},model:{value:t.gtarget_profit_price,callback:function(e){t.gtarget_profit_price=e},expression:"gtarget_profit_price"}})],1)]):t._e(),i("div",{staticClass:"composings",staticStyle:{width:"100%",display:"flex","flex-direction":"column","margin-top":"10px"}},[i("div",{staticStyle:{display:"flex",flex:"1",width:"50%","flex-direction":"column"}},[i("p",[t._v(t._s(t.i18n.buy_quantity))])]),i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:t.symbolQuotation.lever_min_share,max:t.symbolQuotation.lever_max_share},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)}},model:{value:t.gnumber,callback:function(e){t.gnumber=e},expression:"gnumber"}})],1)])]),i("div",{staticStyle:{height:"3rpx","background-color":"#F5F5F4","margin-top":"20px"}}),i("div",{staticStyle:{width:"100%","font-size":"12px","font-weight":"bold"}},[i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.each))]),i("v-uni-text",[t._v(t._s(t.i18n.each)+"="+t._s(this.each_piece)+t._s(this.currency_name)+"/"+t._s(this.legal_name))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_commission))]),i("v-uni-text",[t._v(t._s(t.ghandlingFee))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_margin))]),i("v-uni-text",[t._v(t._s(t.gmargin))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.balance))]),i("v-uni-text",[t._v(t._s(t.users.usdt))])],1)]),i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{display:"flex",width:"100%","padding-top":"10px"}},[i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#0166fc",border:"0",width:"49%","font-size":"12px",height:"35px",color:"#FFFFFF","line-height":"45px"},attrs:{loading:t.gdloading,disabled:t.gmrdis,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(1,1)}}},[t._v(t._s(t.i18n.buy_up))]),i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#F23C48",border:"0",width:"49%",height:"35px","line-height":"45px","font-size":"12px","margin-left":"13px",color:"#FFFFFF"},attrs:{loading:t.gdmloading,disabled:t.gmcdis,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(2,1)}}},[t._v(t._s(t.$t("trade.buy_down")))])],1)])]):t._e()])])])])],1),"while"==t.$store.state.bgColor?i("u-picker",{ref:"uPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.shows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeHandler.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?i("u-picker",{ref:"guPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.gshows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.gcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.gconfirm.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeHandler.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?i("u-picker",{ref:"uPickers",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.kcshows,itemHeight:100,defaultIndex:t.kcdfindex,columns:t.kccolumns,keyName:"seconds"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.kccancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.kcconfirm.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeHandler.apply(void 0,arguments)}}}):t._e(),i("u-popup",{attrs:{show:t.bzsshow,mode:"left",customStyle:"border-radius: 0px !important; overflow-y: scroll;overscroll-behavior: none"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.bzsclose.apply(void 0,arguments)},open:function(e){arguments[0]=e=t.$handleEvent(e),t.bzsopen.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},t._l(t.indicaList,(function(e,a){return i("v-uni-view",{class:t.currency_id==e.id?"showItems":"noShowItems",staticStyle:{},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showBZ(e,!0)}}},[i("v-uni-text",[t._v(t._s(e.name))])],1)})),1)],1)},n=[]},"07f8":function(t,e,a){var i=a("f07e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("9fd1c5a2",i,!0,{sourceMap:!1,shadowMode:!1})},"0948":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-0577983a], uni-scroll-view[data-v-0577983a], uni-swiper-item[data-v-0577983a]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-text[data-v-0577983a]{display:flex;flex-direction:row;align-items:center;flex-wrap:nowrap;flex:1;width:100%}.u-text__price[data-v-0577983a]{font-size:14px;color:#606266}.u-text__value[data-v-0577983a]{font-size:14px;display:flex;flex-direction:row;color:#606266;flex-wrap:wrap;text-overflow:ellipsis;align-items:center}.u-text__value--primary[data-v-0577983a]{color:#3c9cff}.u-text__value--warning[data-v-0577983a]{color:#f9ae3d}.u-text__value--success[data-v-0577983a]{color:#5ac725}.u-text__value--info[data-v-0577983a]{color:#909399}.u-text__value--error[data-v-0577983a]{color:#f56c6c}.u-text__value--main[data-v-0577983a]{color:#303133}.u-text__value--content[data-v-0577983a]{color:#606266}.u-text__value--tips[data-v-0577983a]{color:#909193}.u-text__value--light[data-v-0577983a]{color:#c0c4cc}',""]),t.exports=e},"0ad9":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("ad03")),n=(i(a("1d3b")),i(a("d262")),i(a("6d8c"))),s={name:"u--text",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default,n.default],computed:{valueStyle:function(){var t={textDecoration:this.decoration,fontWeight:this.bold?"bold":"normal",wordWrap:this.wordWrap,fontSize:uni.$u.addUnit(this.size)};return!this.type&&(t.color=this.color),this.isNvue&&this.lines&&(t.lines=this.lines),this.lineHeight&&(t.lineHeight=uni.$u.addUnit(this.lineHeight)),!this.isNvue&&this.block&&(t.display="block"),uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))},isNvue:function(){return!1},isMp:function(){return!1}},data:function(){return{}},methods:{clickHandler:function(){this.call&&"phone"===this.mode&&uni.makePhoneCall({phoneNumber:this.text}),this.$emit("click")}}};e.default=s},"0c44":function(t,e,a){"use strict";a.r(e);var i=a("e6ce"),r=a("b1ef");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("826d");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"7390659b",null,!1,i["a"],void 0);e["default"]=o.exports},"0c65":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("4f97")),n=i(a("5cae")),s={name:"u--image",mixins:[uni.$u.mpMixin,n.default,uni.$u.mixin],components:{uvImage:r.default}};e.default=s},"0c81":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{name:{type:[String,Number],default:uni.$u.props.numberBox.name},value:{type:[String,Number],default:uni.$u.props.numberBox.value},min:{type:[String,Number],default:uni.$u.props.numberBox.min},max:{type:[String,Number],default:uni.$u.props.numberBox.max},step:{type:[String,Number],default:uni.$u.props.numberBox.step},integer:{type:Boolean,default:uni.$u.props.numberBox.integer},disabled:{type:Boolean,default:uni.$u.props.numberBox.disabled},disabledInput:{type:Boolean,default:uni.$u.props.numberBox.disabledInput},asyncChange:{type:Boolean,default:uni.$u.props.numberBox.asyncChange},inputWidth:{type:[String,Number],default:uni.$u.props.numberBox.inputWidth},showMinus:{type:Boolean,default:uni.$u.props.numberBox.showMinus},showPlus:{type:Boolean,default:uni.$u.props.numberBox.showPlus},decimalLength:{type:[String,Number,null],default:uni.$u.props.numberBox.decimalLength},longPress:{type:Boolean,default:uni.$u.props.numberBox.longPress},color:{type:String,default:uni.$u.props.numberBox.color},buttonSize:{type:[String,Number],default:uni.$u.props.numberBox.buttonSize},bgColor:{type:String,default:uni.$u.props.numberBox.bgColor},cursorSpacing:{type:[String,Number],default:uni.$u.props.numberBox.cursorSpacing},disablePlus:{type:Boolean,default:uni.$u.props.numberBox.disablePlus},disableMinus:{type:Boolean,default:uni.$u.props.numberBox.disableMinus},iconStyle:{type:[Object,String],default:uni.$u.props.numberBox.iconStyle}}};e.default=i},"0c82":function(t,e,a){"use strict";a.r(e);var i=a("502e"),r=a("8c6f");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("fe73");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"1f875ce7",null,!1,i["a"],void 0);e["default"]=o.exports},"0cab":function(t,e,a){var i=a("06a8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("2840a27e",i,!0,{sourceMap:!1,shadowMode:!1})},"0e68":function(t,e,a){"use strict";a.r(e);var i=a("7855"),r=a("ac20");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=o.exports},"0f57":function(t,e,a){a("5ef2");var i=a("ada7"),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(t){this.mode=i.ALPHANUMERIC,this.data=t}n.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){var e;for(e=0;e+2<=this.data.length;e+=2){var a=45*r.indexOf(this.data[e]);a+=r.indexOf(this.data[e+1]),t.put(a,11)}this.data.length%2&&t.put(r.indexOf(this.data[e]),6)},t.exports=n},"10d1":function(t,e,a){"use strict";a.r(e);var i=a("3cda"),r=a("ed14");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("a9eb");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"29bc595b",null,!1,i["a"],void 0);e["default"]=o.exports},"122c":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniForms:a("cb0f").default,"u-Input":a("2354").default,uniEasyinput:a("f5b2").default,uInput:a("01ce").default,uCode:a("861a").default,uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-forms",{attrs:{modelValue:t.formData}},[a("v-uni-view",{staticStyle:{opacity:"1",width:"90%",margin:"0 auto"}},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text",staticStyle:{color:"#0166fc"}},[t._v(t._s(t.i18n.enter_email))]),a("u--input",{staticClass:"inps",attrs:{placeholder:t.i18n.enter_email,type:"text"},model:{value:t.usestring,callback:function(e){t.usestring=e},expression:"usestring"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.enter_new_password))]),a("uni-easyinput",{staticClass:"uni-mt-5",attrs:{type:t.types,passwordIcon:!1,suffixIcon:t.suffixIcon,placeholder:t.i18n.enter_new_password},on:{iconClick:function(e){arguments[0]=e=t.$handleEvent(e),t.suffix.apply(void 0,arguments)}},model:{value:t.passwords,callback:function(e){t.passwords=e},expression:"passwords"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.enter_new_password_again))]),a("uni-easyinput",{staticClass:"uni-mt-5",attrs:{type:t.confirmtypes,passwordIcon:!1,suffixIcon:t.confirmsuffixIcon,placeholder:t.i18n.enter_new_password_again},on:{iconClick:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmsuffix.apply(void 0,arguments)}},model:{value:t.confirmpasswords,callback:function(e){t.confirmpasswords=e},expression:"confirmpasswords"}})],1)],1)],1),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-bottom":"15px"}}),a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.enter_vercode))]),a("u-input",{staticClass:"inps",staticStyle:{padding:"10px !important"},attrs:{placeholder:t.i18n.enter_vercode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[a("template",{slot:"suffix"},[a("u-code",{ref:"uCode",attrs:{seconds:"60",changeText:"X"+t.i18n.get_ver_code},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),a("u-button",{staticClass:"my_u_button",attrs:{text:t.tips,size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}})],1)],2),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("v-uni-view",{staticStyle:{"text-align":"center","margin-right":"2px"}})],1),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"15px",padding:"0 3px"}},[a("v-uni-view",{staticStyle:{color:"#9F9F9F","font-size":"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendData.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.have_account)),a("v-uni-text",{staticStyle:{color:"#537efd","font-weight":"bold","font-size":"15px","padding-left":"10px"}},[t._v(t._s(t.i18n.sign_in))])],1)],1)],1),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"25px","padding-bottom":"20px"}},[a("u-button",{staticStyle:{background:"#0166fc","margin-top":"6vh","border-radius":"6vh",border:"0","font-size":"14px",height:"45px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loading:t.loading,loadingText:"......",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obutton()}}},[t._v(t._s(t.i18n.reset_password))])],1)],1)],1)],1),a("v-uni-view",{staticClass:"DrawerClose",class:"viewModal"==t.modalName?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-pullright"})],1)],1)},n=[]},1238:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-1f875ce7], uni-scroll-view[data-v-1f875ce7], uni-swiper-item[data-v-1f875ce7]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-number-box[data-v-1f875ce7]{display:flex;flex-direction:row;align-items:center}.u-number-box__slot[data-v-1f875ce7]{touch-action:none}.u-number-box__plus[data-v-1f875ce7], .u-number-box__minus[data-v-1f875ce7]{width:35px;display:flex;flex-direction:row;justify-content:center;align-items:center;touch-action:none}.u-number-box__plus--hover[data-v-1f875ce7], .u-number-box__minus--hover[data-v-1f875ce7]{background-color:#e6e6e6!important}.u-number-box__plus--disabled[data-v-1f875ce7], .u-number-box__minus--disabled[data-v-1f875ce7]{color:#c8c9cc;background-color:#f7f8fa}.u-number-box__plus[data-v-1f875ce7]{border-top-right-radius:4px;border-bottom-right-radius:4px}.u-number-box__minus[data-v-1f875ce7]{border-top-left-radius:4px;border-bottom-left-radius:4px}.u-number-box__input[data-v-1f875ce7]{position:relative;text-align:center;font-size:15px;padding:0;margin:0 2px;display:flex;flex-direction:row;align-items:center;justify-content:center}.u-number-box__input--disabled[data-v-1f875ce7]{color:#c8c9cc;background-color:#f2f3f5}',""]),t.exports=e},"12be":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'uni-page-body[data-v-7390659b]{\n\t/* background-color: #FFFFFF; */}.inps[data-v-7390659b]{border-radius:55px;padding:10px!important;background-color:#f8f8f8}[data-v-7390659b] .u-input{background:#fff}[data-v-7390659b] .u-icon__img{width:20px!important;height:20px!important}[data-v-7390659b] .u-icon__icon[data-v-172979f2]{font-size:22px!important}[data-v-7390659b] .content-clear-icon{color:initial!important}[data-v-7390659b] .uni-easyinput__content{border-radius:55px;padding:0;padding-left:%?28?%;height:45px}[data-v-7390659b] .uni-easyinput__placeholder-class{font-size:15px;color:#c0c4cc}.DrawerPage[data-v-7390659b]{position:relative;width:100vw;height:100vh;left:0;background-color:#fff;transition:all .4s}[data-v-7390659b] .uni-easyinput__content[data-v-abe12412]{background-color:#f8f8f8!important;border-radius:6vh;border:none;padding:4px}.wrap_text[data-v-7390659b]{display:block;margin-bottom:2vh;font-size:16px}.DrawerPage.show[data-v-7390659b]{-webkit-transform:scale(.9);transform:scale(.9);left:65vw;box-shadow:0 0 %?60?% rgba(0,0,0,.2);-webkit-transform-origin:0;transform-origin:0}.DrawerWindow[data-v-7390659b]{position:absolute;width:65vw;height:100vh;left:0;top:0;-webkit-transform:scale(.9) translateX(-100%);transform:scale(.9) translateX(-100%);opacity:0;pointer-events:none;transition:all .4s;padding:%?100?% 0}.DrawerWindow.show[data-v-7390659b]{-webkit-transform:scale(1) translateX(0);transform:scale(1) translateX(0);opacity:1;pointer-events:all}.DrawerClose[data-v-7390659b]{position:absolute;width:40vw;height:100vh;right:0;top:0;color:transparent;padding-bottom:%?30?%;display:flex;align-items:flex-end;justify-content:center;background-image:linear-gradient(90deg,rgba(0,0,0,.01),rgba(0,0,0,.6));letter-spacing:5px;font-size:%?50?%;opacity:0;pointer-events:none;transition:all .4s}.DrawerClose.show[data-v-7390659b]{opacity:1;pointer-events:all;width:35vw;color:#fff}.DrawerPage .cu-bar.tabbar .action uni-button.cuIcon[data-v-7390659b]{width:%?64?%;height:%?64?%;line-height:%?64?%;margin:0;display:inline-block}.DrawerPage .cu-bar.tabbar .action .cu-avatar[data-v-7390659b]{margin:0}.DrawerPage .nav[data-v-7390659b]{flex:1}.DrawerPage .nav .cu-item.cur[data-v-7390659b]{border-bottom:0;position:relative}.DrawerPage .nav .cu-item.cur[data-v-7390659b]::after{content:"";width:%?10?%;height:%?10?%;background-color:currentColor;position:absolute;bottom:%?10?%;border-radius:%?10?%;left:0;right:0;margin:auto}.DrawerPage .cu-bar.tabbar .action[data-v-7390659b]{flex:initial}.DrawerWindow uni-view[data-v-7390659b],\nuni-scroll-view[data-v-7390659b],\nuni-swiper[data-v-7390659b],\nuni-button[data-v-7390659b],\nuni-input[data-v-7390659b],\nuni-textarea[data-v-7390659b],\nuni-label[data-v-7390659b],\nuni-navigator[data-v-7390659b],\nuni-image[data-v-7390659b]{box-sizing:border-box}.DrawerClose uni-view[data-v-7390659b],\nuni-scroll-view[data-v-7390659b],\nuni-swiper[data-v-7390659b],\nuni-button[data-v-7390659b],\nuni-input[data-v-7390659b],\nuni-textarea[data-v-7390659b],\nuni-label[data-v-7390659b],\nuni-navigator[data-v-7390659b],\nuni-image[data-v-7390659b]{box-sizing:border-box}uni-view[data-v-7390659b],\nuni-image[data-v-7390659b]{box-sizing:border-box}\n.uni-scroll-view-content uni-view[data-v-7390659b],\nuni-image[data-v-7390659b]{box-sizing:initial!important}',""]),t.exports=e},"12cf":function(t,e,a){var i=a("c6b7");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("fa0dfa22",i,!0,{sourceMap:!1,shadowMode:!1})},"13ae":function(t,e,a){var i=a("0287");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("267d9ca3",i,!0,{sourceMap:!1,shadowMode:!1})},1587:function(t,e,a){"use strict";a.r(e);var i=a("e3b2"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"169e":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c"),a("5c47"),a("0506"),a("bf0f"),a("8f71");var r=a("6c16"),n=i(a("fc24")),s=i(a("29d6")),o={name:"u-upload",mixins:[uni.$u.mpMixin,uni.$u.mixin,n.default,s.default],data:function(){return{lists:[],isInCount:!0}},watch:{fileList:{immediate:!0,handler:function(){this.formatFileList()}}},methods:{formatFileList:function(){var t=this,e=this.fileList,a=void 0===e?[]:e,i=this.maxCount,r=a.map((function(e){return Object.assign(Object.assign({},e),{isImage:"image"===t.accept||uni.$u.test.image(e.url||e.thumb),isVideo:"video"===t.accept||uni.$u.test.video(e.url||e.thumb),deletable:"boolean"===typeof e.deletable?e.deletable:t.deletable})}));this.lists=r,this.isInCount=r.length<i},chooseFile:function(){var t=this,e=this.maxCount,a=this.multiple,i=this.lists,n=this.disabled;if(!n){var s;try{s=uni.$u.test.array(this.capture)?this.capture:this.capture.split(",")}catch(o){s=[]}(0,r.chooseFile)(Object.assign({accept:this.accept,multiple:this.multiple,capture:s,compressed:this.compressed,maxDuration:this.maxDuration,sizeType:this.sizeType,camera:this.camera},{maxCount:e-i.length})).then((function(e){t.onBeforeRead(a?e:e[0])})).catch((function(e){t.$emit("error",e)}))}},onBeforeRead:function(t){var e=this,a=this.beforeRead,i=this.useBeforeRead,r=!0;uni.$u.test.func(a)&&(r=a(t,this.getDetail())),i&&(r=new Promise((function(a,i){e.$emit("beforeRead",Object.assign(Object.assign({file:t},e.getDetail()),{callback:function(t){t?a():i()}}))}))),r&&(uni.$u.test.promise(r)?r.then((function(a){return e.onAfterRead(a||t)})):this.onAfterRead(t))},getDetail:function(t){return{name:this.name,index:null==t?this.fileList.length:t}},onAfterRead:function(t){var e=this.maxSize,a=this.afterRead,i=Array.isArray(t)?t.some((function(t){return t.size>e})):t.size>e;i?this.$emit("oversize",Object.assign({file:t},this.getDetail())):("function"===typeof a&&a(t,this.getDetail()),this.$emit("afterRead",Object.assign({file:t},this.getDetail())))},deleteItem:function(t){this.$emit("delete",Object.assign(Object.assign({},this.getDetail(t)),{file:this.fileList[t]}))},onPreviewImage:function(t){var e=this;t.isImage&&this.previewFullImage&&uni.previewImage({urls:this.lists.filter((function(t){return"image"===e.accept||uni.$u.test.image(t.url||t.thumb)})).map((function(t){return t.url||t.thumb})),current:t.url||t.thumb,fail:function(){uni.$u.toast("预览图片失败")}})},onPreviewVideo:function(t){if(this.data.previewFullImage){var e=t.currentTarget.dataset.index,a=this.data.lists;wx.previewMedia({sources:a.filter((function(t){return isVideoFile(t)})).map((function(t){return Object.assign(Object.assign({},t),{type:"video"})})),current:e,fail:function(){uni.$u.toast("预览视频失败")}})}},onClickPreview:function(t){var e=t.currentTarget.dataset.index,a=this.data.lists[e];this.$emit("clickPreview",Object.assign(Object.assign({},a),this.getDetail(e)))}}};e.default=o},1722:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.formatIDcard=function(t){if(!t)return"";var e=t;return e=e.toString().replace(/^(.{6})(?:\w+)(.{4})$/,"$1********$2"),e},e.formatPhone=function(t){if(!t)return"";var e=t;return e=e.toString().replace(/^(\d{3})(\d{4})(\d{4})/g,"$1****$3"),e},e.nameFormat=function(t){if(console.log(t),!t)return"";var e=t;2==e.length?e=e.toString().replace(/^([^\x00-\xff])([^\x00-\xff]{0,})([^\x00-\xff])/g,"$1*"):3==e.length?e=e.toString().replace(/^([^\x00-\xff])([^\x00-\xff]{0,})([^\x00-\xff])/g,"$1**"):4==e.length?e=e.toString().replace(/^([^\x00-\xff])([^\x00-\xff]{0,2})([^\x00-\xff])/g,"$1**$3"):e.length>4&&(e=e.toString().replace(/^([^\x00-\xff])([^\x00-\xff]{0,3})([^\x00-\xff])/g,"$1***$3"));return e},a("5c47"),a("a1c1"),a("c9b5"),a("bf0f"),a("ab80")},"17f4":function(t,e,a){"use strict";a.r(e);var i=a("83f7"),r=a("b2b8");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("4b5c");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"15523df2",null,!1,i["a"],void 0);e["default"]=o.exports},"181e":function(t,e,a){a("5c47"),a("aa9c"),a("c223"),a("fd3c"),a("4100"),a("473f"),a("bf0f"),a("7a76"),a("c9b5"),a("ab80");var i=a("ada7"),r=a("ecb2"),n=a("0f57"),s=a("811f"),o=a("fcad"),h=a("564f"),l=a("5335"),u=a("c8b9");function c(t){return unescape(encodeURIComponent(t)).length}function d(t,e,a){var i,r=[];while(null!==(i=t.exec(a)))r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function f(t){var e,a,r=d(h.NUMERIC,i.NUMERIC,t),n=d(h.ALPHANUMERIC,i.ALPHANUMERIC,t);l.isKanjiModeEnabled()?(e=d(h.BYTE,i.BYTE,t),a=d(h.KANJI,i.KANJI,t)):(e=d(h.BYTE_KANJI,i.BYTE,t),a=[]);var s=r.concat(n,e,a);return s.sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function C(t,e){switch(e){case i.NUMERIC:return r.getBitsLength(t);case i.ALPHANUMERIC:return n.getBitsLength(t);case i.KANJI:return o.getBitsLength(t);case i.BYTE:return s.getBitsLength(t)}}function m(t,e){var a,h=i.getBestModeForData(t);if(a=i.from(e,h),a!==i.BYTE&&a.bit<h.bit)throw new Error('"'+t+'" cannot be encoded with mode '+i.toString(a)+".\n Suggested mode is: "+i.toString(h));switch(a!==i.KANJI||l.isKanjiModeEnabled()||(a=i.BYTE),a){case i.NUMERIC:return new r(t);case i.ALPHANUMERIC:return new n(t);case i.KANJI:return new o(t);case i.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"===typeof e?t.push(m(e,null)):e.data&&t.push(m(e.data,e.mode)),t}),[])},e.fromString=function(t,a){for(var r=f(t,l.isKanjiModeEnabled()),n=function(t){for(var e=[],a=0;a<t.length;a++){var r=t[a];switch(r.mode){case i.NUMERIC:e.push([r,{data:r.data,mode:i.ALPHANUMERIC,length:r.length},{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.ALPHANUMERIC:e.push([r,{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.KANJI:e.push([r,{data:r.data,mode:i.BYTE,length:c(r.data)}]);break;case i.BYTE:e.push([{data:r.data,mode:i.BYTE,length:c(r.data)}])}}return e}(r),s=function(t,e){for(var a={},r={start:{}},n=["start"],s=0;s<t.length;s++){for(var o=t[s],h=[],l=0;l<o.length;l++){var u=o[l],c=""+s+l;h.push(c),a[c]={node:u,lastCount:0},r[c]={};for(var d=0;d<n.length;d++){var f=n[d];a[f]&&a[f].node.mode===u.mode?(r[f][c]=C(a[f].lastCount+u.length,u.mode)-C(a[f].lastCount,u.mode),a[f].lastCount+=u.length):(a[f]&&(a[f].lastCount=u.length),r[f][c]=C(u.length,u.mode)+4+i.getCharCountIndicator(u.mode,e))}}n=h}for(var m=0;m<n.length;m++)r[n[m]].end=0;return{map:r,table:a}}(n,a),o=u.find_path(s.map,"start","end"),h=[],d=1;d<o.length-1;d++)h.push(s.table[o[d]].node);return e.fromArray(function(t){return t.reduce((function(t,e){var a=t.length-1>=0?t[t.length-1]:null;return a&&a.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(h))},e.rawSplit=function(t){return e.fromArray(f(t,l.isKanjiModeEnabled()))}},1885:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("5de6"));a("64aa"),a("5ef2");var n={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:function(){return{}}},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"",color:"#000000",size:20,customPrefix:""}}},border:{type:Boolean,default:!0},customStyle:{type:Object,default:function(){return{padding:"",backgroundColor:"#FFFFFF"}}},keepScrollPosition:{type:Boolean,default:!1}},watch:{"customStyle.padding":{handler:function(t){"number"==typeof t&&(t+="");var e=t.split(" ");if(1===e.length){var a=e[0];this.padding={top:a,right:a,bottom:a,left:a}}else if(2===e.length){var i=(0,r.default)(e,2),n=i[0],s=i[1];this.padding={top:n,right:s,bottom:n,left:s}}else if(4===e.length){var o=(0,r.default)(e,4),h=o[0],l=o[1],u=o[2],c=o[3];this.padding={top:h,right:l,bottom:u,left:c}}},immediate:!0}},data:function(){return{isFirstChild:!1,padding:{top:"",right:"",bottom:"",left:""}}},mounted:function(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniList",e=this.$parent,a=e.$options.name;while(a!==t){if(e=e.$parent,!e)return!1;a=e.$options.name}return e},onClick:function(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange:function(t){t.detail.value?this.$store.commit("setBg","black"):this.$store.commit("setBg","while")},openPage:function(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi:function(t){var e=this,a={url:this.to,success:function(t){e.$emit("click",{data:t})},fail:function(t){e.$emit("click",{data:t})}};switch(t){case"navigateTo":uni.navigateTo(a);break;case"redirectTo":uni.redirectTo(a);break;case"reLaunch":uni.reLaunch(a);break;case"switchTab":uni.switchTab(a);break;default:uni.navigateTo(a)}}}};e.default=n},"18bb":function(t,e,a){"use strict";a.r(e);var i=a("ab69"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},1966:function(t,e,a){t.exports=a.p+"static/1612@2x.png"},"1b8a":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5ef2"),a("bf0f");var r=i(a("4b3f")),n={name:"u-list-item",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{rect:{},index:0,show:!0,sys:uni.$u.sys()}},computed:{},inject:["uList"],watch:{"uList.innerScrollTop":function(t){var e=this.uList.preLoadScreen,a=this.sys.windowHeight;t<=a*e?this.parent.updateOffsetFromChild(0):this.rect.top<=t-a*e&&this.parent.updateOffsetFromChild(this.rect.top)}},created:function(){this.parent={}},mounted:function(){this.init()},methods:{init:function(){this.updateParentData(),this.index=this.parent.children.indexOf(this),this.resize()},updateParentData:function(){this.getParentData("u-list")},resize:function(){var t=this;this.queryRect("u-list-item-".concat(this.anchor)).then((function(e){var a=t.parent.children[t.index-1];t.rect=e;var i=t.uList.preLoadScreen,r=t.sys.windowHeight;a&&(t.rect.top=a.rect.top+a.rect.height),e.top>=t.uList.innerScrollTop+(1+i)*r&&(t.show=!1)}))},queryRect:function(t){var e=this;return new Promise((function(a){e.$uGetRect(".".concat(t)).then((function(t){a(t)}))}))}}};e.default=n},"1bd6":function(t,e,a){"use strict";a.r(e);var i=a("445b"),r=a("d2d1");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("9903");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"01a2205d",null,!1,i["a"],void 0);e["default"]=o.exports},"1c23":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("9b1b"));a("5c47"),a("0506"),a("dd2b"),a("fd3c"),a("aa9c"),a("f7a5"),a("a1c1"),a("c223");var n=a("1722"),s={data:function(){return{fileList2:[],fileList1:[],userstatus:{},imgPaths:"",imgTwoPaths:"",name:"",card:"",names:"",cards:""}},computed:{i18n:function(){return this.$t("real")}},mounted:function(){this.getData();uni.setNavigationBarTitle({title:this.$t("real.real_name_auth")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},methods:{nameFormats:function(t){return(0,n.nameFormat)(t)},formatIDcards:function(t){return(0,n.formatIDcard)(t)},getData:function(){var t=this;this.$H.post("/api/v1/realState",!1).then((function(e){"ok"==e.type&&(t.userstatus=e.data)}))},onsubmits:function(){var t=this;if(""==this.name)return uni.$u.toast(this.$t("real.enter_name"));if(""==this.card)return uni.$u.toast(this.$t("real.enter_passport_idnumber"));if(!this.$u.test.idCard(this.card))return uni.$u.toast("this.$t('real.enter_passport_idnumber')");this.$H.post("/api/v1/saveUserReal",!1,{id_type:0,name:this.name,card_id:this.card,real_type:1,front_pic:this.imgPaths,reverse_pic:this.imgTwoPaths}).then((function(e){"ok"==e.type&&(uni.$u.toast("上传成功等待审核"),t.getData())}))},deletePicTwo:function(t){this["fileList".concat(t.name)].splice(t.index,1)},afterReadTwo:function(t){var e=this,a=this,i=this.$store.state.token;if(!i)return uni.$u.toast(this.$t("real.re_certification"));uni.showLoading(),a.uploadImgFinished=!1;var n=t.file;n.map((function(a){e["fileList".concat(t.name)].push((0,r.default)({},a))})),this.fileList2=this.fileList2.slice(0,9),this.imgListsTwo=[],console.log("待上传图片==",this.fileList2),this.imgTwoPaths="",uni.uploadFile({url:this.$C.webUrl+"/api/v1/upload",filePath:this.fileList2[0].url,name:"file",formData:{type:0},header:{Authorization:"Bearer "+i},success:function(t){uni.hideLoading();var e=t.data.replace(/\n/g,"").replace(/\n/g,"").replace(/\n/g,"").replace(/\s/g,"");t=JSON.parse(decodeURIComponent(e)),a.imgTwoPaths=a.$C.webUrl+"/storage/"+t.data.file_path,console.log(a.imgTwoPaths)},fail:function(t){reject(t)},complete:function(){uni.hideLoading()}})},deletePic:function(t){this["fileList".concat(t.name)].splice(t.index,1)},afterRead:function(t){var e=this,a=this,i=this.$store.state.token;if(!i)return uni.$u.toast(this.$t("real.re_certification"));uni.showLoading(),a.uploadImgFinished=!1;var n=t.file;n.map((function(a){e["fileList".concat(t.name)].push((0,r.default)({},a))})),this.fileList1=this.fileList1.slice(0,9),this.imgListsTwo=[],console.log("待上传图片==",this.fileList1),this.imgPaths="",uni.uploadFile({url:this.$C.webUrl+"/api/v1/upload",filePath:this.fileList1[0].url,name:"file",formData:{type:0},header:{Authorization:"Bearer "+i},success:function(t){uni.hideLoading();var e=t.data.replace(/\n/g,"").replace(/\n/g,"").replace(/\n/g,"").replace(/\s/g,"");t=JSON.parse(decodeURIComponent(e)),a.imgPaths=a.$C.webUrl+"/storage/"+t.data.file_path,console.log(a.imgPaths)},fail:function(t){reject(t)},complete:function(){uni.hideLoading()}})}},filters:{hideMiddle:function(t){return"".concat(t.substring(0,3),"****").concat(t.substring(t.length-4))}}};e.default=s},"1f4f":function(t,e,a){"use strict";a.r(e);var i=a("bbff"),r=a("ef3c");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"1a12f82f",null,!1,i["a"],void 0);e["default"]=o.exports},"21c5":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-badge--x[data-v-1693f0ea]{display:inline-block;position:relative}.uni-badge--absolute[data-v-1693f0ea]{position:absolute}.uni-badge--small[data-v-1693f0ea]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:center center;transform-origin:center center}.uni-badge[data-v-1693f0ea]{display:flex;overflow:hidden;box-sizing:border-box;-webkit-font-feature-settings:"tnum";font-feature-settings:"tnum";min-width:20px;justify-content:center;flex-direction:row;height:20px;padding:0 4px;line-height:18px;color:#fff;border-radius:100px;background-color:#909399;background-color:initial;border:1px solid #fff;text-align:center;font-family:Helvetica Neue,Helvetica,sans-serif;font-size:12px;z-index:999;cursor:pointer}.uni-badge--info[data-v-1693f0ea]{color:#fff;background-color:#909399}.uni-badge--primary[data-v-1693f0ea]{background-color:#2979ff}.uni-badge--success[data-v-1693f0ea]{background-color:#4cd964}.uni-badge--warning[data-v-1693f0ea]{background-color:#f0ad4e}.uni-badge--error[data-v-1693f0ea]{background-color:#dd524d}.uni-badge--inverted[data-v-1693f0ea]{padding:0 5px 0 0;color:#909399}.uni-badge--info-inverted[data-v-1693f0ea]{color:#909399;background-color:initial}.uni-badge--primary-inverted[data-v-1693f0ea]{color:#2979ff;background-color:initial}.uni-badge--success-inverted[data-v-1693f0ea]{color:#4cd964;background-color:initial}.uni-badge--warning-inverted[data-v-1693f0ea]{color:#f0ad4e;background-color:initial}.uni-badge--error-inverted[data-v-1693f0ea]{color:#dd524d;background-color:initial}',""]),t.exports=e},"21cd":function(t,e,a){var i=a("7859");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("2c364376",i,!0,{sourceMap:!1,shadowMode:!1})},2299:function(t,e,a){"use strict";a.r(e);var i=a("a35a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},2436:function(t,e,a){"use strict";var i=a("df2f"),r=a.n(i);r.a},2561:function(t,e,a){"use strict";a.r(e);var i=a("b878"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"26da":function(t,e,a){"use strict";a.r(e);var i=a("e140"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"281b":function(t,e,a){"use strict";var i=a("e29e"),r=a.n(i);r.a},"29d6":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{accept:{type:String,default:uni.$u.props.upload.accept},capture:{type:[String,Array],default:uni.$u.props.upload.capture},compressed:{type:Boolean,default:uni.$u.props.upload.compressed},camera:{type:String,default:uni.$u.props.upload.camera},maxDuration:{type:Number,default:uni.$u.props.upload.maxDuration},uploadIcon:{type:String,default:uni.$u.props.upload.uploadIcon},uploadIconColor:{type:String,default:uni.$u.props.upload.uploadIconColor},useBeforeRead:{type:Boolean,default:uni.$u.props.upload.useBeforeRead},afterRead:{type:Function,default:null},beforeRead:{type:Function,default:null},previewFullImage:{type:Boolean,default:uni.$u.props.upload.previewFullImage},maxCount:{type:[String,Number],default:uni.$u.props.upload.maxCount},disabled:{type:Boolean,default:uni.$u.props.upload.disabled},imageMode:{type:String,default:uni.$u.props.upload.imageMode},name:{type:String,default:uni.$u.props.upload.name},sizeType:{type:Array,default:uni.$u.props.upload.sizeType},multiple:{type:Boolean,default:uni.$u.props.upload.multiple},deletable:{type:Boolean,default:uni.$u.props.upload.deletable},maxSize:{type:[String,Number],default:uni.$u.props.upload.maxSize},fileList:{type:Array,default:uni.$u.props.upload.fileList},uploadText:{type:String,default:uni.$u.props.upload.uploadText},width:{type:[String,Number],default:uni.$u.props.upload.width},height:{type:[String,Number],default:uni.$u.props.upload.height},previewImage:{type:Boolean,default:uni.$u.props.upload.previewImage}}};e.default=i},"2a98":function(t,e,a){"use strict";t.exports=function(t,e,a,i){var r=65535&t|0,n=t>>>16&65535|0,s=0;while(0!==a){s=a>2e3?2e3:a,a-=s;do{r=r+e[i++]|0,n=n+r|0}while(--s);r%=65521,n%=65521}return r|n<<16|0}},"2ac6":function(t,e,a){"use strict";var i=a("0619"),r=a.n(i);r.a},"2b44":function(t,e,a){"use strict";var i=a("82de"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,a,h,l,u,c,d){var f,C,m,D,p,v,g,S,I,T=d.bits,x=0,y=0,A=0,b=0,w=0,F=0,M=0,L=0,E=0,N=0,P=null,O=0,R=new i.Buf16(16),B=new i.Buf16(16),_=null,k=0;for(x=0;x<=15;x++)R[x]=0;for(y=0;y<h;y++)R[e[a+y]]++;for(w=T,b=15;b>=1;b--)if(0!==R[b])break;if(w>b&&(w=b),0===b)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(A=1;A<b;A++)if(0!==R[A])break;for(w<A&&(w=A),L=1,x=1;x<=15;x++)if(L<<=1,L-=R[x],L<0)return-1;if(L>0&&(0===t||1!==b))return-1;for(B[1]=0,x=1;x<15;x++)B[x+1]=B[x]+R[x];for(y=0;y<h;y++)0!==e[a+y]&&(c[B[e[a+y]]++]=y);if(0===t?(P=_=c,v=19):1===t?(P=r,O-=257,_=n,k-=257,v=256):(P=s,_=o,v=-1),N=0,y=0,x=A,p=u,F=w,M=0,m=-1,E=1<<w,D=E-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){g=x-M,c[y]<v?(S=0,I=c[y]):c[y]>v?(S=_[k+c[y]],I=P[O+c[y]]):(S=96,I=0),f=1<<x-M,C=1<<F,A=C;do{C-=f,l[p+(N>>M)+C]=g<<24|S<<16|I|0}while(0!==C);f=1<<x-1;while(N&f)f>>=1;if(0!==f?(N&=f-1,N+=f):N=0,y++,0===--R[x]){if(x===b)break;x=e[a+c[y]]}if(x>w&&(N&D)!==m){0===M&&(M=w),p+=A,F=x-M,L=1<<F;while(F+M<b){if(L-=R[F+M],L<=0)break;F++,L<<=1}if(E+=1<<F,1===t&&E>852||2===t&&E>592)return 1;m=N&D,l[m]=w<<24|F<<16|p-u|0}}return 0!==N&&(l[p+N]=x-M<<24|64<<16|0),d.bits=w,0}},"2bef":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".bnsss[data-v-2ee8a662] .uni-picker-view-mask{background:inherit}[data-v-2ee8a662] .u-image{margin:0 auto}.kline[data-v-2ee8a662]{background:#fff}uni-page-body[data-v-2ee8a662]{position:inherit;overflow:auto!important}.showItems[data-v-2ee8a662]{width:130px;text-align:center;padding:20px;--tw-bg-opacity:1!important;border-bottom:2px solid #e5e7eb;background-color:#e5e7eb}.noShowItems[data-v-2ee8a662]{width:130px;text-align:center;padding:20px;--tw-bg-opacity:1!important;border-bottom:2px solid #e5e7eb}.itemview[data-v-2ee8a662]{display:flex;flex-direction:row;align-items:center;padding:%?15?% %?25?%;justify-content:space-between;color:#222;border-radius:%?8?%;margin-top:%?16?%;margin-right:%?20?%;uni-image{width:%?30?%;height:%?30?%;margin-left:%?60?%}}.itemview_[data-v-2ee8a662]{display:flex;flex-direction:row;align-items:center;padding:%?15?% %?25?%;justify-content:space-between;color:#222;border-radius:%?8?%;margin-top:%?16?%;border:%?2?% solid #333;margin-right:%?20?%;uni-image{width:%?30?%;height:%?30?%;margin-left:%?60?%}}.u-content[data-v-2ee8a662]{padding:65px 90px 0;@include flex(column);align-items:center;justify-content:center;&__circle{background-color:$u-success;@include flex;border-radius:100px;width:60px;height:60px;align-items:center;justify-content:center}&__normal{font-size:15px;color:$u-success;margin-top:15px}}.composings[data-v-2ee8a662]{margin-top:18px;font-weight:700}.u-line[data-v-2ee8a662]{border-bottom:0 solid #d6d7d9}uni-swiper-item[data-v-2ee8a662]{overflow-x:hidden;overflow-y:auto}.wnss[data-v-2ee8a662] .u-number-box__plus{background:#f5f7fa!important}.bnss[data-v-2ee8a662] .u-number-box__plus{background:#12151b!important}.bnss[data-v-2ee8a662] .u-number-box__minus{background:#12151b!important}.bnss[data-v-2ee8a662] .u-icon__icon{color:#fff!important}.wnss[data-v-2ee8a662] .u-number-box__minus{background:#f5f7fa!important}.wnss[data-v-2ee8a662] .u-number-box{border:1px solid #d2d6e8}.bnss[data-v-2ee8a662] .u-number-box{border:1px solid #2f3142}.bnss[data-v-2ee8a662] .u-number-box__input--disabled{color:#424656!important}[data-v-2ee8a662] .u-subsection__bar{border-bottom:2px solid #0166fc}.bnss[data-v-2ee8a662] .u-subsection--button{height:65px;background:#1a1c24}uni-page-body[data-v-2ee8a662]{overflow-x:hidden}.jys[data-v-2ee8a662]{background:#fff}.jys .scroll-view[data-v-2ee8a662]{width:95%!important;height:%?75?%;line-height:%?75?%;white-space:nowrap;background:#f5f6fa;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:6px;margin-top:15px}.jys .scroll-viewws[data-v-2ee8a662]{width:93%!important;\n\t/* height: 105rpx; */line-height:%?105?%;white-space:nowrap;background:#ededed;display:flex;justify-content:center;align-items:center;text-align:center;\n\t/* border-radius: 0px 100px 100px 0px; */border-radius:100px;padding-left:5px;padding-right:5px\n\t/* margin-top: 15px; */}.jys .scroll-viewws .scroll-items[data-v-2ee8a662]{display:inline-block;width:50%;height:%?75?%;line-height:%?75?%;text-align:center;background:#0166fc;\n\t/* border-radius: 100px 0px 0px 100px; */border-radius:100px;color:#fff}.jys .scroll-viewws .scroll-items-r[data-v-2ee8a662]{display:inline-block;width:50%;height:%?75?%;line-height:%?75?%;text-align:center;background:#0166fc;border-radius:0 100px 100px 0;color:#fff}.scroll-viewws .scroll-item[data-v-2ee8a662]{display:inline-block;width:50%;line-height:%?75?%;height:%?75?%;text-align:center;border-radius:100px;color:#626779}.mini-btn[data-v-2ee8a662]{border-radius:50px;--tw-text-opacity:1!important;color:rgb(255 255 255/var(--tw-text-opacity))!important;--tw-bg-opacity:1!important;background-color:rgb(1 102 252/var(--tw-bg-opacity))!important}.bmini-btn[data-v-2ee8a662]{border-radius:50px;--tw-text-opacity:1!important;color:rgb(19 19 19/var(--tw-text-opacity))!important;--tw-bg-opacity:1!important;background-color:rgb(238 238 238/var(--tw-bg-opacity))!important}.bsone[data-v-2ee8a662]{background:#1a1c24!important;border:1px solid #2f3142!important}.dhbts[data-v-2ee8a662]{display:inline-block;background:#fff;margin:5px;width:15%;height:25px;line-height:25px;--tw-bg-opacity:1!important;background-color:#eee;font-weight:500!important;--tw-text-opacity:1!important;color:rgb(0 0 0/var(--tw-text-opacity))!important;\n\t/* border-radius: 8vw !important; */text-align:center}.sdhbts[data-v-2ee8a662]{display:inline-block;background:#fff;margin:5px;width:15%;height:25px;line-height:25px;--tw-bg-opacity:1!important;font-weight:500!important;--tw-text-opacity:1!important;color:rgb(255 255 255/var(--tw-text-opacity))!important;\n\t/*  border-radius: 8vw !important; */text-align:center;background-color:rgb(1 102 252/var(--tw-bg-opacity))!important}[data-v-2ee8a662] .u-popup__content{border-radius:10px}.bnsss[data-v-2ee8a662] .u-picker__view__column__item{color:#fff}.bnsss[data-v-2ee8a662] .u-popup__content{border-radius:10px;background:#222}.wnsss[data-v-2ee8a662] .u-popup__content{border-radius:10px}.bzsshow[data-v-2ee8a662]{overflow:hidden;position:fixed}[data-v-2ee8a662] .u-subsection__item__text{font-size:15px!important}[data-v-2ee8a662] .u-subsection--button__bar[data-v-244377f2]{background-color:inherit!important}.jybs[data-v-2ee8a662] .u-subsection--button{background-color:inherit!important;height:50px;margin-left:-5px}[data-v-2ee8a662] .u-subsection__item__text{line-height:30px!important;display:flex;flex-direction:row;align-items:center;transition-property:color;transition-duration:.3s;font-size:15px!important;width:90px;text-align:center;justify-content:center}[data-v-2ee8a662] .u-subsection--button__bar{background-color:inherit!important;border-bottom:2px solid #0166fc;\n\t/* width: 85px !important; */height:45px!important;border-radius:0!important}.scroll-view[data-v-2ee8a662]{width:95%!important;height:%?100?%;line-height:%?100?%;white-space:nowrap;overflow:hidden;background:#f5f6fa;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:6px;margin:0 auto}.scroll-view .scroll-items[data-v-2ee8a662]{display:inline-block;width:49.5%;height:%?80?%;line-height:%?80?%;text-align:center;background:#fff;border-radius:6px}.scroll-view .scroll-itembs[data-v-2ee8a662]{display:inline-block;width:49.5%;height:%?80?%;line-height:%?80?%;text-align:center;background:#1a1b24;border-radius:6px;color:#fff!important}.scroll-view .scroll-itemb[data-v-2ee8a662]{display:inline-block;width:49.5%;line-height:%?80?%;height:%?80?%;text-align:center;border-radius:6px}.scroll-view .scroll-item[data-v-2ee8a662]{display:inline-block;width:49.5%;line-height:%?80?%;height:%?80?%;text-align:center;border-radius:6px;color:#828397}.jys[data-v-2ee8a662] .u-subsection--button{height:50px;background-color:#f7f8fa!important}.jybs[data-v-2ee8a662] .u-subsection--button{height:50px}[data-v-2ee8a662] .u-subsection__item__text{font-size:15px!important}",""]),t.exports=e},"2c65":function(t,e,a){"use strict";var i=a("7e48"),r=a("82de"),n=a("2e30"),s=a("d233"),o=a("d80f"),h=a("87de"),l=a("ea4b"),u=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var a=i.inflateInit2(this.strm,e.windowBits);if(a!==s.Z_OK)throw new Error(o[a]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=n.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=i.inflateSetDictionary(this.strm,e.dictionary),a!==s.Z_OK)))throw new Error(o[a])}function d(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||o[a.err];return a.result}c.prototype.push=function(t,e){var a,o,h,l,c,d=this.strm,f=this.options.chunkSize,C=this.options.dictionary,m=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"===typeof t?d.input=n.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(f),d.next_out=0,d.avail_out=f),a=i.inflate(d,s.Z_NO_FLUSH),a===s.Z_NEED_DICT&&C&&(a=i.inflateSetDictionary(this.strm,C)),a===s.Z_BUF_ERROR&&!0===m&&(a=s.Z_OK,m=!1),a!==s.Z_STREAM_END&&a!==s.Z_OK)return this.onEnd(a),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&a!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(d.output,d.next_out),l=d.next_out-h,c=n.buf2string(d.output,h),d.next_out=l,d.avail_out=f-l,l&&r.arraySet(d.output,d.output,h,l,0),this.onData(c)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&a!==s.Z_STREAM_END);return a===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(a=i.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=d,e.inflateRaw=function(t,e){return e=e||{},e.raw=!0,d(t,e)},e.ungzip=d},"2cb0":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("9b1b"));a("aa77"),a("bf0f"),a("fd3c"),a("aa9c"),a("de6c");var n=a("8f59"),s={data:function(){return{navsList:[],tabIndex:0,scrollInto:"",remarks:"",disableds:!1,yhremarks:"",loading:!1,currency:0,yhcurrency:0,scrollH:658,values:"",cjyhvalues:{name:""},yhvalues:"",hnames:"USDT",jbnumber:0,yhsnumber:0,dfindex:[0],ddfindex:[0],yhdfindex:[0],coin_trade_fee:0,yhddfindex:[0],yhcoin_trade_fee:0,cnumber:null,yhcnumber:null,maxNumber:30,rates:0,rateses:0,yhrateses:0,yhnames:"",shows:!1,yhshows:!1,yhdshows:!1,dshows:!1,tbvalues:"",yhtbvalues:"",resData:null,walletAddress:[],yhwalletAddress:[],yhbzid:0,szhbbzid:0,yhcolumns:[],columns:[["USDT-TRC20","200","300"]],tbcolumns:[["123456789123456789","200","300"]]}},onNavigationBarButtonTap:function(){uni.navigateTo({url:"/pages/users/cjrecord/cjrecord"})},watch:{cjyhvalues:function(t){var e=this;if(void 0!==t){var a=this.yhcolumns[0].find((function(e){return e.name==t.name}));a&&(this.yhcoin_trade_fee=a.rate),uni.showLoading({title:""});this.$H.get("/api/v1/cashInfo",!1,{digital_bank_id:t.id}).then((function(t){uni.hideLoading();var a=[];if("ok"==t.type){e.yhwalletAddress=t.data,t.data.map((function(t){a.push({account:t.bank_account,bank_name:t.bank_name,id:t.id})})),[].push(a);var i=e.yhwalletAddress[0];i&&(e.yhbzid=i.id,e.yhtbvalues=i.account,e.yhnames=i.bank_name)}}))}},yhtbvalues:function(t){var e=this.yhwalletAddress[0].find((function(e){return e.account==t}));e&&(this.yhbzid=e.id)},yhcnumber:function(t){this.yhrateses=t*this.yhcoin_trade_fee,this.yhsnumber=t-this.yhrateses},cnumber:function(t){this.rateses=t*this.coin_trade_fee,this.jbnumber=t-this.rateses},yhvalues:function(t){},tbvalues:function(t){var e=this.walletAddress.find((function(e){return e.account==t}));e&&(this.szhbbzid=e.id)},values:function(t){var e=this;this.$H.get("/api/v1/usdtInfo",!1,{digital_currency_id:t.id}).then((function(a){if("ok"==a.type){e.walletAddress=a.data;var i=[];a.data.map((function(t){i.push({account:t.account,id:t.id})})),[].push(i),e.tbvalues=e.walletAddress[0].account;var r=a.data.find((function(e){return e.digital_currency.agreement==t.name}));r&&(e.coin_trade_fee=r.digital_currency.rate)}}))}},onShow:function(){},mounted:function(){this.getData();var t=this.i18n;this.navsList.push(t.digital_currency),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"}),this.$nextTick((function(){var e=document.querySelectorAll(".uni-page-head .uni-page-head-ft .uni-page-head-btn")[0];e&&(e.querySelector(".uni-btn-icon").innerText=t.withdrawal_record)}))},computed:(0,r.default)({i18n:function(){return this.$t("out")}},(0,n.mapState)({lgStatus:function(t){return t.lgStatus},users:function(t){return t.users}})),methods:{yhconfirm:function(t){t.columnIndex;var e=t.value,a=(t.yhvalues,t.index,t.picker);void 0===a&&this.$refs.yhuPicker;this.cjyhvalues=e[0]||{name:""},this.yhshows=!1},yhcancel:function(t){this.yhshows=!1},confirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.uPicker;this.values=e[0],this.currency=e[0].id,this.shows=!1},cancel:function(t){this.shows=!1},dconfirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.duPicker;this.tbvalues=e[0].account,this.dshows=!1},dcancel:function(t){this.dshows=!1},yhdconfirm:function(t){t.columnIndex;var e=t.value,a=(t.yhtbvalues,t.index,t.picker);void 0===a&&this.$refs.yhduPicker;this.yhtbvalues=e[0].account,this.yhnames=e[0].bank_name,this.yhdshows=!1},yhdcancel:function(t){this.yhdshows=!1},tsubmit:function(){var t=this;this.loading=!0,this.disableds=!0,this.currency=1;var e=this.cnumber*this.coin_trade_fee;this.$H.post("/api/v1/postWalletOut",!1,{money:"USDT",type:0,currency:this.currency,number:this.cnumber,rate:e,address:this.tbvalues,remark:this.remarks,wallet_id:this.szhbbzid}).then((function(e){t.loading=!1,t.disableds=!1,"ok"==e.type&&(uni.$u.toast(e.message),t.cnumber=0,t.remarks="")}))},yhtsubmit:function(){var t=this;this.loading=!0,this.disableds=!0,this.yhcurrency=1;this.yhcnumber,this.yhcoin_trade_fee,this.$H.post("/api/v1/postWalletOutBank",!1,{wallet_id:this.yhbzid,number:this.yhcnumber,remark:this.yhremarks}).then((function(e){t.loading=!1,t.disableds=!1,"ok"==e.type&&(uni.$u.toast(e.message),t.yhcnumber=0,t.yhremarks="")}))},getData:function(){var t,e=this;this.$H.get("/api/v1/extractBank",!1).then((function(t){if("ok"==t.type){var a=[],i=[];t.data.map((function(t){a.push({name:t.name,id:t.id,rate:t.rate})})),i.push(a),e.yhcolumns=i,e.cjyhvalues=e.yhcolumns[0][0]||{name:""}}})),this.$H.get("/api/v1/extractCurrency",!1).then((function(t){if("ok"==t.type){var a=[];e.columns=t.data,console.log(e.columns,11111111111),t.data.map((function(t){a.push({name:t.agreement,id:t.id})})),[].push(a);var i=e.columns[0];i&&(e.values=i.agreement,e.currency=i.id,e.values=i.agreement,e.yhvalues=i.agreement,e.currency=i.id,e.yhcurrency=i.id)}})),this.$H.get("/api/v1/cashInfo",!1,{money:null===(t=this.cjyhvalues)||void 0===t?void 0:t.name}).then((function(t){var a,i,r=[],n=[];"ok"==t.type&&(t.data.map((function(t){r.push({account:t.bank_account,bank_name:t.bank_name})})),n.push(r),e.yhwalletAddress=n,null!==(a=e.yhwalletAddress[0][0])&&void 0!==a&&a.account?e.yhtbvalues=e.yhwalletAddress[0][0].account:console.error("Account is undefined"),e.yhnames=null===(i=e.yhwalletAddress[0][0])||void 0===i?void 0:i.bank_name)}))},changesTabs:function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto="tab"+t)},onChangeTab:function(t){this.changesTabs(t.detail.current)}}};e.default=s},"2e30":function(t,e,a){"use strict";var i=a("82de"),r=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(l){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){n=!1}for(var s=new i.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&n||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var a="",s=0;s<e;s++)a+=String.fromCharCode(t[s]);return a}s[254]=s[254]=1,e.string2buf=function(t){var e,a,r,n,s,o=t.length,h=0;for(n=0;n<o;n++)a=t.charCodeAt(n),55296===(64512&a)&&n+1<o&&(r=t.charCodeAt(n+1),56320===(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),n++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new i.Buf8(h),s=0,n=0;s<h;n++)a=t.charCodeAt(n),55296===(64512&a)&&n+1<o&&(r=t.charCodeAt(n+1),56320===(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),a=0,r=e.length;a<r;a++)e[a]=t.charCodeAt(a);return e},e.buf2string=function(t,e){var a,i,r,n,o=e||t.length,l=new Array(2*o);for(i=0,a=0;a<o;)if(r=t[a++],r<128)l[i++]=r;else if(n=s[r],n>4)l[i++]=65533,a+=n-1;else{r&=2===n?31:3===n?15:7;while(n>1&&a<o)r=r<<6|63&t[a++],n--;n>1?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return h(l,i)},e.utf8border=function(t,e){var a;e=e||t.length,e>t.length&&(e=t.length),a=e-1;while(a>=0&&128===(192&t[a]))a--;return a<0||0===a?e:a+s[t[a]]>e?a:e}},"2e7f":function(t,e,a){"use strict";var i=Math.log,r=Math.LOG10E;t.exports=Math.log10||function(t){return i(t)*r}},"2f6b":function(t,e,a){"use strict";a.r(e);var i=a("f221b"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},3061:function(t,e,a){"use strict";a.r(e);var i=a("053d"),r=a("6508");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("5d42");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"e8b3007e",null,!1,i["a"],void 0);e["default"]=o.exports},"30f75":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("7a76"),a("c9b5")},3106:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniTransition:a("1f4f").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showPopup?a("v-uni-view",{staticClass:"uni-popup",class:[t.popupstyle,t.isDesktop?"fixforpc-z-index":""]},[a("v-uni-view",{on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart.apply(void 0,arguments)}}},[t.maskShow?a("uni-transition",{key:"1",attrs:{name:"mask","mode-class":"fade",styles:t.maskClass,duration:t.duration,show:t.showTrans},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap.apply(void 0,arguments)}}}):t._e(),a("uni-transition",{key:"2",attrs:{"mode-class":t.ani,name:"content",styles:t.transClass,duration:t.duration,show:t.showTrans},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.popupstyle],style:{backgroundColor:t.bg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1),t.maskShow?a("keypress",{on:{esc:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap.apply(void 0,arguments)}}}):t._e()],1):t._e()},n=[]},"33e6":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{color:{type:String,default:uni.$u.props.link.color},fontSize:{type:[String,Number],default:uni.$u.props.link.fontSize},underLine:{type:Boolean,default:uni.$u.props.link.underLine},href:{type:String,default:uni.$u.props.link.href},mpTips:{type:String,default:uni.$u.props.link.mpTips},lineColor:{type:String,default:uni.$u.props.link.lineColor},text:{type:String,default:uni.$u.props.link.text}}};e.default=i},3403:function(t,e,a){var i=a("6c0b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("4ff2fc18",i,!0,{sourceMap:!1,shadowMode:!1})},3430:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{kefu:"",zxkefu:""}},computed:{i18n:function(){return this.$t("service")}},mounted:function(){this.getData();uni.setNavigationBarTitle({title:this.$t("service.contact_customer_service")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},methods:{getData:function(){var t=this;this.$H.get("/api/v1/getSiteConfig",!1).then((function(e){"ok"==e.type&&(t.kefu=e.data.kf,t.zxkefu=e.data.support_url)}))},obutton:function(){this.seccendCopy()},obuttonzxkf:function(){this.seccendzxkfCopy()},seccendCopy:function(){var t=this;this.$copyText(this.kefu).then((function(e){uni.$u.toast(t.$t("out.successful"))}),(function(t){}))},seccendzxkfCopy:function(){window.open(this.zxkefu)}}};e.default=i},3441:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("5cae")),n={name:"u-image",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler:function(t){t?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle:function(){var t={};return t.width=this.$u.addUnit(this.width),t.height=this.$u.addUnit(this.height),t.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),t.overflow=this.borderRadius>0?"hidden":"visible",uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}},mounted:function(){this.show=!0},methods:{onClick:function(){this.$emit("click")},onErrorHandler:function(t){this.loading=!1,this.isError=!0,this.$emit("error",t)},onLoadHandler:function(t){this.loading=!1,this.isError=!1,this.$emit("load",t),this.removeBgColor()},removeBgColor:function(){this.backgroundStyle={backgroundColor:"transparent"}}}};e.default=n},3471:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=(0,i.default)(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,h=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){h=!0,s=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(h)throw s}}}},a("01a2"),a("e39c"),a("bf0f"),a("844d"),a("18f7"),a("de6c"),a("7a76"),a("c9b5");var i=function(t){return t&&t.__esModule?t:{default:t}}(a("5d6b"))},3486:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniListItem:a("e5a63").default,uModal:a("3061").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"black"==t.$store.state.bgColor?"blacks":"whiles"},[a("v-uni-view",{style:"black"==t.$store.state.bgColor?" background: #22252F; width: 90%; margin: 0 auto; border-radius: 1px; margin-top: 11px;":"border: 1px solid #E8EBF3;width: 90%; margin: 0 auto; border-radius: 1px; margin-top: 11px;"},[a("uni-list-item",{attrs:{thumb:"while"==t.$store.state.bgColor?t.pic1:t.pic2,link:!0,clickable:!0,title:t.i18n.logout,to:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goexit()}}})],1),a("u-modal",{style:"black"==t.$store.state.bgColor?"background: #222;":"",attrs:{show:t.ishow,showCancelButton:!0,confirmText:t.confirmText,cancelText:t.cancelText,title:t.title,content:t.content},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1)},n=[]},"355a":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{kefu:""}},computed:{i18n:function(){return this.$t("service")}},mounted:function(){this.getData();uni.setNavigationBarTitle({title:this.$t("service.complaints_mailbox")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},methods:{getData:function(){var t=this;this.$H.get("/api/v1/getSiteConfig",!1).then((function(e){"ok"==e.type&&(t.kefu=e.data.kf)}))},obutton:function(){this.seccendCopy()},seccendCopy:function(){var t=this;this.$copyText(this.kefu).then((function(e){uni.$u.toast(t.$t("out.successful"))}),(function(t){}))}}};e.default=i},3601:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5ef2");var r=i(a("c123")),n={name:"u-avatar",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{colors:["#ffb34b","#f2bba9","#f7a196","#f18080","#88a867","#bfbf39","#89c152","#94d554","#f19ec2","#afaae4","#e1b0df","#c38cc1","#72dcdc","#9acdcb","#77b1cc","#448aca","#86cefa","#98d1ee","#73d1f1","#80a7dc"],avatarUrl:this.src,allowMp:!1}},watch:{src:{immediate:!0,handler:function(t){this.avatarUrl=t,t||this.errorHandler()}}},computed:{imageStyle:function(){return{}}},created:function(){this.init()},methods:{init:function(){},isImg:function(){return-1!==this.src.indexOf("/")},errorHandler:function(){this.avatarUrl=this.defaultUrl||"data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCADIAMgDAREAAhEBAxEB/8QAcQABAQEAAwEBAAAAAAAAAAAAAAUEAQMGAgcBAQAAAAAAAAAAAAAAAAAAAAAQAAIBAwICBgkDBQAAAAAAAAABAhEDBCEFMVFBYXGREiKBscHRMkJSEyOh4XLxYjNDFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbHFyZ/Dam+yLA+Z2L0Pjtyj2poD4AAAAAAAAAAAAAAAAAAAAAAAAKWFs9y6lcvvwQeqj8z9wFaziY1n/HbUX9XF97A7QAGXI23EvJ1goyfzR0YEfN269jeZ+a03pNe0DIAAAAAAAAAAAAAAAAAAAACvtO3RcVkXlWutuL9YFYAAAAAOJRjKLjJVi9GmB5/csH/mu1h/in8PU+QGMAAAAAAAAAAAAAAAAAAaMDG/6MmMH8C80+xAelSSVFolwQAAAAAAAHVlWI37ErUulaPk+hgeYnCUJuElSUXRrrQHAAAAAAAAAAAAAAAAABa2Oz4bM7r4zdF2ICmAAAAAAAAAg7zZ8GX41wuJP0rRgYAAAAAAAAAAAAAAAAAD0m2R8ODaXU33tsDSAAAAAAAAAlb9HyWZcnJd9PcBHAAAAAAAAAAAAAAAAAPS7e64Vn+KA0AAAAAAAAAJm+v8Ftf3ewCKAAAAAAAAAAAAAAAAAX9muqeGo9NttP06+0DcAAAAAAAAAjb7dTu2ra+VOT9P8AQCWAAAAAAAAAAAAAAAAAUNmyPt5Ltv4bui/kuAF0AAAAAAADiUlGLlJ0SVW+oDzOXfd/Ind6JPRdS0QHSAAAAAAAAAAAAAAAAAE2nVaNcGB6Lbs6OTao9LsF51z60BrAAAAAABJ3jOVHjW3r/sa9QEgAAAAAAAAAAAAAAAAAAAPu1duWriuW34ZR4MC9hbnZyEoy8l36XwfYBsAAADaSq9EuLAlZ+7xSdrGdW9Hc5dgEdtt1erfFgAAAAAAAAAAAAAAAAADVjbblX6NR8MH80tEBRs7HYivyzlN8lovaBPzduvY0m6eK10TXtAyAarO55lpJK54orolr+4GqO/Xaea1FvqbXvA+Z77kNeW3GPbV+4DJfzcm/pcm3H6Vou5AdAFLC2ed2Pjv1txa8sV8T6wOL+yZEKu1JXFy4MDBOE4ScZxcZLinoB8gAAAAAAAAAAAB242LeyJ+C3GvN9C7QLmJtePYpKS+5c+p8F2IDYAANJqj1T4oCfk7Nj3G5Wn9qXJax7gJ93Z82D8sVNc4v30A6Xg5i42Z+iLfqARwcyT0sz9MWvWBps7LlTf5Grce9/oBTxdtxseklHxT+uWr9AGoAB138ezfj4bsFJdD6V2MCPm7RdtJzs1uW1xXzL3gTgAAAAAAAAADRhYc8q74I6RWs5ckB6GxYtWLat21SK731sDsAAAAAAAAAAAAAAAASt021NO/YjrxuQXT1oCOAAAAAAABzGLlJRSq26JAelwsWONYjbXxcZvmwO8AAAAAAAAAAAAAAAAAAef3TEWPkVivx3NY9T6UBiAAAAAABo2+VmGXblddIJ8eivRUD0oAAAAAAAAAAAAAAAAAAAYt4tKeFKVNYNSXfRgefAAAAAAAAr7VuSSWPedKaW5v1MCsAAAAAAAAAAAAAAAAAAIe6bj96Ts2n+JPzSXzP3ATgAAAAAAAAFbbt1UUrOQ9FpC4/UwK6aaqtU+DAAAAAAAAAAAAAAA4lKMIuUmoxWrb4ARNx3R3q2rLpa4Sl0y/YCcAAAAAAAAAAANmFud7G8r89r6X0dgFvGzLGRGtuWvTF6NAdwAAAAAAAAAAAy5W442PVN+K59EePp5ARMvOv5MvO6QXCC4AZwAAAAAAAAAAAAAcxlKLUotprg1owN+PvORborq+7Hnwl3gUbO74VzRydt8pKn68ANcJwmqwkpLmnUDkAAAAfNy9atqtyagut0AxXt5xIV8Fbj6lRd7Am5G65V6qUvtwfyx94GMAAAAAAAAAAAAAAAAAAAOU2nVOj5gdsc3LiqRvTpyqwOxbnnrhdfpSfrQB7pnv/AGvuS9gHXPMy5/Fem1yq0v0A6W29XqwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z"},clickHandler:function(){this.$emit("click",this.name)}}};e.default=n},3688:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("9fcb")),n={name:"u-modal",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{loading:!1}},watch:{show:function(t){t&&this.loading&&(this.loading=!1)}},methods:{confirmHandler:function(){this.asyncClose&&(this.loading=!0),this.$emit("confirm")},cancelHandler:function(){this.$emit("cancel")},clickHandler:function(){this.closeOnClickOverlay&&this.$emit("close")}}};e.default=n},"390b":function(t,e,a){"use strict";var i=a("3944"),r=a.n(i);r.a},3916:function(t,e,a){a("bf0f"),a("2797"),a("e966"),a("7a76"),a("c9b5");var i=a("5335"),r=a("a12b"),n=a("db0b"),s=a("ada7"),o=a("9674"),h=i.getBCHDigit(7973);function l(t,e){return s.getCharCountIndicator(t,e)+4}function u(t,e){var a=0;return t.forEach((function(t){var i=l(t.mode,e);a+=i+t.getBitsLength()})),a}e.from=function(t,e){return o.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,a){if(!o.isValid(t))throw new Error("Invalid QR Code version");"undefined"===typeof a&&(a=s.BYTE);var n=i.getSymbolTotalCodewords(t),h=r.getTotalCodewordsCount(t,e),u=8*(n-h);if(a===s.MIXED)return u;var c=u-l(a,t);switch(a){case s.NUMERIC:return Math.floor(c/10*3);case s.ALPHANUMERIC:return Math.floor(c/11*2);case s.KANJI:return Math.floor(c/13);case s.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,a){var i,r=n.from(a,n.M);if(Array.isArray(t)){if(t.length>1)return function(t,a){for(var i=1;i<=40;i++){var r=u(t,i);if(r<=e.getCapacity(i,a,s.MIXED))return i}}(t,r);if(0===t.length)return 1;i=t[0]}else i=t;return function(t,a,i){for(var r=1;r<=40;r++)if(a<=e.getCapacity(r,i,t))return r}(i.mode,i.getLength(),r)},e.getEncodedBits=function(t){if(!o.isValid(t)||t<7)throw new Error("Invalid QR Code version");var e=t<<12;while(i.getBCHDigit(e)-h>=0)e^=7973<<i.getBCHDigit(e)-h;return t<<12|e}},3944:function(t,e,a){var i=a("b153");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("4b1457f8",i,!0,{sourceMap:!1,shadowMode:!1})},"3b33":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.typeFilter=e.type=e.setDataValue=e.realName=e.rawData=e.objSet=e.objGet=e.name2arr=e.isRequiredField=e.isRealName=e.isNumber=e.isEqual=e.isBoolean=e.getValue=e.getDataValueType=e.getDataValue=e.deepCopy=void 0;var r=i(a("fcf3"));a("d4b5"),a("aa77"),a("bf0f"),a("64aa"),a("473f"),a("5c47"),a("0506"),a("a1c1"),a("fd3c"),a("7f48"),a("c9b5"),a("ab80");e.deepCopy=function(t){return JSON.parse(JSON.stringify(t))};var n=function(t){return"int"===t||"double"===t||"number"===t||"timestamp"===t};e.typeFilter=n;e.getValue=function(t,e,a){var i=a.find((function(t){return t.format&&n(t.format)})),r=a.find((function(t){return t.format&&"boolean"===t.format||"bool"===t.format}));return i&&(e=e||0===e?c(Number(e))?Number(e):e:null),r&&(e=!!d(e)&&e),e};e.setDataValue=function(t,e,a){return e[t]=a,a||""};var s=function(t,e){return u(e,t)};e.getDataValue=s;e.getDataValueType=function(t,e){var a=s(t,e);return{type:f(a),value:a}};e.realName=function(t){var e=l(t);if("object"===(0,r.default)(e)&&Array.isArray(e)&&e.length>1){var a=e.reduce((function(t,e){return t+"#".concat(e)}),"_formdata_");return a}return e[0]||t};e.isRealName=function(t){return/^_formdata_#*/.test(t)};e.rawData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=JSON.parse(JSON.stringify(t)),a={};for(var i in e){var r=o(i);h(a,r,e[i])}return a};var o=function(t){var e=t.replace("_formdata_#","");return e=e.split("#").map((function(t){return c(t)?Number(t):t})),e};e.name2arr=o;var h=function(t,e,a){return"object"!==(0,r.default)(t)||l(e).reduce((function(t,e,i,r){return i===r.length-1?(t[e]=a,null):(e in t||(t[e]=/^[0-9]{1,}$/.test(r[i+1])?[]:{}),t[e])}),t),t};function l(t){return Array.isArray(t)?t:t.replace(/\[/g,".").replace(/\]/g,"").split(".")}e.objSet=h;var u=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined",i=l(e),r=i.reduce((function(t,e){return(t||{})[e]}),t);return r&&void 0===r?a:r};e.objGet=u;var c=function(t){return!isNaN(Number(t))};e.isNumber=c;var d=function(t){return"boolean"===typeof t};e.isBoolean=d;e.isRequiredField=function(t){for(var e=!1,a=0;a<t.length;a++){var i=t[a];if(i.required){e=!0;break}}return e};var f=function(t){var e={};return"Boolean Number String Function Array Date RegExp Object Error".split(" ").map((function(t,a){e["[object "+t+"]"]=t.toLowerCase()})),null==t?t+"":"object"===(0,r.default)(t)||"function"===typeof t?e[Object.prototype.toString.call(t)]||"object":(0,r.default)(t)};e.type=f;e.isEqual=function(t,e){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;var a=toString.call(t),i=toString.call(e);if(a!==i)return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("[object Object]"==a){var r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertyNames(e);if(r.length!=n.length)return!1;for(var s=0;s<r.length;s++){var o=r[s];if(t[o]!==e[o])return!1}return!0}return"[object Array]"==a?t.toString()==e.toString():void 0}},"3cda":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={"u-Input":a("2354").default,uInput:a("01ce").default,"u-Text":a("882c").default,"u-Textarea":a("0e68").default,uPicker:a("3090").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"black"==t.$store.state.bgColor?"blacks":"whiles"},["black"==t.$store.state.bgColor?a("v-uni-view",{staticStyle:{height:"10px",background:"#1A1C24"}}):t._e(),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"background: #22252F;width: 95%;color:#fff;margin:0 auto; display: flex; flex-direction: column; justify-content: center; align-items: center;":"width: 95%;margin:0 auto; display: flex; flex-direction: column; justify-content: center; align-items: center;"},[a("v-uni-view",{staticStyle:{height:"25px"}}),a("v-uni-view",{staticClass:"scroll-view"},t._l(t.navsList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"scroll-item",class:t.tabIndex===i?"scroll-items":"scroll-item",attrs:{id:"tab"+i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changesTabs(i)}}},[t._v(t._s(e))])})),1),a("v-uni-swiper",{style:"height:"+t.scrollH+"px;overflow: hidden;width:95%;padding-left:15px",attrs:{duration:150,current:t.tabIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeTab.apply(void 0,arguments)}}},[a("v-uni-swiper-item",[a("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":"true","enable-flex":"true"}},[a("v-uni-view",{ref:"ulists0",staticStyle:{width:"95%"}},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%","margin-bottom":"10px","margin-top":"25px"}},[a("v-uni-view",{staticStyle:{"font-size":"15px","font-weight":"bold",width:"30%"}},[t._v(t._s(t.i18n.currency))]),a("v-uni-view",{staticStyle:{width:"50%","margin-top":"15px"}},[a("el-select",{staticStyle:{height:"25px"},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}},t._l(t.columns,(function(e){return a("el-option",{key:e.id,attrs:{label:e.agreement,value:e.agreement},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirm(e)}}})})),1)],1)],1),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%","margin-bottom":"10px"}},[a("v-uni-view",{staticStyle:{"font-size":"15px","font-weight":"bold",width:"30%"}},[t._v(t._s(t.i18n.withdrawal_adress))]),a("v-uni-view",{staticStyle:{width:"50%","margin-top":"15px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dshows=!0}}},[a("el-select",{staticStyle:{height:"25px"},model:{value:t.tbvalues,callback:function(e){t.tbvalues=e},expression:"tbvalues"}},t._l(t.walletAddress,(function(e){return a("el-option",{key:e.id,attrs:{label:e.account,value:e.account},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirm(e)}}})})),1)],1)],1),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%","margin-bottom":"10px"}},[a("v-uni-view",{staticStyle:{"font-size":"15px","font-weight":"bold",width:"30%"}},[t._v(t._s(t.i18n.number_of_withdrawal))]),a("v-uni-view",{staticStyle:{width:"50%","margin-top":"15px"}},[a("el-input",{attrs:{border:"none",placeholder:t.i18n.number_of_withdrawal,type:"number"},model:{value:t.cnumber,callback:function(e){t.cnumber=e},expression:"cnumber"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%","margin-bottom":"10px"}},[a("v-uni-view",{staticStyle:{"font-size":"15px","font-weight":"bold",width:"30%"}},[t._v(t._s(t.i18n.remarks))]),a("v-uni-view",{staticStyle:{width:"70%"}},[a("el-input",{attrs:{type:"textarea",placeholder:t.i18n.remarks},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)],1),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"display: flex; flex-direction: column; background: #333748; align-items: center; width: 100%; font-size: 12px; margin-top: 15px; color: #6D6F7C;":"display: flex; flex-direction: column; background: #F7F9FE; align-items: center; width: 100%; font-size: 12px; margin-top: 15px; color: #6D6F7C;"},[a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.hand_fee))]),a("v-uni-text",[t._v(t._s(t.rateses))])],1),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.estimated_amount))]),a("v-uni-text",[t._v(t._s(t.jbnumber)+" USD")])],1),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px","margin-bottom":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.balance))]),a("v-uni-text",[t._v(t._s(t.users.usdt)+" USD")])],1)],1),a("v-uni-view",{staticStyle:{width:"100%"}},[a("v-uni-button",{staticClass:"submit-btn",attrs:{loading:t.loading,disabled:t.disableds,loadingText:"",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tsubmit()}}},[t._v(t._s(t.i18n.withdrawal_))])],1)],1)],1)],1),a("v-uni-swiper-item",[a("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":"true","enable-flex":"true"}},[a("v-uni-view",{ref:"ulists1",staticStyle:{width:"95%"}},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"25px"}},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.currency))]),"while"==t.$store.state.bgColor?a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.yhshows=!0}}},[a("u--input",{staticStyle:{height:"33px"},attrs:{disabled:!0,disabledColor:"#ffffff",placeholder:"",inputAlign:"left",suffixIcon:"arrow-right",suffixIconStyle:"color: #909399;font-size:16px;font-weight: bold;"},model:{value:t.cjyhvalues.name,callback:function(e){t.$set(t.cjyhvalues,"name",e)},expression:"cjyhvalues.name"}})],1):t._e()],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"20px"}},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.reipient_account))]),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.yhdshows=!0}}},[a("u-input",{staticStyle:{height:"25px"},attrs:{disabled:!0,disabledColor:"#ffffff",placeholder:"",inputAlign:"left",suffixIcon:"arrow-right",suffixIconStyle:"color: #909399;font-size:16px;font-weight: bold;"},model:{value:t.yhtbvalues,callback:function(e){t.yhtbvalues=e},expression:"yhtbvalues"}},[a("u--text",{attrs:{slot:"prefix",text:t.yhnames,margin:"0 3px 0 0",type:"tips"},slot:"prefix"})],1)],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"20px"}},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.number_of_withdrawal))]),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"}},[a("u--input",{attrs:{placeholder:t.i18n.number_of_withdrawal,type:"number"},model:{value:t.yhcnumber,callback:function(e){t.yhcnumber=e},expression:"yhcnumber"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"20px"}},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.remarks))]),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"}},[a("u--textarea",{attrs:{maxlength:t.maxNumber,placeholder:"",count:!0},model:{value:t.yhremarks,callback:function(e){t.yhremarks=e},expression:"yhremarks"}})],1)],1),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"display: flex; flex-direction: column; background: #333748; align-items: center; width: 100%; font-size: 12px; margin-top: 15px; color: #6D6F7C;":"display: flex; flex-direction: column; background: #F7F9FE; align-items: center; width: 100%; font-size: 12px; margin-top: 15px; color: #6D6F7C;"},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"90%",color:"#222222","margin-top":"13px"}},[t._v(t._s(t.i18n.details))]),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.hand_fee))]),a("v-uni-text",[t._v(t._s(t.yhrateses))])],1),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.estimated_amount))]),a("v-uni-text",[t._v(t._s(t.yhsnumber)+" USD")])],1),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"90%","margin-top":"13px","margin-bottom":"13px"}},[a("v-uni-text",[t._v(t._s(t.i18n.balance))]),a("v-uni-text",[t._v(t._s(t.users.usdt)+" USD")])],1)],1),a("v-uni-view",{staticStyle:{width:"100%"}},[a("v-uni-button",{staticStyle:{background:"#3F47F4","margin-top":"20px",border:"0","font-size":"12px",height:"55px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loading:t.loading,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.yhtsubmit()}}},[t._v(t._s(t.i18n.withdrawal_))])],1)],1)],1)],1)],1)],1),"black"==t.$store.state.bgColor?a("u-picker",{ref:"yhuPicker",staticClass:"bnsss",staticStyle:{"border-radius":"18px",background:"#222"},attrs:{show:t.yhshows,itemHeight:100,defaultIndex:t.yhdfindex,columns:t.yhcolumns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.yhcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.yhconfirm.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?a("u-picker",{ref:"yhuPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.yhshows,itemHeight:100,defaultIndex:t.yhdfindex,columns:t.yhcolumns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.yhcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.yhconfirm.apply(void 0,arguments)}}}):t._e(),"black"==t.$store.state.bgColor?a("u-picker",{ref:"uPicker",staticClass:"bnsss",staticStyle:{"border-radius":"18px",background:"#222"},attrs:{show:t.shows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?a("u-picker",{ref:"uPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.shows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}}):t._e(),"black"==t.$store.state.bgColor?a("u-picker",{ref:"duPicker",staticClass:"bnsss",staticStyle:{"border-radius":"18px",background:"#222"},attrs:{show:t.dshows,itemHeight:100,defaultIndex:t.ddfindex,columns:t.walletAddress,keyName:"account"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.dcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.dconfirm.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?a("u-picker",{ref:"duPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.dshows,itemHeight:100,defaultIndex:t.ddfindex,columns:t.walletAddress,keyName:"account"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.dcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.dconfirm.apply(void 0,arguments)}}}):t._e(),"black"==t.$store.state.bgColor?a("u-picker",{ref:"yhduPicker",staticClass:"bnsss",staticStyle:{"border-radius":"18px",background:"#222"},attrs:{show:t.yhdshows,itemHeight:100,defaultIndex:t.yhddfindex,columns:t.yhwalletAddress,keyName:"account"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.yhdcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.yhdconfirm.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?a("u-picker",{ref:"yhduPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.yhdshows,itemHeight:100,defaultIndex:t.yhddfindex,columns:t.yhwalletAddress,keyName:"account"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.yhdcancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.yhdconfirm.apply(void 0,arguments)}}}):t._e()],1)},n=[]},"3dd3":function(t,e,a){"use strict";a.r(e);var i=a("1c23"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"3f83":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("uvText",{attrs:{type:t.type,show:t.show,text:t.text,prefixIcon:t.prefixIcon,suffixIcon:t.suffixIcon,mode:t.mode,href:t.href,format:t.format,call:t.call,openType:t.openType,bold:t.bold,block:t.block,lines:t.lines,color:t.color,decoration:t.decoration,size:t.size,iconStyle:t.iconStyle,margin:t.margin,lineHeight:t.lineHeight,align:t.align,wordWrap:t.wordWrap,customStyle:t.customStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("click")}}})},r=[]},"40c1":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("cb6e")),n=i(a("d7b0")),s=i(a("8653")),o={en:r.default,"zh-Hans":n.default,"zh-Hant":s.default};e.default=o},"41d1":function(t,e,a){var i=a("fe7e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("24ef7a2f",i,!0,{sourceMap:!1,shadowMode:!1})},"42c5":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uCode:a("861a").default,uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"black"==t.$store.state.bgColor?"blacks":"whiles"},[a("v-uni-view",{staticStyle:{height:"15px"}}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"bheight: 430px;background: #22252F;color: #ffffff;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;":"bheight: 430px;background: #FFFFFF;;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;"},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"0px"}},[a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:t.types,placeholder:t.i18n.enter_new_password,"show-password":!0},model:{value:t.passwords,callback:function(e){t.passwords=e},expression:"passwords"}})],1)],1),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"-5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"1px"}},[a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:t.types,placeholder:t.i18n.enter_new_password_again,"show-password":!0},model:{value:t.confirmpasswords,callback:function(e){t.confirmpasswords=e},expression:"confirmpasswords"}})],1)],1)],1),a("v-uni-view",{staticClass:"wrap",staticStyle:{"margin-top":"0px"}},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-bottom":"0px"}}),a("el-input",{attrs:{placeholder:t.i18n.enter_vercode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[a("template",{slot:"append"},[a("u-code",{ref:"uCode",attrs:{seconds:"60",changeText:"X"+t.i18n.get_ver_code},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),a("u-button",{attrs:{text:t.tips,size:"normal"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}})],1)],2),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"30px"}},[a("u-button",{staticStyle:{background:"var(--mainColor)","margin-top":"20px",border:"0","font-size":"12px",height:"45px","border-radius":"30px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loading:t.loading,loadingText:"......",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obuttons()}}},[t._v(t._s(t.$t("order.modify")))])],1)],1)],1)],1)},n=[]},"43ab":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniForms:a("cb0f").default,"u-Input":a("2354").default,uniEasyinput:a("f5b2").default,uInput:a("01ce").default,uCode:a("861a").default,uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.registerSwitch?t._e():a("div",{staticClass:"uni-scroll-view-content"},[a("v-uni-view",{staticStyle:{width:"100%",margin:"0 auto",padding:"10rpx 0 10px 0","text-align":"center","font-size":"18px"}},[a("v-uni-view",[t._v(t._s(t.i18n.welcome_register))])],1),a("uni-forms",{attrs:{modelValue:t.formData}},[a("v-uni-view",{staticStyle:{opacity:"1",width:"90%",margin:"0 auto"}},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text",staticStyle:{color:"#0166fc","font-weight":"600"}},[t._v(t._s(t.i18n.enter_email))]),a("u--input",{staticClass:"inps",attrs:{placeholder:t.i18n.enter_email,type:"text"},model:{value:t.usestring,callback:function(e){t.usestring=e},expression:"usestring"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.pwd))]),a("uni-easyinput",{staticClass:"uni-mt-5 br_55",attrs:{type:t.types,passwordIcon:!1,suffixIcon:t.suffixIcon,placeholder:t.i18n.enter_password},on:{iconClick:function(e){arguments[0]=e=t.$handleEvent(e),t.suffix.apply(void 0,arguments)}},model:{value:t.passwords,callback:function(e){t.passwords=e},expression:"passwords"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.enter_password_again))]),a("uni-easyinput",{staticClass:"uni-mt-5 br_55",attrs:{type:t.confirmtypes,passwordIcon:!1,suffixIcon:t.confirmsuffixIcon,placeholder:t.i18n.enter_password_again},on:{iconClick:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmsuffix.apply(void 0,arguments)}},model:{value:t.confirmpasswords,callback:function(e){t.confirmpasswords=e},expression:"confirmpasswords"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"10px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n2.invitation_code))]),a("u--input",{staticClass:"inps",attrs:{placeholder:t.i18n.enter_invite_code,type:"text"},model:{value:t.invitecode,callback:function(e){t.invitecode=e},expression:"invitecode"}})],1)],1)],1),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-bottom":"15px"}}),a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.enter_vercode))]),a("u-input",{staticClass:"inps",staticStyle:{padding:"10px !important"},attrs:{placeholder:t.i18n.enter_vercode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[a("template",{slot:"suffix"},[a("u-code",{ref:"uCode",attrs:{seconds:"60",changeText:"X"+t.i18n.get_ver_code},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),a("u-button",{staticClass:"my_u_button",attrs:{text:t.tips,size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}})],1)],2),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"15px",padding:"0 3px"}},[a("v-uni-view",{staticStyle:{color:"#9F9F9F","font-size":"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendData.apply(void 0,arguments)}}},[t._v(t._s(t.i18nReset.have_account)),a("v-uni-text",{staticStyle:{color:"#537efd","font-weight":"bold","font-size":"15px","padding-left":"10px"}},[t._v(t._s(t.i18n.sign_in))])],1)],1)],1),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"40px",height:"45px","padding-bottom":"20px"}},[a("u-button",{staticStyle:{"border-radius":"45px",background:"#0166fc","margin-top":"0px",border:"0","font-size":"14px",height:"45px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loading:t.loading,loadingText:"......",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obuttons()}}},[t._v(t._s(t.i18n.register))])],1)],1)],1)],1)],1),t.registerSwitch?a("loginComponent",{staticStyle:{height:"480px"}}):t._e()],1)},n=[]},"43bd":function(t,e,a){var i=a("068b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("c781c872",i,!0,{sourceMap:!1,shadowMode:!1})},"43c8":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uList:a("1bd6").default,uListItem:a("5023").default,uCell:a("06fd").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"black"==t.$store.state.bgColor?"blacks":"whiles"},[a("u-list",{staticClass:"sfds",staticStyle:{width:"100%","margin-top":"10px","font-weight":"bold"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower.apply(void 0,arguments)}}},[t._l(t.indexList,(function(e,i){return a("u-list-item",{key:i,staticStyle:{"padding-right":"20px"}},[a("u-cell",[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px 0"},attrs:{slot:"title"},slot:"title"},[a("v-uni-view",{staticStyle:{display:"flex"}},[a("v-uni-text",{staticClass:"u-cell-text",staticStyle:{flex:"1","justify-content":"center","text-align":"left","padding-left":"12px","font-size":"12px"}},[a("v-uni-text",{staticStyle:{"font-weight":"1","margin-right":"10px",color:"#AFAFAF"}},[t._v(t._s(t.i18n.quantity))]),t._v(t._s(e.value))],1)],1),a("v-uni-view",{staticStyle:{display:"flex","font-size":"12px","padding-left":"12px","text-align":"left","margin-top":"15px"}},[a("v-uni-text",{staticClass:"u-cell-text",staticStyle:{display:"block","margin-right":"10px",color:"#AFAFAF"}},[t._v(t._s(t.i18n.time))]),a("v-uni-text",{},[t._v(t._s(e.created_time))])],1),a("v-uni-view",{staticStyle:{display:"flex","font-size":"12px","padding-left":"12px","text-align":"left","margin-top":"15px"}},[a("v-uni-text",{staticClass:"u-cell-text",staticStyle:{"font-size":"12px"}},[a("v-uni-text",{staticStyle:{color:"#AFAFAF","margin-right":"10px"}},[t._v(t._s(t.i18n.record))]),t._v(t._s(e.info))],1)],1)],1)],1)],1)})),a("v-uni-view",{staticStyle:{width:"100%",height:"35px",display:"flex","justify-content":"center","padding-top":"10px",color:"#AFAFAF"}},[a("v-uni-text",[t._v(t._s(t.loding))])],1)],2)],1)},n=[]},"445b":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"u-list",style:[t.listStyle],attrs:{"scroll-into-view":t.scrollIntoView,"scroll-y":!0,"scroll-top":Number(t.scrollTop),"lower-threshold":Number(t.lowerThreshold),"upper-threshold":Number(t.upperThreshold),"show-scrollbar":t.showScrollbar,"enable-back-to-top":t.enableBackToTop,"scroll-with-animation":t.scrollWithAnimation},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower.apply(void 0,arguments)},scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltoupper.apply(void 0,arguments)}}},[a("v-uni-view",[t._t("default")],2)],1)},r=[]},"44d8":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.langs=void 0;e.langs=[{name:"English",img:"../../static/l1.png",value:"en"},{name:"日本語",img:"../../static/l2.png",value:"jp"},{name:"한국어",img:"../../static/l3.png",value:"kor"},{name:"繁体中文",img:"../../static/l4.png",value:"zh"},{name:"ไทย",img:"../../static/l5.png",value:"th"},{name:"Tiếng Việt",img:"../../static/l6.png",value:"vie"},{name:"français",img:"../../static/l7.png",value:"fre"},{name:"Deutsche",img:"../../static/l8.png",value:"ger"},{name:"Русский язык",img:"../../static/l9.png",value:"rus"},{name:"Español",img:"../../static/l10.png",value:"spa"},{name:"Português",img:"../../static/l11.png",value:"por"},{name:"Italiano",img:"../../static/l12.png",value:"Ita"},{name:"عربي",img:"../../static/l13.png",value:"ara"},{name:"Türkçe",img:"../../static/l14.png",value:"tur"}]},4573:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-popup[data-v-3193bb52]{position:fixed;z-index:99}.uni-popup.top[data-v-3193bb52], .uni-popup.left[data-v-3193bb52], .uni-popup.right[data-v-3193bb52]{top:var(--window-top)}.uni-popup .uni-popup__wrapper[data-v-3193bb52]{display:block;position:relative\n  /* iphonex 等安全区设置，底部安全区适配 */}.uni-popup .uni-popup__wrapper.left[data-v-3193bb52], .uni-popup .uni-popup__wrapper.right[data-v-3193bb52]{padding-top:var(--window-top);flex:1}.fixforpc-z-index[data-v-3193bb52]{z-index:999}.fixforpc-top[data-v-3193bb52]{top:0}',""]),t.exports=e},"45e3":function(t,e,a){a("f7a5"),a("7a76"),a("c9b5"),a("bf0f"),a("ab80");var i=a("db2f"),r=a("f5a6"),n=a("6e88"),s=a("6289");function o(t,e,a,n,s){var o=[].slice.call(arguments,1),h=o.length,l="function"===typeof o[h-1];if(!l&&!i())throw new Error("Callback required as last argument");if(!l){if(h<1)throw new Error("Too few arguments provided");return 1===h?(a=e,e=n=void 0):2!==h||e.getContext||(n=a,a=e,e=void 0),new Promise((function(i,s){try{var o=r.create(a,n);i(t(o,e,n))}catch(h){s(h)}}))}if(h<2)throw new Error("Too few arguments provided");2===h?(s=a,a=e,e=n=void 0):3===h&&(e.getContext&&"undefined"===typeof s?(s=n,n=void 0):(s=n,n=a,a=e,e=void 0));try{var u=r.create(a,n);s(null,t(u,e,n))}catch(c){s(c)}}e.create=r.create,e.toCanvas=o.bind(null,n.render),e.toDataURL=o.bind(null,n.renderToDataURL),e.toString=o.bind(null,(function(t,e,a){return s.render(t,a)}))},"45e3d":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("acb1")),n=i(a("cad9")),s=i(a("2634")),o=i(a("2fdc")),h=i(a("80b1")),l=i(a("efe5")),u=i(a("fcf3"));a("23f4"),a("7d2f"),a("5c47"),a("9c4e"),a("ab80"),a("bf0f"),a("a1c1"),a("dc8a"),a("e966"),a("c9b5"),a("2c10"),a("0506"),a("9db6"),a("bd06"),a("f3f7"),a("18f7"),a("de6c"),a("c223"),a("5ef2"),a("aa9c"),a("8f71"),a("d4b5");var c={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")},d={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=["label"];a.forEach((function(e){void 0===t[e]&&(t[e]="")}));var i=e;for(var r in t){var n=new RegExp("{"+r+"}");i=i.replace(n,t[r])}return i}var C={integer:function(t){return C.number(t)&&parseInt(t,10)===t},string:function(t){return"string"===typeof t},number:function(t){return!isNaN(t)&&"number"===typeof t},boolean:function(t){return"boolean"===typeof t},float:function(t){return C.number(t)&&!C.integer(t)},array:function(t){return Array.isArray(t)},object:function(t){return"object"===(0,u.default)(t)&&!C.array(t)},date:function(t){return t instanceof Date},timestamp:function(t){return!(!this.integer(t)||Math.abs(t).toString().length>16)},file:function(t){return"string"===typeof t.url},email:function(t){return"string"===typeof t&&!!t.match(c.email)&&t.length<255},url:function(t){return"string"===typeof t&&!!t.match(c.url)},pattern:function(t,e){try{return new RegExp(t).test(e)}catch(a){return!1}},method:function(t){return"function"===typeof t},idcard:function(t){return"string"===typeof t&&!!t.match(c.idcard)},"url-https":function(t){return this.url(t)&&t.startsWith("https://")},"url-scheme":function(t){return t.startsWith("://")},"url-web":function(t){return!1}},m=function(){function t(e){(0,h.default)(this,t),this._message=e}return(0,l.default)(t,[{key:"validateRule",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a,i,r,n){var o,h,l,u,c,d,f,C,m;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=null,h=a.rules,l=h.findIndex((function(t){return t.required})),!(l<0)){t.next=8;break}if(null!==i&&void 0!==i){t.next=6;break}return t.abrupt("return",o);case 6:if("string"!==typeof i||i.length){t.next=8;break}return t.abrupt("return",o);case 8:if(u=this._message,void 0!==h){t.next=11;break}return t.abrupt("return",u["default"]);case 11:c=0;case 12:if(!(c<h.length)){t.next=35;break}if(d=h[c],f=this._getValidateType(d),Object.assign(d,{label:a.label||'["'.concat(e,'"]')}),!D[f]){t.next=20;break}if(o=D[f](d,i,u),null==o){t.next=20;break}return t.abrupt("break",35);case 20:if(!d.validateExpr){t.next=26;break}if(C=Date.now(),m=d.validateExpr(i,n,C),!1!==m){t.next=26;break}return o=this._getMessage(d,d.errorMessage||this._message["default"]),t.abrupt("break",35);case 26:if(!d.validateFunction){t.next=32;break}return t.next=29,this.validateFunction(d,i,r,n,f);case 29:if(o=t.sent,null===o){t.next=32;break}return t.abrupt("break",35);case 32:c++,t.next=12;break;case 35:return null!==o&&(o=u.TAG+o),t.abrupt("return",o);case 37:case"end":return t.stop()}}),t,this)})));return function(e,a,i,r,n){return t.apply(this,arguments)}}()},{key:"validateFunction",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a,i,r,n){var o,h,l;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=null,t.prev=1,h=null,t.next=5,e.validateFunction(e,a,r||i,(function(t){h=t}));case 5:l=t.sent,(h||"string"===typeof l&&l||!1===l)&&(o=this._getMessage(e,h||l,n)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),o=this._getMessage(e,t.t0.message,n);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,a,i,r,n){return t.apply(this,arguments)}}()},{key:"_getMessage",value:function(t,e,a){return f(t,e||t.errorMessage||this._message[a]||e["default"])}},{key:"_getValidateType",value:function(t){var e="";return t.required?e="required":t.format?e="format":t.arrayType?e="arrayTypeFormat":t.range?e="range":void 0!==t.maximum||void 0!==t.minimum?e="rangeNumber":void 0!==t.maxLength||void 0!==t.minLength?e="rangeLength":t.pattern?e="pattern":t.validateFunction&&(e="validateFunction"),e}}]),t}(),D={required:function(t,e,a){return t.required&&function(t,e){return void 0===t||null===t||("string"===typeof t&&!t||(!(!Array.isArray(t)||t.length)||"object"===e&&!Object.keys(t).length))}(e,t.format||(0,u.default)(e))?f(t,t.errorMessage||a.required):null},range:function(t,e,a){for(var i=t.range,r=t.errorMessage,n=new Array(i.length),s=0;s<i.length;s++){var o=i[s];C.object(o)&&void 0!==o.value?n[s]=o.value:n[s]=o}var h=!1;return Array.isArray(e)?h=new Set(e.concat(n)).size===n.length:n.indexOf(e)>-1&&(h=!0),h?null:f(t,r||a["enum"])},rangeNumber:function(t,e,a){if(!C.number(e))return f(t,t.errorMessage||a.pattern.mismatch);var i=t.minimum,r=t.maximum,n=t.exclusiveMinimum,s=t.exclusiveMaximum,o=n?e<=i:e<i,h=s?e>=r:e>r;return void 0!==i&&o?f(t,t.errorMessage||a["number"][n?"exclusiveMinimum":"minimum"]):void 0!==r&&h?f(t,t.errorMessage||a["number"][s?"exclusiveMaximum":"maximum"]):void 0!==i&&void 0!==r&&(o||h)?f(t,t.errorMessage||a["number"].range):null},rangeLength:function(t,e,a){if(!C.string(e)&&!C.array(e))return f(t,t.errorMessage||a.pattern.mismatch);var i=t.minLength,r=t.maxLength,n=e.length;return void 0!==i&&n<i?f(t,t.errorMessage||a["length"].minLength):void 0!==r&&n>r?f(t,t.errorMessage||a["length"].maxLength):void 0!==i&&void 0!==r&&(n<i||n>r)?f(t,t.errorMessage||a["length"].range):null},pattern:function(t,e,a){return C["pattern"](t.pattern,e)?null:f(t,t.errorMessage||a.pattern.mismatch)},format:function(t,e,a){var i=Object.keys(C),r=d[t.format]?d[t.format]:t.format||t.arrayType;return i.indexOf(r)>-1&&!C[r](e)?f(t,t.errorMessage||a.typeError):null},arrayTypeFormat:function(t,e,a){if(!Array.isArray(e))return f(t,t.errorMessage||a.typeError);for(var i=0;i<e.length;i++){var r=e[i],n=this.format(t,r,a);if(null!==n)return n}return null}},p=function(t){(0,r.default)(a,t);var e=(0,n.default)(a);function a(t,i){var r;return(0,h.default)(this,a),r=e.call(this,a.message),r._schema=t,r._options=i||null,r}return(0,l.default)(a,[{key:"updateSchema",value:function(t){this._schema=t}},{key:"validate",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a){var i;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this._checkFieldInSchema(e),i){t.next=5;break}return t.next=4,this.invokeValidate(e,!1,a);case 4:i=t.sent;case 5:return t.abrupt("return",i.length?i[0]:null);case 6:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"validateAll",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a){var i;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this._checkFieldInSchema(e),i){t.next=5;break}return t.next=4,this.invokeValidate(e,!0,a);case 4:i=t.sent;case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"validateUpdate",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a){var i;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this._checkFieldInSchema(e),i){t.next=5;break}return t.next=4,this.invokeValidateUpdate(e,!1,a);case 4:i=t.sent;case 5:return t.abrupt("return",i.length?i[0]:null);case 6:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"invokeValidate",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a,i){var r,n,o,h,l;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],n=this._schema,t.t0=(0,s.default)().keys(n);case 3:if((t.t1=t.t0()).done){t.next=15;break}return o=t.t1.value,h=n[o],t.next=8,this.validateRule(o,h,e[o],e,i);case 8:if(l=t.sent,null==l){t.next=13;break}if(r.push({key:o,errorMessage:l}),a){t.next=13;break}return t.abrupt("break",15);case 13:t.next=3;break;case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,this)})));return function(e,a,i){return t.apply(this,arguments)}}()},{key:"invokeValidateUpdate",value:function(){var t=(0,o.default)((0,s.default)().mark((function t(e,a,i){var r,n,o;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],t.t0=(0,s.default)().keys(e);case 2:if((t.t1=t.t0()).done){t.next=13;break}return n=t.t1.value,t.next=6,this.validateRule(n,this._schema[n],e[n],e,i);case 6:if(o=t.sent,null==o){t.next=11;break}if(r.push({key:n,errorMessage:o}),a){t.next=11;break}return t.abrupt("break",13);case 11:t.next=2;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t,this)})));return function(e,a,i){return t.apply(this,arguments)}}()},{key:"_checkFieldInSchema",value:function(t){var e=Object.keys(t),i=Object.keys(this._schema);if(new Set(e.concat(i)).size===i.length)return"";var r=e.filter((function(t){return i.indexOf(t)<0})),n=f({field:JSON.stringify(r)},a.message.TAG+a.message["defaultInvalid"]);return[{key:"invalid",errorMessage:n}]}}]),a}(m);p.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};var v=p;e.default=v},"45fb":function(t,e,a){t.exports=a.p+"static/notAvailable.png"},4681:function(t,e,a){var i=a("9cb8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("11bfd33e",i,!0,{sourceMap:!1,shadowMode:!1})},4733:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,i.default)(t)};var i=function(t){return t&&t.__esModule?t:{default:t}}(a("8d0b"))},"47d8":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{value:{type:[String,Number],default:uni.$u.props.textarea.value},placeholder:{type:[String,Number],default:uni.$u.props.textarea.placeholder},placeholderClass:{type:String,default:uni.$u.props.input.placeholderClass},placeholderStyle:{type:[String,Object],default:uni.$u.props.input.placeholderStyle},height:{type:[String,Number],default:uni.$u.props.textarea.height},confirmType:{type:String,default:uni.$u.props.textarea.confirmType},disabled:{type:Boolean,default:uni.$u.props.textarea.disabled},count:{type:Boolean,default:uni.$u.props.textarea.count},focus:{type:Boolean,default:uni.$u.props.textarea.focus},autoHeight:{type:Boolean,default:uni.$u.props.textarea.autoHeight},fixed:{type:Boolean,default:uni.$u.props.textarea.fixed},cursorSpacing:{type:Number,default:uni.$u.props.textarea.cursorSpacing},cursor:{type:[String,Number],default:uni.$u.props.textarea.cursor},showConfirmBar:{type:Boolean,default:uni.$u.props.textarea.showConfirmBar},selectionStart:{type:Number,default:uni.$u.props.textarea.selectionStart},selectionEnd:{type:Number,default:uni.$u.props.textarea.selectionEnd},adjustPosition:{type:Boolean,default:uni.$u.props.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:uni.$u.props.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:uni.$u.props.textarea.holdKeyboard},maxlength:{type:[String,Number],default:uni.$u.props.textarea.maxlength},border:{type:String,default:uni.$u.props.textarea.border},formatter:{type:[Function,null],default:uni.$u.props.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}};e.default=i},"49b5":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa"),a("5c47"),a("a1c1");var r=i(a("b6d0")),n={name:"u-code",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{secNum:this.seconds,timer:null,canGetCode:!0}},mounted:function(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler:function(t){this.secNum=t}}},methods:{checkKeepRunning:function(){var t=Number(uni.getStorageSync(this.uniqueKey+"_$uCountDownTimestamp"));if(!t)return this.changeEvent(this.startText);var e=Math.floor(+new Date/1e3);this.keepRunning&&t&&t>e?(this.secNum=t-e,uni.removeStorageSync(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startText)},start:function(){var t=this;this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeText.replace(/x|X/,this.secNum)),this.timer=setInterval((function(){--t.secNum?t.changeEvent(t.changeText.replace(/x|X/,t.secNum)):(clearInterval(t.timer),t.timer=null,t.changeEvent(t.endText),t.secNum=t.seconds,t.$emit("end"),t.canGetCode=!0)}),1e3),this.setTimeToStorage()},reset:function(){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(this.endText)},changeEvent:function(t){this.$emit("change",t)},setTimeToStorage:function(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){var t=Math.floor(+new Date/1e3);uni.setStorage({key:this.uniqueKey+"_$uCountDownTimestamp",data:t+Number(this.secNum)})}}},beforeDestroy:function(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}};e.default=n},"4a4b":function(t,e,a){a("e966"),a("7a76"),a("c9b5"),a("dc8a"),e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var i={N1:3,N2:3,N3:40,N4:10};function r(t,a,i){switch(t){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){for(var e=t.size,a=0,r=0,n=0,s=null,o=null,h=0;h<e;h++){r=n=0,s=o=null;for(var l=0;l<e;l++){var u=t.get(h,l);u===s?r++:(r>=5&&(a+=i.N1+(r-5)),s=u,r=1),u=t.get(l,h),u===o?n++:(n>=5&&(a+=i.N1+(n-5)),o=u,n=1)}r>=5&&(a+=i.N1+(r-5)),n>=5&&(a+=i.N1+(n-5))}return a},e.getPenaltyN2=function(t){for(var e=t.size,a=0,r=0;r<e-1;r++)for(var n=0;n<e-1;n++){var s=t.get(r,n)+t.get(r,n+1)+t.get(r+1,n)+t.get(r+1,n+1);4!==s&&0!==s||a++}return a*i.N2},e.getPenaltyN3=function(t){for(var e=t.size,a=0,r=0,n=0,s=0;s<e;s++){r=n=0;for(var o=0;o<e;o++)r=r<<1&2047|t.get(s,o),o>=10&&(1488===r||93===r)&&a++,n=n<<1&2047|t.get(o,s),o>=10&&(1488===n||93===n)&&a++}return a*i.N3},e.getPenaltyN4=function(t){for(var e=0,a=t.data.length,r=0;r<a;r++)e+=t.data[r];var n=Math.abs(Math.ceil(100*e/a/5)-10);return n*i.N4},e.applyMask=function(t,e){for(var a=e.size,i=0;i<a;i++)for(var n=0;n<a;n++)e.isReserved(n,i)||e.xor(n,i,r(t,n,i))},e.getBestMask=function(t,a){for(var i=Object.keys(e.Patterns).length,r=0,n=1/0,s=0;s<i;s++){a(s),e.applyMask(s,t);var o=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),o<n&&(n=o,r=s)}return r}},"4b3f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{anchor:{type:[String,Number],default:uni.$u.props.listItem.anchor}}};e.default=i},"4b5c":function(t,e,a){"use strict";var i=a("c003"),r=a.n(i);r.a},"4b66":function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=r(a("fcf3")),o=r(a("39d8")),h=r(a("3471"));a("c1a3"),a("bf0f"),a("18f7"),a("de6c"),a("23f4"),a("7d2f"),a("5c47"),a("9c4e"),a("ab80"),a("2797"),a("5ef2"),a("af8f"),a("aa9c"),a("e966"),a("a1c1"),a("c223"),a("d4b5"),a("c9b5"),a("15d1"),a("d5c6"),a("5a56"),a("f074"),a("4626"),a("8f71"),a("dd2b"),a("0506"),a("64aa"),a("f7a5"),a("4100"),a("f3f7"),a("1851"),a("dc69"),a("aa77"),a("3efd"),a("d937"),a("2c10"),a("dfcf"),a("e838"),a("dc89"),a("2425"),a("08eb"),a("0c26"),a("7a76"),a("a03a"),a("94d0"),a("20f3");var l={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn},JSTable:{Log:console.log,Warn:console.warn}},u={MINUTE_ID:101,MULTIDAY_MINUTE_ID:102,HISTORY_MINUTE_ID:103,KLINE_DAY_ID:0,KLINE_WEEK_ID:1,KLINE_TWOWEEK_ID:21,KLINE_MONTH_ID:2,KLINE_QUARTER_ID:9,KLINE_YEAR_ID:3,KLINE_MINUTE_ID:4,KLINE_5_MINUTE_ID:5,KLINE_15_MINUTE_ID:6,KLINE_30_MINUTE_ID:7,KLINE_60_MINUTE_ID:8};var c=new function(){this.DataMap=new Map,this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Add=function(t){this.DataMap.set(t.ID,t)}};function d(){this.DataMap=new Map([["MA",this.MA],["均线",this.MA],["MA4",this.MA4],["MA5",this.MA5],["MA6",this.MA6],["MA7",this.MA7],["MA8",this.MA8],["BOLL",this.BOLL],["BOLL副图",this.BOLL2],["BBI",this.BBI],["DKX",this.DKX],["MIKE",this.MIKE],["PBX",this.PBX],["ENE",this.ENE],["MACD",this.MACD],["KDJ",this.KDJ],["MACD2",this.MACD2],["VOL",this.VOL],["VOL_OVERLAY",this.VOL_OVERLAY],["RSI",this.RSI],["BRAR",this.BRAR],["WR",this.WR],["BIAS",this.BIAS],["OBV",this.OBV],["DMI",this.DMI],["CR",this.CR],["PSY",this.PSY],["CCI",this.CCI],["DMA",this.DMA],["TRIX",this.TRIX],["VR",this.VR],["EMV",this.EMV],["ROC",this.ROC],["MTM",this.MTM],["FSL",this.FSL],["CYR",this.CYR],["MASS",this.MASS],["WAD",this.WAD],["CHO",this.CHO],["ADTM",this.ADTM],["HSL",this.HSL],["BIAS36",this.BIAS36],["BIAS_QL",this.BIAS_QL],["DPO",this.DPO],["OSC",this.OSC],["ATR",this.ATR],["NVI",this.NVI],["PVI",this.PVI],["UOS",this.UOS],["CYW",this.CYW],["LON",this.LON],["NDB",this.NDB],["SKDJ",this.SKDJ],["KD",this.KD],["FKX",this.FKX],["DKCOL",this.DKCOL],["UDL",this.UDL],["MFI",this.MFI],["LWR",this.LWR],["MARSI",this.MARSI],["CYD",this.CYD],["CYF",this.CYF],["TAPI",this.TAPI],["VMACD",this.VMACD],["QACD",this.QACD],["VPT",this.VPT],["WVAD",this.WVAD],["DBQR",this.DBQR],["JS",this.JS],["CYE",this.CYE],["QR",this.QR],["GDX",this.GDX],["JLHB",this.JLHB],["PCNT",this.PCNT],["BTX",this.BTX],["AMO",this.AMO],["VRSI",this.VRSI],["HSCOL",this.HSCOL],["DBQRV",this.DBQRV],["DBLB",this.DBLB],["ACD",this.ACD],["EXPMA",this.EXPMA],["EXPMA_S",this.EXPMA_S],["HMA",this.HMA],["LMA",this.LMA],["VMA",this.VMA],["AMV",this.AMV],["BBIBOLL",this.BBIBOLL],["ALLIGAT",this.ALLIGAT],["ZX",this.ZX],["XS",this.XS],["XS2",this.XS2],["SG-XDT",this.SG_XDT],["SG-SMX",this.SG_SMX],["SG-LB",this.SG_LB],["SG-PF",this.SG_PF],["RAD",this.RAD],["SHT",this.SHT],["ZLJC",this.ZLJC],["ZLMM",this.ZLMM],["SLZT",this.SLZT],["ADVOL",this.ADVOL],["CYC",this.CYC],["CYS",this.CYS],["CYQKL",this.CYQKL],["SCR",this.SCR],["ASR",this.ASR],["SAR",this.SAR],["TJCJL",this.TJCJL],["量比",this.VOLRate],["平均K线",this.HeikinAshi],["ADL",this.ADL],["SQJZ",this.SQJZ],["XT",this.XT],["CFJT",this.CFJT],["CYX",this.CYX],["WAVE",this.WAVE],["VOL-TDX",this.VOL_TDX],["EMPTY",this.EMPTY],["神奇九转",this.NineTurns],["EMA",this.EMA3],["EMA4",this.EMA4],["EMA5",this.EMA5],["EMA6",this.EMA6],["散户线",this.ShareholderCount],["NXTS",this.NXTS],["FKX",this.FKX],["两融资金",this.Margin4],["ZSDB",this.ZSDB],["CJL2",this.CJL],["ASI",this.ASI],["DC",this.DC],["DEMA",this.DEMA],["VWAP",this.VWAP],["飞龙四式",this.Dragon4_Main],["飞龙四式-附图",this.Dragon4_Fig],["资金分析",this.FundsAnalysis],["融资占比",this.MarginProportion],["负面新闻",this.NewsNegative],["涨跌趋势",this.UpDownAnalyze],["北上资金",this.HK2SHSZ],["股东人数",this.ShareHolder],["两融余额",this.Margin2],["两融余额2",this.Margin3],["Zealink-资金吸筹",this.Zealink_Index1],["Zealink-牛熊区间",this.Zealink_Index2],["Zealink-持仓信号",this.Zealink_Index3],["Zealink-增减持",this.Zealink_Index4],["Zealink-大宗交易",this.Zealink_Index5],["Zealink-信托持股",this.Zealink_Index6],["Zealink-官网新闻",this.Zealink_Index7],["Zealink-高管要闻",this.Zealink_Index8],["Zealink-股权质押",this.Zealink_Index9],["Zealink-操盘BS点",this.Zealink_Index10],["Zealink-操盘BS点2",this.Zealink_Index11],["放心股-操盘BS点",this.FXG_BSPoint],["放心股-涨停多空线",this.FXG_INDEX],["放心股-涨停吸筹区",this.FXG_INDEX2],["放心股-量能黄金点",this.FXG_INDEX3],["五彩K线-十字星",this.COLOR_KSTAR1],["五彩K线-早晨之星",this.COLOR_KSTAR2],["五彩K线-黄昏之星",this.COLOR_KSTAR3],["五彩K线-长十字",this.COLOR_SHI1],["五彩K线-身怀六甲",this.COLOR_K220],["五彩K线-三个白武士",this.COLOR_K300],["五彩K线-三只乌鸦",this.COLOR_K310],["五彩K线-光头阳线",this.COLOR_K380],["五彩K线-光脚阴线",this.COLOR_K390],["五彩K线-垂死十字",this.COLOR_K134],["五彩K线-早晨十字星",this.COLOR_K140],["五彩K线-黄昏十字星",this.COLOR_K150],["五彩K线-射击之星",this.COLOR_K160],["五彩K线-倒转锤头",this.COLOR_K165],["五彩K线-锤头",this.COLOR_K170],["五彩K线-吊颈",this.COLOR_K180],["五彩K线-穿头破脚",this.COLOR_K190],["五彩K线-出水芙蓉",this.COLOR_CSFR],["五彩K线-乌云盖顶",this.COLOR_WYGD],["五彩K线-曙光初现",this.COLOR_SGCJ],["五彩K线-十字胎",this.COLOR_SZTAI],["五彩K线-剑",this.COLOR_SWORD],["五彩K线-平顶",this.COLOR_PINGDING],["五彩K线-平底",this.COLOR_PINGDI],["五彩K线-大阳烛",this.COLOR_DAYANZHU],["五彩K线-大阴烛",this.COLOR_DAYINGZHU],["五彩K线-好友反攻",this.COLOR_HYFG],["五彩K线-跳空缺口",this.COLOR_TKQK],["五彩K线-双飞乌鸦",this.COLOR_SFWY],["五彩K线-上升三部曲",this.COLOR_SSSBQ],["五彩K线-下跌三部曲",this.COLOR_XDSBQ],["五彩K线-长下影",this.COLOR_CHXY],["五彩K线-长上影",this.COLOR_CHSY],["五彩K线-分离",this.COLOR_FENLI],["交易系统-BIAS",this.TRADE_BIAS],["交易系统-CCI",this.TRADE_CCI],["交易系统-DMI",this.TRADE_DMI],["交易系统-KD",this.TRADE_KD],["交易系统-BOLL",this.TRADE_BOLL],["交易系统-KDJ",this.TRADE_KDJ],["交易系统-MA",this.TRADE_MA],["交易系统-MACD",this.TRADE_MACD],["交易系统-MTM",this.TRADE_MTM],["交易系统-PSY",this.TRADE_PSY],["交易系统-ROC",this.TRADE_ROC],["交易系统-RSI",this.TRADE_RSI],["交易系统-VR",this.TRADE_VR],["交易系统-DPSJ",this.TRADE_DPSJ],["TEST",this.TEST]])}if(d.AddIndex=function(t){for(var e in t)c.Add(t[e])},d.prototype.Get=function(t){var e=c.Get(t);if(e)return e;var a=this.DataMap.get(t);return a?a():null},d.prototype.Search=function(t){var e=[],a=new RegExp(t,"i");return this.DataMap.forEach((function(t,i){0!=i.indexOf("交易系统-")&&0!=i.indexOf("五彩K线-")&&i.search(a)>=0&&e.push(i)})),e},d.prototype.MA=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);"}},d.prototype.MA4=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);"}},d.prototype.MA5=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);"}},d.prototype.MA6=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);"}},d.prototype.MA7=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);"}},d.prototype.MA8=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0},{Name:"M8",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"},{Name:"MA8",DynamicName:"MA{M8}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);\nMA8:MA(CLOSE,M8);"}},d.prototype.EMA3=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);"}},d.prototype.EMA4=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);"}},d.prototype.EMA5=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);"}},d.prototype.EMA6=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);\nMA6:EMA(CLOSE,M6);"}},d.prototype.BOLL=function(){return{Name:"BOLL",Description:"布林线",IsMainIndex:!0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},d.prototype.BOLL2=function(){return{Name:"BOLL2",Description:"布林线",IsMainIndex:!1,KLineType:0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},d.prototype.BBI=function(){return{Name:"BBI",Description:"多空均线",IsMainIndex:!0,Args:[{Name:"M1",Value:3},{Name:"M2",Value:6},{Name:"M3",Value:12},{Name:"M4",Value:24}],Script:"BBI:(MA(CLOSE,M1)+MA(CLOSE,M2)+MA(CLOSE,M3)+MA(CLOSE,M4))/4;"}},d.prototype.DKX=function(){return{Name:"DKX",Description:"多空线",IsMainIndex:!1,Args:[{Name:"M",Value:10}],Script:"MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;\nDKX:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+\n16*REF(MID,4)+15*REF(MID,5)+14*REF(MID,6)+\n13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+\n10*REF(MID,10)+9*REF(MID,11)+8*REF(MID,12)+\n7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+\n4*REF(MID,16)+3*REF(MID,17)+2*REF(MID,18)+REF(MID,20))/210;\nMADKX:MA(DKX,M);"}},d.prototype.MIKE=function(){return{Name:"MIKE",Description:"麦克支撑压力",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1);\nHV:=EMA(HHV(HIGH,N),3);\nLV:=EMA(LLV(LOW,N),3);\nSTOR:EMA(2*HV-LV,3);\nMIDR:EMA(HLC+HV-LV,3);\nWEKR:EMA(HLC*2-LV,3);\nWEKS:EMA(HLC*2-HV,3);\nMIDS:EMA(HLC-HV+LV,3);\nSTOS:EMA(2*LV-HV,3);"}},d.prototype.PBX=function(){return{Name:"PBX",Description:"瀑布线",IsMainIndex:!0,Args:[{Name:"M1",Value:4},{Name:"M2",Value:6},{Name:"M3",Value:9},{Name:"M4",Value:13},{Name:"M5",Value:18},{Name:"M6",Value:24}],Script:"PBX1:(EMA(CLOSE,M1)+MA(CLOSE,M1*2)+MA(CLOSE,M1*4))/3;\nPBX2:(EMA(CLOSE,M2)+MA(CLOSE,M2*2)+MA(CLOSE,M2*4))/3;\nPBX3:(EMA(CLOSE,M3)+MA(CLOSE,M3*2)+MA(CLOSE,M3*4))/3;\nPBX4:(EMA(CLOSE,M4)+MA(CLOSE,M4*2)+MA(CLOSE,M4*4))/3;\nPBX5:(EMA(CLOSE,M5)+MA(CLOSE,M5*2)+MA(CLOSE,M5*4))/3;\nPBX6:(EMA(CLOSE,M6)+MA(CLOSE,M6*2)+MA(CLOSE,M6*4))/3;"}},d.prototype.ENE=function(){return{Name:"ENE",Description:"轨道线",IsMainIndex:!0,Args:[{Name:"N",Value:25},{Name:"M1",Value:6},{Name:"M2",Value:6}],Script:"UPPER:(1+M1/100)*MA(CLOSE,N);\nLOWER:(1-M2/100)*MA(CLOSE,N);\nENE:(UPPER+LOWER)/2;"}},d.prototype.MACD=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA:EMA(DIF,MID);\nMACD:(DIF-DEA)*2,COLORSTICK;"}},d.prototype.MACD2=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF2:=EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA2:=EMA(DIF2,MID);\nMACD:(DIF2-DEA2)*2,COLORSTICK,LINETHICK50;\nDIF:DIF2;\nDEA:DEA2;"}},d.prototype.KDJ=function(){return{Name:"KDJ",Description:"随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);\nJ:3*K-2*D;"}},d.prototype.VOL=function(){return{Name:"VOL",Description:"成交量",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"}],Script:"VOL:VOL,VOLSTICK;\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},d.prototype.VOL_OVERLAY=function(){return{Name:"VOL",Description:"成交量",IsMainIndex:!1,FloatPrecision:0,Script:"VOL:VOL,VOLSTICK,UPCOLOR(RGBA(255,0,0,0.3)),DOWNCOLOR(RGBA(0,255,0,0.3));"}},d.prototype.VOL_TDX=function(){return{Name:"VOL-TDX",Description:"成交量(虚拟)",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"TOTAL:=IF(PERIOD=1,5,IF(PERIOD=2,15,IF(PERIOD=3,30,IF(PERIOD=4,60,IF(PERIOD=5,TOTALFZNUM,1)))));\nMTIME:=MOD(FROMOPEN,TOTAL);\nCTIME:=IF(MTIME<0.5,TOTAL,MTIME);\nVVOL:IF((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VOL*(TOTAL+3)/(CTIME+3),DRAWNULL),NODRAW;\nSTICKLINE((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VVOL,0,-1,-1),COLORYELLOW;\nVOLUME:VOL,VOLSTICK;\nMAVOL1:MA(VOLUME,M1);\nMAVOL2:MA(VOLUME,M2);"}},d.prototype.RSI=function(){return{Name:"RSI",Description:"相对强弱指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(CLOSE,1);\nRSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\nRSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\nRSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;"}},d.prototype.BRAR=function(){return{Name:"BRAR",Description:"情绪指标",IsMainIndex:!1,Args:[{Name:"N",Value:26}],Script:"BR:SUM(MAX(0,HIGH-REF(CLOSE,1)),N)/SUM(MAX(0,REF(CLOSE,1)-LOW),N)*100;\nAR:SUM(HIGH-OPEN,N)/SUM(OPEN-LOW,N)*100;"}},d.prototype.WR=function(){return{Name:"WR",Description:"威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:10},{Name:"N1",Value:6}],Script:"WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N));\nWR2:100*(HHV(HIGH,N1)-CLOSE)/(HHV(HIGH,N1)-LLV(LOW,N1));"}},d.prototype.BIAS=function(){return{Name:"BIAS",Description:"乖离率",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"BIAS1 :(CLOSE-MA(CLOSE,N1))/MA(CLOSE,N1)*100;\nBIAS2 :(CLOSE-MA(CLOSE,N2))/MA(CLOSE,N2)*100;\nBIAS3 :(CLOSE-MA(CLOSE,N3))/MA(CLOSE,N3)*100;"}},d.prototype.OBV=function(){return{Name:"OBV",Description:"累积能量线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"VA:=IF(CLOSE>REF(CLOSE,1),VOL,-VOL);\nOBV:SUM(IF(CLOSE==REF(CLOSE,1),0,VA),0);\nMAOBV:MA(OBV,M);"}},d.prototype.DMI=function(){return{Name:"DMI",Description:"趋向指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"MM",Value:6}],Script:"MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nDMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\nDMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\nPDI: DMP*100/MTR;\nMDI: DMM*100/MTR;\nADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\nADXR:EXPMEMA(ADX,MM);"}},d.prototype.CR=function(){return{Name:"CR",Description:"带状能量线",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:40},{Name:"M4",Value:62}],Script:"MID:=REF(HIGH+LOW,1)/2;\nCR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\nMA1:REF(MA(CR,M1),M1/2.5+1);\nMA2:REF(MA(CR,M2),M2/2.5+1);\nMA3:REF(MA(CR,M3),M3/2.5+1);\nMA4:REF(MA(CR,M4),M4/2.5+1);"}},d.prototype.PSY=function(){return{Name:"PSY",Description:"心理线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"PSY:COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\rPSYMA:MA(PSY,M);"}},d.prototype.CCI=function(){return{Name:"CCI",Description:"商品路径指标",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"}},d.prototype.DMA=function(){return{Name:"DMA",Description:"平均差",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:50},{Name:"M",Value:10}],Script:"DIF:MA(CLOSE,N1)-MA(CLOSE,N2);\nDIFMA:MA(DIF,M);"}},d.prototype.TRIX=function(){return{Name:"TRIX",Description:"三重指数平均线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:9}],Script:"MTR:=EMA(EMA(EMA(CLOSE,N),N),N);\nTRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\nMATRIX:MA(TRIX,M) ;"}},d.prototype.VR=function(){return{Name:"VR",Description:"成交量变异率",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M",Value:6}],Script:"TH:=SUM(IF(CLOSE>REF(CLOSE,1),VOL,0),N);\nTL:=SUM(IF(CLOSE<REF(CLOSE,1),VOL,0),N);\nTQ:=SUM(IF(CLOSE==REF(CLOSE,1),VOL,0),N);\nVR:100*(TH*2+TQ)/(TL*2+TQ);\nMAVR:MA(VR,M);"}},d.prototype.EMV=function(){return{Name:"EMV",Description:"简易波动指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"M",Value:9}],Script:"VOLUME:=MA(VOL,N)/VOL;\nMID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);\nEMV:MA(MID*VOLUME*(HIGH-LOW)/MA(HIGH-LOW,N),N);\nMAEMV:MA(EMV,M);"}},d.prototype.ROC=function(){return{Name:"ROC",Description:"变动率指标",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMAROC:MA(ROC,M);"}},d.prototype.MTM=function(){return{Name:"MTM",Description:"动量线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"MTM:CLOSE-REF(CLOSE,N);\nMAMTM:MA(MTM,M);"}},d.prototype.FSL=function(){return{Name:"FSL",Description:"分水岭",IsMainIndex:!1,Args:[],Script:"SWL:(EMA(CLOSE,5)*7+EMA(CLOSE,10)*3)/10;\nSWS:DMA(EMA(CLOSE,12),MAX(1,100*(SUM(VOL,5)/(3*CAPITAL))));"}},d.prototype.CYR=function(){return{Name:"CYR",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N",Value:13},{Name:"M",Value:5}],Script:"DIVE:=0.01*EMA(AMOUNT,N)/EMA(VOL,N);\nCYR:(DIVE/REF(DIVE,1)-1)*100;\nMACYR:MA(CYR,M);"}},d.prototype.MASS=function(){return{Name:"MASS",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N1",Value:9},{Name:"N2",Value:25},{Name:"M",Value:6}],Script:"MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);\nMAMASS:MA(MASS,M);"}},d.prototype.WAD=function(){return{Name:"WAD",Description:"威廉多空力度线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);\nMIDB:=IF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);\nWAD:SUM(IF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);\nMAWAD:MA(WAD,M);"}},d.prototype.CHO=function(){return{Name:"CHO",Description:"佳庆指标",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:20},{Name:"M",Value:6}],Script:"MID:=SUM(VOL*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);\nCHO:MA(MID,N1)-MA(MID,N2);\nMACHO:MA(CHO,M);"}},d.prototype.ADTM=function(){return{Name:"ADTM",Description:"动态买卖气指标",IsMainIndex:!1,Args:[{Name:"N",Value:23},{Name:"M",Value:8}],Script:"DTM:=IF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));\nDBM:=IF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));\nSTM:=SUM(DTM,N);\nSBM:=SUM(DBM,N);\nADTM:IF(STM>SBM,(STM-SBM)/STM,IF(STM==SBM,0,(STM-SBM)/SBM));\nMAADTM:MA(ADTM,M);"}},d.prototype.HSL=function(){return{Name:"HSL",Description:"换手线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100);\nMAHSL:MA(HSL,N);"}},d.prototype.BIAS36=function(){return{Name:"BIAS36",Description:"三六乖离",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"BIAS36:MA(CLOSE,3)-MA(CLOSE,6);\nBIAS612:MA(CLOSE,6)-MA(CLOSE,12);\nMABIAS:MA(BIAS36,M);"}},d.prototype.BIAS_QL=function(){return{Name:"BIAS_QL",Description:"乖离率-传统版",IsMainIndex:!1,Args:[{Name:"N",Value:6},{Name:"M",Value:6}],Script:"BIAS :(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nBIASMA :MA(BIAS,M);"}},d.prototype.DPO=function(){return{Name:"DPO",Description:"区间震荡线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);\nMADPO:MA(DPO,M);"}},d.prototype.OSC=function(){return{Name:"OSC",Description:"变动速率线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"OSC:100*(CLOSE-MA(CLOSE,N));\nMAOSC:EXPMEMA(OSC,M);"}},d.prototype.ATR=function(){return{Name:"ATR",Description:"真实波幅",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));\nATR:MA(MTR,N);"}},d.prototype.NVI=function(){return{Name:"ATR",Description:"负成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V<REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},d.prototype.PVI=function(){return{Name:"PVI",Description:"正成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V>REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},d.prototype.UOS=function(){return{Name:"UOS",Description:"终极指标",IsMainIndex:!1,Args:[{Name:"N1",Value:7},{Name:"N2",Value:14},{Name:"N3",Value:28},{Name:"M",Value:6}],Script:"TH:=MAX(HIGH,REF(CLOSE,1));\nTL:=MIN(LOW,REF(CLOSE,1));\nACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1);\nACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2);\nACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3);\nUOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3);\nMAUOS:EXPMEMA(UOS,M);"}},d.prototype.CYW=function(){return{Name:"CYW",Description:"主力控盘",IsMainIndex:!1,Args:[],Script:"VAR1:=CLOSE-LOW;\nVAR2:=HIGH-LOW;\nVAR3:=CLOSE-HIGH;\nVAR4:=IF(HIGH>LOW,(VAR1/VAR2+VAR3/VAR2)*VOL,0);\nCYW: SUM(VAR4,10)/10000, COLORSTICK;"}},d.prototype.LON=function(){return{Name:"LON",Description:"龙系长线",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"LC := REF(CLOSE,1);\nVID := SUM(VOL,2)/(((HHV(HIGH,2)-LLV(LOW,2)))*100);\nRC := (CLOSE-LC)*VID;\nLONG := SUM(RC,0);\nDIFF := SMA(LONG,10,1);\nDEA := SMA(LONG,20,1);\nLON : DIFF-DEA;\nLONMA : MA(LON,10);\nLONT : LON, COLORSTICK;"}},d.prototype.NDB=function(){return{Name:"NDB",Description:"脑电波",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"HH:=IF(C/REF(C,1)>1.098 AND L>REF(H,1),2*C-REF(C,1)-H,2*C-H-L);\nV1:= BARSCOUNT(C) - 1;\nV2:= 2 * REF(C, V1) - REF(H, V1) - REF(L, V1);\nDK: SUM(HH, 0) + V2;\nMDK5: MA(DK, P1);\nMDK10: MA(DK, P2);"}},d.prototype.SKDJ=function(){return{Name:"SKDJ",Description:"慢速随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M",Value:3}],Script:"LOWV:=LLV(LOW,N);\nHIGHV:=HHV(HIGH,N);\nRSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,M);\nK:EMA(RSV,M);\nD:MA(K,M);"}},d.prototype.KD=function(){return{Name:"KD",Description:"随机指标KD",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);"}},d.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!0,Args:[],Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},d.prototype.DKCOL=function(){return{Name:"DKCOL",Description:"多空能量柱(适用于分时主图)",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"FF:=(C-REF(C,N))/REF(C,N);\nSTICKLINE(FF>0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORRED;\nSTICKLINE(FF<0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORGREEN;"}},d.prototype.UDL=function(){return{Name:"UDL",Description:"引力线",IsMainIndex:!1,Args:[{Name:"N1",Value:3},{Name:"N2",Value:5},{Name:"N3",Value:10},{Name:"N4",Value:20},{Name:"M",Value:6}],Script:"UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;\nMAUDL:MA(UDL,M);"}},d.prototype.MFI=function(){return{Name:"MFI",Description:"资金流量指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"N2",Value:6}],Script:"TYP := (HIGH + LOW + CLOSE)/3;\nV1:=SUM(IF(TYP>REF(TYP,1),TYP*VOL,0),N)/SUM(IF(TYP<REF(TYP,1),TYP*VOL,0),N);\nMFI:100-(100/(1+V1));"}},d.prototype.LWR=function(){return{Name:"LWR",Description:"LWR威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;\nLWR1:SMA(RSV,M1,1);\nLWR2:SMA(LWR1,M2,1);"}},d.prototype.MARSI=function(){return{Name:"MARSI",Description:"相对强弱平均线",IsMainIndex:!1,Args:[{Name:"M1",Value:10},{Name:"M2",Value:6}],Script:"DIF:=CLOSE-REF(CLOSE,1);\nVU:=IF(DIF>=0,DIF,0);\nVD:=IF(DIF<0,-DIF,0);\nMAU1:=MEMA(VU,M1);\nMAD1:=MEMA(VD,M1);\nMAU2:=MEMA(VU,M2);\nMAD2:=MEMA(VD,M2);\nRSI10:MA(100*MAU1/(MAU1+MAD1),M1);\nRSI6:MA(100*MAU2/(MAU2+MAD2),M2);"}},d.prototype.CYD=function(){return{Name:"CYD",Description:"承接因子",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYDS:WINNER(CLOSE)/(VOL/CAPITAL);\nCYDN:WINNER(CLOSE)/MA(VOL/CAPITAL,N);"}},d.prototype.CYF=function(){return{Name:"CYF",Description:"市场能量",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYF:100-100/(1+EMA(HSL,N));"}},d.prototype.TAPI=function(){return{Name:"TAPI",Description:"加权指数成交值",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"TAPI:AMOUNT/INDEXC;\nMATAIP:MA(TAPI,M);"}},d.prototype.VMACD=function(){return{Name:"VMACD",Description:"量平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(VOL,SHORT)-EMA(VOL,LONG);\nDEA:EMA(DIF,MID);\nMACD:DIF-DEA,COLORSTICK;"}},d.prototype.QACD=function(){return{Name:"QACD",Description:"快速异同平均",IsMainIndex:!1,Args:[{Name:"N1",Value:12},{Name:"N2",Value:26},{Name:"M",Value:9}],Script:"DIF:EMA(CLOSE,N1)-EMA(CLOSE,N2);\nMACD:EMA(DIF,M);\nDDIF:DIF-MACD;"}},d.prototype.VPT=function(){return{Name:"VPT",Description:"量价曲线",IsMainIndex:!1,Args:[{Name:"N",Value:51},{Name:"M",Value:6}],Script:"VPT:SUM(VOL*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);\nMAVPT:MA(VPT,M);"}},d.prototype.WVAD=function(){return{Name:"WVAD",Description:"威廉变异离散量",IsMainIndex:!1,Args:[{Name:"N",Value:24},{Name:"M",Value:6}],Script:"WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*VOL,N)/10000;\nMAWVAD:MA(WVAD,M);"}},d.prototype.DBQR=function(){return{Name:"WVAD",Description:"对比强弱",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:60}],Script:"ZS:(INDEXC-REF(INDEXC,N))/REF(INDEXC,N);\nGG:(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMADBQR1:MA(GG,M1);\nMADBQR2:MA(GG,M2);\nMADBQR3:MA(GG,M3);"}},d.prototype.JS=function(){return{Name:"JS",Description:"加速线",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"JS:100*(CLOSE-REF(CLOSE,N))/(N*REF(CLOSE,N));\nMAJS1:MA(JS,M1);\nMAJS2:MA(JS,M2);\nMAJS3:MA(JS,M3);"}},d.prototype.CYE=function(){return{Name:"CYE",Description:"市场趋势",IsMainIndex:!1,Args:[],Script:"MAL:=MA(CLOSE,5);\nMAS:=MA(MA(CLOSE,20),5);\nCYEL:(MAL-REF(MAL,1))/REF(MAL,1)*100;\nCYES:(MAS-REF(MAS,1))/REF(MAS,1)*100;"}},d.prototype.QR=function(){return{Name:"QR",Description:"强弱指标",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"个股: (CLOSE-REF(CLOSE,N))/REF(CLOSE,N)*100; \n大盘: (INDEXC-REF(INDEXC,N))/REF(INDEXC,N)*100; \n强弱值:EMA(个股-大盘,2),COLORSTICK;"}},d.prototype.GDX=function(){return{Name:"GDX",Description:"轨道线",IsMainIndex:!1,Args:[{Name:"N",Value:30},{Name:"M",Value:9}],Script:"AA:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,N))/MA(CLOSE,N); \n轨道:DMA(CLOSE,AA);\n压力线:(1+M/100)*轨道; \n支撑线:(1-M/100)*轨道;"}},d.prototype.JLHB=function(){return{Name:"JLHB",Description:"绝路航标",IsMainIndex:!1,Args:[{Name:"N",Value:7},{Name:"M",Value:5}],Script:"VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80; \nB:SMA(VAR1,N,1); \nVAR2:SMA(B,M,1); \n绝路航标:IF(CROSS(B,VAR2) AND B<40,50,0);"}},d.prototype.PCNT=function(){return{Name:"PCNT",Description:"幅度比",IsMainIndex:!1,Args:[{Name:"M",Value:5}],Script:"PCNT:(CLOSE-REF(CLOSE,1))/CLOSE*100;\nMAPCNT:EXPMEMA(PCNT,M);"}},d.prototype.BTX=function(){return{Name:"BTX",Description:"宝塔线",IsMainIndex:!1,Args:[],Script:"B1:=REF(C,1);\nB2:= REF(C, 2);\nSS:= IF(C > REF(C, 1) AND REF(C, 1) >= REF(C, 2), 1, IF(C < REF(C, 1) AND REF(C, 1) <= REF(C, 2), -1, IF(C > REF(C, 2) AND REF(C, 2) > REF(C, 1), 2, IF(C < REF(C, 2) AND REF(C, 2) < REF(C, 1), -2, 0))));\nSM:= IF(REF(SS, 1) <> 0, REF(SS, 1), IF(REF(SS, 2) <> 0, REF(SS, 2), IF(REF(SS, 3) <> 0, REF(SS, 3), IF(REF(SS, 5) <> 0, REF(SS, 5), IF(REF(SS, 6) <> 0, REF(SS, 6), IF(REF(SS, 7) <> 0, REF(SS, 7), 0))))));\nMC:= IF(REF(SS, 1) <> 0, B2, IF(SM > 0, MIN(B1, B2), MAX(B1, B2)));\nTOW1:= IF(C > REF(C, 1), C, REF(C, 1));\nTOW2:= IF((SS == -1 OR SS == -2) AND SM > 0, B2, TOW1);\nTOWER:= IF(TOW1 > TOW2, TOW1, TOW2);\nSTICKLINE(SS == 1 OR SM >= 1 AND SS == 0, B1, C, 10, 1), COLORRED;\nSTICKLINE(SS == -1 OR SM <= -1 AND SS == 0, B1, C, 10, 0), COLORCYAN;\nSTICKLINE(SS == 2, B2, C, 10, 1), COLORRED;\nSTICKLINE(SS == -2, B2, C, 10, 0), COLORCYAN;\nSTICKLINE((SS == -1 OR SS == -2) AND SM > 0, B2, B1, 10, 1), COLORRED;\nSTICKLINE((SS == 1 OR SS == 2) AND SM < 0, B2, B1, 10, 0), COLORCYAN;"}},d.prototype.AMO=function(){return{Name:"AMO",Description:"成交金额",IsMainIndex:!1,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"AMOW:AMOUNT/10000.0,VOLSTICK;\nAMO1:MA(AMOW,M1);\nAMO2:MA(AMOW,M2);"}},d.prototype.VRSI=function(){return{Name:"VRSI",Description:"相对强弱量",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(VOL,1);\nRSI1:SMA(MAX(VOL-LC,0),N1,1)/SMA(ABS(VOL-LC),N1,1)*100;\nRSI2:SMA(MAX(VOL-LC,0),N2,1)/SMA(ABS(VOL-LC),N2,1)*100;\nRSI3:SMA(MAX(VOL-LC,0),N3,1)/SMA(ABS(VOL-LC),N3,1)*100;"}},d.prototype.HSCOL=function(){return{Name:"HSCOL",Description:"换手柱",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSCOL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100),VOLSTICK;\nMAHSL:MA(HSCOL,N);"}},d.prototype.DBQRV=function(){return{Name:"DBQRV",Description:"对比强弱量(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"ZS:(INDEXV-REF(INDEXV,N))/REF(INDEXV,N);\nGG:(VOL-REF(VOL,N))/REF(VOL,N);"}},d.prototype.DBLB=function(){return{Name:"DBLB",Description:"对比量比(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M",Value:5}],Script:"GG:=VOL/SUM(REF(VOL,1),N);\nZS:=INDEXV/SUM(REF(INDEXV,1),N);\nDBLB:GG/ZS;\nMADBLB:MA(DBLB,M);"}},d.prototype.ACD=function(){return{Name:"ACD",Description:"升降线",IsMainIndex:!1,Args:[{Name:"M",Value:20}],Script:"LC:=REF(CLOSE,1);\nDIF:=CLOSE-IF(CLOSE>LC,MIN(LOW,LC),MAX(HIGH,LC));\nACD:SUM(IF(CLOSE==LC,0,DIF),0);\nMAACD:EXPMEMA(ACD,M);"}},d.prototype.EXPMA=function(){return{Name:"EXPMA",Description:"指数平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},d.prototype.EXPMA_S=function(){return{Name:"EXPMA_S",Description:"指数平均线-副图",IsMainIndex:!1,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},d.prototype.HMA=function(){return{Name:"HMA",Description:"高价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"HMA1:MA(HIGH,M1);\nHMA2:MA(HIGH,M2);\nHMA3:MA(HIGH,M3);\nHMA4:MA(HIGH,M4);\nHMA5:MA(HIGH,M5);"}},d.prototype.LMA=function(){return{Name:"LMA",Description:"低价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"LMA1:MA(LOW,M1);\nLMA2:MA(LOW,M2);\nLMA3:MA(LOW,M3);\nLMA4:MA(LOW,M4);\nLMA5:MA(LOW,M5);"}},d.prototype.VMA=function(){return{Name:"VMA",Description:"变异平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"VV:=(HIGH+OPEN+LOW+CLOSE)/4;\nVMA1:MA(VV,M1);\nVMA2:MA(VV,M2);\nVMA3:MA(VV,M3);\nVMA4:MA(VV,M4);\nVMA5:MA(VV,M5);"}},d.prototype.AMV=function(){return{Name:"AMV",Description:"成本价均线",IsMainIndex:!1,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"AMOV:=VOL*(OPEN+CLOSE)/2;\nAMV1:SUM(AMOV,M1)/SUM(VOL,M1);\nAMV2:SUM(AMOV,M2)/SUM(VOL,M2);\nAMV3:SUM(AMOV,M3)/SUM(VOL,M3);\nAMV4:SUM(AMOV,M4)/SUM(VOL,M4);"}},d.prototype.BBIBOLL=function(){return{Name:"BBIBOLL",Description:"多空布林线",IsMainIndex:!0,Args:[{Name:"N",Value:11},{Name:"M",Value:6}],Script:"CV:=CLOSE;\nBBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;\nUPR:BBIBOLL+M*STD(BBIBOLL,N);\nDWN:BBIBOLL-M*STD(BBIBOLL,N);"}},d.prototype.ALLIGAT=function(){return{Name:"ALLIGAT",Description:"鳄鱼线",IsMainIndex:!0,Args:[],Script:"NN:=(H+L)/2;\n上唇:REF(MA(NN,5),3),COLOR40FF40;\n牙齿:REF(MA(NN,8),5),COLOR0000C0;\n下颚:REF(MA(NN,13),8),COLORFF4040;"}},d.prototype.ZX=function(){return{Name:"ZX",Description:"重心线",IsMainIndex:!1,Args:[],Script:"AV:0.01*AMOUNT/VOL;"}},d.prototype.XS=function(){return{Name:"XS",Description:"薛斯通道",IsMainIndex:!0,Args:[{Name:"N",Value:13}],Script:"VAR2:=CLOSE*VOL;\nVAR3:=EMA((EMA(VAR2,3)/EMA(VOL,3)+EMA(VAR2,6)/EMA(VOL,6)+EMA(VAR2,12)/EMA(VOL,12)+EMA(VAR2,24)/EMA(VOL,24))/4,N);\nSUP:1.06*VAR3;\nSDN:VAR3*0.94;\nVAR4:=EMA(CLOSE,9);\nLUP:EMA(VAR4*1.14,5);\nLDN:EMA(VAR4*0.86,5);"}},d.prototype.XS2=function(){return{Name:"XS2",Description:"薛斯通道II",IsMainIndex:!0,Args:[{Name:"N",Value:102},{Name:"M",Value:7}],Script:"AA:=MA((2*CLOSE+HIGH+LOW)/4,5); \n通道1:AA*N/100; \n通道2:AA*(200-N)/100; \nCC:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,20))/MA(CLOSE,20); \nDD:=DMA(CLOSE,CC); \n通道3:(1+M/100)*DD; \n通道4:(1-M/100)*DD;"}},d.prototype.SG_XDT=function(){return{Name:"SG-XDT",Description:"心电图(需下载日线)",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"QR:CLOSE/INDEXC*1000;\nMQR1:MA(QR,5);\nMQR2:MA(QR,10);"}},d.prototype.SG_SMX=function(){return{Name:"SG-SMX",Description:"生命线(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:50}],Script:"H1:=HHV(HIGH,N);\nL1:=LLV(LOW,N);\nH2:=HHV(INDEXH,N);\nL2:=LLV(INDEXL,N);\nZY:=CLOSE/INDEXC*2000;\nZY1:EMA(ZY,3);\nZY2:EMA(ZY,17);\nZY3:EMA(ZY,34);"}},d.prototype.SG_LB=function(){return{Name:"SG-LB",Description:"量比(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY2:=VOL/INDEXV*1000;\n量比:ZY2;\nMA5:MA(ZY2,5);\nMA10:MA(ZY2,10);"}},d.prototype.SG_PF=function(){return{Name:"SG-PF",Description:"强势股评分(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY1:=CLOSE/INDEXC*1000;\nA1:=IF(ZY1>HHV(ZY1,3),10,0);\nA2:=IF(ZY1>HHV(ZY1,5),15,0);\nA3:=IF(ZY1>HHV(ZY1,10),20,0);\nA4:=IF(ZY1>HHV(ZY1,2),10,0);\nA5:=COUNT(ZY1>REF(ZY1,1) ,9)*5;\n强势股评分:A1+A2+A3+A4+A5;"}},d.prototype.RAD=function(){return{Name:"RAD",Description:"威力雷达(需下载日线)",IsMainIndex:!1,Args:[{Name:"D",Value:3},{Name:"S",Value:30},{Name:"M",Value:30}],Script:"SM:=(OPEN+HIGH+CLOSE+LOW)/4;\nSMID:=MA(SM,D);\nIM:=(INDEXO+INDEXH+INDEXL+INDEXC)/4;\nIMID:=MA(IM,D);\nSI1:=(SMID-REF(SMID,1))/SMID;\nII:=(IMID-REF(IMID,1))/IMID;\nRADER1:SUM((SI1-II)*2,S)*1000;\nRADERMA:SMA(RADER1,M,1);"}},d.prototype.SHT=function(){return{Name:"SHT",Description:"龙系短线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"VAR1:=MA((VOL-REF(VOL,1))/REF(VOL,1),5);\nVAR2:=(CLOSE-MA(CLOSE,24))/MA(CLOSE,24)*100;\nMY: VAR2*(1+VAR1);\nSHT: MY, COLORSTICK;\nSHTMA: MA(SHT,N);"}},d.prototype.ZLJC=function(){return{Name:"ZLJC",Description:"主力进出",IsMainIndex:!1,Args:[],Script:"VAR1:=(CLOSE+LOW+HIGH)/3; \nVAR2:=SUM(((VAR1-REF(LOW,1))-(HIGH-VAR1))*VOL/100000/(HIGH-LOW),0); \nVAR3:=EMA(VAR2,1); \nJCS:VAR3; \nJCM:MA(VAR3,12); \nJCL:MA(VAR3,26);"}},d.prototype.ZLMM=function(){return{Name:"ZLMM",Description:"主力买卖",IsMainIndex:!1,Args:[],Script:"LC :=REF(CLOSE,1);\nRSI2:=SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100;\nRSI3:=SMA(MAX(CLOSE-LC,0),18,1)/SMA(ABS(CLOSE-LC),18,1)*100;\nMMS:MA(3*RSI2-2*SMA(MAX(CLOSE-LC,0),16,1)/SMA(ABS(CLOSE-LC),16,1)*100,3);\nMMM:EMA(MMS,8);\nMML:MA(3*RSI3-2*SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100,5);"}},d.prototype.SLZT=function(){return{Name:"SLZT",Description:"神龙在天",IsMainIndex:!1,Args:[],Script:"白龙: MA(CLOSE,125);\n黄龙: 白龙+2*STD(CLOSE,170);\n紫龙: 白龙-2*STD(CLOSE,145);\n青龙: SAR(125,1,7), LINESTICK;\nVAR2:=HHV(HIGH,70);\nVAR3:=HHV(HIGH,20);\n红龙: VAR2*0.83;\n蓝龙: VAR3*0.91;"}},d.prototype.ADVOL=function(){return{Name:"ADVOL",Description:"龙系离散量",IsMainIndex:!1,Args:[],Script:"A:=SUM(((CLOSE-LOW)-(HIGH-CLOSE))*VOL/10000/(HIGH-LOW),0);\nADVOL:A;\nMA1:MA(A,30);\nMA2:MA(MA1,100);"}},d.prototype.CYC=function(){return{Name:"CYC",Description:"成本均线",IsMainIndex:!0,Args:[{Name:"P1",Value:5},{Name:"P2",Value:13},{Name:"P3",Value:34}],Script:"JJJ:=IF(DYNAINFO(8)>0.01,0.01*DYNAINFO(10)/DYNAINFO(8),DYNAINFO(3));\nDDD:=(DYNAINFO(5)<0.01 || DYNAINFO(6)<0.01);\nJJJT:=IF(DDD,1,(JJJ<(DYNAINFO(5)+0.01) && JJJ>(DYNAINFO(6)-0.01)));\nCYC1:IF(JJJT,0.01*EMA(AMOUNT,P1)/EMA(VOL,P1),EMA((HIGH+LOW+CLOSE)/3,P1));\nCYC2:IF(JJJT,0.01*EMA(AMOUNT,P2)/EMA(VOL,P2),EMA((HIGH+LOW+CLOSE)/3,P2));\nCYC3:IF(JJJT,0.01*EMA(AMOUNT,P3)/EMA(VOL,P3),EMA((HIGH+LOW+CLOSE)/3,P3));\nCYC4:IF(JJJT,DMA(AMOUNT/(100*VOL),100*VOL/FINANCE(7)),EMA((HIGH+LOW+CLOSE)/3,120));"}},d.prototype.CYS=function(){return{Name:"CYS",Description:"市场盈亏",IsMainIndex:!1,Args:[],Script:"CYC13:EMA(AMOUNT,13)/EMA(VOL,13);\nCYS:(CLOSE-CYC13)/CYC13*100;"}},d.prototype.CYQKL=function(){return{Name:"CYQKL",Description:"博弈K线长度",IsMainIndex:!1,Args:[],Script:"KL:100*(WINNER(CLOSE)-WINNER(OPEN));"}},d.prototype.SCR=function(){return{Name:"SCR",Description:"筹码集中度",IsMainIndex:!1,Args:[{Name:"P1",Value:90}],Script:"A:=P1+(100-P1)/2;\nB:=(100-P1)/2;\nCC:=COST(A);\nDD:=COST(B);\nSCR:(CC-DD)/(CC+DD)*100/2;"}},d.prototype.ASR=function(){return{Name:"ASR",Description:"浮筹比例",IsMainIndex:!1,Args:[],Script:"ASR:(WINNER(C*1.1)-WINNER(C*0.9))/WINNER(HHV(H,0))*100;"}},d.prototype.SAR=function(){return{Name:"SAR",Description:"抛物转向",IsMainIndex:!0,Args:[{Name:"P",Value:10},{Name:"STEP",Value:2},{Name:"MAXP",Value:20}],Script:"S:SAR(P,STEP,MAXP),UPDOWNDOT;"}},d.prototype.TJCJL=function(){return{Name:"太极成交量",Description:"太极成交量",IsMainIndex:!0,Args:[],Script:'总手:VOL,NODRAW;\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,"说明: 红色柱为吸货量,绿色为出货量,黄色为天量,蓝色为地量"),COLORGRAY;\nZZ:=IF(REF(C,1)>REF(O,1) AND O>REF(C,1)*1.014 AND C<O*1.02,1,3);\nV5:=MA(V,5);\nV12:=MA(V,12);\nV34:=MA(V,34);\nC6:=MA(C,6);\nSTICKLINE(VOL,0,VOL,3,0),COLORLIGRAY;\nSTICKLINE(CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,0,VOL,3,0),COLORRED;\nSTICKLINE(CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,0,VOL,3,0),COLORGREEN;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05,0,VOL,3,0),COLORYELLOW;\nSTICKLINE(VOL<MA(VOL,5)/2 AND V<V12/2,0,VOL,3,0),COLORBLUE;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,VOL*0.5,0,3,0),COLORRED;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,VOL*0.5,0,3,0),COLORRED;'}},d.prototype.Dragon4_Main=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!0,Args:[{Name:"N1",Value:5},{Name:"N2",Value:10},{Name:"N3",Value:50},{Name:"N4",Value:60}],Script:"蜻蜓点水:=EMA(CLOSE,N1),COLORGRAY;\n魔界:=EMA(CLOSE,N2),COLORGREEN;\n水:=EMA(CLOSE,N3),COLORRED;\nDRAWKLINE(HIGH,OPEN,LOW,CLOSE);\n生命线:MA(CLOSE,N4),COLORBLUE,LINETHICK2;\nDRAWBAND(魔界,'RGB(186,225,250)',水,'RGB(253,194,124)');\nDRAWBAND(蜻蜓点水,'RGB(128,138,135)',魔界,'RGB(0,0,255)');"}},d.prototype.Dragon4_Fig=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!1,Args:[],Script:"倍:VOL>=REF(V,1)*1.90 AND C>REF(C,1),COLORYELLOW;\n低:VOL<REF(LLV(VOL,13),1),COLORGREEN;\n地:VOL<REF(LLV(VOL,100),1),COLORMAGENTA; \n平:=ABS(VOL-HHV(REF(VOL,1),5))/HHV(REF(VOL,1),5)<=0.03 OR ABS(VOL-REF(VOL,1))/REF(VOL,1)<=0.03,NODRAW,COLORWHITE;\n倍缩:VOL<=REF(V,1)*0.5,COLORFF8000;\n梯量:COUNT(V>REF(V,1),3)==3 AND COUNT(C>O,3)==3,COLORBROWN;\n缩量涨:COUNT(C>REF(C,1),2)==2 AND COUNT(V<REF(V,1),2)==2,COLORBLUE;\nSTICKLINE(C>=REF(C,1),V,0,2,0),COLORRED;\nSTICKLINE(C<REF(C,1),V,0,2,0),COLORGREEN;\nSTICKLINE(倍,0,V,2,0),COLORYELLOW;\nSTICKLINE(低,0,V,2,0),COLORGREEN;\nSTICKLINE(地,0,V,2,0),COLORLIMAGENTA;\nSTICKLINE(平,0,V,2,0),COLORGRAY;\nSTICKLINE(倍缩,0,V,2,0),COLORFF8000;\nSTICKLINE(梯量,0,V,2,0),COLORBROWN;\nSTICKLINE(缩量涨,0,V,2,0),COLORBLUE;"}},d.prototype.FundsAnalysis=function(){return{Name:"资金分析",Description:"资金分析",IsMainIndex:!1,Args:[{Name:"M",Value:55},{Name:"N",Value:34}],Script:"LC:=REF(CLOSE,1);\nRSI:=((SMA(MAX((CLOSE - LC),0),3,1) / SMA(ABS((CLOSE - LC)),3,1)) * 100);\nFF:=EMA(CLOSE,3);\nMA15:=EMA(CLOSE,21); DRAWTEXT(CROSS(85,RSI),75,'▼'),COLORGREEN;\nVAR1:=IF(YEAR>=2038 AND MONTH>=1,0,1);\nVAR2:=REF(LOW,1)*VAR1;\nVAR3:=SMA(ABS(LOW-VAR2),3,1)/SMA(MAX(LOW-VAR2,0),3,1)*100*VAR1;\nVAR4:=EMA(IF(CLOSE*1.3,VAR3*10,VAR3/10),3)*VAR1;\nVAR5:=LLV(LOW,30)*VAR1;\nVAR6:=HHV(VAR4,30)*VAR1;\nVAR7:=IF(MA(CLOSE,58),1,0)*VAR1;\nVAR8:=EMA(IF(LOW<=VAR5,(VAR4+VAR6*2)/2,0),3)/618*VAR7*VAR1;\n吸筹A:IF(VAR8>100,100,VAR8)*VAR1,COLORFB2F3B;\n{吸筹B}STICKLINE(吸筹A>-150,0,吸筹A,8,0),COLORFB2F3B;\n\n散户线: 100*(HHV(HIGH,M)-CLOSE)/(HHV(HIGH,M)-LLV(LOW,M)),COLORAA89BD,LINETHICK2;\nRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,3,1);\nD:=SMA(K,3,1);\nJ:=3*K-2*D;\n主力线:EMA(J,5),COLORF39800,LINETHICK2;\nDRAWICON(CROSS(主力线,散户线),主力线,1);\nDRAWICON(CROSS(散户线,主力线),主力线,2);"}},d.prototype.MarginProportion=function(){var t={Name:"融资占比(%)",Description:"融资占比",IsMainIndex:!1,Condition:{Period:[u.KLINE_DAY_ID]},Args:[],Script:"占比:MARGIN(2);"};return t},d.prototype.Margin2=function(){var t={Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[u.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:MARGIN(1);\n        T2:MA(MARGIN(1),N);"};return t},d.prototype.Margin3=function(){var t={Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[u.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:=MARGIN(1);\n        T2:=MA(MARGIN(1),N);\n        STICKLINE(T1-T2>=0,0,T1-T2,50,T1>T2),COLORRED;\n        STICKLINE(T1-T2<0,T1-T2,0,50,T1>T2),COLORGREEN;"};return t},d.prototype.FXG_BSPoint=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,Args:[],Script:"MA5:MA(CLOSE,5);\n        MA13:MA(CLOSE,13);\n        MA21:MA(CLOSE,21);\n        MA34:MA(CLOSE,34);\n        {MA55:MA(CLOSE,55),COLOR0000FF;}\n        {MA120:=MA(CLOSE,120),COLORFFFF00;}\n        天使:=EMA(C,2),COLOR000000;\n        魔鬼:=EMA(SLOPE(C,21)*20+C,42),COLOR000000;\n        买:=CROSS(天使,魔鬼);\n        卖:=CROSS(魔鬼,天使);\n        DRAWICON(买,L*0.97,13);\n        DRAWICON(卖,H*1.03,14);\n        DRAWKLINE_IF(天使>=魔鬼,HIGH,CLOSE,LOW,OPEN),COLORRED;\n        DRAWKLINE_IF(天使<魔鬼,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n        DRAWKLINE_IF(CROSS(天使,魔鬼),HIGH,CLOSE,LOW,OPEN),COLORYELLOW;\n        DRAWKLINE_IF(CROSS(魔鬼,天使),HIGH,CLOSE,LOW,OPEN),COLORBLACK;"}},d.prototype.FXG_INDEX=function(){return{Name:"涨停多空线",Description:"涨停多空线",IsMainIndex:!1,Args:[],Script:"做多能量线: SMA((CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100,5,1)-8,COLORRED,LINETHICK3;\n做空能量线: SMA((HHV(HIGH,36)-CLOSE)/(HHV(HIGH,36)-LLV(LOW,36))*100,2,1),COLORGREEN,LINETHICK3;\n20,POINTDOT,COLORF00FF0;\n50,POINTDOT,COLORGREEN;\n80,POINTDOT,COLORLIBLUE;"}},d.prototype.FXG_INDEX2=function(){return{Name:"涨停吸筹区",Description:"涨停吸筹区",IsMainIndex:!1,Args:[],Script:"VAR0:=EMA(HHV(HIGH,500),21); \nVAR1:=EMA(HHV(HIGH,250),21);\nVAR2:=EMA(HHV(HIGH,90),21); \nVAR3:=EMA(LLV(LOW,500),21); \nVAR4:=EMA(LLV(LOW,250),21); \nVAR5:=EMA(LLV(LOW,90),21);\n\nVAR6:=EMA((VAR3*0.96+VAR4*0.96+VAR5*0.96+VAR0*0.558+VAR1*0.558+VAR2*0.558)/6,21); \nVAR7:=EMA((VAR3*1.25+VAR4*1.23+VAR5*1.2+VAR0*0.55+VAR1*0.55+VAR2*0.65)/6,21); \nVAR8:=EMA((VAR3*1.3+VAR4*1.3+VAR5*1.3+VAR0*0.68+VAR1*0.68+VAR2*0.68)/6,21); \nVAR9:=EMA((VAR6*3+VAR7*2+VAR8)/6*1.738,21); \nVAR10:=REF(LOW,1); \nVAR11:=SMA(ABS(LOW-VAR10),3,1)/SMA(MAX(LOW-VAR10,0),3,1)*100; \nVAR12:=EMA(IFF(CLOSE*1.35<=VAR9,VAR11*10,VAR11/10),3); \nVAR13:=LLV(LOW,30); \nVAR14:=HHV(VAR12,30); \nVAR15:=IFF(MA(CLOSE,58),1,0); \nVAR16:=EMA(IFF(LOW<=VAR13,(VAR12+VAR14*2)/2,0),3)/618*VAR15;\n\n资金入场:IFF(VAR16>0,VAR16,0),LINETHICK,LINETHICK2, COLORFF0000; \n\nA1:IFF(资金入场>0,资金入场*1.2,0),STICK,LINETHICK5, COLORFF0000;\nA2:IFF(资金入场>0,资金入场*0.8,0),STICK,LINETHICK5, COLORFF6600;\nA3:IFF(资金入场>0,资金入场*0.6,0),STICK,LINETHICK5, COLORFF9900;\nA4:IFF(资金入场>0,资金入场*0.4,0) ,STICK,LINETHICK5,COLORFFCC00;\nA5:IFF(资金入场>0,资金入场*0.2,0) ,STICK,LINETHICK5,COLORFFFF00;"}},d.prototype.FXG_INDEX3=function(){return{Name:"量能黄金点",Description:"量能黄金点",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"A:=IFF((CLOSE>126.32),VOL,VOL); \n主力:=MA(A,4),COLORRED;\n游资:=MA(A,8),COLORYELLOW;\n大户:=MA(A,16),COLORF0F000;\n散户:=MA(A,32),COLOR00FF00;\n主比:=ABS(((主力)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORRED;\n游比:=ABS(((游资)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORYELLOW;\n大比:=ABS(((大户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORF0F000;\n散比:=ABS(((散户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLOR00FF00;\n警戒线:MA(A,180),COLORFF66FF;\nSTICKLINE((主力 > 0),0,主力,2.5,0),COLOR1020BB;\nSTICKLINE((主力 > 0),0,主力,0.7,0),COLORRED;\nSTICKLINE((游资 > 0),0,游资,2.5,0),COLOR009CFF;\nSTICKLINE((游资 > 0),0,游资,0.7,0),COLORYELLOW;\nSTICKLINE((大户 > 0),0,大户,2.5,0),COLORFF8800;\nSTICKLINE((大户 > 0),0,大户,0.7,0),COLORLIBLUE;\nSTICKLINE((散户 > 0),0,散户,2.5,0),COLOR00CA00;\nSTICKLINE((散户 > 0),0,散户,0.7,0),COLORGREEN;"}},d.prototype.NewsNegative=function(){return{Name:"负面新闻",Description:"负面新闻统计",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"N",Value:5},{Name:"N2",Value:10}],Script:"负面:NEWS(1);\nMA1:MA(负面,N);\nMA2:MA(负面,N2);"}},d.prototype.UpDownAnalyze=function(){var t={Name:"涨跌趋势",Description:"涨跌趋势",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[u.MINUTE_ID,u.MULTIDAY_MINUTE_ID,u.KLINE_DAY_ID]},Args:[],Script:"上涨家数:UPCOUNT('CNA.CI'),COLORRED;\n下跌家数:DOWNCOUNT('CNA.CI'),COLORGREEN;"};return t},d.prototype.HK2SHSZ=function(){var t={Name:"北上资金",Description:"北上资金",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[u.MINUTE_ID,u.MULTIDAY_MINUTE_ID,u.KLINE_DAY_ID]},Args:[],Script:"净流入:HK2SHSZ(1),COLORSTICK;"};return t},d.prototype.ShareHolder=function(){var t={Name:"股东人数",Description:"股东人数",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[u.KLINE_DAY_ID,u.KLINE_MONTH_ID,u.KLINE_WEEK_ID,u.KLINE_YEAR_ID]},Args:[],Script:"人数:FINANCE(100);"};return t},d.prototype.VOLRate=function(){var t={Name:"量比",Description:"量比",IsMainIndex:!1,Condition:{Period:[u.MINUTE_ID,u.MULTIDAY_MINUTE_ID]},Args:[],Script:"LIANGBI:VOLR;"};return t},d.prototype.COLOR_KSTAR1=function(){return{Name:"十字星",Description:"十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH>LOW;"}},d.prototype.COLOR_KSTAR2=function(){return{Name:"早晨之星",Description:"早晨之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:(REF(CLOSE,2)/REF(OPEN,2)<0.95) && (REF(OPEN,1) < REF(CLOSE,2)) && (ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03) && CLOSE/OPEN>1.05 && CLOSE>REF(CLOSE,2);"}},d.prototype.COLOR_KSTAR3=function(){return{Name:"黄昏之星",Description:"黄昏之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05 && REF(OPEN,1)>REF(CLOSE,2) && ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03 && CLOSE/OPEN<0.95 && CLOSE<REF(CLOSE,2);"}},d.prototype.COLOR_SHI1=function(){return{Name:"长十字",Description:"长十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH/LOW>1.03;"}},d.prototype.COLOR_K220=function(){return{Name:"身怀六甲",Description:"身怀六甲",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1)>0.04&&\n            ABS(CLOSE-OPEN)/CLOSE<0.005&&\n            MAX(CLOSE,OPEN)<MAX(REF(CLOSE,1),REF(OPEN,1))&&\n            MIN(CLOSE,OPEN)>MIN(REF(CLOSE,1),REF(OPEN,1));"}},d.prototype.COLOR_K300=function(){return{Name:"三个白武士",Description:"三个白武士",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:UPNDAY(CLOSE,3)&&NDAY(CLOSE,OPEN,3);"}},d.prototype.COLOR_K310=function(){return{Name:"三只乌鸦",Description:"三只乌鸦",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:DOWNNDAY(CLOSE,3)&&NDAY(OPEN,CLOSE,3);"}},d.prototype.COLOR_K380=function(){return{Name:"光头阳线",Description:"光头阳线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:HIGH==CLOSE&&HIGH>LOW;"}},d.prototype.COLOR_K390=function(){return{Name:"光脚阴线",Description:"光脚阴线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:LOW==CLOSE&&HIGH>LOW;"}},d.prototype.COLOR_K134=function(){return{Name:"垂死十字",Description:"垂死十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&CLOSE==LOW&&CLOSE<HIGH;"}},d.prototype.COLOR_K140=function(){return{Name:"早晨十字星",Description:"早晨十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)<0.95&&\nREF(OPEN,1)<REF(CLOSE,2)&&\nREF(OPEN,1)==REF(CLOSE,1)&&\nCLOSE/OPEN>1.05&&CLOSE>REF(CLOSE,2);"}},d.prototype.COLOR_K150=function(){return{Name:"黄昏十字星",Description:"黄昏十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05&&\nREF(OPEN,1)>REF(CLOSE,2)&&\nREF(OPEN,1)=REF(CLOSE,1)&&\nCLOSE/OPEN<0.95&&CLOSE<REF(CLOSE,2);"}},d.prototype.COLOR_K160=function(){return{Name:"射击之星",Description:"射击之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE>MA(CLOSE,5);"}},d.prototype.COLOR_K165=function(){return{Name:"倒转锤头",Description:"倒转锤头",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE<MA(CLOSE,5);"}},d.prototype.COLOR_K170=function(){return{Name:"锤头",Description:"锤头",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE<MA(CLOSE,5);"}},d.prototype.COLOR_K180=function(){return{Name:"吊颈",Description:"吊颈",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE>MA(CLOSE,5);"}},d.prototype.COLOR_K190=function(){return{Name:"穿头破脚",Description:"穿头破脚",IsMainIndex:!0,InstructionType:2,Script:"OUT:(REF(CLOSE,1)/REF(OPEN,1)>1.03&&\nCLOSE/OPEN<0.96&&\nCLOSE<REF(OPEN,1)&&OPEN>REF(CLOSE,1))||\n(REF(CLOSE,1)/REF(OPEN,1)<0.97&&\nCLOSE/OPEN>1.04&&\nCLOSE>REF(OPEN,1)&&OPEN<REF(CLOSE,1));"}},d.prototype.COLOR_SWORD=function(){return{Name:"剑",Description:"剑",IsMainIndex:!0,InstructionType:2,Script:"AA:=VOL>REF(VOL,1)||VOL>(CAPITAL*0.1);\nBB:=OPEN>=(REF(HIGH,1))&&REF(HIGH,1)>(REF(HIGH,2)*1.06);\nCC:=CLOSE>(REF(CLOSE,1))-(REF(CLOSE,1)*0.01);\nDD:=CLOSE<(HIGH*0.965) && HIGH>(OPEN*1.05);\nEE:=LOW<OPEN && LOW<CLOSE&&HIGH>(REF(CLOSE,1)*1.06);\nFF:=(HIGH-(MAX(OPEN,CLOSE)))/2>(MIN(OPEN,CLOSE))-LOW;\nGG:=(ABS(OPEN-CLOSE))/2<(MIN(OPEN,CLOSE)-LOW);\nSWORDO:AA&&BB&&CC&&DD&&EE&&FF&&GG;"}},d.prototype.COLOR_CSFR=function(){return{Name:"出水芙蓉",Description:"出水芙蓉",IsMainIndex:!0,InstructionType:2,Script:"A:=CLOSE>OPEN;\nB:=A&&CLOSE>MA(CLOSE,S)&&CLOSE>MA(CLOSE,M)&&CLOSE>MA(CLOSE,LL);\nCC:=B&&OPEN<MA(CLOSE,M)&&OPEN<MA(CLOSE,LL);\nCSFRO:CC&&(CLOSE-OPEN)>0.0618*CLOSE;"}},d.prototype.COLOR_WYGD=function(){return{Name:"乌云盖顶",Description:"乌云盖顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)>1.03 AND \nCLOSE/OPEN<0.97 AND \nOPEN>REF(CLOSE,1) AND CLOSE<REF(CLOSE,1), 3);"}},d.prototype.COLOR_SGCJ=function(){return{Name:"曙光初现",Description:"曙光初现",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)<0.97 AND \nCLOSE/OPEN>1.03 AND \nOPEN<REF(CLOSE,1) AND CLOSE>REF(CLOSE,1), 3);"}},d.prototype.COLOR_SZTAI=function(){return{Name:"十字胎",Description:"十字胎",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1) > 0.04 AND \nCLOSE==OPEN AND CLOSE < MAX(REF(CLOSE,1),REF(OPEN,1)) AND \nCLOSE > MIN(REF(CLOSE,1),REF(OPEN,1)), 2);"}},d.prototype.COLOR_PINGDING=function(){return{Name:"平顶",Description:"平顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET(ABS(HIGH-REF(HIGH,1))/HIGH<0.001,2);"}},d.prototype.COLOR_PINGDI=function(){return{Name:"平底",Description:"平底",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET((ABS(LOW-REF(LOW,1))/LOW<0.001 AND \nABS(REF(LOW,1)-REF(LOW,2))/REF(LOW,1)<=0.001),2);"}},d.prototype.COLOR_DAYANZHU=function(){return{Name:"大阳烛",Description:"大阳烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:CLOSE/OPEN>1.05 AND HIGH/LOW < CLOSE/OPEN+0.018;"}},d.prototype.COLOR_DAYINGZHU=function(){return{Name:"大阴烛",Description:"大阴烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:OPEN/CLOSE > 1.05 AND HIGH/LOW < OPEN/CLOSE+0.018;"}},d.prototype.COLOR_HYFG=function(){return{Name:"好友反攻",Description:"好友反攻",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( (REF(CLOSE,1)<REF(OPEN,1) AND \nCLOSE>OPEN AND ABS(CLOSE-REF(CLOSE,1))/CLOSE<0.002),2);"}},d.prototype.COLOR_TKQK=function(){return{Name:"跳空缺口",Description:"跳空缺口",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( HIGH<REF(LOW,1) OR LOW>REF(HIGH,1),2);"}},d.prototype.COLOR_SFWY=function(){return{Name:"双飞乌鸦",Description:"双飞乌鸦",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( REF(CLOSE,1)<REF(OPEN,1) AND CLOSE<OPEN AND CLOSE/OPEN<0.98,1);"}},d.prototype.COLOR_SSSBQ=function(){return{Name:"上升三部曲",Description:"上升三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)>1.03 AND \nREF(CLOSE,3)<REF(OPEN,3) AND \nREF(CLOSE,2)<REF(OPEN,2) AND \nREF(CLOSE,1)<REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN>1.03 AND \nCLOSE>REF(CLOSE,4), 5);"}},d.prototype.COLOR_XDSBQ=function(){return{Name:"下跌三部曲",Description:"下跌三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)<0.97 AND \nREF(CLOSE,3)>REF(OPEN,3) AND \nREF(CLOSE,2)>REF(OPEN,2) AND \nREF(CLOSE,1)>REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN<0.97 AND \nCLOSE<REF(CLOSE,4), 5);"}},d.prototype.COLOR_CHXY=function(){return{Name:"长下影",Description:"长下影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(MIN(CLOSE,OPEN)-LOW)/(HIGH-LOW)>0.667;"}},d.prototype.COLOR_CHSY=function(){return{Name:"长上影",Description:"长上影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(HIGH-MAX(CLOSE,OPEN))/(HIGH-LOW)>0.667,COLORBLUE;"}},d.prototype.COLOR_FENLI=function(){return{Name:"分离",Description:"分离",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( OPEN==REF(OPEN,1) AND (CLOSE-OPEN)*(REF(CLOSE,1)-REF(OPEN,1))<0,2);"}},d.prototype.TRADE_BIAS=function(){return{Name:"BIAS",Description:"乖离率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:6},{Name:"LH",Value:6}],Script:"BIAS:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nENTERLONG:CROSS(-LL,BIAS);\nEXITLONG:CROSS(BIAS,LH);"}},d.prototype.TRADE_CCI=function(){return{Name:"CCI",Description:"CCI专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:=(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));\nINDEX:=CCI;\nENTERLONG:CROSS(INDEX,-100);\nEXITLONG:CROSS(100,INDEX);"}},d.prototype.TRADE_DMI=function(){return{Name:"DMI",Description:"趋向专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"MTR:=SUM(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nPDM:=SUM(IF(HD>0&&HD>LD,HD,0),N);\nMDM:=SUM(IF(LD>0&&LD>HD,LD,0),N);\nPDI:=PDM*100/MTR;\nMDI:=MDM*100/MTR;\nENTERLONG:CROSS(PDI,MDI);\nEXITLONG:CROSS(MDI,PDI);"}},d.prototype.TRADE_KD=function(){return{Name:"KD",Description:"KD指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"WRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nWK:=SMA(WRSV,M1,1);\nD:=SMA(WK,M2,1);\nENTERLONG:CROSS(WK,D)&&WK<20;\nEXITLONG:CROSS(D,WK)&&WK>80;"}},d.prototype.TRADE_BOLL=function(){return{Name:"BOLL",Description:"布林带专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:20}],Script:"MID :=MA(CLOSE,N);\nUPPER:=MID+2*STD(CLOSE,N);\nLOWER:=MID-2*STD(CLOSE,N);\nENTERLONG:CROSS(CLOSE,LOWER);\nEXITLONG:CROSS(CLOSE,UPPER);"}},d.prototype.TRADE_KDJ=function(){return{Name:"KDJ",Description:"KDJ专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,M1,1);\nD:=SMA(K,M1,1);\nJ:=3*K-2*D;\nENTERLONG:CROSS(J,0);\nEXITLONG:CROSS(100,J);"}},d.prototype.TRADE_MA=function(){return{Name:"MA",Description:"均线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"SHORT",Value:5},{Name:"LONG",Value:20}],Script:"ENTERLONG:CROSS(MA(CLOSE,SHORT),MA(CLOSE,LONG));\nEXITLONG:CROSS(MA(CLOSE,LONG),MA(CLOSE,SHORT));"}},d.prototype.TRADE_MACD=function(){return{Name:"MACD",Description:"MACD专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"LONG",Value:26},{Name:"SHORT",Value:12},{Name:"M",Value:9}],Script:"DIFF:=EMA(CLOSE,SHORT) - EMA(CLOSE,LONG);\nDEA  := EMA(DIFF,M);\nMACD := 2*(DIFF-DEA);\nENTERLONG:CROSS(MACD,0);\nEXITLONG:CROSS(0,MACD);"}},d.prototype.TRADE_MTM=function(){return{Name:"MTM",Description:"动力指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6}],Script:"WMTM:=C-REF(C,N);\nENTERLONG:CROSS(WMTM,0);\nEXITLONG:CROSS(0,WMTM);"}},d.prototype.TRADE_PSY=function(){return{Name:"PSY",Description:"PSY心理线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:10},{Name:"LH",Value:85}],Script:"MYPSY:=COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\nENTERLONG:CROSS(LL,MYPSY);\nEXITLONG:CROSS(MYPSY,LH);"}},d.prototype.TRADE_ROC=function(){return{Name:"ROC",Description:"变动速率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"WROC:=MA(100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),M);\nENTERLONG:CROSS(WROC,0);\nEXITLONG:CROSS(0,WROC);"}},d.prototype.TRADE_RSI=function(){return{Name:"RSI",Description:"相对强弱专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6},{Name:"LL",Value:20},{Name:"LH",Value:80}],Script:"LC:=REF(CLOSE,1);\nWRSI:=SMA(MAX(CLOSE-LC,0),N,1)/SMA(ABS(CLOSE-LC),N,1)*100;\nENTERLONG:CROSS(WRSI,LL);\nEXITLONG:CROSS(LH,WRSI);"}},d.prototype.TRADE_VR=function(){return{Name:"VR",Description:"VR容量比率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:26},{Name:"LL",Value:70},{Name:"LH",Value:250}],Script:"WVR := SUM((IF(CLOSE>OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)/SUM((IF(CLOSE<OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)*100;\nENTERLONG:CROSS(LL,WVR);\nEXITLONG:CROSS(WVR,LH);"}},d.prototype.TRADE_DPSJ=function(){return{Name:"DPSJ",Description:"大盘随机专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N1",Value:18},{Name:"N2",Value:12}],Script:"RSV:=(INDEXC-LLV(INDEXL,N1))/(HHV(INDEXH,N1)-LLV(INDEXL,N1))*100;\nK:=SMA(RSV,N2,1);\nHSL:VOL/100/(FINANCE(7));\nENTERLONG: CROSS(K,20);\nEXITLONG: (CROSS(HSL,5) OR CROSS(K,80));"}},d.prototype.Zealink_Index1=function(){return{Name:"资金吸筹",Description:"资金吸筹",IsMainIndex:!1,Args:[],Script:"VAR1:=REF((LOW+OPEN+CLOSE+HIGH)/4,1);  \nVAR2:= SMA(ABS(LOW - VAR1), 13, 1) / SMA(MAX(LOW - VAR1, 0), 10, 1);\nVAR3:= EMA(VAR2, 10);\nVAR4:= LLV(LOW, 33);\nVAR5:= EMA(IF(LOW <= VAR4, VAR3, 0), 3) * 0.2;\n主力进场: IF(VAR5 > REF(VAR5, 1), VAR5,0), COLORRED, NODRAW;\n洗盘: IF(VAR5 < REF(VAR5, 1),  VAR5,0), COLORYELLOW, NODRAW;\nSTICKLINE(VAR5> REF(VAR5, 1),0, VAR5, 20, 0), COLORRED;\nSTICKLINE(VAR5 < REF(VAR5, 1), 0, VAR5, 20, 0), COLORYELLOW;"}},d.prototype.Zealink_Index2=function(){return{Name:"牛熊区间",Description:"牛熊区间",IsMainIndex:!1,YSpecificMaxMin:{Max:100,Min:1,Count:4},YSplitScale:[1,50,100],Args:[],Script:"短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+ 13 * REF(H, 7) + 12 * REF(H, 8) + 11 * REF(H, 9) + 10 * REF(H, 10) + 9 * REF(H, 11) + 8 * REF(H, 12)\n+ 7 * REF(H, 13) + 6 * REF(H, 14) + 5 * REF(H, 15) + 4 * REF(H, 16) + 3 * REF(H, 17) + 2 * REF(H, 18) +\nREF(H, 20))/ 210, COLORBLUE, LINETHICK1;\n短低L:= (20 * L + 19 * REF(L, 1) + 18 * REF(L, 2) + 17 * REF(L, 3) + 16 * REF(L, 4) + 15 * REF(L, 5) + 14 * REF(L, 6)\n+ 13 * REF(L, 7) + 12 * REF(L, 8) + 11 * REF(L, 9) + 10 * REF(L, 10) + 9 * REF(L, 11) + 8 * REF(L, 12)\n+ 7 * REF(L, 13) + 6 * REF(L, 14) + 5 * REF(L, 15) + 4 * REF(L, 16) + 3 * REF(L, 17) + 2 * REF(L, 18) +\nREF(L, 20)) / 210, COLORBLUE, LINETHICK1;\nD90H:= EMA(短高H, 90), COLORRED, LINETHICK1;\nD90L:= EMA(短低L, 90), COLORRED, LINETHICK1;\nD90差:= D90H - D90L;\nD90顶:= D90H + D90差 * 2, COLORRED, LINETHICK1;\nD90底:= D90L - D90差 * 2, COLORRED, LINETHICK1;\n高0:= (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1 + EMA(EMA(H, 25), 25), LINETHICK1, COLORWHITE;\n低0:= EMA(EMA(L, 25), 25) - (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1, LINETHICK1, COLORWHITE;\n多头定位:= 低0 >= D90底 AND 高0 >= D90顶;\n空头定位:= 高0 <= D90顶 AND 低0 <= D90底;\n震荡定位:= 低0 >= D90底 AND 高0 <= D90顶;\n牛市: IF(多头定位 == 1, 100, 1), COLORRED, NODRAW;\n熊市: IF(空头定位 == 1, 100, 1), COLORGREEN, NODRAW;\n震荡: IF(震荡定位 == 1, 100, 1), COLORGRAY, NODRAW;\nSTICKLINE(多头定位 == 1, 100, 1, 100, 0), COLORRED;\nSTICKLINE(空头定位 == 1, 100, 1, 100, 0), COLORGREEN;\nSTICKLINE(震荡定位 == 1, 100, 1, 100, 0), COLORGRAY;"}},d.prototype.Zealink_Index3=function(){return{Name:"持仓信号",Description:"持仓信号",IsMainIndex:!0,Args:[],Script:'买线:=EMA(C,2);\n卖线:=EMA(SLOPE(C,30)*5+C,20); \nBU:=CROSS(买线,卖线);\nSEL:=CROSS(卖线,买线);\n\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORRED;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORGREEN;\n\nHHJSJDA:=(3*CLOSE+OPEN+LOW+HIGH)/6;\nHHJSJDB:(19*HHJSJDA+19*REF(HHJSJDA,1)+18*REF(HHJSJDA,2)+17*REF(HHJSJDA,3)+16*REF(HHJSJDA,4)+15*REF(HHJSJDA,5)+14*REF(HHJSJDA,6)\n+13*REF(HHJSJDA,7)+12*REF(HHJSJDA,8)+11*REF(HHJSJDA,9)+10*REF(HHJSJDA,10)+9*REF(HHJSJDA,11)+8*REF(HHJSJDA,12)+7*REF(HHJSJDA,13)+6*REF(HHJSJDA,14)+5*REF(HHJSJDA,15)+4*REF(HHJSJDA,16)+3*REF(HHJSJDA,17)+2*REF\n(HHJSJDA,20)+REF(HHJSJDA,19))/210,COLORYELLOW;\nHHJSJDC:MA(HHJSJDB,5),COLORRED;\n\nSVAR11:=HHV(HIGH,34);\nSVAR14:=CLOSE-REF(CLOSE,1);\nSVAR15:=MAX(SVAR14,0);\nSVAR16:=ABS(SVAR14);\nSVAR17:=SMA(SVAR15,7,1)/SMA(SVAR16,7,1)*100;\nSVAR18:=SMA(SVAR15,13,1)/SMA(SVAR16,13,1)*100;\nSVAR19:=BARSCOUNT(CLOSE);\nSVAR20:=SMA(MAX(SVAR14,0),6,1)/SMA(ABS(SVAR14),6,1)*100;\nSVAR21:=(-200)*(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60))+100;\nSVAR1A:=(CLOSE-LLV(LOW,15))/(HHV(HIGH,15)-LLV(LOW,15))*100;\nSVAR1B:=SMA((SMA(SVAR1A,4,1)-50)*2,3,1);\nSVAR1C:=(INDEXC-LLV(INDEXL,14))/(HHV(INDEXH,14)-LLV(INDEXL,14))*100;\nSVAR1D:=SMA(SVAR1C,4,1);\nSVAR1E:=SMA(SVAR1D,3,1);\nSVAR1F:=(HHV(HIGH,30)-CLOSE)/CLOSE*100;\nSVAR22:=SVAR20<=25 AND SVAR21<-95 AND SVAR1F>20 AND SVAR1B<-30 AND SVAR1E<30 AND SVAR11-CLOSE>=-0.25 AND SVAR17<22 AND SVAR18<28 AND SVAR19>50;\nBUY3:=CROSS(SVAR22,0.5) AND COUNT(SVAR22==1,10)==1;\n\nSVARF:=LOW*0.9;\nSVAR10X:=100-3*SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1)+2*SMA(SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1),15,1);\nSVAR11X:=SVARF<REF(SVAR10X,1) AND VOL>REF(VOL,1) AND CLOSE>REF(CLOSE,1);\nBUY2:=SVAR11X AND COUNT(SVAR11X,30)==1;\n\nVAR1:=(CLOSE+HIGH+LOW+OPEN)/4;\nVAR2:=SUMBARS(VOL,CAPITAL);\nVAR3:=HHV(VAR1,VAR2);\nVAR4:=LLV(VAR1,VAR2);\nVAR5:=(2*VAR1-VAR4-REF(VAR4,1))/(VAR3-VAR4);\nVAR6:=(VAR1-VAR4)/(VAR3-VAR4);\nVAR7:=IF(VAR1<=VAR4,VAR5*60,VAR6*60);\nVAR8:=600*(EMA(CLOSE,3)-EMA(LOW,30))/EMA(LOW,30);\nVAR9:=EMA(VAR8,7);\nVARC:=HHV(HIGH,9)-LLV(LOW,9);\nVARD:=HHV(HIGH,9)-CLOSE;\nVARE:=CLOSE-LLV(LOW,9);\nVARF:=VARD/VARC*100-70;\nVAR10:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*100;\nVAR11:=(2*CLOSE+HIGH+LOW)/4;\nVAR12:=SMA(VARE/VARC*100,3,1);\nVAR13:=LLV(LOW,34);\nVAR14:=SMA(VAR12,3,1)-SMA(VARF,9,1);\nVAR15:=IF(VAR14>100,VAR14-100,0);\nVAR16:=HHV(HIGH,34);\nVAR17:=EMA((VAR11-VAR13)/(VAR16-VAR13)*100,8);\nVAR18:=EMA(VAR17,5);\nBUY:=STICKLINE(VAR17-VAR18>0,VAR17,VAR18,8,1),COLORRED;\nSELL:=STICKLINE(VAR17-VAR18<0,VAR17,VAR18,8,1),COLORGREEN;\nBUY1:=VAR17>VAR18 AND REF(VAR17,1)<REF(VAR18,1);\nSELL1:=VAR17<VAR18 AND REF(VAR17,1)>REF(VAR18,1);\n\n短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+13*REF(H,7)+12*REF(H,8)+11*REF(H,9)+10*REF(H,10)+9*REF(H,11)+8*REF(H,12)\n+7*REF(H,13)+6*REF(H,14)+5*REF(H,15)+4*REF(H,16)+3*REF(H,17)+2*REF(H,18)+\nREF(H,20))/210,COLORBLUE,LINETHICK1;\n短低L:=(20*L+19*REF(L,1)+18*REF(L,2)+17*REF(L,3)+16*REF(L,4)+15*REF(L,5)+14*REF(L,6)\n+13*REF(L,7)+12*REF(L,8)+11*REF(L,9)+10*REF(L,10)+9*REF(L,11)+8*REF(L,12)\n+7*REF(L,13)+6*REF(L,14)+5*REF(L,15)+4*REF(L,16)+3*REF(L,17)+2*REF(L,18)+\nREF(L,20))/210,COLORBLUE,LINETHICK1;\nD90H:=EMA(短高H,90),COLORRED,LINETHICK1;\nD90L:=EMA(短低L,90),COLORRED,LINETHICK1;\nD90差:=D90H-D90L;\nD90顶:=D90H+D90差*2,COLORRED,LINETHICK1;\nD90底:=D90L-D90差*2,COLORRED,LINETHICK1;\n高0:=(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1+EMA(EMA(H,25),25),LINETHICK1,COLORWHITE;\n低0:=EMA(EMA(L,25),25)-(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1,LINETHICK1,COLORWHITE;\n多头定位:=低0>=D90底 AND 高0>=D90顶;\n空头定位:=高0<=D90顶 AND 低0<=D90底;\n震荡定位:=低0>=D90底 AND 高0<=D90顶;\n\n牛市:=多头定位==1;\n熊市:=空头定位==1;\n震荡:=震荡定位==1;\n\n非牛市:=熊市 OR 震荡;\n非熊市:=牛市 OR 震荡;\n\nBUY11:=BUY1 AND 非熊市;\nSELL11:=SELL1 AND 震荡定位==0;\n\nBUY111:=BUY11 AND COUNT(BUY11,10)<2;\nBUY0:=BUY111 AND COUNT(BUY111,21)==1;\nSELL111:=SELL11 AND COUNT(SELL11,10)<2;\nSELL0:=SELL111 AND COUNT(SELL111,10)==1;\n\nXK1:=EMA(100*(CLOSE-LLV(LOW,34))/(HHV(HIGH,34)-LLV(LOW,34)),3)/4;\n上穿:=REF(XK1,1)<5 AND XK1>=5;\nBUY4:=上穿 AND COUNT(XK1<2,12)<1;\n\nSELL2:=REF(XK1,1)<=22.5 AND XK1>22.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,5)>0;\nSELL3:=REF(XK1,1)>=21.5 AND XK1<21.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,12)>1;\nSELL4:=SELL2 OR SELL3 AND COUNT((SELL2 OR SELL3)==1,5)==1;\n\nSUPERDRAWTEXT(BUY0,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL0,H,"风险",1,10),COLORGREEN;\nSUPERDRAWTEXT(BUY2,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(BUY4,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL4,H,"风险",1,10),COLORGREEN;'}},d.prototype.Zealink_Index4=function(){return{Name:"股东实际增减持",Description:"股东实际增减持",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"增持:NEWS(4),NODRAW,COLORRED;\n减持:NEWS(5),NODRAW,COLORGREEN;\nSTICKLINE(增持>0,0,增持,1,0),COLORRED;\nSTICKLINE(减持<0,0,减持,1,0),COLORGREEN;"}},d.prototype.Zealink_Index5=function(){return{Name:"大宗交易",Description:"大宗交易",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"交易次数:NEWS(7);"}},d.prototype.Zealink_Index6=function(){return{Name:"信托持股",Description:"信托持股",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"家数:NEWS(6);"}},d.prototype.Zealink_Index7=function(){return{Name:"官网新闻",Description:"官网新闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(8);"}},d.prototype.Zealink_Index8=function(){return{Name:"高管要闻",Description:"高管要闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(9);"}},d.prototype.Zealink_Index9=function(){return{Name:"股权质押",Description:"股权质押",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"次数:NEWS(10);"}},d.prototype.Zealink_Index10=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3; \nA:=EMA(JJ,10); \nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13); \nM4:=EMA(M2,55); \nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\nINDEXCLOSE:INDEXC,EXDATA;\nINDEXOPEN:INDEXO,EXDATA;\nDRAWICON(REF(B1,1),L*0.97,13);\nDRAWICON(REF(S1,1),H*1.03,14);"}},d.prototype.Zealink_Index11=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3;\nA:=EMA(JJ,10);\nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13);\nM4:=EMA(M2,55);\n持股区域:=STICKLINE(A>B,A,B,2,0),COLORYELLOW; \n持币区域:=STICKLINE(A<B,A,B,2,0),COLORBLUE;\n\nVR1:=(C+O+REF(C,1))/3;\nVR3:=HHV(VR1,21);\nVR4:=LLV(VR1,21);\nVR5:=(2*VR1-VR4-REF(VR4,1))/(VR3-VR4);\nVR6:=(VR1-VR4)/(VR3-VR4);\nVR7:=IF(VR1<=VR4,VR5*60,VR6*60);\nVR8:=600*(EMA(C,3)-EMA(L,30))/EMA(L,30);\nVR9:=EMA(VR8,7);\nVRA:=(WINNER(120*C/100)-WINNER(100*C/100))*100;\nVRB:=(-100)*(WINNER(120*C/100)-WINNER(100*C/100))+5;\nVRC:=HHV(H,9)-LLV(L,9);\nVRD:=HHV(H,9)-C;\nVRE:=C-LLV(L,9);\nVRF:=VRD/VRC*100-70;\nVR10:=(C-LLV(L,60))/(HHV(H,60)-LLV(L,60))*100;\nVR11:=(2*C+H+L)/4;\nVR12:=SMA(VRE/VRC*100,3,1);\nVR13:=LLV(L,34);\nVR14:=SMA(VR12,3,1)-SMA(VRF,9,1);\nVR15:=IF(VR14>100,VR14-100,0);\nVR16:=HHV(H,34);\nVR17:=EMA((VR11-VR13)/(VR16-VR13)*100,8);\nVR18:=EMA(VR17,5);\n\nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\n\nB9:=BARSLAST(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)));\nS9:=BARSLAST(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)));\n\nDRAWICON(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)) AND REF(B9,2)>=S9,L*0.97,13);\nDRAWICON(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)) AND REF(S9,1)>=B9,H*1.03,14);\n\nDRAWKLINE_IF(VR17>VR18,HIGH,CLOSE,LOW,OPEN),COLORRED;\nDRAWKLINE_IF(VR17<VR18,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n\nINDEXCLOSE:INDEXC,EXDATA;\t\t//取指数的收盘价 回测的时候计算BATE系数用 "}},d.prototype.HeikinAshi=function(){return{Name:"平均K线",Description:"Heikin-Ashi 平均K线",IsMainIndex:!0,KLineType:-1,Args:[],Script:"HCLOSE:(OPEN+HIGH+LOW+CLOSE)/4, NODRAW;\nHOPEN:(REF(OPEN,1)+REF(CLOSE,1))/2,NODRAW;\nHHIGH:MAX(HIGH,MAX(HOPEN,HCLOSE)),NODRAW;\nHLOW:MIN(LOW,MIN(HOPEN,HCLOSE)),NODRAW;\nDRAWKLINE(HHIGH,HOPEN,HLOW,HCLOSE);"}},d.prototype.ADL=function(){var t={Name:"腾落指标",Description:"腾落指标",IsMainIndex:!1,StringFormat:2,Condition:{Period:[u.KLINE_DAY_ID,u.KLINE_WEEK_ID,u.KLINE_TWOWEEK_ID,u.KLINE_MONTH_ID,u.KLINE_QUARTER_ID,u.KLINE_YEAR_ID],Include:["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]},Args:[{Name:"M",Value:7}],Script:"ADL:SUM(ADVANCE-DECLINE,0);\nMAADL:MA(ADL,M);"};return t},d.prototype.EMPTY=function(){return{Name:"",Description:"空指标",IsMainIndex:!0,Args:[],Script:"VAR2:=C;"}},d.prototype.CJL=function(){return{Name:"CJL",Description:"期货持仓量",IsMainIndex:!1,Args:[],Script:"成交量:VOL,VOLSTICK;\n持仓量:VOLINSTK,LINEOVERLAY;"}},d.prototype.ASI=function(){return{Name:"ASI",Description:"振动升降指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6}],Script:"X_1:=REF(CLOSE,1);\nX_2:=ABS(HIGH-X_1);\nX_3:=ABS(LOW-X_1);\nX_4:=ABS(HIGH-REF(LOW,1));\nX_5:=ABS(X_1-REF(OPEN,1));\nX_6:=IF(X_2>X_3 AND X_2>X_4,X_2+X_3/2+X_5/4,IF(X_3>X_4 AND X_3>X_2,X_3+X_2/2+X_5/4,X_4+X_5/4));\nX_7:=CLOSE-X_1+(CLOSE-OPEN)/2+X_1-REF(OPEN,1);\nX_8:=8*X_7/X_6*MAX(X_2,X_3);\nASI:SUM(X_8,0),LINETHICK2;\nMASI:MA(ASI,N1),LINETHICK2;"}},d.prototype.DC=function(){return{Name:"DC",Description:"唐奇安通道",IsMainIndex:!0,Args:[{Name:"N1",Value:20}],Script:"UPPER:HHV(H,N1),COLORBLUE,LINETHICK2;\nLOWER:LLV(L,N1),COLORBLUE,LINETHICK2;\nMIDDLE:(UPPER+LOWER)/2,COLORRED,LINETHICK3;"}},d.prototype.DEMA=function(){return{Name:"DEMA",Description:"双重指数移动均线",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"ERR:=C-EMA(C,N1);\nDEMA:EMA(C,10)+EMA(ERR,N1);"}},d.prototype.VWAP=function(){return{Name:"VWAP",Description:"成交量加权平均价",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"PRICE:=(H+L+C)/3;\nT2:=VOL*PRICE;\nVWAP:SUM(T2,0)/SUM(VOL,0);"}},d.prototype.SQJZ=function(){return{Name:"SQJZ",Description:"神奇九转",IsMainIndex:!0,Script:"B:=C<REF(C,4);\nN:=CURRBARSCOUNT;\nB1:=(N=6 AND REFXV(COUNT(B,6),5)=6) OR (N=7 AND REFXV(COUNT(B,7),6)=7) OR (N=8 AND REFXV(COUNT(B,8),7)=8) OR (N>=9 AND REFXV(COUNT(B,9),8)=9);\nDRAWNUMBER(B1 AND REF(B,1)=0,L,1),COLORMAGENTA;\nB2:=(N=5 AND REFXV(COUNT(B,6),4)=6) OR (N=6 AND REFXV(COUNT(B,7),5)=7) OR (N=7 AND REFXV(COUNT(B,8),6)=8) OR (N>=8 AND REFXV(COUNT(B,9),7)=9);\nDRAWNUMBER(B2 AND REF(B,2)=0,L,2),COLORMAGENTA;\nB8:=(N=1 AND COUNT(B,8)=8) OR (N>=2 AND REFXV(COUNT(B,9),1)=9);\nDRAWNUMBER(B8 AND REF(B,8)=0,L,8),COLORMAGENTA;\nB9:=(N>=1 AND COUNT(B,9)=9);\nDRAWNUMBER(B9 AND REF(B,9)=0,L,9),COLORBROWN;\nS:=C>REF(C,4);\nS1:=(N=6 AND REFXV(COUNT(S,6),5)=6) OR (N=7 AND REFXV(COUNT(S,7),6)=7) OR (N=8 AND REFXV(COUNT(S,8),7)=8) OR (N>=9 AND REFXV(COUNT(S,9),8)=9);\nDRAWNUMBER(S1 AND REF(S,1)=0,H,1),COLORMAGENTA,DRAWABOVE;\nS2:=(N=5 AND REFXV(COUNT(S,6),4)=6) OR (N=6 AND REFXV(COUNT(S,7),5)=7) OR (N=7 AND REFXV(COUNT(S,8),6)=8) OR (N>=8 AND REFXV(COUNT(S,9),7)=9);\nDRAWNUMBER(S2 AND REF(S,2)=0,H,2),COLORMAGENTA,DRAWABOVE;\nS8:=(N=1 AND COUNT(S,8)=8) OR (N>=2 AND REFXV(COUNT(S,9),1)=9);\nDRAWNUMBER(S8 AND REF(S,8)=0,H,8),COLORMAGENTA,DRAWABOVE;\nS9:=(N>=1 AND COUNT(S,9)=9);\nDRAWNUMBER(S9 AND REF(S,9)=0,H,9),COLORGREEN,DRAWABOVE;"}},d.prototype.XT=function(){return{Name:"XT",Description:"箱体",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"【箱顶】:PEAK(CLOSE,N,1)*0.98;\n【箱底】:TROUGH(CLOSE,N,1)*1.02;\n【箱高】:100*(【箱顶】-【箱底】)/【箱底】,NODRAW;"}},d.prototype.CFJT=function(){return{Name:"CFJT",Description:"财富阶梯",IsMainIndex:!0,Script:"突破:=REF(EMA(C,14),1);\nA1X:=(EMA(C,10)-突破)/突破*100;\n多方:=IF(A1X>=0,REF(EMA(C,10),BARSLAST(CROSS(A1X,0))+1),DRAWNULL);\n空方:=IF(A1X<0,REF(EMA(C,10),BARSLAST(CROSS(0,A1X))+1),DRAWNULL);\nSTICKLINE(A1X>=0,多方,突破,110,0),COLORRED;\nSTICKLINE(A1X<0,空方,突破,110,0),COLORGREEN;"}},d.prototype.CYX=function(){return{Name:"CYX",Description:"撑压线",IsMainIndex:!0,Args:[{Name:"N",Value:7}],Script:"Z1:=STRCAT(HYBLOCK,' ');\nZ2:=STRCAT(Z1,DYBLOCK);\nZ3:=STRCAT(Z2,' ');\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,STRCAT(Z3,GNBLOCK)),COLOR00C0C0;\nA1:=REF(H,N)=HHV(H,2*N+1);\nB1:=FILTER(A1,N);\nC1:=BACKSET(B1,N+1);\nD1:=FILTER(C1,N);\nA2:=REF(L,N)=LLV(L,2*N+1);\nB2:=FILTER(A2,N);\nC2:=BACKSET(B2,N+1);\nD2:=FILTER(C2,N);\nE1:=(REF(LLV(L,2*N),1)+REF(HHV(H,2*N),1))/2;\nE2:=(H+L)/2;\nH1:=(D1 AND NOT(D2 AND E1>=E2)) OR ISLASTBAR OR BARSCOUNT(C)=1;\nL1:=(D2 AND NOT(D1 AND E1<E2));\nH2:=D1 AND NOT(D2 AND E1>=E2);\nX1:=REF(BARSLAST(H1),1)+1;\nF1:=BACKSET(H1 AND COUNT(L1,X1)>0,LLVBARS(IF(L1,L,10000),X1));\nG1:=F1>REF(F1,1);\nI1:=BACKSET(G1,2);\nLD:=I1>REF(I1,1);\nL2:=LD OR ISLASTBAR OR BARSCOUNT(C)=1;\nX2:=REF(BARSLAST(L2),1)+1;\nF2:=BACKSET(L2 AND COUNT(H2,X2)>0,HHVBARS(IF(H2,H,0),X2));\nG2:=F2>REF(F2,1);\nI2:=BACKSET(G2,2);\nHD:=I2>REF(I2,1);\nR1:=BACKSET(ISLASTBAR,BARSLAST(HD)+1);\nS1:=R1>REF(R1,1);\nT1:=BACKSET(ISLASTBAR,BARSLAST(LD)+1);\nU1:=T1>REF(T1,1);\nR2:=BACKSET(S1,REF(BARSLAST(HD),1)+2);\nS2:=R2>REF(R2,1);\nT2:=BACKSET(U1,REF(BARSLAST(LD),1)+2);\nU2:=T2>REF(T2,1);\nDRAWLINE(S2,H,S1,H,1),LINETHICK2,COLORRED;\nDRAWLINE(U2,L,U1,L,1),LINETHICK2,COLORGREEN;"}},d.prototype.WAVE=function(){return{Name:"WAVE",Description:"波浪分析",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"ZIG(3,N);"}},d.prototype.ShareholderCount=function(){return{Name:"散户线",Description:"散户线",IsMainIndex:!1,Script:"GPJYVALUE(1,1,1);"}},d.prototype.NXTS=function(){return{Name:"NXTS",Description:"牛熊天数",IsMainIndex:!1,Args:[{Name:"N",Value:20}],Script:"Z:=ZIG(C,N);\n高点:=Z>REF(Z,1) AND Z>REFX(Z,1);\n低点:=Z<REF(Z,1) AND Z<REFX(Z,1);\nNG:=BARSLAST(高点);\nND:=BARSLAST(低点);\nD0:=DATETODAY(DATE)-DATETODAY(REF(DATE,BARSSINCE(C)));\nDG:=DATETODAY(DATE)-DATETODAY(REF(DATE,NG));\nDD:=DATETODAY(DATE)-DATETODAY(REF(DATE,ND));\nN1:=(NG>ND OR COUNT(高点,0)=0) AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)>(N/100);\nN2:=NG<ND AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN3:=NG<ND AND NG=0;\nN4:=COUNT(低点 OR 高点,0)=0 AND (HHV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))>(N/100);\nN5:=COUNT(低点,0)=0 AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN6:=COUNT(低点,0)=0 AND NG=0;\nX1:=(NG<ND OR COUNT(低点,0)=0) AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)<-(N/100);\nX2:=NG>ND AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX3:=NG>ND AND ND=0;\nX4:=COUNT(高点 OR 低点,0)=0 AND (LLV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))<-(N/100);\nX5:=COUNT(高点,0)=0 AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX6:=COUNT(高点,0)=0 AND ND=0;\n牛市天数:IF(N4 OR N5 OR N6,D0,IF(N1 OR N2 OR N3,DD,0)),COLORRED;\n熊市天数:IF(X4 OR X5 OR X6,D0,IF(X1 OR X2 OR X3,DG,0)),COLORGREEN;"}},d.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!1,Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},d.prototype.Margin4=function(){return{Name:"两融资金",Description:"两融资金",IsMainIndex:!1,Script:"TMPV:=IF(FINANCE(3)==0,REF(SCJYVALUE(1,1,1),1),REF(GPJYVALUE(3,1,1),1));\nTMPV1:=IF(FINANCE(3)==0,SCJYVALUE(1,1,0),GPJYVALUE(3,1,0));\n两融:IF(TMPV==0 OR TMPV1==0,DRAWNULL,IF(FINANCE(3)==0,(SCJYVALUE(1,1,1)-REF(SCJYVALUE(1,1,1),1))/10000-(SCJYVALUE(1,2,1)-REF(SCJYVALUE(1,2,1),1))/10000,((GPJYVALUE(3,1,1)-REF(GPJYVALUE(3,1,1),1))-((GPJYVALUE(3,2,1)*C/10000-(REF(GPJYVALUE(3,2,1),1)*REF(C,1)/10000)))))),NODRAW;\nSTICKLINE(两融>0,0,两融,2,0),COLORRED;\nSTICKLINE(两融<0,0,两融,2,0),COLORCYAN;"}},d.prototype.ZSDB=function(){return{Name:"ZSDB",Description:"指数对比(副图,需下载日线)",IsMainIndex:!1,Script:"A:=REF(INDEXC,1);\n指数涨幅:IF(A>0,(INDEXC-A)*100/A,0),NODRAW;\nDRAWKLINE(INDEXH,INDEXO,INDEXL,INDEXC);"}},d.prototype.NineTurns=function(){return{Name:"神奇九转",Description:"九转指标",IsMainIndex:!0,Script:"A1:=C>REF(C,4);\nA2:=C<REF(C,4);\nT1:=A2 AND REF(A1,1);\nT2:=A2 AND REF(T1,1);\nT3:=A2 AND REF(T2,1);\nT4:=A2 AND REF(T3,1);\nT5:=A2 AND REF(T4,1);\nT6:=A2 AND REF(T5,1);\nT7:=A2 AND REF(T6,1);\nT8:=A2 AND REF(T7,1);\nT9:=A2 AND REF(T8,1);\nT10:=A2 AND REF(T9,1);\nT11:=A2 AND REF(T10,1);\nT12:=A2 AND REF(T11,1);\nT13:=A2 AND REF(T12,1);\nT14:=A2 AND REF(T13,1);\nDRAWTEXT(T1,L*0.98,'1'),COLORGREEN;\nDRAWTEXT(T2,L*0.98,'2'),COLORGREEN;\nDRAWTEXT(T3,L*0.98,'3'),COLORGREEN;\nDRAWTEXT(T4,L*0.98,'4'),COLORGREEN;\nDRAWTEXT(T5,L*0.98,'5'),COLORGREEN;\nDRAWTEXT(T6,L*0.98,'6'),COLORGREEN;\nDRAWTEXT(T7,L*0.98,'7'),COLORGREEN;\nDRAWTEXT(T8,L*0.98,'8'),COLORGREEN;\nDRAWTEXT(T9,L*0.98,'9'),COLORBLUE;\nB1:=C<REF(C,4);\nB2:=C>REF(C,4);\nD1:=B2 AND REF(B1,1);\nD2:=B2 AND REF(D1,1);\nD3:=B2 AND REF(D2,1);\nD4:=B2 AND REF(D3,1);\nD5:=B2 AND REF(D4,1);\nD6:=B2 AND REF(D5,1);\nD7:=B2 AND REF(D6,1);\nD8:=B2 AND REF(D7,1);\nD9:=B2 AND REF(D8,1);\nD10:=B2 AND REF(D9,1);\nD11:=B2 AND REF(D10,1);\nD12:=B2 AND REF(D11,1);\nD13:=B2 AND REF(D12,1);\nD14:=B2 AND REF(D13,1);\nDRAWTEXT(D1,H*1.010,'1'),COLORBLUE;\nDRAWTEXT(D2,H*1.010,'2'),COLORBLUE;\nDRAWTEXT(D3,H*1.010,'3'),COLORBLUE;\nDRAWTEXT(D4,H*1.010,'4'),COLORBLUE;\nDRAWTEXT(D5,H*1.010,'5'),COLORBLUE;\nDRAWTEXT(D6,H*1.010,'6'),COLORBLUE;\nDRAWTEXT(D7,H*1.010,'7'),COLORBLUE;\nDRAWTEXT(D8,H*1.010,'8'),COLORBLUE;\nDRAWTEXT(D9,H*1.010,'9'),COLORGREEN;"}},d.prototype.TEST=function(){return{Name:"TEST",Description:"测试脚本",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"DRAWCHANNEL(OPEN>C,H,L, 'RGB(255,94,102)', 2 ,'5,5','RGBA(58,20,62,0.3)' );"}},!l)l={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};function f(t,e,a){this.DivElement=t,this.DivToolElement=null,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jschart-drawing",this.CanvasElement.id=b(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&l.Chart.Log("[JSChart::JSChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OffscreenCanvasElement,1==e&&(this.OffscreenCanvasElement=document.createElement("canvas")),this.CacheCanvasElement=null,a&&(this.CacheCanvasElement=document.createElement("canvas")),this.ModifyIndexDialog=new Dr(t),this.ChangeIndexDialog=new pr(t),this.MinuteDialog=new vr(t),this.MapExtraCanvasElement=new Map,this.CreateExtraCanvasElmement=function(e){if(this.MapExtraCanvasElement.has(e))return this.MapExtraCanvasElement.get(e);var a=document.createElement("canvas");a.className="jschart-drawing-extra",a.id=b(),e==f.CorssCursorCanvasKey?a.setAttribute("tabindex",5):a.setAttribute("tabindex",1),a.style&&(a.style.outline="none",a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style["pointer-events"]="none"),t.appendChild(a);var i={Element:a,Canvas:null};this.MapExtraCanvasElement.set(e,i)},this.GetExtraCanvas=function(t){if(!this.MapExtraCanvasElement.has(t))return null;var e=this.MapExtraCanvasElement.get(t);return e.Element?(e.Canvas||(e.Canvas=e.Element.getContext("2d")),e):null},this.OnSize=function(t){var e=parseInt(this.DivElement.style.height.replace("px",""));this.ToolElement&&(e-=this.ToolElement.style.height.replace("px","")),this.CanvasElement.height=e,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=I();this.CanvasElement.height*=a,this.CanvasElement.width*=a,this.OffscreenCanvasElement&&(this.OffscreenCanvasElement.height=this.CanvasElement.height,this.OffscreenCanvasElement.width=this.CanvasElement.width),this.CacheCanvasElement&&(this.CacheCanvasElement.height=this.CanvasElement.height,this.CacheCanvasElement.width=this.CanvasElement.width);var i,r=(0,h.default)(this.MapExtraCanvasElement);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=n[1],o=s.Element;o&&(o.height=this.CanvasElement.height,o.width=this.CanvasElement.width,o.style.width=this.CanvasElement.style.width,o.style.height=this.CanvasElement.style.height)}}catch(u){r.e(u)}finally{r.f()}l.Chart.Log("[JSChart::OnSize] devicePixelRatio=".concat(window.devicePixelRatio,", height=").concat(this.CanvasElement.height,", width=").concat(this.CanvasElement.width)),t&&0==t.Redraw||this.JSChartContainer&&(t&&!0===t.XYSplit&&this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.OnSize&&t&&1==t.Type?this.JSChartContainer.OnSize():(this.JSChartContainer.Frame&&this.JSChartContainer.Frame.SetSizeChage(!0),this.JSChartContainer.Draw()))},this.AdjustChartBorder=function(t){var e=I();if(t.Frame.ChartBorder.Left*=e,t.Frame.ChartBorder.Right*=e,t.Frame.ChartBorder.Top*=e,t.Frame.ChartBorder.Bottom*=e,t.Frame.AutoLeftBorder){var a=t.Frame.AutoLeftBorder;ze.IsNumber(a.MinWidth)&&(a.MinWidth*=e),ze.IsNumber(a.Blank)&&(a.Blank*=e)}if(t.Frame.AutoRightBorder){a=t.Frame.AutoRightBorder;ze.IsNumber(a.MinWidth)&&(a.MinWidth*=e),ze.IsNumber(a.Blank)&&(a.Blank*=e)}},this.AdjustTitleHeight=function(t){for(var e=I(),a=0;a<t.Frame.SubFrame.length;++a)t.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight*=e;t.ChartCorssCursor.TextHeight*=e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;ze.IsNumber(e.Border.Left)?t.Frame.ChartBorder.Left=e.Border.Left:e.Border.Left=t.Frame.ChartBorder.Left,ze.IsNumber(e.Border.Right)?t.Frame.ChartBorder.Right=e.Border.Right:e.Border.Right=t.Frame.ChartBorder.Right,ze.IsNumber(e.Border.Top)?t.Frame.ChartBorder.Top=e.Border.Top:e.Border.Top=t.Frame.ChartBorder.Top,ze.IsNumber(e.Border.Bottom)?t.Frame.ChartBorder.Bottom=e.Border.Bottom:e.Border.Bottom=t.Frame.ChartBorder.Bottom,a.AutoLeft&&(t.Frame.AutoLeftBorder={},ze.IsNumber(a.AutoLeft.Blank)&&(t.Frame.AutoLeftBorder.Blank=a.AutoLeft.Blank),ze.IsNumber(a.AutoLeft.MinWidth)&&(t.Frame.AutoLeftBorder.MinWidth=a.AutoLeft.MinWidth)),a.AutoRight&&(t.Frame.AutoRightBorder={},ze.IsNumber(a.AutoRight.Blank)&&(t.Frame.AutoRightBorder.Blank=a.AutoRight.Blank),ze.IsNumber(a.AutoRight.MinWidth)&&(t.Frame.AutoRightBorder.MinWidth=a.AutoRight.MinWidth))}},this.SetEventCallback=function(t,e){if(t&&ze.IsNonEmptyArray(e))for(var a=0;a<e.length;++a){var i=e[a];t.AddEventCallback(i)}},this.CreateKLineChartContainer=function(t){var e=null;e="历史K线图横屏"===t.Type?new ki(this.CanvasElement):new Ni(this.CanvasElement,this.OffscreenCanvasElement,this.CacheCanvasElement);var a=this.GetExtraCanvas(f.CorssCursorCanvasKey);if(a&&e.SetCorssCursorElement(a),t.EventCallback&&this.SetEventCallback(e,t.EventCallback),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new xr(this.DivElement)),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),e.SelectRectRightMenu=new yr(this.DivElement),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.TouchMoveMinAngle&&(e.TouchMoveMinAngle=t.TouchMoveMinAngle),t.EnableZoomUpDown&&(e.EnableZoomUpDown=t.EnableZoomUpDown),ze.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),ze.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),ze.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),ze.IsNumber(t.CtrlMoveStep)&&(e.CtrlMoveStep=t.CtrlMoveStep),ze.IsBool(t.EnableIndexChartDrag)&&(e.EnableIndexChartDrag=t.EnableIndexChartDrag),ze.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.EnableYDrag){var i=t.EnableYDrag;ze.IsBool(i.Left)&&(e.EnableYDrag.Left=i.Left),ze.IsBool(i.Right)&&(e.EnableYDrag.Right=i.Right)}if(t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxReqeustDataCount),t.KLine.MaxRequestDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(e.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(e.KLineDrawType=t.KLine.DrawType),t.KLine.FirstShowDate>19910101&&(e.CustomShow={Date:t.KLine.FirstShowDate,PageSize:t.KLine.PageSize}),t.KLine.RightSpaceCount>0&&(e.RightSpaceCount=t.KLine.RightSpaceCount),t.KLine.ZoomType>0&&(e.ZoomType=t.KLine.ZoomType),t.KLine.DataWidth>=1&&(e.KLineSize={DataWidth:t.KLine.DataWidth}),ze.IsNumber(t.KLine.RightFormula)&&(e.RightFormula=t.KLine.RightFormula)),t.EnableFlowCapital){i=t.EnableFlowCapital;1==i.BIT&&(e.EnableFlowCapital.BIT=i.BIT)}if(ze.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),t.Page&&(t.Page.Day&&1==t.Page.Day.Enable&&(e.Page.Day.Enable=!0),t.Page.Minute&&1==t.Page.Minute.Enable&&(e.Page.Minute.Enable=!0)),t.DragDownload&&(t.DragDownload.Day&&1==t.DragDownload.Day.Enable&&(e.DragDownload.Day.Enable=!0),t.DragDownload.Minute&&1==t.DragDownload.Minute.Enable&&(e.DragDownload.Minute.Enable=!0)),t.ZoomDownload&&(t.ZoomDownload.Day&&ze.IsBool(t.ZoomDownload.Day.Enable)&&(e.ZoomDownload.Day.Enable=t.ZoomDownload.Day.Enable),t.ZoomDownload.Minute&&ze.IsBool(t.ZoomDownload.Minute.Enable)&&(e.ZoomDownload.Minute.Enable=t.ZoomDownload.Minute.Enable)),t.Language){var r=Ai.GetLanguageID(t.Language);ze.IsNumber(r)&&(e.LanguageID=r)}if(t.SourceDatatLimit&&e.SetSourceDatatLimit(t.SourceDatatLimit),t.DrawPicture&&t.DrawPicture.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawPicture.StorageKey),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),ze.IsNumber(t.StepPixel)&&(e.StepPixel=t.StepPixel),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),1==t.IsApiPeriod&&(e.IsApiPeriod=t.IsApiPeriod),t.SelectedChart){i=t.SelectedChart;ze.IsBool(i.EnableSelected)&&(e.SelectedChart.EnableSelected=i.EnableSelected),ze.IsBool(i.EnableMoveOn)&&(e.SelectedChart.EnableMoveOn=i.EnableMoveOn)}if(!t.Windows||t.Windows.length<=0)return null;if(ze.IsNonEmptyArray(t.KLineCalcOption))for(var n=0;n<t.KLineCalcOption.length;++n){i=t.KLineCalcOption[n];i.ClassName&&i.Option&&e.SetKLineCalcOption(i.ClassName,i.Option)}if(e.Create(t.Windows.length,t),this.SetChartBorder(e,t),this.AdjustChartBorder(e),t.KLine&&t.KLine.PageSize>0){var s=e.GetMaxMinPageSize();s.Max>10&&s.Max<t.KLine.PageSize?e.PageSize=s.Max:s.Min>10&&s.Min>t.KLine.PageSize?e.PageSize=s.Min:e.PageSize=t.KLine.PageSize}if(!0===t.IsCorssOnlyDrawKLine&&(e.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(e.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo){i=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(e.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(e.PressTime=t.CorssCursorInfo.PressTime),ze.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType),ze.IsNumber(i.VLineType)&&(e.ChartCorssCursor.VLineType=i.VLineType),t.CorssCursorInfo.DateFormatType>0&&(e.ChartCorssCursor.StringFormatX.DateFormatType=t.CorssCursorInfo.DateFormatType),ze.IsBool(i.IsDrawXRangeBG)&&(e.ChartCorssCursor.IsDrawXRangeBG=i.IsDrawXRangeBG),ze.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),ze.IsNumber(i.TextHeight)&&(e.ChartCorssCursor.TextHeight=i.TextHeight),i.RightButton&&ze.IsBool(i.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=i.RightButton.Enable),ze.IsNumber(i.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=i.PriceFormatType),ze.IsNumber(i.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=i.DataFormatType)}if(t.CorssCursor={},t.CorssCursor.TitleHeight=e.ChartCorssCursor.TextHeight,ze.IsNumber(t.SplashTitlePosition)&&e.ChartSplashPaint&&(e.ChartSplashPaint.Position=t.SplashTitlePosition),t.Frame)for(n=0;n<t.Frame.length;++n){i=t.Frame[n];if(e.Frame.SubFrame[n]){var o=e.Frame.SubFrame[n].Frame;ze.IsNumber(i.SplitCount)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[n].Frame.YSplitOperator.StringFormat=i.StringFormat),ze.IsNumber(i.FloatPrecision)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.FloatPrecision=i.FloatPrecision),i.Custom&&(e.Frame.SubFrame[n].Frame.YSplitOperator.Custom=i.Custom),ze.IsNumber(i.SplitType)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitType=i.SplitType,e.Frame.SubFrame[n].Frame.YSplitOperator.DefaultSplitType=i.SplitType),isNaN(i.Height)||(e.Frame.SubFrame[n].Height=i.Height),!1!==i.IsShowLeftText&&!0!==i.IsShowLeftText||(e.Frame.SubFrame[n].Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),!1!==i.IsShowRightText&&!0!==i.IsShowRightText||(e.Frame.SubFrame[n].Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),i.TopSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.TopSpace=i.TopSpace),i.BottomSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.BottomSpace=i.BottomSpace),i.RightTextPosition>0&&(e.Frame.SubFrame[n].Frame.YTextPosition[1]=i.RightTextPosition),i.LeftTextPosition>0&&(e.Frame.SubFrame[n].Frame.YTextPosition[0]=i.LeftTextPosition),0==i.IsShowXLine&&(e.Frame.SubFrame[n].Frame.IsShowXLine=i.IsShowXLine),0==i.IsShowYLine&&(e.Frame.SubFrame[n].Frame.IsShowYLine=i.IsShowYLine),ze.IsNumber(i.YTextBaseline)&&(e.Frame.SubFrame[n].Frame.YTextBaseline=i.YTextBaseline),i.YCoordinateType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=i.YCoordinateType),1==i.IsYReverse&&(e.Frame.SubFrame[0].Frame.CoordinateType=1),ze.IsNumber(i.PercentageTextFormat)&&(o.YSplitOperator.PercentageTextFormat=i.PercentageTextFormat),i.DefaultYMaxMin&&(e.Frame.SubFrame[n].Frame.YSplitOperator.DefaultYMaxMin=i.DefaultYMaxMin),ze.IsBool(i.EnableRemoveZero)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.EnableRemoveZero=i.EnableRemoveZero),ze.IsPlusNumber(i.MinYDistance)&&(e.Frame.SubFrame[n].Frame.MinYDistance=i.MinYDistance),ze.IsNumber(i.BorderLine)&&(e.Frame.SubFrame[n].Frame.BorderLine=i.BorderLine),ze.IsBool(i.IsShowIndexTitle)&&(e.Frame.SubFrame[n].Frame.IsShowIndexTitle=i.IsShowIndexTitle),ze.IsBool(i.IsDrawTitleBottomLine)&&(o.IsDrawTitleBottomLine=i.IsDrawTitleBottomLine),ze.IsBool(i.IsShowNameArrow)&&(e.Frame.SubFrame[n].Frame.IsShowNameArrow=i.IsShowNameArrow)}}if(t.KLine&&(0==t.KLine.ShowKLine&&(e.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(e.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(e.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle){i=t.KLineTitle;0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(e.TitlePaint[0].IsShow=!1),ze.IsBool(i.IsTitleShowLatestData)&&(e.IsTitleShowLatestData=i.IsTitleShowLatestData)}if(t.Overlay)for(n=0;n<t.Overlay.length;++n){i=t.Overlay[n];e.OverlaySymbol(i.Symbol,i)}if(t.ExtendChart)for(n=0;n<t.ExtendChart.length;++n){i=t.ExtendChart[n];e.CreateExtendChart(i.Name,i)}var h=new d;if(t.ColorIndex){i=t.ColorIndex;var l=h.Get(i.Index);l&&(l.ID=i.Index,e.ColorIndex=new fn(l.Name,l.Script,l.Args,l))}if(t.TradeIndex){i=t.TradeIndex;var u=h.Get(i.Index);u&&(u.ID=i.Index,e.TradeIndex=new fn(u.Name,u.Script,u.Args,u))}for(n=0;n<t.Windows.length;++n){i=t.Windows[n];if(i.Script)e.WindowIndex[n]=new fn(i.Name,i.Script,i.Args,i);else if(i.JsonData)e.WindowIndex[n]=new ar(i.Name,i.Script,i.Args,i);else if(i.Local&&i.Local.Data)e.WindowIndex[n]=new Dn(i.Local.Name,i.Local.Args,{JsonData:i.Local.Data});else if(i.API){var c=i.API;e.WindowIndex[n]=new mn(c.Name,c.Script,c.Args,i)}else{var C=bi.Get(i.Index);if(C)e.WindowIndex[n]=C.Create(i.Option),e.WindowIndex[n].SetArgs&&e.WindowIndex[n].SetArgs(i.Args),e.CreateWindowIndex(n);else{var m=h.Get(i.Index);if(!m)continue;i.Lock&&(m.Lock=i.Lock),m.ID=i.Index;var D=m.Args;i.Args&&(D=i.Args),i.IsShortTitle&&(m.IsShortTitle=i.IsShortTitle),i.TitleFont&&(m.TitleFont=i.TitleFont),ze.IsBool(i.IsSync)&&(m.IsSync=i.IsSync),e.WindowIndex[n]=new fn(m.Name,m.Script,D,m),i.StringFormat>0&&(e.WindowIndex[n].StringFormat=i.StringFormat),i.FloatPrecision>=0&&(e.WindowIndex[n].FloatPrecision=i.FloatPrecision)}}var p=e.Frame.SubFrame[n].Frame;ze.IsBool(i.Modify)&&(p.ModifyIndex=i.Modify),ze.IsBool(i.Change)&&(p.ChangeIndex=i.Change),ze.IsBool(i.Close)&&(p.CloseIndex=i.Close),ze.IsBool(i.Overlay)&&(p.OverlayIndex=i.Overlay),ze.IsBool(i.Export)&&(p.ExportData=i.Export),ze.IsBool(i.MaxMin)&&(e.Frame.SubFrame[n].Frame.MaxMinWindow=i.MaxMin),ze.IsBool(i.TitleWindow)&&(e.Frame.SubFrame[n].Frame.TitleWindow=i.TitleWindow),1==i.IsDrawTitleBG&&(e.Frame.SubFrame[n].Frame.IsDrawTitleBG=i.IsDrawTitleBG),ze.IsBool(i.IsShowNameArrow)&&(e.Frame.SubFrame[n].Frame.IsShowNameArrow=i.IsShowNameArrow),ze.IsNumber(i.TitleHeight)?e.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=i.TitleHeight:i.TitleHeight=e.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight,0==i.IsShowTitleArraw&&(e.Frame.SubFrame[n].Frame.IsShowTitleArraw=!1),0==i.IsShowIndexName&&(e.Frame.SubFrame[n].Frame.IsShowIndexName=!1),0==i.IsShowOverlayIndexName&&(e.Frame.SubFrame[n].Frame.IsShowOverlayIndexName=!1),ze.IsNumber(i.IndexParamSpace)&&(e.Frame.SubFrame[n].Frame.IndexParamSpace=i.IndexParamSpace),ze.IsNumber(i.IndexTitleSpace)&&(e.Frame.SubFrame[n].Frame.IndexTitleSpace=i.IndexTitleSpace),i.OverlayIndexType&&(ze.IsNumber(i.OverlayIndexType.Position)&&(e.Frame.SubFrame[n].Frame.OverlayIndexType.Position=i.OverlayIndexType.Position),ze.IsNumber(i.OverlayIndexType.LineSpace)&&(e.Frame.SubFrame[n].Frame.OverlayIndexType.LineSpace=i.OverlayIndexType.LineSpace))}if(t.OverlayIndexFrameWidth>40&&(e.OverlayIndexFrameWidth=t.OverlayIndexFrameWidth),ze.IsNonEmptyArray(t.OverlayIndex))for(n=0;n<t.OverlayIndex.length;++n){i=t.OverlayIndex[n];if(!(i.Windows>=e.Frame.SubFrame.length)){var v=JSON.stringify(i),g=JSON.parse(v);i.Index&&(g.IndexName=i.Index),i.Windows>=0&&(g.WindowIndex=i.Windows),e.CreateOverlayWindowsIndex(g)}}return this.AdjustTitleHeight(e),e},this.CreateCustomKLineChartContainer=function(t){var e=new Ri(this.CanvasElement);if(e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new xr(this.DivElement)),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),t.KLine.PageSize>0&&(e.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1)),t.CustomStock&&(e.CustomStock=t.CustomStock),t.QueryDate&&(e.QueryDate=t.QueryDate),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Frame)for(var a=0;a<t.Frame.length;++a){var i=t.Frame[a];i.SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=i.StringFormat)}t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1));var r=new d;for(a=0;a<t.Windows.length;++a){i=t.Windows[a];if(i.Script)e.WindowIndex[a]=new fn(i.Name,i.Script,i.Args,i);else{var n=bi.Get(i.Index);if(n)e.WindowIndex[a]=n.Create(),e.CreateWindowIndex(a);else{var s=r.Get(i.Index);if(!s)continue;i.Lock&&(s.Lock=i.Lock),e.WindowIndex[a]=new fn(s.Name,s.Script,s.Args,s)}}null!=i.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=i.Modify),null!=i.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=i.Change),isNaN(i.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=i.TitleHeight)}return e},this.CreateMinuteChartContainer=function(t){var e=null;e="分钟走势图横屏"===t.Type?new Gi(this.CanvasElement):new Pi(this.CanvasElement,this.OffscreenCanvasElement,this.CacheCanvasElement),t.EventCallback&&this.SetEventCallback(e,t.EventCallback),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog;var a=2;if(t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),ze.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),ze.IsBool(t.EnableSelectRect)&&(e.EnableSelectRect=t.EnableSelectRect),ze.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),ze.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),ze.IsBool(t.EnableNewIndex)&&(e.EnableNewIndex=t.EnableNewIndex),ze.IsBool(t.EnableIndexChartDrag)&&(e.EnableIndexChartDrag=t.EnableIndexChartDrag),ze.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.GlobalOption){var i=t.GlobalOption;ze.IsBool(i.IsValueFullRange)&&(e.GlobalOption.IsValueFullRange=i.IsValueFullRange),ze.IsNumber(i.XDateFormat)&&(e.GlobalOption.XDateFormat=i.XDateFormat)}if(t.DisplayLatest){i=t.DisplayLatest;ze.IsBool(i.Enable)&&(e.DisplayLatestOption.Enable=i.Enable),ze.IsNumber(i.DelayTime)&&(e.DisplayLatestOption.DelayTime=i.DelayTime)}if(t.DrawDynamicInfo){i=t.DrawDynamicInfo;ze.IsBool(i.Enable)&&(e.DrawDynamicInfoOption.Enable=i.Enable),ze.IsNumber(i.DelayTime)&&(e.DrawDynamicInfoOption.DelayTime=i.DelayTime)}if(e.SelectRectDialog=new gr(this.DivElement),t.Minute&&(0==t.Minute.IsShowTooltip&&(e.IsShowTooltip=!1),t.Minute.DragMode>=0&&(e.DragMode=t.Minute.DragMode)),t.Language){var r=Ai.GetLanguageID(t.Language);ze.IsNumber(r)&&(e.LanguageID=r)}if(t.Info&&t.Info.length>0&&e.SetMinuteInfo(t.Info,!1),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),t.BeforeOpen){i=t.BeforeOpen;ze.IsBool(i.IsShow)&&(e.IsShowBeforeData=i.IsShow),ze.IsNumber(i.Width)&&(e.ExtendWidth.Left=i.Width),ze.IsBool(i.IsShowMultiDay)&&(e.IsShowMultiDayBeforeData=i.IsShowMultiDay),ze.IsNumber(i.MulitiDayWidth)&&(e.MultiDayExtendWidth.Left=i.MulitiDayWidth)}if(t.AfterClose){i=t.AfterClose;ze.IsBool(i.IsShow)&&(e.IsShowAfterData=i.IsShow),ze.IsNumber(i.ShareVol)&&(e.ShareAfterVol=i.ShareVol),ze.IsNumber(i.Width)&&(e.ExtendWidth.Right=i.Width),ze.IsBool(i.IsShowMultiDay)&&(e.IsShowMultiDayAfterData=i.IsShowMultiDay),ze.IsNumber(i.MulitiDayWidth)&&(e.MultiDayExtendWidth.Right=i.MulitiDayWidth)}if(t.SelectedChart){i=t.SelectedChart;ze.IsBool(i.EnableSelected)&&(e.SelectedChart.EnableSelected=i.EnableSelected),ze.IsBool(i.EnableMoveOn)&&(e.SelectedChart.EnableMoveOn=i.EnableMoveOn)}if(t.PageInfo&&e.SetPageInfo(t.PageInfo),e.Create(a,t),t.CorssCursorInfo){i=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),ze.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),i.RightButton&&ze.IsBool(i.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=i.RightButton.Enable),ze.IsNumber(i.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=i.PriceFormatType),ze.IsNumber(i.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=i.DataFormatType),ze.IsNumber(i.HPenType)&&(e.ChartCorssCursor.HPenType=i.HPenType),ze.IsNumber(i.VPenType)&&(e.ChartCorssCursor.VPenType=i.VPenType)}if(t.MinuteInfo&&e.CreateMinuteInfo(t.MinuteInfo),1==t.IsShowRightMenu&&(e.RightMenu=new Ar(this.DivElement)),ze.IsNumber(t.DayCount)&&(e.DayCount=t.DayCount),this.SetChartBorder(e,t),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),ze.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),this.AdjustChartBorder(e),t.Frame){for(var n=0;n<t.Frame.length;++n){i=t.Frame[n];e.Frame.SubFrame[n]&&(ze.IsNumber(i.SplitCount)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[n].Frame.YSplitOperator.StringFormat=i.StringFormat),ze.IsNumber(i.SplitType)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitType=i.SplitType,e.Frame.SubFrame[n].Frame.YSplitOperator.DefaultSplitType=i.SplitType),0==i.IsShowLeftText&&(e.Frame.SubFrame[n].Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),0==i.IsShowRightText&&(e.Frame.SubFrame[n].Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),i.Height>=0&&(e.Frame.SubFrame[n].Height=i.Height),i.Custom&&(e.Frame.SubFrame[n].Frame.YSplitOperator.Custom=i.Custom),i.RightTextFormat>0&&(e.Frame.SubFrame[n].Frame.YSplitOperator.RightTextFormat=i.RightTextFormat),ze.IsNumber(i.TitleHeight)&&(e.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=i.TitleHeight),ze.IsNumber(i.BorderLine)&&(e.Frame.SubFrame[n].Frame.BorderLine=i.BorderLine),ze.IsBool(i.EnableRemoveZero)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.EnableRemoveZero=i.EnableRemoveZero),ze.IsNumber(i.FloatPrecision)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.FloatPrecision=i.FloatPrecision),ze.IsBool(i.IsShowXLine)&&(e.Frame.SubFrame[n].Frame.IsShowXLine=i.IsShowXLine),ze.IsBool(i.IsShowYLine)&&(e.Frame.SubFrame[n].Frame.IsShowYLine=i.IsShowYLine),ze.IsNumber(i.YTextBaseline)&&(e.Frame.SubFrame[n].Frame.YTextBaseline=i.YTextBaseline),i.TopSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.TopSpace=i.TopSpace),i.BottomSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.BottomSpace=i.BottomSpace))}e.UpdateXShowText()}if(t.ExtendChart)for(n=0;n<t.ExtendChart.length;++n){i=t.ExtendChart[n];e.CreateExtendChart(i.Name,i)}if(t.Overlay)for(n=0;n<t.Overlay.length;++n){i=t.Overlay[n];e.OverlaySymbol(i.Symbol,i)}if(t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(n=0;n<e.ExtendChartPaint.length;++n){i=e.ExtendChartPaint[n];"MinuteTooltipPaint"==i.ClassName&&(i.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}if(t.MinuteVol){i=t.MinuteVol;ze.IsNumber(i.BarColorType)&&(e.ChartPaint[2].BarColorType=i.BarColorType)}if(t.MinuteTitle){i=t.MinuteTitle;ze.IsBool(i.IsShowName)&&(e.TitlePaint[0].IsShowName=i.IsShowName),ze.IsBool(i.IsShowDate)&&(e.TitlePaint[0].IsShowDate=i.IsShowDate),ze.IsBool(i.IsShowTime)&&(e.TitlePaint[0].IsShowTime=i.IsShowTime),ze.IsBool(i.IsTitleShowLatestData)&&(e.IsTitleShowLatestData=i.IsTitleShowLatestData),ze.IsBool(i.IsAlwaysShowLastData)&&(e.TitlePaint[0].IsAlwaysShowLastData=i.IsAlwaysShowLastData),ze.IsNumber(i.ShowLastDataFormat)&&(e.TitlePaint[0].ShowLastDataFormat=i.ShowLastDataFormat),i.TimeFormat&&(e.TitlePaint[0].TimeFormat=i.TimeFormat)}if(!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),!0===t.IsShowBeforeData&&(e.IsShowBeforeData=t.IsShowBeforeData),ze.IsNonEmptyArray(t.Windows)){var s=new d;for(n=0;n<t.Windows.length;++n){var o=2+n;i=t.Windows[n];if(i.Script)e.WindowIndex[o]=new fn(i.Name,i.Script,i.Args,i);else if(i.API){var h=i.API;e.WindowIndex[o]=new mn(h.Name,h.Script,h.Args,i)}else{var l=bi.Get(i.Index);if(l)e.WindowIndex[o]=l.Create(),e.CreateWindowIndex(o);else{var u=s.Get(i.Index);if(!u)continue;u.ID=i.Index;var c=u.Args;i.Args&&(c=i.Args),i.IsShortTitle&&(u.IsShortTitle=i.IsShortTitle),i.TitleFont&&(u.TitleFont=i.TitleFont),ze.IsBool(i.IsSync)&&(u.IsSync=i.IsSync),e.WindowIndex[o]=new fn(u.Name,u.Script,c,u),i.StringFormat>0&&(e.WindowIndex[o].StringFormat=i.StringFormat),i.FloatPrecision>=0&&(e.WindowIndex[o].FloatPrecision=i.FloatPrecision)}}var f=e.Frame.SubFrame[o].Frame;ze.IsBool(i.Modify)&&(f.ModifyIndex=i.Modify),ze.IsBool(i.Change)&&(f.ChangeIndex=i.Change),ze.IsBool(i.Close)&&(f.CloseIndex=i.Close),ze.IsBool(i.Overlay)&&(f.OverlayIndex=i.Overlay),ze.IsBool(i.Export)&&(f.ExportData=i.Export),ze.IsBool(i.MaxMin)&&(f.MaxMinWindow=i.MaxMin),ze.IsBool(i.TitleWindow)&&(f.TitleWindow=i.TitleWindow),ze.IsNumber(i.YSplitType)&&(e.Frame.SubFrame[o].Frame.YSplitOperator.SplitType=i.YSplitType),isNaN(i.TitleHeight)||(e.Frame.SubFrame[o].Frame.ChartBorder.TitleHeight=i.TitleHeight),ze.IsBool(i.IsDrawTitleBG)&&(e.Frame.SubFrame[o].Frame.IsDrawTitleBG=i.IsDrawTitleBG),ze.IsBool(i.IsShowNameArrow)&&(e.Frame.SubFrame[n].Frame.IsShowNameArrow=i.IsShowNameArrow),0==i.IsShowTitleArraw&&(e.Frame.SubFrame[o].Frame.IsShowTitleArraw=!1),0==i.IsShowIndexName&&(e.Frame.SubFrame[o].Frame.IsShowIndexName=!1),0==i.IsShowOverlayIndexName&&(e.Frame.SubFrame[o].Frame.IsShowOverlayIndexName=!1)}}if(this.AdjustTitleHeight(e),ze.IsNonEmptyArray(t.OverlayIndex))for(n=0;n<t.OverlayIndex.length;++n){i=t.OverlayIndex[n];if(!(i.Windows>=e.Frame.SubFrame.length)){var C=JSON.stringify(i),m=JSON.parse(C);i.Index&&(m.IndexName=i.Index),i.Windows>=0&&(m.WindowIndex=i.Windows),e.CreateOverlayWindowsIndex(m)}}return e},this.CreateMinMinuteChartContainer=function(t){var e=null;e="迷你分钟走势图横屏"===t.Type?new Gi(this.CanvasElement):new Pi(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter);if(t.BeforeOpen){var a=t.BeforeOpen;ze.IsBool(a.IsShow)&&(e.IsShowBeforeData=a.IsShow),ze.IsNumber(a.Width)&&(e.ExtendWidth.Left=a.Width),ze.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayBeforeData=a.IsShowMultiDay),ze.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Left=a.MulitiDayWidth)}if(t.AfterClose){a=t.AfterClose;ze.IsBool(a.IsShow)&&(e.IsShowAfterData=a.IsShow),ze.IsNumber(a.ShareVol)&&(e.ShareAfterVol=a.ShareVol),ze.IsNumber(a.Width)&&(e.ExtendWidth.Right=a.Width),ze.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayAfterData=a.IsShowMultiDay),ze.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Right=a.MulitiDayWidth)}if(t.Listener||(t.Listener={KeyDown:!1,Wheel:!1}),e.Create(2,t.Listener),t.CorssCursorInfo){a=t.CorssCursorInfo;ze.IsNumber(t.CorssCursorInfo.Left)&&(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),ze.IsNumber(t.CorssCursorInfo.Right)&&(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),ze.IsNumber(t.CorssCursorInfo.Bottom)&&(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),ze.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),a.RightButton&&ze.IsBool(a.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=a.RightButton.Enable),ze.IsNumber(a.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=a.PriceFormatType),ze.IsNumber(a.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=a.DataFormatType),ze.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),ze.IsNumber(t.CorssCursorInfo.VPenType)&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)}ze.IsNumber(t.DayCount)&&(e.DayCount=t.DayCount),this.SetChartBorder(e,t),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),ze.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),e.TitlePaint[0].IsShow=!1;var i=e.Frame.SubFrame[0];if(i.Frame.IsShowYText[0]=!1,i.Frame.IsShowYText[1]=!1,i.Frame.IsShowXLine=!1,i.Frame.IsShowYLine=!1,i.Frame.BorderLine=0,e.Frame.SubFrame[1].Height=0,e.EnableBorderDrag=!1,t.Frame)for(var r=0;r<t.Frame.length;++r){a=t.Frame[r];e.Frame.SubFrame[r]&&(a.SplitCount&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=a.SplitCount),a.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=a.StringFormat),ze.IsNumber(a.SplitType)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=a.SplitType,e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultSplitType=a.SplitType),ze.IsBool(a.IsShowLeftText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),ze.IsBool(a.IsShowRightText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),a.Height>=0&&(e.Frame.SubFrame[r].Height=a.Height),a.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=a.Custom),a.RightTextFormat>0&&(e.Frame.SubFrame[r].Frame.YSplitOperator.RightTextFormat=a.RightTextFormat),ze.IsNumber(a.TitleHeight)&&(e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=a.TitleHeight),ze.IsNumber(a.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=a.BorderLine),ze.IsBool(a.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=a.EnableRemoveZero),ze.IsNumber(a.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=a.FloatPrecision),ze.IsBool(a.IsShowXLine)&&(e.Frame.SubFrame[r].Frame.IsShowXLine=a.IsShowXLine),ze.IsBool(a.IsShowYLine)&&(e.Frame.SubFrame[r].Frame.IsShowYLine=a.IsShowYLine),ze.IsNumber(a.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=a.YTextBaseline))}if(e.UpdateXShowText(),t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(r=0;r<e.ExtendChartPaint.length;++r){a=e.ExtendChartPaint[r];"MinuteTooltipPaint"==a.ClassName&&(a.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}return this.AdjustTitleHeight(e),!0===t.DisableMouseEvent&&(this.CanvasElement.onmousemove=function(t){},this.CanvasElement.oncontextmenu=function(t){},this.CanvasElement.ondblclick=function(t){},this.CanvasElement.onmousedown=function(t){},this.CanvasElement.onmouseout=function(t){},this.CanvasElement.onmouseleave=function(t){}),e},this.CreateHistoryMinuteChartContainer=function(t){var e=new Oi(this.CanvasElement),a=2;t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),e.Create(a),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom));var i=new d;if(t.Windows)for(var r=0;r<t.Windows.length;++r){var n=t.Windows[r];if(n.Script)e.WindowIndex[2+parseInt(r)]=new fn(n.Name,n.Script,n.Args);else{var s=bi.Get(n.Index);if(s)e.WindowIndex[2+parseInt(r)]=s.Create(),e.CreateWindowIndex(2+parseInt(r));else{var o=i.Get(n.Index);if(!o)continue;e.WindowIndex[2+parseInt(r)]=new fn(o.Name,o.Script,o.Args)}}isNaN(n.TitleHeight)||(e.Frame.SubFrame[2+parseInt(r)].Frame.ChartBorder.TitleHeight=n.TitleHeight)}return e.TradeDate=20181009,t.HistoryMinute.TradeDate&&(e.TradeDate=t.HistoryMinute.TradeDate),null!=t.HistoryMinute.IsShowName&&(e.TitlePaint[0].IsShowName=t.HistoryMinute.IsShowName),null!=t.HistoryMinute.IsShowDate&&(e.TitlePaint[0].IsShowDate=t.HistoryMinute.IsShowDate),e},this.CreateKLineTrainChartContainer=function(t){var e=!1;if("简单K线训练"==t.Type||"简单K线训练横屏"==t.Type){var a="简单K线训练横屏"==t.Type,i=new _i(this.CanvasElement,a);e=!0}else a="K线训练横屏"==t.Type,i=new Bi(this.CanvasElement,a);if(t.NetworkFilter&&(i.NetworkFilter=t.NetworkFilter),1==t.IsApiPeriod&&(i.IsApiPeriod=t.IsApiPeriod),i.ModifyIndexDialog=this.ModifyIndexDialog,i.ChangeIndexDialog=this.ChangeIndexDialog,t.ScriptError&&(i.ScriptErrorCallback=t.ScriptError),t.KLine&&(t.KLine.Right>=0&&(i.Right=t.KLine.Right),t.KLine.Period>=0&&(i.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(i.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&i.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(i.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(i.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(i.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(i.KLineDrawType=t.KLine.DrawType),ze.IsNumber(t.KLine.RightSpaceCount)&&!e&&(i.RightSpaceCount=t.KLine.RightSpaceCount)),t.Train&&(t.Train.DataCount&&(i.TrainDataCount=t.Train.DataCount),t.Train.Callback&&(i.TrainCallback=t.Train.Callback),t.Train.StartDate&&(i.TrainStartDate=t.Train.StartDate)),!t.Windows||t.Windows.length<=0)return null;if(i.Create(t.Windows.length),this.SetChartBorder(i,t),this.AdjustChartBorder(i),0==t.IsShowCorssCursorInfo&&(i.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),!0===t.IsCorssOnlyDrawKLine&&(i.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(i.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(i.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(i.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(i.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(i.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(i.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(i.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(i.PressTime=t.CorssCursorInfo.PressTime),t.CorssCursorInfo.HPenType>0&&(i.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(i.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)),t.CorssCursor={},t.CorssCursor.TitleHeight=i.ChartCorssCursor.TextHeight,t.Frame)for(var r=0;r<t.Frame.length;++r){var n=t.Frame[r];i.Frame.SubFrame[r]&&(n.SplitCount&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(i.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=n.StringFormat),ze.IsNumber(n.FloatPrecision)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=n.FloatPrecision),n.Custom&&(i.Frame.SubFrame[r].Frame.YSplitOperator.Custom=n.Custom),ze.IsNumber(n.SplitType)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=n.SplitType),n.Height>0&&(i.Frame.SubFrame[r].Height=n.Height),0==n.IsShowLeftText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText))}if(t.KLine&&(0==t.KLine.ShowKLine&&(i.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(i.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(i.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(i.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(i.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(i.TitlePaint[0].IsShow=!1)),ze.IsNonEmptyArray(t.Overlay))for(r=0;r<t.Overlay.length;++r){n=t.Overlay[r];i.OverlaySymbol(n.Symbol,n)}if(t.ExtendChart)for(r=0;r<t.ExtendChart.length;++r){n=t.ExtendChart[r];i.CreateExtendChart(n.Name,n)}if(ze.IsNonEmptyArray(t.Windows)){var s=new d;for(r=0;r<t.Windows.length;++r){n=t.Windows[r];if(n.Script)i.WindowIndex[r]=new fn(n.Name,n.Script,n.Args,n);else{var o=bi.Get(n.Index);if(o)i.WindowIndex[r]=o.Create(),i.CreateWindowIndex(r);else{var h=s.Get(n.Index);if(!h)continue;n.Lock&&(h.Lock=n.Lock),i.WindowIndex[r]=new fn(h.Name,h.Script,h.Args,h)}}null!=n.Modify&&(i.Frame.SubFrame[r].Frame.ModifyIndex=n.Modify),null!=n.Change&&(i.Frame.SubFrame[r].Frame.ChangeIndex=n.Change),null!=n.Close&&(i.Frame.SubFrame[r].Frame.CloseIndex=n.Close),null!=n.Overlay&&(frame.OverlayIndex=n.Overlay),ze.IsBool(n.Export)&&(frame.ExportData=n.Export),ze.IsBool(n.MaxMin)&&(i.Frame.SubFrame[r].Frame.MaxMinWindow=n.MaxMin),ze.IsBool(n.TitleWindow)&&(i.Frame.SubFrame[r].Frame.TitleWindow=n.TitleWindow),ze.IsBool(n.IsDrawTitleBG)&&(i.Frame.SubFrame[r].Frame.IsDrawTitleBG=n.IsDrawTitleBG),ze.IsBool(n.IsShowNameArrow)&&(i.Frame.SubFrame[r].Frame.IsShowNameArrow=n.IsShowNameArrow),ze.IsNumber(n.TitleHeight)&&(i.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=n.TitleHeight),0==n.IsShowTitleArraw&&(i.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==n.IsShowIndexName&&(i.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(i.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),ze.IsNumber(n.IndexParamSpace)&&(i.Frame.SubFrame[r].Frame.IndexParamSpace=n.IndexParamSpace),ze.IsNumber(n.IndexTitleSpace)&&(i.Frame.SubFrame[r].Frame.IndexTitleSpace=n.IndexTitleSpace)}}return this.AdjustTitleHeight(i),i},this.CreateDepthChartContainer=function(t){var e=null;if(e=new Vi(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),ze.IsPlusNumber(t.MaxVolRate)&&(e.MaxVolRate=t.MaxVolRate),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),ze.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),ze.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.Language){var a=Ai.GetLanguageID(t.Language);ze.IsNumber(a)&&(e.LanguageID=a)}if(e.Create(t.Listener),t.Border&&(ze.IsNumber(t.Border.Left)?e.Frame.ChartBorder.Left=t.Border.Left:t.Border.Left=e.Frame.ChartBorder.Left,ze.IsNumber(t.Border.Right)?e.Frame.ChartBorder.Right=t.Border.Right:t.Border.Right=e.Frame.ChartBorder.Right,ze.IsNumber(t.Border.Top)?e.Frame.ChartBorder.Top=t.Border.Top:t.Border.Top=e.Frame.ChartBorder.Top,ze.IsNumber(t.Border.Bottom)?e.Frame.ChartBorder.Bottom=t.Border.Bottom:t.Border.Bottom=e.Frame.ChartBorder.Bottom),this.AdjustChartBorder(e),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),t.CorssCursorInfo){var i=t.CorssCursorInfo;ze.IsNumber(i.HPenType)&&(e.ChartCorssCursor.HPenType=i.HPenType),ze.IsNumber(i.VPenType)&&(e.ChartCorssCursor.VPenType=i.VPenType),ze.IsBool(i.IsShowTooltip)&&(e.ChartCorssCursor.IsShowTooltip=i.IsShowTooltip)}if(t.Frame){i=t.Frame;i.SplitCount&&(e.Frame.YSplitOperator.SplitCount=i.SplitCount),ze.IsNumber(i.SplitType)&&(e.Frame.YSplitOperator.SplitType=i.SplitType),ze.IsNumber(i.Height)&&(e.Frame.Height=i.Height),ze.IsNumber(i.YLineType)&&(e.Frame.YSplitOperator.LineType=i.YLineType),ze.IsNumber(i.XLineType)&&(e.Frame.XSplitOperator.LineType=i.XLineType),Array.isArray(i.IgnoreYValue)&&(e.Frame.YSplitOperator.IgnoreYValue=i.IgnoreYValue),!1!==i.IsShowLeftText&&!0!==i.IsShowLeftText||(e.Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),!1!==i.IsShowRightText&&!0!==i.IsShowRightText||(e.Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),0==i.IsShowXLine&&(e.Frame.IsShowXLine=i.IsShowXLine),0==i.IsShowYLine&&(e.Frame.IsShowYLine=i.IsShowYLine),ze.IsNumber(i.XSplitCount)&&(e.Frame.XSplitOperator.SplitCount=i.XSplitCount)}return e},this.SetOption=function(t){ze.IsNumber(t.ToolbarButtonStyle)&&(xi.ToolbarButtonStyle=t.ToolbarButtonStyle);var e=null;switch(t.Type){case"历史K线图":case"历史K线图横屏":e=this.CreateKLineChartContainer(t);break;case"自定义指数历史K线图":e=this.CreateCustomKLineChartContainer(t);break;case"分钟走势图":case"分钟走势图横屏":e=this.CreateMinuteChartContainer(t);break;case"迷你分钟走势图":e=this.CreateMinMinuteChartContainer(t);break;case"历史分钟走势图":e=this.CreateHistoryMinuteChartContainer(t);break;case"K线训练":case"K线训练横屏":case"简单K线训练":case"简单K线训练横屏":e=this.CreateKLineTrainChartContainer(t);break;case"深度图":e=this.CreateDepthChartContainer(t);break;case"简单图形":return this.CreateSimpleChart(t);case"饼图":case"雷达图":return this.CreatePieChart(t);case"地图":return this.CreateMapChart(t);default:return!1}if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}t.Symbol?(e.Draw(),e.ChangeSymbol(t.Symbol),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()):(e.DrawEmpty(),this.JSChartContainer=e,this.DivElement.JSChart=this),ze.IsBool(t.CheckLatestVerion)&&0==t.CheckLatestVerion||null==f.LastVersion&&e&&"function"==typeof e.GetLatestVersion&&e.GetLatestVersion()},this.CreateSimpleChart=function(t){var e=new Hi(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreatePieChart=function(t){var e=new Yi(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),t.Radius&&(e.Radius=t.Radius),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),this.AdjustChartBorder(e),t.Frame&&0==t.Frame[0].IsShowBorder&&(e.Frame.IsShowBorder=t.Frame[0].IsShowBorder),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateMapChart=function(t){var e=new Xi(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateToolbar=function(t){},this.CreateSettingDiv=function(t){},this.Focus=function(){this.CanvasElement&&this.CanvasElement.focus()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.ChangeIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndex&&this.JSChartContainer.ChangeIndex(t,e,a)},this.AddIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddIndexWindow&&this.JSChartContainer.AddIndexWindow(t,e)},this.AddScriptIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddScriptIndexWindow&&this.JSChartContainer.AddScriptIndexWindow(t,e)},this.AddAPIIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddAPIIndexWindow&&this.JSChartContainer.AddAPIIndexWindow(t,e)},this.RemoveIndexWindow=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RemoveIndexWindow&&this.JSChartContainer.RemoveIndexWindow(t)},this.ChangeScriptIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeScriptIndex&&this.JSChartContainer.ChangeScriptIndex(t,e,a)},this.ChangePyScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePyScriptIndex&&this.JSChartContainer.ChangePyScriptIndex(t,e)},this.GetIndexInfo=function(){return this.JSChartContainer&&"function"==typeof this.JSChartContainer.GetIndexInfo?this.JSChartContainer.GetIndexInfo():[]},this.ChangeInstructionIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionIndex(t,e)},this.ChangeInstructionScriptIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionScriptIndex(t)},this.CancelInstructionIndex=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CancelInstructionIndex&&this.JSChartContainer.CancelInstructionIndex()},this.ChangePeriod=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePeriod&&this.JSChartContainer.ChangePeriod(t,e)},this.ChangeRight=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeRight&&this.JSChartContainer.ChangeRight(t)},this.OverlaySymbol=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OverlaySymbol&&this.JSChartContainer.OverlaySymbol(t,e)},this.DeleteOverlaySymbol=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlaySymbol&&this.JSChartContainer.DeleteOverlaySymbol(t)},this.SetFirstShowDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFirstShowDate&&this.JSChartContainer.SetFirstShowDate(t)},this.ChangeKLineDrawType=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeKLineDrawType&&this.JSChartContainer.ChangeKLineDrawType(t,e,a)},this.ChangeIndexWindowCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindowCount&&this.JSChartContainer.ChangeIndexWindowCount(t,e)},this.ClearOverlaySymbol=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearOverlaySymbol&&this.JSChartContainer.ClearOverlaySymbol()},this.DeleteKLineInfo=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteKLineInfo&&this.JSChartContainer.DeleteKLineInfo(t)},this.ClearKLineInfo=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearKLineInfo&&this.JSChartContainer.ClearKLineInfo()},this.AddKLineInfo=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddKLineInfo&&this.JSChartContainer.AddKLineInfo(t,e)},this.ChangMainDataControl=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetMainDataConotrl&&this.JSChartContainer.SetMainDataConotrl(t)},this.AddOverlayIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddOverlayIndex&&this.JSChartContainer.AddOverlayIndex(t)},this.MoveOverlayIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndex&&this.JSChartContainer.MoveOverlayIndex(t,e,a)},this.MoveOverlayIndexToNewWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndexToNewWindow&&this.JSChartContainer.MoveOverlayIndexToNewWindow(t,e)},this.DeleteOverlayWindowsIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlayWindowsIndex&&this.JSChartContainer.DeleteOverlayWindowsIndex(t)},this.StopAutoUpdate=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAutoUpdate&&this.JSChartContainer.StopAutoUpdate()},this.ChartDestroy=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestroy&&this.JSChartContainer.ChartDestroy()},this.ChartDestory=this.ChartDestroy,this.SetDepthMapData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetDepthMapData&&this.JSChartContainer.SetDepthMapData(t,e)},this.ForceLandscape=function(t){this.JSChartContainer&&(l.Chart.Log("[JSChart::ForceLandscape] bForceLandscape="+t),this.JSChartContainer.IsForceLandscape=t)},this.LockIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.LockIndex&&(l.Chart.Log("[JSChart:LockIndex] lockData",t),this.JSChartContainer.LockIndex(t))},this.ChangeTradeDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeTradeDate&&(l.Chart.Log("[JSChart:ChangeTradeDate] date",t),this.JSChartContainer.ChangeTradeDate(t))},this.ChangeDayCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeDayCount&&(l.Chart.Log("[JSChart:ChangeDayCount] count",t),this.JSChartContainer.ChangeDayCount(t,e))},this.ShowCallAuctionData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ShowCallAuctionData&&(l.Chart.Log("[JSChart:ShowCallAuctionData] obj, option ",t,e),this.JSChartContainer.ShowCallAuctionData(t,e))},this.StartAnimation=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StartAnimation)return l.Chart.Log("[JSChart:StartAnimation] start."),this.JSChartContainer.StartAnimation(t)},this.StopAnimation=function(){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAnimation)return l.Chart.Log("[JSChart:StopAnimation] start."),this.JSChartContainer.StopAnimation()},this.SaveToImage=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImage)return this.JSChartContainer.SaveToImage(t,e)},this.SaveToImageUrl=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImageUrl)return this.JSChartContainer.SaveToImageUrl(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(l.Chart.Log("[JSChart:AddEventCallback] ",t),this.JSChartContainer.AddEventCallback(t))},this.SetLanguage=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetLanguage&&(l.Chart.Log("[JSChart:SetLanguage] ",t),this.JSChartContainer.SetLanguage(t))},this.ChangeIndexTemplate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexTemplate&&(l.Chart.Log("[JSChart:ChangeIndexTemplate] ",t),this.JSChartContainer.ChangeIndexTemplate(t))},this.SetChartDrawOption=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetChartDrawOption&&(l.Chart.Log("[JSChart:SetChartDrawOption] ",t),this.JSChartContainer.SetChartDrawOption(t))},this.CreateChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CreateChartDrawPicture&&(l.Chart.Log("[JSChart:CreateChartDrawPicture] ",t),this.JSChartContainer.CreateChartDrawPicture(t,e))},this.AddChartDrawPicture=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddChartDrawPicture)return l.Chart.Log("[JSChart:AddChartDrawPicture] ",t),this.JSChartContainer.AddChartDrawPicture(t)},this.ClearChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearChartDrawPicture&&this.JSChartContainer.ClearChartDrawPicture(t,e)},this.PasteChartDrawPicture=function(t,e,a){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.PasteChartDrawPicture)return l.Chart.Log("[JSChart:PasteChartDrawPicture] ",t,e,a),this.JSChartContainer.PasteChartDrawPicture(t,e,a)},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.EnableSplashScreen=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.EnableSplashScreen&&(l.Chart.Log("[JSChart:EnableSplashScreen] "),this.JSChartContainer.EnableSplashScreen(t))},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(l.Chart.Log("[JSChart:Draw] "),this.JSChartContainer.Draw())},this.SetFocus=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFocus&&(l.Chart.Log("[JSChart:SetFocus] "),this.JSChartContainer.SetFocus())},this.ExportData=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.ExportData)return l.Chart.Log("[JSChart:ExportData] "),this.JSChartContainer.ExportData(t)}}f.LastVersion=null,f.EnableCanvasWillReadFrequently=!1,f.CorssCursorCanvasKey="hqchart_corsscursor",f.Init=function(t,e,a){var i=new f(t,e,a);return i.OnSize(),i},f.SetDomain=function(t,e){t&&(xi.Domain=t),e&&(xi.CacheDomain=e)},f.SetPyIndexDomain=function(t){t&&(xi.PyIndexDomain=t)},f.SetStyle=function(t){t&&xi.SetStyle(t)},f.SetTextResource=function(t,e){Ai.SetTextResource(t,e)},f.GetLocalization=function(){return Ai},f.GetDevicePixelRatio=function(){return I()},f.CreateGuid=function(){return b()},f.GetResource=function(){return xi},f.GetMinuteTimeStringData=function(){return Er},f.GetMinuteCoordinateData=function(){return Nr},f.GetKLineZoom=function(){return gt},f.GetDivTooltipDataFormat=function(){return va},f.GetKLineCustomCalulate=function(){return Fi},f.SetUSATimeType=function(t){Or.TimeType=t,Rr.TimeType=t,Br.TimeType=t,_r.TimeType=t},f.GetChinaFuturesTimeData=function(){return Pr},f.AddPeriodCallback=function(t){lt.AddPeriodCallback(t)},f.RemovePeriodCallback=function(t){lt.RemovePeriodCallback(t)},f.RegisterDrawPicture=function(t){return ba.RegisterDrawPicture(t)},f.RegisterDrawPictureIonFont=function(t){return ba.RegisterIonFont(t)},f.GetInternalTimeData=function(t){switch(t){case"NYMEXTimeData":return Or;case"COMEXTimeData":return Rr;case"NYBOTTimeData":return Br;case"CBOTTimeData":return _r;case"LMETimeData":return kr;case"FuturesTimeData":return Pr;case"TOCOMTimeData":return Gr;case"IPETimeData":return Vr;default:return null}},f.RegisterExtendChartClass=function(t,e){return we.Add(t,e)},f.AddExtendCallbackDraw=function(t){return we.AddCallbackDrawClassName(t)},f.RegisterChartPaintClass=function(t,e){return pt.Add(t,e)},f.RegisterScriptIndexChart=function(t,e){return dn.Add(t,e)},f.RegisterDialogClass=function(t,e){return Cr.Add(t,e)},f.RegisterChartFrameClass=function(t,e){return B.Add(t,e)},f.ToFixedPoint=function(t){return F(t)},f.ToFixedPoint2=function(t,e){return M(t,e)},f.ToFixedRect=function(t){return L(t)};var C={RECV_KLINE_MATCH:1,RECV_INDEX_DATA:2,RECV_HISTROY_DATA:3,RECV_TRAIN_MOVE_STEP:4,CHART_STATUS:5,BARRAGE_PLAY_END:6,RECV_OVERLAY_INDEX_DATA:7,DBCLICK_KLINE:8,RECV_START_AUTOUPDATE:9,RECV_STOP_AUTOUPDATE:10,ON_CONTEXT_MENU:11,ON_TITLE_DRAW:12,ON_SELECT_RECT:13,RECV_MINUTE_DATA:14,ON_CLICK_INDEXTITLE:15,RECV_KLINE_UPDATE_DATA:16,ON_CLICK_DRAWPICTURE:17,ON_FINISH_DRAWPICTURE:18,ON_INDEXTITLE_DRAW:19,ON_CUSTOM_VERTICAL_DRAW:20,RECV_KLINE_MANUAL_UPDATE_DATA:21,ON_ENABLE_SPLASH_DRAW:22,ON_CLICK_CHART_PAINT:23,ON_DRAW_MINUTE_LAST_POINT:24,ON_DRAW_DEPTH_TOOLTIP:25,ON_CLICK:26,ON_PHONE_TOUCH:27,ON_CLICKUP_CHART_PAINT:28,ON_SPLIT_YCOORDINATE:29,ON_DBCLICK:30,ON_SPLIT_XCOORDINATE:31,ON_KEYDOWN_SELECT_RECT:32,ON_DRAG_SELECT_RECT:33,ON_DRAG_SELECT_RECT_MOUSEUP:34,ON_DRAW_KLINE_LAST_POINT:35,ON_CLICK_CROSSCURSOR_RIGHT:36,ON_PLAY_SOUND:37,ON_CALCULATE_INDEX_OX:38,ON_LOAD_DRAWPICTURE:39,ON_DRAW_COUNTDOWN:41,ON_BIND_DRAWICON:42,ON_DRAW_DEAL_VOL_COLOR:43,ON_DRAW_DEAL_TEXT:44,ON_FILTER_DEAL_DATA:45,ON_FILTER_REPORT_DATA:46,ON_CLICK_REPORT_ROW:47,ON_REPORT_MARKET_STATUS:48,ON_DBCLICK_REPORT_ROW:49,ON_RCLICK_REPORT_ROW:50,ON_CLICK_REPORT_HEADER:51,ON_RCLICK_REPORT_HEADER:52,ON_REPORT_LOCAL_SORT:53,ON_DRAW_REPORT_NAME_COLOR:54,ON_DRAW_CUSTOM_TEXT:55,ON_CLICK_REPORT_TAB:56,ON_CLICK_REPORT_TABMENU:57,ON_DRAW_REPORT_FIXEDROW_TEXT:58,ON_CLICK_REPORT_FIXEDROW:59,ON_RCLICK_REPORT_FIXEDROW:60,ON_KEYDOWN_SELECT_RECT_FIRST:61,ON_CLICK_FRAME_TOOLBAR:62,ON_REPORT_DRAG_ROW:63,ON_MOUSE_MOVE:64,ON_MINUTE_PAGE_CHANGED:65,ON_DRAG_SUB_SELECT_RECT:66,ON_DRAG_SUB_SELECT_RECT_MOUSEUP:67,ON_KEYBOARD_SELECTED:68,ON_KEYBOARD_MOUSEUP:69,ON_CLICK_DRAWPICTURE_BUTTON:70,ON_FINISH_MOVE_DRAWPICTURE:71,ON_CLICK_EXTENDCHART_BUTTON:72,ON_SCROLLBAR_SLIDER_CHANGED:73,ON_DISPLAY_LATEST:74,ON_FORMAT_CORSSCURSOR_Y_TEXT:75,ON_FORMAT_INDEX_OUT_TEXT:76,ON_FORMAT_CORSSCURSOR_X_TEXT:77,ON_REPORT_MOUSE_MOVE:78,ON_REPORT_DRAG_HEADER_TOOLTIP:88,ON_REPORT_DRAW_CUSTOM_ICON:89,ON_REPORT_DRAW_KLINE:90,ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH:91,ON_REPORT_FORMAT_DRAW_INFO:92,ON_FORMAT_INDEX_Y_LABEL:93,ON_FORMAT_OVERLAY_INDEX_Y_LABEL:94,ON_CUSTOM_UNCHANGE_KLINE_COLOR:95,ON_CLICK_TITLE_BUTTON:96,ON_CUSTOM_LEFT_TOOLBAR:97,ON_CUSTOM_RIGHT_TOOLBAR:98,ON_REPORT_DRAG_COLUMN_WIDTH:99,ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR:100,ON_CHANGE_KLINE_PERIOD:101,ON_MINUTE_TOUCH_ZOOM:102,ON_RELOAD_INDEX_CHART_RESOURCE:103,ON_RELOAD_OVERLAY_INDEX_CHART_RESOURCE:104,ON_CREATE_FRAME:105,ON_DELETE_FRAME:106,ON_SIZE_FRAME:107,ON_TOUCH_SCROLL_UP_DOWN:108},m={OP_SCROLL_LEFT:1,OP_SCROLL_RIGHT:2,OP_ZOOM_OUT:3,OP_ZOOM_IN:4,OP_GOTO_HOME:5,OP_GOTO_END:6,OP_LEFT_ZOOM_OUT:7,OP_LEFT_ZOOM_IN:8,OP_RIGHT_ZOOM_OUT:9,OP_RIGHT_ZOOM_IN:10,OP_SCROLL_GOTO:11,OP_SET_SELECTRECT:12,OP_SET_SUB_SELECTRECT:13,OP_CORSSCURSOR_GOTO:14,OP_SCROOLBAR_SLIDER_CHANGED:15,OP_GOTO:16},D={DISABLE_DRAG_ID:0,CLICK_TOUCH_MODE_ID:3},p={CLOSE_BEFOREOPEN_ID:1,CLOSE_OVERLAY_INDEX:2,MODIFY_INDEX_PARAM:3,CHANGE_INDEX:4,CLOSE_INDEX_WINDOW:5,OVERLAY_INDEX:6,MODIFY_OVERLAY_INDEX_PARAM:7,CHIP_DEFULT:8,CHIP_LONG:9,CHIP_RECENT:10,MAX_MIN_WINDOW:11,TITLE_WINDOW:12,DRAW_PICTURE_DELETE:13,DRAW_PICTURE_SETTING:14,EXTEND_CHART_BUTTON_ID:15,EXPORT_DATA:16,DRAW_PICTURE_BUTTON_1:17,DRAW_PICTURE_BUTTON_2:18,DRAW_PICTURE_BUTTON_3:19,DRAW_PICTURE_BUTTON_4:20,DRAW_PICTURE_BUTTON_5:21,DRAW_PICTURE_BUTTON_6:22,DRAW_PICTURE_BUTTON_7:23,DRAW_PICTURE_BUTTON_8:24,DRAW_PICTURE_BUTTON_9:25,DRAW_PICTURE_BUTTON_10:26,DRAW_PICTURE_BUTTON_11:27,DRAW_PICTURE_BUTTON_12:28,DRAW_PICTURE_BUTTON_13:29,DRAW_PICTURE_BUTTON_14:30,DRAW_PICTURE_BUTTON_15:31,DRAW_PICTURE_BUTTON_16:32,DRAW_PICTURE_BUTTON_17:33,DRAW_PICTURE_BUTTON_18:34,POP_MENU_1:40,POP_MENU_2:41,POP_MENU_3:42,INDEX_NAME_BUTTON:43},v={KLINE_ORDERFLOW:99,MINUTE_MULTI_DAY_EXTENDDATA:21,MINUTE_DAY_EXTENDDATA:21,MINUTE_BEFOREOPEN_EXTENDDATA:21,MINUTE_AFTERCLOSE_EXTENDDATA:21,KLINE_COLOR_DATA:66,KLINE_DAY_EXTENDDATA:25,KLINE_MINUTE_EXTENDDATA:25,KLINE_HEATMAP:67};function g(){this.Start=[],this.Clear=function(){this.Start=[]},this.AddTouchStart=function(t,e,a){if(this.Start.length>0){var i=this.Start[this.Start.length-1],r=a-i.Time;r>0&&r<300?this.Start.push({X:t,Y:e,Time:a}):this.Start=[]}else this.Start.push({X:t,Y:e,Time:a})},this.IsVaildDBClick=function(){return 2==this.Start.length},this.AddTouchEnd=function(t){if(!(this.Start.length<=0)){var e=this.Start[this.Start.length-1],a=t-e.Time;a>=0&&a<150||(this.Start=[])}}}function S(t,e,a){var i=this;this.ClassName="JSChartContainer";if(this.Frame,this.ChartPaint=new Array,this.ChartPaintEx=[],this.ChartInfo=new Array,this.ChartInfoPaint,this.ExtendChartPaint=new Array,this.TitlePaint=new Array,this.OverlayChartPaint=new Array,this.ChartDrawPicture=new Array,this.ChartDrawStorage,this.ChartDrawOption={IsLockScreen:!1,Zoom:1,Magnet:null},this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.MoveOnChartDrawPicture=null,this.IsDrawPictureXY=!1,this.EnableShowCorssCursor={DrawPicture:!0},this.ChartPictureMenu,this.ChartCorssCursor,this.IsClickShowCorssCursor=!1,this.ChartSplashPaint=null,this.LoadDataSplashTitle="Loading",this.CacheCanvas=null,this.CacheElement=null,a&&(this.CacheElement=a,this.CacheCanvas=a.getContext("2d")),e)this.Canvas=e.getContext("2d"),this.OffscreenCanvasElement=e,this.ShowCanvas=t.getContext("2d");else{if(!0===f.EnableCanvasWillReadFrequently){this.Canvas=t.getContext("2d",{willReadFrequently:!0})}else this.Canvas=t.getContext("2d");this.ShowCanvas=null}this.CorssCursorElement,this.CorssCursorCanvas,this.UIElement=t,this.MouseDrag,this.PhoneTouchInfo,this.DragMode=1,this.EnableBorderDrag=!0,this.BorderDrag,this.YDrag,this.TouchStatus={CorssCursorShow:!1},this.DragTimer,this.EnableScrollUpDown=!1,this.ClickChartTimer=null,this.CursorIndex=0,this.LastPoint=new N,this.IsForceLandscape=!1,this.CorssCursorTouchEnd=!1,this.IsTitleShowLatestData=!1,this.StepPixel=4,this.ZoomStepPixel=5,this.TouchMoveMinAngle=70,this.EnableAnimation=!1,this.Tooltip=document.createElement("div"),this.Tooltip.className="jschart-tooltip",this.Tooltip.style.background=xi.TooltipBGColor,this.Tooltip.style.opacity=xi.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=b(),t.parentNode.appendChild(this.Tooltip),this.IsShowTooltip=!0,this.SelectRect=document.createElement("div"),this.SelectRect.className="jschart-selectrect",this.SelectRect.style.background=xi.SelectRectBGColor,this.SelectRect.style["pointer-events"]="none",this.SelectRect.id=b(),this.SelectRect.oncontextmenu=function(){return!1},t.parentNode.appendChild(this.SelectRect),this.SelectRectRightMenu,this.FrameSplitData=new Map,this.FrameSplitData.set("double",new Si),this.FrameSplitData.set("price",new Ii),this.mapEvent=new Map,this.IsOnTouch=!1,this.TouchDrawCount=0,this.DisableMouse=!1,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.PressTime=500,this.NetworkFilter,this.LastMouseStatus={MouseOnToolbar:null},this.ClickDownPoint,this.IsDestroy=!1,this.EnableYDrag={Left:!1,Right:!1},this.EnableZoomIndexWindow=!1,this.EnableVerifyRecvData=!1,this.PhoneDBClick=new g,this.SelectedChart={EnableSelected:!1,EnableMoveOn:!1,Selected:{Identify:null},MoveOn:{Identify:null}},this.IndexChartDrag,this.EnableIndexChartDrag=!1,this.GlobalOption={IsValueFullRange:!1,IsDisplayLatest:!1},this.VerticalDrag,this.EnableVerticalDrag=!1,this.ClickModel={IsShowCorssCursor:!1},this.EnableClickModel=!1,this.DisplayLatestOption={Timer:null,Enable:!1,DelayTime:18e4,LastPoint:null},this.DrawDynamicInfoOption={Timer:null,Enable:!1,DelayTime:10},this.SetCorssCursorElement=function(t){t&&t.Element&&t.Canvas&&(this.CorssCursorElement=t.Element,this.CorssCursorCanvas=t.Canvas)},this.StopDisplayLatest=function(){this.GlobalOption.IsDisplayLatest=!1,this.DisplayLatestOption.Timer&&(clearTimeout(this.DisplayLatestOption.Timer),this.DisplayLatestOption.Timer=null)},this.StartStopDisplayLatest=function(){var t=this;this.StopDisplayLatest(),this.DisplayLatestOption.Enable&&(this.DisplayLatestOption.Timer=setTimeout((function(){t.DisplayLatest&&(l.Chart.Log("[JSChartContainer:StartStopDisplayLatest] call this.DisplayLatest()"),t.DisplayLatest())}),this.DisplayLatestOption.DelayTime))},this.StopDrawDynamicInfo=function(){this.DrawDynamicInfoOption.Timer&&(clearTimeout(this.DrawDynamicInfoOption.Timer),this.DrawDynamicInfoOption.Timer=null)},this.ChartDestroy=function(){this.IsDestroy=!0,this.StopAutoUpdate(),null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null)},this.ChartDestory=this.ChartDestroy,this.GetLatestVersionTimer=null,this.GetLatestVersion=function(){var t=this;null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null);var e=Math.floor(50*Math.random()),a=18e4+1e3*e;l.Chart.Log("[JSChartContainer::GetLatestVersion] wait for get hqchart latest version. ",a),this.GetLatestVersionTimer=setTimeout((function(){var e=0,a=0;t.Frame&&t.Frame.ChartBorder&&(e=t.Frame.ChartBorder.GetChartWidth(),a=t.Frame.ChartBorder.GetChartHeight());var i="".concat(atob("aHR0cHM6Ly9ocWNoYXJ0LnplYWxpbmsuY29tL2FwaS9HZXRWZXJzaW9u"),"?width=").concat(e,"&height=").concat(a,"&type=h5");null==f.LastVersion&&$n.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){l.Chart.Log("[JSChartContainer::GetLatestVersion] hqchart latest version. ",t),f.LastVersion=t},error:function(t,e,a){l.Chart.Log("[JSChartContainer::GetLatestVersion] Get HQChart latest version failed.",t)}})}),a)},this.SetFocus=function(){this.UIElement&&this.UIElement.focus()},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.GetIndexEvent=function(){return this.GetEventCallback(C.RECV_INDEX_DATA)},this.GetOverlayIndexEvent=function(){return this.GetEventCallback(C.RECV_OVERLAY_INDEX_DATA)},t.onmousemove=function(t){i.UIOnMouseMove(t)},t.oncontextmenu=function(t){return i.UIOnContextMenu(t)},t.ondblclick=function(t){i.UIOnDblClick(t)},t.onmousedown=function(t){i.UIOnMouseDown(t)},t.onmouseout=function(t){i.UIOnMounseOut(t)},t.onmouseleave=function(t){i.UIOnMouseleave(t)},this.UIOnMouseMove=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.StopDisplayLatest(),this.MoveOnChartDrawPicture=null,(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&1!=this.DisableMouse&&!this.BorderDrag&&!this.YDrag&&!this.IndexChartDrag){t&&"mouseout"==t.type&&0==t.buttons&&(a=i=-1);var r={X:a,Y:i,IsInClient:this.IsMouseOnClient(a,i)};this.LastMouseStatus.OnMouseMove=r,this.LastMouseStatus.MoveOnPoint={X:a,Y:i};var n=this.GetEventCallback(C.ON_MOUSE_MOVE),s=this.TitlePaint[0];n&&s&&(s.OnMouseMoveEvent=n),this.MoveOnPoint={X:a,Y:i},this.OnMouseMove(a,i,t),s&&(s.OnMouseMoveEvent=null),this.StartStopDisplayLatest()}},this.IsMouseOnClient=function(t,e){var a={Left:this.Frame.ChartBorder.GetLeft(),Top:this.Frame.ChartBorder.GetTop(),Width:this.Frame.ChartBorder.GetWidth(),Height:this.Frame.ChartBorder.GetHeight()};return a.Right=a.Left+a.Width,a.Bottom=a.Top+a.Height,t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom},this.UIOnContextMenu=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;return"function"==typeof this.OnRightMenu&&this.OnRightMenu(e,a,t),!1}},this.UIOnDblClick=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;this.OnDoubleClick(a,i,t)},this.TryYDrag=function(t,e){if(!this.EnableYDrag)return null;if(!this.EnableYDrag.Left&&!this.EnableYDrag.Right)return null;if(!this.Frame||!this.Frame.PtInFrameY)return null;var a=this.Frame.PtInFrameY(t,e);return!a||a.Index<0||1==a.IsOverlay?null:a.Left&&this.EnableYDrag.Left&&this.Frame.IsEnableDragY(a.Index)||a.Right&&this.EnableYDrag.Right&&this.Frame.IsEnableDragY(a.Index)?a:null},this.TryUpDownDrag=function(t,e){var a=this.Frame.PtInFrame(t,e);if(a<0)return null;var i=this.Frame.SubFrame[a];if(!i||!i.Frame)return null;var r=i.Frame;return r.YSplitOperator&&r.YSplitOperator.FixedYMaxMin?{Index:a,X:t,Y:e}:null},this.TryRectSelectDrag=function(t,e){var a=this.GetRectSelectPaint();if(!a)return null;if(a.GetPointCount()<=0)return null;var i=a.PtInPaint(t,e);return{Item:i,X:t,Y:e}},this.TryClickCrossCursor=function(t,e,a){if(this.ChartCorssCursor){var i=this.ChartCorssCursor.PtInButton(t,e);if(!i)return!1;var r=this.GetEventCallback(C.ON_CLICK_CROSSCURSOR_RIGHT);if(r&&r.Callback){var n={Button:i,e:a};r.Callback(r,n,this)}return!0}},this.TryClickButton=function(t,e,a){var i=this.Frame.PtInButtons(t,e);return i&&this.ClickFrameButton?(this.ClickFrameButton(i,a),!0):(i=this.PtInExtendChartButtons(t,e),i&&this.ClickExtendChartButton?(this.ClickExtendChartButton(i,a),!0):(i=this.PtInDrawPictureButtons(t,e),i&&this.ClickDrawPictureButton?(this.ClickDrawPictureButton(i,a),!0):(i=this.PtInTitleButtons(t,e),!(!i||!this.ClickTitleButton)&&(this.ClickTitleButton(i,a),!0))))},this.UIOnMouseDown=function(t){var e=this;if(this.MoveOnChartDrawPicture=null,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.ClickDownPoint={X:t.clientX,Y:t.clientY},this.IsOnTouch=!0,this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null;var a=I(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(!this.TryClickButton(i,r,t)&&!this.TryClickCrossCursor(i,r,t)&&(!this.TryClickChartTooltipData||!this.TryClickChartTooltipData(i,r,t))&&(!this.TryClickLock||!this.TryClickLock(i,r))){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),this.ChartPictureMenu&&this.ChartPictureMenu.Hide();var n=this.GetRectSelectPaint();if(n&&n.GetPointCount()>0){var s=n.PtInPaint(i,r);if(s)if(4==s.Type){this.UIElement.style.cursor="pointer";var o={X:t.clientX};this.GetXDataIndex(o)&&(this.RectSelectDrag={DataIndex:o.DataIndex,Type:s.Type,X:t.clientX},l.Chart.Log("[JSChartContainer::UIOnMouseDown] drag sub rect select ",o))}else this.UIElement.style.cursor="ew-resize",this.RectSelectDrag={Index:s.PointIndex,Type:s.Type},l.Chart.Log("[JSChartContainer::UIOnMouseDown] drag rect select ",s)}if(!this.RectSelectDrag&&this.ClearRectSelect(!1)&&this.Draw(),this.EnableBorderDrag&&this.Frame){var h=this.Frame.PtInFrameBorder(i,r);h&&h.Index>=0&&(this.UIElement.style.cursor="n-resize",this.BorderDrag={Index:h.Index},l.Chart.Log("[JSChartContainer::UIOnMouseDown] DragBorder ",h))}if(!this.BorderDrag){var u=this.TryYDrag(i,r);if(u)this.UIElement.style.cursor=0==u.Position?"n-resize":"row-resize",this.YDrag=u,l.Chart.Log("[JSChartContainer::UIOnMouseDown] dragY ",u);else{var c=this.TryUpDownDrag(i,r);c&&(this.UIElement.style.cursor="pointer",this.UpDownDrag=c,l.Chart.Log("[JSChartContainer::UIOnMouseDown] dragUpDown ",c))}}if(0!=this.DragMode){var d={Click:{},LastMove:{},CurrentMove:{}};d.Click.X=t.clientX,d.Click.Y=t.clientY,d.Click.IsInFrameBottom=this.Frame.PtInFrameBottom(i,r),d.LastMove.X=t.clientX,d.LastMove.Y=t.clientY,this.MouseDrag=d;var f=this.GetActiveDrawPicture(),m={Chart:this.SelectedChart.Selected.Chart,Identify:this.SelectedChart.Selected.Identify};if(this.SelectChartDrawPicture=null,this.BorderDrag);else if(this.YDrag||this.RectSelectDrag);else if(this.CurrentChartDrawPicture){this.UpDownDrag=null;var D=this.CurrentChartDrawPicture;2==D.Status?this.SetChartDrawPictureThirdPoint(d.Click.X,d.Click.Y):(this.SetChartDrawPictureFirstPoint(d.Click.X,d.Click.Y),this.FinishChartDrawPicturePoint()&&(D.IsDrawMain?this.Draw():this.DrawDynamicInfo())),!f.Select.Guid||this.CurrentChartDrawPicture&&f.Select.Guid==this.CurrentChartDrawPicture.Guid||f.Select.Chart.IsDrawMain&&this.Draw()}else{var p={};if(p.X=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,p.Y=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,this.GetChartDrawPictureByPoint(p)){if(1==p.ChartDrawPicture.EnableMove){this.UpDownDrag=null,this.CurrentChartDrawPicture=p.ChartDrawPicture,this.SelectChartDrawPicture=p.ChartDrawPicture;var v=!1;(f.Select.Guid&&f.Select.Chart&&f.Select.Chart.IsDrawMain||p.ChartDrawPicture.IsDrawMain)&&(v=!0),v&&this.Draw(),p.ChartDrawPicture.Status=20,p.ChartDrawPicture.ValueToPoint(),p.ChartDrawPicture.MovePointIndex=p.PointIndex,this.SelectChartDrawPicture.DragInfo={Click:{X:t.clientX,Y:t.clientY}}}else this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null;var g=this.GetEventCallback(C.ON_CLICK_DRAWPICTURE);if(g&&g.Callback){var S={DrawPicture:p.ChartDrawPicture};g.Callback(g,S,this)}else this.OnSelectChartPicture(p.ChartDrawPicture)}else{null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var T=this,x={X:this.ClickDownPoint.X,Y:this.ClickDownPoint.Y};this.ClickChartTimer=setTimeout((function(){T.TryClickPaintEvent(C.ON_CLICK_CHART_PAINT,x,t)}),250);var y=!1;if(this.SelectedChart.EnableSelected){var A=this.PtInChart(i,r);A?(this.SelectedChart.Selected.Identify!=A.Identify&&(this.SelectedChart.Selected.Identify=A.Identify,this.SelectedChart.Selected.Chart=A.Chart,y=!0),this.EnableIndexChartDrag&&(this.IndexChartDrag={SelectedChart:A,LastMove:{X:i,Y:r},Click:{X:i,Y:r}},this.IndexChartDrag.Info=this.GetSelectedChartInfo(A),this.IndexChartDrag.Info&&(this.IndexChartDrag.Info.FrameID=this.Frame.PtInFrame(i,r)))):this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,this.SelectedChart.Selected.Chart=null,y=!0)}else this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,y=!0);if(null!=f.Select.Guid&&null==this.SelectChartDrawPicture||y){var b=0;if(f.Select.Guid&&f.Select.Chart&&f.Select.Chart.IsDrawMain&&(b=1),y){var w=m.Chart;w&&w.SetSelectedStatus&&(w.SetSelectedStatus(0),b=1),w=this.SelectedChart.Selected.Chart,w&&w.SetSelectedStatus&&(w.SetSelectedStatus(1),b=1)}1==b?this.Draw():this.DrawDynamicInfo()}}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}}}}},this.DocOnMouseMove=function(e){if(!this.ChartSplashPaint||1!=this.IsEnableSplash){var a=this.MouseDrag;if(a){var i=Math.abs(a.LastMove.X-e.clientX),r=Math.abs(a.LastMove.Y-e.clientY),n=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,s=this.RectSelectDrag&&4==this.RectSelectDrag.Type;if(a.CurrentMove&&(a.CurrentMove.X=e.clientX,a.CurrentMove.Y=e.clientY),this.BorderDrag&&this.BorderDrag.Index>=0){if(Math.abs(a.LastMove.Y-e.clientY)<5)return;var o=e.clientY-a.LastMove.Y;this.OnMoveFromeBorder(this.BorderDrag.Index,o),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.YDrag&&this.YDrag.Index>=0){if(r<5)return;o=e.clientY-a.LastMove.Y;l.Chart.Log("[JSChartContainer::DocOnMouseMove] YDrag ",this.YDrag,o),this.OnZoomUpDownFrameY(this.YDrag,o),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){if(Math.abs(a.LastMove.Y-e.clientY)<2&&Math.abs(a.LastMove.X-e.clientX)<2)return;var h=this.GetExtendChartByClassName("DragMovePaint");if(h&&h.Chart){var u=I(),c=(e.clientX-this.UIElement.getBoundingClientRect().left)*u,d=(e.clientY-this.UIElement.getBoundingClientRect().top)*u;h.Chart.Point={X:c,Y:d},h.Chart.IsShow=!0,h.Chart.Info=this.IndexChartDrag.Info,this.DrawDynamicInfo()}this.IndexChartDrag.LastMove.X=c,this.IndexChartDrag.LastMove.Y=d,a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.CurrentChartDrawPicture){var f=this.CurrentChartDrawPicture;if(1==f.Status||2==f.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.SetChartDrawPictureSecondPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo()}else if(3==f.Status)this.SetChartDrawPictureThirdPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo();else if(20==f.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<1)return;if(this.SelectChartDrawPicture&&this.SelectChartDrawPicture.EnableCtrlMove&&!e.ctrlKey)return;this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo&&(this.SelectChartDrawPicture.DragInfo.Move={X:e.clientX,Y:e.client}),this.MoveChartDrawPicture(e.clientX-a.LastMove.X,e.clientY-a.LastMove.Y,!1,a)&&this.DrawDynamicInfo()}a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(1==this.DragMode||n||s)this.OnDragMode_One({X:i,Y:r},e);else if(2==this.DragMode){var C=Math.abs(a.LastMove.Y-e.clientY);if(i<5&&C<5)return;this.UIElement.style.cursor="default";c=a.Click.X-t.getBoundingClientRect().left,d=a.Click.Y-t.getBoundingClientRect().top;var m=e.clientX-t.getBoundingClientRect().left,D=e.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(c,d,m,D),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}}}},this.OnDragMode_One=function(t,e){var a=t.X,i=t.Y,r=this.MouseDrag;if(!(a<5&&i<5)){var n=!1,s=!1;if(i>=5&&this.UpDownDrag&&this.UpDownDrag.Index>=0){var o=e.clientY-r.LastMove.Y;l.Chart.Log("[JSChartContainer::OnDragMode_One] UpDownDrag ",this.UpDownDrag,o),this.UIElement.style.cursor="pointer",this.OnUpDonwFrameY(this.UpDownDrag,o)&&(n=!0,s=!0),r.LastMove.Y=e.clientY}if(a>=5){if(this.RectSelectDrag){if(this.RectSelectDrag.Index>=0){var h={X:e.clientX,Y:e.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(h)&&(n=!0)}else if(4===this.RectSelectDrag.Type){h={X:e.clientX};if(!this.GetXDataIndex(h))return;if(h.DataIndex==this.RectSelectDrag.DataIndex)return;var u=h.DataIndex-this.RectSelectDrag.DataIndex,c=!0;if(u>0&&(c=!1),!this.MoveSubRectSelect({Step:Math.abs(u),IsLeft:c,X:e.clientX,Y:e.clientY}))return;this.RectSelectDrag.DataIndex=h.DataIndex,this.RectSelectDrag.X=e.clientX,n=!0}}else{c=!0;r.LastMove.X<e.clientX&&(c=!1);var d="pointer";r.Click.IsInFrameBottom&&(d="ew-resize");var f=this.GetMoveOneStepWidth();if(a<f)return this.UIElement.style.cursor=d,void(n&&this.Draw());r.Click&&r.Click.IsInFrameBottom?this.XCoordinateZoom(a,c)&&(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):this.DataMove(a,c)?(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):s||this.DragDownloadData&&this.DragDownloadData(),this.UIElement.style.cursor=d}r.LastMove.X=e.clientX}n&&(this.Draw(),this.OnKLinePageChange("datamove"))}},this.GetXDataIndex=function(e){if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var a=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var i=this.Frame.SubFrame[0].Frame,r=I(),n=(e.X-t.getBoundingClientRect().left)*r,s=i.GetXData(n);s=parseInt(s.toFixed(0));var o=s+a.DataOffset;o>=a.Data.length&&(o=a.Data.length-1);var h=a.Data[o];return e.DataIndex=o,e.Item=h,!0},this.DocOnMouseUp=function(e){document.onmousemove=null,document.onmouseup=null;var a="MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName,i=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,r=this.RectSelectDrag&&4==this.RectSelectDrag.Type,n=!0;if(this.CurrentChartDrawPicture){var s=this.CurrentChartDrawPicture;2==s.Status||1==s.Status||3==s.Status?(s.PointStatus=s.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():n=!1):20==s.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){var o=this.GetExtendChartByClassName("DragMovePaint");o&&o.Chart&&o.Chart.Clear(),this.OnDragChart(this.IndexChartDrag)||this.DrawDynamicInfo(),this.UIElement.style.cursor="default"}else if(i)this.OnDragSelectRectMouseUp&&this.OnDragSelectRectMouseUp(e);else if(r)this.OnDragSubSelectRectMouseUp&&this.OnDragSubSelectRectMouseUp(e);else if(a)this.OnMinuteSelectRectMouseUp&&this.OnMinuteSelectRectMouseUp(e);else if(2==this.DragMode){var h=this.MouseDrag;h.LastMove.X=e.clientX,h.LastMove.Y=e.clientY;var u=new P,c=I();if(u.XStart=(h.Click.X-t.getBoundingClientRect().left)*c,u.YStart=(h.Click.Y-t.getBoundingClientRect().top)*c,u.XEnd=(h.LastMove.X-t.getBoundingClientRect().left)*c,u.YEnd=(h.LastMove.Y-t.getBoundingClientRect().top)*c,u.JSChartContainer=this,u.Stock={Symbol:this.Symbol,Name:this.Name},!this.BorderDrag&&this.GetSelectRectData(u)){var d=this.GetEventCallback(C.ON_SELECT_RECT),f=this.GetRectSelectPaint(),m=!0;if(d&&d.Callback){var D={X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:u,RectSelectPaint:f,IsShowMenu:!0};d.Callback(d,D,this),m=D.IsShowMenu}a?(this.HideSelectRect(),this.UpdateSelectRect(u.Start,u.End)):m&&this.SelectRectRightMenu&&(e.data={Chart:this,X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:u,RectSelectPaint:f},this.SelectRectRightMenu.DoModal(e))}else this.TryClickPaintEvent(C.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e)}else this.TryClickPaintEvent(C.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e);l.Chart.Log("[KLineChartContainer::document.onmouseup]",e),this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.DragInfo=null),this.UIElement.style.cursor="default",this.MouseDrag=null,this.ClickDownPoint=null,this.IsOnTouch=!1,this.BorderDrag&&this.BorderDrag.Index>=0&&this.Frame.SaveSubFrameHeightRate(),this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null,!0===n&&(this.CurrentChartDrawPicture=null)},this.UIOnMounseOut=function(t){l.Chart.Log("[KLineChartContainer::UIOnMounseOut]",t),this.UIOnMouseMove(t)},this.UIOnMouseleave=function(t){l.Chart.Log("[KLineChartContainer::UIOnMouseleave]",t)},this.OnDragChart=function(t){if(!t)return!1;var e=t.Info,a=t.LastMove,i=e.FrameID,r=this.Frame.PtInFrame(a.X,a.Y);return r<0?-3==r&&this.MoveIndexToNewWindow({WindowIndex:i,IndexID:e.IndexID},{Operator:0}):i!=r&&this.MoveIndex({WindowIndex:i,IndexID:e.IndexID},{WindowIndex:r},{Operator:0})},this.GetSelectedChartInfo=function(t){if(!t)return null;var e={Type:0},a=t.Identify;if("Main-KLine"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=He.MAIN_KLINE;else if(0==a.indexOf("Overlay-KLine-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=He.OVERLAY_KLINE;else if(0==a.indexOf("Overlay-Minute-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=He.OVERLAY_MINUTE;else if("Minute-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=He.MAIN_MINUTE;else if("Minute-Average-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=He.MAIN_AVERAGE_MINUTE;else if("Minute-Vol-Bar"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=He.MAIN_MINUTE_VOL;else if(0==a.indexOf("guid"))for(var i=0;i<this.TitlePaint.length;++i){var r=this.TitlePaint[i];if("DynamicChartTitlePainting"==r.ClassName){if(r.Identify==a){e.IndexName=r.Title,e.IndexID=a,e.Type=He.MAIN_INDEX;break}var n,s=(0,h.default)(r.OverlayIndex);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(o[0]==a){e.IndexName=o[1].Title,e.IndexID=a,e.Type=He.OVERLAY_INDEX;break}}}catch(l){s.e(l)}finally{s.f()}if(e.Type>0)break}}return e},this.ClickEvent=function(e){var a=this.GetEventCallback(C.ON_CLICK);if(!a||!a.Callback)return!1;if(this.ClickDownPoint.X!=e.clientX||this.ClickDownPoint.Y!=e.clientY)return!1;var i,r=I(),n=(e.clientX-t.getBoundingClientRect().left)*r,s=(e.clientY-t.getBoundingClientRect().top)*r,o={X:e.clientX,Y:e.clientY,FrameID:-1};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),i=this.Canvas.isPointInPath(n,s),i){var h={},l=this.Frame.GetYData(s,h);if(ze.IsNumber(h.FrameID)&&h.FrameID>=0){var u=this.Frame.GetXData(n);o.FrameID=h.FrameID,o.Data={X:u,Y:l}}}return a.Callback(a,o,this),!0},this.DBClickEvent=function(e,a){var i=this.GetEventCallback(C.ON_DBCLICK);if(!i||!i.Callback)return!1;var r=I(),n=(a.clientX-t.getBoundingClientRect().left)*r,s=(a.clientY-t.getBoundingClientRect().top)*r,o={X:a.clientX,Y:a.clientY,FrameID:-1,ClientPos:-1},h=this.PtInClient(n,s);if(o.ClientPos=h,h>0){var l={},u=this.Frame.GetYData(s,l);if(ze.IsNumber(l.FrameID)&&l.FrameID>=0){var c=this.Frame.GetXData(n);o.FrameID=l.FrameID,o.Data={X:c,Y:u},this.GetDataItem&&(o.Data.Item=this.GetDataItem({ClientPos:h,Index:c,Point:{X:n,Y:s}}))}}return e&&e.SelectedChart&&(o.SelectedChart=this.GetSelectedChartInfo(e.SelectedChart)),i.Callback(i,o,this),!0},this.PtInChartPaintTooltip=function(t,e,a){for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.PtInOverlayChartPaintTooltip=function(t,e,a){for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.TryClickPaintEvent=function(e,a,i){var r=this.GetEventCallback(e);if(r&&r.Callback&&a.X==i.clientX&&a.Y==i.clientY){var n=I(),s=(i.clientX-t.getBoundingClientRect().left)*n,o=(i.clientY-t.getBoundingClientRect().top)*n,h=new mt,l=null,u=this.PtInChartPaintTooltip(s,o,h);if(u&&(l={Symbol:this.Symbol,Name:this.Name}),u||(u=this.PtInOverlayChartPaintTooltip(s,o,h),u&&(l={Symbol:h.ChartPaint.Symbol,Name:h.ChartPaint.Title})),h.Data){var c={X:i.clientX,Y:i.clientY,Stock:l,Tooltip:h};return r.Callback(r,c,this),!0}}return!1},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.IsPhonePinching=function(t){var e=t.changedTouches.length,a=t.touches.length;return(1==e||2==e)&&2==a},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.GetToucheData=function(t,e){for(var a=new Array,i=I(),r=0;r<t.touches.length;++r){var n=t.touches[r];e?a.push({clientX:n.clientY*i,clientY:n.clientX*i,pageX:n.pageY*i,pageY:n.pageX*i}):a.push({clientX:n.clientX*i,clientY:n.clientY*i,pageX:n.pageX*i,pageY:n.pageY*i})}return a},this.IsSingleTouch=function(t){var e=t.touches.length;return 1==e},this.StopDragTimer=function(){ze.IsNumber(this.DragTimer)&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y),r=180*Math.atan(a/i)/Math.PI;return r},t.ontouchstart=function(t){i.OnTouchStart(t)},t.ontouchmove=function(t){i.OnTouchMove(t)},t.ontouchend=function(t){i.OnTouchEnd(t)},this.AddPhoneDBClickInfo=function(t,e,a){var i={X:t,Y:e,Time:a};this.PhoneDBClickInfo.Start.push(i)},this.ClearPhoneDBClickInfo=function(){this.PhoneDBClickInfo.Start=[]},this.IsShortPhoneClick=function(t,e,a){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer();var e=this.IsSingleTouch(t);if((0==this.EnableScrollUpDown||!e||this.DragMode==D.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow)&&t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a=this.GetToucheData(t,this.IsForceLandscape),i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var r=i.X,n=i.Y;if(this.TryClickLock&&this.TryClickLock(r,n))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(r,n))return}if(this.ClickFrameButton){var s=this.Frame.PtInButtons(i.X,i.Y);if(s)return void this.ClickFrameButton(s,t)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(i.X,i.Y)&&(this.VerticalDrag.IsDrag=!0));var o=!0;this.ChartDrawOption.IsLockScreen?o=!1:this.DragMode==D.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(o=!1):this.DragMode==D.DISABLE_DRAG_ID?o=!1:e||(o=!1),this.VerticalDrag&&(o=!1),this.EnableClickModel&&1==this.ClickModel.IsShowCorssCursor&&(o=!1);var h={Click:{},LastMove:{}};h.Click.X=a[0].clientX,h.Click.Y=a[0].clientY,h.LastMove.X=a[0].clientX,h.LastMove.Y=a[0].clientY,this.MouseDrag=h,this.PhoneTouchInfo={Start:{X:a[0].clientX,Y:a[0].clientY},End:{X:a[0].clientX,Y:a[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null;if(this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;return 2==u.Status?this.SetChartDrawPictureThirdPoint(h.Click.X,h.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(h.Click.X,h.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(t.cancelable&&t.preventDefault())}i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0);var c={X:i.X,Y:i.Y};I();if(this.GetChartDrawPictureByPoint(c)){c.ChartDrawPicture.Status=20,c.ChartDrawPicture.ValueToPoint(),c.ChartDrawPicture.MovePointIndex=c.PointIndex,c.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=c.ChartDrawPicture,this.SelectChartDrawPicture=c.ChartDrawPicture;var d=this.GetEventCallback(C.ON_CLICK_DRAWPICTURE);if(d&&d.Callback){var f={DrawPicture:c.ChartDrawPicture};d.Callback(d,f,this)}return void(t.cancelable&&t.preventDefault())}if(o){var m=this;this.DragTimer=setTimeout((function(){if(h.Click.X==h.LastMove.X&&h.Click.Y==h.LastMove.Y){m.MouseDrag;m.MouseDrag=null,m.DragMode==D.CLICK_TOUCH_MODE_ID&&(m.TouchStatus.CorssCursorShow=!0),!0===m.EnableClickModel&&(m.ClickModel.IsShowCorssCursor=!0),m.MoveCorssCursor(h.Click,t)}}),m.PressTime)}this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(a[0].clientX,a[0].clientY,Date.now()),l.Chart.Log("[JSChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==D.CLICK_TOUCH_MODE_ID||(this.DragMode==D.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(h.Click,t)):this.EnableClickModel||(this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(h.Click,t):this.IsClickShowCorssCursor&&this.MoveCorssCursor(h.Click,t))),this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},t)}else if(this.IsPhonePinching(t)){var p={Start:{},Last:{}};a=this.GetToucheData(t,this.IsForceLandscape);p.Start={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},p.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},this.PhonePinch=p,this.SelectChartDrawPicture=null}}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i)this.IsForceLandscape&&(y=t.getBoundingClientRect().width-a[0].clientY),this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:a[0].clientX,Y:a[0].clientY},e);else{var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),s=Math.abs(i.LastMove.Y-a[0].clientY);n=parseInt(n);var o=this.DragMode==D.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(o=!0!==this.VerticalDrag.IsDrag),this.EnableClickModel&&(o=!0===this.ClickModel.IsShowCorssCursor),this.CurrentChartDrawPicture){var h=this.CurrentChartDrawPicture;if(1==h.Status||2==h.Status){if(n<5&&s<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==h.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==h.Status){if(n<5&&s<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else if(o){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(i.Click,e)}else if(1==this.DragMode||0==o){if((s>0&&n<=3||r<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();if(n<5||r<=this.TouchMoveMinAngle)return void this.PreventTouchEvent(e);if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var l=!0;i.LastMove.X<a[0].clientX&&(l=!1);var u=this.GetMoveOneStepWidth();if(n<u)return;this.DataMove(n,l)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){if(this.DragMode==D.DISABLE_DRAG_ID)return;this.PreventTouchEvent(e);var c=this.PhonePinch;if(!c)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var d=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(c.Last.Y-c.Last.Y2),C=d-f,m=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(c.Last.X-c.Last.X2),v=m-p,g=this.ZoomStepPixel;if(Math.abs(C)<g&&Math.abs(v)<g)return;var S=C;if(Math.abs(C)<g&&(S=v),S>0){var I={IsLockRight:this.IsZoomLockRight};if(I.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(I))return;this.CursorIndex=I.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}else{I={IsLockRight:this.IsZoomLockRight};if(I.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(I))return;this.CursorIndex=I.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}c.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)}},this.OnTouchEnd=function(t){if(l.Chart.Log("[KLineChartContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=!0;if(this.CurrentChartDrawPicture){var a=this.CurrentChartDrawPicture;2==a.Status||1==a.Status||3==a.Status?(a.PointStatus=a.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():e=!1):20==a.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var i=Date.now();this.PhoneDBClick.AddTouchEnd(i),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.VerticalDrag=null,!0===e&&(this.CurrentChartDrawPicture=null),this.StopDragTimer(),this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnTouchDBClick=function(t){var e=this.PointAbsoluteToRelative(t[0].X,t[0].Y,!0),a=e.X,i=e.Y;l.Chart.Log("[KLineChartContainer:OnTouchDBClick] Phone dbclick absolute [".concat(a,",").concat(i,"], soruce [").concat(t[0].X,",").concat(t[0].Y,"]"));var r=this.Frame.PtInFrame(a,i);if(l.Chart.Log("[KLineChartContainer::OnTouchDBClick] frameId",r),r>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(r,{X:a,Y:i}))return this.Frame.SetSizeChage(!0),this.Draw(),!0},this.TouchEvent=function(t,e){var a=t.EventID,i=this.GetEventCallback(a);if(!i||!i.Callback)return!1;var r=this.PhoneTouchInfo;if(!r||!r.Start||!r.End)return!1;var n,s=I(),o=r.End.X/s,h=r.End.Y/s,l=r.End.X-this.UIElement.getBoundingClientRect().left*s,u=r.End.Y-this.UIElement.getBoundingClientRect().top*s,c={X:o,Y:h,FrameID:-1,FunctionName:t.FunctionName,Drag:{Start:{X:r.Start.X/s,Y:r.Start.Y/s},End:{X:r.End.X/s,Y:r.End.Y/s}}};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),n=this.Canvas.isPointInPath(l,u),n)if(this.Frame&&this.Frame.IsHScreen){var d={},f=this.Frame.GetYData(l,d);if(ze.IsNumber(d.FrameID)&&d.FrameID>=0){var C=this.Frame.GetXData(u);c.FrameID=d.FrameID,c.Data={X:C,Y:f}}}else{d={},f=this.Frame.GetYData(u,d);if(ze.IsNumber(d.FrameID)&&d.FrameID>=0){C=this.Frame.GetXData(l);c.FrameID=d.FrameID,c.Data={X:C,Y:f}}}return i.Callback(i,c,this),!0},this.MoveCorssCursor=function(t,e){var a=I(),i=t.X-this.UIElement.getBoundingClientRect().left*a,r=t.Y-this.UIElement.getBoundingClientRect().top*a;this.DragMode==D.CLICK_TOUCH_MODE_ID&&(this.TouchStatus.CorssCursorShow=!0),this.OnMouseMove(i,r,e,!0)},this.DrawEmpty=function(){this.UIElement.width<=0||this.UIElement.height<=0||(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Frame&&(this.Frame.ScreenImageData=null,this.Frame.Draw()))},this.PtInChart=function(t,e){for(var a=null,i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.PtInChart&&(!r.IsHideScriptIndex()&&(a=r.PtInChart(t,e),a)))return a}for(i=0;i<this.OverlayChartPaint.length;++i){r=this.OverlayChartPaint[i];if(r.PtInChart&&(a=r.PtInChart(t,e),a))return a}return this.Frame.PtInOveralyChart&&(a=this.Frame.PtInOveralyChart(t,e),a)?a:null},this.DrawSelectedStatus=function(){if(this.SelectedChart.MoveOn.Identify||this.SelectedChart.Selected.Identify){for(var t=0;t<this.ChartPaint.length;++t){var e=this.ChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(t=0;t<this.OverlayChartPaint.length;++t){e=this.OverlayChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(t=0;t<this.OverlayChartPaint.length;++t){e=this.OverlayChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}this.Frame.DrawOveralySelectedStatus&&this.Frame.DrawOveralySelectedStatus(this.SelectedChart)}},this.SetCanvas=function(t){if(this.Frame)for(var e=this.Frame.SubFrame,a=0;a<e.length;++a){var i=e[a];i.Frame.Canvas=t;for(var r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n.Frame.Canvas=t;for(var s=0;s<n.ChartPaint.length;++s){var o=n.ChartPaint[s];o.Canvas=t}}}for(a=0;a<this.ChartDrawPicture.length;++a){i=this.ChartDrawPicture[a];i.Canvas=t}for(a=0;a<this.ChartPaint.length;++a){i=this.ChartPaint[a];i.Canvas=t}for(a=0;a<this.ChartPaintEx.length;++a){i=this.ChartPaintEx[a];i.Canvas=t}for(a=0;a<this.OverlayChartPaint.length;++a){i=this.OverlayChartPaint[a];i.Canvas=t}for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];i.Canvas=t}},this.Draw=function(){var t=this;if(this.ChartCorssCursor&&(this.ChartCorssCursor.Status=0),!(this.UIElement.width<=0||this.UIElement.height<=0)){this.StopDrawDynamicInfo(),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.CacheCanvas&&this.CacheCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var e=I();if(this.Canvas.lineWidth=e,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.ClearCoordinateText(),this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();if(this.CacheCanvas&&this.SetCanvas(this.CacheCanvas),this.Frame.SetBeforeDrawXYCallback&&this.Frame.SetBeforeDrawXYCallback((function(e){t.BeforeDrawXYCoordinate(e)})),this.Frame.Draw(),this.Frame.DrawCustomVertical){var a=this.GetEventCallback(C.ON_CUSTOM_VERTICAL_DRAW);this.Frame.DrawCustomVertical(a)}this.Frame.CalculateLock();for(var i=0;i<this.ChartDrawPicture.length;++i){var r=this.ChartDrawPicture[i];r.IsDrawMain&&(r.IsDrawMain()&&r.MainDraw())}for(i=0;i<this.ChartPaint.length;++i){r=this.ChartPaint[i];r.IsDrawFirst&&r.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!0);for(i=0;i<this.ChartPaint.length;++i){r=this.ChartPaint[i];r.IsDrawFirst||r.Draw()}for(i=0;i<this.ChartPaintEx.length;++i){r=this.ChartPaintEx[i];r.Draw()}for(i=0;i<this.OverlayChartPaint.length;++i){r=this.OverlayChartPaint[i];r.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!1);for(i=0;i<this.ExtendChartPaint.length;++i){r=this.ExtendChartPaint[i];r.IsCallbackDraw||(r.DrawAfterPicture||r.IsDynamic||0!=r.IsAnimation||r.Draw())}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.KLineIncreaseCustomHorizontal(),this.Frame.DrawCustomHorizontal&&this.Frame.DrawCustomHorizontal(),this.Frame.DrawEx&&this.Frame.DrawEx({Symbol:this.Symbol}),this.ChartInfoPaint&&this.ChartInfoPaint.Draw(),this.Frame.DrawLock(),this.Frame.DrawLogo(),this.CacheCanvas?(this.Canvas.drawImage(this.CacheElement,0,0),this.SetCanvas(this.Canvas)):this.Frame.Snapshot(),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus();var n=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(n=this.LastMouseStatus.MoveOnPoint);for(i=0;i<this.ExtendChartPaint.length;++i){r=this.ExtendChartPaint[i];r.IsCallbackDraw||(r.DrawAfterPicture||r.IsDynamic&&!1===r.DrawAfterTitle&&(r.Draw(),r.DrawToolbar&&r.DrawToolbar(n)))}for(i=0;i<this.ChartDrawPicture.length;++i){r=this.ChartDrawPicture[i];r.IsDrawFirst&&r.Draw()}this.DrawDrawPictureXYCoordinate();var s=null;if(null!=this.LastPoint.X||null!=this.LastPoint.Y){if(this.ChartCorssCursor){this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex;var o=!1;this.CorssCursorCanvas&&(this.ChartCorssCursor.Canvas=this.CorssCursorCanvas,this.ChartCorssCursor.Canvas.clearRect(0,0,this.CorssCursorElement.width,this.CorssCursorElement.height),o=!0);var h=this.PtInButton(this.LastPoint.X,this.LastPoint.Y);h||(this.DragMode==D.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():this.EnableClickModel?!0===this.ClickModel.IsShowCorssCursor&&this.ChartCorssCursor.Draw():!0===this.CorssCursorTouchEnd&&this.MouseDrag||1==this.CorssCursorTouchEnd&&0==this.IsOnTouch||this.ChartCorssCursor.Draw()),o&&(this.ChartCorssCursor.Canvas=this.Canvas)}s=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y)}var l=this.GetDrawStatus();l.DrawName="Draw";var u=this.GetEventCallback(C.ON_TITLE_DRAW),c=this.GetEventCallback(C.ON_INDEXTITLE_DRAW);for(i=0;i<this.TitlePaint.length;++i){r=this.TitlePaint[i];r.IsDynamic&&(r.CursorIndex=this.CursorIndex,r.LastPoint=this.LastPoint,"DynamicChartTitlePainting"==r.ClassName?r.OnDrawEvent=c:r.OnDrawEvent=u,r.OnDrawEvent&&(r.OnDrawEvent.FunctionName="Draw",r.OnDrawEvent.PointPosition=s),r.DrawStatus=l,r.Draw(n,this.LastMouseStatus))}for(i=0;i<this.ExtendChartPaint.length;++i){r=this.ExtendChartPaint[i];r.IsCallbackDraw||(r.DrawAfterPicture||r.IsDynamic&&!0===r.DrawAfterTitle&&0==r.IsAnimation&&r.Draw())}if(this.EnableAnimation)for(i=0;i<this.ExtendChartPaint.length;++i){r=this.ExtendChartPaint[i];!0===r.IsAnimation&&r.Draw()}for(i=0;i<this.ChartDrawPicture.length;++i){r=this.ChartDrawPicture[i];r.IsDrawFirst||(r.IsDrawMain&&r.IsDrawMain()||r.Draw())}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(i=0;i<this.ExtendChartPaint.length;++i){r=this.ExtendChartPaint[i];r.DrawAfterPicture&&r.Draw()}if(this.OffscreenToShowCanvas(),"function"==typeof this.UpdateScrollBar&&this.UpdateScrollBar(),this.mapEvent.has(C.CHART_STATUS)){var d=this.mapEvent.get(C.CHART_STATUS),f={};"function"==typeof this.GetChartStatus&&(f=this.GetChartStatus()),d.Callback(d,f,this)}++this.TouchDrawCount}},this.PtInButton=function(t,e){var a=this.Frame.PtInButtons(t,e);return a?{Name:"FrameButton",Button:a}:(a=this.PtInExtendChartButtons(t,e),a?{Name:"ExtendChartButton",Button:a}:(a=this.PtInDrawPictureButtons(t,e),a?{Name:"DrawPictureButton",Button:a}:(a=this.PtInTitleButtons(t,e),a?{Name:"TitleButton",Button:a}:null)))},this.DrawDrawPictureXYCoordinate=function(){var t=null;this.CurrentChartDrawPicture?t=this.CurrentChartDrawPicture:this.SelectChartDrawPicture&&(t=this.SelectChartDrawPicture);for(var e={Symbol:this.Symbol,Period:this.Period},a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i&&(this.IsDrawPictureXY&&t&&(t==i||t.Guid==i.Guid)&&this.Frame.DrawPictureCoordinate(t,e)||i.IsShowYCoordinate&&i.Frame&&i.Frame.DrawPicturePointYCoordinate(i,e))}},this.BeforeDrawXYCoordinate=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a.IsCallbackDraw&&(["KLineYAxisBGPaint","DepthMapPaint","BackgroundPaint","MinuteBackgroundPaint"].includes(a.ClassName)?a.FrameID==t.Identify&&a.Draw():we.IsCallbackDraw(a.ClassName)&&a.FrameID==t.Identify&&a.Draw())}},this.KLineIncreaseCustomHorizontal=function(){if(this.Frame&&this.Frame.SubFrame){var t=this.Frame.SubFrame[0].Frame;if(t){var e=Hr(this.Symbol),a=!1;t.YSplitOperator&&1==t.YSplitOperator.CoordinateType&&(a=!0);for(var i=!1,r=0;r<t.CustomHorizontalInfo.length;++r){var n=t.CustomHorizontalInfo[r];if(4==n.Type&&(i=!0),a&&3==n.Type||2==n.Type){var s=this.ChartPaint[0];if(!s)continue;var o=s.Data;if(!o||!ze.IsNonEmptyArray(o.Data))continue;if(!ze.IsNumber(s.DrawKRange.Start)||!ze.IsNumber(s.DrawKRange.End))continue;var h=o.Data[s.DrawKRange.Start],l=o.Data[s.DrawKRange.End],u=(l.Close-h.Close)/h.Close*100;n.Value=l.Close,2==n.Type?(n.Message[1]=l.Close.toFixed(e),l.Close>l.Open?n.LineColor=xi.FrameLatestPrice.UpBarColor:l.Close<l.Open?n.LineColor=xi.FrameLatestPrice.DownBarColor:n.LineColor=xi.FrameLatestPrice.UnchagneBarColor):n.Message[1]=u.toFixed(2)+"%",this.Name&&(n.Title=this.Name)}}if(i){var c=t.CustomHorizontalInfo.filter((function(t,e,a){return 4!=t.Type}));t.CustomHorizontalInfo=c}for(r=0;r<this.OverlayChartPaint.length;++r){s=this.OverlayChartPaint[r];if(s&&4==s.YInfoType){o=s.Data;if(o&&ze.IsNonEmptyArray(o.Data)&&ze.IsNumber(s.DrawKRange.Start)&&ze.IsNumber(s.DrawKRange.End)){h=o.Data[s.DrawKRange.Start],l=o.Data[s.DrawKRange.End],u=(l.Close-h.Close)/h.Close*100,n=new O;n.Value=l.Close/s.ShowRange.FirstOverlayOpen*s.ShowRange.FirstOpen,n.Message[1]=u.toFixed(2)+"%",n.LineType=-1,n.Type=s.YInfoType,n.LineColor=s.Color,n.TextColor=xi.FrameLatestPrice.OverlayTextColor,s.Title&&(n.Title=s.Title),t.CustomHorizontalInfo.push(n)}}}}}},this.OffscreenToShowCanvas=function(){this.ShowCanvas&&(this.ShowCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.ShowCanvas.drawImage(this.OffscreenCanvasElement,0,0))},this.GetDrawStatus=function(){var t={Point:{X:this.LastPoint.X,Y:this.LastPoint.Y},IsOnTouch:this.IsOnTouch,CorssCursorTouchEnd:this.CorssCursorTouchEnd,IsTitleShowLatestData:this.IsTitleShowLatestData,IsMinuteChart:"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName};return t.FrameID=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y),t},this.DrawDynamicInfo=function(t){if(this.LastMouseStatus.MouseOnToolbar=null,null!=this.Frame.ScreenImageData||this.CacheCanvas){var e=!1;if(this.ChartCorssCursor&&(null==this.ChartCorssCursor.PointX&&null==this.ChartCorssCursor.PointY||(e=!0)),e=!0,0==e)for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(!i.IsCallbackDraw&&(i.IsDynamic&&i.IsEraseBG)){e=!0;break}}e&&(this.Frame.ScreenImageData?this.Canvas.putImageData(this.Frame.ScreenImageData,0,0):this.CacheCanvas&&(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.drawImage(this.CacheElement,0,0))),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus();var r=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(r=this.LastMouseStatus.MoveOnPoint);for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];i.IsCallbackDraw||(i.DrawAfterPicture||i.IsDynamic&&!1===i.DrawAfterTitle&&0==i.IsAnimation&&(i.Draw(),i.DrawToolbar&&i.DrawToolbar(r,this.LastMouseStatus)))}for(a=0;a<this.ChartDrawPicture.length;++a){i=this.ChartDrawPicture[a];i.IsDrawFirst&&i.Draw()}if(this.DrawDrawPictureXYCoordinate(),this.ChartCorssCursor){this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex;var n=!1;this.CorssCursorCanvas&&(this.ChartCorssCursor.Canvas=this.CorssCursorCanvas,this.ChartCorssCursor.Canvas.clearRect(0,0,this.CorssCursorElement.width,this.CorssCursorElement.height),n=!0),t&&0==t.Corss||(this.DragMode==D.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.IsShowCorssCursor?this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&!0===this.CorssCursorTouchEnd||this.CurrentChartDrawPicture?!0===this.IsOnTouch&&this.CurrentChartDrawPicture&&this.EnableShowCorssCursor&&1==this.EnableShowCorssCursor.DrawPicture&&this.ChartCorssCursor.Draw():this.ChartCorssCursor.Draw()),n&&(this.ChartCorssCursor.Canvas=this.Canvas)}var s=null;t&&t.Point&&("OnMouseMove"==t.ParentFunction||"MoveCorssCursorIndex"==t.ParentFunction)&&(s=this.Frame.PtInFrame(t.Point.X,t.Point.Y));var o=this.GetDrawStatus();o.DrawName="DrawDynamicInfo";for(a=0;a<this.TitlePaint.length;++a){i=this.TitlePaint[a];i.IsDynamic&&(i.CursorIndex=this.CursorIndex,i.LastPoint=this.LastPoint,i.OnDrawEvent&&(i.OnDrawEvent.FunctionName="DrawDynamicInfo",i.OnDrawEvent.PointPosition=s),i.DrawStatus=o,"DynamicMinuteTitlePainting"==i.ClassName&&(t&&ze.IsNumber(t.ClientPos)&&t.Point?i.PointInfo={ClientPos:t.ClientPos,Point:{X:t.Point.X,Y:t.Point.Y}}:i.PointInfo=null),i.Draw(r,this.LastMouseStatus))}for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];if(!i.IsCallbackDraw&&!i.DrawAfterPicture){if("KLineTooltipPaint"==i.ClassName&&t){if(0==t.Tooltip)continue;t.Point&&(i.LatestPoint=t.Point)}else"MinuteTooltipPaint"==i.ClassName&&t&&t.Point&&(i.LatestPoint=t.Point);i.IsDynamic&&!0===i.DrawAfterTitle&&i.Draw()}}if(this.EnableAnimation)for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];!0===i.IsAnimation&&i.Draw()}for(a=0;a<this.ChartDrawPicture.length;++a){i=this.ChartDrawPicture[a];i.IsDrawFirst||(i.IsDrawMain&&i.IsDrawMain()||i.Draw(r,this.LastMouseStatus))}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];i.DrawAfterPicture&&i.Draw()}if(this.LastMouseStatus.MouseOnToolbar){var h=this.LastMouseStatus.MouseOnToolbar.Frame;h&&h.DrawToolbarTooltip&&h.DrawToolbarTooltip(this.LastMouseStatus.MouseOnToolbar)}this.OffscreenToShowCanvas(),++this.TouchDrawCount}},this.DrawAnimation=function(){if(this.EnableAnimation){if(this.Frame.ScreenImageData&&!this.IsOnTouch){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];!0===e.IsAnimation&&(e.IsMoveStep=!0)}this.DrawDynamicInfo()}var a=this;window.requestAnimationFrame((function(){a.DrawAnimation()}))}},this.StartAnimation=function(t){for(var e=!1,a=null,i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];if("BarragePaint"===r.ClassName){e=!0,a=r.BarrageList;break}}if(!e){var n=new We;n.Canvas=this.Canvas,n.ChartBorder=this.Frame.ChartBorder,n.ChartFrame=this.Frame,n.HQChart=this,n.SetOption(t),this.ExtendChartPaint.push(n),a=n.BarrageList}this.EnableAnimation=!0;var s=this;return window.requestAnimationFrame((function(){s.DrawAnimation()})),a},this.StopAnimation=function(){this.EnableAnimation=!1,this.DrawDynamicInfo()},this.GetChartTooltipData=function(t,e,a){var i=new mt;if(this.ChartInfoPaint&&this.ChartInfoPaint.GetTooltipData(t,e,i))return i;if(this.PtInChartPaintTooltip(t,e,i))return i;if(ze.IsNonEmptyArray(this.Frame.SubFrame))for(var r=0;r<this.Frame.SubFrame.length;++r)for(var n=this.Frame.SubFrame[r],s=0;s<n.OverlayIndex.length;++s)for(var o=n.OverlayIndex[s],h=0;h<o.ChartPaint.length;++h){var l=o.ChartPaint[h];if(l.GetTooltipData(t,e,i))return i}return this.PtInOverlayChartPaintTooltip(t,e,i)?i:null},this.PtInExtendChartButtons=function(t,e){for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.PtInDrawPictureButtons=function(t,e){for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickDrawPictureButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_DRAWPICTURE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==p.DRAW_PICTURE_DELETE?(l.Chart.Log(t,"ClickDrawPictureButton"),this.ClearChartDrawPicture(t.Chart)):t.ID},this.PtInTitleButtons=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.OnMouseMove=function(t,e,a,i){var r=this;this.StopDrawDynamicInfo(),this.LastPoint.X=t,this.LastPoint.Y=e;var n=null,s=null,o=this.Frame.PtInFrame(t,e);if(ze.IsNumber(o)&&o>=0&&(this.CursorIndex=this.Frame.GetXData(t)),this.EnableBorderDrag&&this.Frame&&!this.CurrentChartDrawPicture){var h=this.Frame.PtInFrameBorder(t,e);h&&h.Index>=0&&(n={Cursor:"n-resize",Name:"DragBorder"},l.Chart.Log("[JSChartContainer::OnMouseMove] drag border ",h))}if(this.EnableYDrag&&this.Frame&&!this.CurrentChartDrawPicture){var u=this.TryYDrag(t,e);u&&(n={Cursor:0==u.Position?"n-resize":"row-resize",Name:"DragY"},l.Chart.Log("[JSChartContainer::OnMouseMove] drag y ",u))}if(this.CurrentChartDrawPicture||(s=this.PtInButton(t,e),s&&(n={Cursor:"pointer",Name:s.Name},l.Chart.Log("[JSChartContainer::OnMouseMove] frame button ",s))),this.ChartCorssCursor){var c=this.ChartCorssCursor.PtInButton(t,e);c&&(n={Cursor:"pointer",Name:"CorssCursorButton"},l.Chart.Log("[JSChartContainer::OnMouseMove] cross cursor button ",c))}if("KLineChartContainer"==this.ClassName&&this.Frame.PtInFrameBottom(t,e)&&(n={Cursor:"ew-resize",Name:"FrameButtom"},l.Chart.Log("[JSChartContainer::OnMouseMove] frame bottom ")),this.SelectedChart.EnableMoveOn&&this.PtInChart&&!this.CurrentChartDrawPicture){var d=this.PtInChart(t,e);d&&d.Identify?(n={Cursor:"pointer",Name:"PtInChart"},this.SelectedChart.MoveOn.Identify=d.Identify,this.SelectedChart.MoveOn.Identify=null,l.Chart.Log("[JSChartContainer::OnMouseMove] Point in chart ",d)):this.SelectedChart.MoveOn.Identify=null}else this.SelectedChart.MoveOn.Identify=null;var f=this.GetRectSelectPaint();if(f&&f.GetPointCount()>0){var C=f.PtInPaint(t,e);C&&(n=4==C.Type?{Cursor:"pointer",Name:"DragRectSelect"}:{Cursor:"ew-resize",Name:"DragRectSelect"},l.Chart.Log("[JSChartContainer::OnMouseMove] drag rect select ",C))}var m=!1;if(this.CurrentChartDrawPicture){var D=this.Frame.PtInChartFrame(t,e);if(20!=this.CurrentChartDrawPicture.Status){var p=!1;ze.IsNumber(this.CurrentChartDrawPicture.LimitFrameID)?D>=0&&D==this.CurrentChartDrawPicture.LimitFrameID&&(p=!0):D>=0&&(p=!0),n={Cursor:p?"crosshair":"not-allowed",Name:"CurrentChartDrawPicture"}}this.CurrentChartDrawPicture.SetLastPoint&&this.CurrentChartDrawPicture.SetLastPoint({X:t,Y:e}),m=!0}else{var v={};v.X=t,v.Y=e,this.GetChartDrawPictureByPoint(v)&&v.ChartDrawPicture&&1==v.ChartDrawPicture.EnableMove?(100===v.PointIndex?v.Cursor?this.UIElement.style.cursor=v.Cursor:this.UIElement.style.cursor="move":v.Cursor?this.UIElement.style.cursor=v.Cursor:this.UIElement.style.cursor="pointer",m=!0,this.MoveOnChartDrawPicture=v.ChartDrawPicture):this.MouseDrag||(this.UIElement.style.cursor="default")}var g=this.PtInClient(t,e),S={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:g};if((a&&("mouseout"==a.type||"mouseleave"==a.type)||s)&&(S.Corss=!1),this.SetCorssCursorIndex&&this.SetCorssCursorIndex(S),this.DrawDynamicInfoOption.Enable?this.DrawDynamicInfoOption.Timer=setTimeout((function(){r.DrawDynamicInfo(S)}),this.DrawDynamicInfoOption.DelayTime):this.DrawDynamicInfo(S),n&&(this.UIElement.style.cursor=n.Cursor),this.IsShowTooltip&&0==m){var I=this.GetChartTooltipData(t,e);if(I&&I.Data){if(!0===i)var T=a.touches[0],x=T.clientX-this.UIElement.getBoundingClientRect().left,y=T.clientY-this.UIElement.getBoundingClientRect().top;else x=a.clientX-this.UIElement.getBoundingClientRect().left,y=a.clientY-this.UIElement.getBoundingClientRect().top;this.ShowTooltip(x,y,I)}else this.HideTooltip()}},this.OnKeyDown=function(t){var e=this;if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=t.keyCode?t.keyCode:t.which;switch(a){case 37:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(a,t))break;if(this.CursorIndex<=.99999){if(!this.DataMoveLeft()){this.DragDownloadData&&this.DragDownloadData();break}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown();break;case 39:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(a,t))break;var i=0;if(i=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1>=i){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else{var r=null;if(r=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,!r)break;if(this.CursorIndex+r.DataOffset+1>=r.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var n={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(n))break;this.CursorIndex=n.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 40:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;n={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(n,{ZoomDownloadDataCallback:function(t){e.ZoomDownloadData(t)}}))break;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 46:if(this.SelectChartDrawPicture){var s=this.SelectChartDrawPicture;l.Chart.Log("[JSChartContainer::OnKeyDown] delete draw picture."),this.SelectChartDrawPicture=null,this.ChartPictureMenu&&this.ChartPictureMenu.Hide(),this.ClearChartDrawPicture(s)}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var o=this.GetSelectedChartInfo(this.SelectedChart.Selected);o&&(o.Type==He.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(o.IndexID):o.Type==He.OVERLAY_KLINE&&this.DeleteOverlaySymbol(o.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 27:if(this.CurrentChartDrawPicture){s=this.CurrentChartDrawPicture;20!=s.Status&&(this.CurrentChartDrawPicture=null)}break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnDoubleClick=function(t,e,a){},this.ZoomIndexWindow=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ZoomIndexWindow(t,e)},this.ShowIndexTitleOnly=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ShowIndexTitleOnly(t,e)},this.RemoveMinSizeWindows=function(){if(this.Frame.ZoomWindowsInfo){for(var t=[],e=[],a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];i.Frame.ClearToolbar(),i.Frame.IsMinSize?t.push(a):e.push(a)}if(this.Frame.ZoomWindowsInfo=null,!(t.length<=0)){for(a=0;a<t.length;++a)this.DeleteIndexPaint(t[a]);var r=[],n=[],s=[this.TitlePaint[0]];for(a=0;a<e.length;++a){var o=e[a];r[a]=this.Frame.SubFrame[o],n[a]=this.WindowIndex[o],s[a+1]=this.TitlePaint[o+1]}this.Frame.SubFrame=r,this.WindowIndex=n,this.TitlePaint=s;for(a=0;a<this.Frame.SubFrame.length;++a){i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1,i.Identify=a}if(ze.IsNonEmptyArray(this.ChartDrawPicture)){var h=[];for(a=0;a<this.ChartDrawPicture.length;++a){i=this.ChartDrawPicture[a];for(var l=0;l<this.Frame.SubFrame.length;++l)if(i.Frame==this.Frame.SubFrame[l].Frame){h.push(i);break}}this.ChartDrawPicture=h}}}},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();if(a.DayBorder){for(var i=a.Right-a.Left,r=0;r<a.DayBorder.length;++r){var n=a.DayBorder[r];if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.TopEx,i,n.BottomEx-n.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.Top,i,n.TopEx-n.Top),this.Canvas.isPointInPath(t,e))return 200+parseInt(r);if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.BottomEx,i,n.Bottom-n.BottomEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(r)}return-1}this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(r=0;r<a.DayBorder.length;++r){n=a.DayBorder[r];if(this.Canvas.beginPath(),this.Canvas.rect(n.LeftEx,a.TopEx,n.RightEx-n.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,a.TopEx,n.LeftEx-n.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+parseInt(r);if(this.Canvas.beginPath(),this.Canvas.rect(n.RightEx,a.TopEx,n.Right-n.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(r)}return-1}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnMoveFromeBorder=function(t,e){this.Frame&&this.Frame.OnMoveFromeBorder(t,e)&&(this.Frame.SetFrameBorderSizeChange(),this.Frame.ReDrawToolbar(),this.Draw())},this.OnZoomUpDownFrameY=function(t,e){this.Frame&&this.Frame.OnZoomUpDownFrameY(t,e)&&(this.Frame.SetSizeChage(!0),this.Draw())},this.OnUpDonwFrameY=function(t,e){return!!this.Frame&&(!!this.Frame.OnUpDonwFrameY(t,e)&&(this.Frame.SetSizeChage(!0),!0))},this.CancelZoomUpDownFrameY=function(t){this.Frame&&this.Frame.CancelZoomUpDownFrameY(t)&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())},this.IsKLineContainer=function(){return"KLineChartContainer"==this.ClassName||"KLineChartHScreenContainer"==this.ClassName||"KLineTrainChartContainer"==this.ClassName||"CustomKLineChartContainer"==this.ClassName},this.UpdatePointByCursorIndex=function(t){var e={X:null,Y:null};e.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);this.IsKLineContainer()&&(a=this.CursorIndex);var i=this.Frame.Data;if(i.DataOffset+a<i.Data.length){var r=i.Data[i.DataOffset+a].Close;e.Y=this.Frame.GetYFromData(r)}if(1==t&&this.ChartCorssCursor)if(1==this.ChartCorssCursor.Status);else{this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);a=Math.abs(this.CursorIndex-.5);a=parseInt(a.toFixed(0)),this.IsKLineContainer()&&(a=this.CursorIndex),this.LastPoint.Y=null}else 2==t&&this.ChartCorssCursor?(this.LastPoint.Y=null,this.LastPoint.X=null):(this.LastPoint.X=e.X,this.LastPoint.Y=e.Y)},this.ShowTooltipByKeyDown=function(){var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"!=this.ClassName&&"KLineTrainChartContainer"!=this.ClassName||(t=this.CursorIndex);var e=this.Frame.Data,a=new mt;a.Data=e.Data[e.DataOffset+t],a.ChartPaint=this.ChartPaint[0];var i=I();0===i&&(i=1),this.ShowTooltip(this.LastPoint.X/i,this.LastPoint.Y/i,a)},this.ShowTooltip=function(t,e,a){var i=this;if(this.IsShowTooltip){var r=I(),n=15/r;if(0===a.Type){w();var s=t,o=e,h=va.Create("HistoryDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,h.GetEventCallback=function(t){return i.GetEventCallback(t)},!h.Operator())return;var l=25*h.LineCount;h.Height>0&&(l=h.Height);var u=h.Width;this.Tooltip.style.width=u+"px",this.Tooltip.style.height=l+"px",this.Tooltip.style.position="absolute",s+u>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=s-u+"px":this.Tooltip.style.left=s+"px",o+n+l>this.UIElement.getBoundingClientRect().height-5?this.Tooltip.style.top=o-l+"px":this.Tooltip.style.top=o+n+"px",this.Tooltip.className="jschart-tooltip",this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(1===a.Type){w(),s=t,o=e,h=va.Create("KLineInfoDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-klineinfo-tooltip",this.Tooltip.style.position="absolute",s+u>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=s-u+"px":this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(2==a.Type){s=t,o=e,h=va.Create("KLineTradeDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-klinetrade-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(3==a.Type){s=t,o=e,h=va.Create("MinuteInfoDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-minuteinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(4==a.Type){s=t,o=e,h=va.Create("IconDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-iconinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(5==a.Type){s=t,o=e,h=va.Create("ChartOXDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-chartox-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(6==a.Type){s=t,o=e,h=va.Create("ScatterPlotDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-charscatterplot-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(7==a.Type){s=t,o=e,h=va.Create("ChartDrawSVGDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;u=h.Width;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=o+n+"px",this.Tooltip.style.width=u+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.ShowSelectRect=function(t,e,a,i){var r=t,n=e,s=this.Frame.ChartBorder.GetBorder(),o=s.Right,h=s.Left;t>o&&(t=o),a>o&&(a=o),t<h&&(t=h),a<h&&(a=h),t>a&&(r=a),e>i&&(n=i);var l=Math.abs(t-a),u=Math.abs(e-i);this.SelectRect.style.width=l+"px",this.SelectRect.style.height=u+"px",this.SelectRect.style.position="absolute",this.SelectRect.style.left=r+"px",this.SelectRect.style.top=n+"px",this.SelectRect.style.display="block"},this.UpdateSelectRect=function(t,e){if(this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=this.ChartPaint[0].Data,r=i.Data[t],n=i.Data[e];l.Chart.Log("[JSChartContainer::UpdateSelectRect]",r,n),a.SetPoint(r,{Index:0,DataIndex:t}),a.SetPoint(n,{Index:1,DataIndex:e}),this.Draw()}}},this.HideSelectRect=function(){this.SelectRect.style.display="none"},this.ResetFrameXYSplit=function(){"function"==typeof this.Frame.ResetXYSplit&&this.Frame.ResetXYSplit()},this.UpdateFrameMaxMin=function(){for(var t=new Array,e=new Array,a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];0!=i.IsShow&&e.push(this.ChartPaint[a])}for(a=0;a<this.OverlayChartPaint.length;++a)e.push(this.OverlayChartPaint[a]);var r=[];for(a=0;a<e.length;++a){var n=e[a];if(n.NotSupportMessage)r.push(n);else{var s=n.GetMaxMin();if(null!=s&&null!=s.Max&&null!=s.Min){for(var o=null,h=0;h<t.length;++h)if(t[h].Frame==n.ChartFrame){o=t[h];break}o?(o.Range.Max<s.Max&&(o.Range.Max=s.Max),o.Range.Min>s.Min&&(o.Range.Min=s.Min)):(o={OverlayFrame:[]},o.Frame=n.ChartFrame,o.Range=s,t.push(o))}}}for(a=0;a<r.length;++a){for(n=r[a],s={Max:10,Min:1},o=null,h=0;h<t.length;++h)if(t[h].Frame==n.ChartFrame){o=t[h];break}o||(o={OverlayFrame:[]},o.Frame=n.ChartFrame,o.Range=s,t.push(o))}var l=new Map;for(a=0;a<t.length;++a){i=t[a];l.set(i.Frame.Identify,i)}for(a=0;a<this.Frame.SubFrame.length;++a){var u=this.Frame.SubFrame[a];for(h=0;h<u.OverlayIndex.length;++h){var c=u.OverlayIndex[h],d=c.Frame;if(1==d.IsShareY&&(d.MainFrame&&l.has(d.MainFrame.Identify))){o=l.get(d.MainFrame.Identify);if(o&&(o.OverlayFrame.push(d),!1!==d.IsCalculateYMaxMin))for(var f=0;f<c.ChartPaint.length;++f){n=c.ChartPaint[f],s=n.GetMaxMin();null!=s&&null!=s.Max&&null!=s.Min&&(o.Range.Max<s.Max&&(o.Range.Max=s.Max),o.Range.Min>s.Min&&(o.Range.Min=s.Min))}}}}for(a=0;a<t.length;++a){i=t[a];if(i.Frame&&i.Range&&(null!=i.Range.Max&&null!=i.Range.Min))for(var h in i.Frame.YSpecificMaxMin?(i.Frame.HorizontalMax=i.Frame.YSpecificMaxMin.Max,i.Frame.HorizontalMin=i.Frame.YSpecificMaxMin.Min):(i.Frame.HorizontalMax=i.Range.Max,i.Frame.HorizontalMin=i.Range.Min),i.Frame.XYSplit=!0,i.OverlayFrame)i.OverlayFrame[h].XYSplit=!0}for(a=0;a<this.Frame.SubFrame.length;++a)for(u=this.Frame.SubFrame[a],h=0;h<u.OverlayIndex.length;++h){c=u.OverlayIndex[h];!0!==c.Frame.IsShareY&&c.UpdateFrameMaxMin()}},this.DataMoveLeft=function(){var t=null;return t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,!!t&&(!(t.DataOffset<=0)&&(--t.DataOffset,!0))},this.DataMoveRight=function(){var t=null;if(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,!t)return!1;var e=0;return e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!!e&&(!(e+t.DataOffset>=t.Data.length)&&(++t.DataOffset,!0))},this.UpdataDataoffset=function(){var t=null;if(t=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,t){for(var e in this.ChartPaint){var a=this.ChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.OverlayChartPaint){a=this.OverlayChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.Frame.SubFrame){var i=this.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];for(var s in n.ChartPaint){a=n.ChartPaint[s];a.Data&&(a.Data.DataOffset=t.DataOffset)}}}}},this.GetMoveOneStepWidth=function(){if(ze.IsPlusNumber(this.StepPixel))return this.StepPixel;var t=I(),e=this.Frame.SubFrame[0].Frame,a=e.DataWidth,i=e.DistanceWidth,r=this.StepPixel;r=(a+i)/t;return r<1&&(r=1),r},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if(t=parseInt(t/a),t<=0)return!1;var r=null;if(r=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,!r)return!1;var n=0;if(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!n)return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var s=this.Frame.SubFrame[0].Frame;(s.DataWidth<=1||s.DistanceWidth<=1)&&ze.IsPlusNumber(this.StepPixel)&&(t=parseInt(i)*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{if(n+r.DataOffset>=r.Data.length)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length&&(r.DataOffset=r.Data.length-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.XCoordinateZoom=function(t,e){var a=this.GetMoveOneStepWidth();return t=parseInt(t/a),!(t<=0)&&this.Frame.XCoordinateZoom(e)},this.GetSubFrameIndex=function(t,e){if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return-1;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame,r=i.ChartBorder.GetLeft(),n=i.ChartBorder.GetTop(),s=i.ChartBorder.GetHeight(),o=i.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(r,n,o,s),this.Canvas.isPointInPath(t,e))return parseInt(a)}return 0},this.GetDataIndexByPoint=function(t){var e=this.Frame;this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame);var a=null;if(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,a&&e){var i=parseInt(e.GetXData(t));return a.DataOffset+i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;this.PtInClient(t.XStart,t.YStart),this.PtInClient(t.XEnd,t.YEnd);var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,!e)return!1;var a=this.GetDataIndexByPoint(t.XStart),i=this.GetDataIndexByPoint(t.XEnd);return!(Math.abs(a-i)<2)&&(t.Data=e,a>i?(t.Start=i,t.End=a):(t.Start=a,t.End=i),!0)},this.GetChartDrawPictureByPoint=function(t){for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e],i=a.IsPointIn(t.X,t.Y,this.ChartDrawOption);if(!1!==i&&i>=0)return t.ChartDrawPicture=a,t.PointIndex=i,a.GetCursorType&&(t.Cursor=a.GetCursorType(i)),!0}return!1},this.SaveToImage=function(t,e){if(this.UIElement.width<=0||this.UIElement.height<=0)return null;if(this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return null;l.Chart.Log("[JSChartContainer::SaveToImage]",this.UIElement);var a="rgb(255,255,255)";e&&(a=e),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height);var i=I();for(var r in this.Canvas.lineWidth=i,this.Frame.Draw(),this.ChartPaint){var n=this.ChartPaint[r];n.IsDrawFirst&&n.Draw()}for(var r in this.ChartPaint){n=this.ChartPaint[r];n.IsDrawFirst||n.Draw()}for(var r in this.ChartPaintEx){n=this.ChartPaintEx[r];n.Draw()}for(var r in this.OverlayChartPaint){n=this.OverlayChartPaint[r];n.Draw()}for(var r in this.ExtendChartPaint){n=this.ExtendChartPaint[r];n.IsDynamic||0!=n.IsAnimation||n.Draw()}for(var r in this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawLock(),this.ExtendChartPaint){n=this.ExtendChartPaint[r];n.IsDynamic&&!1===n.DrawAfterTitle&&n.Draw()}for(var r in null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex),this.TitlePaint){n=this.TitlePaint[r];n.IsDynamic&&(n.CursorIndex=this.CursorIndex,n.Draw())}for(var r in this.ExtendChartPaint){n=this.ExtendChartPaint[r];n.IsDynamic&&!0===n.DrawAfterTitle&&0==n.IsAnimation&&n.Draw()}if(this.EnableAnimation)for(var r in this.ExtendChartPaint){n=this.ExtendChartPaint[r];!0===n.IsAnimation&&n.Draw()}for(var r in this.ChartDrawPicture){n=this.ChartDrawPicture[r];n.Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();var s=this.UIElement.toDataURL(t||"image/png",1);return l.Chart.Log("[JSChartContainer::SaveToImage] data= ",s),s},this.SaveToImageUrl=function(t,e){t||(t={Format:"image/png",ColorGB:"rgb(255,255,255)"});var a=this.SaveToImage(t.Format,t.ColorGB),i={Base64:a,BucketName:"downloadcache",Path:"hqchart/hq_snapshot"},r=xi.Domain+"/API/FileUploadForBase64";$n.HttpRequest({url:r,method:"POST",dataType:"json",data:i,success:function(t){l.Chart.Log("[JSChartContainer::SaveToImageUrl] recv data",t);var a={Path:t.relativeurl,Domain:"https://opensourcedownload.zealink.com"};a.Url="".concat(a.Domain,"/").concat(a.Path),e&&e(!0,a,"")},error:function(t){l.Chart.Log("[JSChartContainer::SaveToImageUrl] error ",t),e&&e(!1,null,"upload failed")}})},this.ExportDataToCSV=function(t){for(var e="",a="",i=0,r=0;r<t.length;++r){var n=t[r];a+='"'.concat(n.Name,'"'),r==t.length-1?a+="\r\n":a+=",",ze.IsNonEmptyArray(n.Data)&&(i=Math.max(i,n.Data.length))}e+=a;r=0;for(var s=0;r<i;++r){for(a="",s=0;s<t.length;++s){n=t[s];var o=null;n.Data&&r<n.Data.length&&(o=n.Data[r]),a+='"'.concat(o,'"'),s==t.length-1?a+="\r\n":a+=","}e+=a}return e="\ufeff"+e,e},this.SetLanguage=function(t){var e=Ai.GetLanguageID(t);if(ze.IsNumber(e)){if(this.LanguageID!=e){this.LanguageID=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID);for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];i&&(i.LanguageID=this.LanguageID)}for(a=0;a<this.ExtendChartPaint.length;++a){i=this.ExtendChartPaint[a];i&&(i.LanguageID=this.LanguageID)}this.Frame&&this.Frame.SetLanguage&&this.Frame.SetLanguage(this.LanguageID),this.Frame.SetSizeChage(!0),this.Draw()}}else console.warn("[JSChartContainer::SetLanguage] language=".concat(t," error"))},this.ReloadTiltePaintResource=function(t){for(var e in this.TitlePaint){var a=this.TitlePaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadExtendChartPaintResource=function(t){for(var e in this.ExtendChartPaint){var a=this.ExtendChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartDrawPictureResource=function(t){if(ze.IsNonEmptyArray(this.ChartDrawPicture))for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadResource=function(t){this.ReloadBorder(t),this.ReloadTiltePaintResource(t.Resource),this.ReloadChartPaint(t.Resource),this.ReloadFrame(t.Resource),this.ReloadExtendChartPaintResource(t.Resource),this.ReloadChartCorssCursor(t,t.Resource),this.ReloadChartDrawPictureResource(t.Resource),t.Update&&this.Update?this.Update({UpdateCursorIndexType:2}):1==t.Draw&&this.Draw()},this.ReloadBorder=function(t){if(t){var e=I();if(t.Border){var a=t.Border;ze.IsNumber(a.Left)&&(this.Frame.ChartBorder.Left=a.Left*e),ze.IsNumber(a.Right)&&(this.Frame.ChartBorder.Right=a.Right*e),ze.IsNumber(a.Top)&&(this.Frame.ChartBorder.Top=a.Top*e),ze.IsNumber(a.Bottom)&&(this.Frame.ChartBorder.Bottom=a.Bottom*e)}for(var i in t.Windows){a=t.Windows[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;ze.IsNumber(a.TitleHeight)&&(n.TitleHeight=a.TitleHeight*e)}}for(var i in t.Frame){a=t.Frame[i];if(!(i>=this.Frame.SubFrame.length)){r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;a.TopSpace>=0&&(n.TopSpace=a.TopSpace*e),a.BottomSpace>=0&&(n.BottomSpace=a.BottomSpace*e)}}}},this.ReloadFrame=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e],i=a.Frame;i&&i.ReloadResource&&i.ReloadResource(t);for(var r=0;r<a.OverlayIndex.length;++r){var n=a.OverlayIndex[r];n.Frame&&n.Frame.ReloadResource&&n.Frame.ReloadResource(t)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartCorssCursor=function(t,e){var a=I();if(t&&t.CorssCursor){var i=t.CorssCursor;ze.IsNumber(i.TitleHeight)&&(this.ChartCorssCursor.TextHeight=i.TitleHeight*a)}this.ChartCorssCursor.ReloadResource&&this.ChartCorssCursor.ReloadResource(e)},this.SetDepthMapData=function(t,e){for(var a=0;a<t.length;++a)for(var i=t[a],r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];if(n.ID==i.ID){n.Data=i.Data;break}}e&&1==e.Draw&&this.Draw()},this.PointAbsoluteToRelative=function(t,e,a){var i={X:t,Y:e},r=I(),n=this.UIElement.getBoundingClientRect();return a?(i.X=t-n.left*r,i.Y=e-n.top*r):(i.X=(t-n.left)*r,i.Y=(e-n.top)*r),i},this.SetChartDrawPictureFirstPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return!1;for(var r=this.PointAbsoluteToRelative(t,e,a),n=r.X,s=r.Y,o=0;o<this.Frame.SubFrame.length;++o){var h=this.Frame.SubFrame[o].Frame,l=h.ChartBorder.GetLeft(),u=h.ChartBorder.GetTopEx(),c=h.ChartBorder.GetBottomEx(),d=c-u,f=h.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(l,u,f,d),this.Canvas.isPointInPath(n,s)){if(ze.IsNumber(i.LimitFrameID)&&o!=i.LimitFrameID)return!1;i.Frame=h;break}}return!!i.Frame&&(i.Point[0]=new N,i.Point[0].X=n,i.Point[0].Y=s,i.Status=1,i.PointMagnetKLine(),!0)},this.SetChartDrawPictureSecondPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[1]=new N,i.Point[1].X=r.X,i.Point[1].Y=r.Y,i.Status=2,!0},this.SetChartDrawPictureThirdPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[2]=new N,i.Point[2].X=r.X,i.Point[2].Y=r.Y,i.Status=3,!0},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=I();a&&(n=1);var s=t*n,o=e*n;return r.Move(s,o,i),!0},this.FinishChartDrawPicturePoint=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if("ChartDrawRuler"==t.ClassName)return this.CurrentChartDrawPicture=null,!0;t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawPicture.push(t),this.CurrentChartDrawPicture=null;var e=this.GetEventCallback(C.ON_FINISH_DRAWPICTURE);if(e&&e.Callback){var a={DrawPicture:t};e.Callback(e,a,this)}else t.FinishedCallback&&t.FinishedCallback(t);return t.OnFinish&&t.OnFinish(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),!0},this.OnSelectChartPicture=function(t){if(l.Chart.Log("[JSChartContainer::OnSelectChartPicture]",t),this.ChartPictureMenu||(this.ChartPictureMenu=Cr.Create("ChartPictureSettingMenu",this.UIElement.parentNode)),this.ChartPictureMenu){var e={data:{ChartPicture:t,HQChart:this}};this.ChartPictureMenu.DoModal(e)}},this.FinishMoveChartDrawPicture=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if(t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo){var e=this.SelectChartDrawPicture.DragInfo;if(e.Click&&e.Move&&(e.Click.X!=e.Move.X||e.Click.Y!=e.Move.Y)){var a=this.GetEventCallback(C.ON_FINISH_MOVE_DRAWPICTURE);if(a&&a.Callback){var i={DrawPicture:t};a.Callback(a,i,this)}t.OnMoveFinish&&t.OnMoveFinish()}}return!0},this.ClearChartDrawPicture=function(t,e){var a=!0;if(t)for(var i in this.ChartDrawPicture)this.ChartDrawPicture[i]==t&&(this.ChartDrawStorage&&this.ChartDrawStorage.DeleteDrawData(t),this.ChartDrawPicture.splice(i,1),e&&0==e.Draw&&(a=!1),a&&this.Draw());else this.ChartDrawPicture=[],this.ChartDrawStorage&&this.ChartDrawStorage.Clear(),e&&0==e.Draw&&(a=!1),a&&this.Draw()},this.GetActiveDrawPicture=function(){var t={Move:{Guid:null},Select:{Guid:null},MoveOn:{Guid:null}};return this.CurrentChartDrawPicture&&(t.Move={Guid:this.CurrentChartDrawPicture.Guid}),this.SelectChartDrawPicture&&(t.Select={Guid:this.SelectChartDrawPicture.Guid,Chart:this.SelectChartDrawPicture}),this.MoveOnChartDrawPicture&&(t.MoveOn={Guid:this.MoveOnChartDrawPicture.Guid}),t},this.SetChartDrawOption=function(t){if(ze.IsBool(t.IsLockScreen)&&(this.ChartDrawOption.IsLockScreen=t.IsLockScreen),ze.IsNumber(t.Zoom)&&t.Zoom>=0&&(this.ChartDrawOption.Zoom=t.Zoom),t.Magnet){var e=t.Magnet;this.ChartDrawOption.Magnet||(this.ChartDrawOption.Magnet={Type:0,Distance:20*I(),Enable:!1}),ze.IsBool(e.Enable)&&(this.ChartDrawOption.Magnet.Enable=e.Enable),ze.IsNumber(e.Type)&&(this.ChartDrawOption.Magnet.Type=e.Type),ze.IsNumber(e.Distance)&&(this.ChartDrawOption.Magnet.Distance=opitemion.Distance)}},this.EnableShowCorssCursorLine=function(t){this.ChartCorssCursor&&(this.ChartCorssCursor.IsShowCorss=t)},this.GetExtendChartByClassName=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];if(a.ClassName==t)return{Index:e,Chart:a}}return null},this.GetExtendChartByClassNameV2=function(t){for(var e=[],a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];i.ClassName==t&&e.push({Index:a,Chart:i})}return e.length<=0?null:e},this.GetExtendChartRightWidth=function(){for(var t=0,e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a&&("StockChip"!=a.ClassName&&"DrawToolsButton"!=a.ClassName||ze.IsNumber(a.Width)&&(t+=a.Width))}return t},this.DeleteExtendChart=function(t){t.Index>=this.ExtendChartPaint.length||this.ExtendChartPaint[t.Index]==t.Chart&&("function"==typeof t.Chart.Clear&&t.Chart.Clear(),this.ExtendChartPaint.splice(t.Index,1))},this.EnableSplashScreen=function(t){this.ChartSplashPaint&&t&&(ze.IsString(t.Title)&&this.ChartSplashPaint.SetTitle(t.Title),this.ChartSplashPaint.EnableSplash(!0),!1!==t.Draw&&this.Draw())},this.SetSubFrameAttribute=function(t,e,a){if(t&&t.Frame){var i=t.Frame;e&&(ze.IsBool(e.Modify)&&(i.ModifyIndex=e.Modify),ze.IsBool(e.Change)&&(i.ChangeIndex=e.Change),ze.IsBool(e.Close)&&(i.CloseIndex=e.Close),ze.IsBool(e.Overlay)&&(i.OverlayIndex=e.Overlay),ze.IsBool(e.IsDrawTitleBG)&&(i.IsDrawTitleBG=e.IsDrawTitleBG),ze.IsNumber(e.TitleHeight)?i.ChartBorder.TitleHeight=e.TitleHeight:e.TitleHeight=i.ChartBorder.TitleHeight,ze.IsBool(e.IsShowTitleArraw)&&(i.IsShowTitleArraw=e.IsShowTitleArraw),ze.IsBool(e.IsShowIndexName)&&(i.IsShowIndexName=e.IsShowIndexName),ze.IsNumber(e.IndexParamSpace)&&(i.IndexParamSpace=e.IndexParamSpace),ze.IsNumber(e.IndexTitleSpace)&&(i.IndexTitleSpace=e.IndexTitleSpace)),a&&(a.SplitCount&&(i.YSplitOperator.SplitCount=a.SplitCount),ze.IsBool(a.IsShowXLine)&&(i.IsShowXLine=a.IsShowXLine),ze.IsBool(a.IsShowYLine)&&(i.IsShowYLine=a.IsShowYLine),ze.IsBool(a.IsShowLeftText)&&(i.IsShowYText[0]=a.IsShowLeftText,i.YSplitOperator.IsShowLeftText=a.IsShowLeftText),ze.IsBool(a.IsShowRightText)&&(i.IsShowYText[1]=a.IsShowRightText,i.YSplitOperator.IsShowRightText=a.IsShowRightText),ze.IsNumber(a.Height)&&a.Height>=0&&(t.Height=a.Height))}},this.SetSubFrameOption=function(t,e){if(e){if(e.Window){var a=e.Window;null!=a.Modify&&(t.Frame.ModifyIndex=a.Modify),null!=a.Change&&(t.Frame.ChangeIndex=a.Change),null!=a.Close&&(t.Frame.CloseIndex=a.Close),null!=a.Overlay&&(t.Frame.OverlayIndex=a.Overlay),1==a.IsDrawTitleBG&&(t.Frame.IsDrawTitleBG=a.IsDrawTitleBG),ze.IsBool(a.IsShowNameArrow)&&(t.Frame.IsShowNameArrow=a.IsShowNameArrow),a.OverlayIndexType&&(ze.IsNumber(a.OverlayIndexType.Position)&&(t.Frame.OverlayIndexType.Position=a.OverlayIndexType.Position),ze.IsNumber(a.OverlayIndexType.LineSpace)&&(t.Frame.OverlayIndexType.LineSpace=a.OverlayIndexType.LineSpace))}ze.IsNumber(e.SplitCount)&&(t.Frame.YSplitOperator.SplitCount=e.SplitCount),ze.IsNumber(e.TitleHeight)&&(t.Frame.ChartBorder.TitleHeight=e.TitleHeight),ze.IsBool(e.IsShowTitleArraw)&&(t.Frame.IsShowTitleArraw=e.IsShowTitleArraw),ze.IsBool(e.IsShowIndexName)&&(t.Frame.IsShowIndexName=e.IsShowIndexName),ze.IsBool(e.IsShowOverlayIndexName)&&(t.Frame.IsShowOverlayIndexName=e.IsShowOverlayIndexName),ze.IsNumber(e.IndexParamSpace)&&(t.Frame.IndexParamSpace=e.IndexParamSpace),ze.IsBool(e.IsShowXLine)&&(t.Frame.IsShowXLine=e.IsShowXLine),ze.IsBool(e.IsShowYLine)&&(t.Frame.IsShowYLine=e.IsShowYLine),ze.IsBool(e.IsShowIndexTitle)&&(t.Frame.IsShowIndexTitle=e.IsShowIndexTitle),ze.IsBool(e.IsShowLeftText)&&(t.Frame.IsShowYText[0]=e.IsShowLeftText,t.Frame.YSplitOperator.IsShowLeftText=e.IsShowLeftText),ze.IsBool(e.IsShowRightText)&&(t.Frame.IsShowYText[1]=e.IsShowRightText,t.Frame.YSplitOperator.IsShowRightText=e.IsShowRightText)}},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame.length,i=this.CreateSubFrameItem(a),r=I();i.Frame.ChartBorder.TitleHeight*=r,this.Frame.SubFrame[a]=i;var n=new Aa;n.Frame=this.Frame.SubFrame[a].Frame,n.Canvas=this.Canvas,n.LanguageID=this.LanguageID,n.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[a+1]=n,this.SetSubFrameOption(i,t);for(var s=0;s<this.Frame.SubFrame.length;++s){var o=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),a},this.AddIndexWindow=function(t,e){var a=new d,i=a.Get(t);if(i){this.RemoveMinSizeWindows();var r=this.AddNewSubFrame(e),n={Name:i.Name,Script:i.Script,Args:i.Args,ID:t,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition,StringFormat:i.StringFormat,OutName:i.OutName};if(e&&(e.FloatPrecision>=0&&(n.FloatPrecision=e.FloatPrecision),e.StringFormat>0&&(n.StringFormat=e.StringFormat),e.Args&&(n.Args=e.Args),e.Lock&&(n.Lock=e.Lock)),this.WindowIndex[r]=new fn(n.Name,n.Script,n.Args,n),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var s=this.SourceData;else s=this.ChartPaint[0].Data;this.BindIndexData(r,s)}},this.AddAPIIndexWindow=function(t,e){if(t.API){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i=t.API;if(this.WindowIndex[a]=new mn(i.Name,i.Script,i.Args,t),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.AddScriptIndexWindow=function(t,e){if(t&&t.Script&&t.Name){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i={Name:t.Name,Script:t.Script,Args:t.Args,ID:t.Name,KLineType:t.KLineType,YSpecificMaxMin:t.YSpecificMaxMin,YSplitScale:t.YSplitScale,FloatPrecision:t.FloatPrecision,Condition:t.Condition,StringFormat:t.StringFormat,OutName:t.OutName};if(t.ID&&(i.ID=t.ID),this.WindowIndex[a]=new fn(i.Name,i.Script,i.Args,i),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.GetRectSelectPaint=function(){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];if("RectSelectPaint"==e.ClassName)return e}return null},this.SetRectSelectData=function(t,e){var a=this.GetRectSelectPaint();if(!a)return!1;if(2==a.GetPointCount()){if(!a.SpaceReselected)return!1;var i=a.PreventClose;a.PreventClose=!1,a.ClearPoint(),a.PreventClose=i}return a.SetPoint(t,{DataIndex:e})},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var i=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=I(),s=(e.X-t.getBoundingClientRect().left)*n,o=r.GetXData(s);o=parseInt(o.toFixed(0));var h=o+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var u=i.Data[h];if(l.Chart.Log("[KLineChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,u),!a.SetPoint(u,{Index:e.PointIndex,DataIndex:h}))return!1;var c=this.GetEventCallback(C.ON_DRAG_SELECT_RECT);if(c){var d=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:d,RectSelectPaint:a};c.Callback(c,f,this)}return!0},this.MoveSubRectSelect=function(t){var e=this.GetRectSelectPaint();if(!e)return!1;if(!e.MoveSubRect(t.Step,t.IsLeft))return!1;var a=this.GetEventCallback(C.ON_DRAG_SUB_SELECT_RECT);if(a){var i={Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},r={X:t.X,Y:t.Y,SubRectSelectData:i,RectSelectPaint:e};a.Callback(a,r,this)}return!0},this.ClearRectSelect=function(t){var e=this.GetRectSelectPaint();return!!e&&(t&&(e.PreventClose=!1),e.ClearPoint())},this.DeleteOverlayIndex=function(t,e){var a=null;if(ze.IsNumber(e)){if(e>=0&&e<this.Frame.SubFrame.length)for(var i=this.Frame.SubFrame[e],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];if(n.Identify===t){for(var s=0;s<n.ChartPaint.length;++s){var o=n.ChartPaint[s];o&&o.OnDestroy&&o.OnDestroy()}i.OverlayIndex.splice(r,1),a=e;break}}}else for(var h=0;h<this.Frame.SubFrame.length;++h)for(i=this.Frame.SubFrame[h],r=0;r<i.OverlayIndex.length;++r){n=i.OverlayIndex[r];if(n.Identify===t){for(s=0;s<n.ChartPaint.length;++s){o=n.ChartPaint[s];o&&o.OnDestroy&&o.OnDestroy()}i.OverlayIndex.splice(r,1),a=h;break}}if(null==a)return console.warn("[JSChartContainer::DeleteOverlayIndex] can't find overlay index. [identify=".concat(t,"]")),!1;var l=a+1,u=this.TitlePaint[l];return u.OverlayIndex.has(t)&&u.OverlayIndex.delete(t),u.OverlayDynamicTitle.has(t)&&u.OverlayDynamicTitle.delete(t),!0},this.FindScriptIndex=function(t,e){if(ze.IsNumber(e)&&e>=0){if(e>=this.Frame.SubFrame.length)return null;var a=this.WindowIndex[e];if(a&&a.Guid==t)return{Type:0,Data:a,WindowIndex:e};a=this.Frame.SubFrame[e];for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{Type:1,Data:r,WindowIndex:e,OverlayIndex:i}}}else for(i=0;i<this.Frame.SubFrame.length;++i){a=this.WindowIndex[i];if(a&&a.Guid==t)return{Type:0,Data:a,WindowIndex:i};a=this.Frame.SubFrame[i];for(var n=0;n<a.OverlayIndex.length;++n){r=a.OverlayIndex[n];if(r.Identify===t)return{Type:1,Data:r,WindowIndex:i,OverlayIndex:n}}}return null},this.MoveIndex=function(t,e,a){var i=this;if(!t||!e||!a)return!1;if(!ze.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;if(!ze.IsNumber(e.WindowIndex)||e.WindowIndex<0||e.WindowIndex>=this.Frame.SubFrame.length)return!1;var r=this.FindScriptIndex(t.IndexID,t.WindowIndex);if(!r)return!1;var n=null,s=null;if(0==r.Type?n=r.Data:1==r.Type&&(s=r.Data),!s&&!n)return!1;var o=0,h="MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName;if(h&&(o=2),e.WindowIndex>=o&&null==this.WindowIndex[e.WindowIndex]){n?this.WindowIndex[e.WindowIndex]=this.CreateMainScript(n):s&&(this.WindowIndex[e.WindowIndex]=this.CreateMainScript(s.Script)),0==a.Operator&&(s?this.DeleteOverlayIndex(s.Identify,t.WindowIndex):n&&this.DeleteMainIndex(n.Guid,t.WindowIndex));var l=this.GetMainData();this.BindIndexData(e.WindowIndex,l),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}else{var u=this.Frame.SubFrame[e.WindowIndex];u.Interval=this.OverlayIndexFrameWidth;var c,d=new Q,f=this.CreateOverlayFrame();f.Canvas=this.Canvas,f.MainFrame=u.Frame,f.ChartBorder=u.Frame.ChartBorder,s&&(f.IsShow=s.Frame.IsShow),f.YSplitOperator=new Je,f.YSplitOperator.LanguageID=this.LanguageID,f.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),f.YSplitOperator.Frame=f,f.YSplitOperator.ChartBorder=f.ChartBorder,f.YSplitOperator.SplitCount=u.Frame.YSplitOperator.SplitCount,f.YSplitOperator.GetEventCallback=function(t){return i.GetEventCallback(t)},d.Frame=f,n?(c=this.CreateOverlayScript(n),c.OverlayIndex={IsOverlay:!0,Identify:d.Identify,WindowIndex:e.WindowIndex,Frame:d}):s&&(c=this.CreateOverlayScript(s.Script),c.OverlayIndex={IsOverlay:!0,Identify:d.Identify,WindowIndex:e.WindowIndex,Frame:d}),d.Script=c,u.OverlayIndex.push(d);var C=e.WindowIndex;if(0==a.Operator)if(s)this.DeleteOverlayIndex(s.Identify,t.WindowIndex);else if(n){this.DeleteMainIndex(n.Guid,t.WindowIndex);r=this.FindScriptIndex(d.Identify);r&&(C=r.WindowIndex)}l=this.GetMainData();this.BindOverlayIndexData(d,C,l),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.MoveIndexToNewWindow=function(t,e){var a=this;if(!t||!e)return!1;if(!ze.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;var i=this.FindScriptIndex(t.IndexID,t.WindowIndex);if(!i)return!1;var r=null,n=null;if(0==i.Type?r=i.Data:1==i.Type&&(n=i.Data),!n&&!r)return!1;if(t.WindowIndex==this.Frame.SubFrame.length-1&&this.Frame.SubFrame[t.WindowIndex].OverlayIndex<=0)return!1;this.RemoveMinSizeWindows();var s=this.Frame.SubFrame.length,o=this.CreateSubFrameItem(s),h=I();o.Frame.ChartBorder.TitleHeight*=h,this.Frame.SubFrame[s]=o;var l=new Aa;l.Frame=this.Frame.SubFrame[s].Frame,l.Canvas=this.Canvas,l.LanguageID=this.LanguageID,l.SelectedChart=this.SelectedChart,l.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint[s+1]=l,this.SetSubFrameOption(o,e);for(var u=0;u<this.Frame.SubFrame.length;++u){var c=this.Frame.SubFrame[u].Frame;u==this.Frame.SubFrame.length-1?c.XSplitOperator.ShowText=!0:c.XSplitOperator.ShowText=!1}0==e.Operator&&(n?this.DeleteOverlayIndex(n.Identify,t.WindowIndex):r&&this.DeleteMainIndex(r.Guid,t.WindowIndex)),this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();s=this.Frame.SubFrame.length-1;r?this.WindowIndex[s]=this.CreateMainScript(r):n&&(this.WindowIndex[s]=this.CreateMainScript(n.Script));var d=this.GetMainData();this.BindIndexData(s,d)},this.CreateOverlayScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":e=new Cn;break;case"APIScriptIndex":e=new mn(null,null,null,null,!0);break;case"OverlayScriptIndex":e=new Cn;break}return t.CopyTo(e),e},this.CreateMainScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":case"OverlayScriptIndex":e=new fn;break;case"APIScriptIndex":e=new mn;break}return t.CopyTo(e),e},this.DeleteMainIndex=function(t,e){var a=this.WindowIndex[e];if(!a)return!1;var i=this.Frame.SubFrame[e];if(!i)return!1;if(ze.IsNonEmptyArray(i.OverlayIndex)){var r=i.OverlayIndex[0];this.DeleteOverlayIndex(r.Identify,e),this.WindowIndex[e]=this.CreateMainScript(r.Script);var n=this.GetMainData();this.BindIndexData(e,n)}else this.RemoveIndexWindow(e,{DeleteMainIndex:!0})},this.GetMainData=function(){switch(this.ClassName){case"MinuteChartContainer":case"MinuteChartHScreenContainer":return this.SourceData;case"KLineChartContainer":case"KLineChartHScreenContainer":return this.ChartPaint[0].Data}},this.CreateOverlayFrame=function(){switch(this.ClassName){case"KLineChartContainer":return new U;case"KLineChartHScreenContainer":return new K;case"MinuteChartContainer":return new Y;case"MinuteChartHScreenContainer":return new X}},this.ExportData=function(t){if(!this.ExportMainData)return null;if(!this.ChartPaint[0])return null;var e=this.GetMainData();if(!e||!ze.IsNonEmptyArray(e.Data))return null;var a=null,i=e.Data;t.Start&&t.End&&(a=e.GetDataRange(t.Start,t.End));var r=this.ExportMainData(e,a);if(!r)return null;for(var n=1;n<this.ChartPaint.length;++n){var s=this.ChartPaint[n];if(s&&s.ExportData){var o=s.ExportData(i,a);if(o&&ze.IsNonEmptyArray(o))for(var h=0;h<o.length;++h){var l=o[h];s.IndexName?r.push({Name:"".concat(l.Name,"(").concat(s.IndexName,")"),Data:l.Data}):r.push(l)}}}for(n=0;n<this.OverlayChartPaint.length;++n){s=this.OverlayChartPaint[n];if(s.Data&&ze.IsNonEmptyArray(d.Data.Data)){o=this.ExportMainData(s.Data,{IsOverlay:!0});if(o&&ze.IsNonEmptyArray(o))for(h=0;h<o.length;++h){l=o[h];r.push({Name:"".concat(l.Name,"(").concat(s.Symbol,")"),Data:l.Data})}}}n=0,h=0;for(var u=0;n<this.Frame.SubFrame.length;++n){s=this.Frame.SubFrame[n];for(h=0;h<s.OverlayIndex.length;++h){var c=s.OverlayIndex[h];if(ze.IsNonEmptyArray(c.ChartPaint))for(u=0;u<c.ChartPaint.length;++u){var d=c.ChartPaint[u];if(d&&d.ExportData){o=d.ExportData(i,a);if(o&&ze.IsNonEmptyArray(o))for(var f=0;f<o.length;++f){l=o[f];d.IndexName?r.push({Name:"".concat(l.Name,"(").concat(d.IndexName,")"),Data:l.Data}):r.push(l)}}}}}return t&&"CSV"==t.Type?this.ExportDataToCSV(r):r}}function I(){return"undefined"==typeof window?1:window.devicePixelRatio||1}function T(t,e,a){if(!t)return null;e&&(t.font=e);var i="擎";ze.IsString(a)&&(i=a);var r=t.measureText(i),n=r.fontBoundingBoxAscent+r.fontBoundingBoxDescent;return ze.IsNumber(n)||(n=r.width+2*I()),n}function A(t){this.JSChartContainer&&this.JSChartContainer.OnKeyDown&&this.JSChartContainer.OnKeyDown(t)}function b(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"guid"+(t()+t())+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function w(){var t={},e=0,a=0;return document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(e=document.body.scrollTop,a=document.body.scrollLeft),t.Top=e,t.Left=a,t}function F(t){return parseInt(t)+.5}function M(t,e){var a=t%2===0?Math.floor(e):Math.floor(e)+.5;return a}function L(t){return.5+t<<0}function E(t){if(!t)return null;var e=JSON.stringify(t),a=JSON.parse(e);return a}function N(){this.X,this.Y}function P(){this.Data,this.JSChartContainer,this.Start,this.End,this.XStart,this.YStart,this.XEnd,this.YEnd}function O(){this.Value,this.Message=[],this.TextColor=xi.FrameSplitTextColor,this.TextColor2,this.Font=xi.FrameSplitTextFont,this.LineColor=xi.FrameSplitPen,this.LineDash=null,this.LineType=1,this.LineWidth,this.ExtendData}function R(){this.UIElement,this.Left=50,this.Right=80,this.Top=50,this.Bottom=50,this.TitleHeight=24,this.TopSpace=0,this.BottomSpace=0,this.LeftExtendWidth=0,this.RightExtendWidth=0,this.MultiDayMinute={Count:1,Left:0,Right:0},this.IsShowTitleOnly=!1,this.GetBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.LeftExtendWidth,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.RightExtendWidth,Top:this.Top,TopEx:this.Top+this.TitleHeight+this.TopSpace,TopTitle:this.Top+this.TitleHeight,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.BottomSpace,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=this.UIElement.width-this.Left-this.Right,a=e/this.MultiDayMinute.Count,i=[],r=0;r<this.MultiDayMinute.Count;++r){var n={Left:this.Left+a*r,Right:this.Left+a*(r+1)};n.LeftEx=n.Left+this.MultiDayMinute.Left,n.RightEx=n.Right-this.MultiDayMinute.Right,i.push(n)}t.DayBorder=i}return t},this.GetHScreenBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.BottomSpace,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace,RightTitle:this.UIElement.width-this.Right-this.TitleHeight,Top:this.Top,TopEx:this.Top+this.LeftExtendWidth,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.RightExtendWidth,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=this.UIElement.height-this.Top-this.Bottom,a=e/this.MultiDayMinute.Count,i=[],r=0;r<this.MultiDayMinute.Count;++r){var n={Top:this.Top+a*r,Bottom:this.Top+a*(r+1)};n.TopEx=n.Top+this.MultiDayMinute.Left,n.BottomEx=n.Bottom-this.MultiDayMinute.Right,i.push(n)}t.DayBorder=i}return t},this.PtInClient=function(t,e,a,i){if(i){var r=this.GetHScreenBorder();a.rect(r.Left,r.TopEx,r.Right-r.Left,r.BottomEx-r.TopEx)}else{r=this.GetBorder();if(r.DayBorder){for(var n=0;n<r.DayBorder.length;++n){var s=r.DayBorder[n];if(a.beginPath(),a.rect(s.LeftEx,r.TopEx,s.RightEx-s.LeftEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 1;if(a.beginPath(),a.rect(s.Left,r.TopEx,s.LeftEx-s.Left,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 200+parseInt(n);if(a.beginPath(),a.rect(s.RightEx,r.TopEx,s.Right-s.RightEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 300+parseInt(n)}return-1}a.rect(r.LeftEx,r.Top,r.RightEx-r.LeftEx,r.Bottom-r.Top)}return a.isPointInPath(t,e)?1:this.LeftExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.Top,r.Right-r.Left,r.TopEx-r.Top):a.rect(r.Left,r.Top,r.LeftEx-r.Left,r.Bottom-r.Top),a.isPointInPath(t,e))?2:this.RightExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.BottomEx,r.Right-r.Left,r.Bottom-r.BottomEx):a.rect(r.RightEx,r.Top,r.Right-r.RightEx,r.Bottom-r.Top),a.isPointInPath(t,e))?3:-1},this.GetChartWidth=function(){return this.UIElement.width},this.GetChartHeight=function(){return this.UIElement.height},this.GetLeft=function(){return this.Left+this.LeftExtendWidth},this.GetRight=function(){return this.UIElement.width-this.Right-this.RightExtendWidth},this.GetTop=function(){return this.Top},this.GetTopEx=function(){return this.Top+this.TitleHeight+this.TopSpace},this.GetTopTitle=function(){return this.Top+this.TitleHeight},this.GetBottom=function(){return this.UIElement.height-this.Bottom},this.GetBottomEx=function(){return this.UIElement.height-this.Bottom-this.BottomSpace},this.GetWidth=function(){return this.UIElement.width-this.Left-this.Right-this.LeftExtendWidth-this.RightExtendWidth},this.GetHeight=function(){return this.UIElement.height-this.Top-this.Bottom},this.GetHeightEx=function(){return this.UIElement.height-this.Top-this.Bottom-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetRightEx=function(){return this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace},this.GetWidthEx=function(){return this.UIElement.width-this.Left-this.Right-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetLeftEx=function(){return this.Left+this.BottomSpace},this.GetRightTitle=function(){return this.UIElement.width-this.Right-this.TitleHeight},this.GetTitleHeight=function(){return this.TitleHeight}}Number.prototype.toFixed2=Number.prototype.toFixed,Number.prototype.toFixed=function(t){return function(t,e){var a=1;if(isNaN(t))return t;t<0&&(a=-1);var i=Math.pow(10,e),r=Math.round(Math.abs(t)*i)/i*a;if(/^(\d+(?:\.\d+)?)(e)([\-]?\d+)$/.test(r))var n=r.toFixed2(e);else n=r.toString();var s=n.indexOf(".");s<0&&e>0&&(s=n.length,n+=".");while(n.length<=s+e)n+="0";return n}(this,t)};var B=new function(){this.DataMap=new Map([["KLineFrame",{Create:function(t){return new W}}],["KLineHScreenFrame",{Create:function(t){return new z}}]]),this.Create=function(t,e){if(!this.DataMap.has(t))return l.Warn("[ChartFrameFactory::Create] can't find class=".concat(t,".")),null;var a=this.DataMap.get(t);return a.Create(e)},this.Add=function(t,e){var a=null;return this.DataMap.has(t)&&(a=this.DataMap.get(t)),this.DataMap.set(t,{Create:e.Create}),a}};function _(){this.HorizontalInfo=new Array,this.VerticalInfo=new Array,this.ClassName="IChartFramePainting",this.Canvas,this.Identify,this.Guid=b(),this.ChartBorder,this.PenBorder=xi.FrameBorderPen,this.TitleBGColor=xi.FrameTitleBGColor,this.IsShow=!0,this.SizeChange=!0,this.XYSplit=!0,this.HorizontalMax,this.HorizontalMin,this.XPointCount=10,this.YSplitOperator,this.XSplitOperator,this.Data,this.IsLocked=!1,this.LockPaint=null,this.YSpecificMaxMin=null,this.IsShowBorder=!0,this.IsShowTitleArraw=!0,this.IsShowIndexName=!0,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:1,LineSpace:3},this.IndexParamSpace=2,this.IndexTitleSpace=0,this.IsShowIndexTitle=!0,this.IsDrawTitleBottomLine=!1,this.BorderLine=null,this.Buttons=[],this.LeftButtonWidth=0,this.IsMinSize=!1,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font,this.GlobalOption,this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.GetBorder=function(){return this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.Draw=function(){this.Buttons=[],this.DrawFrame(),this.DrawBorder(),this.SizeChange=!1,this.XYSplit=!1},this.DrawFrame=function(){},this.ClearCoordinateText=function(t){if(ze.IsNonEmptyArray(this.HorizontalInfo))for(var e=0;e<this.HorizontalInfo.length;++e){var a=this.HorizontalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}if(ze.IsNonEmptyArray(this.VerticalInfo))for(e=0;e<this.VerticalInfo.length;++e){a=this.VerticalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}},this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize){var t=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),e=F(t.Left),a=F(t.Top),i=F(t.Right),r=F(t.Bottom),n=i-e,s=r-a;null==this.BorderLine?(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(e,a,n,s)):ze.IsPlusNumber(this.BorderLine)&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke())}},this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.GetBorder(),e=F(t.Left),a=F(t.Top),i=F(t.Right),r=F(this.ChartBorder.GetTopTitle()),n=i-e,s=r-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,n,s),this.IsDrawTitleBottomLine&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,F(t.TopTitle)),this.Canvas.lineTo(i,F(t.TopTitle)),this.Canvas.stroke())}},this.DrawLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new Ie),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!0))},this.DrawLogo=function(){var t=this.GetBorder(),e=xi.FrameLogo.Text;if(ze.IsString(e))if(this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.IsHScreen){var a=t.Left+5,i=t.Top+5;this.Canvas.save(),this.Canvas.translate(a,i),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()}else{a=t.Left+5,i=t.Bottom-5;this.Canvas.fillText(e,a,i)}},this.CalculateLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new Ie),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!1))},this.SetLock=function(t){t?(this.IsLocked=!0,this.LockPaint||(this.LockPaint=new Ie),t.Callback&&(this.LockPaint.Callback=t.Callback),t.IndexName&&(this.LockPaint.IndexName=t.IndexName),t.ID&&(this.LockPaint.LockID=t.ID),t.BG&&(this.LockPaint.BGColor=t.BG),t.Text&&(this.LockPaint.Title=t.Text),t.TextColor&&(this.LockPaint.TextColor=t.TextColor),t.Font&&(this.LockPaint.Font=t.Font),t.Count&&(this.LockPaint.LockCount=t.Count),t.MinWidth>0&&(this.LockPaint.MinWidth=t.MinWidth)):this.IsLocked=!1},this.GetLockRect=function(){return this.IsLocked&&this.LockPaint?this.LockPaint.LockRect:null},this.ReloadResource=function(t){for(var e in t||(this.PenBorder=xi.FrameBorderPen,this.TitleBGColor=xi.FrameTitleBGColor),this.HorizontalInfo){var a=this.HorizontalInfo[e];a.Font&&(a.Font=xi.FrameSplitTextFont),a.TextColor&&(a.TextColor=xi.FrameSplitTextColor),a.LineColor&&(a.LineColor=xi.FrameSplitPen)}for(var e in this.VerticalInfo){a=this.VerticalInfo[e];a.Font&&(a.Font=xi.FrameSplitTextFont),a.TextColor&&(a.TextColor=xi.FrameSplitTextColor),a.LineColor&&(a.LineColor=xi.FrameSplitPen)}},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")},this.GetScaleTextWidth=function(){}}function k(){this.newMethod=_,this.newMethod(),delete this.newMethod,this.ClassName="NoneFrame",this.Snapshot=function(){},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}}}function G(){this.newMethod=_,this.newMethod(),delete this.newMethod,this.ClassName="AverageWidthFrame",this.DataWidth=50*I(),this.DistanceWidth=10*I(),this.MinXDistance=30*I(),this.MinYDistance=12*I(),this.CoordinateType=0,this.IsShowYText=[!0,!0],this.XBottomOffset=xi.Frame.XBottomOffset,this.YTextTopOffset=xi.Frame.YTopOffset,this.YTextPosition=[0,0],this.YTextPadding=[xi.Frame.YTextPadding[0],xi.Frame.YTextPadding[1]],this.IsShowXLine=!0,this.IsShowYLine=!0,this.YInsideOffset=0,this.YTextBaseline=0,this.MultiTextFormat=0,this.RightTextMaxWidth=0,this.ShortYLineLength=5,this.ShortXLineLength=5,this.BeforeDrawXYCallback,this.GetEventCallback,this.ToolbarButtonStyle=xi.ToolbarButtonStyle,this.CloseWindowButton=E(xi.Buttons.CloseWindow),this.OverlayIndexButton=E(xi.Buttons.OverlayIndex),this.ChangeIndexButton=E(xi.Buttons.ChangeIndex),this.ModifyIndexParamButton=E(xi.Buttons.ModifyIndexParam),this.MaxMinWindowButton=E(xi.Buttons.MaxMinWindow),this.TitleWindowButton=E(xi.Buttons.TitleWindow),this.ExportDataButton=E(xi.Buttons.ExportData),this.ButtonTooltip=E(xi.Buttons.Tooltip),this.DrawPicture={BGColor:xi.DrawPicture.XYCoordinate.BGColor,TextBGColor:xi.DrawPicture.XYCoordinate.TextBGColor,TextColor:xi.DrawPicture.XYCoordinate.TextColor,Font:xi.DrawPicture.XYCoordinate.Font},this.IChartFramePainting_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.IChartFramePainting_ReloadResource(t),t||(this.ToolbarButtonStyle=xi.ToolbarButtonStyle,this.CloseWindowButton=E(xi.Buttons.CloseWindow),this.OverlayIndexButton=E(xi.Buttons.OverlayIndex),this.ChangeIndexButton=E(xi.Buttons.ChangeIndex),this.ModifyIndexParamButton=E(xi.Buttons.ModifyIndexParam),this.MaxMinWindowButton=E(xi.Buttons.MaxMinWindow),this.TitleWindowButton=E(xi.Buttons.TitleWindow),this.ButtonTooltip=E(xi.Buttons.Tooltip))},this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.DrawHorizontal(),this.DrawVertical()},this.DrawTitleButton=function(t,e,a){var i=this.GetBorder();if(this.IsHScreen){var r=i.Bottom-3,n=i.RightTitle+this.ChartBorder.TitleHeight/2;this.Canvas.save(),this.Canvas.translate(n,r),this.Canvas.rotate(90*Math.PI/180);for(var s=0,o=0,h=0,l=0;l<t.length;++l){var u=t[l],c=u.Style.Size,d=(o=h-c-u.Style.MerginLeft,"".concat(c,"px ").concat(u.Style.Family)),f=u.Style.Color;this.Canvas.fillStyle=f,this.Canvas.font=d,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(u.Style.Text,o,0);var C={Left:n-c/2,Right:n+c/2,Bottom:r,Width:c,Height:c+u.Style.MerginLeft};C.Top=C.Bottom-c-u.Style.MerginLeft,this.Buttons.push({ID:u.ID,Rect:C}),h=o,r=C.Top}this.Canvas.restore()}else{var m=i.Right-3;for(i.Left,s=i.Top+this.ChartBorder.TitleHeight/2,l=0;l<t.length;++l){u=t[l],c=u.Style.Size;var D=m-c-u.Style.MerginLeft;d="".concat(c,"px ").concat(u.Style.Family),C={Left:D,Top:s-c/2,Right:D+c+u.Style.MerginLeft,Bottom:s+c/2,Width:c+u.Style.MerginLeft,Height:c},f=u.Style.Color;e&&e.X>=C.Left&&e.X<C.Right&&e.Y>=C.Top&&e.Y<=C.Bottom&&(f=u.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:C,Item:u,Frame:this,Point:{X:e.X,Y:e.Y}})),this.Canvas.fillStyle=f,this.Canvas.font=d,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(u.Style.Text,D,s),this.Buttons.push({ID:u.ID,Rect:C}),m=D}}},this.DrawToolbarTooltip=function(t){if(t){var e=this.GetBorder(),a=null;if(t.Item.TooltipText)a=t.Item.TooltipText;else{var i="Toolbar-"+t.Item.ID;a=Ai.GetText(i,0)}if(a){I();var r=t.Rect.Left+t.Rect.Width/2;this.Canvas.font=this.ButtonTooltip.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var n=this.Canvas.measureText(a).width+8,s=this.GetFontHeight(),o=s+10;if("TitleButton"==t.ID)var h=t.Point.X,l=t.Point.Y+20;else if(p.CLOSE_BEFOREOPEN_ID==t.Item.ID)h=t.Rect.Right+5,l=t.Rect.Top;else if(p.DRAW_PICTURE_DELETE==t.Item.ID||p.DRAW_PICTURE_SETTING==t.Item.ID||t.Item.ID>=p.DRAW_PICTURE_BUTTON_1&&t.Item.ID<=p.DRAW_PICTURE_BUTTON_18){h=t.Point.X,l=t.Point.Y+20;h+n>=e.ChartWidth&&(h=e.ChartWidth-n-2)}else{h=r-n/2,l=e.Top-o;l<0&&(l=e.TopEx+1),h+n>e.ChartWidth&&(h=e.ChartWidth-n-2)}this.Canvas.fillStyle=this.ButtonTooltip.ColorBG,this.Canvas.fillRect(h,l,n,o),this.Canvas.fillStyle=this.ButtonTooltip.Color,this.Canvas.fillText(a,h+4,l+o/2)}}},this.GetYFromData=function(t,e){if(this.Logarithmic&&this.GetYLogarithmicFromData)return this.GetYLogarithmicFromData(t,e);if(!1===e){if(1==this.CoordinateType){var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a}if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a},this.DrawHorizontal=function(){if(this.RightTextMaxWidth=0,ze.IsNonEmptyArray(this.HorizontalInfo)&&!this.ChartBorder.IsShowTitleOnly){for(var t,e,a,i,r=this.ChartBorder.GetBorder(),n=r.Left,s=r.Right,o=r.Bottom,h=this.ChartBorder.GetTop(),l=this.ChartBorder.Right,u=this.ChartBorder.Left,c=u>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],d=l>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],f=null,C=I(),m=(r.BottomEx-r.TopEx)/this.HorizontalInfo.length,D=[],p=0,v=this.HorizontalInfo.length-1;v>=0;--v){var g=this.HorizontalInfo[v],S=this.GetYFromData(g.Value);if(!(null!=S&&null!=f&&Math.abs(S-f)<this.MinYDistance)){var T=F(S);if(S!=o&&this.IsShowYLine){var x=!1;ze.IsPlusNumber(g.LineWidth)&&(this.Canvas.lineWidth=g.LineWidth*C,x=!0),this.Canvas.strokeStyle=g.LineColor,2==g.LineType?(this.Canvas.save(),g.LineDash?this.Canvas.setLineDash(g.LineDash):this.Canvas.setLineDash([5*C,5*C]),this.Canvas.beginPath(),this.Canvas.moveTo(n,T),this.Canvas.lineTo(s,T),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):3==g.LineType||8==g.LineType||9==g.LineType||g.LineType>0&&(xi.FrameYLineDash?(this.Canvas.save(),this.Canvas.setLineDash(xi.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(n,T),this.Canvas.lineTo(s,T),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):(this.Canvas.beginPath(),this.Canvas.moveTo(n,T),this.Canvas.lineTo(s,T),this.Canvas.stroke())),x&&(this.Canvas.lineWidth=C)}var y=S;if(S>=o-2?(this.Canvas.textBaseline="bottom",p=2):S<=h+2?(this.Canvas.textBaseline="top",y+=this.YTextTopOffset,p=0):(this.Canvas.textBaseline="middle",p=1),this.Canvas.strokeStyle=g.TextColor,this.Canvas.fillStyle=g.TextColor,null!=g.Message[0]&&c&&(null!=g.Font&&(this.Canvas.font=g.Font),a=this.GetTextTopBottom(p,y),(!i||a&&!this.IsTextTopBottomOverlap(a,i))&&(this.Canvas.textAlign="right",this.Canvas.fillText(g.Message[0],n-this.YTextPadding[0],y),i=a)),null!=g.Message[1]&&d){null!=g.Font&&(this.Canvas.font=g.Font);var A=s;if(3==g.LineType){var b=this.ShortYLineLength*I();this.Canvas.beginPath(),this.Canvas.moveTo(A,T),this.Canvas.lineTo(A+b,T),this.Canvas.stroke(),A+=b}if(this.Canvas.textAlign="left",Array.isArray(g.Message[1]))if(1==this.MultiTextFormat){g.ExtendData&&g.ExtendData.Font&&(this.Canvas.font=g.ExtendData.Font);var w={Text:[{Text:g.Message[1][0],Width:this.Canvas.measureText(g.Message[1][0]).width},{Text:g.Message[1][1],Width:this.Canvas.measureText(g.Message[1][1]).width}],X:A+2,Y:y,TextBaseline:this.Canvas.textBaseline,Item:g};D.push(w)}else if(2==this.MultiTextFormat){this.Canvas.fillText(g.Message[1][0],A+this.YTextPadding[1],y);var M=this.Canvas.measureText("M").width;m>2*M&&this.Canvas.fillText(g.Message[1][1],A+this.YTextPadding[1],y+M)}else this.Canvas.fillText(g.Message[1][0],A+this.YTextPadding[1],y);else e=this.GetTextTopBottom(p,y),(!t||e&&!this.IsTextTopBottomOverlap(e,t))&&(g.TextColor2&&(this.Canvas.fillStyle=g.TextColor2),this.Canvas.fillText(g.Message[1],A+this.YTextPadding[1],y),t=e)}f=S}}ze.IsNonEmptyArray(D)&&1==this.MultiTextFormat&&this.DrawHorizontalMuText(D)}},this.IsTextTopBottomOverlap=function(t,e){return e.Top>=t.Top&&e.Top<=t.Bottom||e.Bottom>=t.Top&&e.Bottom<=t.Bottom},this.GetTextTopBottom=function(t,e){var a=null,i=this.Canvas.measureText("擎").width;return 0==t?a={Top:e,Bottom:e+i}:1==t?(a={Top:e-i/2},a.Bottom=a.Top+i):2==t&&(a={Bottom:e},a.Top=a.Bottom-i),a},this.DrawHorizontalMuText=function(t){for(var e=[null,null],a=0;a<t.length;++a){var i=t[a],r=i.Text[0].Width;ze.IsNumber(e[0])?e[0]<r&&(e[0]=r):e[0]=r,r=i.Text[1].Width,ze.IsNumber(e[1])?e[1]<r&&(e[1]=r):e[1]=r}for(a=0;a<t.length;++a){i=t[a];var n=i.Item;this.Canvas.textBaseline=n.TextBaseline,n.ExtendData&&n.ExtendData.Font?this.Canvas.font=n.ExtendData.Font:n.Font&&(this.Canvas.font=n.Font),n.ExtendData&&n.ExtendData.PriceColor?this.Canvas.fillStyle=n.ExtendData.PriceColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var s=i.X+e[1];this.Canvas.fillText(i.Text[1].Text,s,i.Y),n.ExtendData&&n.ExtendData.SplitColor?this.Canvas.fillStyle=n.ExtendData.SplitColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="left";var o=this.Canvas.measureText("/").width;this.Canvas.fillText("/",s,i.Y),n.ExtendData&&n.ExtendData.PercentageColor?this.Canvas.fillStyle=n.ExtendData.PercentageColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";s=i.X+e[1]+e[0]+o;this.Canvas.fillText(i.Text[0].Text,s,i.Y);var h=e[1]+e[0]+4*o;this.RightTextMaxWidth<h&&(this.RightTextMaxWidth=h)}},this.DrawInsideClientHorizontal=function(){var t=this.GetBorder();if(t.DayBorder&&ze.IsNonEmptyArray(t.DayBorder))var e=t.DayBorder[0],a=e.LeftEx,i=(e=t.DayBorder[t.DayBorder.length-1],e.RightEx),r=t.Bottom,n=t.TopTitle;else a=t.LeftEx,i=t.RightEx,r=t.Bottom,n=t.TopTitle;for(var s=I(),o=null,h=null,l=this.HorizontalInfo.length-1;l>=0;--l){e=this.HorizontalInfo[l];var u=this.GetYFromData(e.Value);if(!(null!=u&&null!=o&&Math.abs(u-o)<this.MinYDistance)){if(e.Message[2]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="left";var c=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var d={X:a,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(d)||(this.Canvas.fillText(e.Message[2],a+1*s,c),(null==h||h>c)&&(this.YInsideOffset=this.Canvas.measureText(e.Message[2]).width+4*I(),h=c))}if(e.Message[3]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="right";c=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var f=this.Canvas.measureText(e.Message[3]).width;d={X:i-f,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(d)||this.Canvas.fillText(e.Message[3],i-1*s,c)}o=u}}},this.DrawInsideHorizontal=function(){if(!0!==this.IsHScreen&&!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=t.TopTitle,n=this.ChartBorder.Right,s=this.ChartBorder.Left,o=(this.ChartBorder.TitleHeight,(s<10||2==this.YTextPosition[0])&&!0===this.IsShowYText[0]),h=(n<10||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(o||h)for(var l=I(),u=null,c=null,d=this.HorizontalInfo.length-1;d>=0;--d){var f=this.HorizontalInfo[d],C=this.GetYFromData(f.Value);if(!(null!=C&&null!=u&&Math.abs(C-u)<this.MinYDistance)){if(null!=f.Message[0]&&o){null!=f.Font&&(this.Canvas.font=f.Font),this.Canvas.fillStyle=f.TextColor,this.Canvas.textAlign="left";var m=C;C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",m+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle";var D={X:e,Y:m,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:f.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(D)||(this.Canvas.fillText(f.Message[0],e+1*l,m),(null==c||c>m)&&(this.YInsideOffset=this.Canvas.measureText(f.Message[0]).width+4*I(),c=m))}if(null!=f.Message[1]&&h){null!=f.Font&&(this.Canvas.font=f.Font),this.Canvas.fillStyle=f.TextColor,this.Canvas.textAlign="right";m=C;if(C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",m+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",Array.isArray(f.Message[1]))var p=f.Message[1][0];else p=f.Message[1];var v=this.Canvas.measureText(p).width;D={X:a-v,Y:m,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:f.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(D)||this.Canvas.fillText(p,a-1*l,m)}u=C}}}},this.GetXFromIndex=function(t){var e=this.XPointCount;if(1==e)return 0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight();if(e<=0)return this.ChartBorder.GetLeft();if(t>=e)return this.ChartBorder.GetRight();var a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e;return a},this.DrawVertical=function(){var t=this.GetBorder(),e=t.TopTitle,a=t.Bottom,i=t.RightEx,r=I();if(!(this.ChartBorder.Bottom<=5*I()))for(var n=null,s=null,o=0;o<this.VerticalInfo.length;++o){var h=this.GetXFromIndex(this.VerticalInfo[o].Value);if(h>i)break;if(!(null!=n&&Math.abs(h-n)<this.MinXDistance)){var l=this.VerticalInfo[o],u=F(h);if(this.IsShowXLine&&(2==l.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,l.LineDash?this.Canvas.setLineDash(l.LineDash):this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==l.LineType||l.LineType>0&&(xi.FrameXLineDash?(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,this.Canvas.setLineDash(xi.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke()))),l.BG&&l.BG.Color){var c=l.BG;this.Canvas.fillStyle=c.Color;var d=this.GetXFromIndex(c.Index.Start),f=this.GetXFromIndex(c.Index.End),C=this.ChartBorder.Bottom;ze.IsNumber(c.Height)&&(C=c.Height);var m={Left:d,Width:f-d,Top:t.Bottom,Height:C};this.Canvas.fillRect(m.Left,m.Top,m.Width,m.Height)}if(null!=this.VerticalInfo[o].Message[0]){null!=this.VerticalInfo[o].Font&&(this.Canvas.font=this.VerticalInfo[o].Font);var D=0;this.Canvas.fillStyle=l.TextColor,this.Canvas.strokeStyle=l.TextColor;var p=this.Canvas.measureText(this.VerticalInfo[o].Message[0]).width;if(h<p/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",D=h):h+p/2>=this.ChartBorder.GetChartWidth()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",D=h-p):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",D=h-p/2),null==s||D>s){var v=a;if(3==l.LineType){var g=this.ShortXLineLength*r;this.Canvas.beginPath(),this.Canvas.moveTo(u,v),this.Canvas.lineTo(u,v+g),this.Canvas.stroke(),v+=g+2*r}this.Canvas.fillText(this.VerticalInfo[o].Message[0],h,v+this.XBottomOffset),s=D+p}}n=h}}},this.GetYData=function(t,e){return this.Logarithmic&&this.GetYLogarithmicFromData?this.GetYLogarithmicData(t):1==this.CoordinateType?0==e?(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMin:t>this.ChartBorder.GetBottomEx()?this.HorizontalMax:(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:0==e?(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMax:t>this.ChartBorder.GetBottomEx()?this.HorizontalMin:(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&ze.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();if(e.X){var o=e.X,h=o.Min.X,l=o.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,s)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var d=this.GetXData(c.X,!1),f=(d=Math.round(d),this.GetKItem(d));if(f){var C=ze.FormatDateString(f.Date,null);ut.IsMinutePeriod(a.Period)&&(C+=" "+ze.FormatTimeString(f.Time,"HH:MM"));var m=this.Canvas.measureText(C).width+2,D=c.X-m/2;D<r&&(D=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(D,i.Bottom,m,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var p=i.Bottom+s;this.Canvas.fillText(C,D+1,p)}}}}},this.GetKItem=function(t){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;var e=this.Data.DataOffset+t;return this.Data.Data[e]},this.DrawPictureYCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&ze.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,s=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var h=2;a&&a.Symbol&&(h=Hr(a.Symbol));for(var l=0,u=0;u<e.Points.length;++u){var c=e.Points[u],d=this.GetYData(c.Y),f=d.toFixed(h),C=this.Canvas.measureText(f).width;l<C&&(l=C),e.Points[u].Text=f}if(l+=this.YTextPadding[1]+2,e.Y){var m=e.Y,D=m.Min.Y,p=m.Max.Y;m.Min.Y<r&&(D=r),m.Max.Y>n&&(p=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(s,D,l+5,p-D)}for(u=0;u<e.Points.length;++u){c=e.Points[u];if(!(c.Y<r||c.Y>n)){this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(s,c.Y-o/2,l,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var v=c.Y+o/2;this.Canvas.fillText(c.Text,s+this.YTextPadding[1],v)}}}},this.DrawPicturePointYCoordinate=function(t,e){if(!this.IsHScreen&&t.GetYCoordinatePoint){var a=t.GetYCoordinatePoint();if(ze.IsNonEmptyArray(a)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,s=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var h=2;e&&e.Symbol&&(h=Hr(e.Symbol));for(var l=0;l<a.length;++l){var u=a[l];if(u&&!(u.Y<r||u.Y>n)){var c=u.YValue.toFixed(h),d=this.Canvas.measureText(c).width+2;d+=this.YTextPadding[1],this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(s,u.Y-o/2,d,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var f=u.Y+o/2;this.Canvas.fillText(c,s+this.YTextPadding[1],f)}}}}},this.GetCustomItemTextInfo=function(t,e,a){var i=e?t.Message[0]:t.Message[1],r=[],n=0;if(Array.isArray(i)){for(var s=0;s<i.length;++s){t=i[s];if(1===t.Type)r.push({Type:t.Type});else{var o=this.Canvas.measureText(i[s].Text).width;o>n&&(n=o),r.push({Text:i[s].Text,Width:o+2*a})}}n>0&&(n+=2*a)}else n=this.Canvas.measureText(i).width+2*a,r.push({Text:i,Width:n});return{MaxWidth:n,Text:r}},this.DrawCustomItem=function(t,e){if(t.Message[1]||t.Message[0])if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)this.SendDrawCountDownEvent({IsShow:!1});else{var a=this.GetBorder(),i=a.Left,r=a.Right,n=a.Bottom,s=a.Top,o=this.ChartBorder.Right,h=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(h=this.ChartBorder.Top,o=this.ChartBorder.Bottom,s=a.Top,n=a.Bottom);var l,u=I(),c=18*u,d=c,f=this.GetYFromData(t.Value),C=0;if(t.ExtendData&&t.ExtendData.Custom){var m=t.ExtendData.Custom;ze.IsNumber(m.Position)&&(C=m.Position),m.EmptyBGColor&&(l=m.EmptyBGColor)}if(t.Message[0])if(h<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var D=this.GetCustomItemTextInfo(t,!0,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;var g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));for(var T=f,x=0;x<D.Text.length;++x){var y=D.Text[x];if(this.IsHScreen){var A=s,b=T-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(A+y.Width,n,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type);else{A=T-d/2-1*u,b=i+1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T),0==x&&this.DrawLine(b+y.Width,r,T,t.LineColor,t.LineType,t),T+=d+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!0,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;for(T=f,x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){if(0==x)A=s-y.Width;else A=s-p;b=T-d/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(A+y.Width,n,T,t.LineColor,t.LineType,t),T-=d+1*u}else{A=T-d/2-1*u;if(0==x){var w=i-y.Width;b=i}else w=i-p,b=i-(p-y.Width);l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(w-1,A,y.Width+1,d),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(F(w-1),F(A),F(y.Width+1),F(d)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(y.Text,b-1*u,T)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(w,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b-1*u,T)),0==x&&this.DrawLine(i,r,T,t.LineColor,t.LineType,t),T+=d+1*u}}}else if(t.Message[1])if(o<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!1,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));for(T=f,x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){A=n-y.Width,b=T-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(s,A,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type){if(this.GetEventCallback){A=T-d/2-1*u;var M={Top:A,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(M)&&ze.IsPlusNumber(M.Height)&&(T+=d+1*u)}}else{A=T-d/2-1*u,b=r-y.Width;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T),0==x&&this.DrawLine(i,b,T,t.LineColor,t.LineType,t),T+=d+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var E=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){A=n-y.Width-E,b=f-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,E),this.DrawHScreenText({X:f,Y:A},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{A=f-d/2-1*u,b=r-p-E-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,E,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,b+1*u,f)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!1,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;var N=null;e&&e.has(3)&&(N=e.get(3));T=f;var P={};for(x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){A=n,b=T-d/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(s,A,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type){if(this.GetEventCallback){A=T-d/2-1*u,M={Top:A,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(M)&&ze.IsPlusNumber(M.Height)&&(T+=d+1*u)}}else{A=T-d/2-1*u;if(0==x){b=r;P.Left=b,N&&A<N.Rect.Bottom&&(T=N.Rect.Bottom,A=T-d/2-1*u)}else b=r+p-y.Width;l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(b,A,y.Width+1,d),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(F(b),F(A),L(y.Width+1),L(d)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(y.Text,b+2*u,T)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T)),0==x&&this.DrawLine(i,r,f,t.LineColor,t.LineType,t),T+=d+1*u,P.Bottom=T}}if(e&&ze.IsNumber(P.Left)&&ze.IsNumber(P.Bottom)&&e.set(3,{Rect:P,Item:t}),(3==t.Type||4==t.Type)&&t.Title){g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));E=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){A=n-E,b=f-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,E),this.DrawHScreenText({X:f,Y:A},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{A=f-d/2-1*u,b=r-E-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,E,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,b+1*u,f)}}}}},this.SendDrawCountDownEvent=function(t){if(!this.GetEventCallback)return!1;var e=this.GetEventCallback(C.ON_DRAW_COUNTDOWN);return!(!e||!e.Callback)&&(e.Callback(e,t,this),!0)},this.DrawDotLine=function(t,e,a,i,r){var n=I();this.Canvas.save(),this.Canvas.strokeStyle=i,r&&ze.IsPlusNumber(r.LineWidth)&&(this.Canvas.lineWidth=r.LineWidth*n),r.LineDash?this.Canvas.setLineDash(r.LineDash):this.Canvas.setLineDash([5*n,5*n]),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(F(a),t),this.Canvas.lineTo(F(a),e)):(this.Canvas.moveTo(t,F(a)),this.Canvas.lineTo(e,F(a))),this.Canvas.stroke(),this.Canvas.restore()},this.DrawLine=function(t,e,a,i,r,n){if(-1!=r)if(0==r){var s=I();this.Canvas.strokeStyle=i;var o=!1;n&&ze.IsPlusNumber(n.LineWidth)&&(this.Canvas.lineWidth=n.LineWidth*s,o=!0),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(F(a),t),this.Canvas.lineTo(F(a),e)):(this.Canvas.moveTo(t,F(a)),this.Canvas.lineTo(e,F(a))),this.Canvas.stroke(),o&&(this.Canvas.lineWidth=s)}else this.DrawDotLine(t,e,a,i,n)},this.DrawHScreenText=function(t,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e.Color,this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e.Text,e.XOffset,e.YOffset),this.Canvas.restore()},this.RGBToStruct=function(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a={};return 3!=e.length?null:(a.R=Number(e[0]),a.G=Number(e[1]),a.B=Number(e[2]),a)}return null},this.GetScaleTextWidth=function(){this.ChartBorder.GetBorder();var t=I();if(this.IsHScreen)var e=this.ChartBorder.Top,a=this.ChartBorder.Bottom,i=e>10*t&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=a>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else{var n=this.ChartBorder.Right,s=this.ChartBorder.Left;i=s>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1]}if(!r&&!i)return null;var o={Left:null,Right:null},h=0,l=!1;this.YSplitOperator&&1==this.YSplitOperator.CoordinateType&&(l=!0);for(var u=0;u<this.HorizontalInfo.length;++u){var c=null,d=this.HorizontalInfo[u];if(d&&(null!=d.Font&&(this.Canvas.font=d.Font),null!=d.Message[0]&&i&&(c=this.Canvas.measureText(d.Message[0]).width,(null==o.Left||o.Left<c)&&(o.Left=c)),null!=d.Message[1]&&r)){if(null!=d.Font&&(this.Canvas.font=d.Font),Array.isArray(d.Message[1])){if(1==this.MultiTextFormat){if(d.ExtendData){d.ExtendData.Font&&(this.Canvas.font=d.ExtendData.Font);var f=this.Canvas.measureText(d.Message[1][0]).width,C=this.Canvas.measureText(d.Message[1][1]).width,m=this.Canvas.measureText("/").width;c=f+m,h<C&&(h=C)}}else if(2==this.MultiTextFormat){c=this.Canvas.measureText(d.Message[1][0]).width;var D=this.Canvas.measureText(d.Message[1][1]).width;c<D&&(c=D)}else if(c=this.Canvas.measureText(d.Message[1][0]).width,l){var p=this.Canvas.measureText("-00.00%").width;p>c&&(c=p)}}else c=this.Canvas.measureText(d.Message[1]).width;(null==o.Right||o.Right<c)&&(o.Right=c)}}return ze.IsNumber(o.Right)&&(o.Right+=h),ze.IsNumber(o.Left)&&(o.Left+=this.YTextPadding[0]),ze.IsNumber(o.Right)&&(o.Right+=this.YTextPadding[1]),{TextWidth:o}},this.ClearToolbar=function(){if(this.ToolbarID){var t=document.getElementById(this.ToolbarID);t&&(this.ChartBorder.UIElement.parentNode.removeChild(t),this.ToolbarRect=null)}},this.HideToolbar=function(){if(this.ToolbarID){this.ToolbarRect=null;var t=document.getElementById(this.ToolbarID);t&&"none"!=t.style.display&&(t.style.display="none")}}}function V(){this.newMethod=G,this.newMethod(),delete this.newMethod,this.ClassName="MinuteFrame",this.DataWidth=1*I(),this.DistanceWidth=1*I(),this.MinuteCount=243,this.BeforeBGColor=xi.Minute.Before.BGColor,this.AfterBGColor=xi.Minute.After.BGColor,this.MultiDayBorderPen=xi.MultiDayBorderPen,this.CustomHorizontalInfo=[],this.RightFrame=null,this.ToolbarID=b(),this.ReDrawToolbar=!1,this.DayCount=1,this.ModifyIndex=xi.MinuteToolbar.ModifyIndex,this.ChangeIndex=xi.MinuteToolbar.ChangeIndex,this.CloseIndex=xi.MinuteToolbar.CloseIndex,this.MaxMinWindow=xi.MinuteToolbar.MaxMinWindow,this.TitleWindow=xi.MinuteToolbar.TitleWindow,this.ExportData=xi.MinuteToolbar.ExportData,this.OverlayIndex=xi.MinuteToolbar.OverlayIndex,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.IsShowPositionTitle=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.BeforeCloseIcon=E(xi.Minute.Before.CloseIcon),this.IsShowCloseButton=!0,this.BeforeOpenVerticalInfo=[],this.AfterCloseVerticalInfo=[],this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),this.DrawBeforeDataBG(),this.YInsideOffset=0,this.BeforeDrawXYCallback&&this.BeforeDrawXYCallback(this),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.SuperDrawBorder=this.DrawBorder,this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize&&(this.SuperDrawBorder(),1==this.Identify)){var t=this.ChartBorder.GetBorder(),e=F(t.Left),a=F(t.Top),i=F(t.Right);this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a),this.Canvas.save(),this.Canvas.lineWidth=2*I(),this.Canvas.stroke(),this.Canvas.restore()}},this.DrawVolTitle=function(t){if(Mr.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=I(),a=this.ChartBorder.GetLeft()+2*e+this.YInsideOffset,i=this.ChartBorder.GetTopEx()+2*e;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",xi.Minute.VolBarColor||xi.Minute.VolTitleColor){xi.Minute.VolBarColor?this.Canvas.fillStyle=xi.Minute.VolBarColor:this.Canvas.fillStyle=xi.Minute.VolTitleColor;var r=this.YSplitOperator.LanguageID,n=Ai.GetText("MVol-Vol",r);this.Canvas.fillText(n,a,i),a+=this.Canvas.measureText(n).width,a+=6*I()}this.IsShowPositionTitle&&(n=Ai.GetText("MVol-Position",r),this.Canvas.fillStyle=xi.Minute.PositionColor,this.Canvas.fillText(n,a,i))}},this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&!0!==xi.IsDOMFrameToolbar&&"undefined"!=typeof $&&!(this.Identify<2)&&this.ChartBorder.UIElement){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar)if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex){var e=I(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var s="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span>";this.CloseIndex&&(s+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=s;this.ChartBorder.UIElement.JSChartContainer,this.Identify;this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&$("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):$("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&$("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):$("#"+t.id+" .index_change").hide(),$("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},(function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)})),t.style.display="block"}}else"none"!=t.style.display&&(t.style.display="none")}},this.DrawToolbarV2=function(t,e){if(!0!==xi.IsDOMFrameToolbar&&(0==this.Identify&&this.IsShowCloseButton&&this.DrawCloseBeforeButton(t,e),!(this.ChartBorder.TitleHeight<5)&&0!=this.Identify&&1!=this.Identify)){var a=[];if(this.CloseIndex&&a.push({ID:p.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&a.push({ID:p.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&a.push({ID:p.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:p.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:p.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:p.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:p.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),ze.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];r.ID&&r.Style&&a.push({ID:r.ID,Style:r.Style,TooltipText:r.TooltipText})}this.DrawTitleButton(a,t,e)}},this.DrawCloseBeforeButton=function(t,e){if(0==this.Identify){var a=this.ChartBorder.GetBorder();if(!a.DayBorder&&!(this.ChartBorder.LeftExtendWidth<10)){var i={Left:a.Left,Top:a.TopEx,Width:this.BeforeCloseIcon.Size,Height:this.BeforeCloseIcon.Size};i.Right=i.Left+this.BeforeCloseIcon.Size,i.Bottom=i.Top+this.BeforeCloseIcon.Size;var r={Rect:i,Name:"集合竞价关闭按钮",ID:p.CLOSE_BEFOREOPEN_ID},n=this.BeforeCloseIcon.Color;t&&t.X>=i.Left&&t.X<i.Right&&t.Y>=i.Top&&t.Y<=i.Bottom&&(n=this.BeforeCloseIcon.MoveOnColor,e&&(e.MouseOnToolbar={Rect:i,Item:r,Frame:this,Point:{X:t.X,Y:t.Y}}));var s="".concat(this.BeforeCloseIcon.Size,"px ").concat(this.BeforeCloseIcon.Family);this.Canvas.font=s,this.Canvas.fillStyle=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(this.BeforeCloseIcon.Text,a.Left,a.TopEx),this.Buttons.push(r)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=F(t.Top),i=F(t.Bottom),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var s=0,o=e[n],h=F(o.Left),l=F(o.LeftEx),u=l-h;u>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(h,a,u,r),++s);h=F(o.RightEx),l=F(o.Right),u=l-h;u>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(h,a,u,r),++s),2==s&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,i),this.Canvas.stroke())}},this.DrawCallAuctionVertical=function(t,e,a,i){if(e){var r=a.TopTitle,n=a.Bottom,s=(a.Left,a.LeftEx),o=I(),h=null,l=null;for(var u in t){var c=t[u],d=this.GetLeftExtendXFromIndex(c.Value,e);if(d>s)break;if(!(null!=h&&Math.abs(d-h)<this.MinXDistance)){var f=F(d);if(this.IsShowXLine&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*o,5*o]),this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==c.LineType||c.LineType>0&&(xi.FrameXLineDash?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash(xi.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=c.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke()))),null!=c.Message[0]&&this.ChartBorder.Bottom>5*o){null!=c.Font&&(this.Canvas.font=c.Font);var C=0;this.Canvas.fillStyle=c.TextColor,this.Canvas.strokeStyle=c.TextColor;var m=this.Canvas.measureText(c.Message[0]).width;if(d<m/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",C=d):d+m/2>=a.ChartWidth?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",C=d-m):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",C=d-m/2),null==l||C>l){var D=n;if(3==c.LineType){var p=this.ShortXLineLength*o;this.Canvas.beginPath(),this.Canvas.moveTo(f,D),this.Canvas.lineTo(f,D+p),this.Canvas.stroke(),D+=p+2*o}this.Canvas.fillText(c.Message[0],d,D+this.XBottomOffset),l=C+m}}h=d}}}},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetBorder();if(t.DayBorder)this.DrawMultiDayBeforeDataBG(t);else if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=F(t.Top),a=F(t.Bottom);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=F(t.Left),r=F(this.ChartBorder.GetLeft()),n=r-i,s=a-e;this.Canvas.fillRect(i,e,n,s),this.DrawCallAuctionVertical(this.BeforeOpenVerticalInfo,this.YSplitOperator.BeforeOpenData,t,!0)}if(this.ChartBorder.RightExtendWidth>10){this.Canvas.fillStyle=this.AfterBGColor;i=F(this.ChartBorder.GetRight()),r=F(t.Right),n=r-i,s=a-e;this.Canvas.fillRect(i,e,n,s)}}},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&ze.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();if(e.X){var o=e.X,h=o.Min.X,l=o.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,s)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var d=parseInt(this.GetXData(c.X)),f=this.GetKItem(d,a);if(f){var C=ze.FormatTimeString(f.Time,"HH:MM"),m=this.Canvas.measureText(C).width+2,D=c.X-m/2;D<r&&(D=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(D,i.Bottom,m,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var p=i.Bottom+s;this.Canvas.fillText(C,D+1,p)}}}}},this.GetKItem=function(t,e){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;if(t<this.Data.Data.length)return this.Data.Data[t];var a=this.Data.Data[this.Data.Data.length-1],i=Er.GetTimeData(e.Symbol),r=t%i.length,n=i[r];return{Date:a.Date,Time:n}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.XSplitOperator&&this.XSplitOperator.Operator(),null!=this.YSplitOperator&&this.YSplitOperator.Operator())},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],s=this.MinuteCount-1;if(i>=s)return n.RightEx;var o=n.RightEx-n.LeftEx,h=n.LeftEx+o*i/s;return h},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.LeftEx:a.RightEx;if(e<=0)return a.LeftEx;if(t>=e)return a.RightEx;var i=a.RightEx-a.LeftEx,r=a.LeftEx+i*t/e;return r},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Left&&t<=r.Right){var n=this.MinuteCount-1,s=this.MinuteCount*i;if(t<=r.LeftEx)return 0+s;if(t>=r.RightEx)return n+s;var o=r.RightEx-r.LeftEx;return(t-r.LeftEx)*(1*n/o)+s}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.LeftEx)return 0;if(t>=a.RightEx)return e;var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)*(1*e/i)},this.DrawCustomHorizontal=function(){if(!this.IsMinSize)for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:case 1:this.DrawCustomItem(e);break}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();if(i.DayBorder)return this.GetLeftExtendMultiDayXFromIndex(t,e,i);var r=i.Left,n=this.ChartBorder.LeftExtendWidth,s=r+n*t/a;return s},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.Left,o=r.LeftEx,h=o-s,l=s+h*t/n;return l},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Left&&t<=n.LeftEx){if(!e[r])return null;var s=e[r].TotalCount-1,o=n.Left,h=n.LeftEx,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Left,n=a.LeftEx;if(t<=r)return 0;if(t>=n)return i;var s=n-r;return 1*i/s*(t-r)},this.MoveXIndexLeft=function(t,e){if(l.Chart.Log("[MinuteFrame::MoveXIndexLeft] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,s=r;n>=0;--n){for(var o=e.Data[n];s>=0;--s){var h=o[s];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=h.DayItem.Data.length-1);i>=0;--i){var u=h.DayItem.Data[i];if(u){if(10==h.Type){var c=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(c),e.Point.Y=this.GetYFromData(u.Close),e.IndexData.CursorIndex=c,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(20==h.Type){if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(30==h.Type){if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}s=2}return!1}if(1==e.DataType){a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(n=r;n>=0;--n){h=e.Data[n];if(h&&h.DayItem&&h.DayItem.Data){for(null==i&&(i=h.DayItem.Data.length-1);i>=0;--i){if(1==h.Type){var d=h.DayItem.DataOffset;u=h.DayItem.Data[i+d];if(!u)continue;c=i;return e.Point.X=this.GetXFromIndex(c),e.Point.Y=this.GetYFromData(u.Close),e.IndexData.CursorIndex=c,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(2==h.Type){u=h.DayItem.Data[i];if(!u)continue;if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(3==h.Type){u=h.DayItem.Data[i];if(!u)continue;if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}i=null}}}},this.MoveXIndexRight=function(t,e){if(l.Chart.Log("[MinuteFrame::MoveXIndexRight] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,s=r;n<e.Data.length;++n){for(var o=e.Data[n];s<3;++s){var h=o[s];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=0);i<h.DayItem.Data.length;++i){var u=h.DayItem.Data[i];if(u){if(10==h.Type){var c=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(c),e.Point.Y=this.GetYFromData(u.Close),e.IndexData.CursorIndex=c,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(20==h.Type){if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(30==h.Type){if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}s=0}return!1}if(1==e.DataType){a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(n=r;n<e.Data.length;++n){h=e.Data[n];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=0);i<h.DayItem.Data.length;++i){if(1==h.Type){if(i>=this.XPointCount)break;var d=h.DayItem.DataOffset;u=h.DayItem.Data[i+d];if(!u)continue;c=i;return e.Point.X=this.GetXFromIndex(c),e.Point.Y=this.GetYFromData(u.Close),e.IndexData.CursorIndex=c,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(2==h.Type){u=h.DayItem.Data[i];if(!u)continue;if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(3==h.Type){u=h.DayItem.Data[i];if(!u)continue;if(!ze.IsNumber(u.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(u.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}i=null}}}},this.GetLeftExtendXValidData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder){var i=this.GetLeftExtendXData(t,e.Data);if(!i)return!1;var r=parseInt(i.DataIndex.toFixed(0)),n=e.Data[i.DayIndex];if(r>=0&&r<n.Data.length){var s=n.Data[r];if(ze.IsNumber(s.Price))return e.IndexData.DataIndex=r,!0}r<0?r=0:r>=n.Data.length&&(r=n.Data.length-1);for(var o=-1,h=r;h>=0;--h){s=n.Data[h];if(s&&ze.IsNumber(s.Price)){o=h;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,n),l.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:".concat(e.IndexData.DayIndex,", Type:").concat(e.IndexData.Type,", x:").concat(t,"=>").concat(e.IndexData.Point.X,", index:").concat(r,"=>").concat(o)),!0)}r=this.GetLeftExtendXData(t,e.Data);if(r=parseInt(r.toFixed(0)),r>=0&&r<e.Data.Data.length){s=e.Data.Data[r];if(ze.IsNumber(s.Price))return e.IndexData.DataIndex=r,!0}r<0?r=0:r>=e.Data.Data.length&&(r=e.Data.Data.length-1);for(o=-1,h=r;h>=0;--h){s=e.Data.Data[h];if(ze.IsNumber(s.Price)){o=h;break}}if(o<0)for(h=r+1;h<e.Data.Data.length;++h){s=e.Data.Data[h];if(ze.IsNumber(s.Price)){o=h;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,e.Data),l.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:".concat(e.IndexData.DayIndex,", Type:").concat(e.IndexData.Type,", x:").concat(t,"=>").concat(e.IndexData.Point.X,", index:").concat(r,"=>").concat(o)),!0)},this.GetRightExtendXValidData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder){var i=this.GetRightExtendXData(t,e.Data);if(!i)return!1;var r=parseInt(i.DataIndex.toFixed(0)),n=e.Data[i.DayIndex];if(r>=0&&r<n.Data.length){var s=n.Data[r];if(ze.IsNumber(s.Price))return e.IndexData.DataIndex=r,!0}r<0?r=0:r>=n.Data.length&&(r=n.Data.length-1);for(var o=-1,h=r;h>=0;--h){s=n.Data[h];if(s&&ze.IsNumber(s.Price)){o=h;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,n),l.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:".concat(e.IndexData.DayIndex,", Type:").concat(e.IndexData.Type,", x:").concat(t,"=>").concat(e.IndexData.Point.X,", index:").concat(r,"=>").concat(o)),!0)}if(!e||!e.Data)return!1;r=this.GetRightExtendXData(t,e.Data);if(r=parseInt(r.toFixed(0)),r>=0&&r<e.Data.Data.length){s=e.Data.Data[r];if(ze.IsNumber(s.Price))return e.IndexData.DataIndex=r,!0}r<0?r=0:r>=e.Data.Data.length&&(r=e.Data.Data.length-1);for(o=-1,h=r;h>=0;--h){s=e.Data.Data[h];if(ze.IsNumber(s.Price)){o=h;break}}if(o<0)for(h=r+1;h<e.Data.Data.length;++h){s=e.Data.Data[h];if(ze.IsNumber(s.Price)){o=h;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,e.Data),l.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:".concat(e.IndexData.DayIndex,", Type:").concat(e.IndexData.Type,", x:").concat(t,"=>").concat(e.IndexData.Point.X,", index:").concat(r,"=>").concat(o)),!0)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx,s=n*(t-i.Min)/(i.Max-i.Min);return r.BottomEx-s},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx;return(r.BottomEx-t)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.RightEx,o=r.Right,h=o-s,l=s+h*t/n;return l},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();if(i.DayBorder)return this.GetRightExtendMultiDayXFromIndex(t,e,i);var r=i.RightEx,n=this.ChartBorder.RightExtendWidth,s=r+n*t/a;return s},this.GetRightExtendYFromData=function(t,e,a){return this.GetLeftExtendYFromData(t,e,a)},this.GetRightExtendYData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYData(t,e,a):this.GetYData(t,e)},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.RightEx&&t<=n.Right){if(!e[r])return null;var s=e[r].TotalCount-1,o=n.RightEx,h=n.Right,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.RightEx,n=a.Right;if(t<=r)return 0;if(t>=n)return i;var s=n-r;return 1*i/s*(t-r)}}function H(){this.newMethod=V,this.newMethod(),delete this.newMethod,this.ClassName="MinuteHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=F(t.RightEx),a=F(t.Top),i=F(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetHScreenBorder();if(t.DayBorder)this.DrawMultiDayBeforeDataBG(t);else if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=F(t.Left),a=F(t.Right);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=F(t.Top),r=F(t.TopEx),n=a-e,s=r-i;this.Canvas.fillRect(e,i,n,s)}if(this.ChartBorder.RightExtendWidth>10){i=t.BottomEx,r=t.Bottom,n=a-e,s=r-i;this.Canvas.fillRect(e,i,n,s)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=F(t.Left),i=F(t.Right),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var s=0,o=e[n],h=F(o.Top),l=F(o.TopEx),u=l-h;u>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(a,h,r,u),++s);h=F(o.BottomEx),l=F(o.Bottom),u=l-h;u>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(a,h,r,u),++s),2==s&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(a,l),this.Canvas.lineTo(i,l),this.Canvas.stroke())}},this.GetYData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<e.LeftEx)return this.HorizontalMin;if(t>e.RightEx)return this.HorizontalMax;var a=e.RightEx-e.LeftEx;return(t-e.LeftEx)/a*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Top&&t<=r.Bottom){var n=this.MinuteCount-1,s=this.MinuteCount*i;if(t<=r.TopEx)return 0+s;if(t>=r.BottomEx)return n+s;var o=r.BottomEx-r.TopEx;return(t-r.TopEx)*(1*n/o)+s}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return e;var i=a.BottomEx-a.TopEx;return(t-a.TopEx)*(1*e/i)},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],s=this.MinuteCount-1;if(i>=s)return n.BottomEx;var o=n.BottomEx-n.TopEx,h=n.TopEx+o*i/s;return h},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.TopEx:a.BottomEx;if(e<=0)return a.TopEx;if(t>=e)return a.BottomEx;var i=a.BottomEx-a.TopEx,r=a.TopEx+i*t/e;return r},this.GetYFromData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<=this.HorizontalMin)return e.LeftEx;if(t>=this.HorizontalMax)return e.RightEx;var a=(e.RightEx-e.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return e.LeftEx+a},this.DrawVolTitle=function(t){if(Mr.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=I(),a=this.ChartBorder.GetRight()-2*e,i=this.ChartBorder.GetTopEx()+2*e,r=a,n=i;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180);var s=this.YInsideOffset;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",xi.Minute.VolBarColor||xi.Minute.VolTitleColor){xi.Minute.VolBarColor?this.Canvas.fillStyle=xi.Minute.VolBarColor:this.Canvas.fillStyle=xi.Minute.VolTitleColor;var o=this.YSplitOperator.LanguageID,h=Ai.GetText("MVol-Vol",o);this.Canvas.fillText(h,s,0),s+=this.Canvas.measureText(h).width,s+=6*I()}this.IsShowPositionTitle&&(h=Ai.GetText("MVol-Position",o),this.Canvas.fillStyle=xi.Minute.PositionColor,this.Canvas.fillText(h,s,0)),this.Canvas.restore()}},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=t.Left,r=t.Right,n=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=null,h=this.HorizontalInfo.length-1;h>=0;--h){var l=this.HorizontalInfo[h],u=this.GetYFromData(l.Value);if(!(null!=u&&Math.abs(u-o)<this.MinYDistance)){if(this.Canvas.strokeStyle=l.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(u),e),this.Canvas.lineTo(F(u),a),this.Canvas.stroke(),u>=r-2)this.Canvas.textBaseline="top",u=r;else if(u<=i+2){if(this.Canvas.textBaseline="bottom",u=i,null!=u&&Math.abs(u-o)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(null!=l.Message[0]&&n>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="right";var c=u,d=e;this.Canvas.save(),this.Canvas.translate(c,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[0],-2,0),this.Canvas.restore()}if(null!=l.Message[1]&&s>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="left";c=u,d=a;this.Canvas.save(),this.Canvas.translate(c,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[1],2,0),this.Canvas.restore()}o=u}}},this.DrawInsideClientHorizontal=function(){for(var t=this.GetBorder(),e=t.Left,a=t.Right,i=t.BottomEx,r=t.TopEx,n=(I(),null),s=this.HorizontalInfo.length-1;s>=0;--s){var o=this.HorizontalInfo[s];if(o&&o.Message[2]&&o.Message[3]){var h=this.GetYFromData(o.Value);if(!(null!=h&&null!=n&&Math.abs(h-n)<this.MinYDistance)){if(h>=a-2)this.Canvas.textBaseline="top",h=a;else if(h<=e+2){if(this.Canvas.textBaseline="bottom",h=e,null!=h&&Math.abs(h-n)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(o.Message[2]){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="left";var l=h,u=r;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[2],2,0),this.Canvas.restore()}if(o.Message[3]){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="right";l=h,u=i;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[3],-2,0),this.Canvas.restore()}n=h}}}},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=null;for(var n in this.VerticalInfo){var s=this.GetXFromIndex(this.VerticalInfo[n].Value);if(s>i)break;if(!(null!=r&&Math.abs(s-r)<this.MinXDistance)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,F(s)),this.Canvas.lineTo(a,F(s)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor;var o=this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width;s<o/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):s+o/2>=this.ChartBorder.GetChartHeight()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var h=e,l=s;this.Canvas.save(),this.Canvas.translate(h,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}r=s}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightEx,i=t.Top,r=t.Bottom,n=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=(this.ChartBorder.TitleHeight,I());if(n<10*o&&!0===this.IsShowYText[0]||s<10*o&&!0===this.IsShowYText[1]){o=I();for(var h=null,l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],d=this.GetYFromData(c.Value);if(!(null!=d&&null!=h&&Math.abs(d-h)<this.MinYDistance)){if(null!=c.Message[0]&&n<10*o&&!0===this.IsShowYText[0]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=d>=a-2?"top":d<=e+2?"bottom":"middle";this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0];var f=d,C=i;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],2*o,0),this.Canvas.restore(),(null==l||l<f)&&(this.YInsideOffset=this.Canvas.measureText(c.Message[0]).width+4*I(),l=f)}if(null!=c.Message[1]&&s<10*o&&!0===this.IsShowYText[1]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=d>=a-2?"top":d<=e+2?"bottom":"middle";var m=this.Canvas.measureText(c.Message[1]).width;this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[1],f=d,C=r;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[1],-2*o,0),this.Canvas.restore()}h=d}}}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();if(i.DayBorder)return this.GetLeftExtendMultiDayXFromIndex(t,e,i);var r=i.Top,n=this.ChartBorder.LeftExtendWidth,s=r+n*t/a;return s},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.Top,o=r.TopEx,h=o-s,l=s+h*t/n;return l},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Top&&t<=n.TopEx){if(!e[r])return null;var s=e[r].TotalCount-1,o=n.Top,h=n.TopEx,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Top,n=a.TopEx;if(t<=r)return 0;if(t>=n)return i;var s=n-r;return 1*i/s*(t-r)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx,s=n*(t-i.Min)/(i.Max-i.Min);return r.LeftEx+s},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(y,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx;return(t-r.LeftEx)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.BottomEx,o=r.Bottom,h=o-s,l=s+h*t/n;return l},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();if(i.DayBorder)return this.GetRightExtendMultiDayXFromIndex(t,e,i);var r=i.BottomEx,n=this.ChartBorder.RightExtendWidth,s=r+n*t/a;return s},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.BottomEx&&t<=n.Bottom){if(!e[r])return null;var s=e[r].TotalCount-1,o=n.BottomEx,h=n.Bottom,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.BottomEx,n=a.Bottom;if(t<=r)return 0;if(t>=n)return i;var s=n-r;return 1*i/s*(t-r)},this.GetRightExtendYFromData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYFromData(t,e,a):this.GetYFromData(t,e)}}function Y(){this.newMethod=V,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteFrame",this.IsShow=!0,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.DrawToolbar=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function X(){this.newMethod=H,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteHScreenFrame",this.IsShow=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function W(){this.newMethod=G,this.newMethod(),delete this.newMethod,this.ClassName="KLineFrame",this.ToolbarID=b(),this.ModifyIndex=xi.KLineToolbar.ModifyIndex,this.ChangeIndex=xi.KLineToolbar.ChangeIndex,this.CloseIndex=xi.KLineToolbar.CloseIndex,this.OverlayIndex=xi.KLineToolbar.OverlayIndex,this.MaxMinWindow=xi.KLineToolbar.MaxMinWindow,this.TitleWindow=xi.KLineToolbar.TitleWindow,this.ExportData=xi.KLineToolbar.ExportData,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.ReDrawToolbar=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.CustomHorizontalInfo=[],this.IsDrawTitleBG=!1,this.IsShowNameArrow=!1,this.CustomVerticalInfo=[],this.DrawCustomVerticalEvent,this.RightSpaceCount=0,this.Logarithmic=null,this.CustomToolbar=[],this.ToolbarType=0,this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&!0!==xi.IsDOMFrameToolbar&&"undefined"!=typeof $&&this.ChartBorder.UIElement&&this.ChartBorder.UIElement.parentNode){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar)if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex||ze.IsNonEmptyArray(this.CustomToolbar)){var e=I(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var s="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span><span class='index_overlay icon iconfont icon-overlay_index' id='overlayindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='叠加指标'></span>";if(0!==this.Identify&&this.CloseIndex&&(s+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),ze.IsNonEmptyArray(this.CustomToolbar))for(var o=0;o<this.CustomToolbar.length;++o){var h=this.CustomToolbar[o];s+=h.Html}t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=s;this.ChartBorder.UIElement.JSChartContainer,this.Identify;if(this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&$("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):$("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&$("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):$("#"+t.id+" .index_change").hide(),this.OverlayIndex?$("#"+t.id+" .index_overlay").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!0},this.ChangeIndexEvent):$("#"+t.id+" .index_overlay").hide(),$("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},(function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)})),ze.IsNonEmptyArray(this.CustomToolbar))for(o=0;o<this.CustomToolbar.length;++o){h=this.CustomToolbar[o];$("#"+h.ID).click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,ID:h.ID},h.Click)}t.style.display="block"}}else"none"!=t.style.display&&(t.style.display="none")}},this.DrawToolbarV2=function(t,e){if(!0!==xi.IsDOMFrameToolbar&&(this.Buttons=[],this.LeftButtonWidth=0,1!=this.IsMinSize&&!(this.ChartBorder.TitleHeight<5))){var a=[];if(this.CloseIndex&&0!==this.Identify&&a.push({ID:p.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&0!=this.Identify&&a.push({ID:p.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&0!=this.Identify&&a.push({ID:p.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:p.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:p.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:p.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:p.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),ze.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];if(r.ID&&r.Style){var n={ID:r.ID,Style:r.Style,TooltipText:r.TooltipText};!0===r.IsLeft||a.push(n)}}if(this.GetEventCallback){var s=this.GetEventCallback(C.ON_CUSTOM_RIGHT_TOOLBAR);if(s&&s.Callback){var o={PreventDefault:!1,DefaultButton:a,AryButton:null,FrameID:this.Identify};if(s.Callback(s,o,this),o.PreventDefault)return void this.DrawTitleButton(o.AryButton,t,e)}}this.DrawTitleButton(a,t,e)}},this.GetLeftToolbar=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(C.ON_CUSTOM_LEFT_TOOLBAR);if(e&&e.Callback){var a={PreventDefault:!1,AryButton:null,FrameID:this.Identify};if(t&&(t.Overlay&&(a.Title=t.Overlay.Title),t.OverlayID&&(a.OverlayID=t.OverlayID)),e.Callback(e,a,this),a.PreventDefault)return a.AryButton}}if(!ze.IsNonEmptyArray(this.CustomToolbar))return null;for(var i=[],r=0;r<this.CustomToolbar.length;++r){var n=this.CustomToolbar[r];if(n.ID&&n.Style){var s={ID:n.ID,Style:n.Style,TooltipText:n.TooltipText};!0===n.IsLeft&&i.push(s)}}return i},this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),1==this.SizeChange&&(this.CalculateDataWidth(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate()),this.BeforeDrawXYCallback&&this.BeforeDrawXYCallback(this),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.GetXFromIndex=function(t,e){if(!1===e)if(t>=0)for(var a=this.ChartBorder.GetLeft()+xi.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;else{a=this.ChartBorder.GetLeft()-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth);var r=Math.abs(t);for(i=1;i<r;++i)a-=this.DistanceWidth+this.DataWidth}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(a=this.ChartBorder.GetLeft()+xi.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth}return a},this.GetXData=function(t,e){var a=this.DistanceWidth,i=this.DataWidth,r=this.ChartBorder.GetLeft()+xi.FrameLeftMargin;if(0==e){if(t<this.ChartBorder.GetLeft()){var n=-1,s=this.ChartBorder.GetLeft()-(a/2+i+a);while(n>-1e4){if(s<=t)break;s-=i+a,--n}return n}n=0,s=r+a/2+i+a;while(n<1e4){if(s>=t)break;s+=i+a,++n}return n}if(t<=this.ChartBorder.GetLeft())return 0;if(t>=this.ChartBorder.GetRight())return this.XPointCount-1;var o=this.ChartBorder.GetRight()-xi.FrameRightMargin;n=0,s=r+a/2+i+a;while(s<o&&n<1e4&&n+1<this.XPointCount){if(s>=t)break;s+=i+a,++n}return n},this.CalculateDataWidth=function(){if(!(this.XPointCount<2)){var t=this.GetFrameWidth()-xi.FrameMargin;if(this.ZoomIndex>=0&&this.LastCalculateStatus.Width==t&&this.LastCalculateStatus.XPointCount==this.XPointCount){var e=this.DistanceWidth/2+xi.FrameLeftMargin+(this.DataWidth+this.DistanceWidth)*(this.XPointCount-1);this.DataWidth,this.DistanceWidth,this.XPointCount;if(e<=t)return}this.LastCalculateStatus.Width=t,this.LastCalculateStatus.XPointCount=this.XPointCount;for(var a=0;a<gt.length;++a)if((gt[a][0]+gt[a][1])*this.XPointCount<t)return this.ZoomIndex=a,this.DataWidth=gt[a][0],this.DistanceWidth=gt[a][1],this.TrimKLineDataWidth(t),void l.Chart.Log("[KLineFrame::CalculateDataWidth] ZOOM_SEED, DataWidth, DistanceWidth, XPointCount",gt[this.ZoomIndex],this.DataWidth,this.DistanceWidth,this.XPointCount);this.ZoomIndex=gt.length-1,this.DataWidth=t/this.XPointCount,this.DistanceWidth=0}},this.OnSize=function(t){for(var e=this.GetFrameWidth()-xi.FrameMargin,a=0,i=this.DistanceWidth/2+xi.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);i<e;i+=this.DataWidth+this.DistanceWidth,++a);return t.CurCount=this.XPointCount,t.CalcCount=a,t.DataWidth=this.DataWidth,t.DistanceWidth=this.DistanceWidth,t.Changed=!1,this.LastCalculateStatus.Width=e,t.CurCount==t.CalcCount||(this.XPointCount=a,this.LastCalculateStatus.XPointCount=this.XPointCount,this.Data&&(this.Data.DataOffset+=t.CurCount-t.CalcCount,this.Data.DataOffset<0&&(this.Data.DataOffset=0),t.Changed=!0)),t},this.SetDataWidth=function(t){var e=gt.length-1;for(var a in gt){var i=gt[a];if(i[0]<=t){e=parseInt(a)-1;break}}this.ZoomIndex=e,this.DataWidth=gt[this.ZoomIndex][0],this.DistanceWidth=gt[this.ZoomIndex][1];for(var r=this.GetFrameWidth()-xi.FrameMargin,n=0,s=this.DistanceWidth/2+xi.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);s<=r;s+=this.DataWidth+this.DistanceWidth,++n);this.XPointCount=n,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=r;var o={XPointCount:this.XPointCount,DataWidth:this.DataWidth,DistanceWidth:this.DistanceWidth};return o},this.TrimKLineDataWidth=function(t){var e=gt[this.ZoomIndex][0],a=gt[this.ZoomIndex][1];if(1!=e||0!=a)while(1){if((this.DistanceWidth+this.DataWidth)*this.XPointCount+this.DistanceWidth>t){this.DistanceWidth-=.01;break}this.DistanceWidth+=.01}else this.DataWidth=t/this.XPointCount},this.IsOverlayMaxMin=function(t){if(!this.ChartKLine)return!1;if(!this.ChartKLine.Max||!this.ChartKLine.Min)return!1;var e=this.Canvas.measureText(t.Text.Value).width+4;"right"===t.Text.TextAlign&&(t.X-=e);var a=this.ChartKLine.Max,i=this.ChartKLine.Min,r=!1,n=!1;if(a.X>=t.X&&a.X<=t.X+e){var s=a.Y+20,o=a.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(r=!0)}if(1==r)return!0;if(i.X>=t.X&&i.X<=t.X+e){s=i.Y+20,o=i.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(n=!0)}return r||n},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate())},this.SplitLogarithmicXYCoordinate=function(){for(var t=this.Logarithmic.Up,e=this.Logarithmic.Down,a=0,i=0,r=Math.max(t.length,e.length),n=[],s=0;s<r;++s)n[s]=2*s;s=0;for(var o=n.length-1;s<t.length;++s,--o){var h=t[s];h.LogHeight=n[o],a+=h.LogHeight,++i}for(s=0,o=n.length-1;s<e.length;++s,--o){h=e[s];h.LogHeight=n[o],a+=h.LogHeight,++i}var u=2*I(),c=this.ChartBorder.GetTopEx(),d=this.ChartBorder.GetBottomEx(),f=d-c,C=(f-a*u)/i;if(C<0&&(C=0,u=f/a),1==this.CoordinateType){var m=c;for(s=e.length-1;s>=0;--s){h=e[s];h.Height=C+u*h.LogHeight,h.Top=m,h.Bottom=h.Top+h.Height,m=h.Bottom}var D=d;for(s=t.length-1;s>=0;--s){h=t[s];h.Height=C+u*h.LogHeight,h.Bottom=D,h.Top=D-h.Height,D=h.Top}}else{for(m=c,s=t.length-1;s>=0;--s){h=t[s];h.Height=C+u*h.LogHeight,h.Top=m,h.Bottom=h.Top+h.Height,m=h.Bottom}for(D=d,s=e.length-1;s>=0;--s){h=e[s];h.Height=C+u*h.LogHeight,h.Bottom=D,h.Top=D-h.Height,D=h.Top}}l.Chart.Log("[KLineFrame::SplitLogarithmicXYCoordinate]",this.Logarithmic)},this.GetYLogarithmicFromData=function(t,e){if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){var r=a[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Top+s}}}else{var o=this.Logarithmic.Down;for(var i in o){r=o[i];if(t>=r.Start&&t<=r.End){n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Top+s}}}}else{if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();if(t>this.Logarithmic.OpenPrice){a=this.Logarithmic.Up;for(var i in a){r=a[i];if(t>=r.Start&&t<=r.End){n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-s}}}else{o=this.Logarithmic.Down;for(var i in o){r=o[i];if(t>=r.Start&&t<=r.End){n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-s}}}}},this.GetYLogarithmicData=function(t){if(1==this.CoordinateType){if(t<this.ChartBorder.GetTopEx())return this.HorizontalMin;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMax;var e=this.Logarithmic.Up;for(var a in e){var i=e[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}var r=this.Logarithmic.Down;for(var a in r){i=r[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}}else{if(t<this.ChartBorder.GetTopEx())return this.HorizontalMax;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMin;e=this.Logarithmic.Up;for(var a in e){i=e[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}r=this.Logarithmic.Down;for(var a in r){i=r[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}}},this.CalculateCount=function(t){var e=gt[t][0],a=gt[t][1],i=this.GetFrameWidth()-xi.FrameMargin-a/2;return parseInt(i/(e+a))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1,n=this.Data.DataOffset+t.Index;r>=e&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var s=this.CalculateCount(this.ZoomIndex-1);l.Chart.Log("[KLineFrame::ZoomUp] old status. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(this.Data.Data.length," rightSpaceCount=").concat(i));var o=!1;if(--this.ZoomIndex,1==t.IsLockRight){var h=this.Data.DataOffset+this.XPointCount;if(s>h)s=h,this.XPointCount=s,this.Data.DataOffset=0;else{var u=r-(s-i)+1;this.XPointCount=s,this.Data.DataOffset=u,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(s>=a)this.Data.DataOffset=0,this.XPointCount=s,o=!0,l.Chart.Log("[KLineFrame::ZoomUp] Show all data. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(e));else{u=r-(s-i)+1;if(1==t.ZoomType){var c=this.XPointCount-s+1,d=parseInt(t.Index/this.XPointCount*c),f=this.Data.DataOffset+d;f<e&&(u=this.Data.DataOffset+d)}this.XPointCount=s,this.Data.DataOffset=u,this.Data.DataOffset<0&&(this.Data.DataOffset=0),l.Chart.Log("[KLineFrame::ZoomUp] calculate. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(e," DataOffset=").concat(this.Data.DataOffset))}if(this.DataWidth=gt[this.ZoomIndex][0],this.DistanceWidth=gt[this.ZoomIndex][1],!o){var C=this.GetFrameWidth()-xi.FrameMargin;this.TrimKLineDataWidth(C)}return this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=n-this.Data.DataOffset,!0},this.SetXShowCount=function(t){for(var e=-1,a=this.GetFrameWidth()-xi.FrameMargin,i=0;i<gt.length;++i){var r=gt[i],n=r[0],s=r[1],o=(a=this.GetFrameWidth()-xi.FrameMargin-s/2,parseInt((a-s/2)/(n+s)));if(o>=t)return e=i,this.XPointCount=t,this.ZoomIndex=e,this.DataWidth=n,this.DistanceWidth=s,1==n&&0==s&&(this.DataWidth=a/this.XPointCount),this.LastCalculateStatus.XPointCount=this.XPointCount,void(this.LastCalculateStatus.Width=a)}this.XPointCount=t,this.ZoomIndex=gt.length-1,this.DataWidth=a/this.XPointCount,this.DistanceWidth=0,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=a},this.XCoordinateZoom=function(t){var e=this.XPointCount;if(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex-1,i=this.CalculateCount(a),r=this.Data.Data.length,n=e-i;if(n<=0)return!1;this.Data.DataOffset+=n,this.Data.DataOffset>r&&(this.Data.DataOffset=0)}else{if(this.ZoomIndex+1>=gt.length)return!1;if(this.Data.DataOffset<0)return!1;a=this.ZoomIndex+1,i=this.CalculateCount(a),n=i-e;this.Data.DataOffset-=n,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}this.XPointCount=i,this.ZoomIndex=a,this.DataWidth=gt[this.ZoomIndex][0],this.DistanceWidth=gt[this.ZoomIndex][1];var s=this.GetFrameWidth()-xi.FrameMargin;return this.TrimKLineDataWidth(s),this.LastCalculateStatus.XPointCount=this.XPointCount,!0},this.ZoomDown=function(t,e){if(this.ZoomIndex+1>=gt.length)return!1;if(this.Data.DataOffset<0)return!1;if(this.Data.DataOffset<=0&&1==t.IsLockRight)return!1;var a=this.Data.Data.length,i=a+this.RightSpaceCount,r=0,n=this.Data.DataOffset+this.XPointCount-1;n>=this.Data.Data.length&&(r=n-(this.Data.Data.length-1),n=this.Data.Data.length-1,r>this.RightSpaceCount&&(r=this.RightSpaceCount));var s=this.CalculateCount(this.ZoomIndex+1),o=this.Data.DataOffset+t.Index;l.Chart.Log("[KLineFrame::ZoomDown] old status. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(this.Data.Data.length," lastCursorIndex=").concat(o," rightSpaceCount=").concat(r));if(++this.ZoomIndex,1==t.IsLockRight){var h=this.Data.DataOffset+this.XPointCount;if(s>h)s=h,this.XPointCount=s,this.Data.DataOffset=0;else{var u=n-(s-r)+1;this.XPointCount=s,this.Data.DataOffset=u,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(s>=i)this.XPointCount=s,this.Data.DataOffset=0,l.Chart.Log("[KLineFrame::ZoomDown] Show all data. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(a)),s-this.RightSpaceCount>a&&e&&e.ZoomDownloadDataCallback&&e.ZoomDownloadDataCallback({PageSize:s,DataCount:a,RightSpaceCount:this.RightSpaceCount,Count:s-a});else{u=n-(s-r)+1;if(1==t.ZoomType){var c=s-this.XPointCount+1,d=parseInt(t.Index/this.XPointCount*c);u=this.Data.DataOffset-d;u+(s-this.RightSpaceCount)>=a&&(u=this.Data.DataOffset-c)}this.XPointCount=s,this.Data.DataOffset=u,this.Data.DataOffset<0&&(this.Data.DataOffset=0),l.Chart.Log("[KLineFrame::ZoomDown] calculate. XPointCount=".concat(s," ZoomIndex=").concat(this.ZoomIndex," DataCount= ").concat(a," DataOffset=").concat(this.Data.DataOffset))}this.DataWidth=gt[this.ZoomIndex][0],this.DistanceWidth=gt[this.ZoomIndex][1];var f=this.GetFrameWidth()-xi.FrameMargin;return this.TrimKLineDataWidth(f),this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=o-this.Data.DataOffset,!0},this.GetFrameWidth=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.BottomEx-t.TopEx}t=this.ChartBorder.GetBorder();return t.RightEx-t.LeftEx},this.DrawCustomHorizontal=function(){if(!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&ze.IsNonEmptyArray(this.CustomHorizontalInfo)){var t=this.CustomHorizontalInfo.slice();t.sort((function(t,e){return e.Value-t.Value}));for(var e=new Map,a=0;a<t.length;++a){var i=t[a];switch(i.Type){case 0:case 1:this.DrawCustomItem(i,e);break;case 2:case 3:case 4:this.DrawCustomItem(i,e);break}}}},this.DrawCustomVerticalItem=function(t){this.Canvas.save(),1==t.Data.Line.Type&&this.Canvas.setLineDash([5,5]),this.Canvas.strokeStyle=t.Data.Line.Color,this.Canvas.beginPath(),t.IsHScreen?(this.Canvas.moveTo(t.Top,F(t.X)),this.Canvas.lineTo(t.Bottom,F(t.X))):(this.Canvas.moveTo(F(t.X),t.Top),this.Canvas.lineTo(F(t.X),t.Bottom)),this.Canvas.stroke(),this.Canvas.restore()},this.DrawCustomVertical=function(){if(this.CustomVerticalInfo&&!(this.CustomVerticalInfo.length<=0)&&this.Data){var t=this.IsHScreen,e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetBottomEx(),i=this.DataWidth,r=this.DistanceWidth,n=this.ChartBorder.GetLeft()+r/2+2;t&&(n=this.ChartBorder.GetTop()+r/2+2,e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx());for(var s=0,o=this.Data.DataOffset;o<this.Data.Data.length&&s<this.XPointCount;++o,++s,n+=i+r){var h=this.Data.Data[o];for(var l in this.CustomVerticalInfo){var u=this.CustomVerticalInfo[l];if(0==u.Type){if(ze.IsNumber(u.Time)){if(h.Date!=u.Date||h.Time!=u.Time)continue}else if(h.Date!=u.Date)continue;var c=n,d=n+i,f=c+(d-c)/2,C={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(C),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,C,this);break}}}for(o=1;s<this.XPointCount;++o,++s,n+=i+r)for(var l in this.CustomVerticalInfo){u=this.CustomVerticalInfo[l];if(1==u.Type&&u.Space==o){c=n,d=n+i,f=c+(d-c)/2,C={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(C),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,C,this);break}}}}}function U(){this.newMethod=W,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=xi.OverlayFrame.BolderPen,this.IsShow=xi.KLineToolbar.IsShowOverlayFrame,this.IsShowToolbar=xi.KLineToolbar.IsShowOverlayToolbar,this.Title=null,this.TitleColor=xi.OverlayFrame.TitleColor,this.TitleFont=xi.OverlayFrame.TitleFont,this.IsYDrawMainFrame=!1,this.Buttons=[],this.CloseButton=E(xi.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=E(xi.Buttons.ModifyIndexParam),this.KLineFrame_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.KLineFrame_ReloadResource(t),t||(this.CloseButton=E(xi.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=E(xi.Buttons.ModifyIndexParam),this.PenBorder=xi.OverlayFrame.BolderPen,this.TitleColor=xi.OverlayFrame.TitleColor,this.TitleFont=xi.OverlayFrame.TitleFont)},this.Draw=function(){this.Buttons=[],this.ChartBorder.IsShowTitleOnly||(this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1)},this.DrawTitle=function(){if(this.Title){var t=this.ChartBorder.GetBorder(),e=this.ChartBorder.GetTopTitle(),a=t.Bottom,i=t.Right;i+=this.RightOffset,this.Canvas.fillStyle=this.TitleColor,this.Canvas.font=this.TitleFont,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var r=i-2,n=e+(a-e)/2;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}},this.GetScaleTextWidth=function(){if(!this.IsShow)return null;this.ChartBorder.GetBorder();var t=I();if(this.IsHScreen)var e=this.ChartBorder.Bottom,a=e>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else{var i=this.ChartBorder.Right;a=i>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1]}if(!a)return null;for(var r={Left:null,Right:0},n=0;n<this.HorizontalInfo.length;++n){var s=null,o=this.HorizontalInfo[n];o&&(null!=o.Message[1]&&a&&(null!=o.Font&&(this.Canvas.font=o.Font),s=this.Canvas.measureText(o.Message[1]).width,r.Right<s&&(r.Right=s)))}return{TextWidth:r}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}this.CoordinateType=this.MainFrame.CoordinateType}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){var t=this.ChartBorder.GetBorder(),e=(t.Left,t.Right),a=t.Bottom,i=this.ChartBorder.GetTopTitle(),r=this.ChartBorder.Right;e+=this.RightOffset;for(var n=null,s=this.HorizontalInfo.length-1;s>=0;--s){var o=this.HorizontalInfo[s],h=this.GetYFromData(o.Value);if(!(null!=h&&Math.abs(h-n)<this.MinYDistance)){if(this.Canvas.textBaseline=h>=a-2?"bottom":h<=i+2?"top":"middle",this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e-2,F(h)),this.Canvas.lineTo(e,F(h)),this.Canvas.stroke(),null!=o.Message[1]&&r>10){null!=o.Font&&(this.Canvas.font=o.Font);var l=o.Message[1];Array.isArray(o.Message[1])&&(l=o.Message[1][0]),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(l,e+2,h)}n=h}}},this.DrawVertical=function(){var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.Right,i=t.BottomEx;a+=this.RightOffset,this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(F(a),F(e)),this.Canvas.lineTo(F(a),F(i)),this.Canvas.stroke()},this.DrawToolbar=function(t,e,a){if(this.Buttons=[],1!=e&&!this.ChartBorder.IsShowTitleOnly&&!(this.ChartBorder.TitleHeight<5)&&this.IsShowToolbar){var i=this.ChartBorder.GetBorder(),r=i.Top+this.ChartBorder.TitleHeight/2,n=i.Right+this.RightOffset+this.CloseButton.MerginLeft,s=[];s.push({ID:p.MODIFY_OVERLAY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),s.push({ID:p.CLOSE_OVERLAY_INDEX,Style:this.CloseWindowButton});for(var o=0;o<s.length;++o){var h=s[o],l=h.Style.Size,u="".concat(l,"px ").concat(h.Style.Family),c={Left:n,Top:r-l/2,Right:n+l+h.Style.MerginLeft,Bottom:r+l/2,Width:l+h.Style.MerginLeft,Height:l},d=this.CloseButton.Color;t&&t.X>=c.Left&&t.X<c.Right&&t.Y>=c.Top&&t.Y<=c.Bottom&&(d=h.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:c,Item:h,Frame:this,Point:{X:t.X,Y:t.Y}})),this.Canvas.fillStyle=d,this.Canvas.font=u,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(h.Style.Text,n,r),this.Buttons.push({ID:h.ID,Rect:c}),n=c.Right}}},this.DrawCustomItem=function(t,e){if((this.IsShow||this.IsYDrawMainFrame)&&(t.Message[1]||t.Message[0]))if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)this.SendDrawCountDownEvent({IsShow:!1});else{var a=this.GetBorder(),i=a.Left,r=a.Right+this.RightOffset;this.IsYDrawMainFrame&&(r=a.Right);var n=a.Bottom,s=a.Top,o=this.ChartBorder.Right,h=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(h=this.ChartBorder.Top,o=this.ChartBorder.Bottom,s=a.Top,n=a.Bottom);var l,u=I(),c=18*u,d=c,f=this.GetYFromData(t.Value),C=0;if(t.ExtendData&&t.ExtendData.Custom){var m=t.ExtendData.Custom;ze.IsNumber(m.Position)&&(C=m.Position),m.EmptyBGColor&&(l=m.EmptyBGColor)}if(t.Message[0])if(h<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var D=this.GetCustomItemTextInfo(t,!0,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;var g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));for(var T=f,x=0;x<D.Text.length;++x){var y=D.Text[x];if(this.IsHScreen){var A=s,b=T-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(A+y.Width,n,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type);else{A=T-d/2-1*u,b=i+1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T),0==x&&this.DrawLine(b+y.Width,r,T,t.LineColor,t.LineType,t),T+=d+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!0,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;for(T=f,x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){if(0==x)A=s-y.Width;else A=s-p;b=T-d/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(A+y.Width,n,T,t.LineColor,t.LineType,t),T-=d+1*u}else{A=T-d/2-1*u;if(0==x){var w=i-y.Width;b=i}else w=i-p,b=i-(p-y.Width);l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(w-1,A,y.Width+1,d),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(F(w-1),F(A),F(y.Width+1),F(d)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(y.Text,b-1*u,T)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(w,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b-1*u,T)),0==x&&this.DrawLine(i,r,T,t.LineColor,t.LineType,t),T+=d+1*u}}}else if(t.Message[1])if(o<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!1,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));for(T=f,x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){A=n-y.Width,b=T-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,p),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(s,A,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type){if(this.GetEventCallback){A=T-d/2-1*u;var M={Top:A,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(M)&&ze.IsPlusNumber(M.Height)&&(T+=d+1*u)}}else{A=T-d/2-1*u,b=r-y.Width;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,p,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T),0==x&&this.DrawLine(i,b,T,t.LineColor,t.LineType,t),T+=d+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var E=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){A=n-y.Width-E,b=f-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,E),this.DrawHScreenText({X:f,Y:A},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{A=f-d/2-1*u,b=r-p-E-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,E,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,b+1*u,f)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";D=this.GetCustomItemTextInfo(t,!1,u),p=D.MaxWidth,v=this.GetFontHeight();d=v>c?v:c;var N=null;e&&e.has(3)&&(N=e.get(3));T=f;var P={};for(x=0;x<D.Text.length;++x){y=D.Text[x];if(this.IsHScreen){A=n,b=T-d/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,d,y.Width),this.DrawHScreenText({X:T,Y:A},{Text:y.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==x&&this.DrawLine(s,A,T,t.LineColor,t.LineType,t),T-=d+1*u}else if(1===y.Type){if(this.GetEventCallback){A=T-d/2-1*u,M={Top:A,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(M)&&ze.IsPlusNumber(M.Height)&&(T+=d+1*u)}}else{A=T-d/2-1*u;if(0==x){b=r;P.Left=b,N&&A<N.Rect.Bottom&&(T=N.Rect.Bottom,A=T-d/2-1*u)}else b=r+p-y.Width;l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(b,A,y.Width+1,d),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(F(b),F(A),L(y.Width+1),L(d)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(y.Text,b+2*u,T)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(b,A,y.Width,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(y.Text,b+1*u,T)),0==x&&this.DrawLine(i,r,f,t.LineColor,t.LineType,t),T+=d+1*u,P.Bottom=T}}if(e&&ze.IsNumber(P.Left)&&ze.IsNumber(P.Bottom)&&e.set(3,{Rect:P,Item:t}),(3==t.Type||4==t.Type)&&t.Title){g=t.LineColor,S=this.RGBToStruct(t.LineColor);S&&(g="rgba(".concat(S.R,", ").concat(S.G,", ").concat(S.B,", ").concat(xi.FrameLatestPrice.BGAlpha,")"));E=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){A=n-E,b=f-d/2-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,d,E),this.DrawHScreenText({X:f,Y:A},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{A=f-d/2-1*u,b=r-E-1*u;this.Canvas.fillStyle=g,this.Canvas.fillRect(b,A,E,d),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,b+1*u,f)}}}}}}function z(){this.newMethod=W,this.newMethod(),delete this.newMethod,this.ClassName="KLineHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=F(t.RightTitle),a=F(t.Top),i=F(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.GetYFromData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i}if(t<=this.HorizontalMin)return a.LeftEx;if(t>=this.HorizontalMax)return a.RightEx;i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=this.ChartBorder.Top,r=this.ChartBorder.Bottom,n=t.Left,s=(t.Right,null),o=I(),h=i>10*o&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],l=r>10*o&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],d=this.GetYFromData(c.Value);if(!(null!=d&&Math.abs(d-s)<this.MinYDistance)){if(d!=n&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*o,5*o]),this.Canvas.beginPath(),this.Canvas.moveTo(F(d),e),this.Canvas.lineTo(F(d),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):c.LineType>0&&(this.Canvas.strokeStyle=c.LineColor,xi.FrameYLineDash?(this.Canvas.setLineDash(xi.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(F(d),e),this.Canvas.lineTo(F(d),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(F(d),e),this.Canvas.lineTo(F(d),a),this.Canvas.stroke()))),null!=c.Message[0]&&h){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var f=d,C=e;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&l){var m;null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",m=Array.isArray(c.Message[1])?c.Message[1][0]:c.Message[1];f=d,C=a;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,2,0),this.Canvas.restore()}s=d}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightEx(),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.Top,n=this.ChartBorder.Bottom,s=(this.ChartBorder.TitleHeight,I()),o=(r<10*s||2==this.YTextPosition[0])&&!0===this.IsShowYText[0],h=(n<10*s||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(o||h){s=I();for(var l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],d=this.GetYFromData(c.Value);if(!(null!=d&&null!=l&&Math.abs(d-l)<this.MinYDistance)){if(null!=c.Message[0]&&o){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=d>=e-2?"top":d<=t+2?"bottom":"middle";this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0];var f=d,C=a;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&h){if(null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=d>=e-2?"top":d<=t+2?"bottom":"middle",Array.isArray(c.Message[1]))var m=c.Message[1][0];else m=c.Message[1];var D=this.Canvas.measureText(m).width;this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,f=d,C=i;this.Canvas.save(),this.Canvas.translate(f,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,-2,0),this.Canvas.restore()}l=d}}}}},this.GetXFromIndex=function(t,e){if(!1===e){var a=this.ChartBorder.GetHScreenBorder();if(t>=0)for(var i=a.TopEx+xi.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth;else{i=a.TopEx-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth);var n=Math.abs(t);for(r=1;r<n;++r)i-=this.DistanceWidth+this.DataWidth}}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+xi.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth}return i},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightTitle,i=t.Bottom,r=I(),n=null;for(var s in this.VerticalInfo){var o=this.GetXFromIndex(this.VerticalInfo[s].Value);if(o>=i)break;if(!(null!=n&&Math.abs(o-n)<80)){var h=this.VerticalInfo[s];if(2==h.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(e,F(o)),this.Canvas.lineTo(a,F(o)),this.Canvas.stroke(),this.Canvas.setLineDash([])):h.LineType>0&&(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,xi.FrameXLineDash?(this.Canvas.setLineDash(xi.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(e,F(o)),this.Canvas.lineTo(a,F(o)),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(e,F(o)),this.Canvas.lineTo(a,F(o)),this.Canvas.stroke())),null!=this.VerticalInfo[s].Message[0]){null!=this.VerticalInfo[s].Font&&(this.Canvas.font=this.VerticalInfo[s].Font),this.Canvas.fillStyle=this.VerticalInfo[s].TextColor;var l=this.Canvas.measureText(this.VerticalInfo[s].Message[0]).width;o<l/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var u=e,c=o;this.Canvas.save(),this.Canvas.translate(u,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[s].Message[0],0,this.XBottomOffset),this.Canvas.restore()}n=o}}},this.GetYData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin}if(t<a.LeftEx)return this.HorizontalMin;if(t>a.RightEx)return this.HorizontalMax;i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+xi.FrameLeftMargin,r=a.BottomEx,n=this.DistanceWidth,s=this.DataWidth;if(0==e){if(t<i){var o=-1,h=i-(n/2+s+n);while(o>-1e4){if(h<=t)break;h-=s+n,--o}return o}o=0,h=i+n/2+s+n;while(o<1e4){if(h>=t)break;h+=s+n,++o}return o}if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return this.XPointCount-1;o=0,h=i+n/2+s+n;while(h<r&&o<1e4&&o+1<this.XPointCount){if(h>t)break;h+=s+n,++o}return o},this.DrawBottons=function(){}}function K(){this.newMethod=z,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineHScreenFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=xi.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=xi.OverlayFrame.TitleColor,this.TitleFont=xi.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){},this.DrawVertical=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}}}function J(){this.Frame,this.Height,this.OverlayIndex=[],this.Interval=60}function Q(){this.Frame,this.ChartPaint=[],this.Identify=b(),this.Scprit,this.UpdateFrameMaxMin=function(){var t={Max:null,Min:null};if(this.Frame.IsShareY)this.Frame.XYSplit=!0;else{if(this.Frame.YSpecificMaxMin)t.Max=this.Frame.YSpecificMaxMin.Max,t.Min=this.Frame.YSpecificMaxMin.Min;else for(var e in this.ChartPaint){var a=this.ChartPaint[e],i=a.GetMaxMin();ze.IsNumber(i.Max)&&(null==t.Max||t.Max<i.Max)&&(t.Max=i.Max),ze.IsNumber(i.Min)&&(null==t.Min||t.Min>i.Min)&&(t.Min=i.Min)}null!=t.Max&&null!=t.Min&&(this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.XYSplit=!0)}}}function Z(){this.SubFrame=new Array,this.SizeChange=!0,this.ChartBorder,this.Canvas,this.ScreenImageData,this.Data,this.Position,this.SizeChange=!0,this.MinSubFrameHeight=xi.DragSubFrameBorder.MinFrameHeight,this.DragBorderHeight=xi.DragSubFrameBorder.TopBorderHeight,this.AutoLeftBorder=null,this.AutoRightBorder=null,this.OverlayBlankWidth=40,this.AuotRightWidth,this.ZoomWindowsInfo=null,this.ZoomStartWindowIndex=1,this.GetExtendChartByClassName,this.GetEventCallback,this.OnMoveFromeBorder=function(t,e){if(this.SubFrame.length<=0)return!1;for(var a=this.SubFrame[t],i=null,r=t+1;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(n.Height>0){i=n;break}}if(!a||!i)return!1;var s=a.Frame.ChartBorder.Bottom,o=i.Frame.ChartBorder.Top;a.Frame.ChartBorder.Bottom-=e,i.Frame.ChartBorder.Top+=e;var h=a.Frame.ChartBorder.GetHeightEx(),l=i.Frame.ChartBorder.GetHeightEx();return!(h<this.MinSubFrameHeight&&e<0||l<this.MinSubFrameHeight&&e>0)||(a.Frame.ChartBorder.Bottom=s,i.Frame.ChartBorder.Top=o,!1)},this.ReDrawToolbar=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.ReDrawToolbar=!0},this.SetFrameBorderSizeChange=function(){var t=this.SubFrame[0];if(t&&t.Frame){var e=t.Frame.YSplitOperator;e&&2==e.CoordinateType&&(t.Frame.XYSplit=!0)}},this.CancelZoomUpDownFrameY=function(t){var e=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[e])return!1;var a=this.SubFrame[e],i=a.Frame,r=i.YSplitOperator;if(r.FixedYMaxMin){for(var n in r.FixedYMaxMin=null,r.EnableZoomUpDown=!1,i.XYSplit=!0,a.OverlayIndex){var s=a.OverlayIndex[n];s.Frame.IsShareY&&(s.Frame.XYSplit=!0)}return l.Chart.Log("[HQTradeFrame::CancelZoomUpDownFrameY]"),!0}return!1},this.OnZoomUpDownFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),s=r.ChartBorder.GetBottomEx(),o=r.HorizontalMax,h=r.HorizontalMin,u=(o-h)*Math.abs(e)/(s-n),c=r.YSplitOperator,d={Max:o,Min:h};if(1==t.Position){var f=e>0?-u:u;d.Max+=f}else if(2==t.Position){f=e>0?-u:u;d.Min+=f}else{if(0!=t.Position)return!1;f=e>0?u:-u;d.Max+=f,d.Min-=f}if(d.Max>d.Min){for(var C in c.FixedYMaxMin=d,c.EnableZoomUpDown=!0,r.XYSplit=!0,i.OverlayIndex){var m=i.OverlayIndex[C];m.Frame.IsShareY&&(m.Frame.XYSplit=!0)}return l.Chart.Log("[HQTradeFrame::OnZoomUpDownFrameY] Max=".concat(d.Max,", Min=").concat(d.Min)),!0}return!1},this.OnUpDonwFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),s=r.ChartBorder.GetBottomEx(),o=r.YSplitOperator;if(!o)return!1;var h=r.HorizontalMax,u=r.HorizontalMin,c=(h-u)*Math.abs(e)/(s-n),d=e>0?-c:c,f={Max:h,Min:u};for(var C in f.Max-=d,f.Min-=d,o.FixedYMaxMin=f,o.EnableZoomUpDown=!0,r.XYSplit=!0,i.OverlayIndex){var m=i.OverlayIndex[C];m.Frame.IsShareY&&(m.Frame.XYSplit=!0)}return l.Chart.Log("[HQTradeFrame::OnUpDonwFrameY] Max=".concat(f.Max,", Min=").concat(f.Min,", yMove=").concat(e,", moveStep=").concat(c)),!0},this.ClearUpDonwFrameYData=function(t){if(!(this.SubFrame.length<=0))if(t){var e=t.Index;if(e<0||e>=this.SubFrame.length)return;var a=this.SubFrame[e];if(!a||!a.Frame||!a.Frame.YSplitOperator)return;var i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}else for(var r=0;r<this.SubFrame.length;++r){a=this.SubFrame[r];if(a&&a.Frame&&a.Frame.YSplitOperator){i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}}},this.ClearCoordinateText=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&a.Frame.ClearCoordinateText(t)}},this.RestoreIndexWindows=function(){if(!this.ZoomWindowsInfo)return!1;this.SubFrame[this.ZoomWindowsInfo.FrameID];for(var t=this.ZoomStartWindowIndex;t<this.ZoomWindowsInfo.Data.length;++t){var e=this.ZoomWindowsInfo.Data[t],a=this.SubFrame[t];a.Height=e.Height,a.Frame.IsMinSize=!1,a.Frame.ReDrawToolbar=!0,a.Frame.XSplitOperator.ShowText=e.ShowXText,a.Frame.XYSplit=!0;for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];r.Frame.IsMinSize=!1}}return this.ZoomWindowsInfo=null,!0},this.ZoomIndexWindow=function(t,e){var a=this.SubFrame[t];if(!a)return!1;if(a.Frame.ChartBorder.IsShowTitleOnly=!1,this.ZoomWindowsInfo)return this.RestoreIndexWindows();for(var i={FrameID:t,Data:[]},r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];i.Data[r]={Height:n.Height,ShowXText:n.Frame.XSplitOperator.ShowText}}this.ZoomWindowsInfo=i;var s=0;for(r=this.ZoomStartWindowIndex;r<this.SubFrame.length;++r){n=this.SubFrame[r];var o=n.Frame;if(o.XYSplit=!0,s+=n.Height,r!=t){n.Height=0,o.IsMinSize=!0,o.HideToolbar(),o.XSplitOperator.ShowText=!1;for(var h=0;h<n.OverlayIndex.length;++h){var l=n.OverlayIndex[h];l.Frame.IsMinSize=!0}}}return a.Height=s,a.Frame.XSplitOperator.ShowText=!0,!0},this.SaveSubFrameHeightRate=function(){for(var t=this.ChartBorder.GetHeight(),e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e],i=a.Frame.ChartBorder.GetHeight(),r=i/t*100;a.Height=r}},this.ShowIndexTitleOnly=function(t,e){var a=this.SubFrame[t];if(!a&&!a.Frame)return!1;var i=a.Frame;if(!i.ChartBorder)return!1;var r=i.ChartBorder;return!(r.TitleHeight<10)&&(this.RestoreIndexWindows(),r.IsShowTitleOnly?r.IsShowTitleOnly=!1:r.IsShowTitleOnly=!0,!0)},this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=0,i=0,r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r],s=n.Frame;s&&s.ChartBorder&&s.ChartBorder.IsShowTitleOnly&&n.Height>0?i+=s.ChartBorder.TitleHeight:a+=n.Height}e-=i;for(r=0;r<this.SubFrame.length;++r){n=this.SubFrame[r],s=n.Frame;if(n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,n.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,s&&s.ChartBorder&&s.ChartBorder.IsShowTitleOnly&&n.Height>0){var o=n.Frame.ChartBorder.Top+s.ChartBorder.TitleHeight;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-o,t=o}else{o=e*(n.Height/a)+t;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-o,t=o}}if(this.GetEventCallback){var h=this.GetEventCallback(C.ON_SIZE_FRAME);if(h&&h.Callback){var l={SubFrame:this.SubFrame};h.Callback(h,l,this)}}}},this.SetExtendWidth=function(t){if(t){var e=null,a=null;for(var i in ze.IsNumber(t.Left)&&(e=t.Left,this.ChartBorder.LeftExtendWidth=e),ze.IsNumber(t.Right)&&(a=t.Right,this.ChartBorder.RightExtendWidth=a),this.SubFrame){var r=this.SubFrame[i];null!=e&&(r.Frame.ChartBorder.LeftExtendWidth=e),null!=a&&(r.Frame.ChartBorder.RightExtendWidth=a)}}},this.CalculateChartBorder2=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Top,e=this.ChartBorder.Bottom,a=this.ChartBorder.GetHeight(),i=0;for(var r in this.SubFrame){var n=this.SubFrame[r];i+=n.Height}var s=0;for(var r in this.SubFrame){n=this.SubFrame[r];n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.X=this.ChartBorder.X,n.Frame.ChartBorder.Y=this.ChartBorder.Y,n.Frame.ChartBorder.Width=this.ChartBorder.Width,n.Frame.ChartBorder.Height=this.ChartBorder.Height;var o=a*(n.Height/i);s+=o,e=this.ChartBorder.Bottom+(a-s),n.Frame.ChartBorder.Bottom=e,t+=o}}},this.GetScaleTextWidth=function(){for(var t={Left:null,Right:null,OverlayRight:0},e=[],a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r&&r.XSplitOperator){var n=r.HorizontalMax,s=r.HorizontalMin;r.YSplitOperator.Operator();var o=r.GetScaleTextWidth();if(r.HorizontalMax=n,r.HorizontalMin=s,o&&o.TextWidth){var h=o.TextWidth;ze.IsNumber(h.Left)&&(null==t.Left||t.Left<h.Left)&&(t.Left=h.Left),ze.IsNumber(h.Right)&&(null==t.Right||t.Right<h.Right)&&(t.Right=h.Right)}if(ze.IsNonEmptyArray(i.OverlayIndex))for(var l=0,u=0;l<i.OverlayIndex.length;++l){var c=i.OverlayIndex[l];if(c.Frame){n=c.Frame.HorizontalMax,s=c.Frame.HorizontalMin;c.Frame.YSplitOperator.Operator();o=c.Frame.GetScaleTextWidth();if(c.Frame.HorizontalMax=n,c.Frame.HorizontalMin=s,c.RightWidth={Index:-1,Width:0},o&&o.TextWidth){h=o.TextWidth;ze.IsNumber(h.Right)&&(c.RightWidth.Index=u,c.RightWidth.Width=h.Right,e[u]||(e[u]=[]),e[u][a]=c.RightWidth,++u)}}}}}}var d=[];for(a=0;a<e.length;++a){var f=e[a],C=0;for(l=0;l<f.length;++l)if(f[l]){i=f[l].Width;C<i&&(C=i)}C>0&&(C+=this.OverlayBlankWidth);for(l=0;l<f.length;++l)f[l]&&(f[l].Width=C);d[a]=C}for(a=0;a<d.length;++a){o=d[a];ze.IsNumber(o)&&(t.OverlayRight+=o)}return t},this.IsFrameXYSplit=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];if(e.Frame.XYSplit)return!0;for(var a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];if(i.Frame.XYSplit)return!0}}return!1},this.Draw=function(t){!0===this.SizeChange&&this.CalculateChartBorder();var e=!1;if(t&&!0===t.IsEnableSplash&&(e=!0),0==e&&(this.AutoLeftBorder||this.AutoRightBorder)&&this.IsFrameXYSplit()){this.AutoRightOverlayWidth=[];var a=this.GetScaleTextWidth();if(ze.IsNumber(a.Left)&&this.AutoLeftBorder){var i=0;ze.IsNumber(this.AutoLeftBorder.Blank)&&(i=this.AutoLeftBorder.Blank);var r=a.Left+i;ze.IsNumber(this.AutoLeftBorder.MinWidth)&&this.AutoLeftBorder.MinWidth>r&&(r=this.AutoLeftBorder.MinWidth),this.IsHScreen?this.ChartBorder.Top=r:this.ChartBorder.Left=r;for(var n=0;n<this.SubFrame.length;++n){var s=this.SubFrame[n];this.IsHScreen?s.Frame.ChartBorder.Top=r:s.Frame.ChartBorder.Left=r}}if(ze.IsNumber(a.Right)&&this.AutoRightBorder){i=0;ze.IsNumber(this.AutoRightBorder.Blank)&&(i=this.AutoRightBorder.Blank);r=a.Right+i;if(ze.IsNumber(this.AutoRightBorder.MinWidth)&&this.AutoRightBorder.MinWidth>r&&(r=this.AutoRightBorder.MinWidth),this.AuotRightWidth=r,ze.IsPlusNumber(a.OverlayRight)&&(r+=this.OverlayBlankWidth,this.AuotRightWidth=r,r+=a.OverlayRight),this.GetExtendChartRightWidth){var o=this.GetExtendChartRightWidth();if(this.GetExtendChartByClassName){var h=this.GetExtendChartByClassName("StockChip");h&&h.Chart&&(h.Chart.Left=r)}r+=o}this.IsHScreen?(this.ChartBorder.Bottom!=r&&!0,this.ChartBorder.Bottom=r):(this.ChartBorder.Right!=r&&!0,this.ChartBorder.Right=r);for(n=0;n<this.SubFrame.length;++n){s=this.SubFrame[n];this.IsHScreen?s.Frame.ChartBorder.Bottom=r:s.Frame.ChartBorder.Right=r,s.Frame.ReDrawToolbar=!0,s.Interval=this.AuotRightWidth}}this.SetSizeChage(!0)}for(n=0;n<this.SubFrame.length;++n){s=this.SubFrame[n];if(!(s.Height<=0))if(s.Frame.Draw(),this.AutoRightBorder)for(var l=this.AuotRightWidth,u=0;u<s.OverlayIndex.length;++u){var c=s.OverlayIndex[u];c.Frame.DataWidth=s.Frame.DataWidth,c.Frame.DistanceWidth=s.Frame.DistanceWidth,c.Frame.XPointCount=s.Frame.XPointCount,c.ChartPaint.length>0&&c.Frame&&(c.Frame.RightOffset=l,c.Frame.Draw(),l+=c.RightWidth.Width)}else{l=s.Interval;for(var u in s.Frame.RightTextMaxWidth>l&&(l=s.Frame.RightTextMaxWidth),s.OverlayIndex){c=s.OverlayIndex[u];c.Frame.DataWidth=s.Frame.DataWidth,c.Frame.DistanceWidth=s.Frame.DistanceWidth,c.Frame.XPointCount=s.Frame.XPointCount,c.ChartPaint.length>0&&c.Frame&&(c.Frame.RightOffset=l,c.Frame.Draw(),c.Frame.IsShow&&(l+=s.Interval))}}}this.SizeChange=!1},this.DrawOveraly=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];if(!(a.Height<=0))for(var i=0;i<a.OverlayIndex.length;++i)for(var r=a.OverlayIndex[i],n=0;n<r.ChartPaint.length;++n){var s=r.ChartPaint[n];s.IsShow&&(t?s.IsDrawFirst&&s.Draw():s.IsDrawFirst||s.Draw())}}},this.DrawOveralySelectedStatus=function(t){if(t.MoveOn.Identify||t.Selected.Identify)for(var e in this.SubFrame){var a=this.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];for(var n in r.ChartPaint){var s=r.ChartPaint[n];s.IsShow&&(s.Identify&&(s.Identify!=t.MoveOn.Identify&&s.Identify!=t.Selected.Identify||s.DrawSelectedStatus&&s.DrawSelectedStatus()))}}}},this.PtInOveralyChart=function(t,e){var a=null;for(var i in this.SubFrame){var r=this.SubFrame[i];for(var n in r.OverlayIndex){var s=r.OverlayIndex[n];for(var o in s.ChartPaint){var h=s.ChartPaint[o];if(h.IsShow&&(!h.IsHideScriptIndex()&&h.PtInChart&&(a=h.PtInChart(t,e),a)))return a}}}return null},this.DrawPictureCoordinate=function(t,e){if(!t||!t.Frame)return!1;if(!ze.IsNonEmptyArray(t.Point))return!1;if(!t.GetXYCoordinate)return!1;var a=t.GetXYCoordinate();t.Frame.DrawPictureYCoordinate(t,a,e);for(var i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];if(r&&r.Frame&&r.Frame.XSplitOperator.ShowText){r.Frame.DrawPictureXCoordinate(t,a,e);break}}return!0},this.DrawLock=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawLock()}},this.DrawLogo=function(){for(var t=0;t<this.SubFrame.length;++t){var e=this.SubFrame[t];if(e.Frame.DrawLogo){e.Frame.DrawLogo();break}}},this.CalculateLock=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.CalculateLock()}},this.DrawInsideHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawInsideHorizontal&&e.Frame.DrawInsideHorizontal()}},this.DrawCustomHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawCustomHorizontal&&e.Frame.DrawCustomHorizontal();for(var a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];i.Frame&&i.Frame.DrawCustomHorizontal&&i.Frame.DrawCustomHorizontal()}}},this.DrawEx=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];"MinuteFrame"!=a.Frame.ClassName&&"MinuteHScreenFrame"!=a.Frame.ClassName||1!=e||a.Frame.DrawVolTitle(t.Symbol)}},this.DrawCustomVertical=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame.DrawCustomVerticalEvent=t,a.Frame.DrawCustomVertical&&a.Frame.DrawCustomVertical()}},this.DrawToolbar=function(t){var e=null;t&&t.MoveOnPoint&&(e=t.MoveOnPoint);for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r){1==r.ToolbarButtonStyle&&r.DrawToolbarV2&&r.DrawToolbarV2(e,t);for(var n=0;n<i.OverlayIndex.length;++n){var s=i.OverlayIndex[n],o=s.Frame;o.DrawToolbar&&o.DrawToolbar(e,r.IsMinSize,t)}}}}},this.SetSizeChage=function(t){for(var e in this.SizeChange=t,this.SubFrame){var a=this.SubFrame[e];for(var i in a.Frame.SizeChange=t,a.OverlayIndex){var r=a.OverlayIndex[i];r.Frame&&(r.Frame.SizeChange=t)}}this.ChartBorder.UIElement&&(this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight})},this.SetBeforeDrawXYCallback=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame.BeforeDrawXYCallback=t}},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.GetXData=function(t){return this.SubFrame[0].Frame.GetXData(t)},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeft(),s=r.Frame.ChartBorder.GetTopEx(),o=r.Frame.ChartBorder.GetWidth(),h=r.Frame.ChartBorder.GetHeightEx();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,s,o,h),r.Frame.Canvas.isPointInPath(n,t)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a){a.RightFrame&&(e.RightYValue=a.RightFrame.GetYData(t));var l=a.GetYData(t);if(1==a.YSplitOperator.CoordinateType){var u=a.YSplitOperator.GetFirstOpenPrice();e.RightYValue=((l-u)/u*100).toFixed(2)+"%"}return l}},this.PtInFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTop(),s=i.Frame.ChartBorder.GetWidth(),o=i.Frame.ChartBorder.GetHeight();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,s,o),i.Frame.Canvas.isPointInPath(t,e))return a}var h=this.ChartBorder.GetBottom(),l=this.ChartBorder.GetChartHeight(),u=(r=this.ChartBorder.GetLeft(),this.ChartBorder.GetRight());return t>=r&&t<=u&&e>h&&e<l?-3:-1},this.PtInChartFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTopEx(),s=i.Frame.ChartBorder.GetWidth(),o=i.Frame.ChartBorder.GetHeightEx();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,s,o),i.Frame.Canvas.isPointInPath(t,e))return a}return-1},this.PtInButtons=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame.PtInButtons(t,e);if(r)return r.Frame=i.Frame,r.FrameID=a,r;for(var n=0;n<i.OverlayIndex.length;++n){var s=i.OverlayIndex[n],o=s.Frame;if(o&&o.PtInButtons){r=o.PtInButtons(t,e);if(r)return r.IndexID=s.Identify,r.FrameID=a,r.OverlayFrame=o,r.Frame=i.Frame,r}}}}return null},this.PtInFrameBottom=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.Bottom;return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),!!this.Canvas.isPointInPath(t,e)},this.PtInFrameVertical=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)&&(i.Frame.PtInVertical&&i.Frame.PtInVertical(t,e)))return{Frame:i.Frame}}return null},this.GetXFromIndex=function(t){return this.SubFrame[0].Frame.GetXFromIndex(t)},this.GetYFromData=function(t){return this.SubFrame[0].Frame.GetYFromData(t)},this.ZoomUp=function(t){var e=this.SubFrame[0].Frame.ZoomUp(t);return this.UpdateAllFrame(),e},this.ZoomDown=function(t,e){var a=this.SubFrame[0].Frame.ZoomDown(t,e);return this.UpdateAllFrame(),a},this.SetXShowCount=function(t){var e=this.SubFrame[0].Frame.SetXShowCount(t);return this.UpdateAllFrame(),e},this.XCoordinateZoom=function(t,e){var a=this.SubFrame[0].Frame.XCoordinateZoom(t,e);return this.UpdateAllFrame(),a},this.ResetXYSplit=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.XYSplit=!0},this.SetLanguage=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];a&&a.Frame&&(a.Frame.YSplitOperator&&(a.Frame.YSplitOperator.LanguageID=t),a.Frame.XSplitOperator&&(a.Frame.XSplitOperator.LanguageID=t))}},this.GetCurrentPageSize=function(){if(this.SubFrame.length<=0)return null;var t=this.SubFrame[0];return t&&t.Frame?t.Frame.XPointCount:null},this.OnSize=function(){var t={};return this.SubFrame[0].Frame.OnSize(t),this.UpdateAllFrame(),t},this.SetDataWidth=function(t){var e=this.SubFrame[0].Frame.SetDataWidth(t);return this.UpdateAllFrame(),e},this.UpdateAllFrame=function(){for(var t=this.SubFrame[0].Frame,e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];for(var i in e>0&&(a.Frame.XPointCount=t.XPointCount,a.Frame.ZoomIndex=t.ZoomIndex,a.Frame.DataWidth=t.DataWidth,a.Frame.DistanceWidth=t.DistanceWidth,a.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,a.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount),a.OverlayIndex){var r=this.SubFrame[e].OverlayIndex[i];r.Frame.XPointCount=t.XPointCount,r.Frame.ZoomIndex=t.ZoomIndex,r.Frame.DataWidth=t.DataWidth,r.Frame.DistanceWidth=t.DistanceWidth,r.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,r.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount}}},this.PtInFrameBorder=function(t,e){for(var a=this.DragBorderHeight,i=0;i<this.SubFrame.length-1;++i){var r=this.SubFrame[i];if(!(r.Frame.Heigh<=0)){var n=r.Frame.ChartBorder.GetBottom(),s=r.Frame.ChartBorder.GetLeft(),o=r.Frame.ChartBorder.GetRight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(s,n-a/2,o-s,a),r.Frame.Canvas.isPointInPath(t,e))return{Index:i,Bottom:!0}}}return null},this.IsEnableDragY=function(t){if(!this.SubFrame)return!1;var e=this.SubFrame[t];if(!e||!e.Frame||!e.Frame.YSplitOperator)return!1;var a=e.Frame.YSplitOperator;return"function"==typeof a.IsEnableDragY&&a.IsEnableDragY()},this.PtInFrameY=function(t,e){var a=0;if(this.GetExtendChartByClassName){var i=this.GetExtendChartByClassName("StockChip");i&&i.Chart&&(a=i.Chart.Width)}for(var r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(!(n.Frame.Heigh<=0)){var s=n.Frame.ChartBorder.Right;s-=a;var o=n.Frame.ChartBorder.GetBorder(),h=o.Bottom,l=o.TopTitle,u=(o.Left,o.Right),c=h-l;if(c/3>30)var d=l+30,f=h-30;else{var C=c/3;d=l+C,f=h-C}var m=0;if(e<d?m=1:e>f&&(m=2),s>=10)if(ze.IsNonEmptyArray(n.OverlayIndex)){var D=n.OverlayIndex[0],p=D.Frame.RightOffset;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,l,p,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:m,IsOverlay:!1};for(var v=u+p,g=0;g<n.OverlayIndex.length;++g){D=n.OverlayIndex[g];if(D.RightWidth&&ze.IsNumber(D.RightWidth.Width)){var S=D.RightWidth.Width;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(v,l,S,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:m,IsOverlay:!0,OverlayIndex:g};v+=S}}}else if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,l,s,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:m,IsOverlay:!1};var I=n.Frame.ChartBorder.Left;if(I>=10&&(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(0,l,I,h-l),n.Frame.Canvas.isPointInPath(t,e)))return{Index:r,Right:!1,Left:!0,Position:m,IsOverlay:!1}}}return null},this.SetDayCount=function(t){this.ChartBorder.MultiDayMinute.Count=t;for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(a.Frame.DayCount=t,a.Frame.ChartBorder.MultiDayMinute.Count=t)}},this.SetMultiDayMinuteWidth=function(t){if(t){ze.IsNumber(t.Left)&&(this.ChartBorder.MultiDayMinute.Left=t.Left),ze.IsNumber(t.Right)&&(this.ChartBorder.MultiDayMinute.Right=t.Right);for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(ze.IsNumber(t.Left)&&(a.Frame.ChartBorder.MultiDayMinute.Left=t.Left),ze.IsNumber(t.Right)&&(a.Frame.ChartBorder.MultiDayMinute.Right=t.Right))}}}}function q(){this.newMethod=Z,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetHScreenBorder(),e=this.ChartBorder.Right,a=t.Right,i=t.Right-t.Left,r=0,n=0,s=0;s<this.SubFrame.length;++s){var o=this.SubFrame[s],h=o.Frame;h&&h.ChartBorder&&h.ChartBorder.IsShowTitleOnly&&o.Height>0?n+=h.ChartBorder.TitleHeight:r+=o.Height}i-=n;for(s=0;s<this.SubFrame.length;++s){o=this.SubFrame[s],h=o.Frame;if(o.Frame.ChartBorder.Top=this.ChartBorder.Top,o.Frame.ChartBorder.Bottom=this.ChartBorder.Bottom,o.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,o.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,h&&h.ChartBorder&&h.ChartBorder.IsShowTitleOnly&&o.Height>0){var l=h.ChartBorder.TitleHeight;o.Frame.ChartBorder.Right=e,o.Frame.ChartBorder.Left=a-l,e+=l,a-=l}else{l=i*(o.Height/r);o.Frame.ChartBorder.Right=e,o.Frame.ChartBorder.Left=a-l,e+=l,a-=l}}}},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeftEx(),s=r.Frame.ChartBorder.GetTop(),o=r.Frame.ChartBorder.GetWidthEx(),h=r.Frame.ChartBorder.GetHeight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,s,o,h),r.Frame.Canvas.isPointInPath(t,s)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a)return a.GetYData(t)}}function tt(){this.newMethod=G,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.ClassName="DepthChartFrame",this.VerticalRange={Max:88,Min:8,Center:null,MaxDiffer:null,Differ:null,Step:.05},this.AskPrice,this.BidPrice,this.MinZoom=.05,this.SetPriceList=function(t,e){this.AskPrice=t,this.BidPrice=e},this.DrawFrame=function(){this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetWidth()),i=a*(t-this.VerticalRange.Min)/(this.VerticalRange.Max-this.VerticalRange.Min);return e+i},this.GetXData=function(t){var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetWidth());return(t-e)/a*(this.VerticalRange.Max-this.VerticalRange.Min)+this.VerticalRange.Min},this.GetXFromPrice=function(t){var e=!1,a=this.GetPrice(this.BidPrice,t);if(null==a&&(a=this.GetPrice(this.AskPrice,t),e=!0),null==a&&this.BidPrice&&Array.isArray(this.BidPrice)&&this.BidPrice.length>0){var i=this.BidPrice[0];t<i&&(e=!1,a=i)}if(null==a&&this.AskPrice&&Array.isArray(this.AskPrice)&&this.AskPrice.length>0){var r=this.AskPrice[this.AskPrice.length-1];t>r&&(e=!0,a=r)}if(null==a)return null;var n=this.GetXFromIndex(a);return{X:n,Price:a,IsAsk:e}},this.GetPrice=function(t,e){if(!t||!Array.isArray(t)||t.length<=0)return null;if(e<t[0]||e>t[t.length-1])return null;var a=null;for(var i in t){var r=t[i];if(e==r)return r;if(e<r)return a;a=r}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null},this.ZoomUp=function(){var t=this.VerticalRange,e=t.Differ,a=t.MaxDiffer*this.MinZoom;if(e<a)return!1;var i=t.Differ*t.Step;return e-=i,t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0},this.ZoomDown=function(){var t=this.VerticalRange,e=t.Differ;if(e==t.MaxDiffer)return!1;var a=t.Differ*t.Step;return e+=a,e>t.MaxDiffer&&(e=t.MaxDiffer),t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0}}function et(){this.newMethod=G,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,a=1;a<=t;++a)e+=this.DistanceWidth+this.DataWidth;return e},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null}}function at(){this.Date,this.YClose,this.Open,this.Close,this.High,this.Low,this.Vol,this.Amount,this.Time,this.FlowCapital=null,this.Position=null,this.IsVirtual=!1,this.IsNonTrade=!1,this.YFClose=null,this.FClose=null,this.Stop,this.Up,this.Down,this.Unchanged,this.ExtendData,this.BFactor,this.AFactor,this.OrderFlow,this.ColorData,this.HeatMap}function it(){this.Close,this.Open,this.High,this.Low,this.Vol,this.Amount,this.DateTime,this.Increase,this.Risefall,this.AvPrice,this.Lead=null,this.Time,this.Date,this.Position=null,this.YClearing,this.ExtendData}function rt(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function nt(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function st(){this.Date,this.Time,this.Value}at.Copy=function(t){var e=new at;return e.Date=t.Date,ze.IsNumber(t.Time)&&(e.Time=t.Time),e.YClose=t.YClose,e.Open=t.Open,e.Close=t.Close,e.High=t.High,e.Low=t.Low,e.Vol=t.Vol,e.Amount=t.Amount,ze.IsNumber(t.FlowCapital)&&(e.FlowCapital=t.FlowCapital),ze.IsNumber(t.Position)&&(e.Position=t.Position),ze.IsNumber(t.YFClose)&&(e.YFClose=t.YFClose),ze.IsNumber(t.FClose)&&(e.FClose=t.FClose),ze.IsNumber(t.Stop)&&(e.Stop=t.Stop),ze.IsNumber(t.Up)&&(e.Up=t.Up),ze.IsNumber(t.Down)&&(e.Down=t.Down),ze.IsNumber(t.Unchanged)&&(e.Unchanged=t.Unchanged),ze.IsNumber(t.BFactor)&&(e.BFactor=t.BFactor),ze.IsNumber(t.AFactor)&&(e.AFactor=t.AFactor),ze.IsBool(t.IsVirtual)&&(e.IsVirtual=t.IsVirtual),ze.IsBool(t.IsNonTrade)&&(e.IsNonTrade=t.IsNonTrade),t.OrderFlow&&(e.OrderFlow=t.OrderFlow),t.ColorData&&(e.ColorData=t.ColorData),t.ExtendData&&(e.ExtendData=t.ExtendData),t.HeatMap&&(e.HeatMap=t.HeatMap),e},at.CopyTo=function(t,e){t.Date=e.Date,ze.IsNumber(e.Time)&&(t.Time=e.Time),t.YClose=e.YClose,t.Open=e.Open,t.Close=e.Close,t.High=e.High,t.Low=e.Low,t.Vol=e.Vol,t.Amount=e.Amount,ze.IsNumber(e.FlowCapital)&&(t.FlowCapital=e.FlowCapital),ze.IsNumber(e.Position)&&(t.Position=e.Position),ze.IsNumber(e.YFClose)&&(t.YFClose=e.YFClose),ze.IsNumber(e.FClose)&&(t.FClose=e.FClose),ze.IsNumber(e.Stop)&&(t.Stop=e.Stop),ze.IsNumber(e.Up)&&(t.Up=e.Up),ze.IsNumber(e.Down)&&(t.Down=e.Down),ze.IsNumber(e.Unchanged)&&(t.Unchanged=e.Unchanged),ze.IsNumber(e.BFactor)&&(t.BFactor=e.BFactor),ze.IsNumber(e.AFactor)&&(t.AFactor=e.AFactor),ze.IsBool(e.IsVirtual)&&(t.IsVirtual=e.IsVirtual),ze.IsBool(e.IsNonTrade)&&(t.IsNonTrade=e.IsNonTrade),e.OrderFlow&&(t.OrderFlow=e.OrderFlow),e.ColorData&&(t.ColorData=e.ColorData),e.HeatMap&&(t.HeatMap=e.HeatMap),e.ExtendData&&(t.ExtendData=e.ExtendData)},at.CopyRight=function(t,e){var a=new at;return a.Date=t.Date,ze.IsNumber(t.Time)&&(a.Time=t.Time),a.YClose=t.YClose*e,a.Open=t.Open*e,a.Close=t.Close*e,a.High=t.High*e,a.Low=t.Low*e,a.Vol=t.Vol,a.Amount=t.Amount,a.FlowCapital=t.FlowCapital,a.Position=t.Position,a.YFClose=t.YFClose,a.FClose=t.FClose,t.ColorData&&(a.ColorData=t.ColorData),t.ExtendData&&(a.ExtendData=t.ExtendData),a};var ot={INVESTOR:1,ANNOUNCEMENT:2,PFORECAST:3,ANNOUNCEMENT_QUARTER_1:4,ANNOUNCEMENT_QUARTER_2:5,ANNOUNCEMENT_QUARTER_3:6,ANNOUNCEMENT_QUARTER_4:7,RESEARCH:8,BLOCKTRADING:9,TRADEDETAIL:10,ANNOUNCEMENT_EX_START:100,ANNOUNCEMENT_EX_END:200};function ht(){this.ID,this.Date,this.Time,this.Title,this.InfoType,this.ExtendData}var lt=new function(){this.PeriodCallback=new Map,this.GetPeriodCallback=function(t){return this.PeriodCallback.has(t)?this.PeriodCallback.get(t):null},this.AddPeriodCallback=function(t){if(ze.IsNumber(t.Period)&&t.Callback){var e={Period:t.Period,Callback:t.Callback};this.PeriodCallback.set(t.Period,e)}},this.RemovePeriodCallback=function(t){this.PeriodCallback.has(t.ID)&&this.PeriodCallback.delete(t.ID)}};function ut(){this.Data=new Array,this.DataOffset=0,this.Period=0,this.Right=0,this.Symbol,this.Data2=new Array,this.GetCloseMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Close;e[a]=r/t}return e},this.GetVolMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Vol;e[a]=r/t}return e},this.GetAmountMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Amount;e[a]=r/t}return e},this.GetClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Close;return t},this.GetYClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].YClose;return t},this.GetHigh=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].High;return t},this.GetLow=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Low;return t},this.GetOpen=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Open;return t},this.GetVol=function(t){var e=1;ze.IsNumber(t)&&(e=t);var a=new Array;for(var i in this.Data)a[i]=this.Data[i].Vol/e;return a},this.GetAmount=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Amount;return t},this.GetPosition=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Position;return t},this.GetSettlementPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].FClose;return t},this.GetIsEqual=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close==a.Open?1:0}return t},this.GetIsUp=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close>a.Open?1:0}return t},this.GetIsDown=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close<a.Open?1:0}return t},this.GetLead=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Lead;return t},this.GetDate=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Date;return t},this.GetTime=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Time;return t},this.GetUp=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Up;return t},this.GetDown=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Down;return t},this.GetYear=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date/1e4);return t},this.GetMonth=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date%1e4/100);return t},this.GetAvPrice=function(){var t=new Array;for(var e in this.Data){var a=this.Data[e].AvPrice;ze.IsNumber(a)?t[e]=a:t[e]=0}return t},this.GetDateRange=function(){if(!this.Data||this.Data.length<=0)return null;var t=this.Data[0],e=this.Data[this.Data.length-1],a={Start:{Date:t.Date},End:{Date:e.Date}};return ze.IsNumber(t.Time)&&(a.Start.Time=t.Time),ze.IsNumber(e.Time)&&(a.End.Time=e.Time),a},this.GetDateList=function(){if(!this.Data||this.Data.length<=0)return null;for(var t=[],e=new Set,a=0;a<this.Data.length;++a){var i=this.Data[a];ze.IsNumber(i.Date)&&(e.has(i.Date)||(e.add(i.Date),t.push(i.Date)))}return t},this.GetMinutePeriodData=function(t){var e=new Array,a=5;if(5==t)a=5;else if(6==t)a=15;else if(7==t)a=30;else if(8==t)a=60;else if(11==t)a=120;else{if(12!=t)return t>ft&&t<=Ct?(a=t-ft,this.GetMinuteCustomPeriodData(a)):this.Data;a=240}for(var i=!1,r=null,n=null,s=0;s<this.Data.length;){i=!0;for(var o=0;o<a&&s<this.Data.length;++s){i&&(r=new at,e.push(r),i=!1);var h=this.Data[s];if(null!=h){if((925!=h.Time||null!=n&&924==n)&&(930!=h.Time||null!=n&&929==n)&&(1300!=h.Time||null!=n&&1259==n)&&++o,r.Date=h.Date,r.Time=h.Time,n=r.Time,null!=h.Open&&null!=h.Close&&(null==r.Open||null==r.Close?(r.Open=h.Open,r.High=h.High,r.Low=h.Low,r.YClose=h.YClose,r.Close=h.Close,r.Vol=h.Vol,r.Amount=h.Amount,r.FlowCapital=h.FlowCapital,r.Position=h.Position,r.YFClose=h.YFClose,r.FClose=h.FClose):(r.High<h.High&&(r.High=h.High),r.Low>h.Low&&(r.Low=h.Low),r.Close=h.Close,r.Vol+=h.Vol,null!=h.Amount&&(r.Amount+=h.Amount),r.Position=h.Position,r.FlowCapital=h.FlowCapital,r.FClose=h.FClose),s+1<this.Data.length)){var l=this.Data[s+1];if(l&&l.Date!=h.Date){++s;break}}}else++o}}return e},this.GetMinuteCustomPeriodData=function(t){for(var e=new Array,a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var s=0;s<a&&n<this.Data.length;++n,++s){i&&(r=new at,e.push(r),i=!1);var o=this.Data[n];null!=o&&(r.Date=o.Date,r.Time=o.Time,null!=o.Open&&null!=o.Close&&(null==r.Open||null==r.Close?(r.Open=o.Open,r.High=o.High,r.Low=o.Low,r.YClose=o.YClose,r.Close=o.Close,r.Vol=o.Vol,r.Amount=o.Amount,r.FlowCapital=o.FlowCapital,r.Position=o.Position,r.YFClose=o.YFClose,r.FClose=o.FClose):(r.High<o.High&&(r.High=o.High),r.Low>o.Low&&(r.Low=o.Low),r.Close=o.Close,r.Vol+=o.Vol,null!=o.Amount&&(r.Amount+=o.Amount),r.Position=o.Position,r.FlowCapital=o.FlowCapital,r.FClose=o.FClose)))}}return e},this.GetDayPeriodData=function(t){if(t>ct&&t<=dt)return this.GetDayCustomPeriodData(t-ct);var e=Mr.IsBIT(this.Symbol),a=new Array,i=0,r=2,n=null;for(var s in this.Data){var o=!1,h=this.Data[s];switch(t){case 1:if(e)var l=ut.GetSunday(h.Date);else l=ut.GetFirday(h.Date);l!=i&&(o=!0,i=l);break;case 21:if(e)l=ut.GetSunday(h.Date);else l=ut.GetFirday(h.Date);l!=i&&(++r,r>=2&&(o=!0,r=0),i=l);break;case 2:parseInt(h.Date/100)!=parseInt(i/100)&&(o=!0,i=h.Date);break;case 3:parseInt(h.Date/1e4)!=parseInt(i/1e4)&&(o=!0,i=h.Date);break;case 22:var u=ut.GetHalfYear(h.Date);u!=i&&(o=!0,i=u);break;case 9:var c=ut.GetQuarter(h.Date);c=10*parseInt(h.Date/1e4)+c;var d=ut.GetQuarter(i);d=10*parseInt(i/1e4)+d,c!=d&&(o=!0,i=h.Date);break}if(o){if(n=new at,n.Date=h.Date,a.push(n),null==h.Open||null==h.Close)continue;n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose}else{if(null==n)continue;if(null==h.Open||null==h.Close)continue;null==n.Open||null==n.Close?(n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose):(n.High<h.High&&(n.High=h.High),n.Low>h.Low&&(n.Low=h.Low),n.Close=h.Close,n.Vol+=h.Vol,null!=h.Amount&&(n.Amount+=h.Amount),n.Position=h.Position,n.FlowCapital=h.FlowCapital,n.Date=h.Date,n.FClose=h.FClose)}}return a},this.GetDayCustomPeriodData=function(t){for(var e=[],a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var s=0;s<a&&n<this.Data.length;++n,++s){i&&(r=new at,e.push(r),i=!1);var o=this.Data[n];null!=o&&(r.Date=o.Date,null!=o.Open&&null!=o.Close&&(null==r.Open||null==r.Close?(r.Open=o.Open,r.High=o.High,r.Low=o.Low,r.YClose=o.YClose,r.Close=o.Close,r.Vol=o.Vol,r.Amount=o.Amount,r.FlowCapital=o.FlowCapital,r.Position=o.Position,r.YFClose=o.YFClose,r.FClose=o.FClose):(r.High<o.High&&(r.High=o.High),r.Low>o.Low&&(r.Low=o.Low),r.Close=o.Close,r.Vol+=o.Vol,null!=o.Amount&&(r.Amount+=o.Amount),r.Position=o.Position,r.FlowCapital=o.FlowCapital,r.FClose=o.FClose)))}}return e},this.GetPeriodData=function(t){var e=lt.GetPeriodCallback(t);if(e)return e.Callback(t,this.Data,this);if(Mr.IsBIT(this.Symbol)&&(5==t||6==t||7==t||8==t||t>ft&&t<=Ct)){var a=5;return 5==t?a=5:6==t?a=15:7==t?a=30:8==t?a=60:11==t?a=120:12==t?a=240:t>ft&&t<=Ct&&(a=t-ft),this.GetMinuteCustomPeriodData(a)}return ut.IsDayPeriod(t,!1)?this.GetDayPeriodData(t):ut.IsMinutePeriod(t,!1)?this.GetMinutePeriodData(t):void 0},this.GetRightData=function(t,e){var a=[];if(this.Data.length<=0)return a;if(e&&1==e.AlgorithmType){for(var i=0;i<this.Data.length;++i){var r=this.Data[i],n=1==t?r.BFactor:r.AFactor;a[i]=at.CopyRight(r,n)}return a}if(1==t){var s=this.Data.length-1,o=(n=1,this.Data[s].YClose);for(a[s]=at.Copy(this.Data[s]),--s;s>=0;--s){if(o!=this.Data[s].Close)break;a[s]=at.Copy(this.Data[s]),o=this.Data[s].YClose}for(;s>=0;--s){var h=this.Data[s].Close;o!=h&&0!=h&&(n*=o/h),a[s]=at.CopyRight(this.Data[s],n),o=this.Data[s].YClose}}else if(2==t){s=0,n=1;var l=this.Data[s].Close;for(a[s]=at.Copy(this.Data[s]),++s;s<this.Data.length;++s){if(l!=this.Data[s].YClose)break;a[s]=at.Copy(this.Data[s]),l=this.Data[s].Close}for(;s<this.Data.length;++s)l!=this.Data[s].YClose&&(n*=l/this.Data[s].YClose),a[s]=at.CopyRight(this.Data[s],n),l=this.Data[s].Close}return a},this.GetRightDate=this.GetRightData,this.GetOverlayData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new at,a[i].Date=n,++i;else{var s=t[r].Date;s==n?(a[i]=new at,a[i].Date=t[r].Date,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):s<n?++r:(a[i]=new at,a[i].Date=n,++i)}}return a},this.GetOverlayMinuteData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,s=this.Data[i].Time;if(r>=t.length)a[i]=new at,a[i].Date=n,a[i].Time=s,++i;else{var o=t[r].Date,h=t[r].Time;o==n&&h==s?(a[i]=new at,a[i].Date=t[r].Date,a[i].Time=t[r].Time,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):o<n||o==n&&h<s?++r:(a[i]=new at,a[i].Date=n,a[i].Time=s,++i)}}return a},this.GetFittingData=function(t){for(var e=new Array,a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i>=t.length)e[a]=null,++a;else{var n=t[i].Date;if(n==r){var s=new st;s.Date=t[i].Date,s.Value=t[i].Value,e[a]=s,++i,++a}else n<r?++i:(e[a]=new st,e[a].Date=r,++a)}}return e},this.GetFittingData2=function(t,e){for(var a=new Array,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new st,a[i].Date=n,a[i].Value=e,++i;else{var s=t[r].Date;if(s==n){var o=new st;o.Date=t[r].Date,o.Value=t[r].Value,a[i]=o,++r,++i}else s<n?++r:(a[i]=new st,a[i].Date=n,a[i].Value=e,++i)}}return a},this.GetDateIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date;if(a>=t.length)break;var r=t[a];r.Date==i?(r.Index=e,++a):r.Date<i?++a:++e}},this.GetDateTimeIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date,r=this.Data[e].Time;if(a>=t.length)break;var n=t[a];n.Date==i&&n.Time==r?(n.Index=e,++a):n.Date<i||n.Date==i&&n.Time<r?++a:++e}},this.GetMinuteFittingData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(i>=t.length)e[a]=null,++a;else{var s=t[i].Date,o=t[i].Time,h=t[i];if(s==r&&o==n){var l=new st;l.Date=h.Date,l.Time=h.Time,l.Value=h.Value,e[a]=l,++i,++a}else if(s<r||s==r&&o<n)++i;else{l=new st;l.Date=r,l.Time=n,e[a]=l,++a}}}return e},this.GetMinuteFittingDataV2=function(t){for(var e=[],a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,s=this.Data[i].Time;if(r>=t.length)e[i]=null,++i;else{var o=t[r].Date,h=t[r].Time,l=t[r];if(o==n&&h==s){var u=new st;u.Date=l.Date,u.Time=l.Time,u.Value=l.Value,e[i]=u,a=l,++r,++i}else if(o<n||o==n&&h<s){var c=e.length-1;if(c>=0){u=e[c];u&&(o<u.Date||o==u.Date&&h<u.Time)&&(u.Value=l.Value)}a=l,++r}else{u=new st;u.Date=n,u.Time=s,a&&(u.Value=a.Value),e[i]=u,++i}}}return e},this.GetFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i<t.length){var n=t[i].Date;if(r<n){++a;continue}}if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var s=new st;s.Date=r,i<t.length?(s.Value=t[i].Value,s.FinanceDate=t[i].Date):(s.Value=null,s.FinanceDate=null),e[a]=s,++a}}return e},this.GetMinuteFittingFinanceData=function(t){var e=[];if(!Array.isArray(t)||t.length<=0)return e;var a=0,i=t[0];for(a=0;a<this.Data.length;++a){var r=this.Data[a].Date,n=this.Data[a].Time;if(r>i.Date||r==i.Date&&n>=i.Time)break}for(var s=0;a<this.Data.length;){r=this.Data[a].Date,n=this.Data[a].Time;if(s+1<t.length&&(t[s].Date<r&&t[s+1].Date<=r||t[s].Date==r&&t[s].Time<n&&t[s+1].Time<=n))++s;else{var o=new st;o.Date=r,o.Time=n,s<t.length?(o.Value=t[s].Value,o.FinanceDate=t[s].Date,o.FinanceTime=t[s].Time):(o.Value=null,o.FinanceDate=null,o.FinanceTime=null),e[a]=o,++a}}return e},this.GetFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,s=0;n<this.Data.length;){var o=this.Data[n].Date;if(s<t.length&&t[s].Date>o){var h=new st;h.Date=o,h.Value=e,i[n]=h,++n}else if(s+1<t.length&&t[s].Date<o&&t[s+1].Date<=o)++s,r=!1;else{h=new st;if(h.Date=o,h.Value=e,h.FinanceDate=null,s<t.length){var l=t[s];0==this.Period&&!0===a?l.Date==h.Date&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0):0==r&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0)}i[n]=h,++n}}return i},this.GetMinuteFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,s=0;n<this.Data.length;){var o=this.Data[n].Date,h=this.Data[n].Time;if(s<t.length&&(t[s].Date>o||t[s].Date==o&&t[s].Time>h)){var l=new st;l.Date=o,l.Time=h,l.Value=e,i[n]=l,++n}else if(s+1<t.length&&(t[s].Date<o&&t[s+1].Date<=o||t[s].Date==o&&t[s].Time<h&&t[s+1].Time<=h))++s,r=!1;else{l=new st;if(l.Date=o,l.FinanceDate=null,l.Time=h,l.Value=e,s<t.length){var u=t[s];4==this.Period&&!0===a?u.Date==l.Date&&u.Time==l.Time&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0):0==r&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0)}i[n]=l,++n}}return i},this.GetFittingMarketValueData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Close;if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var s=new st;s.Date=r,s.Value=t[i].Value*n,s.FinanceDate=t[i].Date,e[a]=s,++a}}return e},this.GetFittingMonthData=function(t){for(var e=new Array,a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)e[i]=null,++i;else{var s=t[r].Date;if(s==n){var o=new st;o.Date=t[r].Date,o.Value=t[r].Value,o.Text=t[r].Text,e[i]=o,++r,++i}else if(null!=a&&a<s&&n>s){o=new st;o.Date=n,o.OverlayDate=t[r].Date,o.Value=t[r].Value,o.Text=t[r].Text,e[i]=o,++r,++i}else s<n?++r:(e[i]=new st,e[i].Date=n,++i);a=n}}return e},this.GetValue=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&null!=this.Data[e].Value){var a=this.Data[e].Value;isNaN(a)?t[e]=a instanceof Array?a:null:t[e]=a}else t[e]=null;return t},this.GetObject=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&this.Data[e].Value){var a=this.Data[e].Value;t[e]=a}else t[e]=null;return t},this.GetPeriodSingleData=function(t){var e=new Array,a=0,i=2,r=null;for(var n in this.Data){var s=!1,o=this.Data[n];if(null!=o&&null!=o.Date){switch(t){case 1:var h=ut.GetFirday(o.Date);h!=a&&(s=!0,a=h);break;case 21:h=ut.GetFirday(o.Date);h!=a&&(++i,i>=2&&(s=!0,i=0),a=h);break;case 2:parseInt(o.Date/100)!=parseInt(a/100)&&(s=!0,a=o.Date);break;case 3:parseInt(o.Date/1e4)!=parseInt(a/1e4)&&(s=!0,a=o.Date);break;case 9:var l=ut.GetQuarter(o.Date);l=10*parseInt(o.Date/1e4)+l;var u=ut.GetQuarter(a);u=10*parseInt(a/1e4)+u,l!=u&&(s=!0,a=o.Date);break}if(s)r=new st,r.Date=o.Date,r.Value=o.Value,e.push(r);else{if(null==r)continue;if(null==o.Value||isNaN(o.Value))continue;(null==r.Value||isNaN(r.Value))&&(r.Value=o.Value)}}}return e},this.GetMinuteAvPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].AvPrice;return t},this.MergeMinuteData=function(t){if(!this.Data||this.Data.length<=0)return this.Data=t,!0;for(var e=this.Data[0],a=0,i=null,r=0;r<t.length;++r){var n=t[r];if(n.Date>e.Date){a=r,i=n;break}if(n.Date==e.Date&&n.Time>=e.Time){a=r,i=n;break}}if(null==i)return!1;var s=null,o=!1;for(r=this.Data.length-1;r>=0;--r){var h=this.Data[r].Date,l=this.Data[r].Time;if(i.Date>h||i.Date==h&&i.Time>=l){s=r,i.Date==h&&i.Time==l&&(o=!0);break}}if(null==s)return!1;var u=s;r=a;if(1==o){n=t[r];if(u-1>0){var c=this.Data[u-1];n.YClose||(n.YClose=c.Close),!ze.IsNumber(n.FlowCapital)&&ze.IsNumber(c.FlowCapital)&&(n.FlowCapital=c.FlowCapital)}var d=at.Copy(n);this.Data[u]=d,++u,++r}else++u;for(;r<t.length;){n=t[r];if(u>=this.Data.length-1){if(u-1>0){c=this.Data[u-1];n.YClose||(n.YClose=c.Close),!ze.IsNumber(n.FlowCapital)&&ze.IsNumber(c.FlowCapital)&&(n.FlowCapital=c.FlowCapital)}d=at.Copy(n);this.Data[u]=d,++u,++r}else{var f=this.Data[u];f.Date==n.Date&&f.Time==n.Time?(at.CopyTo(f,n),++u,++r):++u}}return!0},this.ConverPeriod=function(t,e,a){for(var i=[],r=null,n=ut.IsMinutePeriod(e,!0),s=ut.IsMinutePeriod(a,!0),o=n&&s,h=n&&!s,u=!n&&!s,c=0,d=0;c<this.Data.length;++c){for(var f=this.Data[c];d<t.length;++d){var C=t[d];if(o){if(C.Date>f.Date||C.Date==f.Date&&C.Time>=f.Time){r=C;break}}else if((h||u)&&C.Date>=f.Date){r=C;break}}var m=null;r?(m=at.Copy(r),m.PDate=r.Date,m.PTime=r.Time):m=new at,m.Date=f.Date,(o||h)&&(m.Time=f.Time),i.push(m)}return l.Chart.Log("[ChartData::ConverPeriod] result",i),i},this.GetRef=function(t){for(var e=[],a=0;a<this.Data.length;++a){e[a]=null;var i=this.Data[a];if(a-t<0){var r=new at;r.Date=i.Date,r.Time=i.Time,e[a]=r}else{var n=this.Data[a-t];r=at.Copy(n);r.Date=i.Date,r.Time=i.Time,e[a]=r}}return e},this.FitKLineIndex=function(t,e,a,i){for(var r=this.Data.length,n=t.length,s=[ut.IsMinutePeriod(a,!0),ut.IsMinutePeriod(i,!0)],o=[ut.IsDayPeriod(a,!0),ut.IsDayPeriod(i,!0)],h=ut.GetKLineDataTime(this.Data[0]),l=[],u=n,c=0;c<n;++c){var d=ut.GetKLineDataTime(t[c]);if(o[0]&&o[1]||s[0]&&o[1]){if(d.Date>=h.Date){u=c;break}}else if(s[0]&&s[1]){if(d.Date>h.Date){u=c;break}if(d.Date==h.Date&&d.Time>=h.Time){u=c;break}}}c=0;for(var f=u;c<r;){d=ut.GetKLineDataTime(this.Data[c]);if(f>=n){var C={Date:d.Date,Time:d.Time,Index:-1};l[c]=C,++c}else{var m=ut.GetKLineDataTime(t[f]);if(o[0]&&o[1]||s[0]&&o[1])if(m.Date==d.Date){C={Date:d.Date,Time:d.Time,Index:f,Data2:m.Date,Time2:m.Time};l[c]=C,++c}else if(f+1<n){var D=ut.GetKLineDataTime(t[f+1]);if(m.Date<=d.Date&&D.Date>d.Date){C={Date:d.Date,Time:d.Time,Index:f+1,Data2:D.Date,Time2:D.Time};l[c]=C,++c}else if(D.Date<=d.Date)++f;else{C={Date:d.Date,Time:d.Time,Index:-1};l[c]=C,++c}}else++f;else if(s[0]&&s[1])if(m.Date==d.Date&&m.Time==d.Time){C={Date:d.Date,Time:d.Time,Index:f,Data2:m.Date,Time2:m.Time};l[c]=C,++c}else if(f+1<n){D=ut.GetKLineDataTime(t[f+1]);if(m.Date<d.Date&&D.Date>d.Date||m.Date==d.Date&&m.Time<d.Time&&D.Date==d.Date&&D.Time>d.Time||m.Date==d.Date&&m.Time<d.Time&&D.Date>d.Date||m.Date<d.Date&&D.Date==d.Date&&D.Time>d.Time){C={Date:d.Date,Time:d.Time,Index:f+1,Data2:D.Date,Time2:D.Time};l[c]=C,++c}else if(D.Date<d.Date||D.Date==d.Date&&D.Time<=d.Time)++f;else{C={Date:d.Date,Time:d.Time,Index:-1};l[c]=C,++c}}else++f}}var p=[];for(var c in e){d=e[c];if(Array.isArray(d.Data)){var v=[];p[c]={Data:v,Name:d.Name};for(f=0;f<l.length;++f){var g=l[f];v[f]=null,g&&g.Index>=0&&g.Index<d.Data.length&&(v[f]=d.Data[g.Index])}}else p[c]={Data:d.Data,Name:d.Name}}return p},this.FindDataIndexByDateTime=function(t){var e=0;for(var a in t)t[a].Index=-1;for(var a in this.Data){var i=this.Data[a];for(var r in t){var n=t[r];if(!(n.Index>=0)){if(ze.IsNumber(n.Time)){if(n.Date==i.Date&&n.Time==i.Time){n.Index=parseInt(a),++e;break}}else if(n.Date==i.Date){n.Index=parseInt(a),++e;break}if(e>=t.length)break}}}},this.CloneData=function(t){var e=[];if("HistoryData"==t)for(var a in this.Data){var i=this.Data[a],r=at.Copy(i);e.push(r)}return e},this.GetAPIDataIndex=function(t,e){var a=[];if(t&&e){for(var i=this.Data.length,r=t.length,n=ut.GetKLineDataTime(this.Data[0]),s=r,o=(s=r,0);o<r;++o){var h=t[o],l=e[o];if(h>n.Date||h==n.Date&&l>=n.Time){s=o;break}}o=0;for(var u=s;o<i;){var c=this.Data[o];if(u>=r){var d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:-1};a[o]=d,++o}else{h=t[u],l=e[u];if(h==c.Date&&l==c.Time){d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:u,Data:h,Time:l};a[o]=d,++o}else if(u+1<r){var f=t[u+1],C=e[u+1];if(h<c.Date&&f>c.Date||h==c.Date&&l<c.Time&&f==c.Date&&C>c.Time||h==c.Date&&l<c.Time&&f>c.Date||h<c.Date&&f==c.Date&&C>c.Time){d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:u,Data:h,Time:l};a[o]=d,++o}else if(f<c.Date||f==c.Date&&C<=c.Time)++u;else{d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:-1};a[o]=d,++o}}else++u}}}else if(t){for(i=this.Data.length,r=t.length,n=ut.GetKLineDataTime(this.Data[0]),s=r,o=0;o<r;++o){c=t[o];if(c>=n.Date){s=o;break}}for(o=0,u=s;o<i;){c=this.Data[o];if(u>=r){d={KDate:c.Date,KIndex:o,Index:-1};a[o]=d,++o}else{var m=t[u];if(m==c.Date){d={KDate:c.Date,KIndex:o,Index:u,Data:m};a[o]=d,++o}else if(u+1<r){var D=t[u+1];if(m<=c.Date&&D>c.Date){d={KDate:c.Date,KIndex:o,Index:u,Data:m};a[o]=d,++o}else if(D<=c.Date)++u;else{d={KDate:c.Date,KIndex:o,Index:-1};a[o]=d,++o}}else++u}}}return a},this.FixKData=function(t,e){return ut.IsDayPeriod(e,!0)?this.FixKData_Day(t):ut.IsMinutePeriod(e,!0)?this.FixKData_Minute(t):null},this.FixKData_Day=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i];if(r<a){var s=t[r];if(s.Date>n.Date){++i;continue}}if(r+1<a){s=t[r];var o=t[r+1];if(s.Date<n.Date&&o.Date<=n.Date){++r;continue}}var h=new at;h.Date=n.Date;var l=r<a?r:a-1;s=t[l];h.Close=s.Close,h.High=s.High,h.Low=s.Low,h.Open=s.Open,h.YClose=s.YClose,h.Amount=s.Amount,h.Vol=s.Vol,h.ExDate=s.Date,e[i]=h,++i}return e},this.FixKData_Minute=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i],s=ut.DateTimeToNumber(n);if(r<a){var o=t[r],h=ut.DateTimeToNumber(o);if(h>s){++i;continue}}if(r+1<a){o=t[r];var l=t[r+1],u=(h=ut.DateTimeToNumber(o),ut.DateTimeToNumber(l));if(h<s&&u<=s){++r;continue}}var c=new at;c.Date=n.Date,c.Time=n.Time;var d=r<a?r:a-1;o=t[d];c.Close=o.Close,c.High=o.High,c.Low=o.Low,c.Open=o.Open,c.YClose=o.YClose,c.Amount=o.Amount,c.Vol=o.Vol,c.ExDate=o.Date,c.ExTime=o.Time,e[i]=c,++i}return e},this.GetDataRange=function(t,e){if(!ze.IsNonEmptyArray(this.Data))return null;for(var a={},i=0;i<this.Data.length;++i){var r=this.Data[i];if(r.Date==t.Date&&(ze.IsNumber(t.Time)?r.Time==t.Time&&(a.Start={Index:i,Date:r.Date,Time:r.Time}):a.Start={Index:i,Date:r.Date}),(r.Date=e.Date)&&(ze.IsNumber(e.Time)?r.Time==e.Time&&(a.End={Index:i,Date:r.Date,Time:r.Time}):a.End={Index:i,Date:r.Date}),a.Start&&a.End)return a}return null},this.ExportArrayData=function(t,e){if(!ze.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&ze.IsNumber(e.Start.Index)&&ze.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n)r[n]=this.Data[n];return r},this.ExportBoolData=function(t,e){if(!ze.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&ze.IsNumber(e.Start.Index)&&ze.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n){var s=this.Data[n];r[n]=!1,ze.IsPlusNumber(s)&&(r[n]=!0)}return r},this.ExportKLineData=function(t){if(!ze.IsNonEmptyArray(this.Data))return null;var e=0,a=this.Data.length-1;t&&t.Start&&t.End&&ze.IsNumber(t.Start.Index)&&ze.IsNumber(t.End.Index)&&(e=t.Start.Index,a=t.End.Index);for(var i=[],r=[],n=[],s=[],o=[],h=[],l=[],u=[],c=e;c<=a&&c<this.Data.length;++c){var d=this.Data[c];i[c]=d.Date,r[c]=d.Open,n[c]=d.High,s[c]=d.Low,l[c]=d.Close,o[c]=d.Vol,h[c]=d.Amount,u[c]=d.Time}if(t&&t.IsOverlay){var f=[{Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:s},{Name:"Close",Data:l},{Name:"Vol",Data:o},{Name:"Amount",Data:h}];return f}f=[{Name:"Date",Data:i}];return(ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period))&&f.push({Name:"Time",Data:u}),f.push({Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:s},{Name:"Close",Data:l},{Name:"Vol",Data:o},{Name:"Amount",Data:h}),f},this.ExportMinuteData=function(t){if(!ze.IsNonEmptyArray(this.Data))return null;var e=[],a=[],i=[],r=[],n=[],s=[],o=[],h=[],l=[],u=[],c=0,d=this.Data.length-1;t&&t.Start&&t.End&&ze.IsNumber(t.Start.Index)&&ze.IsNumber(t.End.Index)&&(c=t.Start.Index,d=t.End.Index);for(var f=c;f<=d&&f<this.Data.length;++f){var C=this.Data[f];e[f]=C.Date,a[f]=C.Open,i[f]=C.High,r[f]=C.Low,o[f]=C.Close,n[f]=C.Vol,s[f]=C.Amount,h[f]=C.Time,u[f]=C.AvPrice,l[f]=C.Position}var m=[{Name:"Open",Data:a},{Name:"High",Data:i},{Name:"Low",Data:r},{Name:"Close",Data:o},{Name:"Vol",Data:n},{Name:"Amount",Data:s},{Name:"AvPrice",Data:u},{Name:"Position",Data:l}];return t&&t.IsOverlay||m.splice(0,0,{Name:"Date",Data:e},{Name:"Time",Data:h}),m}}ut.DateTimeToNumber=function(t){return 1e4*t.Date+t.Time},ut.GetKLineDataTime=function(t){var e={Date:t.Date,Time:0};return ze.IsNumber(t.Time)&&(e.Time=t.Time),e},ut.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},ut.GetSunday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(0==a)return t;var i=e.getTime();if(a>0){var r=864e5*(7-a);i+=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},ut.GetQuarter=function(t){var e=parseInt(t%1e4/100);return 1==e||2==e||3==e?1:4==e||5==e||6==e?2:7==e||8==e||9==e?3:10==e||11==e||12==e?4:0},ut.GetHalfYear=function(t){var e=parseInt(t/1e4),a=t%1e4;return a<=630?1e4*e+630:1e4*e+1231};var ct=4e4,dt=49999;ut.IsDayPeriod=function(t,e){return 1==t||2==t||3==t||9==t||21==t||22==t||(t>ct&&t<=dt||0==t&&1==e)};var ft=2e4,Ct=29999;ut.IsMinutePeriod=function(t,e){return 5==t||6==t||7==t||8==t||11==t||12==t||(t>ft&&t<=Ct||4==t&&1==e)};function mt(){this.ChartPaint,this.Data,this.Type=0}function Dt(t,e,a,i){this.X=t,this.Y=e,this.Width=a,this.Height=i}ut.IsSecondPeriod=function(t){return t>3e4&&t<=32e3},ut.IsTickPeriod=function(t){return 10==t},ut.GetPeriodName=function(t){var e=new Map([[0,"日线"],[1,"周线"],[2,"月线"],[3,"年线"],[9,"季线"],[21,"双周"],[22,"半年"],[4,"1分"],[5,"5分"],[6,"15分"],[7,"30分"],[8,"60分"],[11,"2小时"],[12,"4小时"],[10,"分笔"]]);return e.has(t)?e.get(t):""};var pt=new function(){this.DataMap=new Map([["ChartKLine",{Create:function(t){return new St}}],["ChartMinuteVolumBar",{Create:function(t){return new bt}}],["ChartMinutePriceLine",{Create:function(t){return new Qt}}]]),this.Create=function(t,e){if(!this.DataMap.has(t))return l.Warn("[ChartPaintFactory::Create] can't find class=".concat(t,".")),null;var a=this.DataMap.get(t);return a.Create(e)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}};function vt(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="IChartPainting",this.Data=new ut,this.Script,this.NotSupportMessage=null,this.MessageFont=xi.Index.NotSupport.Font,this.MessageColor=xi.Index.NotSupport.TextColor,this.IsDrawFirst=!1,this.IsShow=!0,this.GetEventCallback,this.SelectedLineWidth=xi.SelectedChart.LineWidth,this.SelectedLineColor=xi.SelectedChart.LineColor,this.SelectedRadius=xi.SelectedChart.Radius,this.SelectedPointMinSpace=xi.SelectedChart.MinSpace,this.SelectedBGColor=xi.SelectedChart.BGColor,this.DrawSelectedStatus,this.PtInChart,this.Draw=function(){},this.GetBorder=function(){return this.ChartFrame.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.GetYFromData=function(t,e){return this.ChartFrame.GetYFromData(t,e)},this.IsMinuteFrame=function(){var t="MinuteFrame"==this.ChartFrame.ClassName||"MinuteHScreenFrame"==this.ChartFrame.ClassName||"OverlayMinuteFrame"==this.ChartFrame.ClassName||"OverlayMinuteHScreenFrame"==this.ChartFrame.ClassName;return t},this.DrawNotSupportmessage=function(){this.Canvas.font=this.MessageFont,this.Canvas.fillStyle=this.MessageColor;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeightEx(),r=t+e/2,n=a+i/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,r,n)},this.GetTooltipData=function(t,e,a){return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={Min:null,Max:null};if(!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];null==n||isNaN(n)||(null==a.Max&&(a.Max=n),null==a.Min&&(a.Min=n),a.Max<n&&(a.Max=n),a.Min>n&&(a.Min=n))}return a},this.GetDynamicFont=function(t,e,a,i,r,n){var s=I();if(a*=s,i*=s,a==i){var o="".concat(a.toFixed(0),"px ").concat(n);return o}var h=t+e;r&&(0==r.Type?r.Value>0&&(h=t*r.Value):1==r.Type?r.Value>0&&(h=(t+e)*r.Value):2==r.Type&&ze.IsNumber(r.Value)&&(h=t+e+2*r.Value*s)),h<i?h=i:h>a&&(h=a);o="".concat(h.toFixed(0),"px ").concat(n);return o},this.GetLockRect=function(){return this.ChartFrame.GetLockRect()},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),s=1/t.length;for(var o in t)n.addColorStop(o*s,t[o]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetDynamicIconSize=function(t,e,a,i,r){var n=I();if(a*=n,i*=n,a==i)return a;var s=t+e-2*n;return r&&(0==r.Type?r.Value>0&&(s=t*r.Value):1==r.Type?r.Value>0&&(s=(t+e)*r.Value):2==r.Type&&ze.IsNumber(r.Value)&&(s=t+e+2*r.Value*n)),s<i?s=i:s>a&&(s=a),s},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")},this.DrawLinePoint=function(t){var e=!0===this.ChartFrame.IsHScreen;if(!e&&this.IsShow){var a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount;if(e)var s=this.ChartBorder.GetHScreenBorder(),o=s.BottomEx,h=s.TopEx+r/2+xi.FrameLeftMargin;else s=this.ChartBorder.GetBorder(),h=s.LeftEx+r/2+xi.FrameLeftMargin,o=s.RightEx;var l=this.GetLockRect();l&&(o=e?l.Top:l.Left);var u=I();this.Canvas.save(),this.ClipClient(e),this.Canvas.lineWidth=this.SelectedLineWidth*u,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);var c=this.SelectedRadius,d=Math.ceil(this.SelectedPointMinSpace/(i+r));if(d<=0&&(d=1),a){var f=(s.Right-s.Left)/n;d=Math.ceil(this.SelectedPointMinSpace/f)}var C=0,m=null,D=null;t&&(t.KLineClose?C=1:t.MinuteVolBar?C=2:t.MinuteOverlayPrice?C=1==t.OverlayType?1:3:t.OverlayKLine?(C=4,m=this.GetFirstOpen()):t.StackedBar&&(C=5));for(var p=this.Data.DataOffset,v=0,g=0;p<this.Data.Data.length&&v<n;++p,++v,++g,h+=i+r){var S=null;if(1==C){var T=this.Data.Data[p];ze.IsNumber(T.Close)&&(S=T.Close)}else if(2==C){T=this.Data.Data[p];ze.IsNumber(T.Vol)&&(S=T.Vol)}else if(3==C){var x=this.Data.Data[p].Close;if(null==x)continue;S=x/this.YClose*this.MainYClose}else if(4==C){var y=this.Data.Data[p];null==D&&(D=y.Open),S=y.Close/D*m}else if(5==C){var A=this.Data.Data[p];if(!ze.IsNonEmptyArray(A))continue;var b=0,w=0;for(g=0;g<A.length;++g){var F=A[g];ze.IsNumber(F)&&(0!=F&&(F>0?b+=F:F<0&&(w+=F)))}S=(b+w)/2}else S=this.Data.Data[p];if(null!=S&&!(g<d)){if(g=0,a)var M=this.ChartFrame.GetXFromIndex(v);else{var L=h,E=h+i;if(E>o)break;M=L+(E-L)/2}var N=this.GetYFromData(S,!1);if(M>o)break;this.Canvas.beginPath(),this.Canvas.arc(M,N,c,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()}},this.PtInLine=function(t,e,a){if(this.IsShow&&!this.ChartFrame.IsMinSize){var i=!0===this.ChartFrame.IsHScreen;if(!i){var r=this.IsMinuteFrame(),n=this.ChartFrame.DataWidth,s=this.ChartFrame.DistanceWidth,o=this.ChartFrame.XPointCount;if(i)var h=this.ChartBorder.GetHScreenBorder(),l=h.BottomEx,u=h.TopEx+s/2+xi.FrameLeftMargin;else h=this.ChartBorder.GetBorder(),u=h.LeftEx+s/2+xi.FrameLeftMargin,l=h.RightEx;var c=this.GetLockRect();if(c&&(l=i?c.Top:c.Left),t<u||t>l)return null;if(e>h.BottomEx||e<h.TopEx)return null;var d={},f={},C=0;a&&(a.KLineClose?C=1:a.MinuteOverlayPrice&&(C=1==a.OverlayType?1:3));for(var m=this.Data.DataOffset,D=0;m<this.Data.Data.length&&D<o;++m,++D,u+=n+s){var p=null;if(1==C){var v=this.Data.Data[m];ze.IsNumber(v.Close)&&(p=v.Close)}else if(3==C){var g=this.Data.Data[m].Close;if(null==g)continue;p=g/this.YClose*this.MainYClose}else p=this.Data.Data[m];if(null!=p){if(r)var S=this.ChartFrame.GetXFromIndex(D);else{var I=u,T=u+n;if(T>l)break;S=I+(T-I)/2}var x=this.GetYFromData(p,!1);if(!(S<t)){if(S==t){d.X=f.X=S,d.Y=f.Y=x;break}f.X=S,f.Y=x;break}if(d.X=S,d.Y=x,t>l)break}}if(!ze.IsNumber(d.X)||!ze.IsNumber(d.Y))return null;if(!ze.IsNumber(f.X)||!ze.IsNumber(f.Y))return null;if(t==d.X||e==d.Y)return{Identify:this.Identify,Chart:this};if(t==f.X||e==f.Y)return{Identify:this.Identify,Chart:this};return this.Canvas.beginPath(),d.X==f.X?(this.Canvas.moveTo(d.X-5,d.Y),this.Canvas.lineTo(d.X+5,d.Y),this.Canvas.lineTo(f.X+5,f.Y),this.Canvas.lineTo(f.X-5,f.Y)):(this.Canvas.moveTo(d.X,d.Y+5),this.Canvas.lineTo(d.X,d.Y-5),this.Canvas.lineTo(f.X,f.Y-5),this.Canvas.lineTo(f.X,f.Y+5)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?{Identify:this.Identify,Chart:this}:null}}},this.PtInBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;var i=!0===this.ChartFrame.IsHScreen;if(i)return null;var r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,s=this.ChartBorder.GetBorder(),o=s.LeftEx+n/2+xi.FrameLeftMargin,h=s.RightEx,l=this.ChartFrame.XPointCount,u=this.GetLockRect();if(u&&(h=u.Left),t<o||t>h)return null;if(e>s.BottomEx||e<s.TopEx)return null;var c=this.IsMinuteFrame(),d=this.ChartFrame.GetYFromData(0),f=null,C=!1,m=!1;a&&(a.BarWidth>0&&(f=a.BarWidth),1==a.MinuteVolBar?(C=!0,f=4):1==a.StackedBar&&(m=!0));for(var D=this.Data.DataOffset,p=0;D<this.Data.Data.length&&p<l;++D,++p,o+=r+n){var v=this.Data.Data[D];if(null!=v){if(c)var g=this.ChartFrame.GetXFromIndex(p),S=g-f/2,I=S+f;else{S=o,I=o+r;if(I>h)break}if(C){if(!ze.IsNumber(v.Vol))continue;var T=this.ChartFrame.GetYFromData(v.Vol),x=T,y=d}else if(m){var A=0,b=0;if(!ze.IsNonEmptyArray(v))continue;for(var w=0;w<v.length;++w){var F=v[w];ze.IsNumber(F)&&(0!=F&&(F>0?A+=F:F<0&&(b+=F)))}x=this.ChartFrame.GetYFromData(A),y=this.ChartFrame.GetYFromData(b)}else T=this.ChartFrame.GetYFromData(v),x=T,y=d;x>y&&(x=d,y=T);var M=S,L=I;if(f>0&&(M=S+(I-S)/2-f/2,L=M+f),t>=M&&t<=L&&e>=x&&e<=y)return{Identify:this.Identify,Chart:this};if(I>t)break}}return null},this.PtInKBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;var i=!0===this.ChartFrame.IsHScreen;if(i)return null;var r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,s=this.ChartBorder.GetBorder(),o=s.LeftEx+n/2+xi.FrameLeftMargin,h=s.RightEx,l=this.ChartFrame.XPointCount;if(i){s=this.ChartBorder.GetHScreenBorder();o=s.TopEx+n/2+xi.FrameLeftMargin,h=s.BottomEx}if(t<o||t>h)return null;if(e>s.BottomEx||e<s.TopEx)return null;var u=null,c=0,d=null;a&&a.OverlayKLine&&(c=1,d=this.GetFirstOpen());for(var f=this.Data.DataOffset,C=0;f<this.Data.Data.length&&C<l;++f,++C,o+=r+n){var m=this.Data.Data[f];if(null!=m.Open&&null!=m.High&&null!=m.Low&&null!=m.Close){null==u&&(u=m.Open);var D=o,p=o+r;if(p>h)break;if(t>=D&&t<=p){if(1==c)var v=this.GetYFromData(m.Low/u*d,!1),g=this.GetYFromData(m.High/u*d,!1);else v=this.GetYFromData(m.Low,!1),g=this.GetYFromData(m.High,!1);if(e<=v&&e>=g)return{Identify:this.Identify,Chart:this}}if(p>t)break}}},this.IsShowIndexTitleOnly=function(){return!!(this.ChartFrame&&this.ChartFrame.ChartBorder&&this.ChartFrame.ChartBorder.IsShowTitleOnly)},this.IsHideScriptIndex=function(){return!(!this.Script||0!=this.Script.IsShow)},this.ExportArrayData=function(t,e){var a=this.Data.ExportArrayData(t,e);return[{Name:this.Name,Data:a}]},this.ExportBoolData=function(t,e){var a=this.Data.ExportBoolData(t,e);return[{Name:this.Name,Data:a}]},this.GetArrayItemData=function(t){if(!t)return null;if(!ze.IsNumber(t.Index))return null;if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length)return null;var a=this.Data.Data[e];return[{Value:a,Color:this.Color,Name:this.Name}]}}var gt=[[48,10],[44,10],[40,9],[36,9],[32,8],[28,8],[24,7],[20,7],[18,6],[16,6],[15,5],[13,5],[9,4],[7,4],[5,4],[3,3],[3,1],[2,1],[1,1],[1,0]];function St(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKLine",this.Symbol,this.DrawType=0,this.CloseLineColor=xi.CloseLineColor,this.CloseLineAreaColor=xi.CloseLineAreaColor,this.CloseLineWidth=xi.CloseLineWidth,this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.UnchagneColor=xi.UnchagneBarColor,this.ColorData,this.TradeData,this.TradeIcon=xi.KLine.TradeIcon,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.IsShowMaxMinPrice=!0,this.IsShowKTooltip=!0,this.TextFont=xi.KLine.MaxMin.Font,this.TextColor=xi.KLine.MaxMin.Color,this.InfoData,this.InfoPosition=0,this.PtMax,this.PtMin,this.TickSymbol="╳",this.TickFontName="arial",this.Period,this.ShowRange={},this.CustomKLine,this.DrawKRange={Start:null,End:null},this.IsThinAKBar=!0,this.HighLowBarColor=xi.HighLowBarColor,this.HLCAreaConfig={HighLineColor:xi.HLCArea.HighLineColor,LowLineColor:xi.HLCArea.LowLineColor,CloseLineColor:xi.HLCArea.CloseLineColor,LineWidth:xi.HLCArea.LineWidth,UpAreaColor:xi.HLCArea.UpAreaColor,DownAreaColor:xi.HLCArea.DownAreaColor},this.VirtualBarConfig={Color:xi.VirtualKLine.Color,LineDash:xi.VirtualKLine.LineDash},this.FFKChart,this.OrderFlow={UpColor:{BG:xi.OrderFlow.UpColor.BG,Border:xi.OrderFlow.UpColor.Border},DownColor:{BG:xi.OrderFlow.DownColor.BG,Border:xi.OrderFlow.DownColor.Border},UnchagneColor:{BG:xi.OrderFlow.UnchagneColor.BG,Border:xi.OrderFlow.UnchagneColor.Border},Text:{Color:xi.OrderFlow.Text.Color,Family:xi.OrderFlow.Text.Family,FontMaxSize:xi.OrderFlow.Text.FontMaxSize,MaxValue:xi.OrderFlow.Text.MaxValue},Line:{UpDownColor:xi.OrderFlow.Line.UpDownColor,MiddleColor:xi.OrderFlow.Line.MiddleColor},POCGBColor:xi.OrderFlow.POCGBColor,ShowType:0,AskBarColor:xi.OrderFlow.AskBarColor,BidBarColor:xi.OrderFlow.BidBarColor,AlwaysShowOrderText:xi.OrderFlow.AlwaysShowOrderText,IsShowAskText:!0,IsShowAskBar:!1,IsShowBidText:!0,IsShowBidBar:!1,IsShowPOCBG:!0},this.OrderFlow_Style2={BarWidth:xi.OrderFlow_Style2.BarWidth,UpColor:xi.OrderFlow_Style2.UpColor,DownColor:xi.OrderFlow_Style2.DownColor,UnchagneColor:xi.OrderFlow_Style2.UnchagneColor},this.OrderFlow_Style3={BarWidth:xi.OrderFlow_Style3.BarWidth,UpColor:xi.OrderFlow_Style3.UpColor,DownColor:xi.OrderFlow_Style3.DownColor,UnchagneColor:xi.OrderFlow_Style3.UnchagneColor},this.IsShowOrderText=!1,this.AryOrderFlowBorder=[],this.ChartHeatMap,this.ReloadResource=function(t){this.TextFont=xi.KLine.MaxMin.Font,this.TextColor=xi.KLine.MaxMin.Color,this.CloseLineColor=xi.CloseLineColor,this.CloseLineAreaColor=xi.CloseLineAreaColor,this.CloseLineWidth=xi.CloseLineWidth,this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.UnchagneColor=xi.UnchagneBarColor,this.HighLowBarColor=xi.HighLowBarColor,this.OrderFlow.UpColor={BG:xi.OrderFlow.UpColor.BG,Border:xi.OrderFlow.UpColor.Border},this.OrderFlow.DownColor={BG:xi.OrderFlow.DownColor.BG,Border:xi.OrderFlow.DownColor.Border},this.OrderFlow.UnchagneColor={BG:xi.OrderFlow.UnchagneColor.BG,Border:xi.OrderFlow.UnchagneColor.Border},this.OrderFlow.Text={Color:xi.OrderFlow.Text.Color,Family:xi.OrderFlow.Text.Family,FontMaxSize:xi.OrderFlow.Text.FontMaxSize,MaxValue:xi.OrderFlow.Text.MaxValue},this.OrderFlow.Line={UpDownColor:xi.OrderFlow.Line.UpDownColor,MiddleColor:xi.OrderFlow.Line.MiddleColor}},this.ClearCustomKLine=function(){this.CustomKLine=null},this.GetCustomKLine=function(t){if(!this.CustomKLine)return null;if(!t)return null;var e=1e6*t.Date;if(ze.IsNumber(t.Time)&&(e+=t.Time),!this.CustomKLine.has(e))return null;var a=this.CustomKLine.get(e);return a},this.DrawHeatMap=function(){this.ChartHeatMap&&(this.ChartHeatMap.Canvas=this.Canvas,this.ChartHeatMap.ChartBorder=this.ChartBorder,this.ChartHeatMap.ChartFrame=this.ChartFrame,this.ChartHeatMap.Data=this.Data,this.ChartHeatMap.Draw())},this.ClearHeatMap=function(){this.ChartHeatMap=null},this.CreateHeatMap=function(){this.ChartHeatMap=new Tt},this.DrawAKLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx;var o=this.UpColor,h=this.DownColor,l=this.UnchagneColor,u={X:null,Y:null,Value:null,Align:"left"},c={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;var d=null;this.GetEventCallback&&(d=this.GetEventCallback(C.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var f=this.Data.DataOffset,m=0;f<this.Data.Data.length&&m<i;++f,++m,n+=e+a,++this.ShowRange.DataCount){var D=this.Data.Data[f];if(this.ShowRange.End=f,null!=D.Open&&null!=D.High&&null!=D.Low&&null!=D.Close){var p=n,v=n+e;if(v>s)break;var g=p+(v-p)/2,S=this.GetYFromData(D.Low,!1),I=this.GetYFromData(D.High,!1),T=this.GetYFromData(D.Open,!1),x=this.GetYFromData(D.Close,!1);if(this.DrawKRange.End=f,(null==u.Value||u.Value<D.High)&&(u.X=g,u.Y=I,u.Value=D.High,u.Align=m<i/2?"left":"right"),(null==c.Value||c.Value>D.Low)&&(c.X=g,c.Y=S,c.Value=D.Low,c.Align=m<i/2?"left":"right"),l=this.UnchagneColor,D.Open<D.Close)this.Canvas.strokeStyle=this.UpColor;else if(D.Open>D.Close)this.Canvas.strokeStyle=this.DownColor;else{if(d&&d.Callback){var y={KItem:D,DataIndex:f,DefaultColor:l,BarColor:null};d.Callback(d,y,this),y.BarColor&&(l=y.BarColor)}this.Canvas.strokeStyle=l}if(this.ColorData&&(o=h=l=f<this.ColorData.length&&this.ColorData[f]>0?this.UpColor:this.DownColor),0==this.IsThinAKBar&&e>=9){var A={YLow:S,YHigh:I,YOpen:T,YClose:x,X:g,Left:p,Right:v},b={UpColor:o,DownColor:h,UnchangeColor:l};this.DrawAKBar(D,e,t,A,b)}else this.Canvas.beginPath(),t?D.High==D.Low&&e<4?(this.Canvas.moveTo(I,F(g)),this.Canvas.lineTo(S-1,F(g))):(this.Canvas.moveTo(I,F(g)),this.Canvas.lineTo(S,F(g))):D.High==D.Low&&e<4?(this.Canvas.moveTo(F(g),I),this.Canvas.lineTo(F(g),S+1)):(this.Canvas.moveTo(F(g),I),this.Canvas.lineTo(F(g),S)),this.Canvas.stroke(),e>=4&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(F(T),p),this.Canvas.lineTo(F(T),g)):(this.Canvas.moveTo(p,F(T)),this.Canvas.lineTo(g,F(T))),this.Canvas.stroke(),this.Canvas.beginPath(),t?(this.Canvas.moveTo(F(x),v),this.Canvas.lineTo(F(x),g)):(this.Canvas.moveTo(v,F(x)),this.Canvas.lineTo(g,F(x))),this.Canvas.stroke());if(0==this.Data.DataType){var w={Xleft:p,XRight:v,YMax:I,XCenter:g,YMin:S,DayData:D,Index:m};this.DrawInfo(w)}}}this.PtMax=u,this.PtMin=c},this.DrawAKBar=function(t,e,a,i,r){var n=e/3,s=L(i.Left),o=[s,L(s+n),L(s+2*n),L(s+3*n)],h=i.YHigh,l=i.YLow,u=i.YOpen,c=i.YClose;if(t.Open<t.Close?(this.Canvas.strokeStyle=r.UpColor,this.Canvas.fillStyle=r.UpColor):t.Open>t.Close?(this.Canvas.strokeStyle=r.DownColor,this.Canvas.fillStyle=r.DownColor):(this.Canvas.strokeStyle=r.UnchangeColor,this.Canvas.fillStyle=r.UnchangeColor),a)if(t.High==t.Low){var d=h-n/2;this.Canvas.fillRect(d,o[1],n,o[2]-o[1])}else this.Canvas.fillRect(h,o[1],l-h,o[2]-o[1]);else if(t.High==t.Low){d=h-n/2;this.Canvas.fillRect(o[1],d,o[2]-o[1],n)}else this.Canvas.fillRect(o[1],h,o[2]-o[1],l-h);d=u-n/2;a?this.Canvas.fillRect(d,o[0],n,o[1]-o[0]):this.Canvas.fillRect(o[0],d,o[1]-o[0],n);d=c-n/2;a?this.Canvas.fillRect(d,o[2],n,o[3]-o[2]):this.Canvas.fillRect(o[2],d,o[3]-o[2],n)},this.DrawCloseArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx,o=r.TopEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx,o=r.LeftEx;var h=!0,l=null;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,ze.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth);var u=null;if(this.Data.DataOffset>0){var c=this.Data.Data[this.Data.DataOffset-1];if(c&&ze.IsNumber(c.Close)){var d=o,f=this.GetYFromData(c.Close,!1);t?(this.Canvas.moveTo(f,d),l={X:f,Y:d}):(this.Canvas.moveTo(d,f),l={X:d,Y:f}),h=!1}}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var C=this.Data.DataOffset,m=0;C<this.Data.Data.length&&m<i;++C,++m,n+=e+a,++this.ShowRange.DataCount){c=this.Data.Data[C];if(this.ShowRange.End=C,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var D=n,p=n+e;if(p>s)break;d=D+(p-D)/2,f=this.GetYFromData(c.Close,!1);this.DrawKRange.End=C,h?(t?(this.Canvas.moveTo(f,d),l={X:f,Y:d}):(this.Canvas.moveTo(d,f),l={X:d,Y:f}),h=!1):t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),C==this.Data.Data.length-1&&(u={X:d,Y:f,XLeft:D,XRight:p,KItem:c,ChartRight:s})}}if(this.DrawLastPointEvent(u),!h){if(this.Canvas.stroke(),t?(this.Canvas.lineTo(r.Left,d),this.Canvas.lineTo(r.Left,l.Y)):(this.Canvas.lineTo(d,r.Bottom),this.Canvas.lineTo(l.X,r.Bottom)),this.Canvas.closePath(),Array.isArray(this.CloseLineAreaColor))if(t){var v=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());v.addColorStop(0,this.CloseLineAreaColor[0]),v.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=v}else{var g=this.Canvas.createLinearGradient(l.X,this.ChartBorder.GetTopEx(),l.X,this.ChartBorder.GetBottom());g.addColorStop(0,this.CloseLineAreaColor[0]),g.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=g}else this.Canvas.fillStyle=this.CloseLineAreaColor;this.Canvas.fill()}},this.DrawCloseLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx;var o=!0;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,ze.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<i;++h,++l,n+=e+a,++this.ShowRange.DataCount){var u=this.Data.Data[h];if(this.ShowRange.End=h,null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){var c=n,d=n+e;if(d>s)break;var f=c+(d-c)/2,C=this.GetYFromData(u.Close,!1);this.DrawKRange.End=h,o?(t?this.Canvas.moveTo(C,f):this.Canvas.moveTo(f,C),o=!1):t?this.Canvas.lineTo(C,f):this.Canvas.lineTo(f,C)}}0==o&&this.Canvas.stroke()},this.DrawKBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+xi.FrameLeftMargin,n=i.BottomEx}var o={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"},l=this.UpColor,u=this.DownColor,c=this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s;var d=null;this.DrawKRange.Start=this.Data.DataOffset;var f=null;this.GetEventCallback&&(f=this.GetEventCallback(C.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var m=this.Data.DataOffset,D=0;m<this.Data.Data.length&&D<s;++m,++D,r+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[m];if(this.ShowRange.End=m,null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){var v=r,g=r+e;if(g>n)break;var S=v+(g-v)/2,I=this.GetYFromData(p.Low,!1),T=this.GetYFromData(p.High,!1),x=this.GetYFromData(p.Open,!1),y=this.GetYFromData(p.Close,!1),A=T;this.DrawKRange.End=m,(null==o.Value||o.Value<p.High)&&(o.X=S,o.Y=T,o.Value=p.High,o.Align=D<s/2?"left":"right"),(null==h.Value||h.Value>p.Low)&&(h.X=S,h.Y=I,h.Value=p.Low,h.Align=D<s/2?"left":"right"),this.ColorData&&(l=u=c=m<this.ColorData.length&&this.ColorData[m]>0?this.UpColor:this.DownColor);var b=this.GetCustomKLine(p);if(p.IsNonTrade)this.DrawVirtualBar(p,e,S,A,v,g,I,T,x,y,t);else if(b){var w=b.Color;w||(w=p.Open<p.Close?l:p.Open>p.Close?u:c);var F=this.DrawType;ze.IsNumber(b.DrawType)&&(F=b.DrawType),this.DrawKBar_Custom(p,e,w,F,b,S,A,v,g,I,T,x,y,i,t)}else if(9==this.DrawType&&p.ColorData)this.DrawColorKBar(p,p.ColorData,e,S,A,v,g,I,T,x,y,t);else if(p.Open<p.Close)this.DrawKBar_Up(p,e,l,this.DrawType,S,A,v,g,I,T,x,y,t);else if(p.Open>p.Close)this.DrawKBar_Down(p,e,u,this.DrawType,S,A,v,g,I,T,x,y,t);else{w=c;if(f&&f.Callback){var M={KItem:p,DataIndex:m,DefaultColor:w,BarColor:null};f.Callback(f,M,this),M.BarColor&&(w=M.BarColor)}this.DrawKBar_Unchagne(p,e,w,this.DrawType,S,A,v,g,I,T,x,y,t)}if(this.IsShowKTooltip&&!t){var L=Math.min(x,y),E=Math.max(x,y);Math.abs(x-y)<5&&(L=Math.min(T,L-5),E=Math.max(I,E+5)),p.IsNonTrade&&(L=T,E=I);var N=new Dt(v,L,e,E-L);this.TooltipRect.push([m,N])}if(0==this.Data.DataType||1==this.Data.DataType){var P={Xleft:v,XRight:g,XCenter:S,YMax:T,YMin:I,DayData:p,Index:D};this.DrawInfo(P)}m==this.Data.Data.length-1&&(d={X:S,Y:y,XLeft:v,XRight:g,KItem:p,ChartRight:n})}}this.DrawLastPointEvent(d),this.PtMax=o,this.PtMin=h},this.DrawKBar_Up=function(t,e,a,i,r,n,s,o,h,l,u,c,d){var f=3==i||6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(3==i?Math.max(c,u):c),F(r));else if(f){var C=s+e/2;this.Canvas.moveTo(F(C),F(n)),this.Canvas.lineTo(F(C),F(Math.min(c,u)))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,d?Math.abs(u-n)<1?this.Canvas.fillRect(L(n),L(s),1,L(e)):f?(this.Canvas.beginPath(),this.Canvas.rect(F(n),F(s),L(u-n),L(e)),this.Canvas.stroke()):this.Canvas.fillRect(L(n),L(s),L(u-n),L(e)):Math.abs(u-n)<1?this.Canvas.fillRect(L(s),L(n),L(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(F(s),F(n),L(e),L(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(L(s),L(Math.min(n,u)),L(e),L(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(3==i?Math.min(c,u):n),F(r)),this.Canvas.lineTo(F(h),F(r));else if(f){C=s+e/2;this.Canvas.moveTo(F(C),F(Math.max(c,u))),this.Canvas.lineTo(F(C),F(h))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h,F(r))):(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Down=function(t,e,a,i,r,n,s,o,h,l,u,c,d){var f=6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(u),F(r));else if(f){var C=s+e/2;this.Canvas.moveTo(F(C),F(n)),this.Canvas.lineTo(F(C),F(Math.min(c,u)))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(u));this.Canvas.stroke(),n=u}else n=u;if(this.Canvas.fillStyle=a,d?Math.abs(c-n)<1?this.Canvas.fillRect(L(n),L(s),1,L(e)):this.Canvas.fillRect(L(n),L(s),L(c-n),L(e)):Math.abs(c-n)<1?this.Canvas.fillRect(L(s),L(n),L(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(F(s),F(Math.min(n,c)),L(e),L(Math.abs(c-n))),this.Canvas.stroke()):this.Canvas.fillRect(L(s),L(Math.min(n,c)),L(e),L(Math.abs(c-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(h),F(r));else if(f){C=s+e/2;this.Canvas.moveTo(F(C),F(Math.max(c,u))),this.Canvas.lineTo(F(C),F(h))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h,F(r))):(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(d)this.Canvas.moveTo(n,F(r)),this.Canvas.lineTo(u,F(r));else{var f=F(s+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(d?(this.Canvas.moveTo(F(n),F(s)),this.Canvas.lineTo(F(n),F(o))):(this.Canvas.moveTo(F(s),F(n)),this.Canvas.lineTo(F(s+e),F(n))),t.Open>t.Low)if(d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(h),F(r));else{f=F(s+e/2);this.Canvas.moveTo(f,F(n)),this.Canvas.lineTo(f,F(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),d?t.High==t.Low?(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h-1,F(r))):(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h,F(r))):t.High==t.Low?(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h+1)):(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f,C){if(r.BGColor){this.Canvas.fillStyle=r.BGColor;var m=this.ChartFrame.DistanceWidth;if(C){var D=o-m/2,p=h+m/2,v=f.RightEx,g=f.LeftEx;this.Canvas.fillRect(L(g),L(D),L(v-g),L(p-D))}else{var S=o-m/2,I=h+m/2,T=f.TopEx,x=f.BottomEx;this.Canvas.fillRect(L(S),L(T),L(I-S),L(x-T))}}e>=4?(this.Canvas.strokeStyle=a,t.High>t.Close?(this.Canvas.beginPath(),C?(this.Canvas.moveTo(F(s),F(n)),this.Canvas.lineTo(F(3==i?Math.max(d,c):d),F(n))):(this.Canvas.moveTo(F(n),F(s)),this.Canvas.lineTo(F(n),F(3==i?Math.min(d,c):d))),this.Canvas.stroke(),s=d):s=d,this.Canvas.fillStyle=a,C?Math.abs(c-s)<1?this.Canvas.fillRect(L(s),L(o),1,L(e)):3==i?(this.Canvas.beginPath(),this.Canvas.rect(F(s),F(o),L(c-s),L(e)),this.Canvas.stroke()):this.Canvas.fillRect(L(s),L(o),L(c-s),L(e)):Math.abs(c-s)<1?this.Canvas.fillRect(L(o),L(s),L(e),1):3==i?(this.Canvas.beginPath(),this.Canvas.rect(F(o),F(s),L(e),L(c-s)),this.Canvas.stroke()):this.Canvas.fillRect(L(o),L(Math.min(s,c)),L(e),L(Math.abs(c-s))),t.Open>t.Low&&(this.Canvas.beginPath(),C?(this.Canvas.moveTo(F(3==i?Math.min(d,c):s),F(n)),this.Canvas.lineTo(F(l),F(n))):(this.Canvas.moveTo(F(n),F(3==i?Math.max(d,c):s)),this.Canvas.lineTo(F(n),F(l))),this.Canvas.stroke())):(this.Canvas.beginPath(),C?(this.Canvas.moveTo(u,F(n)),this.Canvas.lineTo(l,F(n))):(this.Canvas.moveTo(F(n),u),this.Canvas.lineTo(F(n),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke())},this.DrawColorKBar=function(t,e,a,i,r,n,s,o,h,l,u,c){Math.abs(u-r)<1?this.DrawColorKBar_Line(t,e,a,i,r,n,s,o,h,l,u,c):e.Border||0===e.Type?this.DrawColorKBar_Border(t,e,a,i,r,n,s,o,h,l,u,c):this.DrawColorKBar_NoBorder(t,e,a,i,r,n,s,o,h,l,u,c)},this.DrawColorKBar_Border=function(t,e,a,i,r,n,s,o,h,l,u,c){if(a>=4){a%2!=0&&(a-=1);var d=Math.max(t.Close,t.Open),f=Math.min(t.Close,t.Open);if(c)var C=Math.max(u,l),m=Math.min(u,l);else C=Math.min(u,l),m=Math.max(u,l);var D=Math.abs(u-l);if(t.High>d&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(F(h),F(i)),this.Canvas.lineTo(F(C),F(i));else{var p=n+a/2;this.Canvas.moveTo(F(p),F(h)),this.Canvas.lineTo(F(p),F(C))}this.Canvas.stroke()}if(f>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(F(m),F(i)),this.Canvas.lineTo(F(o),F(i));else{p=n+a/2;this.Canvas.moveTo(F(p),F(m)),this.Canvas.lineTo(F(p),F(o))}this.Canvas.stroke()}if(c){var v=new Path2D;v.rect(F(m),F(n),L(D),L(a))}else{v=new Path2D;v.rect(F(n),F(C),L(a),L(D))}0==e.Type?(e.BarColor&&(this.Canvas.strokeStyle=e.BarColor,this.Canvas.stroke(v)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(v))):1==e.Type&&(e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(v)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(v)))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,s,o,h,l,u,c)},this.DrawColorKBar_NoBorder=function(t,e,a,i,r,n,s,o,h,l,u,c){if(a>=4){var d=Math.max(t.Close,t.Open),f=Math.min(t.Close,t.Open);if(c)var C=Math.max(u,l),m=Math.min(u,l);else C=Math.min(u,l),m=Math.max(u,l);var D=Math.abs(u-l);if(t.High>d&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(F(h),F(i)),this.Canvas.lineTo(F(C),F(i));else{var p=n+a/2;this.Canvas.moveTo(F(p),F(h)),this.Canvas.lineTo(F(p),F(C))}this.Canvas.stroke()}if(f>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(F(m),F(i)),this.Canvas.lineTo(F(o),F(i));else{p=n+a/2;this.Canvas.moveTo(F(p),F(m)),this.Canvas.lineTo(F(p),F(o))}this.Canvas.stroke()}if(c){var v=new Path2D;v.rect(L(m),L(n),L(D),L(a))}else{v=new Path2D;v.rect(L(n),L(C),L(a),L(D))}1==e.Type&&e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(v))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,s,o,h,l,u,c)},this.DrawColorKBar_MinBar=function(t,e,a,i,r,n,s,o,h,l,u,c){e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(F(h),F(i)),this.Canvas.lineTo(F(o),F(i))):(this.Canvas.moveTo(F(i),F(h)),this.Canvas.lineTo(F(i),F(o))),this.Canvas.stroke())},this.DrawColorKBar_Line=function(t,e,a,i,r,n,s,o,h,l,u,c){var d;if(a>=4)e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(F(h),F(i)),this.Canvas.lineTo(F(o),F(i))):(this.Canvas.moveTo(F(i),F(h)),this.Canvas.lineTo(F(i),F(o))),this.Canvas.stroke()),(0==e.Type||1==e.Type)&&(e.Border?d=e.Border.Color:e.BarColor&&(d=e.BarColor)),d&&(this.Canvas.strokeStyle=d,this.Canvas.beginPath(),c?(this.Canvas.moveTo(F(l),F(n)),this.Canvas.lineTo(F(l),F(s))):(this.Canvas.moveTo(F(n),F(l)),this.Canvas.lineTo(F(s),F(l))),this.Canvas.stroke());else if(e.Line){this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(F(h),F(i)),this.Canvas.lineTo(F(o),F(i))):(this.Canvas.moveTo(F(i),F(h)),this.Canvas.lineTo(F(i),F(o))),this.Canvas.stroke()}},this.DrawVirtualBar=function(t,e,a,i,r,n,s,o,h,l,u){var c=Math.min(o,s),d=Math.max(o,s);this.Canvas.strokeStyle=this.VirtualBarConfig.Color,this.Canvas.setLineDash(this.VirtualBarConfig.LineDash),u?e>=4?this.Canvas.strokeRect(F(c),F(r),L(d-c),L(e)):(this.Canvas.beginPath(),this.Canvas.moveTo(c,F(a)),this.Canvas.lineTo(d,F(a)),this.Canvas.stroke()):e>=4?this.Canvas.strokeRect(F(r),F(c),L(e),L(d-c)):(this.Canvas.beginPath(),this.Canvas.moveTo(F(a),c),this.Canvas.lineTo(F(a),d),this.Canvas.stroke()),this.Canvas.setLineDash([])},this.DrawRenkoCandle=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx;var o={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<i;++l,++u,n+=e+a,++this.ShowRange.DataCount){var c=this.Data.Data[l];if(this.ShowRange.End=l,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var d=n,f=n+e;if(f>s)break;var C=d+(f-d)/2,m=this.GetYFromData(c.Low,!1),D=this.GetYFromData(c.High,!1);this.DrawKRange.End=l,(null==o.Value||o.Value<c.High)&&(o.X=C,o.Y=D,o.Value=c.High,o.Align=u<i/2?"left":"right"),(null==h.Value||h.Value>c.Low)&&(h.X=C,h.Y=m,h.Value=c.Low,h.Align=u<i/2?"left":"right"),c.YClose<c.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):c.YClose>c.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(L(m),L(d),L(Math.abs(m-D)),L(e)):this.Canvas.fillRect(L(d),L(D),L(e),L(Math.abs(m-D))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(D,F(C)),this.Canvas.lineTo(m,F(C))):(this.Canvas.moveTo(F(C),D),this.Canvas.lineTo(F(C),m)),this.Canvas.stroke())}}this.PtMax=o,this.PtMin=h},this.DrawLineBreak=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=a/2;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.TopEx+a/2+xi.FrameLeftMargin-r,o=n.BottomEx;else n=this.ChartBorder.GetBorder(),s=n.LeftEx+a/2+xi.FrameLeftMargin-r,o=n.RightEx;var h={X:null,Y:null,Value:null,Align:"left"},l={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,s+=e+a,++this.ShowRange.DataCount){var d=this.Data.Data[u];if(this.ShowRange.End=u,null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var f=s,C=s+e+a;if(C>o)break;var m=f+(C-f)/2,D=this.GetYFromData(d.Low,!1),p=this.GetYFromData(d.High,!1);this.DrawKRange.End=u,(null==h.Value||h.Value<d.High)&&(h.X=m,h.Y=p,h.Value=d.High,h.Align=c<i/2?"left":"right"),(null==l.Value||l.Value>d.Low)&&(l.X=m,l.Y=D,l.Value=d.Low,l.Align=c<i/2?"left":"right"),d.YClose<d.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):d.YClose>d.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(L(D),L(f),L(Math.abs(D-p)),L(e+a)):this.Canvas.fillRect(L(f),L(p),L(e+a),L(Math.abs(D-p))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(p,F(m)),this.Canvas.lineTo(D,F(m))):(this.Canvas.moveTo(F(m),p),this.Canvas.lineTo(F(m),D)),this.Canvas.stroke())}}this.PtMax=h,this.PtMin=l},this.DrawTrade=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e;h>10&&(h=10);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var d=!1,f=!1;if(s&&l<s.length&&(f=s[l]>0),o&&l<o.length&&(d=o[l]>0),f||d){var C=i,m=i+e;if(m>r)break;var D=C+(m-C)/2,p=this.GetYFromData(c.Low,!1),v=this.GetYFromData(c.High,!1);this.GetYFromData(c.Open,!1),this.GetYFromData(c.Close,!1);d&&(this.Canvas.fillStyle=this.UpColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(p-1,D),this.Canvas.lineTo(p-h-1,D-h/2),this.Canvas.lineTo(p-h-1,D+h/2)):(this.Canvas.moveTo(D,p+1),this.Canvas.lineTo(D-h/2,p+h+1),this.Canvas.lineTo(D+h/2,p+h+1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()),f&&(this.Canvas.fillStyle=this.DownColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(v+1,D),this.Canvas.lineTo(v+h+1,D-h/2),this.Canvas.lineTo(v+h+1,D+h/2)):(this.Canvas.moveTo(D,v-1),this.Canvas.lineTo(D-h/2,v-h-1),this.Canvas.lineTo(D+h/2,v-h-1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke())}}}}},this.DrawTick=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount,s=parseInt(e);s<=1?s=2:s>=18&&(s=18);var o=I(),h=s*o;this.Canvas.beginPath(),this.Canvas.font=s*o+"px "+this.TickFontName,this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=n,this.DrawKRange.Start=this.Data.DataOffset;for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var c=this.Data.Data[l];if(this.ShowRange.End=l,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var d=i,f=i+e;if(f>r)break;var C=d+(f-d)/2,m=this.ChartFrame.GetYFromData(c.Close,!1);if(this.DrawKRange.End=l,0===c.Flag?this.Canvas.fillStyle=this.UpColor:1==c.Flag?this.Canvas.fillStyle=this.DownColor:this.Canvas.fillStyle=this.UnchagneColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",t?this.Canvas.fillText(this.TickSymbol,m,C):this.Canvas.fillText(this.TickSymbol,C,m),this.IsShowKTooltip&&!t){var D=new Dt(C-h/2,m-h/2,h,h);this.TooltipRect.push([l,D])}}}},this.DrawHLCArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx,o=r.TopEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx,o=r.LeftEx;var h=new Path2D,l=new Path2D,u=new Path2D,c=new Path2D,d=new Path2D,f=[],C=[],m=[],D=!0;if(this.Data.DataOffset>0){var p=this.Data.Data[this.Data.DataOffset-1];if(p&&ze.IsNumber(p.Close)&&ze.IsNumber(p.High)&&ze.IsNumber(p.Low)){var v=o,g=this.GetYFromData(p.Close,!1),S=this.GetYFromData(p.High,!1),I=this.GetYFromData(p.Low,!1);t?(u.moveTo(g,v),l.moveTo(S,v),h.moveTo(I,v),c.moveTo(S,v),d.moveTo(I,v),m.push({X:g,Y:v}),f.push({X:S,Y:v}),C.push({X:I,Y:v})):(u.moveTo(v,g),l.moveTo(v,S),h.moveTo(v,I),c.moveTo(v,S),d.moveTo(v,I),m.push({X:v,Y:g}),f.push({X:v,Y:S}),C.push({X:v,Y:I})),D=!1}}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var T=this.Data.DataOffset,x=0;T<this.Data.Data.length&&x<i;++T,++x,n+=e+a,++this.ShowRange.DataCount){p=this.Data.Data[T];if(this.ShowRange.End=T,p&&ze.IsNumber(p.Close)&&ze.IsNumber(p.High)&&ze.IsNumber(p.Low)){var y=n,A=n+e;if(A>s)break;v=y+(A-y)/2,g=this.GetYFromData(p.Close,!1),S=this.GetYFromData(p.High,!1),I=this.GetYFromData(p.Low,!1);this.DrawKRange.End=T,D?(t?(u.moveTo(g,v),l.moveTo(S,v),h.moveTo(I,v),c.moveTo(S,v),d.moveTo(I,v)):(u.moveTo(v,g),l.moveTo(v,S),h.moveTo(v,I),c.moveTo(v,S),d.moveTo(v,I)),D=!1):t?(u.lineTo(g,v),l.lineTo(S,v),h.lineTo(I,v),c.lineTo(S,v),d.lineTo(I,v)):(u.lineTo(v,g),l.lineTo(v,S),h.lineTo(v,I),c.lineTo(v,S),d.lineTo(v,I)),t?(m.push({X:g,Y:v}),f.push({X:S,Y:v}),C.push({X:I,Y:v})):(m.push({X:v,Y:g}),f.push({X:v,Y:S}),C.push({X:v,Y:I}))}}if(!D){for(T=m.length-1;T>=0;--T){var b=m[T];c.lineTo(b.X,b.Y),d.lineTo(b.X,b.Y)}c.closePath(),d.closePath(),this.Canvas.fillStyle=this.HLCAreaConfig.UpAreaColor,this.Canvas.fill(c),this.Canvas.fillStyle=this.HLCAreaConfig.DownAreaColor,this.Canvas.fill(d),ze.IsNumber(this.HLCAreaConfig.LineWidth)&&(this.Canvas.lineWidth=this.HLCAreaConfig.LineWidth),this.Canvas.strokeStyle=this.HLCAreaConfig.CloseLineColor,this.Canvas.stroke(u),this.Canvas.strokeStyle=this.HLCAreaConfig.HighLineColor,this.Canvas.stroke(l),this.Canvas.strokeStyle=this.HLCAreaConfig.LowLineColor,this.Canvas.stroke(h)}},this.ClipTickClient=function(t){var e=this.GetBorder();if(1==t)var a=this.ChartBorder.GetLeftEx(),i=this.ChartBorder.GetRightEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom();else a=e.Left,i=e.Right,r=e.TopTitle,n=e.Bottom;this.Canvas.beginPath(),this.Canvas.rect(a,r,i-a,n-r),this.Canvas.clip()},this.ClipWindow=function(t){if(1==t)var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottom();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else{e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.ChartBorder.BottomSpace>0&&(r+=1)}this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.Draw=function(){if(this.IsShowOrderText=!1,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.PtMax={X:null,Y:null,Value:null,Align:"left"},this.PtMin={X:null,Y:null,Value:null,Align:"left"},this.DrawKRange={Start:null,End:null},this.ChartFrame.ChartKLine={Max:null,Min:null},this.DrawHeatMap(),this.IsShow&&(!this.ChartFrame.IsMinSize||"Self Kline"!=this.Name)){if(ut.IsTickPeriod(this.Period))return this.Canvas.save(),1==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseLine()):4==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseArea()):(this.ClipTickClient(this.ChartFrame.IsHScreen),this.DrawTick()),void this.Canvas.restore();if(this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==this.DrawType)return this.DrawCloseLine(),void this.Canvas.restore();2==this.DrawType?this.DrawAKLine():4==this.DrawType?this.DrawCloseArea():5==this.DrawType?this.DrawOrderFlow():7==this.DrawType?this.DrawOrderFlow_Style2():8==this.DrawType?this.DrawOrderFlow_Style3():9==this.DrawType?this.DrawKBar():10==this.DrawType?this.DrawRenkoCandle():12==this.DrawType?this.DrawLineBreak():13==this.DrawType?this.DrawHighLow():14==this.DrawType?this.FFKChart&&this.FFKChart.Draw&&this.FFKChart.Draw(this):15==this.DrawType?this.DrawHLCArea():this.DrawKBar(),this.TradeIcon?this.DrawTradeIcon():this.DrawTrade(),this.Canvas.restore(),this.IsShowMaxMinPrice&&(!0===this.ChartFrame.IsHScreen?this.HScreenDrawMaxMinPrice(this.PtMax,this.PtMin):this.DrawMaxMinPrice(this.PtMax,this.PtMin))}},this.DrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=xi.KLine.MaxMin.LeftArrow,i=xi.KLine.MaxMin.RightArrow,r=xi.KLine.MaxMin.HighYOffset,n=xi.KLine.MaxMin.LowYOffset,s=Hr(this.Symbol);this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor;var o=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx(),l=t;1==this.ChartFrame.CoordinateType?(t.Y<e.Y&&(l=e),this.Canvas.textBaseline="top"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="bottom"),this.Canvas.textAlign=l.Align;var u=(l.Align,l.X);ze.IsNumber(r)&&(l.Y+=r);var c=l.Value.toFixed(s);"left"==l.Align?c=a+c:c+=i,l.Y>o-2&&(this.Canvas.fillText(c,u,l.Y),this.ChartFrame.ChartKLine.Max={X:u,Y:l.Y,Text:{BaseLine:"bottom"}});var d=e;1==this.ChartFrame.CoordinateType?(e.Y>t.Y&&(d=t),this.Canvas.textBaseline="bottom"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="top"),this.Canvas.textAlign=d.Align;u=(d.Align,d.X);ze.IsNumber(n)&&(d.Y+=n);c=e.Value.toFixed(s);"left"==d.Align?c=a+c:c+=i,d.Y<h+1&&(this.Canvas.fillText(c,u,d.Y),this.ChartFrame.ChartKLine.Min={X:u,Y:d.Y,Text:{BaseLine:"top"}})}},this.HScreenDrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=xi.KLine.MaxMin.LeftArrow,i=xi.KLine.MaxMin.RightArrow,r=xi.KLine.MaxMin.HighYOffset,n=xi.KLine.MaxMin.LowYOffset,s=Hr(this.Symbol),o=t.Y,h=t.X;ze.IsNumber(r)&&(o+=r),this.Canvas.save(),this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=t.Align,this.Canvas.textBaseline="bottom";var l=t.Value.toFixed(s);"left"==t.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore();o=e.Y,h=e.X;ze.IsNumber(n)&&(o+=n),this.Canvas.save(),this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=e.Align,this.Canvas.textBaseline="top";l=e.Value.toFixed(s);"left"==e.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore()}},this.DrawInfo=function(t){if(this.InfoData&&!(this.InfoData.size<=0)){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetBottom(),n=this.ChartBorder.GetTop(),s="".concat(t.DayData.Date);if(1==this.Data.DataType&&(s="".concat(t.DayData.Date,"-").concat(t.DayData.Time)),this.InfoData.has(s)){var o=this.InfoData.get(s);if(o&&!(o.Data.length<=0)){this.Canvas.restore(),this.Canvas.save(),this.ClipWindow(e);var l=I(),u=a+i,c=18*l,d=!0;u<=15&&(d=!1),u<c&&(u=c);var f,C="",m=new Map,D=t.YMax+1*l,p=t.YMin+1*l+u,v=!0,g=0;for(var S in o.Data){var T=o.Data[S],x=m.get(T.InfoType);if(x)x.Data.push(T);else{var y=ir.GetIconFont(T.InfoType);if(this.Canvas.fillStyle=y.Color,this.Canvas.font=u+"px "+y.Family,e){this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillText(y.HScreenText,D,t.XCenter,u);var A=new Dt(t.XCenter-u/2,D-u,u,u),b={Data:new Array(T),Rect:A,Type:T.InfoType,TextRect:{X:D,Y:t.XCenter}};m.set(T.InfoType,b),D+=u}else if(this.Canvas.textBaseline="bottom",this.Canvas.textAlign="center",1===this.InfoPosition){var w=r+g;this.Canvas.fillText(y.Text,t.XCenter,w,u);A=new Dt(t.XCenter-u/2,w-u,u,u),b={Data:new Array(T),Rect:A,Type:T.InfoType,TextRect:{X:t.XCenter,Y:w}};m.set(T.InfoType,b),g-=u}else if(v){this.Canvas.fillText(y.Text,t.XCenter,D,u);A=new Dt(t.XCenter-u/2,D-u,u,u),b={Data:new Array(T),Rect:A,Type:T.InfoType,TextRect:{X:t.XCenter,Y:D}};m.set(T.InfoType,b),D-=u,D-u<n&&(v=!1)}else{this.Canvas.fillText(y.Text,t.XCenter,p,u);A=new Dt(t.XCenter-u/2,p-u,u,u),b={Data:new Array(T),Rect:A,Type:T.InfoType,TextRect:{X:t.XCenter,Y:p}};m.set(T.InfoType,b),p+=u}}}xi.KLine.NumIcon&&(f=e?xi.KLine.NumIcon.HScreenText:xi.KLine.NumIcon.Text);var F,M=(0,h.default)(m);try{for(M.s();!(F=M.n()).done;){t=F.value;var L=t[1];if(L.Data.length>=2&&f&&d){var E=L.Data.length;E>=f.length&&(E=0),this.Canvas.fillStyle=xi.KLine.NumIcon.Color;C=f[E];this.Canvas.fillText(C,L.TextRect.X,L.TextRect.Y,u)}e||this.InfoTooltipRect.push(L)}}catch(N){M.e(N)}finally{M.f()}this.Canvas.restore(),this.Canvas.save(),this.ClipClient(e)}}}},this.DrawTradeIcon=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e+a,l=I(),u=24*l,c=12*l;h<c?h=c:h>u&&(h=u),this.Canvas.font=h+"px "+this.TradeIcon.Family;for(var d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<n;++d,++f,i+=e+a){var C=this.Data.Data[d];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var m=!1,D=!1;if(s&&d<s.length&&(D=s[d]>0),o&&d<o.length&&(m=o[d]>0),D||m){var p=i,v=i+e;if(v>r)break;var g=p+(v-p)/2,S=this.GetYFromData(C.Low,!1),T=this.GetYFromData(C.High,!1);this.GetYFromData(C.Open,!1),this.GetYFromData(C.Close,!1);if(m)if(this.Canvas.fillStyle=this.TradeIcon.Buy.Color,t)this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Buy.HScreenText,S,g);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.Canvas.fillText(this.TradeIcon.Buy.Text,g,S);var x=new Dt(g-h/2,S,h,h),y={Data:{Type:1,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:x,TextRect:{X:g,Y:S}};this.TradeIconTooltipRect.push(y)}if(D)if(this.Canvas.fillStyle=this.TradeIcon.Sell.Color,t)this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Sell.HScreenText,T,g);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.TradeIcon.Sell.Text,g,T);x=new Dt(g-h/2,T-h,h,h),y={Data:{Type:2,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:x,TextRect:{X:g,Y:T}};this.TradeIconTooltipRect.push(y)}}}}}},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i in this.TradeIconTooltipRect){var r=this.TradeIconTooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return l.Chart.Log("[ChartKLine::GetTooltipData] trade icon ",r),a.Data=r,a.ChartPaint=this,a.Type=2,!0}}for(var i in this.InfoTooltipRect){r=this.InfoTooltipRect[i];if(r.Rect){n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=1,!0}}for(var i in this.TooltipRect){n=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var s=this.TooltipRect[i][0];return a.Data=this.Data.Data[s],a.ChartPaint=this,a.Type=0,!0}}return!1},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFKChart&&this.FFKChart.GetMaxMin)return this.FFKChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e={Max:null,Min:null};if(1==this.DrawType||4==this.DrawType)for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];ze.IsNumber(r.Close)&&(null==e.Max&&(e.Max=r.Close),null==e.Min&&(e.Min=r.Close),e.Max<r.Close&&(e.Max=r.Close),e.Min>r.Close&&(e.Min=r.Close))}else for(a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close)if(5==this.DrawType&&r.OrderFlow&&ze.IsNumber(r.OrderFlow.PriceOffset)){var n=r.High,s=r.Low;if(ze.IsNonEmptyArray(r.OrderFlow.High))for(var o=0;o<r.OrderFlow.High.length;++o){var h=r.OrderFlow.High[o];n<h.Price&&(n=h.Price)}if(ze.IsNonEmptyArray(r.OrderFlow.Low))for(o=0;o<r.OrderFlow.Low.length;++o){h=r.OrderFlow.Low[o];s>h.Price&&(s=h.Price)}n+=r.OrderFlow.PriceOffset,s-=r.OrderFlow.PriceOffset,null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=s),e.Max<n&&(e.Max=n),e.Min>s&&(e.Min=s)}else null==e.Max&&(e.Max=r.High),null==e.Min&&(e.Min=r.Low),e.Max<r.High&&(e.Max=r.High),e.Min>r.Low&&(e.Min=r.Low)}return e},this.GetAllPrice=function(){for(var t=this.ChartFrame.XPointCount,e=new Set,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close){var n=r.Close;e.add(n)}}var s,o=[],l=(0,h.default)(e);try{for(l.s();!(s=l.n()).done;){var u=s.value;o.push(u)}}catch(c){l.e(c)}finally{l.f()}return o.sort((function(t,e){return t-e})),o},this.DrawLastPointEvent=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(C.ON_DRAW_KLINE_LAST_POINT);if(e){var a={Data:this.ChartFrame.DataWidth,Distance:this.ChartFrame.DistanceWidth};if(t)var i={LastPoint:{X:t.X,Y:t.Y,XLeft:t.XLeft,XRight:t.XRight},KItem:t.KItem,DrawType:this.DrawType,KWidth:a,ChartRight:t.ChartRight};else i={LastPoint:null,KItem:null,KWidth:a};e.Callback(e,i,this)}}},this.DrawOrderFlow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+xi.FrameLeftMargin,n=i.BottomEx}this.UpColor,this.DownColor,this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.DrawKRange.Start=this.Data.DataOffset;this.DrawOrderFlowHBar();for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<s;++o,++h,r+=e+a,++this.ShowRange.DataCount){var l=this.Data.Data[o];if(this.ShowRange.End=o,null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=r,c=r+e;if(c>n)break;var d=u+(c-u)/2,f=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1),m=this.GetYFromData(l.Open,!1),D=this.GetYFromData(l.Close,!1);this.DrawKRange.End=o;var p={Low:f,High:C,Open:m,Close:D},v={Left:u,Center:d,Right:c,DataWidth:e};if(this.DrawOrderFlowBar(l.OrderFlow,l,v,p,t),this.IsShowKTooltip&&!t){var g=Math.min(m,D),S=Math.max(m,D);Math.abs(m-D)<5&&(g=Math.min(C,g-5),S=Math.max(f,S+5));var I=new Dt(u,g,e,S-g);this.TooltipRect.push([o,I])}if(0==this.Data.DataType){var T={Xleft:u,XRight:c,XCenter:d,YMax:C,YMin:f,DayData:l,Index:h};this.DrawInfo(T)}o==this.Data.Data.length-1&&{X:d,Y:D,XLeft:u,XRight:c,KItem:l,ChartRight:n}}}},this.DrawOrderFlowBar=function(t,e,a,i,r){var n=Math.min(i.Open,i.Close),s=Math.max(i.Open,i.Close),o=Math.abs(i.Open-i.Close),h=0;t&&ze.IsNumber(t.PriceOffset)&&(h=this.GetPriceYOffset(t.PriceOffset));var l,u=this.GetDynamicOrderFlowFont(h,a.DataWidth/2);this.IsShowOrderText=h>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),l=e.Open<e.Close?this.OrderFlow.UpColor:e.Open>e.Close?this.OrderFlow.DownColor:this.OrderFlow.UnchagneColor;var c=a.DataWidth<4;c?(this.Canvas.strokeStyle=l.Border,this.Canvas.beginPath(),this.Canvas.moveTo(F(a.Center),n-h/2),this.Canvas.lineTo(F(a.Center),s+h/2),this.Canvas.stroke()):(this.Canvas.fillStyle=l.BG,this.Canvas.fillRect(L(a.Left),L(n-h/2),L(a.DataWidth),L(o+h))),this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=u;var d=a.DataWidth/2,f=d/2;if(t&&ze.IsNonEmptyArray(t.Order)){var C=0,m=0,D=null;if(this.OrderFlow.IsShowAskBar||this.OrderFlow.IsShowBidBar||this.OrderFlow.IsShowPOCBG)for(var p=0,v=0,g=0;g<t.Order.length;++g){var S=t.Order[g];v=0,S.Ask&&ze.IsNumber(S.Ask.Value)&&(C+=S.Ask.Value,v+=S.Ask.Value),S.Bid&&ze.IsNumber(S.Bid.Value)&&(m+=S.Bid.Value,v+=S.Bid.Value),p<v&&(p=v,D=g)}for(g=0;g<t.Order.length;++g){S=t.Order[g];var I=this.GetYFromData(S.Price,!1),T={Left:a.Left,Right:a.Center,Bottom:I+h/2,Top:I-h/2};if(T.Width=T.Right-T.Left,T.Height=T.Bottom-T.Top,S.Ask.BG&&(this.Canvas.fillStyle=S.Ask.BG,this.Canvas.fillRect(L(T.Left),L(T.Top),L(T.Width),L(T.Height))),this.OrderFlow.IsShowPOCBG&&D==g&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(L(T.Left),L(T.Top),L(T.Width),L(T.Height))),this.OrderFlow.IsShowAskBar&&ze.IsNumber(S.Ask.Value)&&C>0){var x=T.Width*(S.Ask.Value/C);x<1&&(x=1),this.Canvas.fillStyle=this.OrderFlow.AskBarColor,this.Canvas.fillRect(L(T.Right),L(T.Top),L(-x),L(T.Height))}var y=null;if(ze.IsString(S.Ask.Text)?y=S.Ask.Text:ze.IsNumber(S.Ask.Value)&&(y=S.Ask.Value.toString()),y&&this.IsShowOrderText&&this.OrderFlow.IsShowAskText)if(S.Ask.Color?this.Canvas.fillStyle=S.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,S.Ask.Font){var A=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,S.Ask.Font);this.Canvas.font=A,this.Canvas.fillText(y,a.Left+f,I),this.Canvas.font=u}else this.Canvas.fillText(y,a.Left+f,I);T={Left:a.Center,Right:a.Right,Bottom:I+h/2,Top:I-h/2};if(T.Width=T.Right-T.Left,T.Height=T.Bottom-T.Top,S.Bid.BG&&(this.Canvas.fillStyle=S.Bid.BG,this.Canvas.fillRect(L(T.Left),L(T.Top),L(T.Width),L(T.Height))),this.OrderFlow.IsShowPOCBG&&D==g&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(L(T.Left),L(T.Top),L(T.Width),L(T.Height))),this.OrderFlow.IsShowBidBar&&ze.IsNumber(S.Bid.Value)&&m>0){x=T.Width*(S.Bid.Value/m);x<1&&(x=1),this.Canvas.fillStyle=this.OrderFlow.BidBarColor,this.Canvas.fillRect(L(T.Left),L(T.Top),L(x),L(T.Height))}y=null;if(ze.IsString(S.Bid.Text)?y=S.Bid.Text:ze.IsNumber(S.Bid.Value)&&(y=S.Bid.Value.toString()),y&&this.IsShowOrderText&&this.OrderFlow.IsShowBidText)if(S.Bid.Color?this.Canvas.fillStyle=S.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,S.Bid.Font){A=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,S.Bid.Font);this.Canvas.font=A,this.Canvas.fillText(y,a.Center+f,I),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center+f,I)}}(i.High<n||i.Low>s)&&(this.Canvas.strokeStyle=this.OrderFlow.Line.UpDownColor,i.High<n&&(this.Canvas.beginPath(),this.Canvas.moveTo(F(a.Center),i.High-h/2),this.Canvas.lineTo(F(a.Center),n-h/2),this.Canvas.stroke()),i.Low>s&&(this.Canvas.beginPath(),this.Canvas.moveTo(F(a.Center),i.Low+h/2),this.Canvas.lineTo(F(a.Center),s+h/2),this.Canvas.stroke())),!c&&Math.abs(i.Open-i.Close)>1&&(this.Canvas.strokeStyle=this.OrderFlow.Line.MiddleColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(a.Center),n-h/2),this.Canvas.lineTo(F(a.Center),s+h/2),this.Canvas.stroke()),c||(this.Canvas.beginPath(),this.Canvas.strokeStyle=l.Border,this.Canvas.rect(F(a.Left),F(n-h/2),L(a.DataWidth),L(o+h)),this.Canvas.stroke());u=this.GetDynamicOrderFlowFont(h,a.DataWidth);if(t&&ze.IsNonEmptyArray(t.High)&&this.IsShowOrderText)for(g=0;g<t.High.length;++g){S=t.High[g];if(ze.IsString(S.Text)?y=S.Text:ze.IsNumber(S.Value)&&(y=S.Value.toString()),y){S.Color?this.Canvas.fillStyle=S.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;I=this.GetYFromData(S.Price,!1);if(S.Font){A=this.GetDynamicOrderFlowFont(h,a.DataWidth,S.Font);this.Canvas.font=A,this.Canvas.fillText(y,a.Center,I),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center,I)}}if(t&&ze.IsNonEmptyArray(t.Low)&&this.IsShowOrderText)for(g=0;g<t.Low.length;++g){S=t.Low[g];if(ze.IsString(S.Text)?y=S.Text:ze.IsNumber(S.Value)&&(y=S.Value.toString()),y){S.Color?this.Canvas.fillStyle=S.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;I=this.GetYFromData(S.Price,!1);if(S.Font){A=this.GetDynamicOrderFlowFont(h,a.DataWidth,S.Font);this.Canvas.font=A,this.Canvas.fillText(y,a.Center,I),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center,I)}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a},this.GetDynamicOrderFlowFont=function(t,e,a){var i=parseInt(t)-2;t<5&&(i=parseInt(t)),i>this.OrderFlow.Text.FontMaxSize?i=this.OrderFlow.Text.FontMaxSize:i<=0&&(i=1);for(var r=this.FormatFontString(i,this.OrderFlow.Text.Family,a),n=i;n>0;n-=2){r=this.FormatFontString(n,this.OrderFlow.Text.Family,a);this.Canvas.font=r;var s=this.Canvas.measureText(this.OrderFlow.Text.MaxValue).width+2;if(s<e)break}return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i="".concat(a.Weight," ").concat(t,"px ").concat(e)):i="".concat(t,"px ").concat(e),i},this.DrawOrderFlowHBar=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=this.Data.DataOffset,s=this.Data.DataOffset+a,o=0;o<this.Data.Data.length;++o){var h=this.Data.Data[o];if(h&&h.OrderFlow&&ze.IsNonEmptyArray(h.OrderFlow.Order))for(var l=0;l<h.OrderFlow.Order.length;++l){var u=h.OrderFlow.Order[l];if(u.HBar&&(ze.IsNumber(u.HBar.Width)&&ze.IsNumber(u.Price)&&!(u.Price>i||u.Price<r))){var c=Math.ceil(o+u.HBar.Width),d=Math.min(o,c),f=Math.max(o,c);f<n||d>s||this.DrawOrderFlowHBarItem(o,h.OrderFlow,u,t,e)}}}},this.DrawOrderFlowHBarItem=function(t,e,a,i,r){var n=this.ShowRange.Start,s=(this.ShowRange.Start,this.ShowRange.ShowCount,this.GetYFromData(a.Price,!1)),o=parseInt(t+a.HBar.Width),h=t-n,l=o-n;if(h<0&&(h=0),l<0&&(l=0),h<=l){this.ChartBorder.GetRight(),this.ChartFrame.XPointCount;var u=n,c=this.GetPriceYOffset(e.PriceOffset),d=this.ChartFrame.GetXFromIndex(h)-i/2;if(1==a.HBar.Type)for(var f=0,C=t+1;f<a.HBar.Width&&C<this.Data.Data.length;++f,++C){var m=this.Data.Data[C];if(m.Close<a.Price){l=C-1-u;break}}else if(2==a.HBar.Type)for(f=0,C=t+1;f<a.HBar.Width&&C<this.Data.Data.length;++f,++C){m=this.Data.Data[C];if(m.Close>a.Price){l=C-1-u;break}}if(l<0)return;var D=this.ChartFrame.GetXFromIndex(l)+i/2,p=s-c/2,v=c+.5;ze.IsNumber(a.HBar.Height)&&(v=a.HBar.Height*c+.1);var g=a.HBar.Width-parseInt(a.HBar.Width);g>1e-6&&(D+=(i+r)*g),this.Canvas.fillStyle=a.HBar.Color,this.Canvas.fillRect(L(d),L(p),L(D-d),L(v))}},this.PtInChart=function(t,e){return 1==this.DrawType||4==this.DrawType?this.PtInLine(t,e,{KLineClose:!0}):this.PtInKBar(t,e)},this.DrawSelectedStatus=function(){this.DrawLinePoint({KLineClose:!0})},this.DrawOrderFlow_Style2=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+xi.FrameLeftMargin,n=i.BottomEx}var o=this.OrderFlow_Style2.UpColor,h=this.OrderFlow_Style2.DownColor,l=this.OrderFlow_Style2.UnchagneColor,u=L(this.OrderFlow_Style2.BarWidth),c=e-u;c/7<u&&(u=c/7),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<s;++d,++f,r+=e+a,++this.ShowRange.DataCount){var C=this.Data.Data[d];if(this.ShowRange.End=d,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var m=r,D=r+e;if(D>n)break;var p=m+(D-m)/2,v=this.GetYFromData(C.Low,!1),g=this.GetYFromData(C.High,!1),S=this.GetYFromData(C.Open,!1),I=this.GetYFromData(C.Close,!1);this.DrawKRange.End=d;var T=Math.min(S,I),x=Math.max(S,I),y=L(m),A=y+u;C.Open<C.Close?this.Canvas.fillStyle=o:C.Open>C.Close?this.Canvas.fillStyle=h:this.Canvas.fillStyle=l;var b=0;C.OrderFlow&&ze.IsNumber(C.OrderFlow.PriceOffset)&&(b=this.GetPriceYOffset(C.OrderFlow.PriceOffset)),this.Canvas.fillRect(y,L(T-b/2),u,L(x-T+b));var w={Low:v,High:g,Open:S,Close:I},M={Left:A,Center:p,Right:D,DataWidth:D-A};M.Center=M.Left+M.DataWidth/2,this.DrawOrderFlowBar_Style2(C.OrderFlow,C,M,w,t)}}if(e-u>5)for(d=0;d<this.AryOrderFlowBorder.length;++d){var E=this.AryOrderFlowBorder[d];if(E&&E.Rect&&E.Color){var N=E.Rect;this.Canvas.strokeStyle=E.Color,this.Canvas.beginPath(),this.Canvas.rect(F(N.Left),F(N.Top),L(N.Width),L(N.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlow_Style3=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+xi.FrameLeftMargin,n=i.BottomEx}var o=this.OrderFlow_Style3.UpColor,h=this.OrderFlow_Style3.DownColor,l=this.OrderFlow_Style3.UnchagneColor,u=L(this.OrderFlow_Style3.BarWidth);e/4<u&&(u=e/4),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var c=this.Data.DataOffset,d=0;c<this.Data.Data.length&&d<s;++c,++d,r+=e+a,++this.ShowRange.DataCount){var f=this.Data.Data[c];if(this.ShowRange.End=c,null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){var C=r,m=r+e;if(m>n)break;var D=this.GetYFromData(f.Low,!1),p=this.GetYFromData(f.High,!1),v=this.GetYFromData(f.Open,!1),g=this.GetYFromData(f.Close,!1);this.DrawKRange.End=c;var S=Math.min(v,g),I=Math.max(v,g),T=L(C),x=T+u;f.Open<f.Close?this.Canvas.fillStyle=o:f.Open>f.Close?this.Canvas.fillStyle=h:this.Canvas.fillStyle=l;var y=0;f.OrderFlow&&ze.IsNumber(f.OrderFlow.PriceOffset)&&(y=this.GetPriceYOffset(f.OrderFlow.PriceOffset)),this.Canvas.fillRect(T,L(S-y/2),u,L(I-S+y));var A={Low:D,High:p,Open:v,Close:g},b={Left:x,Right:m,DataWidth:m-x};this.DrawOrderFlowBar_Style3(f.OrderFlow,f,b,A,t)}}if(e-u>5)for(c=0;c<this.AryOrderFlowBorder.length;++c){var w=this.AryOrderFlowBorder[c];if(w&&w.Rect&&w.Color){var M=w.Rect;this.Canvas.strokeStyle=w.Color,this.Canvas.beginPath(),this.Canvas.rect(F(M.Left),F(M.Top),L(M.Width),L(M.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlowBar_Style2=function(t,e,a,i,r){Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close);var n=0;t&&ze.IsNumber(t.PriceOffset)&&(n=this.GetPriceYOffset(t.PriceOffset));var s=this.GetDynamicOrderFlowFont(n,a.DataWidth/2);this.IsShowOrderText=n>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=s;a.DataWidth;if(t&&ze.IsNonEmptyArray(t.Order))for(var o=0;o<t.Order.length;++o){var h=t.Order[o],l=this.GetYFromData(h.Price,!1),u={Left:a.Left,Right:a.Center,Bottom:l+n/2,Top:l-n/2};if(u.Width=u.Right-u.Left,u.Height=u.Bottom-u.Top,h.Ask.BG&&(this.Canvas.fillStyle=h.Ask.BG,this.Canvas.fillRect(L(u.Left),L(u.Top),L(u.Width),L(u.Height))),h.Ask.BorderColor){var c={Rect:u,Color:h.Ask.BorderColor};this.AryOrderFlowBorder.push(c)}var d=null;if(ze.IsString(h.Ask.Text)?d=h.Ask.Text:ze.IsNumber(h.Ask.Value)&&(d=h.Ask.Value.toString()),d&&this.IsShowOrderText)if(h.Ask.Color?this.Canvas.fillStyle=h.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,h.Ask.Font){var f=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Ask.Font);this.Canvas.font=f,this.Canvas.fillText(d,a.Left+2,l),this.Canvas.font=s}else this.Canvas.fillText(d,a.Left+2,l);u={Left:a.Center,Right:a.Right,Bottom:l+n/2,Top:l-n/2};if(u.Width=u.Right-u.Left,u.Height=u.Bottom-u.Top,h.Bid.BG&&(this.Canvas.fillStyle=h.Bid.BG,this.Canvas.fillRect(L(u.Left),L(u.Top),L(u.Width),L(u.Height))),h.Bid.BorderColor){c={Rect:u,Color:h.Bid.BorderColor};this.AryOrderFlowBorder.push(c)}d=null;if(ze.IsString(h.Bid.Text)?d=h.Bid.Text:ze.IsNumber(h.Bid.Value)&&(d=h.Bid.Value.toString()),d&&this.IsShowOrderText)if(h.Bid.Color?this.Canvas.fillStyle=h.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,h.Bid.Font){f=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Bid.Font);this.Canvas.font=f,this.Canvas.fillText(d,a.Center+2,l),this.Canvas.font=s}else this.Canvas.fillText(d,a.Center+2,l)}},this.DrawOrderFlowBar_Style3=function(t,e,a,i,r){Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close);var n=a.DataWidth-4,s=0;t&&ze.IsNumber(t.PriceOffset)&&(s=this.GetPriceYOffset(t.PriceOffset));var o=this.GetDynamicOrderFlowFont(s,n);this.IsShowOrderText=s>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=o;if(t&&ze.IsNonEmptyArray(t.Order))for(var h=0;h<t.Order.length;++h){var l=t.Order[h],u=this.GetYFromData(l.Price,!1),c={Left:a.Left,Right:a.Right,Bottom:u+s/2,Top:u-s/2};if(c.Width=c.Right-c.Left,c.Height=c.Bottom-c.Top,l.Item.BG&&(this.Canvas.fillStyle=l.Item.BG,this.Canvas.fillRect(L(c.Left),L(c.Top),L(c.Width),L(c.Height))),l.Item.BorderColor){var d={Rect:c,Color:l.Item.BorderColor};this.AryOrderFlowBorder.push(d)}var f=null;if(ze.IsString(l.Item.Text)?f=l.Item.Text:ze.IsNumber(l.Item.Value)&&(f=l.Item.Value.toString()),f&&this.IsShowOrderText)if(l.Item.Color?this.Canvas.fillStyle=l.Item.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,l.Item.Font){var C=this.GetDynamicOrderFlowFont(s,n,l.Item.Font);this.Canvas.font=C,this.Canvas.fillText(f,a.Left+2,u),this.Canvas.font=o}else this.Canvas.fillText(f,a.Left+2,u)}},this.DrawHighLow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+xi.FrameLeftMargin,s=r.BottomEx;else r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+xi.FrameLeftMargin,s=r.RightEx;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.fillStyle=this.HighLowBarColor,this.Canvas.strokeStyle=this.HighLowBarColor;for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<i;++o,++h,n+=e+a,++this.ShowRange.DataCount){var l=this.Data.Data[o];if(this.ShowRange.End=o,null!=l.Open&&null!=l.High){var u=n,c=n+e;if(c>s)break;var d=u+(c-u)/2,f=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1);this.DrawKRange.End=o;var m=f,D=C-f;if(Math.abs(D)<1&&(D=1),e>=4)t?this.Canvas.fillRect(L(m),L(u),L(D),L(e)):this.Canvas.fillRect(L(u),L(m),L(e),L(D));else{d=u+(c-u)/2;this.Canvas.beginPath(),t?(this.Canvas.moveTo(F(f),F(d)),this.Canvas.lineTo(F(C),F(d))):(this.Canvas.moveTo(F(d),F(f)),this.Canvas.lineTo(F(d),F(C))),this.Canvas.stroke()}if(this.IsShowKTooltip&&!t){var p=Math.min(f,C),v=Math.max(f,C);Math.abs(p-v)<5&&(p=Math.min(C,p-5),v=Math.max(f,v+5));var g=new Dt(u,p,e,v-p);this.TooltipRect.push([o,g])}}}}}function It(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartColorKline",this.Symbol,this.Color="rgb(0,255,44)",this.IsEmptyBar=!1,this.DrawType=0,this.KLineColor,this.DrawName,this.Draw=function(){if(this.IsShow)if("DRAWCOLORKLINE"==this.DrawName)this.DrawColorBar();else{if(!this.KLineColor)return;this.DrawBar()}},this.DrawUpBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=this.ChartFrame.GetYFromData(t.Close),d=l;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(F(d),F(o)),this.Canvas.lineTo(F(3==this.DrawType?Math.max(c,u):c),F(o))):(this.Canvas.moveTo(F(o),F(d)),this.Canvas.lineTo(F(o),F(3==this.DrawType?Math.min(c,u):c))),this.Canvas.stroke(),d=c):d=c,r?Math.abs(u-d)<1?this.Canvas.fillRect(L(d),L(n),1,L(a)):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(F(d),F(n),L(u-d),L(a)),this.Canvas.stroke()):this.Canvas.fillRect(L(d),L(n),L(u-d),L(a)):Math.abs(u-d)<1?this.Canvas.fillRect(L(n),L(d),L(a),1):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(F(n),F(d),L(a),L(u-d)),this.Canvas.stroke()):this.Canvas.fillRect(L(n),L(Math.min(d,u)),L(a),L(Math.abs(u-d))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(F(3==this.DrawType?Math.min(c,u):d),F(o)),this.Canvas.lineTo(F(h),F(o))):(this.Canvas.moveTo(F(o),F(3==this.DrawType?Math.max(c,u):d)),this.Canvas.lineTo(F(o),F(h))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,F(o)),this.Canvas.lineTo(h,F(o))):(this.Canvas.moveTo(F(o),l),this.Canvas.lineTo(F(o),h)),this.Canvas.stroke())},this.DrawDownBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=this.ChartFrame.GetYFromData(t.Close),d=l;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(F(d),F(o)),this.Canvas.lineTo(F(u),F(o))):(this.Canvas.moveTo(F(o),F(d)),this.Canvas.lineTo(F(o),F(u))),this.Canvas.stroke(),d=u):d=u,r?Math.abs(c-d)<1?this.Canvas.fillRect(L(d),L(n),1,L(a)):this.Canvas.fillRect(L(d),L(n),L(c-d),L(a)):Math.abs(c-d)<1?this.Canvas.fillRect(L(n),L(d),L(a),1):this.Canvas.fillRect(L(n),L(Math.min(d,c)),L(a),L(Math.abs(c-d))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(F(d),F(o)),this.Canvas.lineTo(F(h),F(o))):(this.Canvas.moveTo(F(o),F(d)),this.Canvas.lineTo(F(o),F(h))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,F(o)),this.Canvas.lineTo(h,F(o))):(this.Canvas.moveTo(F(o),l),this.Canvas.lineTo(F(o),h)),this.Canvas.stroke())},this.DrawUnChangeBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=(this.ChartFrame.GetYFromData(t.Close),l);a>=4?(this.Canvas.beginPath(),t.High>t.Close?(r?(this.Canvas.moveTo(c,F(o)),this.Canvas.lineTo(u,F(o))):(this.Canvas.moveTo(F(o),c),this.Canvas.lineTo(F(o),u)),c=u):c=u,r?(this.Canvas.moveTo(F(c),F(n)),this.Canvas.lineTo(F(c),F(s))):(this.Canvas.moveTo(F(n),F(c)),this.Canvas.lineTo(F(s),F(c))),t.Open>t.Low&&(r?(this.Canvas.moveTo(F(c),F(o)),this.Canvas.lineTo(F(h),F(o))):(this.Canvas.moveTo(F(o),F(c)),this.Canvas.lineTo(F(o),F(h)))),this.Canvas.stroke()):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,F(o)),this.Canvas.lineTo(h,F(o))):(this.Canvas.moveTo(F(o),l),this.Canvas.lineTo(F(o),h)),this.Canvas.stroke())},this.DrawBar=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetLeft()+e/2+2,i=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;this.IsHScreen&&(a=this.ChartBorder.GetTop()+e/2+2,i=this.ChartBorder.GetBottom());for(var n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<r;++n,++s,a+=t+e){var o=this.Data.Data[n];if(null!=o.Open&&null!=o.High&&null!=o.Low&&null!=o.Close&&this.KLineColor.has(n)){var h=this.KLineColor.get(n),l=a+t;if(l>i)break;h.Color?(this.Canvas.strokeStyle=h.Color,this.Canvas.fillStyle=h.Color):(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color),o.Open<o.Close?this.DrawUpBarItem(o,a,t,h):o.Open>o.Close?this.DrawDownBarItem(o,a,t,h):this.DrawUnChangeBarItem(o,a,t,h)}}},this.DrawColorBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+xi.FrameLeftMargin,n=i.BottomEx}for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<s;++o,++h,r+=e+a){var l=this.Data.Data[o];if(l&&(ze.IsNumber(l.Open)&&ze.IsNumber(l.High)&&ze.IsNumber(l.Low)&&ze.IsNumber(l.Close))){var u=r,c=r+e;if(c>n)break;var d=u+(c-u)/2,f=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1),m=this.GetYFromData(l.Open,!1),D=this.GetYFromData(l.Close,!1),p=C;l.Open==l.Close?this.DrawKBar_Unchagne(l,e,this.Color,this.IsEmptyBar,d,p,u,c,f,C,m,D,t):this.DrawKBar_Custom(l,e,this.Color,this.IsEmptyBar,d,p,u,c,f,C,m,D,t)}}},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(d)this.Canvas.moveTo(n,F(r)),this.Canvas.lineTo(u,F(r));else{var f=F(s+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(d?(this.Canvas.moveTo(F(n),F(s)),this.Canvas.lineTo(F(n),F(o))):(this.Canvas.moveTo(F(s),F(n)),this.Canvas.lineTo(F(s+e),F(n))),t.Open>t.Low)if(d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(h),F(r));else{f=F(s+e/2);this.Canvas.moveTo(f,F(n)),this.Canvas.lineTo(f,F(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h,F(r))):(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(i&&e%2!=0&&(e-=1),e>=4){if(this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(n),F(r)),this.Canvas.lineTo(F(i?Math.max(c,u):c),F(r));else if(i){var f=s+e/2;this.Canvas.moveTo(F(f),F(n)),this.Canvas.lineTo(F(f),F(Math.min(c,u)))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,d?Math.abs(u-n)<1?this.Canvas.fillRect(L(n),L(s),1,L(e)):i?(this.Canvas.beginPath(),this.Canvas.rect(F(n),F(s),L(u-n),L(e)),this.Canvas.stroke()):this.Canvas.fillRect(L(n),L(s),L(u-n),L(e)):Math.abs(u-n)<1?this.Canvas.fillRect(L(s),L(n),L(e),1):i?(this.Canvas.beginPath(),this.Canvas.rect(F(s),F(n),L(e),L(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(L(s),L(Math.min(n,u)),L(e),L(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(F(i?Math.min(c,u):n),F(r)),this.Canvas.lineTo(F(h),F(r));else if(i){f=s+e/2;this.Canvas.moveTo(F(f),F(Math.max(c,u))),this.Canvas.lineTo(F(f),F(h))}else this.Canvas.moveTo(F(r),F(n)),this.Canvas.lineTo(F(r),F(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,F(r)),this.Canvas.lineTo(h,F(r))):(this.Canvas.moveTo(F(r),l),this.Canvas.lineTo(F(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.GetMaxMin=function(){var t={Max:null,Min:null};if("DRAWCOLORKLINE"==this.DrawName)for(var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<e;++a,++i){var r=this.Data.Data[a];r&&(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close&&(null==t.Max&&(t.Max=r.High),null==t.Min&&(t.Min=r.Low),t.Max<r.High&&(t.Max=r.High),t.Min>r.Low&&(t.Min=r.Low)))}return t}}function Tt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHeatMap",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+xi.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<n;++s,++o,i+=t+e){var h=this.Data.Data[s];if(h.HeatMap){var l=i,u=i+t;if(u>r)break;this.DrawHeatMap(l,u+e,h.HeatMap)}}}},this.DrawHeatMap=function(t,e,a){if(ze.IsNonEmptyArray(a.Order)){var i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=0;ze.IsNumber(a.PriceOffset)&&(n=this.GetPriceYOffset(a.PriceOffset));for(var s=0;s<a.Order.length;++s){var o=a.Order[s];if(ze.IsNumber(o.Price)&&(o.Color&&!(o.Price>i||o.Price<r))){var h=this.GetYFromData(o.Price,!1),l={Left:t,Right:e,Bottom:h+n/2,Top:h-n/2};l.Width=l.Right-l.Left,l.Height=l.Bottom-l.Top,this.Canvas.fillStyle=o.Color,this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height)}}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a}}var xt={STATUS_NONE_ID:0,STATUS_REQUESTDATA_ID:1,STATUS_RECVDATA_ID:2,STATUS_FINISHED_ID:3};function yt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOverlayKLine",this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.Title,this.DrawType=0,this.CustomDrawType=null,this.Status=xt.STATUS_NONE_ID,this.IsDelete=!1,this.CloseLineWidth=xi.CloseLineWidth,this.ShowRange={},this.DrawKRange={Start:null,End:null},this.YInfoType=4,this.SetOption=function(t){t&&(ze.IsNumber(t.DrawType)&&(this.CustomDrawType=t.DrawType),ze.IsNumber(t.YInfoType)&&(this.YInfoType=t.YInfoType))},this.DrawKBar=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=this.DrawType;null!=this.CustomDrawType&&(o=this.CustomDrawType);var h=!0,l=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<s;++u,++c,r+=a+i,++this.ShowRange.DataCount){var d=this.Data.Data[u];if(d&&null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){null==l&&(l=d.Open,this.ShowRange.FirstOverlayOpen=d.Open),h&&(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color,this.Canvas.beginPath(),h=!1);var f=r,C=r+a;if(C>n)break;var m=f+(C-f)/2,D=this.GetYFromData(d.Low/l*t,!1),p=this.GetYFromData(d.High/l*t,!1),v=this.GetYFromData(d.Open/l*t,!1),g=this.GetYFromData(d.Close/l*t,!1),S=p;this.DrawKRange.End=u,d.Open<d.Close?a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(F(S),F(m)),this.Canvas.lineTo(F(3==this.DrawType?Math.max(g,v):g),F(m))):(this.Canvas.moveTo(F(m),F(S)),this.Canvas.lineTo(F(m),F(3==this.DrawType?Math.min(g,v):g))),S=g):S=g,e?Math.abs(v-S)<1?this.Canvas.fillRect(L(S),L(f),1,L(a)):3==o?this.Canvas.rect(F(S),F(f),L(v-S),L(a)):this.Canvas.fillRect(L(S),L(f),L(v-S),L(a)):Math.abs(v-S)<1?this.Canvas.fillRect(L(f),L(S),L(a),1):3==o?this.Canvas.rect(F(f),F(S),L(a),L(v-S)):this.Canvas.fillRect(L(f),L(S),L(a),L(v-S)),d.Open>d.Low&&(e?(this.Canvas.moveTo(F(3==this.DrawType?Math.min(g,v):S),F(m)),this.Canvas.lineTo(F(D),F(m))):(this.Canvas.moveTo(F(m),F(3==this.DrawType?Math.max(g,v):S)),this.Canvas.lineTo(F(m),F(D))))):e?(this.Canvas.moveTo(p,F(m)),this.Canvas.lineTo(D,F(m))):(this.Canvas.moveTo(F(m),p),this.Canvas.lineTo(F(m),D)):d.Open>d.Close?a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(F(S),F(m)),this.Canvas.lineTo(F(v),F(m))):(this.Canvas.moveTo(F(m),F(S)),this.Canvas.lineTo(F(m),F(v))),S=v):S=v,e?Math.abs(g-S)<1?this.Canvas.fillRect(L(S),L(f),1,L(a)):this.Canvas.fillRect(L(S),L(f),L(g-S),L(a)):Math.abs(g-S)<1?this.Canvas.fillRect(L(f),L(S),L(a),1):this.Canvas.fillRect(L(f),L(S),L(a),L(g-S)),d.Open>d.Low&&(e?(this.Canvas.moveTo(F(S),F(m)),this.Canvas.lineTo(F(D),F(m))):(this.Canvas.moveTo(F(m),F(S)),this.Canvas.lineTo(F(m),F(D))))):e?(this.Canvas.moveTo(p,F(m)),this.Canvas.lineTo(D,F(m))):(this.Canvas.moveTo(F(m),p),this.Canvas.lineTo(F(m),D)):a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(S,F(m)),this.Canvas.lineTo(v,F(m))):(this.Canvas.moveTo(F(m),S),this.Canvas.lineTo(F(m),v)),S=v):S=v,e?(this.Canvas.moveTo(F(S),F(f)),this.Canvas.lineTo(F(S),F(C))):(this.Canvas.moveTo(F(f),F(S)),this.Canvas.lineTo(F(C),F(S))),d.Open>d.Low&&(e?(this.Canvas.moveTo(F(S),F(m)),this.Canvas.lineTo(F(D),F(m))):(this.Canvas.moveTo(F(m),F(S)),this.Canvas.lineTo(F(m),F(D))))):e?(this.Canvas.moveTo(p,F(m)),this.Canvas.lineTo(D,F(m))):(this.Canvas.moveTo(F(m),p),this.Canvas.lineTo(F(m),D));var I=Math.min(D,p,v,g),T=Math.max(D,p,v,g),x=new Dt(f,I,a,T-I);this.TooltipRect.push([u,x])}}0==h&&this.Canvas.stroke()},this.DrawAKLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.strokeStyle=this.Color;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<s;++h,++l,r+=a+i,++this.ShowRange.DataCount){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){null==o&&(o=u.Open,this.ShowRange.FirstOverlayOpen=u.Open);var c=r,d=r+a;if(d>n)break;var f=c+(d-c)/2,C=this.GetYFromData(u.Low/o*t,!1),m=this.GetYFromData(u.High/o*t,!1),D=this.GetYFromData(u.Open/o*t,!1),p=this.GetYFromData(u.Close/o*t,!1);this.DrawKRange.End=h,this.Canvas.beginPath(),e?(this.Canvas.moveTo(m,F(f)),this.Canvas.lineTo(C,F(f))):(this.Canvas.moveTo(F(f),m),this.Canvas.lineTo(F(f),C)),this.Canvas.stroke(),a>=4&&(this.Canvas.beginPath(),e?(this.Canvas.moveTo(F(D),c),this.Canvas.lineTo(F(D),f)):(this.Canvas.moveTo(c,F(D)),this.Canvas.lineTo(f,F(D))),this.Canvas.stroke(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(F(p),d),this.Canvas.lineTo(F(p),f)):(this.Canvas.moveTo(d,F(p)),this.Canvas.lineTo(f,F(p))),this.Canvas.stroke())}}},this.DrawCloseLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null,h=!0;this.Canvas.strokeStyle=this.Color,ze.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.beginPath();for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<s;++l,++u,r+=a+i,++this.ShowRange.DataCount){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){null==o&&(o=c.Open,this.ShowRange.FirstOverlayOpen=c.Open);var d=r,f=r+a;if(f>n)break;var C=d+(f-d)/2,m=this.GetYFromData(c.Close/o*t,!1);this.DrawKRange.End=l,h?(e?this.Canvas.moveTo(m,C):this.Canvas.moveTo(C,m),h=!1):e?this.Canvas.lineTo(m,C):this.Canvas.lineTo(C,m)}}0==h&&this.Canvas.stroke()},this.GetFirstOpen=function(){if(!this.MainData||!this.Data)return null;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=0;e<this.MainData.Data.length&&a<t;++e,++a){var i=this.MainData.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return i.Open}return null},this.Draw=function(){if(this.TooltipRect=[],this.InfoTooltipRect=[],this.DrawKRange={Start:null,End:null},this.MainData&&this.Data){this.ChartFrame.XPointCount;var t=this.GetFirstOpen();if(null!=t){var e=this.DrawType;null!=this.CustomDrawType&&(e=this.CustomDrawType),this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==e?this.DrawCloseLine(t):2==e?this.DrawAKLine(t):this.DrawKBar(t),this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Max:null,Min:null};if(!this.MainData||!this.Data)return e;for(var a=null,i=this.Data.DataOffset,r=0;i<this.MainData.Data.length&&r<t;++i,++r){var n=this.MainData.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close){a=n.Close;break}}if(null==a)return e;var s,o,h=null;for(i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<t;++i,++r){n=this.Data.Data[i];n&&null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(null==h&&(h=n.Open),s=n.High/h*a,o=n.Low/h*a,null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=o),e.Max<s&&(e.Max=s),e.Min>o&&(e.Min=o))}return e},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var n=this.TooltipRect[i][0];return a.Data=this.Data.Data[n],a.ChartPaint=this,!0}}return!1},this.PtInChart=function(t,e){var a=this.DrawType;return ze.IsNumber(this.CustomDrawType)&&(a=this.CustomDrawType),1==a||4==a?null:this.PtInKBar(t,e,{OverlayKLine:!0})},this.DrawSelectedStatus=function(){this.DrawLinePoint({OverlayKLine:!0})}}function At(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKlineTable",this.Data,this.RowName,this.IsShowRowName=!1,this.BGColor,this.RowCount=5,this.RowHeight=10,this.TextFontConfig=E(xi.ChartKLineTable.TextFont),this.ItemMergin=E(xi.ChartKLineTable.ItemMergin),this.TextFont,this.TextColor="rgb(0,0,0)",this.NameColor="rgb(0,0,0)",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen;if(!t&&!(this.RowCount<=0)){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.ChartFrame.GetBorder(),n=r.Bottom-r.TopTitle;this.RowHeight=n/this.RowCount;var s=r.LeftEx+xi.FrameLeftMargin,o=r.RightEx,h=r.TopTitle,l=r.Bottom;if(this.BGColor){this.Canvas.fillStyle=this.BGColor;var u=r.LeftEx,c=r.RightEx-r.LeftEx;n=l-h;this.Canvas.fillRect(u,h,c,n)}var d=this.RowHeight,f=e+a;d-this.ItemMergin.Top-this.ItemMergin.Bottom>0&&(d=d-this.ItemMergin.Left-this.ItemMergin.Right),f-this.ItemMergin.Left-this.ItemMergin.Right>0&&(f=f-this.ItemMergin.Left-this.ItemMergin.Right);var C=this.GetDynamicTextFont(d,f);this.TextFont=C,this.Canvas.font=this.TextFont;for(var m=this.Data.DataOffset,D=0;m<this.Data.Data.length&&D<i;++m,++D,s+=e+a){var p=this.Data.Data[m];if(p){u=s;var v=s+e+a;if(v>o)break;var g=u+(v-u)/2;if(g>o)break;0==D&&this.IsShowRowName?this.DrawRowName(h,l,u,v):this.DrawRow(p,h,l,u,v)}}}}},this.DrawRowName=function(t,e,a,i){if(ze.IsNonEmptyArray(this.RowName))for(var r=a,n=t,s=i-a,o=0;o<this.RowName.length;++o){var h=this.RowName[o],l={Left:r,Top:n,Right:i,Height:this.RowHeight,Width:s};l.Bottom=l.Top+this.RowHeight,h.Name&&l.Width>10&&(this.Canvas.fillStyle=h.Color?h.Color:this.TextColor,this.Canvas.textBaseline="middle","right"==h.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(h.Name,l.Right-2,l.Top+this.RowHeight/2,s-4)):"center"==h.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(h.Name,l.Left+l.Width/2,l.Top+this.RowHeight/2,s-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(h.Name,l.Left+2,l.Top+this.RowHeight/2,s-4))),n+=this.RowHeight}},this.DrawRow=function(t,e,a,i,r){for(var n=i,s=e,o=r-i,h=0;h<t.length;++h){var l=t[h],u={Left:n,Top:s,Right:r,Height:this.RowHeight,Width:o};u.Bottom=u.Top+this.RowHeight,l.BGColor&&(this.Canvas.fillStyle=l.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height)),l.Color&&u.Width>10&&(this.Canvas.fillStyle=l.Color,this.Canvas.textBaseline="middle","right"==l.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(l.Text,u.Right-2,u.Top+this.RowHeight/2,o-4)):"center"==l.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(l.Text,u.Left+u.Width/2,u.Top+this.RowHeight/2,o-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(l.Text,u.Left+2,u.Top+this.RowHeight/2,o-4))),s+=this.RowHeight}},this.GetDynamicTextFont=function(t,e,a){var i=parseInt(t)-2;t<5&&(i=parseInt(t)),i>this.TextFontConfig.FontMaxSize?i=this.TextFontConfig.FontMaxSize:i<=0&&(i=1);var r=this.FormatFontString(i,this.TextFontConfig.Family,a);return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i="".concat(a.Weight," ").concat(t,"px ").concat(e)):i="".concat(t,"px ").concat(e),i},this.GetMaxMin=function(){return{Min:0,Max:this.RowCount}}}function bt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteVolumBar",this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.UnchangeColor=xi.UnchagneBarColor,this.BarColorType=1,this.CustomColor=xi.Minute.VolBarColor,this.YClose,this.Symbol,this.BeforeOpenData,this.AfterCloseData,this.BeforeVolColor=xi.Minute.Before.VolColor,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.PtInChart=function(t,e){return this.PtInBar(t,e,{MinuteVolBar:!0})},this.DrawSelectedStatus=function(){return this.DrawLinePoint({MinuteVolBar:!0})},this.Draw=function(){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetHScreenBorder(),a=e.BottomEx;else e=this.ChartBorder.GetBorder(),a=e.RightEx;this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen();var i=this.ChartFrame.XPointCount,r=this.ChartFrame.GetYFromData(0),n=this.YClose,s=this.Data,o=Mr.IsShowMinuteColorVolBar(this.Symbol);o&&(this.Canvas.strokeStyle=this.CustomColor);for(var h=s.DataOffset,l=0;h<s.Data.length&&l<i;++h,++l){var u,c=s.Data[h];if(c){var d;if(u=c.Vol,d=c.Close,u){var f=this.ChartFrame.GetYFromData(u),C=this.ChartFrame.GetXFromIndex(l);if(C>a)break;o||(this.Canvas.strokeStyle=this.GetMinuteBarColor(d,n)),this.Canvas.beginPath(),t?(this.Canvas.moveTo(f,F(C)),this.Canvas.lineTo(r,F(C))):(this.Canvas.moveTo(F(C),f),this.Canvas.lineTo(F(C),r)),this.Canvas.stroke(),d&&(n=d)}}}this.DrawAfterClose(),this.DrawMultiDayAfterClose()},this.GetMinuteBarColor=function(t,e){return 1==this.BarColorType?t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor:t>=e?this.UpColor:this.DownColor},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=this.GetBorder(),r=!0===this.ChartFrame.IsHScreen,n=this.YClose,s=this.ChartFrame.GetYFromData(0);if(1==e.Ver)for(var o in e.Data){var h=e.Data[o];if(h&&ze.IsNumber(h.Vol[0])){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[0]);else l=this.ChartFrame.GetRightExtendXFromIndex(o,e),u=this.ChartFrame.GetRightExtendYFromData(h.Vol[0]);this.Canvas.strokeStyle=h.Price>=n?this.UpColor:this.DownColor,this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,F(l)),this.Canvas.lineTo(s,F(l))):(this.Canvas.moveTo(F(l),u),this.Canvas.lineTo(F(l),s)),this.Canvas.stroke(),h.Price&&(n=h.Price)}}else if(2==e.Ver||3==e.Ver){var c={Max:e.VolMax,Min:e.VolMin};for(var o in e.Data){h=e.Data[o];if(h){if(ze.IsPlusNumber(h.Vol[0])){if(a)l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[0],!1,{Range:c});else{l=this.ChartFrame.GetRightExtendXFromIndex(o,e);if(1==this.ShareAfterVol)u=this.ChartFrame.GetYFromData(h.Vol[0]);else u=this.ChartFrame.GetRightExtendYFromData(h.Vol[0],!1,{Range:c})}this.Canvas.strokeStyle=this.GetBarColor(h.ColorID),this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,F(l)),this.Canvas.lineTo(s,F(l))):(this.Canvas.moveTo(F(l),u),this.Canvas.lineTo(F(l),s)),this.Canvas.stroke()}if(ze.IsPlusNumber(h.Vol[1])){if(a)l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[1],!1,{Range:c});else{l=this.ChartFrame.GetRightExtendXFromIndex(o,e);if(1==this.ShareAfterVol)u=this.ChartFrame.GetYFromData(h.Vol[1]);else u=this.ChartFrame.GetRightExtendYFromData(h.Vol[1],!1,{Range:c})}this.Canvas.strokeStyle=this.GetBarColor(h.ColorID),this.Canvas.beginPath(),r?(u-=s,u=i.RightEx-u,this.Canvas.moveTo(u,F(l)),this.Canvas.lineTo(i.RightEx,F(l))):(u-=s,u=i.TopEx-u,this.Canvas.moveTo(F(l),u),this.Canvas.lineTo(F(l),i.TopEx)),this.Canvas.stroke()}}}}}},this.GetBarColor=function(t){switch(t){case 0:return this.UnchangeColor;case 1:return this.UpColor;case 2:return this.DownColor}if(this.BeforeVolColor&&Array.isArray(this.BeforeVolColor)){var e=t-3;if(e>=0&&e<this.BeforeVolColor.length)return this.BeforeVolColor[e]}return this.UnchangeColor},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&!0===this.ChartFrame.GlobalOption.IsValueFullRange&&(t=this.Data.Data.length,e=0);for(var a={Min:0,Max:null},i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];n&&n.Vol&&(null==a.Max&&(a.Max=n.Vol),a.Max<n.Vol&&(a.Max=n.Vol))}return 1==this.ShareAfterVol&&(this.GetAfterCloseMaxMin(a),this.GetMultiDayAfterCloseMaxMin(a)),a},this.GetAfterCloseMaxMin=function(t){if(!(this.ChartBorder.RightExtendWidth<10)&&this.AfterCloseData){var e=this.AfterCloseData;(null==t.Max||t.Max<e.VolMax)&&(t.Max=e.VolMax)}},this.GetMultiDayAfterCloseMaxMin=function(t){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData)for(var e=0;e<this.MultiDayAfterCloseData.length;++e){var a=this.MultiDayAfterCloseData[e];2!=a.Ver&&3!=a.Ver||(null==t.Max||t.Max<a.VolMax)&&(t.Max=a.VolMax)}}}function wt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartErrorMessage",this.Draw=function(){this.IsShow&&this.NotSupportMessage&&this.DrawNotSupportmessage()}}function Ft(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.BreakPoint,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine();case 2:return this.DrawSectionLine()}},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash);for(var i=!0,r=0,n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<a;++n,++s){var o=this.Data.Data[n];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.DrawStraightLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+i/2+xi.FrameLeftMargin;else n=this.ChartBorder.GetBorder(),o=n.LeftEx+i/2+xi.FrameLeftMargin,s=n.RightEx;var h=this.GetLockRect();h&&(s=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash);for(var l=!0,u=null,c=0,d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<r;++d,++f,o+=a+i){var C=this.Data.Data[d];if(null!=C){if(e)var m=this.ChartFrame.GetXFromIndex(f);else{var D=o,p=o+a;if(p>s)break;m=D+(p-D)/2}var v=this.GetYFromData(C,!1);if(m>s)break;l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(v,m):this.Canvas.moveTo(m,v),l=!1,u={X:m,Y:v}):t?this.Canvas.lineTo(v,m):this.Canvas.lineTo(m,v),++c}else c>0&&this.Canvas.stroke(),l=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*I()):this.Canvas.lineTo(u.X+1*I(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()},this.DrawSectionLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+i/2+xi.FrameLeftMargin;else n=this.ChartBorder.GetBorder(),o=n.LeftEx+i/2+xi.FrameLeftMargin,s=n.RightEx;var h=this.GetLockRect();h&&(s=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash);for(var l=!0,u=null,c=0,d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<r;++d,++f,o+=a+i){var C=this.Data.Data[d];if(null!=C){if(e)var m=this.ChartFrame.GetXFromIndex(f);else{var D=o,p=o+a;if(p>s)break;m=D+(p-D)/2}var v=this.GetYFromData(C,!1);if(m>s)break;this.BreakPoint&&this.BreakPoint.has(d)&&(c>0&&this.Canvas.stroke(),l=!0,c=0,u=null),l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(v,m):this.Canvas.moveTo(m,v),l=!1,u={X:m,Y:v}):t?this.Canvas.lineTo(v,m):this.Canvas.lineTo(m,v),++c}else c>0&&this.Canvas.stroke(),l=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*I()):this.Canvas.lineTo(u.X+1*I(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()}}function Mt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartArea",this.Color="rgb(255,193,37)",this.AreaColor,this.LineWidth,this.LineDash,this.AreaDirection=0,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||this.IsHideScriptIndex()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawArea()))},this.DrawArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+i/2+xi.FrameLeftMargin;else n=this.ChartBorder.GetBorder(),o=n.LeftEx+i/2+xi.FrameLeftMargin,s=n.RightEx;var h=this.GetLockRect();h&&(s=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.Canvas.strokeStyle=this.Color,this.AreaColor?this.Canvas.fillStyle=this.AreaColor:this.Canvas.fillStyle=ba.ColorToRGBA(this.Color,.6),ze.IsNonEmptyArray(this.LineDash)&&this.Canvas.setLineDash(this.LineDas);for(var l=!0,u=null,c=null,d=0,f=this.Data.DataOffset,C=0;f<this.Data.Data.length&&C<r;++f,++C,o+=a+i){var m=this.Data.Data[f];if(ze.IsNumber(m)){if(e)var D=this.ChartFrame.GetXFromIndex(C);else{var p=o,v=o+a;if(v>s)break;D=p+(v-p)/2}var g=this.GetYFromData(m,!1);if(D>s)break;l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(g,D):this.Canvas.moveTo(D,g),l=!1,u={X:D,Y:g}):(t?this.Canvas.lineTo(g,D):this.Canvas.lineTo(D,g),c={X:D,Y:g}),++d}else d>0&&this.Canvas.stroke(),u&&c&&(t?(1==this.AreaDirection?(this.Canvas.lineTo(n.RightEx,c.X),this.Canvas.lineTo(n.RightEx,u.X)):(this.Canvas.lineTo(n.LeftEx,c.X),this.Canvas.lineTo(n.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,n.TopEx),this.Canvas.lineTo(u.X,n.TopEx)):(this.Canvas.lineTo(c.X,n.BottomEx),this.Canvas.lineTo(u.X,n.BottomEx)),this.Canvas.closePath(),this.Canvas.fill())),l=!0,d=0,u=null,c=null}d>0&&(1==d&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*I()):this.Canvas.lineTo(u.X+1*I(),u.Y)),this.Canvas.stroke(),u&&c&&(t?(1==this.AreaDirection?(this.Canvas.lineTo(n.RightEx,c.X),this.Canvas.lineTo(n.RightEx,u.X)):(this.Canvas.lineTo(n.LeftEx,c.X),this.Canvas.lineTo(n.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,n.TopEx),this.Canvas.lineTo(u.X,n.TopEx)):(this.Canvas.lineTo(c.X,n.BottomEx),this.Canvas.lineTo(u.X,n.BottomEx)),this.Canvas.closePath(),this.Canvas.fill()))),this.Canvas.restore()}}function Lt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartScatterPlot",this.Color="rgb(255,193,37)",this.Radius=3,this.TooltipData=[],this.Draw=function(){this.TooltipData=[],this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||this.IsHideScriptIndex()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawScatterPlot()))},this.DrawScatterPlot=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+i/2+xi.FrameLeftMargin;else n=this.ChartBorder.GetBorder(),o=n.LeftEx+i/2+xi.FrameLeftMargin,s=n.RightEx;var h=this.GetLockRect();h&&(s=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<r;++l,++u,o+=a+i){var c=this.Data.Data[l];if(c){if(e)var d=this.ChartFrame.GetXFromIndex(u);else{var f=o,C=o+a;if(C>s)break;d=f+(C-f)/2}if(d>s)break;if(Array.isArray(c))for(u=0;u<c.length;++u)this.DrawItem(c[u],d);else this.DrawItem(c,d)}}this.Canvas.restore()},this.DrawItem=function(t,e){if(t&&ze.IsNumber(t.Value)){var a=this.GetYFromData(t.Value,!1),i=this.Radius;if(t.Radius&&(i=t.Radius),ze.IsNumber(i)){this.Canvas.beginPath(),this.Canvas.arc(e,a,i,0,2*Math.PI);var r=this.Color;t.Color&&(r=t.Color),r&&(this.Canvas.fillStyle=r,this.Canvas.fill()),t.ColorBorder&&(this.Canvas.strokeStyle=t.ColorBorder,this.Canvas.stroke());var n={X:e,Y:a,Radius:i,Data:t};this.TooltipData.push(n)}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={Min:null,Max:null};if(!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(n)if(Array.isArray(n))for(var s=0;s<n.length;++s){var o=n[s];ze.IsNumber(o.Value)&&(null==a.Max&&(a.Max=o.Value),null==a.Min&&(a.Min=o.Value),a.Max<o.Value&&(a.Max=o.Value),a.Min>o.Value&&(a.Min=o.Value))}else{if(!ze.IsNumber(n.Value))continue;null==a.Max&&(a.Max=n.Value),null==a.Min&&(a.Min=n.Value),a.Max<n.Value&&(a.Max=n.Value),a.Min>n.Value&&(a.Min=n.Value)}}return a},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;if(!ze.IsNonEmptyArray(this.TooltipData))return!1;for(var i=this.TooltipData.length-1;i>=0;--i){var r=this.TooltipData[i];if(this.Canvas.beginPath(),this.Canvas.arc(r.X,r.Y,r.Radius,0,2*Math.PI),this.Canvas.isPointInPath(t,e))return l.Chart.Log("[ChartScatterPlot::GetTooltipData] point",r),a.Data=r,a.ChartPaint=this,a.Type=6,!0}}}function Et(){this.newMethod=Ft,this.newMethod(),delete this.newMethod,this.ClassName="ChartSubLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.SubFrame={Max:null,Min:null},this.Draw=function(){if(this.IsShow&&this.Data&&this.Data.Data)switch(this.CalculateDataMaxMin(),this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetYFromData=function(t){var e=!0===this.ChartFrame.IsHScreen;if(e){if(t<=this.SubFrame.Min)return this.ChartBorder.GetLeftEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetRightEx();var a=this.ChartBorder.GetWidthEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetLeftEx()+a}if(t<=this.SubFrame.Min)return this.ChartBorder.GetBottomEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetTopEx();var i=this.ChartBorder.GetHeightEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetBottomEx()-i},this.CalculateDataMaxMin=function(){this.SubFrame={Max:null,Min:null};var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<a;++i,++r){var n=this.Data.Data[i];if(null!=n){var s=this.ChartFrame.GetXFromIndex(r);if(s>e)break;(null==this.SubFrame.Min||this.SubFrame.Min>n)&&(this.SubFrame.Min=n),(null==this.SubFrame.Max||this.SubFrame.Max<n)&&(this.SubFrame.Max=n)}}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Nt(){this.newMethod=Ft,this.newMethod(),delete this.newMethod,this.MainData=new ut,this.Draw=function(){if(this.Data&&this.Data.Data&&this.MainData&&this.MainData.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetFirstVaildIndex=function(){for(var t=this.Data.DataOffset,e=t,a=0;e<this.MainData.Data.length&&e<this.Data.Data.length;++e,++a){var i=this.MainData.Data[e],r=this.Data.Data[e];if(ze.IsNumber(i)&&ze.IsNumber(r))return{Index:a,DataOffset:e,OverlayValue:r,MainValue:i}}return null},this.DrawStraightLine=function(){var t=this.GetFirstVaildIndex();if(t){var e=!0===this.ChartFrame.IsHScreen,a=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());e&&(a=this.ChartBorder.GetBottom());var i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=e?r.Top:r.Left),this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash([3,5]);for(var n=!0,s=0,o=0,h=t.DataOffset,l=t.Index;h<this.Data.Data.length&&l<i;++h,++l){var u=this.Data.Data[h];if(null!=u){var c=this.ChartFrame.GetXFromIndex(l),d=u-t.OverlayValue;o=0!=t.OverlayValue?1+d/Math.abs(t.OverlayValue):1+d;var f=t.MainValue*o,C=this.GetYFromData(f);if(c>a)break;n?(this.Canvas.beginPath(),e?this.Canvas.moveTo(C,c):this.Canvas.moveTo(c,C),n=!1):e?this.Canvas.lineTo(C,c):this.Canvas.lineTo(c,C),++s}else s>0&&this.Canvas.stroke(),n=!0,s=0}s>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.GetFirstVaildIndex();if(!a)return e;for(var i=a.DataOffset,r=a.Index;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(ze.IsNumber(n)){var s=n-a.OverlayValue;0!=a.OverlayValue?rate=1+s/Math.abs(a.OverlayValue):rate=1+s;var o=a.MainValue*rate;null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o)}}return e}}function Pt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPartLine",this.LineWidth,this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||this.IsHideScriptIndex()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawLine()))},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I());for(var i,r=0,n={X:null,Y:null},s=!1,o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<a;++o,++h){var l=this.Data.Data[o];if(null!=l&&null!=l.Value){var u=l.Value,c=l.RGB,d=this.ChartFrame.GetXFromIndex(h),f=this.ChartFrame.GetYFromData(u);if(d>e)break;c!=i||1==s?(i&&r>0&&this.Canvas.stroke(),r=0,i=c,this.Canvas.strokeStyle=c,this.Canvas.beginPath(),null!=n.X&&null!=n.Y?(t?this.Canvas.moveTo(n.Y,n.X):this.Canvas.moveTo(n.X,n.Y),t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),++r):t?this.Canvas.moveTo(f,d):this.Canvas.moveTo(d,f)):(t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),++r),n.X=d,n.Y=f,s=!1}else n.X=null,n.Y=null,s=!0}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];r&&r.Value&&((null==e.Max||e.Max<r.Value)&&(e.Max=r.Value),(null==e.Min||e.Min>r.Value)&&(e.Min=r.Value))}return e},this.ExportData=function(t,e){var a=[],i=[];if(ze.IsNonEmptyArray(this.Data.Data)){var r=0,n=this.Data.length-1;e&&e.Start&&e.End&&ze.IsNumber(e.Start.Index)&&ze.IsNumber(e.End.Index)&&(r=e.Start.Index,n=e.End.Index);for(var s=r;s<=n&&s<this.Data.Data.length;++s){var o=this.Data.Data[s];a[s]=null,i[s]=null,o&&ze.IsNumber(o.Value)&&(a[s]=o.Value,i[s]=o.RGB)}}return[{Name:"".concat(this.Name,"-Value"),Data:a},{Name:"".concat(this.Name,"-Color"),Data:i}]}}function Ot(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStepLine",this.LineWidth=1,this.DotLine,this.IsHScreen,this.IsDotLine=!1,this.PtInChart=function(t,e){if(this.IsShow&&!this.ChartFrame.IsMinSize){var a=!0===this.ChartFrame.IsHScreen;if(!a){var i=this.IsMinuteFrame(),r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,s=this.ChartFrame.XPointCount,o=this.GetLockRect();if(a){var h=this.ChartBorder.GetHScreenBorder(),l=h.BottomEx,u=h.TopEx+n/2+xi.FrameLeftMargin;o&&(l=o.Top)}else{h=this.ChartBorder.GetBorder(),u=h.LeftEx+n/2+xi.FrameLeftMargin,l=h.RightEx;o&&(l=o.Left)}if(t<u||t>l)return null;if(e>h.BottomEx||e<h.TopEx)return null;for(var c={},d={},f=this.Data.DataOffset;f>=0;--f){var C=this.Data.Data[f];if(ze.IsNumber(C)){var m=this.GetYFromData(C,!1),D=null;D=i?this.ChartFrame.GetXFromIndex(0):u,c.Y=m,c.X=D}}f=this.Data.DataOffset;for(var p=0;f<this.Data.Data.length&&p<s;++f,++p,u+=r+n){C=this.Data.Data[f];if(ze.IsNumber(C)){if(i)var v=this.ChartFrame.GetXFromIndex(p);else{var g=u,S=u+r;if(S>l)break;v=g+(S-g)/2}var I=this.GetYFromData(C,!1);if(!(v<t)){if(v==t){c.X=d.X=v,c.Y=d.Y=I;break}d.X=v,d.Y=I;break}if(c.X=v,c.Y=I,t>l)break}}return ze.IsNumber(c.X)&&ze.IsNumber(c.Y)&&ze.IsNumber(d.X)&&ze.IsNumber(d.Y)&&(t==c.X||e==c.Y||t==d.X||e==d.Y||t>=c.X&&t<=d.X&&e>=c.Y-3&&e<=c.Y+3||t>=d.X-3&&t<=d.X+3&&e>=Math.min(c.Y,d.Y)&&e<Math.max(c.Y,d.Y))?{Identify:this.Identify,Chart:this}:null}}},this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.Canvas.save(),this.ClipClient(this.IsHScreen),this.DrawLine(),this.Canvas.restore()))},this.DrawLine=function(){var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.GetLockRect();if(this.IsHScreen){var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+a/2+xi.FrameLeftMargin;r&&(s=r.Top)}else{n=this.ChartBorder.GetBorder(),o=n.LeftEx+a/2+xi.FrameLeftMargin,s=n.RightEx;r&&(s=r.Left)}this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I()),this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash),this.DotLine&&this.Canvas.setLineDash(this.DotLine),this.Canvas.strokeStyle=this.Color;for(var h=!0,l=0,u={X:null,Y:null},c=this.Data.DataOffset;c>=0;--c){var d=this.Data.Data[c];if(ze.IsNumber(d)){var f=this.GetYFromData(d,!1),C=null;C=t?this.ChartFrame.GetXFromIndex(0):o,this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(f,C):this.Canvas.moveTo(C,f),h=!1,u.Y=f,u.X=C}}c=this.Data.DataOffset;for(var m=0;c<this.Data.Data.length&&m<i;++c,++m,o+=e+a){if(t)C=this.ChartFrame.GetXFromIndex(m);else{var D=o,p=o+e;if(p>s)break;C=D+(p-D)/2}if(C>s)break;d=this.Data.Data[c];if(ze.IsNumber(d)){f=this.GetYFromData(d,!1);h?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(f,C):this.Canvas.moveTo(C,f),h=!1,u.X=C,u.Y=f):(this.IsHScreen?(this.Canvas.lineTo(u.Y,C),this.Canvas.lineTo(f,C)):(this.Canvas.lineTo(C,u.Y),this.Canvas.lineTo(C,f)),u.X=C,u.Y=f),++l}}l>0&&this.Canvas.stroke()},this.DrawSelectedStatus=function(){this.DrawLinePoint()}}function Rt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSlopeLine",this.Color="rgb(255,193,37)",this.IsDotLine=!1,this.LineWidth,this.Option,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash);var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;this.Canvas.beginPath(),this.Canvas.rect(t,e,a-t,i-e),this.Canvas.clip();for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<n;++s,++o){var h=this.Data.Data[s];if(ze.IsNumber(h)){var l=this.Option[s];if(l){var u=this.ChartFrame.GetXFromIndex(o),c=this.ChartFrame.GetYFromData(h),d=l.Length*xi.DRAWSL.PixelWidth;if(u>r)break;var f=Math.sqrt(d*d/(1+l.Slope*l.Slope)),C=f*l.Slope;this.Canvas.beginPath(),2==l.Direct?(this.Canvas.moveTo(u-f,c+C),this.Canvas.lineTo(u+f,c-C)):1==l.Direct?(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u-f,c+C)):(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u+f,c-C)),this.Canvas.stroke()}}}this.Canvas.restore()}}}function Bt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPointDot",this.Color="rgb(255,193,37)",this.Radius=1,this.EnableUpDownColor=!1,this.HistoryData,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a,i=this.ChartFrame.XPointCount;this.Canvas.save(),this.Canvas.fillStyle=this.Color;for(var r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var s=this.Data.Data[r];if(null!=s){var o=this.ChartFrame.GetXFromIndex(n),h=this.ChartFrame.GetYFromData(s);if(o>e)break;if(this.EnableUpDownColor){var l=this.HistoryData.Data[r];a=l.Close>s?"rgb(255,61,61)":"rgb(0,199,65)",this.Canvas.fillStyle=a}this.Canvas.beginPath(),t?this.Canvas.arc(h,o,this.Radius,0,2*Math.PI,!0):this.Canvas.arc(o,h,this.Radius,0,2*Math.PI,!0),this.Canvas.closePath(),this.Canvas.fill()}}this.Canvas.restore()}}}function _t(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.Color="rgb(255,193,37)",this.LineWidth,this.ClassName="ChartStick",this.ExportData=this.ExportArrayData,this.DrawLine=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I());for(var i=!0,r=0,n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<a;++n,++s){var o=this.Data.Data[n];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.ChartFrame.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.DrawStick=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetLeft();this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineWidth&&(this.Canvas.lineWidth=this.LineWidth*I());for(var n=this.Canvas.lineWidth,s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<a;++s,++o){var h=this.Data.Data[s];if(null!=h){var l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(h);if(l>e)break;if(this.Canvas.beginPath(),t)this.Canvas.moveTo(r,l),this.Canvas.lineTo(u,l),this.Canvas.stroke();else{var c=M(n,l);this.Canvas.moveTo(c,u),this.Canvas.lineTo(c,i)}this.Canvas.stroke()}}this.Canvas.restore()}},this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawStick())}}function kt(){this.newMethod=_t,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineStick",this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():(this.DrawStick(),this.DrawLine()))}}function Gt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.HistoryData,this.KLineDrawType=0,this.ClassName="ChartVolStick",this.PtInChart=this.PtInBar,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())if(!0!==this.ChartFrame.IsHScreen){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+e/2+xi.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,s=this.GetLockRect();s&&(r=s.Left);var o=this.IsMinuteFrame(),h=this.ChartFrame.GetYFromData(0);if(t>=4){h=L(h);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){var c=this.Data.Data[l],d=this.HistoryData.Data[l];if(null!=c&&null!=d&&0!=c){var f=i,C=i+t;if(C>r)break;var m=this.ChartFrame.GetYFromData(c),D=this.GetBarColor(d),p=D.IsUp;this.Canvas.fillStyle=D.Color;var v=L(Math.abs(h-m)>=1?h-m:1);m=h-v,6==this.KLineDrawType?(this.Canvas.strokeStyle=D.Color,this.Canvas.beginPath(),this.Canvas.rect(F(f),F(m),L(t),v),this.Canvas.stroke()):!p||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(L(f),m,L(t),v):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(F(f),F(m),L(t),v),this.Canvas.stroke())}}}else for(l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){c=this.Data.Data[l],d=this.HistoryData.Data[l];if(null!=c&&null!=d){m=this.ChartFrame.GetYFromData(c);if(o)var g=this.ChartFrame.GetXFromIndex(u);else f=i,C=i+t,g=f+(C-f)/2;if(g>r)break;D=this.GetBarColor(d);this.Canvas.strokeStyle=D.Color,this.Canvas.beginPath(),this.Canvas.moveTo(F(g),m),this.Canvas.lineTo(F(g),h),this.Canvas.stroke()}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+e/2+xi.FrameLeftMargin,r=a.BottomEx,n=this.ChartFrame.XPointCount,s=this.GetLockRect();s&&(r=s.Top);var o=this.ChartFrame.GetYFromData(0);if(t>=4){o=L(o);for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){var u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){var d=i,f=i+t;if(f>r)break;var C=this.ChartFrame.GetYFromData(u),m=this.GetBarColor(c),D=m.IsUp;this.Canvas.fillStyle=m.Color;var p=L(C-o);!D||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(o,L(d),p,L(t)):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(F(o),F(d),p,L(t)),this.Canvas.stroke())}}}else for(h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){C=this.ChartFrame.GetYFromData(u);var v=this.ChartFrame.GetXFromIndex(l);if(v>r)break;m=this.GetBarColor(c),D=m.IsUp;this.Canvas.strokeStyle=m.Color,this.Canvas.beginPath(),this.Canvas.moveTo(C,F(v)),this.Canvas.lineTo(o,F(v)),this.Canvas.stroke()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];(!ze.IsNumber(e.Max)||e.Max<r)&&(e.Max=r),(!ze.IsNumber(e.Min)||e.Min>r)&&(e.Min=r)}return e.Max>0&&e.Min>0?e.Min=0:e.Max<0&&e.Min<0&&(e.Max=0),e},this.GetBarColor=function(t){return t.Close>=t.Open?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}},this.GetItemData=function(t){if(!t)return null;if(!ze.IsNumber(t.Index))return null;if(!this.HistoryData||!ze.IsNonEmptyArray(this.HistoryData.Data))return null;if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length||e>=this.HistoryData.Data.length)return null;var a=this.Data.Data[e],i=this.HistoryData.Data[e];return[{Value:a,Color:this.GetBarColor(i).Color,Name:this.Name}]}}function Vt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVericaltLine",this.LineWidth=2,this.LineCap,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.RightEx,s=i.LeftEx,o=i.TopEx+a/2+xi.FrameLeftMargin;else n=i.TopEx,s=i.BottomEx,o=i.LeftEx+a/2+xi.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*I(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,o+=e+a){var d=this.Data.Data[u];if(d){var f=o+e/2;f=M(h,f),t?(this.Canvas.moveTo(n,f),this.Canvas.lineTo(s,f)):(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,s)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Ht(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHorizontalLine",this.LineWidth=2,this.LineCap,this.ExtendType=0,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.TopEx,s=i.BottomEx,o=i.TopEx+a/2+xi.FrameLeftMargin;else n=i.LeftEx,s=i.RightEx,o=i.LeftEx+a/2+xi.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*I(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,o+=e+a){var d=this.Data.Data[u];if(d&&ze.IsNumber(d)){var f=this.ChartFrame.GetYFromData(d);f=M(h,f);var C=o+e/2;C=M(h,C),3==this.ExtendType?t?(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,s)):(this.Canvas.moveTo(n,f),this.Canvas.lineTo(s,f)):1==this.ExtendType?t?(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,C)):(this.Canvas.moveTo(n,f),this.Canvas.lineTo(C,f)):t?(this.Canvas.moveTo(f,C),this.Canvas.lineTo(f,s)):(this.Canvas.moveTo(C,f),this.Canvas.lineTo(s,f)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}}}function Yt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineMultiData",this.Color="rgb(255,193,37)",this.PointColor,this.PointRadius,this.LineWidth,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),ze.IsPlusNumber(this.LineWidth)&&(this.Canvas.lineWidth=this.LineWidth*I());for(var i,r=!0,n=0,s=[],o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<a;++o,++h){var l=this.Data.Data[o];if(l){var u=this.ChartFrame.GetXFromIndex(h);if(u>e)break;i=Array.isArray(l)?l:[l];for(var c=0;c<i.length;++c){var d=i[c];if(d){var f=d.Value,C=this.ChartFrame.GetYFromData(f);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(C,u):this.Canvas.moveTo(u,C),r=!1,1===d.Type&&s.push({X:u,Y:C})):(t?this.Canvas.lineTo(C,u):this.Canvas.lineTo(u,C),1===d.Type&&s.push({X:u,Y:C})),++n}}}}n>0&&this.Canvas.stroke(),this.DrawPoint(s),this.Canvas.restore()}},this.DrawPoint=function(t){if(this.PointColor&&ze.IsPlusNumber(this.PointRadius))for(var e=this.PointRadius*I(),a=0;a<t.length;++a){var i=t[a];this.Canvas.beginPath(),this.Canvas.arc(i.X,i.Y,e,0,360,!1),this.Canvas.fillStyle=this.PointColor,this.Canvas.fill(),this.Canvas.closePath()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r){var n;n=Array.isArray(r)?r:[r];for(i=0;i<n.length;++i){var s=n[i].Value;ze.IsNumber(s)&&(null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s))}}}return e}}function Xt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStickLine",this.Color="rgb(255,193,37)",this.BarType=0,this.LineDotted=[3,3],this.Width=0,this.SetEmptyBar=function(){if(1!=this.BarType&&-1!=this.BarType)return!1;this.Canvas.lineWidth=I(),this.Canvas.strokeStyle=this.Color;var t=xi.EmptyBarBGColor;return t&&(this.Canvas.fillStyle=t),-1==this.BarType&&this.Canvas.setLineDash(this.LineDotted),!0},this.IsEmptyBar=function(){return 1==this.BarType||-1==this.BarType},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();this.ChartFrame.ZoomIndex;t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+a/2+xi.FrameLeftMargin;t&&(n=this.ChartBorder.GetTop()+a/2+xi.FrameLeftMargin);var s=this.IsMinuteFrame();this.Canvas.save();var o=!1,h=!1,l=xi.EmptyBarBGColor;if(s)this.Width>1?this.Canvas.lineWidth=2*I():this.Canvas.lineWidth=I(),this.Canvas.strokeStyle=this.Color;else if(0==this.Width)this.SetEmptyBar();else if(3==this.Width||50==this.Width)e>=4?(h=!0,this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),this.Canvas.strokeStyle=this.Color):(this.Canvas.lineWidth=I(),this.Canvas.strokeStyle=this.Color);else if(101==this.Width){var u=e+a+1*I();this.Canvas.lineWidth=u,this.Canvas.strokeStyle=this.Color}else if(this.Width<=3){var c=2*I(),d=e*(this.Width/3);d<c&&(d=c),this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),o=!0}else{d=this.Width*I()+e;this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),o=!0}for(var f=this.Data.DataOffset,C=0;f<this.Data.Data.length&&C<r;++f,++C,n+=e+a){var m=this.Data.Data[f];if(null!=m){var D=m.Value,p=m.Value2;if(null==p&&(p=0),s)var v=this.ChartFrame.GetXFromIndex(C);else{var g=n,S=n+e;v=g+(S-g)/2}var T=this.ChartFrame.GetYFromData(D),x=this.ChartFrame.GetYFromData(p);if(v>i)break;if(o)if(t){g=v-d/2;var y=d;this.IsEmptyBar()?(this.Canvas.beginPath(),this.Canvas.rect(F(Math.min(T,x)),F(g),L(Math.abs(T-x)),L(y)),this.Canvas.stroke()):this.Canvas.fillRect(L(Math.min(T,x)),L(g),L(Math.abs(T-x)),L(y))}else{g=v-d/2,y=d;g+y>i&&(y=i-g),this.IsEmptyBar()?(l&&this.Canvas.fillRect(L(g),L(Math.min(T,x)),L(y),L(Math.abs(T-x))),this.Canvas.beginPath(),this.Canvas.rect(F(g),F(Math.min(T,x)),L(y),L(Math.abs(T-x))),this.Canvas.stroke()):this.Canvas.fillRect(L(g),L(Math.min(T,x)),L(y),L(Math.abs(T-x)))}else if(h)this.IsEmptyBar()?t?(this.Canvas.beginPath(),this.Canvas.rect(F(Math.min(T,x)),F(n),L(Math.abs(T-x)),L(e)),this.Canvas.stroke()):(l&&this.Canvas.fillRect(L(n),L(Math.min(T,x)),L(e),L(Math.abs(T-x))),this.Canvas.beginPath(),this.Canvas.rect(F(n),F(Math.min(T,x)),L(e),L(Math.abs(T-x))),this.Canvas.stroke()):t?this.Canvas.fillRect(L(Math.min(T,x)),L(n),L(Math.abs(T-x)),L(e)):this.Canvas.fillRect(L(n),L(Math.min(T,x)),L(e),L(Math.abs(T-x)));else if(t)this.Canvas.beginPath(),this.Canvas.moveTo(T,F(v)),this.Canvas.lineTo(x,F(v)),this.Canvas.stroke();else{var A=parseInt(v.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(A,T),this.Canvas.lineTo(A,x),this.Canvas.stroke()}}}this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r){var n=r.Value2;if(null==n&&(n=0),null!=r&&!isNaN(r.Value)&&!isNaN(n)){var s=Math.max(r.Value,n),o=Math.min(r.Value,n);null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=o),e.Max<s&&(e.Max=s),e.Min>o&&(e.Min=o)}}}return e}}function Wt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleText",this.Color="rgb(255,193,37)",this.TextFont="14px 微软雅黑",this.Text,this.TextAlign="left",this.TextBG,this.Direction=0,this.FixedFontSize=-1,this.YOffset=0,this.Position,this.ShowOffset={X:0,Y:0},this.IconFont,this.IconSize={Max:xi.DRAWICON.Icon.MaxSize,Min:xi.DRAWICON.Icon.MinSize,Zoom:{Type:xi.DRAWICON.Icon.Zoom.Type,Value:xi.DRAWICON.Icon.Zoom.Value},YOffset:xi.DRAWICON.Icon.YOffset},this.TextSize={Max:xi.DRAWICON.Text.MaxSize,Min:xi.DRAWICON.Text.MinSize,Zoom:{Type:xi.DRAWICON.Text.Zoom.Type,Value:xi.DRAWICON.Text.Zoom.Value},FontName:xi.DRAWICON.Text.FontName,YOffset:xi.DRAWICON.Text.YOffset},this.Font={DRAWTEXT_FIX:xi.DRAWTEXT_FIX.Font,DRAWNUMBER_FIX:xi.DRAWNUMBER_FIX.Font},this.ExportData=this.ExportBoolData,this.ReloadResource=function(t){"DRAWTEXT"==this.Name?this.TextSize={Max:xi.DRAWTEXT.MaxSize,Min:xi.DRAWTEXT.MinSize,Zoom:{Type:xi.DRAWTEXT.Zoom.Type,Value:xi.DRAWTEXT.Zoom.Value},FontName:xi.DRAWTEXT.FontName,YOffset:xi.DRAWTEXT.YOffset}:"DRAWNUMBER"==this.Name?this.TextSize={Max:xi.DRAWNUMBER.MaxSize,Min:xi.DRAWNUMBER.MinSize,Zoom:{Type:xi.DRAWNUMBER.Zoom.Type,Value:xi.DRAWNUMBER.Zoom.Value},FontName:xi.DRAWNUMBER.FontName,YOffset:xi.DRAWNUMBER.YOffset}:"DRAWTEXT_FIX"==this.Name?this.Font.DRAWTEXT_FIX=xi.DRAWTEXT_FIX.Font:"DRAWNUMBER_FIX"==this.Name&&(this.Font.DRAWNUMBER_FIX=xi.DRAWNUMBER_FIX.Font)},this.SuperGetMaxMin=this.GetMaxMin,this.GetMaxMin=function(){return"DRAWTEXT_FIX"==this.Name||"DRAWNUMBER_FIX"==this.Name||"DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name?{Min:null,Max:null}:this.SuperGetMaxMin()},this.DrawRectText=function(){if(this.DrawData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.GetBorder();if("DRAWTEXTREL"==this.Name)if(t)var a=e.RightTitle-e.LeftEx,i=e.BottomEx-e.TopEx,r=this.DrawData.Point.X/1e3*i+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y/1e3*i;else i=e.RightEx-e.LeftEx,a=e.BottomEx-e.TopTitle,r=this.DrawData.Point.X/1e3*i+e.LeftEx,n=this.DrawData.Point.Y/1e3*a+e.TopTitle;else{if("DRAWTEXTABS"!=this.Name)return;if(t)r=this.DrawData.Point.X+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y;else r=this.DrawData.Point.X+e.LeftEx,n=this.DrawData.Point.Y+e.TopTitle}1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.Color,this.DrawText(this.DrawData.Text,r,n,t)}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if("DRAWTEXTREL"!=this.Name&&"DRAWTEXTABS"!=this.Name){if(this.Position)this.DrawPosition();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+xi.FrameLeftMargin,n=this.ChartBorder.GetRight(),s=this.ChartBorder.GetTopEx(),o=this.ChartBorder.GetBottomEx();t&&(n=this.ChartBorder.GetBottom(),s=this.ChartBorder.GetRightEx(),o=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+xi.FrameLeftMargin);var h=this.ChartFrame.XPointCount,l=Array.isArray(this.Text),u=I(),c={Text:{},Font:{}};if(1==this.Direction?(this.Canvas.textBaseline="bottom",c.Text={Baseline:"bottom"}):2==this.Direction?(this.Canvas.textBaseline="top",c.Text={Baseline:"top"}):(this.Canvas.textBaseline="middle",c.Text={Baseline:"middle"}),this.IconFont){if(this.Color=this.IconFont.Color,this.Text=this.IconFont.Text,this.FixedFontSize>0)var d=this.FixedFontSize;else d=this.GetDynamicIconSize(a,i,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=d+"px "+this.IconFont.Family}else this.FixedFontSize>0?this.TextFont="".concat(this.FixedFontSize,"px ").concat(this.TextSize.FontName):this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont;c.Font={Height:this.GetFontHeight()};for(var f=this.Data.DataOffset,C=0;f<this.Data.Data.length&&C<h;++f,++C,r+=a+i){var m=this.Data.Data[f];if(null!=m){if(e)var D=this.ChartFrame.GetXFromIndex(C);else{var p=r,v=r+a;if(v>n)break;D=p+(v-p)/2}var g=this.ChartFrame.GetYFromData(m);if(D>n)break;if(g+=this.ShowOffset.Y,D+=this.ShowOffset.X,this.Canvas.textAlign=this.TextAlign,this.Canvas.fillStyle=this.Color,c.Text.Color=this.Color,c.Text.Align=this.TextAlign,c.X=D,c.Y=g,this.YOffset>0&&this.Direction>0){var S=g;this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?(1==this.Direction?(g=s-this.YOffset*u,S+=5*u):(g=o+this.YOffset*u,S-=5*u),this.Canvas.moveTo(F(S),F(D)),this.Canvas.lineTo(F(g),F(D))):(1==this.Direction?(g=s+this.YOffset*u,S+=5*u):(g=o-this.YOffset*u,S-=5*u),this.Canvas.moveTo(F(D),F(S)),this.Canvas.lineTo(F(D),F(g))),this.Canvas.stroke(),this.Canvas.setLineDash([])}if(l){var T=this.Text[f];if(!T)continue;"DRAWNUMBER"==this.Name&&(1==this.Direction?g-=xi.DRAWABOVE.YOffset*u:2==this.Direction&&(g+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(T,c,t):this.DrawText(T,D,g,t)}else"DRAWICON"==this.Name?1==this.Direction?g-=xi.DRAWABOVE.YOffset*u:2==this.Direction&&(this.IconFont?g+=this.IconSize.YOffset*u:g+=this.TextSize.YOffset*u):"DRAWTEXT"==this.Name&&(1==this.Direction?g-=xi.DRAWABOVE.YOffset*u:2==this.Direction&&(g+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(this.Text,c,t):this.DrawText(this.Text,D,g,t)}}}}else this.DrawRectText()},this.DrawPosition=function(){if(this.Text){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetRightEx()-this.ChartBorder.GetWidthEx()*this.Position.Y,a=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*this.Position.X;else a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*this.Position.X,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()*this.Position.Y;if(this.Canvas.fillStyle=this.Color,"DRAWTEXT_FIX"==this.Name?this.Canvas.font=this.Font.DRAWTEXT_FIX:"DRAWNUMBER_FIX"==this.Name&&(this.Canvas.font=this.Font.DRAWNUMBER_FIX),0==this.Position.Type?this.Canvas.textAlign="left":1==this.Position.Type?this.Canvas.textAlign="right":this.Canvas.textAlign="center",1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",Array.isArray(this.Text)){if(!this.Data||!this.Data.Data)return;for(var i=this.ChartFrame.XPointCount,r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var s=this.Text[r];if(s){this.DrawText(s,a,e,t);break}}}else this.DrawText(this.Text,a,e,t)}},this.DrawText=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)},this.DrawTextV2=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var s=this.TextBG.Margin,o=r-s[0],h=n-s[2],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,u,l)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(F(o),F(h),L(u),L(l)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){s=this.TextBG.Margin,o=r-s[2],h=n-e.Font.Height-s[1],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,l,u)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(F(o),F(h),L(l),L(u)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}}}function Ut(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawText",this.Color="rgb(255,193,37)",this.TextFont="14px 微软雅黑",this.TextBaseline="middle",this.TextAlign="left",this.Text,this.TextBG,this.FixedFontSize=-1,this.YOffset=0,this.FixedPosition=-1,this.VerticalLine,this.ShowOffset={X:0,Y:0},this.ExportData=this.ExportBoolData,this.TextSize={Max:xi.DRAWICON.Text.MaxSize,Min:xi.DRAWICON.Text.MinSize,Zoom:{Type:xi.DRAWICON.Text.Zoom.Type,Value:xi.DRAWICON.Text.Zoom.Value},FontName:xi.DRAWICON.Text.FontName,YOffset:xi.DRAWICON.Text.YOffset},this.ReloadResource=function(t){this.TextSize={Max:xi.DRAWTEXT.MaxSize,Min:xi.DRAWTEXT.MinSize,Zoom:{Type:xi.DRAWTEXT.Zoom.Type,Value:xi.DRAWTEXT.Zoom.Value},FontName:xi.DRAWTEXT.FontName,YOffset:xi.DRAWTEXT.YOffset}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+xi.FrameLeftMargin,n=this.ChartBorder.GetRight(),s=this.ChartBorder.GetTopEx(),o=this.ChartBorder.GetBottomEx();t&&(n=this.ChartBorder.GetBottom(),s=this.ChartBorder.GetRightEx(),o=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+xi.FrameLeftMargin);var h=this.ChartFrame.XPointCount,l=Array.isArray(this.Text),u={Text:{Color:this.Color,Align:this.TextAlign,Baseline:this.TextBaseline},Font:{}};this.FixedFontSize>0?this.TextFont="".concat(this.FixedFontSize,"px ").concat(this.TextSize.FontName):this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont,u.Font={Height:this.GetFontHeight()};for(var c=this.Data.DataOffset,d=0;c<this.Data.Data.length&&d<h;++c,++d,r+=a+i){var f=this.Data.Data[c];if(null!=f){if(e)var C=this.ChartFrame.GetXFromIndex(d);else{var m=r,D=r+a;if(D>n)break;C=m+(D-m)/2}var p;if(p=1===this.FixedPosition?s:2===this.FixedPosition?o:this.ChartFrame.GetYFromData(f),C>n)break;if(p+=this.ShowOffset.Y,C+=this.ShowOffset.X,u.X=C,u.Y=p,l){var v=this.Text[c];if(!v)continue;this.DrawText(v,u,t)}else this.DrawText(this.Text,u,t);this.DrawVerticalLine(c,u,t)}}}},this.DrawText=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var s=this.TextBG.Margin,o=r-s[0],h=n-s[2],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,u,l)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(F(o),F(h),L(u),L(l))),e.Rect={Bottom:o,Top:o+u}}else{o=r,u=e.Font.Height;e.Rect={Bottom:o,Top:o+u}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){s=this.TextBG.Margin,o=r-s[2],h=n-e.Font.Height-s[1],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,l,u)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(F(o),F(h),L(l),L(u))),e.Rect={Top:h,Bottom:h+u}}else{h=n-e.Font.Height,u=e.Font.Height;e.Rect={Top:h,Bottom:h+u}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}},this.DrawVerticalLine=function(t,e,a){if(this.VerticalLine){var i=this.VerticalLine.Data[t];if(i&&ze.IsNumber(i.High)&&ze.IsNumber(i.Low)){var r,n,s=this.ChartFrame.GetYFromData(i.High),o=this.ChartFrame.GetYFromData(i.Low);if(a)if(e.Rect.Bottom>s)r=e.Rect.Bottom-1,n=s+1;else{if(!(e.Rect.Top<o))return;r=e.Rect.Top-1,n=o-1}else if(e.Rect.Bottom<s)r=e.Rect.Bottom+1,n=s-1;else{if(!(e.Rect.Top>o))return;r=e.Rect.Top-1,n=o+1}this.Canvas.save();var h=I(),l=e.X;1==this.VerticalLine.LineType&&(this.VerticalLine.LineDotted?this.Canvas.setLineDash(this.VerticalLine.LineDotted):this.Canvas.setLineDash([5,10])),ze.IsPlusNumber(this.VerticalLine.LineWidth)&&(this.Canvas.lineWidth=this.VerticalLine.LineWidth*h),this.Canvas.strokeStyle=this.VerticalLine.Color,this.Canvas.beginPath(),a?(this.Canvas.moveTo(F(r),F(l)),this.Canvas.lineTo(F(n),F(l))):(this.Canvas.moveTo(F(l),F(r)),this.Canvas.lineTo(F(l),F(n))),this.Canvas.stroke(),this.Canvas.restore()}}}}function zt(){this.newMethod=Ut,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNumber",this.ReloadResource=function(t){this.TextSize={Max:xi.DRAWNUMBER.MaxSize,Min:xi.DRAWNUMBER.MinSize,Zoom:{Type:xi.DRAWNUMBER.Zoom.Type,Value:xi.DRAWNUMBER.Zoom.Value},FontName:xi.DRAWNUMBER.FontName,YOffset:xi.DRAWNUMBER.YOffset}}}function Kt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightLine",this.Color="rgb(255,193,37)",this.Draw=function(){if(this.Data&&this.Data.Data&&1==this.Data.Data.length){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();var t=this.ChartFrame.XPointCount,e=this.Data.Data[0],a=this.ChartFrame.GetYFromData(e),i=this.ChartFrame.GetXFromIndex(0),r=this.ChartFrame.GetXFromIndex(t-1),n=parseInt(a.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(i,n),this.Canvas.lineTo(r,n),this.Canvas.strokeStyle=this.Color,this.Canvas.stroke()}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};return this.Data&&this.Data.Data?(1!=this.Data.Data.length||(t.Min=this.Data.Data[0],t.Max=this.Data.Data[0]),t):t}}function Jt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightArea",this.Color="rgb(255,193,37)",this.Font="11px 微软雅黑",this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)if(!0!==this.ChartFrame.IsHScreen){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),this.ChartBorder.GetBottom();var t=this.ChartBorder.GetLeft(),e=this.ChartFrame.XPointCount,a=this.ChartFrame.GetXFromIndex(e-1);for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),s=Math.min(r.Value,r.Value2),o=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(s);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(L(t),L(o),L(a-t),L(h-o)),r.Title&&r.TitleColor){this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font;var l=o+(h-o)/2;this.Canvas.fillText(r.Title,a,l)}}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartBorder.GetBottom(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetHeight();for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),s=Math.min(r.Value,r.Value2),o=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(s);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(L(h),L(e),L(o-h),L(a)),r.Title&&r.TitleColor){var l=o+(h-o)/2,u=t;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font,this.Canvas.fillText(r.Title,0,-2),this.Canvas.restore()}}}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};if(!this.Data||!this.Data.Data)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a&&!isNaN(a.Value)&&!isNaN(a.Value2)){var i=Math.max(a.Value,a.Value2),r=Math.min(a.Value,a.Value2);null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=r),t.Max<i&&(t.Max=i),t.Min>r&&(t.Min=r)}}return t}}function Qt(){this.newMethod=Ft,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePriceLine",this.YClose,this.IsDrawArea=!0,this.AreaColor="rgba(0,191,255,0.1)",this.IsShowLead=!1,this.LeadData,this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.BeforeOpenData,this.BeforeLineColor=xi.Minute.Before.LineColor,this.BeforeAvPriceColor=xi.Minute.Before.AvPriceColor,this.BeforePoint=E(xi.Minute.Before.Point),this.AfterCloseData,this.AfterLineColor=xi.Minute.After.LineColor,this.AfterAvPriceColor=xi.Minute.After.AvPriceColor,this.AfterPoint=E(xi.Minute.After.Point),this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ColorLineData,this.Source,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.DayOffset,this.LastPoint={},this.FFMChart,this.DrawType=0,this.UpdateLastPoint=function(t,e,a,i){ze.IsNumber(this.LastPoint.DateTime)&&this.LastPoint.DateTime>t||(this.LastPoint.DateTime=t,this.LastPoint.X=e,this.LastPoint.Y=a,this.LastPoint.Data=i,this.LastPoint.Value=i.Value)},this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.LastPoint={},this.IsShow)if(14!=this.DrawType){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=this.ChartBorder.GetBottomEx(),r=this.ChartBorder.GetLeftEx(),n=this.Data;if(this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen(),this.IsShowLead&&this.DrawLead(),n){var s=!0,o={},h=0,l=0;this.Canvas.save(),ze.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth);for(var u=n.DataOffset,c=0;u<n.Data.length&&c<e;++u,++c){var d;if(d=n.Data[u],++l,null!=d){var f=this.ChartFrame.GetXFromIndex(c),m=this.ChartFrame.GetYFromData(d);if(s?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(m,f):this.Canvas.moveTo(f,m),s=!1,o={X:f,Y:m}):t?this.Canvas.lineTo(m,f):this.Canvas.lineTo(f,m),this.Source){var D=this.Source.Data[u],p=1e6*D.Date+100*D.Time;this.UpdateLastPoint(p,f,m,{Value:d,Index:u,Date:D.Date,Time:D.Time,Type:0,Explain:"盘中"})}++h,l>=a&&(s=!0,this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,f),this.Canvas.lineTo(r,o.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(f,i),this.Canvas.lineTo(o.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()),l=0,h=0)}}if(h>0&&(1==h?(this.Canvas.beginPath(),t?this.Canvas.arc(o.Y,o.X,1,0,360,!1):this.Canvas.arc(o.X,o.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):(this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,f),this.Canvas.lineTo(r,o.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(f,i),this.Canvas.lineTo(o.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()))),this.Canvas.restore(),this.DrawColorLine(),this.DrawAfterClose(),this.DrawMultiDayAfterClose(),this.GetEventCallback){var v=this.GetEventCallback(C.ON_DRAW_MINUTE_LAST_POINT);if(v){n={LastPoint:{X:this.LastPoint.X,Y:this.LastPoint.Y},Price:this.LastPoint.Price,Data:this.LastPoint.Data};v.Callback(v,n,this)}}}}else this.FFMChart&&this.FFMChart.Draw&&this.FFMChart.Draw(this)},this.DrawLead=function(){if(this.LeadData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetTopEx());if(!0===t&&(i=this.ChartBorder.GetRightEx()),!(e>a)){for(var r=[],n=null,s=null,o=this.ChartFrame.GetYFromData(this.YClose),h=(o-i)/3,l=this.LeadData,u=l.DataOffset,c=0;u<l.Data.length&&c<e;++u,++c){var d=l.Data[u];if(ze.IsNumber(d)&&0!=d){var f=this.ChartFrame.GetXFromIndex(c);(null==n||n<d)&&(n=d),(null==s||s>d)&&(s=d),r.push({X:f,Value:d})}}if(!(r.length<=0)){var C=Math.max(Math.abs(n),Math.abs(s));for(var u in r){var m=r[u];m.Value>0?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var D=o-m.Value*h/C;f=F(m.X);this.Canvas.beginPath(),!0===t?(this.Canvas.moveTo(o,f),this.Canvas.lineTo(D,f)):(this.Canvas.moveTo(f,o),this.Canvas.lineTo(f,D)),this.Canvas.stroke()}}}}},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=!0===this.ChartFrame.IsHScreen,r=!0,n=0;e.TotalCount;if(3==e.Ver){for(var s=0;s<e.Data.length;++s){var o=e.Data[s];if(o&&ze.IsNumber(o.AvPrice)){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(o.AvPrice);else h=this.ChartFrame.GetRightExtendXFromIndex(s,e),l=this.ChartFrame.GetRightExtendYFromData(o.AvPrice);r?(this.Canvas.strokeStyle=this.BeforeAvPriceColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1):i?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++n}}n>0&&this.Canvas.stroke()}r=!0,n=0;var u=[];for(s=0;s<e.Data.length;++s){o=e.Data[s];if(o&&ze.IsNumber(o.Price)){if(a)h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(o.Price);else h=this.ChartFrame.GetRightExtendXFromIndex(s,e),l=this.ChartFrame.GetRightExtendYFromData(o.Price);r?(this.Canvas.strokeStyle=a?this.BeforeLineColor:this.AfterLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1,u.push({X:h,Y:l})):(i?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),u.push({X:h,Y:l}));var c=1e6*o.Date+o.Time;this.UpdateLastPoint(c,h,l,{Value:o.Price,Index:s,Date:o.Date,Time:o.Time,Type:a?1:2,Explain:a?"盘前":"盘后"}),++n}else if(0==s&&a&&ze.IsNumber(this.YClose)){var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(this.YClose);this.Canvas.strokeStyle=this.BeforeLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1}}if(n>0&&this.Canvas.stroke(),2==e.Ver&&this.BeforePoint.Radius>0)for(var s in this.Canvas.fillStyle=a?this.BeforePoint.Color:this.AfterPoint.Color,u){o=u[s];this.Canvas.beginPath(),i?this.Canvas.arc(o.Y,o.X,this.BeforePoint.Radius,0,2*Math.PI):this.Canvas.arc(o.X,o.Y,this.BeforePoint.Radius,0,2*Math.PI),this.Canvas.fill()}}},this.FindColorLineItem=function(t){if(!t||!this.ColorLineData)return null;for(var e in this.ColorLineData){var a=this.ColorLineData[e];if(a.Date==t.Date&&t.Time>=a.Start&&t.Time<=a.End)return a}return null},this.DrawColorLine=function(){if(this.ColorLineData&&this.Source&&this.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartBorder.GetBorder(),this.ChartFrame.XPointCount),a=(this.ChartFrame.MinuteCount,this.Data),i=!0,r={},n=0,s=null;this.Canvas.save();for(var o=a.DataOffset,h=0;o<a.Data.length&&h<e;++o,++h){var l;l=a.Data[o];var u=this.Source.Data[o];if(l&&u){var c=this.FindColorLineItem(u);if(c){s&&s!=c.Color&&(this.Canvas.stroke(),i=!0);var d=this.ChartFrame.GetXFromIndex(h),f=this.ChartFrame.GetYFromData(l);i?(this.Canvas.strokeStyle=c.Color,ze.IsNumber(c.LineWidth)&&(this.Canvas.lineWidth=c.LineWidth),this.Canvas.beginPath(),t?this.Canvas.moveTo(f,d):this.Canvas.moveTo(d,f),i=!1,{X:d,Y:f},s=c.Color):t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),r.X=d,r.Y=f,r.Price=l,++n}else n>0&&(this.Canvas.stroke(),i=!0)}}n>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFMChart&&this.FFMChart.GetMaxMin)return this.FFMChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;if(!this.IsShow)return e;if(e.Min=this.YClose,e.Max=this.YClose,this.ChartBorder.LeftExtendWidth>10&&this.BeforeOpenData)for(var a in this.BeforeOpenData.Data){var i=this.BeforeOpenData.Data[a];i&&(ze.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==this.BeforeOpenData.Ver&&ze.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}for(var r=this.Data,n=(a=r.DataOffset,0);a<r.Data.length&&n<t;++a,++n){var s;s=r.Data[a],null!=s&&(null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s))}if(e.Max==this.YClose&&e.Min==this.YClose)return e.Max=this.YClose+.1*this.YClose,e.Min=this.YClose-.1*this.YClose,e;var o=Math.max(Math.abs(this.YClose-e.Max),Math.abs(this.YClose-e.Min));return e.Max=this.YClose+o,e.Min=this.YClose-o,e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var r=this.ChartBorder.PtInClient(t,e,this.Canvas,i);if(1!=r)return!1;var n=this.Data,s=this.ChartFrame.GetXData(t),o=Math.ceil(s),h=Math.floor(s);if(o>=n.Data.length||h>=n.Data.length)return!1;if(o==h)n.Data[h];else{var l=n.Data[h],u=n.Data[o],c={X:this.ChartFrame.GetXFromIndex(h),Y:this.ChartFrame.GetYFromData(l)},d={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(u)};if(this.Canvas.beginPath(),this.Canvas.moveTo(c.X,c.Y+5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(d.X,d.Y-5),this.Canvas.lineTo(d.X,d.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:s,Start:{Index:h,Item:n.Data[h]},End:{Index:o,Value:n.Data[o]}},a.ChartPaint=this,a.Type=5,!0}return!1}}function $t(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.Color="rgb(65,105,225)",this.MainData,this.MainYClose,this.SourceData,this.ClassName="ChartOverlayMinutePriceLine",this.Title,this.Symbol,this.YClose,this.Status=xt.STATUS_NONE_ID,this.OverlayType=0,this.IsCalcuateMaxMin=!0,this.SetOption=function(t){t&&(ze.IsNumber(t.OverlayType)&&(this.OverlayType=t.OverlayType),ze.IsBool(t.IsCalcuateMaxMin)&&(this.IsCalcuateMaxMin=t.IsCalcuateMaxMin))},this.PtInChart=function(t,e){var a={MinuteOverlayPrice:!0,YClose:this.YClose,MainYClose:this.MainYClose,OverlayType:this.OverlayType};return this.PtInLine(t,e,a)},this.DrawSelectedStatus=function(){var t={MinuteOverlayPrice:!0,YClose:this.YClose,MainYClose:this.MainYClose,OverlayType:this.OverlayType};this.DrawLinePoint(t)},this.Draw=function(){if(this.Data)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount;this.Canvas.save(),this.ClipClient(t);for(var i=!0,r=0,n=0,s=this.Data.DataOffset+0,o=0;s<this.Data.Data.length&&o<e;++s,++o){var h=this.Data.Data[s].Close;if(null!=h){n=h,0==this.OverlayType&&(n=h/this.YClose*this.MainYClose);var l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(n,!1);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(u,l):this.Canvas.moveTo(l,u),i=!1):t?this.Canvas.lineTo(u,l):this.Canvas.lineTo(l,u),++r,r>=a&&(i=!0,this.Canvas.stroke(),r=0)}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(!this.IsCalcuateMaxMin)return e;if(null==this.YClose)return e;e.Min=this.MainYClose,e.Max=this.MainYClose;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a].Close;null!=r&&(0==this.OverlayType&&(r=r/this.YClose*this.MainYClose),null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=r),e.Max<r&&(e.Max=r),e.Min>r&&(e.Min=r))}return e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;if(!ze.IsNumber(this.YClose)||!ze.IsNumber(this.MainYClose))return!1;var r=this.ChartBorder.PtInClient(t,e,this.Canvas,i);if(1!=r)return!1;var n=this.Data,s=this.ChartFrame.GetXData(t),o=Math.ceil(s),h=Math.floor(s);if(o>=n.Data.length||h>=n.Data.length)return!1;if(o==h)n.Data[h];else{var l=n.Data[h].Close;l=l/this.YClose*this.MainYClose;var u=n.Data[o].Close;u=u/this.YClose*this.MainYClose;var c={X:this.ChartFrame.GetXFromIndex(h),Y:this.ChartFrame.GetYFromData(l)},d={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(u)};if(this.Canvas.beginPath(),this.Canvas.moveTo(c.X,c.Y+5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(d.X,d.Y-5),this.Canvas.lineTo(d.X,d.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:s,Start:{Index:h,Item:n.Data[h]},End:{Index:o,Value:n.Data[o]}},a.ChartPaint=this,a.Type=6,!0}return!1}}function jt(){this.newMethod=Ft,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePositionLine",this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.IsShow){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetLeftEx(),this.Data);if(i){var r=!0,n={},s={},o=0,h=0;this.Canvas.save(),ze.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth),this.IsDotLine&&this.Canvas.setLineDash(xi.DOTLINE.LineDash);for(var l=i.DataOffset,u=0;l<i.Data.length&&u<e;++l,++u){var c;if(c=i.Data[l],++h,null!=c){var d=this.ChartFrame.GetXFromIndex(u),f=this.ChartFrame.GetYFromData(c);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(f,d):this.Canvas.moveTo(d,f),r=!1,n={X:d,Y:f}):t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),s.X=d,s.Y=f,s.Price=c,++o,h>=a&&(r=!0,this.Canvas.stroke(),h=0,o=0)}}o>0&&(1==o?(this.Canvas.beginPath(),t?this.Canvas.arc(n.Y,n.X,1,0,360,!1):this.Canvas.arc(n.X,n.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):this.Canvas.stroke()),this.Canvas.restore()}}}}function Zt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteInfo",this.Data=new Map,this.SourceData,this.ChartMinutePrice,this.YClose,this.HQChartBorder,this.TextColor=xi.MinuteInfo.TextColor,this.Font=xi.MinuteInfo.Font,this.PointColor=xi.MinuteInfo.PointColor,this.LineColor=xi.MinuteInfo.LineColor,this.TextBGColor=xi.MinuteInfo.TextBGColor,this.PixelTatio=I(),this.TextHeight=20,this.TextRectCache=[],this.InfoDrawCache=[],this.FrameBottom,this.FrameTop,this.FrameLeft,this.FrameRight,this.YOffset=5,this.IsHScreen=!1,this.IsDrawFull=!1,this.TooltipRect=[],this.SetOption=function(t){t.TextColor&&(this.TextColor=t.TextColor),t.TextBGColor&&(this.TextBGColor=t.TextBGColor),t.Font&&(this.Font=t.Font),t.PointColor&&(this.PointColor=t.PointColor),t.LineColor&&(this.LineColor=t.LineColor),t.TextHeight>0&&(this.TextHeight=t.TextHeight),1==t.IsDrawFull&&(this.IsDrawFull=!0)},this.Draw=function(){if(this.TooltipRect=[],this.ChartMinutePrice&&this.Data&&!(this.Data.size<=0)){this.TextRectCache=[],this.InfoDrawCache=[],this.PixelTatio=I(),this.YOffset=5*this.PixelTatio,this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount;this.ChartFrame.MinuteCount;this.FrameBottom=this.ChartBorder.GetBottom(),this.IsDrawFull&&this.HQChartBorder&&(this.FrameBottom=this.HQChartBorder.GetBottom()),this.FrameTop=this.ChartBorder.GetTop(),this.FrameLeft=this.ChartBorder.GetLeft(),this.FrameRight=this.ChartBorder.GetRight(),this.IsHScreen&&(this.FrameRight=this.ChartBorder.GetBottom(),this.FrameLeft=this.ChartBorder.GetTop(),this.FrameBottom=this.ChartBorder.GetLeft(),this.FrameTop=this.ChartBorder.GetRight()),this.YClose=this.ChartMinutePrice.YClose;for(var e=this.ChartMinutePrice.Source,a=e.DataOffset,i=0;a<e.Data.length&&i<t;++a,++i){var r=e.Data[a];if(r){var n=r.DateTime;this.Data.has(n)&&(this.IsHScreen?this.CalcuateInfoHScreenPosition(this.Data.get(n),i,r):this.CalcuateInfoPosition(this.Data.get(n),i,r))}}for(var a in this.InfoDrawCache){r=this.InfoDrawCache[a];this.DrawInfoLines(r)}for(var a in this.InfoDrawCache){r=this.InfoDrawCache[a];if(this.DrawInfoText(r),!this.IsHScreen){var s=r.Border,o=new Dt(s.X,s.Y,s.Width,s.Height),h={Data:{Item:r},Rect:o};this.TooltipRect.push(h)}}this.TextRectCache=[],this.InfoDrawCache=[]}},this.CalcuateInfoPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,s=this.TextHeight*this.PixelTatio,o=this.ChartFrame.GetXFromIndex(e);r=ze.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),o=F(o);var h=o<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=s+l[e%l.length]*this.PixelTatio,c={Y:[{Value:r+(s+this.YOffset),Offset:u},{Value:r-(2*s+this.YOffset),Offset:-u}]};a.Close<this.YClose&&(c.Y=c.Y.reverse());var d={X:o,Y:null,Width:n,Height:s};h||(d.X-=d.Width),this.FixTextRect(d,c);var f={Border:d,Start:{X:o,Y:r},IsLeft:h,Title:i.Title,Date:i.Date,Time:i.Time};i.Content&&(f.Content=i.Content),i.Link&&(f.Link=i.Link),i.Color&&(f.Color=i.Color),i.BGColor&&(f.BGColor=i.BGColor),this.InfoDrawCache.push(f),this.TextRectCache.push(d)}},this.CalcuateInfoHScreenPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,s=this.TextHeight*this.PixelTatio,o=this.ChartFrame.GetXFromIndex(e);r=ze.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),o=F(o);var h=o<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=s+l[e%l.length]*this.PixelTatio,c={X:[{Value:r+(s+this.YOffset),Offset:u},{Value:r-(2*s+this.YOffset),Offset:-u}]};a.Close>this.YClose&&(c.X=c.X.reverse());var d={X:null,Y:o,Width:s,Height:n};h||(d.Y-=d.Height),this.FixHScreenTextRect(d,c);var f={Border:d,Start:{X:r,Y:o},IsLeft:h,Title:i.Title};i.Content&&(f.Content=i.Content),i.Link&&(f.Link=i.Link),i.Color&&(f.Color=i.Color),i.BGColor&&(f.BGColor=i.BGColor),this.InfoDrawCache.push(f),this.TextRectCache.push(d)}},this.DrawInfoLines=function(t){var e=t.Border,a=t.IsLeft;this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(t.Start.X),t.Start.Y),a?this.Canvas.lineTo(F(t.Start.X),e.Y):this.IsHScreen?this.Canvas.lineTo(e.X,e.Y+e.Height):this.Canvas.lineTo(F(t.Start.X),e.Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.PointColor,this.Canvas.beginPath(),this.Canvas.arc(t.Start.X,t.Start.Y,5,0,2*Math.PI),this.Canvas.closePath(),this.Canvas.fill()},this.DrawInfoText=function(t){var e=t.Border,a=e.X,i=e.Y;t.BGColor?this.Canvas.fillStyle=t.BGColor:this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(a,i,e.Width,e.Height),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(a,i,e.Width,e.Height),this.Canvas.stroke(),this.IsHScreen&&(this.Canvas.save(),this.Canvas.translate(e.X,e.Y),this.Canvas.rotate(90*Math.PI/180),a=0,i=0),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",t.Color?this.Canvas.fillStyle=t.Color:this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.IsHScreen?this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i-e.Width/2):this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i+e.Height/2),this.IsHScreen&&this.Canvas.restore()},this.FixTextRect=function(t,e){for(var a in e.Y){var i,r=e.Y[a];t.Y=r.Value;for(var n=0;n<10;++n){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(i=t.Y,i+=r.Offset,i+t.Height>this.FrameBottom||i<this.FrameTop)break;t.Y=i}}},this.FixHScreenTextRect=function(t,e){for(var a in e.X){var i,r=e.X[a];t.X=r.Value;for(var n=0;n<10;++n){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(i=t.X,i+=r.Offset,i+t.Width<this.FrameBottom||i>this.FrameTop)break;t.X=i}}},this.IsOverlap=function(t,e){return t.X+t.Width>e.X&&e.X+e.Width>t.X&&t.Y+t.Height>e.Y&&e.Y+e.Height>t.Y},this.GetMaxMin=function(){return{Min:null,Max:null}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=3,!0}}return!1}}function qt(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMACD",this.UpColor=xi.UpBarColor,this.DownColor=xi.DownBarColor,this.LineWidth=1,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.PtInChart=function(t,e){var a=this.ChartFrame.DataWidth,i=this.LineWidth*I();return 50==this.barWidth?i=null:i>a&&(i=a),i<4&&(i=4),this.PtInBar(t,e,{BarWidth:i})},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+xi.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(n=o.Left);var h=this.ChartFrame.GetYFromData(0),l=this.LineWidth*I();(50==this.LineWidth||l>e)&&(l=e);var u=this.Canvas.lineWidth;this.Canvas.lineWidth=l;for(var c=this.Data.DataOffset,d=0;c<this.Data.Data.length&&d<s;++c,++d,r+=e+a){var f=this.Data.Data[c];if(null!=f){if(t)var C=this.ChartFrame.GetXFromIndex(d);else{var m=r,D=r+e;if(D>n)break;C=m+(D-m)/2}var p=this.ChartFrame.GetYFromData(f);if(C>n)break;var v=M(l,C);this.Canvas.beginPath(),this.Canvas.moveTo(v,h),this.Canvas.lineTo(v,p),this.Canvas.strokeStyle=f>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=u}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=(this.ChartFrame.DistanceWidth,this.ChartBorder.GetHScreenBorder()),a=e.BottomEx,i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=r.Top);var n=this.ChartFrame.GetYFromData(0),s=this.LineWidth*I();(50==this.LineWidth||s>t)&&(s=t);var o=this.Canvas.lineWidth;this.Canvas.lineWidth=s;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<i;++h,++l){var u=this.Data.Data[h];if(null!=u){var c=this.ChartFrame.GetXFromIndex(l),d=this.ChartFrame.GetYFromData(u);if(c>a)break;this.Canvas.beginPath(),this.Canvas.moveTo(n,F(c)),this.Canvas.lineTo(d,F(c)),this.Canvas.strokeStyle=u>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=o},this.GetItemData=function(t){if(!t)return null;if(!ze.IsNumber(t.Index))return null;if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length)return null;var a=this.Data.Data[e];return[{Value:a,Color:a>0?this.UpColor:this.DownColor,Name:this.Name}]}}function te(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBar",this.UpBarColor=xi.UpBarColor,this.DownBarColor=xi.DownBarColor,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetRight(),i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+e/2+2,n=this.ChartFrame.GetYFromData(0);if(t>=4){n=L(n);for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,r+=t+e){var h=this.Data.Data[s];if(null!=h&&0!=h){var l=r,u=r+t;if(u>a)break;var c=this.ChartFrame.GetXFromIndex(o),d=this.ChartFrame.GetYFromData(h);this.Canvas.fillStyle=h>0?this.UpBarColor:this.DownBarColor;var f=L(Math.abs(n-d));d=n-d>0?n-f:n+f,this.Canvas.fillRect(L(l),d,L(t),f)}}}else for(s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,r+=t+e){h=this.Data.Data[s];if(null!=h&&0!=h){l=r,u=r+t;if(u>a)break;c=this.ChartFrame.GetXFromIndex(o),d=this.ChartFrame.GetYFromData(h);this.Canvas.strokeStyle=h>0?this.UpBarColor:this.DownBarColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(c),d),this.Canvas.lineTo(F(c),n),this.Canvas.stroke()}}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:0,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];null==e.Max&&(e.Max=r),e.Max<r&&(e.Max=r)}return e}}function ee(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartBand",this.FirstColor=xi.Index.LineColor[0],this.SecondColor=xi.Index.LineColor[1],this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else for(var t=this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+a/2+2,n=0,s=0,o=0,h=[],l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){for(h=[],l=[];u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){var d=this.Data.Data[u];if(null==d||null==d.Value||null==d.Value2)break;n=this.ChartFrame.GetXFromIndex(c),s=this.ChartFrame.GetYFromData(d.Value),o=this.ChartFrame.GetYFromData(d.Value2),t?(h.push({x:s,y:n}),l.push({x:o,y:n})):(h.push({x:n,y:s}),l.push({x:n,y:o}))}h.length>1&&l.length>1&&this.DrawBand(h,l)}},this.ClipTop=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetRightEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var s=this.ChartBorder.GetTopEx();this.Canvas.lineTo(r.x,s),this.Canvas.lineTo(i.x,s)}this.Canvas.closePath(),this.Canvas.clip()},this.ClipBottom=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetLeftEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var s=this.ChartBorder.GetBottomEx();this.Canvas.lineTo(r.x,s),this.Canvas.lineTo(i.x,s)}this.Canvas.closePath(),this.Canvas.clip()},this.DrawArea=function(t,e,a){this.Canvas.beginPath();for(var i=0;i<t.length;++i)0==i?this.Canvas.moveTo(t[i].x,t[i].y):this.Canvas.lineTo(t[i].x,t[i].y);for(i=e.length-1;i>=0;--i)this.Canvas.lineTo(e[i].x,e[i].y);this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill()},this.DrawBand=function(t,e){this.FirstColor&&(this.Canvas.save(),this.ClipTop(t),this.DrawArea(t,e,this.FirstColor),this.Canvas.restore()),this.SecondColor&&(this.Canvas.save(),this.ClipBottom(t),this.DrawArea(t,e,this.SecondColor),this.Canvas.restore())},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;(null==e.Max||e.Max<n)&&(e.Max=n),(null==e.Min||e.Min>s)&&(e.Min=s)}}return e}}function ae(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartLineArea",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+xi.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),s=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:s,Y:r}}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:s}})}this.Canvas.fillStyle=this.Color;var c=!0,d=0,f=[];for(var h in o){var C=o[h];if(C)c?(this.Canvas.beginPath(),this.Canvas.moveTo(C.Line.X,C.Line.Y),c=!1):this.Canvas.lineTo(C.Line.X,C.Line.Y),f.push(C),++d;else{if(d>0){for(l=f.length-1;l>=0;--l){var m=f[l];this.Canvas.lineTo(m.Line2.X,m.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}c=!0,d=0,f=[]}}if(d>0){for(l=f.length-1;l>=0;--l){m=f[l];this.Canvas.lineTo(m.Line2.X,m.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;(null==e.Max||e.Max<n)&&(e.Max=n),(null==e.Min||e.Min>s)&&(e.Min=s)}}return e}}function ie(){this.newMethod=ae,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillRGN",this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;for(var n in t){var s=t[n];if(!s||r&&s.Color!=r){if(a>0){for(var o=i.length-1;o>=0;--o){var h=i[o];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}s&&(e?(this.Canvas.beginPath(),this.Canvas.moveTo(s.Line.X,s.Line.Y),e=!1,r=s.Color):this.Canvas.lineTo(s.Line.X,s.Line.Y),i.push(s),++a)}if(a>0){for(o=i.length-1;o>=0;--o){h=i[o];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+xi.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),s=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:s,Y:r},Color:u.Color}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:s},Color:u.Color})}this.DrawRGB(o)}}}function re(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!1,this.ClassName="ChartFLOATRGN",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+xi.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,u&&ze.IsNumber(u.Value)&&ze.IsNumber(u.Value2)&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:n+u.Value2*I(),Y:r},Color:u.Color}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:n-u.Value2*I()},Color:u.Color})}var c=null;for(var h in o){u=o[h];if(c&&u)if(this.IsHScreen){var d=u.Line.Y-c.Line.Y;r=c.Line.Y+d/2,n=c.Line.X+(u.Line.X-c.Line.X)/2,s=c.Line2.X+(u.Line2.X-c.Line2.X)/2,c.RightLine={X:n,Y:r},c.RightLine2={X:s,Y:r},u.LeftLine={X:n,Y:r},u.LeftLine2={X:s,Y:r}}else{d=u.Line.X-c.Line.X;r=c.Line.X+d/2,n=c.Line.Y+(u.Line.Y-c.Line.Y)/2,s=c.Line2.Y+(u.Line2.Y-c.Line2.Y)/2,c.RightLine={X:r,Y:n},c.RightLine2={X:r,Y:s},u.LeftLine={X:r,Y:n},u.LeftLine2={X:r,Y:s}}c=u}this.DrawRGB(o)}},this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;if(this.IsHScreen)var n=this.ChartBorder.GetLeftEx(),s=this.ChartBorder.GetRightEx(),o=this.ChartBorder.GetTop(),h=this.ChartBorder.GetBottom();else n=this.ChartBorder.GetLeft(),s=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx();for(var l in this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(n,o,s-n,h-o),this.Canvas.clip(),t){var u=t[l];if(!u||r&&u.Color!=r){if(a>0){var c=i[i.length-1],d=i[0];c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y));for(var f=i.length-1;f>=0;--f){var C=i[f];this.Canvas.lineTo(C.Line2.X,C.Line2.Y)}d.LeftLine2&&this.Canvas.lineTo(d.LeftLine2.X,d.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}u&&(e?(this.Canvas.beginPath(),u.LeftLine?(this.Canvas.moveTo(u.LeftLine.X,u.LeftLine.Y),this.Canvas.lineTo(u.Line.X,u.Line.Y)):this.Canvas.moveTo(u.Line.X,u.Line.Y),e=!1,r=u.Color):this.Canvas.lineTo(u.Line.X,u.Line.Y),i.push(u),++a)}if(a>0){c=i[i.length-1],d=i[0];c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y));for(f=i.length-1;f>=0;--f){C=i[f];this.Canvas.lineTo(C.Line2.X,C.Line2.Y)}d.LeftLine2&&this.Canvas.lineTo(d.LeftLine2.X,d.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}this.Canvas.restore()},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&ze.IsNumber(r.Value)){var n=r.Value;(null==e.Max||e.Max<n)&&(e.Max=n),(null==e.Min||e.Min>n)&&(e.Min=n)}}return e}}function ne(){this.newMethod=ie,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillBGRGN",this.DrawVerticalRGN=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+xi.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),s=r,o=n,h=[],l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<a;++l,++u,i+=t+e){var c=this.Data.Data[l];h[l]=null,c&&c.Color&&(x=this.ChartFrame.GetXFromIndex(u),this.IsHScreen?h[l]={Line:{X:s,Y:x},Line2:{X:o,Y:x},Color:c.Color}:h[l]={Line:{X:x,Y:s},Line2:{X:x,Y:o},Color:c.Color})}this.DrawRGB(h)},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)if("FILLVERTICALRGN"!=this.Name){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+xi.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),s=0,o=0,h=r;"FILLBOTTOMRGN"==this.Name&&(h=n);for(var l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<a;++u,++c,i+=t+e){var d=this.Data.Data[u];l[u]=null,null!=d&&null!=d.Value&&d.Color&&(s=this.ChartFrame.GetXFromIndex(c),o=this.ChartFrame.GetYFromData(d.Value),this.IsHScreen?l[u]={Line:{X:o,Y:s},Line2:{X:h,Y:s},Color:d.Color}:l[u]={Line:{X:s,Y:o},Line2:{X:s,Y:h},Color:d.Color})}this.DrawRGB(l)}else this.DrawVerticalRGN()},this.DrawRGB=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,s=[],o=null;for(var h in t){var l=t[h];if(!l||o&&l.Color!=o){if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}r=!0,n=0,s=[],o=null}l&&(r?(this.Canvas.beginPath(),this.Canvas.moveTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y),r=!1,o=l.Color):(this.Canvas.lineTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),s.push(l),++n)}if(n>0){for(u=s.length-1;u>=0;--u){c=s[u];this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value){r=r.Value;(null==e.Max||e.Max<r)&&(e.Max=r),(null==e.Min||e.Min>r)&&(e.Min=r)}}return e}}function se(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartChannel",this.IsHScreen=!1,this.PointCount=0,this.DataWidth=0,this.DistanceWidth=0,this.ChartRight=0,this.LineColor="RGB(255,0,0)",this.LineDotted=[3,3],this.AreaColor="RGB(255,222,173)",this.LineWidth=1,this.CalculateData=function(){for(var t=[],e=[],a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<this.PointCount;++a,++i){var r=this.Data.Data[a];if(r&&ze.IsNumber(r.Value)&&ze.IsNumber(r.Value2)){var n=this.ChartFrame.GetXFromIndex(i);if(n>this.ChartRight)break;var s=this.ChartFrame.GetYFromData(r.Value),o=this.ChartFrame.GetYFromData(r.Value2);e.push({X:n,Y:s,Y2:o})}else e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},this.DrawArea=function(t){if(!(t.length<=0)){this.Canvas.beginPath();var e=t[0];this.IsHScreen?this.Canvas.moveTo(e.Y,e.X):this.Canvas.moveTo(e.X,e.Y);for(var a=1;a<t.length;++a){var i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y)}for(a=t.length-1;a>=0;--a){i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y2,i.X):this.Canvas.lineTo(i.X,i.Y2)}this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()}},this.DrawLine=function(t){this.Canvas.strokeStyle=this.LineColor;for(var e=0;e<2;++e){for(var a=!0,i=0,r=0;r<t.length;++r){var n=t[r];a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(0===e?n.Y:n.Y2,n.X):this.Canvas.moveTo(n.X,0===e?n.Y:n.Y2),a=!1):this.IsHScreen?this.Canvas.lineTo(0===e?n.Y:n.Y2,n.X):this.Canvas.lineTo(n.X,0===e?n.Y:n.Y2),++i}i>0&&this.Canvas.stroke()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.PointCount=this.ChartFrame.XPointCount,this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen?this.ChartRight=this.ChartBorder.GetBottom():this.ChartRight=this.ChartBorder.GetRight();var t=this.CalculateData();if(t&&!(t.length<=0)){this.Canvas.save(),this.Canvas.lineWidth=this.LineWidth*I(),this.Canvas.setLineDash(this.LineDotted);for(var e=0;e<t.length;++e){var a=t[e];this.DrawArea(a),this.DrawLine(a)}this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;(null==e.Max||e.Max<n)&&(e.Max=n),(null==e.Min||e.Min>s)&&(e.Min=s)}}return e}}function oe(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackground",this.Color=null,this.ColorAngle=0,this.IsDrawFirst=!0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&!(this.Color.length<=0)){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,2==this.Color.length){if(this.IsHScreen)if(0==this.ColorAngle)var t={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()};else t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else if(0==this.ColorAngle)t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()};var a=this.Canvas.createLinearGradient(t.X,t.Y,e.X,e.Y);a.addColorStop(0,this.Color[0]),a.addColorStop(1,this.Color[1]),this.Canvas.fillStyle=a}else{if(1!=this.Color.length)return;this.Canvas.fillStyle=this.Color[0]}if("DRAWGBK2"!=this.Name&&"KLINE_BG"!=this.Name){if(this.IsHScreen)var i=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetWidthEx(),s=this.ChartBorder.GetHeight();else i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetWidth(),s=this.ChartBorder.GetHeightEx();this.Canvas.fillRect(i,r,n,s)}else this.DrawRegion()}},this.DrawRegion=function(){var t=this.ChartFrame.XPointCount,e=this.ChartBorder.GetLeft()+i/2+xi.FrameLeftMargin,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(r=this.ChartBorder.GetRightEx(),n=this.ChartBorder.GetLeftEx());for(var s=[],o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<t;++o,++h,e+=a+i){var l=this.Data.Data[o];if(s[o]=null,ze.IsNumber(l)&&!(l<=0)){var u=this.ChartFrame.GetXFromIndex(h);this.ChartFrame.GetYFromData(l.Value);this.IsHScreen?s[o]={Line:{X:n,Y:u},Line2:{X:r,Y:u}}:s[o]={Line:{X:u,Y:r},Line2:{X:u,Y:n}}}}this.DrawBG(s)},this.DrawBG=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,s=[],o=null;for(var h in t){var l=t[h];if(!l||o&&l.Color!=o){if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.IsHScreen?(this.Canvas.lineTo(c.Line2.X,c.Line2.Y+i),this.Canvas.lineTo(c.Line2.X,c.Line2.Y-i)):(this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}r=!0,n=0,s=[],o=null}l&&(r?(this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(l.Line.X,l.Line.Y-i),this.Canvas.lineTo(l.Line.X,l.Line.Y+i)):(this.Canvas.moveTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),r=!1,o=l.Color):this.IsHScreen?(this.Canvas.lineTo(l.Line.X,l.Line.Y-i),this.Canvas.lineTo(l.Line.X,l.Line.Y+i)):(this.Canvas.lineTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),s.push(l),++n)}if(n>0){for(u=s.length-1;u>=0;--u){c=s[u];this.IsHScreen?(this.Canvas.lineTo(c.Line2.X,c.Line2.Y+i),this.Canvas.lineTo(c.Line2.X,c.Line2.Y-i)):(this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function he(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackgroundDiv",this.AryColor,this.ColorType=0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&ze.IsNonEmptyArray(this.AryColor)&&this.Data&&this.Data.Data){var t,e,a,i,r,n=!0===this.ChartFrame.IsHScreen,s=this.ChartFrame.DataWidth,o=this.ChartFrame.DistanceWidth,h=this.ChartFrame.XPointCount;n?(t=this.ChartBorder.GetHScreenBorder(),e=t.TopEx+o/2+xi.FrameLeftMargin,a=t.BottomEx,i=t.LeftEx,r=t.RightEx):(t=this.ChartBorder.GetBorder(),e=t.LeftEx+o/2+xi.FrameLeftMargin,a=t.RightEx,i=t.TopEx,r=t.BottomEx);for(var l=null,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<h;++u,++c,e+=s+o){var d=this.Data.Data[u],f=e,C=e+s;if(C>a)break;if(d){var m=i,D=r;if(ze.IsNonEmptyArray(d.AryValue)){var p=this.ChartFrame.GetYFromData(d.AryValue[0]),v=this.ChartFrame.GetYFromData(d.AryValue[1]);m=Math.min(p,v),D=Math.max(p,v)}n?l?(l.Bottom=C,l.Left>m&&(l.Left=m),l.Right<D&&(l.Right=D)):l={Left:m,Right:D,Top:f,Bottom:C}:l?(l.Right=C,l.Top>m&&(l.Top=m),l.Bottom<D&&(l.Bottom=D)):l={Left:f,Right:C,Top:m,Bottom:D}}else l&&this.DrawDiv(l,n),l=null}}},this.DrawDiv=function(t,e){if(2==this.ColorType)this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(F(t.Left),F(t.Top),L(t.Right-t.Left),L(t.Bottom-t.Top));else if(3==this.ColorType)this.Canvas.fillStyle=this.AryColor[1],this.Canvas.fillRect(L(t.Left),L(t.Top),L(t.Right-t.Left),L(t.Bottom-t.Top)),this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(F(t.Left),F(t.Top),L(t.Right-t.Left),L(t.Bottom-t.Top));else{if(0!=this.ColorType&&1!=this.ColorType)return;var a=null;a=e?0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top):this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top),a.addColorStop(.5,this.AryColor[0]),a.addColorStop(1,this.AryColor[1]),this.Canvas.fillStyle=a,this.Canvas.fillRect(L(t.Left),L(t.Top),L(t.Right-t.Left),L(t.Bottom-t.Top))}}}function le(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartRectangle",this.Color=[],this.Rect,this.BorderColor=xi.FrameBorderPen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&this.Rect&&!(this.Color.length<=0)){this.Canvas.strokeStyle=this.BorderColor;var t=!1;if(2==this.Color.length)this.Canvas.fillStyle=this.Color[0],t=!0;else{if(1!=this.Color.length)return;this.Color[0]&&(this.Canvas.fillStyle=this.Color[0],t=!0)}var e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetHeightEx(),i=this.Rect.Left/1e3*e,r=this.Rect.Top/1e3*a,n=this.Rect.Right/1e3*e,s=this.Rect.Bottom/1e3*a;i=this.ChartBorder.GetLeft()+i,r=this.ChartBorder.GetTopEx()+r,n=this.ChartBorder.GetLeft()+n,s=this.ChartBorder.GetTopEx()+s;var o=Math.abs(i-n),h=Math.abs(r-s);t&&this.Canvas.fillRect(i,r,o,h),this.Canvas.beginPath(),this.Canvas.rect(F(i),F(r),L(o),L(h)),this.Canvas.stroke()}}}function ue(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartTextLine",this.Text,this.Line,this.Price,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Text&&this.Line&&ze.IsNumber(this.Price)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx(),i=this.ChartBorder.GetTopEx(),r=this.ChartFrame.GetYFromData(this.Price),n=0;if(this.Text.Title){var s=t+2*I(),o=r;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var h=8*I();r-h<i?(this.Canvas.textBaseline="top",o=i):r+h>a&&(this.Canvas.textBaseline="bottom",o=a),this.Canvas.fillStyle=this.Text.Color,this.Canvas.font=this.Text.Font,this.Canvas.fillText(this.Text.Title,s,o),n=this.Canvas.measureText(this.Text.Title).width+4*I()}if(this.Line.Type>0){2==this.Line.Type&&(this.Canvas.save(),this.Canvas.setLineDash([3,5]));s=t+n;this.Canvas.strokeStyle=this.Line.Color,this.Canvas.beginPath(),this.Canvas.moveTo(s,F(r)),this.Canvas.lineTo(e,F(r)),this.Canvas.stroke(),2==this.Line.Type&&this.Canvas.restore()}}},this.GetMaxMin=function(){var t={Min:null,Max:null};return ze.IsNumber(this.Price)&&(t.Min=this.Price,t.Max=this.Price),t}}function ce(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiBar",this.Bars=[],this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartFrame.DataWidth,i=I(),r=[];for(var n in this.Bars){var s=this.Bars[n],o={Point:[],Color:s.Color,Width:a,Type:0};for(var h in s.Type>0&&(o.Type=s.Type),s.Width>0?(o.Width=s.Width*i,o.Width>a&&(o.Width=a)):o.Width<4&&(o.Width=1*i),s.Point){var l=s.Point[h];if(ze.IsNumber(l.Index)){var u=l.Index-e;if(u>=0&&u<t){var c=this.ChartFrame.GetXFromIndex(u),d=this.ChartFrame.GetYFromData(l.Value),f=this.ChartFrame.GetYFromData(l.Value2);o.Point.push({X:c,Y:d,Y2:f})}}}o.Point.length>0&&r.push(o)}for(var n in r){s=r[n];s.Width>=4?1==s.Type?this.DrawHollowBar(s):this.DrawFillBar(s):this.DrawLineBar(s)}}},this.DrawLineBar=function(t){this.Canvas.strokeStyle=t.Color;var e=this.Canvas.lineWidth;for(var a in this.Canvas.lineWidth=t.Width,t.Point){var i=t.Point[a];this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(F(i.Y),F(i.X)),this.Canvas.lineTo(F(i.Y2),F(i.X))):(this.Canvas.moveTo(F(i.X),F(i.Y)),this.Canvas.lineTo(F(i.X),F(i.Y2))),this.Canvas.stroke()}this.Canvas.lineWidth=e},this.DrawFillBar=function(t){for(var e in this.Canvas.fillStyle=t.Color,t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,s=Math.abs(a.Y-a.Y2);this.IsHScreen?this.Canvas.fillRect(L(r),L(i),L(s),L(n)):this.Canvas.fillRect(L(i),L(r),L(n),L(s))}},this.DrawHollowBar=function(t){this.Canvas.strokeStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,s=Math.abs(a.Y-a.Y2);this.Canvas.beginPath(),this.IsHScreen?this.Canvas.rect(F(r),F(i),L(s),L(n)):this.Canvas.rect(F(i),F(r),L(n),L(s)),this.Canvas.stroke()}this.Canvas.lineWidth=1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Bars){var n=this.Bars[r];for(var s in n.Point){var o=n.Point[s];if(o.Index>=a&&o.Index<i){var h=Math.min(o.Value,o.Value2),l=Math.max(o.Value,o.Value2);(null==t.Max||t.Max<l)&&(t.Max=l),(null==t.Min||t.Min>h)&&(t.Min=h)}}}return t}}function de(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiLine",this.Lines=[],this.LineDash,this.LineWidth=1,this.IsHScreen=!1,this.ArrawAngle=35,this.ArrawLength=10,this.ArrawLineWidth=5,this.Arrow={Start:!1,End:!1},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=[],i=[];for(var r in this.Lines){var n=this.Lines[r],s={Point:[],Color:n.Color},o={Start:[],End:[]};n.BGColor&&(s.BGColor=n.BGColor);for(var h=0;h<n.Point.length;++h){var l=n.Point[h];if(ze.IsNumber(l.Index)){var u=l.Index-e;if(u>=0&&u<t){var c=this.ChartFrame.GetXFromIndex(u),d=this.ChartFrame.GetYFromData(l.Value,!1),f={X:c,Y:d,End:!1};s.Point.push(f),0!=h&&1!=h||o.Start.push(f),h!=n.Point.length-1&&h!=n.Point.length-2||o.End.push(f)}else s.Point.length>0&&(s.Point[s.Point.length-1].End=!0)}}s.Point.length>=2&&(a.push(s),i.push(o))}var C=I();for(var r in this.Canvas.save(),a){this.LineDash&&this.Canvas.setLineDash(this.LineDash),ze.IsPlusNumber(this.LineWidth)?this.Canvas.lineWidth=this.LineWidth*C:this.Canvas.lineWidth=1*C;var m=a[r];this.DrawLine(m,i[r])}this.Canvas.restore()}},this.DrawLine=function(t,e){if(t.BGColor){for(var a in this.Canvas.fillStyle=t.BGColor,t.Point){var i=t.Point[a];0==a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y)):this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y)}this.Canvas.closePath(),this.Canvas.fill()}this.Canvas.strokeStyle=t.Color;var r=0;for(var a in t.Point){i=t.Point[a];0==r?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y),++r):(this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),++r),1==i.End&&(r>0&&this.Canvas.stroke(),r=0)}r>0&&this.Canvas.stroke(),2==e.End.length&&1==this.Arrow.End&&this.DrawArrow(e.End[0],e.End[1]),2==e.Start.length&&1==this.Arrow.Start&&this.DrawArrow(e.Start[1],e.Start[0])},this.DrawArrow=function(t,e){var a=this.ArrawAngle,i=this.ArrawLength,r=180*Math.atan2(t.Y-e.Y,t.X-e.X)/Math.PI,n=(r+a)*Math.PI/180,s=(r-a)*Math.PI/180,o=i*Math.cos(n),h=i*Math.sin(n),l=i*Math.cos(s),u=i*Math.sin(s);this.Canvas.beginPath();var c=e.X+o,d=e.Y+h;this.Canvas.moveTo(c,d),this.Canvas.lineTo(e.X,e.Y),c=e.X+l,d=e.Y+u,this.Canvas.lineTo(c,d),this.Canvas.setLineDash([]),this.Canvas.lineWidth=this.ArrawLineWidth*I(),this.Canvas.stroke()},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Lines){var n=this.Lines[r];for(var s in n.Point){var o=n.Point[s];o.Index>=a&&o.Index<i&&((null==t.Max||t.Max<o.Value)&&(t.Max=o.Value),(null==t.Min||t.Min>o.Value)&&(t.Min=o.Value))}}return t}}function fe(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiPoint",this.PointGroup=[],this.IsHScreen=!1,this.LineWidth=1,this.PointRadius=5,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&ze.IsNonEmptyArray(this.PointGroup)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=I();this.Canvas.save(),this.ClipClient(this.IsHScreen);for(var i=0;i<this.PointGroup.length;++i){var r=this.PointGroup[i],n=r.Color,s=r.BGColor,o=this.LineWidth,h=this.PointRadius;ze.IsNumber(r.LineWidth)&&(o=r.LineWidth),ze.IsNumber(r.PointRadius)&&(h=r.PointRadius);for(var l=new Path2D,u=0,c=0;c<r.Point.length;++c){var d=r.Point[c];if(ze.IsNumber(d.Index)){var f=d.Index-e;if(f>=0&&f<t){var C=this.ChartFrame.GetXFromIndex(f),m=this.ChartFrame.GetYFromData(d.Value,!1),D=new Path2D;this.IsHScreen?D.arc(m,C,h*a,0,360,!1):D.arc(C,m,h*a,0,360,!1),l.addPath(D),++u}}}u>0&&(s||n)&&(this.Canvas.lineWidth=o*a,this.Canvas.fillStyle=s,this.Canvas.strokeStyle=n,s&&this.Canvas.fill(l),n&&this.Canvas.stroke(l))}this.Canvas.restore()}},this.GetMaxMin=function(){for(var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e,r=0;r<this.PointGroup.length;++r){var n=this.PointGroup[r];if(ze.IsNonEmptyArray(n.Point))for(var s=0;s<n.Point.length;++s){var o=n.Point[s];o.Index>=a&&o.Index<i&&((null==t.Max||t.Max<o.Value)&&(t.Max=o.Value),(null==t.Min||t.Min>o.Value)&&(t.Min=o.Value))}}return t}}function Ce(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiText",this.Texts=[],this.Font=xi.DefaultTextFont,this.Color=xi.DefaultTextColor,this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Texts){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom());for(var s=0,o=0;o<this.Texts.length;++o){var h=this.Texts[o];if(h.Text&&ze.IsNumber(h.Index)){var l=h.Index-e;if(l>=0&&l<t){var u=this.ChartFrame.GetXFromIndex(l);s="TOP"==h.Value?r:"BOTTOM"==h.Value?n:this.ChartFrame.GetYFromData(h.Value),h.Color?this.Canvas.fillStyle=h.Color:this.Canvas.fillStyle=this.Color,h.Font?this.Canvas.font=h.Font:this.Canvas.font=this.Font;var c=this.Canvas.measureText(h.Text).width;if(this.Canvas.textAlign="center",u+c/2>=i?(this.Canvas.textAlign="right",u=i):u-c/2<a&&(this.Canvas.textAlign="left",u=a),1==h.Baseline?this.Canvas.textBaseline="top":2==h.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(s,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Text,0,0),this.Canvas.restore()):(ze.IsNumber(h.YMove)&&(s+=h.YMove),this.Canvas.fillText(h.Text,u,s)),h.Line){var d=this.Data.Data[h.Index],f="H"==h.Line.KData?d.High:d.Low,C=this.ChartFrame.GetYFromData(f),m=s;Array.isArray(h.Line.Offset)&&2==h.Line.Offset.length&&(m>C?(m-=h.Line.Offset[1],C+=h.Line.Offset[0]):m<C&&(m+=h.Line.Offset[1],C-=h.Line.Offset[0])),this.Canvas.save(),h.Line.Dash&&this.Canvas.setLineDash(h.Line.Dash),h.Line.Width>0&&(this.Canvas.lineWidth=h.Line.Width),this.Canvas.strokeStyle=h.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(m,F(u)),this.Canvas.lineTo(C,F(u))):(this.Canvas.moveTo(F(u),m),this.Canvas.lineTo(F(u),C)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];n.Index>=a&&n.Index<i&&((null==t.Max||t.Max<n.Value)&&(t.Max=n.Value),(null==t.Min||t.Min>n.Value)&&(t.Min=n.Value))}return t}}function me(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiSVGIcon",this.Icon,this.IconSize={Max:xi.DRAWICON.Icon.MaxSize,Min:xi.DRAWICON.Icon.MinSize,Zoom:{Type:xi.DRAWICON.Icon.Zoom.Type,Value:xi.DRAWICON.Icon.Zoom.Value}},this.Family,this.Color=xi.DefaultTextColor,this.IsHScreen=!1,this.IconRect=[],this.Draw=function(){if(this.IconRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Family&&this.Icon&&ze.IsNonEmptyArray(this.Icon)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth;var a=this.GetBorder();if(this.IsHScreen)var i=a.TopEx,r=a.BottomEx;else i=a.LeftEx,r=a.RightEx;var n=this.GetDynamicIconSize(this.DataWidth,this.DistanceWidth,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=n+"px "+this.Family;for(var s=0;s<this.Icon.length;++s){var o=this.Icon[s];if(ze.IsNumber(o.Index)){var h=o.Index-e;if(h>=0&&h<t){var l=this.ChartFrame.GetXFromIndex(h),u=this.ChartFrame.GetYFromData(o.Value);o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.Color;var c=this.Canvas.measureText(o.Text).width;this.Canvas.textAlign="center";var d=new Dt(l-n/2,u-n/2,n,n);if(l+c/2>=r?(this.Canvas.textAlign="right",l+=this.DataWidth/2,d.X=l-n):l-c/2<i&&(this.Canvas.textAlign="left",l-=this.DataWidth/2,d.X=l),1==o.Baseline?(this.Canvas.textBaseline="top",d.Y=u):2==o.Baseline?(this.Canvas.textBaseline="bottom",d.Y=u-n):(this.Canvas.textBaseline="middle",d.Y=u-n/2),this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(u,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Symbol,0,0),this.Canvas.restore()):(ze.IsNumber(o.YMove)&&(u+=o.YMove),this.Canvas.fillText(o.Symbol,l,u),o.Text&&this.IconRect.push({Index:s,Rect:d,Item:o})),o.Line){var f=this.Data.Data[o.Index],C="H"==o.Line.KData?f.High:f.Low,m=this.ChartFrame.GetYFromData(C),D=u;Array.isArray(o.Line.Offset)&&2==o.Line.Offset.length&&(D>m?(D-=o.Line.Offset[1],m+=o.Line.Offset[0]):D<m&&(D+=o.Line.Offset[1],m-=o.Line.Offset[0])),this.Canvas.save(),o.Line.Dash&&this.Canvas.setLineDash(o.Line.Dash),o.Line.Width>0&&(this.Canvas.lineWidth=o.Line.Width),this.Canvas.strokeStyle=o.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D,F(l)),this.Canvas.lineTo(m,F(l))):(this.Canvas.moveTo(F(l),D),this.Canvas.lineTo(F(l),m)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetTooltipData=function(t,e,a){if(!ze.IsNonEmptyArray(this.IconRect))return!1;for(var i=0;i<this.IconRect.length;++i){var r=this.IconRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return l.Chart.Log("[ChartMultiSVGIcon::GetTooltipData] icon ",r),a.Data=r,a.ChartPaint=this,a.Type=4,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Icon){var n=this.Icon[r];n.Index>=a&&n.Index<i&&((null==t.Max||t.Max<n.Value)&&(t.Max=n.Value),(null==t.Min||t.Min>n.Value)&&(t.Min=n.Value))}return t}}function De(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiHtmlDom",this.Texts=[],this.IsHScreen=!1,this.DrawCallback,this.DrawItem=[],this.EnableDraw=!0,this.HQChart,this.IsDestroy=!1,this.Draw=function(){this.EnableDraw&&(this.IsDestroy||(this.DrawItem=[],this.DrawCallback&&this.DrawCallback(1,{Self:this}),this.DrawDom(),this.DrawCallback&&this.DrawCallback(2,{Self:this,DrawItem:this.DrawItem})))},this.OnDestroy=function(){this.IsDestroy=!0,this.DrawCallback&&this.DrawCallback(4,{Self:this})},this.DrawDom=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=I();if(this.HQChart)var n=this.HQChart.UIElement.getBoundingClientRect().left,s=this.HQChart.UIElement.getBoundingClientRect().top;else n=null,s=null;for(var o in this.Texts){var h=this.Texts[o];if(h.Text&&ze.IsNumber(h.Index)){var l=this.IsMinuteFrame(),u=h.Index-e,c=this.Data.Data[h.Index],d={KData:c,Item:h,IsShow:!1,Self:this};if(u>=0&&u<t){var f=this.ChartFrame.GetXFromIndex(u);if("Top"==h.Value)var C=a;else if("Bottom"==h.Value)C=i;else C=this.ChartFrame.GetYFromData(h.Value);d.X=f/r,d.Y=C/r,d.UIElement={Left:n,Top:s},d.IsShow=!0}if(this.DrawItem.push(d),this.DrawCallback&&this.DrawCallback(3,d),h.Line){if(l)var m=this.Data.Data[h.Index];else c=this.Data.Data[h.Index],m="H"==h.Line.KData?c.High:c.Low;var D=this.ChartFrame.GetYFromData(m),p=C;Array.isArray(h.Line.Offset)&&2==h.Line.Offset.length&&(p>D?(p-=h.Line.Offset[1],D+=h.Line.Offset[0]):p<D&&(p+=h.Line.Offset[1],D-=h.Line.Offset[0])),this.Canvas.save(),h.Line.Dash&&this.Canvas.setLineDash(h.Line.Dash);var v=I(),g=1*v;h.Line.Width>0&&(g=h.Line.Width*v),this.Canvas.lineWidth=g,this.Canvas.strokeStyle=h.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p,F(f)),this.Canvas.lineTo(D,F(f))):(this.Canvas.moveTo(M(g,f),p),this.Canvas.lineTo(M(g,f),D)),this.Canvas.stroke(),this.Canvas.restore()}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];ze.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i&&((null==t.Max||t.Max<n.Value)&&(t.Max=n.Value),(null==t.Min||t.Min>n.Value)&&(t.Min=n.Value)))}return t}}function pe(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawSVG",this.Family,this.TextFont,this.Texts=[],this.IsHScreen=!1,this.IsDestroy=!1,this.EnableTooltip=!0,this.TooltipRect=[],this.Draw=function(){this.TooltipRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||this.IsHideScriptIndex()||this.DrawSVG())},this.DrawSVG=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)&&ze.IsNonEmptyArray(this.Texts)&&this.Family){this.IsHScreen=!0===this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=I(),n=0,s=0,o=0;o<this.Texts.length;++o){var h=this.Texts[o];if(h.SVG&&h.SVG.Symbol&&ze.IsNumber(h.Index)){this.IsMinuteFrame();var l=h.Index-e,u=this.Data.Data[h.Index];if(!(l<0||l>=t)){n=this.ChartFrame.GetXFromIndex(l),s="Top"==h.Value?a:"Bottom"==h.Value?i:this.ChartFrame.GetYFromData(h.Value),ze.IsNumber(h.YOffset)&&(s+=h.YOffset);var c=h.SVG;ze.IsNumber(c.YOffset)&&(s+=c.YOffset);var d="".concat(c.Size,"px ").concat(this.Family);this.Canvas.font=d;var f=c.Size/2,C="bottom",m={Left:n-f,Right:n+f,Top:s-c.Size,Bottom:s,Height:c.Size,Width:c.Size};if(0===c.VAlign?(C="top",m.Top=s,m.Bottom=m.Top+c.Size):1===c.VAlign&&(C="middle",m.Top=s-c.Size/2,m.Bottom=m.Top+c.Size),m.Top<0&&(m.Top=0,m.Bottom=c.Size,s=m.Bottom),this.Canvas.textBaseline=C,this.Canvas.textAlign="center",this.Canvas.fillStyle=c.Color,this.Canvas.fillText(c.Symbol,n,s),this.EnableTooltip&&this.TooltipRect.push({Rect:m,Index:o}),h.Text&&h.Text.Content&&this.TextFont){var D=h.Text;this.Canvas.font=this.TextFont,this.Canvas.fillStyle=D.Color;var p=s;ze.IsNumber(D.YOffset)&&(p+=D.YOffset),this.Canvas.fillText(D.Content,n,p)}if(h.Line){var v,g=h.Line;u=this.Data.Data[h.Index];switch(g.Value){case"C":v=u.Close;break;case"H":v=u.High;break;case"L":v=u.Low;break}if(!ze.IsNumber(v))continue;var S=this.ChartFrame.GetYFromData(v);if(S>=m.Top&&S<=m.Bottom)continue;S<m.Top?(p=m.Top,ze.IsNumber(g.SVGBlank)&&(p-=g.SVGBlank)):(p=m.Bottom,ze.IsNumber(g.SVGBlank)&&(p+=g.SVGBlank)),g.Dash&&this.Canvas.setLineDash(g.Dash);var T=1*r;g.Width>0&&(T=g.Width*r),this.Canvas.lineWidth=T,this.Canvas.strokeStyle=g.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p,F(n)),this.Canvas.lineTo(S,F(n))):(this.Canvas.moveTo(M(T,n),p),this.Canvas.lineTo(M(T,n),S)),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;if(!ze.IsNonEmptyArray(this.Texts))return t;for(var r=0;r<this.Texts.length;++r){var n=this.Texts[r];if(ze.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i)){if(!ze.IsNumber(n.Value))continue;(null==t.Max||t.Max<n.Value)&&(t.Max=n.Value),(null==t.Min||t.Min>n.Value)&&(t.Min=n.Value)}}return t},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i=0;i<this.TooltipRect.length;++i){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,n.Top,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var s=this.Texts[r.Index];return l.Chart.Log("[ChartDrawSVG::GetTooltipData] svg icon.",r),a.Data={Rect:r.Rect,Item:s,Index:r.Index},a.ChartPaint=this,a.Type=7,!0}}}return!1}}function ve(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOX",this.Font,this.Family=xi.ChartOX.Family,this.Color=[xi.ChartOX.Up.Color,xi.ChartOX.Down.Color],this.Text=[xi.ChartOX.Up.Text,xi.ChartOX.Down.Text],this.IsHScreen=!1,this.SquareSize=10,this.OXData=null,this.SquareLineColor=xi.ChartOX.SquareLineColor,this.TooltipData=[],this.CalcualteSquare=function(){if(this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.LeftEx,a=t.RightEx;else t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.BottomEx;this.SquareSize=(a-e)/(this.OXData.Max-this.OXData.Min)*this.OXData.BlockSize;var i=parseInt(this.SquareSize);this.Font="".concat(i,"px ").concat(this.Family)},this.DrawSquares=function(){if(this.Canvas.beginPath(),this.Canvas.strokeStyle=this.SquareLineColor,this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom;else{t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right;var i=t.TopEx,r=t.BottomEx}for(var n=this.OXData.StartPrice;n<this.OXData.Max;n+=this.OXData.BlockSize){var s=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(F(s),t.Top),this.Canvas.lineTo(F(s),t.Bottom)):(this.Canvas.moveTo(e,F(s)),this.Canvas.lineTo(a,F(s)))}for(n=this.OXData.StartPrice;n>this.OXData.Min;n-=this.OXData.BlockSize){s=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(F(s),t.Top),this.Canvas.lineTo(F(s),t.Bottom)):(this.Canvas.moveTo(e,F(s)),this.Canvas.lineTo(a,F(s)))}for(var o=e+xi.FrameLeftMargin,h=o;h<a;h+=this.SquareSize)this.IsHScreen?(this.Canvas.moveTo(t.LeftEx,F(h)),this.Canvas.lineTo(t.RightEx,F(h))):(this.Canvas.moveTo(F(h),i),this.Canvas.lineTo(F(h),r));this.Canvas.stroke()},this.Draw=function(){if(this.TooltipData=[],!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.OXData&&this.OXData.Data)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.CalcualteSquare(),this.DrawSquares(),this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=t+xi.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length;++i,a+=this.SquareSize){if(a>e)break;var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type];if(ze.IsNonEmptyArray(r.Data))for(var s=0;s<r.Data.length;++s){var o=r.Data[s],h=this.ChartFrame.GetYFromData(o+this.OXData.BlockSize/2);this.Canvas.fillText(n,h,a+this.SquareSize/2)}}}else{t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=t+xi.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(i=0;i<this.OXData.Data.length;++i,a+=this.SquareSize){if(a>e)break;r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];n=this.Text[r.Type];var l={X:a,Width:this.SquareSize},u=null,c=null;if(ze.IsNonEmptyArray(r.Data)){for(s=0;s<r.Data.length;++s){o=r.Data[s],h=this.ChartFrame.GetYFromData(o+this.OXData.BlockSize/2);this.Canvas.fillText(n,a+this.SquareSize/2,h),(null==u||u<o)&&(u=o),(null==c||c>o)&&(c=o)}l.Y=this.ChartFrame.GetYFromData(u+this.OXData.BlockSize),l.Height=this.ChartFrame.GetYFromData(c)-l.Y;var d={Data:r,Rect:l};this.TooltipData.push(d)}}}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipData){var r=this.TooltipData[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return l.Chart.Log("[ChartOX::GetTooltipData] item ",r),a.Data=r,a.ChartPaint=this,a.Type=5,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null};return this.OXData&&(ze.IsNumber(this.OXData.Max)&&(t.Max=this.OXData.Max),ze.IsNumber(this.OXData.Min)&&(t.Min=this.OXData.Min)),t}}function ge(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVolProfileVisibleRange",this.IsDrawFirst=!0,this.IsShowText=!0,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.VolFont,this.HQChart,this.IsDestroy=!1,this.Data=null,this.MaxVol,this.MaxVolPrice,this.VolLineColor=xi.ChartVolProfileVisibleRange.VolLineColor,this.VolLineFont=xi.ChartVolProfileVisibleRange.VolLineFont,this.VolLineTextColor=xi.ChartVolProfileVisibleRange.VolLineTextColor,this.VAHLineColor=xi.ChartVolProfileVisibleRange.VAHLineColor,this.VAHTextColor=xi.ChartVolProfileVisibleRange.VAHTextColor,this.VALLineColor=xi.ChartVolProfileVisibleRange.VALLineColor,this.VALTextColor=xi.ChartVolProfileVisibleRange.VALTextColor,this.VAFont=xi.ChartVolProfileVisibleRange.VAFont,this.TextConfig=(0,o.default)({Color:xi.ChartVolProfileVisibleRange.Text.Color,Family:xi.ChartVolProfileVisibleRange.Text.Family,FontMaxSize:xi.ChartVolProfileVisibleRange.Text.FontMaxSize,FontMinSize:xi.ChartVolProfileVisibleRange.Text.FontMinSize},"Color",xi.ChartVolProfileVisibleRange.Text.Color),this.BarColor=[xi.ChartVolProfileVisibleRange.UpVolColor,xi.ChartVolProfileVisibleRange.DownVolColor,xi.ChartVolProfileVisibleRange.AreaUpColor,xi.ChartVolProfileVisibleRange.AreaDonwColor],this.MaxVolLine,this.OnDestroy=function(){this.IsDestroy=!0},this.SetOption=function(t){t&&(ze.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),ze.IsNumber(t.VolType)&&(this.IsShowText=t.VolType),ze.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),ze.IsNumber(t.BarWidthRate)&&(this.IsShowText=t.BarWidthRate))},this.PtInChart=function(t,e){return this.MaxVolLine&&t>=this.MaxVolLine.Start.X&&t<=this.MaxVolLine.End.X&&e>=this.MaxVolLine.Start.Y-5&&e<this.MaxVolLine.Start.Y+5?{Identify:this.Identify,Chart:this}:null},this.SetSelectedStatus=function(t){this.IsDrawFirst=0==t},this.DrawSelectedStatus=function(){var t=this.SelectedRadius,e=I();if(this.Canvas.save(),this.MaxVolLine){this.Canvas.lineWidth=this.SelectedLineWidth*e,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);for(var a=(this.MaxVolLine.End.X-this.MaxVolLine.Start.X)/6,i=[],r=this.MaxVolLine.Start.X+a;r<this.MaxVolLine.End.X;r+=a)i.push({X:r,Y:this.MaxVolLine.Start.Y});for(var n=0;n<i.length;++n){var s=i[n];this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,t,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()},this.Draw=function(){this.VolFont=null,this.MaxVolLine=null,this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.ChartFrame.IsMinSize||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&(this.Canvas.save(),this.DrawVolBar(),this.Canvas.restore()))},this.DrawPriceLine=function(){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=I(),i=[],r=this.MaxVolPrice;ze.IsNumber(this.Data.MaxVolPrice)&&(r=this.Data.MaxVolPrice),r>=this.ChartFrame.HorizontalMin&&r<=this.ChartFrame.HorizontalMax&&i.push({Price:r,Font:this.VolLineFont,LineColor:this.VolLineColor,LineWidth:2,TextColor:this.VolLineTextColor,Type:1}),ze.IsNumber(this.Data.VAHPrice)&&this.Data.VAHPrice>=this.ChartFrame.HorizontalMin&&this.Data.VAHPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VAHPrice,Font:this.VAFont,LineColor:this.VAHLineColor,LineWidth:2,TextColor:this.VAHTextColor,Type:2}),ze.IsNumber(this.Data.VALPrice)&&this.Data.VALPrice>=this.ChartFrame.HorizontalMin&&this.Data.VALPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VALPrice,Font:this.VAFont,LineColor:this.VALLineColor,LineWidth:2,TextColor:this.VALTextColor,Type:3});for(var n=0;n<i.length;++n){var s=i[n],o=M(s.LineWidth,this.ChartFrame.GetYFromData(s.Price,!1));if(this.Canvas.lineWidth=s.LineWidth,this.Canvas.strokeStyle=s.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),this.Canvas.stroke(),1==s.Type&&(this.MaxVolLine={Start:{X:t,Y:o},End:{X:e,Y:o}}),this.ChartBorder.Right>10){var h=Hr(this.HQChart.Symbol),l=s.Price.toFixed(h);this.Canvas.font=s.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var u=this.GetFontHeight(),c=this.Canvas.measureText(l).width+2*a;this.Canvas.fillStyle=s.LineColor,this.Canvas.fillRect(e,o-u/2,c,u),this.Canvas.fillStyle=s.TextColor,this.Canvas.fillText(l,e+1*a,o)}}},this.DrawVolBar=function(){var t=this.GetPriceYOffset(this.Data.PriceOffset),e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=(this.ChartFrame.GetYFromData(this.Data.MaxPrice),this.ChartFrame.GetYFromData(this.Data.MinPrice),a-e),r=i*this.BarWidthRate;this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(t,r),this.VolFont&&(this.Canvas.font=this.VolFont));for(var n=0;n<this.Data.Data.length;++n){var s=this.Data.Data[n];s.Price<this.ChartFrame.HorizontalMin||s.Price>this.ChartFrame.HorizontalMax||this.DrawVolBarItem(s,e,a,r,t)}this.DrawPriceLine()},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,s=a,o=this.ChartFrame.GetYFromData(t.Price)-r/2,h=r-1;if(h<1&&(h=1),1==this.VolType){if(!t.TotalVol)return;if(!ze.IsNumber(t.TotalVol.Value))return;var l=t.TotalVol.Value*i/this.MaxVol;if(ze.IsNumber(t.TotalVol.ColorID)?d=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(d=t.TotalVol.Color),this.Canvas.fillStyle=d,1==this.BarPosition?this.Canvas.fillRect(s,L(o),-l,L(h)):this.Canvas.fillRect(n,L(o),l,L(h)),this.IsShowText&&this.VolFont){var u=ze.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,o+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,o+r/2))}}else{u="";for(var c=0;c<t.Vol.length;++c){var d,f=t.Vol[c];if(ze.IsNumber(f.Value))if(ze.IsNumber(f.ColorID)?d=this.BarColor[f.ColorID]:f.Color&&(d=f.Color),d){l=f.Value*i/this.MaxVol;this.Canvas.fillStyle=d,1==this.BarPosition?(this.Canvas.fillRect(s,L(o),-l,L(h)),s-=l):(this.Canvas.fillRect(n,L(o),l,L(h)),n+=l);var C=ze.FormatVolString(f.Value,this.HQChart.LanguageID);u.length>0&&(u+="x"),u+=C}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,o+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,o+r/2)))}},this.GetPriceYOffset=function(t){var e=this.ChartFrame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;if(t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize)return null;var r=this.FormatFontString(i,this.TextConfig.Family,a);return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i="".concat(a.Weight," ").concat(t,"px ").concat(e)):i="".concat(t,"px ").concat(e),i},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Se(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStackedBar",this.Data,this.BarName=[],this.BarColor=["rgb(255,165,0)","rgb(95,158,160)"],this.LineWidth=1,this.BarType=0,this.IsHScreen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount;if(this.IsHScreen)var i=this.ChartBorder.GetHScreenBorder(),r=i.TopEx+e/2+xi.FrameLeftMargin,n=i.BottomEx,s=i.RightEx,o=i.LeftEx;else{i=this.ChartFrame.GetBorder(),r=i.LeftEx+e/2+xi.FrameLeftMargin,n=i.RightEx,s=i.TopEx,o=i.BottomEx;var h=this.GetLockRect();h&&(n=h.Left)}var l=this.IsMinuteFrame();if(this.Canvas.save(),1==this.BarType);else{this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I());var u=this.Canvas.lineWidth}for(var c=this.ChartFrame.GetYFromData(0),d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<a;++d,++f,r+=t+e){var C=this.Data.Data[d];if(ze.IsNonEmptyArray(C)){if(l)var m=this.ChartFrame.GetXFromIndex(f);else{var D=r,p=r+t;if(p>n)break;m=D+(p-D)/2}if(m>n)break;1==this.BarType&&t>=4?this.DrawKBarItem(C,m,D,p,s,o,c,t):this.DrawBarItem(C,m,s,o,c,u)}}this.Canvas.restore()}},this.DrawKBarItem=function(t,e,a,i,r,n,s,o){for(var h=0,l=s,u=0,c=s,d=0;d<t.length;++d){var f=t[d];if(ze.IsNumber(f)&&0!=f){if(this.Canvas.fillStyle=this.BarColor[d],f>0){h+=f;var C=this.ChartFrame.GetYFromData(h),m={Left:a,Top:C,Width:o,Height:l-C};l=C}else{u+=f;C=this.ChartFrame.GetYFromData(u),m={Left:a,Top:C,Width:o,Height:c-C};c=C}this.IsHScreen?this.Canvas.fillRect(m.Top,m.Left,m.Height,m.Width):this.Canvas.fillRect(m.Left,m.Top,m.Width,m.Height)}}},this.DrawBarItem=function(t,e,a,i,r,n){e=M(n,e);for(var s=0,o=r,h=0,l=r,u=0;u<t.length;++u){var c=t[u];if(ze.IsNumber(c)&&0!=c){var d={};if(c>0){s+=c;var f=this.ChartFrame.GetYFromData(s);d={X:e,Y:o,X2:e,Y2:f};o=f}else{h+=c;f=this.ChartFrame.GetYFromData(h),d={X:e,Y:l,X2:e,Y2:f};l=f}this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(d.Y,d.X),this.Canvas.lineTo(d.Y2,d.X2)):(this.Canvas.moveTo(d.X,d.Y),this.Canvas.lineTo(d.X2,d.Y2)),this.Canvas.strokeStyle=this.BarColor[u],this.Canvas.stroke()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&ze.IsNonEmptyArray(r)){for(var n=0,s=0,o=0;o<r.length;++o){var h=r[o];ze.IsNumber(h)&&(0!=h&&(h>0?n+=h:h<0&&(s+=h)))}null==e.Max&&(e.Max=n,e.Min=s),e.Max<n&&(e.Max=n),e.Min>s&&(e.Min=s)}}return e},this.PtInChart=function(t,e){var a={StackedBar:!0};return 0==this.BarType&&(a.BarWidth=4),this.PtInBar(t,e,a)},this.DrawSelectedStatus=function(){this.DrawLinePoint({StackedBar:!0})}}function Ie(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLock",this.WidthDiv=.2,this.LockCount=20,this.BGColor=xi.LockBGColor,this.TextColor=xi.LockTextColor,this.Font=xi.DefaultTextFont,this.Title="??开通权限",this.LockRect=null,this.LockID,this.Callback,this.IndexName,this.MinWidth=null,this.Draw=function(t){if(this.LockRect=null,this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){var e=this.ChartBorder.GetRight(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetLeft()+r/2+2;for(var n=this.ChartBorder.GetRight(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+r){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=e+i;if(u>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetLeft())*this.WidthDiv);var c=e-a;c<this.ChartBorder.GetLeft()&&(c=this.ChartBorder.GetLeft());var d=this.ChartBorder.GetBottom()-this.ChartBorder.GetTop(),f=this.ChartBorder.GetRight()-c;if(this.MinWidth>10&&f<this.MinWidth&&(f=this.MinWidth,c=this.ChartBorder.GetRight()-f,c<this.ChartBorder.GetLeft()&&(c=this.ChartBorder.GetLeft())),t){this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(c,this.ChartBorder.GetTop(),f,d);var C=c+f/2,m=this.ChartBorder.GetTop()+d/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,C,m)}this.LockRect={Left:c,Top:this.ChartBorder.GetTop(),Width:f,Heigh:d}}else this.HScreenDraw(t)},this.HScreenDraw=function(t){var e=this.ChartBorder.GetBottom(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetTop()+r/2+2;for(var n=this.ChartBorder.GetBottom(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+r){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=e+i;if(u>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetTop())*this.WidthDiv);var c=e-a;c<this.ChartBorder.GetTop()&&(c=this.ChartBorder.GetTop());var d=this.ChartBorder.GetRight()-this.ChartBorder.GetLeft(),f=this.ChartBorder.GetBottom()-c;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(this.ChartBorder.GetLeft(),c,d,f);var C=this.ChartBorder.GetLeft()+d/2,m=c+f/2;this.Canvas.save(),this.Canvas.translate(C,m),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore(),this.LockRect={Left:this.ChartBorder.GetLeft(),Top:c,Width:d,Heigh:f}},this.GetTooltipData=function(t,e,a){return null!=this.LockRect&&(this.Canvas.beginPath(),this.Canvas.rect(this.LockRect.Left,this.LockRect.Top,this.LockRect.Width,this.LockRect.Heigh),!!this.Canvas.isPointInPath(t,e)&&(a.Data={ID:this.LockID,Callback:this.Callback,IndexName:this.IndexName},a.ChartPaint=this,!0))}}function Te(){this.newMethod=Wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBuySell",this.TextFont=xi.KLineTrain.Font,this.LastDataIcon=xi.KLineTrain.LastDataIcon,this.BuyIcon=xi.KLineTrain.BuyIcon,this.SellIcon=xi.KLineTrain.SellIcon,this.BuySellData=new Map,this.IconFont=xi.KLineTrain.IconFont,this.LastDataDrawType=0,this.LastDataIndex=-1,this.AddTradeItem=function(t){if(this.BuySellData.has(t.Key)){var e=this.BuySellData.get(t.Key);e.Data.push(t)}else this.BuySellData.set(t.Key,{Data:[t]})},this.ClearTradeData=function(){this.BuySellData=new Map},this.Draw=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();!0===t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount;if(this.IconFont){var n=I(),s=e+a,o=18*n;s<o&&(s=o),this.Canvas.font=s+"px "+this.IconFont.Family}else this.Canvas.font=this.TextFont;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<r;++h,++l){var u=this.Data.Data[h];if(null!=u){var c=this.ChartFrame.GetXFromIndex(l);if(c>i)break;var d=!1;if(1==this.LastDataDrawType?h==this.LastDataIndex&&(d=!0):h==this.Data.Data.length-1&&(d=!0),d){c=this.ChartFrame.GetXFromIndex(l);var f=this.ChartFrame.GetYFromData(u.High);this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Last.Color,this.DrawText(this.IconFont.Last.Text,c,f,t)):(this.Canvas.fillStyle=this.LastDataIcon.Color,this.Canvas.font=this.TextFont,this.DrawText(this.LastDataIcon.Text,c,f,t))}var C=h;if(this.BuySellData.has(C)){var m=this.BuySellData.get(C),D=(f=this.ChartFrame.GetYFromData(u.High),this.ChartFrame.GetYFromData(u.Low)),p=[!1,!1];for(var v in m.Data){if(1==p[0]&&1==p[1])break;var g=m.Data[v];0==g.Op&&0==p[0]?(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Buy.Color,this.DrawText(this.IconFont.Buy.Text,c,D,t)):(this.Canvas.fillStyle=this.BuyIcon.Color,this.DrawText(this.BuyIcon.Text,c,D,t)),p[0]=!0):1==g.Op&&0==p[1]&&(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Sell.Color,this.DrawText(this.IconFont.Sell.Text,c,f,t)):(this.Canvas.fillStyle=this.SellIcon.Color,this.DrawText(this.SellIcon.Text,c,f,t)),p[1]=!0)}}}}}}}function xe(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOrderbookDepth",this.Data=null,this.AskColor={Line:xi.DepthChart.AskColor.Line,Area:xi.DepthChart.AskColor.Area},this.BidColor={Line:xi.DepthChart.BidColor.Line,Area:xi.DepthChart.BidColor.Area},this.LineWidth=xi.DepthChart.LineWidth,this.Draw=function(){if(this.Data){var t=this.Canvas.lineWidth;this.Canvas.lineWidth=this.LineWidth*I(),this.DrawArea(this.Data.Bids,this.BidColor.Line,this.BidColor.Area,!0),this.DrawArea(this.Data.Asks,this.AskColor.Line,this.AskColor.Area,!1),this.Canvas.lineWidth=t}},this.DrawArea=function(t,e,a,i){var r=this.ChartFrame.VerticalRange,n=[];for(var s in t){var o=t[s];if(i){if(o.Price<r.Min)break}else if(o.Price>r.Max)break;var h=this.ChartFrame.GetXFromIndex(o.Price),l=this.ChartFrame.GetYFromData(o.Vol);n.push({X:h,Y:l})}if(!(n.length<=1)){var u=this.ChartBorder.GetLeft(),c=this.ChartBorder.GetBottom(),d=this.ChartBorder.GetRight();for(var s in this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c),n){o=n[s];this.Canvas.lineTo(o.X,o.Y)}for(var s in this.Canvas.lineTo(i?u:d,n[n.length-1].Y),this.Canvas.lineTo(i?u:d,c),this.Canvas.lineTo(n[0].X,c),this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c),n){o=n[s];this.Canvas.lineTo(o.X,o.Y)}this.Canvas.lineTo(i?u:d,n[n.length-1].Y),this.Canvas.strokeStyle=e,this.Canvas.stroke()}},this.GetMaxMin=function(){var t={Min:null,Max:null,XMin:null,XMax:null},e=this.ChartFrame.VerticalRange;for(var a in this.Data.Asks){var i=this.Data.Asks[a];if(i.Price>e.Max)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}for(var a in this.Data.Bids){i=this.Data.Bids[a];if(i.Price<e.Min)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}return t}}function ye(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.Radius=100,this.Distance=30,this.txtLine=20,this.paddingX=20/3,this.Draw=function(){if(!this.Data||!this.Data.Data||!(this.Data.Data.length>0))return this.DrawEmptyData();this.ChartBorder.GetLeft(),this.ChartBorder.GetRight(),this.ChartBorder.GetTop(),this.ChartBorder.GetBottom();var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetHeight();if(isNaN(this.Radius)){var a=this.Radius.replace("%","");a/=100,t>=e&&(this.Radius=a*e),t<e&&(this.Radius=a*t)}this.Canvas.save(),this.Canvas.translate(t/2,e/2);var i=0;for(var r in this.Data.Data)i+=this.Data.Data[r].Value;var n=0,s=0;for(var o in this.Data.Data){var h=this.Data.Data[o],l=(h.Value/i).toFixed(2);this.Canvas.beginPath(),this.Canvas.moveTo(0,0),s+=2*l*Math.PI,this.Canvas.strokeStyle="white",this.Canvas.fillStyle=h.Color,this.Canvas.arc(0,0,this.Radius,n,s),this.Canvas.fill(),this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.strokeStyle=h.Color,this.Canvas.moveTo(0,0);var u=(this.Radius+this.Distance)*Math.cos(s-(s-n)/2),c=(this.Radius+this.Distance)*Math.sin(s-(s-n)/2);this.Canvas.lineTo(u,c);var d=this.txtLine,f=this.paddingX;if(this.Canvas.textAlign="left",s-(s-n)/2<1.5*Math.PI&&s-(s-n)/2>.5*Math.PI&&(d=-this.txtLine,f=-this.paddingX,this.Canvas.textAlign="right"),this.Canvas.lineTo(u+d,c),this.Canvas.stroke(),h.Text)this.Canvas.fillText(h.Text,u+d+f,c);else{var C="".concat(h.Name,":").concat(h.Value);this.Canvas.fillText(C,u+d+f,c)}n+=2*l*Math.PI}this.Canvas.restore()},this.DrawEmptyData=function(){l.Chart.Log("[ChartPie::DrawEmptyData]")}}function Ae(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.StartAngle=0,this.Color="rgb(198,198,198)",this.AreaColor="rgba(242,154,118,0.4)",this.AreaLineColor="rgb(242,154,118)",this.TitleFont=24*I()+"px 微软雅黑",this.TitleColor="rgb(102,102,102)",this.BGColor=["rgb(255,255,255)","rgb(224,224,224)"],this.DrawBorder=function(){if(!(this.BorderPoint.length<=0)){this.Canvas.font=this.TitleFont,this.Canvas.strokeStyle=this.Color;var t=[1,.8,.6,.4,.2];for(var e in t){var a=t[e],i=!0;for(var r in this.BorderPoint){var n=this.BorderPoint[r];n.X=this.CenterPoint.X+n.Radius*Math.cos(n.Angle*Math.PI/180)*a,n.Y=this.CenterPoint.Y+n.Radius*Math.sin(n.Angle*Math.PI/180)*a,i?(this.Canvas.beginPath(),this.Canvas.moveTo(n.X,n.Y),i=!1):this.Canvas.lineTo(n.X,n.Y)}this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.fillStyle=this.BGColor[e%2==0?0:1],this.Canvas.fill()}for(var s in this.Canvas.beginPath(),this.BorderPoint){n=this.BorderPoint[s];n.X=this.CenterPoint.X+n.Radius*Math.cos(n.Angle*Math.PI/180),n.Y=this.CenterPoint.Y+n.Radius*Math.sin(n.Angle*Math.PI/180),this.Canvas.moveTo(this.CenterPoint.X,this.CenterPoint.Y),this.Canvas.lineTo(n.X,n.Y),this.DrawText(n)}this.Canvas.stroke()}},this.DrawArea=function(){if(this.DataPoint&&!(this.DataPoint.length<=0)){this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.AreaLineColor,this.Canvas.beginPath();var t=!0;for(var e in this.DataPoint){var a=this.DataPoint[e];t?(this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),t=!1):this.Canvas.lineTo(a.X,a.Y)}this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()}},this.DrawText=function(t){if(t.Text){this.Canvas.fillStyle=this.TitleColor;var e=t.X,a=t.Y;t.Angle>0&&t.Angle<45?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2):t.Angle>=0&&t.Angle<90?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",e+=2):t.Angle>=90&&t.Angle<135||t.Angle>=135&&t.Angle<180?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=180&&t.Angle<225?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e-=2):t.Angle>=225&&t.Angle<=270?(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom"):t.Angle>270&&t.Angle<315?(this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",e+=2):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2),this.Canvas.fillText(t.Text,e,a)}},this.Draw=function(){this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.Data&&this.Data.Data&&this.Data.Data.length>0?this.CalculatePoints(this.Data.Data):this.CalculatePoints(null),this.DrawBorder(),this.DrawArea()},this.CalculatePoints=function(t){for(var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()),i=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()),r=this.ChartBorder.GetHeight(),n={X:e+i/2,Y:a+r/2},s=Math.min(i/2,r/2)-2,o=Math.max(5,t?t.length:0),h=360/o,l=0;l<o;++l){var u={Index:l,Radius:s,Angle:l*h+this.StartAngle},c=u.Angle;if(t&&l<t.length){var d=t[l],f={Index:l,Text:d.Text};if(u.Text=d.Name,d.Value){var C=d.Value;C>=1&&(C=1);var m=s*C;f.X=n.X+m*Math.cos(c*Math.PI/180),f.Y=n.Y+m*Math.sin(c*Math.PI/180)}else f.X=n.X,f.Y=n.Y;this.DataPoint.push(f)}this.BorderPoint.push(u)}this.CenterPoint=n},this.DrawEmptyData=function(){l.Chart.Log("[ChartPie::DrawEmptyData]")}}function be(){this.newMethod=vt,this.newMethod(),delete this.newMethod,this.ImageData=null,this.Left,this.Top,this.Width,this.Height,this.ImageWidth,this.ImageHeight,this.DefaultColor=[217,222,239],this.Color=[{Name:"海南",Color:"rgb(217,222,223)"},{Name:"内蒙古",Color:"rgb(217,222,225)"},{Name:"新疆",Color:"rgb(217,222,226)"},{Name:"青海",Color:"rgb(217,222,227)"},{Name:"西藏",Color:"rgb(217,222,228)"},{Name:"云南",Color:"rgb(217,222,229)"},{Name:"黑龙江",Color:"rgb(217,222,230)"},{Name:"吉林",Color:"rgb(217,222,231)"},{Name:"辽宁",Color:"rgb(217,222,232)"},{Name:"河北",Color:"rgb(217,222,233)"},{Name:"山东",Color:"rgb(217,222,234)"},{Name:"江苏",Color:"rgb(217,222,235)"},{Name:"浙江",Color:"rgb(217,222,236)"},{Name:"福建",Color:"rgb(217,222,237)"},{Name:"广东",Color:"rgb(217,222,238)"},{Name:"广西",Color:"rgb(217,222,239)"},{Name:"贵州",Color:"rgb(217,222,240)"},{Name:"湖南",Color:"rgb(217,222,241)"},{Name:"江西",Color:"rgb(217,222,242)"},{Name:"安徽",Color:"rgb(217,222,243)"},{Name:"湖北",Color:"rgb(217,222,244)"},{Name:"重庆",Color:"rgb(217,222,245)"},{Name:"四川",Color:"rgb(217,222,246)"},{Name:"甘肃",Color:"rgb(217,222,247)"},{Name:"陕西",Color:"rgb(217,222,248)"},{Name:"山西",Color:"rgb(217,222,249)"},{Name:"河南",Color:"rgb(217,222,250)"}],this.Draw=function(){var t=this.ChartBorder.GetLeft()+1,e=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()+1),a=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()-2),i=this.ChartBorder.GetHeight()-2,r=CHINA_MAP_IMAGE.width,n=CHINA_MAP_IMAGE.height,s=r,o=n;if(i<o||a<s)this.ImageData=null;else if(this.Left==t&&this.Top==e&&this.Width==a&&this.Height==i&&this.ImageWidth==r&&this.ImageHeight==n||(this.ImageData=null,this.ImageWidth=r,this.ImageHeight=n,this.Left=t,this.Top=e,this.Width=a,this.Height=i,l.Chart.Log(r,n)),null==this.ImageData){this.Canvas.drawImage(CHINA_MAP_IMAGE,0,0,r,n,t,e,s,o),this.ImageData=this.Canvas.getImageData(t,e,s,o);var h,u=new Set,c=new Map,d=new Map;if(this.Data.length>0)for(var f in this.Data){var C=this.Data[f];d.set(C.Name,C.Color)}for(var m in l.Chart.Log(this.Data),this.Color){var D=this.Color[m];d.has(D.Name)?c.set(D.Color,d.get(D.Name)):u.add(D.Color)}for(var p=0;p<this.ImageData.data.length;p+=4)if(h="rgb("+this.ImageData.data[p]+","+this.ImageData.data[p+1]+","+this.ImageData.data[p+2]+")",u.has(h))this.ImageData.data[p]=this.DefaultColor[0],this.ImageData.data[p+1]=this.DefaultColor[1],this.ImageData.data[p+2]=this.DefaultColor[2];else if(c.has(h)){var v=c.get(h);this.ImageData.data[p]=v[0],this.ImageData.data[p+1]=v[1],this.ImageData.data[p+2]=v[2]}this.Canvas.clearRect(t,e,s,o),this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}else this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}}var we=new function(){this.DataMap=new Map([["FrameSplitPaint",{Create:function(){return new Re}}],["RectSelectPaint",{Create:function(){return new Be}}],["DragMovePaint",{Create:function(){return new Ye}}]]),this.SetCallbackDraw=new Set,this.Create=function(t){if(!this.DataMap.has(t))return null;var e=this.DataMap.get(t);return e.Create()},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})},this.AddCallbackDrawClassName=function(t){t&&this.SetCallbackDraw.add(t)},this.IsCallbackDraw=function(t){return this.SetCallbackDraw.has(t)}};function Fe(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.Data,this.IsDynamic=!1,this.IsAnimation=!1,this.ClassName="IExtendChartPainting",this.SizeChange=!0,this.IsEraseBG=!1,this.DrawAfterTitle=!1,this.DrawAfterPicture=!1,this.IsCallbackDraw=!1,this.Left=5,this.Right=5,this.Top=5,this.Bottom=5,this.Draw=function(){},this.SetOption=function(t){},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")}}function Me(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="KLineTooltipPaint",this.BorderColor=xi.TooltipPaint.BorderColor,this.BGColor=xi.TooltipPaint.BGColor,this.TitleColor=xi.TooltipPaint.TitleColor,this.DateTimeColor=xi.TooltipPaint.DateTimeColor,this.VolColor=xi.TooltipPaint.VolColor,this.AmountColor=xi.TooltipPaint.AmountColor,this.LatestPoint,this.ShowPosition=0,this.Left=1*I(),this.Top=5*I(),this.Width=50,this.Height=100,this.LineHeight=15*I(),this.LineSpace=2,this.Mergin={Left:2,Top:3,Bottom:5,Right:5},this.ExtendLineWidth=2,this.Font=[xi.TooltipPaint.TitleFont],this.HQChart,this.KLineTitlePaint,this.IsHScreen=!1,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.ReloadResource=function(t){this.BorderColor=xi.TooltipPaint.BorderColor,this.BGColor=xi.TooltipPaint.BGColor,this.TitleColor=xi.TooltipPaint.TitleColor,this.DateTimeColor=xi.TooltipPaint.DateTimeColor,this.VolColor=xi.TooltipPaint.VolColor,this.AmountColor=xi.TooltipPaint.AmountColor},this.GetLeft=function(){return this.IsHScreen?this.ChartBorder.GetRightEx()-this.Height-this.Top:0==this.ShowPosition?this.ChartBorder.GetLeft()+this.Left:this.ChartBorder.GetRight()-this.Width-this.Left},this.GetTop=function(){return this.IsHScreen?0==this.ShowPosition?this.ChartBorder.GetTop()+this.Left:this.ChartBorder.GetBottom()-this.Width-this.Left:this.ChartBorder.GetTopEx()+this.Top},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;if(this.HQChart.DragMode==D.CLICK_TOUCH_MODE_ID){if(0==this.HQChart.TouchStatus.CorssCursorShow)return!1}else if(this.HQChart.EnableClickModel){if(!1===this.HQChart.ClickModel.IsShowCorssCursor)return!1}else if(this.HQChart.VerticalDrag){if(this.HQChart.VerticalDrag.IsDrag)return!1}else if(!this.HQChart.IsOnTouch)return!1;return!this.HQChart.CurrentChartDrawPicture},this.Draw=function(){if(this.IsEnableDraw()){this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.KLineTitlePaint=this.HQChart.TitlePaint[0];var t=this.KLineTitlePaint.GetCurrentKLineData();if(t){var e=this.GetFormatTitle({Data:t});e&&ze.IsNonEmptyArray(e.AryText)&&(this.CalculateTooltipSize(e),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(e),this.DrawBorder())}}},this.CalculateTooltipSize=function(t){this.Canvas.font=this.Font[0],this.LineHeight=this.Canvas.measureText("擎").width;for(var e=I(),a=0,i=0,r=0,n=0,s=0;s<t.AryText.length;++s){var o=t.AryText[s];a>0&&(a+=this.LineSpace);var h=0;if(o.Title){var l=this.Canvas.measureText(o.Title).width+2;i<l&&(i=l),h+=l}if(o.Text){l=this.Canvas.measureText(o.Text).width+2;r<l&&(r=l),h+=l}n<h&&(n=h),a+=this.LineHeight}return this.Height=a+(this.Mergin.Top+this.Mergin.Bottom)*e,this.Width=n+(this.Mergin.Left+this.Mergin.Right+this.ExtendLineWidth)*e,{Height:this.Height,Width:this.Width,MaxTitleWidth:i,MaxTextWidth:r}},this.CalculateShowPosition=function(){if(this.ShowPosition=0,this.LatestPoint)if(this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=t+e/2;this.LatestPoint.Y<a&&(this.ShowPosition=1)}else{var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetWidth(),n=i+r/2;this.LatestPoint.X<n&&(this.ShowPosition=1)}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a=t.Data;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var i,r,n=Hr(this.HQChart.Symbol),s=[],o={AryText:s};c=ze.FormatDateString(a.Date),s.push({Text:c,Color:this.DateTimeColor});var h=this.HQChart.Period;if(ut.IsMinutePeriod(h,!0)&&ze.IsNumber(a.Time)?(c=ze.FormatTimeString(a.Time),s.push({Text:c,Color:this.DateTimeColor})):ut.IsSecondPeriod(h)&&ze.IsNumber(a.Time)&&(c=ze.FormatTimeString(a.Time,"HH:MM:SS"),s.push({Text:c,Color:this.DateTimeColor})),ze.IsNumber(a.Open)&&(i=Ai.GetText("Tooltip-Open",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Open,a.YClose),c=a.Open.toFixed(n),s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),ze.IsNumber(a.High)&&(i=Ai.GetText("Tooltip-High",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.High,a.YClose),c=a.High.toFixed(n),s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),ze.IsNumber(a.Low)&&(i=Ai.GetText("Tooltip-Low",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Low,a.YClose),c=a.Low.toFixed(n),s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),ze.IsNumber(a.Close)&&(i=Ai.GetText("Tooltip-Close",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Close,a.YClose),c=a.Close.toFixed(n),s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),i=Ai.GetText("Tooltip-Increase",this.LanguageID),0!=a.YFClose&&Mr.IsChinaFutures(e)){var l=(a.Close-a.YFClose)/a.YFClose*100;r=this.KLineTitlePaint.GetColor(l,0),c=l.toFixed(2)+"%"}else if(0!=a.YClose){l=(a.Close-a.YClose)/a.YClose*100;r=this.KLineTitlePaint.GetColor(l,0),c=l.toFixed(2)+"%"}else c="--.--",r=this.KLineTitlePaint.GetColor(0,0);if(s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r}),ze.IsNumber(a.Vol)){i=Ai.GetText("Tooltip-Vol",this.LanguageID);var u=a.Vol;e&&Mr.IsSHSZ(e)&&(u/=100),c=ze.FromatIntegerString(u,2,this.LanguageID),s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.VolColor})}if(ze.IsNumber(a.Amount)){i=Ai.GetText("Tooltip-Amount",this.LanguageID);var c=ze.FormatValueString(a.Amount,2,this.LanguageID);s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.AmountColor})}if(Mr.IsSHSZStockA(this.HQChart.Symbol)&&a.FlowCapital>0){i=Ai.GetText("Tooltip-Exchange",this.LanguageID);l=a.Vol/a.FlowCapital*100,c=l.toFixed(2)+"%";s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.TitleColor})}if(Mr.IsFutures(e)&&ze.IsNumber(a.Position)){i=Ai.GetText("Tooltip-Position",this.LanguageID);c=ze.FromatIntegerString(a.Position,2,this.LanguageID);s.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.TitleColor})}return o}},this.DrawTooltipData=function(t){if(t&&ze.IsNonEmptyArray(t.AryText)){var e=I(),a=this.GetLeft()+2*e,i=this.GetTop()+3*e;if(this.IsHScreen){this.Canvas.save();var r=this.GetLeft()+this.Height,n=this.GetTop();this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),a=2*e,i=3*e}this.Canvas.textBaseline="top";var s=a+this.Width-this.Mergin.Right*e;a+=this.Mergin.Left*e,i+=this.Mergin.Top*e;for(var o=0;o<t.AryText.length;++o){var h=t.AryText[o];h.Title&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=h.TitleColor,this.Canvas.fillText(h.Title,a,i)),h.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=h.Color,this.Canvas.fillText(h.Text,s,i)),i+=this.LineHeight+this.LineSpace}this.IsHScreen&&this.Canvas.restore()}},this.DrawBorder=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.strokeStyle=this.BorderColor,t?this.Canvas.strokeRect(F(e),F(a),this.Height,this.Width):this.Canvas.strokeRect(F(e),F(a),L(this.Width),L(this.Height))},this.DrawBG=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.fillStyle=this.BGColor,t?this.Canvas.fillRect(e,a,this.Height,this.Width):this.Canvas.fillRect(e,a,this.Width,this.Height)},this.SetOption=function(t){t.LineHeight>0&&(this.LineHeight=t.LineHeight*I()),t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID)}}function Le(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.ClassName="MinuteTooltipPaint",this.Left=1*I(),this.Top=1*I(),this.YClose,this.IsShowAveragePrice=!0,this.TitlePaint,this.GetTop=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return 0==this.ShowPosition?t.TopEx+this.Left:t.BottomEx-this.Width-this.Left}t=this.ChartBorder.GetBorder();return t.Top+this.Top},this.GetLeft=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.Right-this.Height-this.Top}t=this.ChartBorder.GetBorder();return 0==this.ShowPosition?t.LeftEx+this.Left:t.RightEx-this.Width-this.Left},this.Draw=function(){if(this.IsEnableDraw()&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}var r=this.GetFormatTitle(t);r&&ze.IsNonEmptyArray(r.AryText)&&(this.CalculateTooltipSize(r),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(r),this.DrawBorder())}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a,i,r,n;if(0==t.Type)e=t.Data,a=e.Close,i=e.Vol,r=e.Amount;else if(1==t.Type){if(e=t.Data.Data,!e)return;a=e.Price}this.YClose=this.TitlePaint.YClose,this.HQChart.Symbol&&(n=this.HQChart.Symbol.toUpperCase());var s,o=Hr(this.HQChart.Symbol),h=[],l={AryText:h};ze.IsNumber(e.Date)&&(f=ze.FormatDateString(e.Date),h.push({Text:f,Color:this.DateTimeColor})),ze.IsNumber(e.Time)&&(f=ze.FormatTimeString(e.Time),h.push({Text:f,Color:this.DateTimeColor})),ze.IsNumber(a)&&(s=Ai.GetText("Tooltip-Price",this.LanguageID),c=this.TitlePaint.GetColor(a,this.YClose),f=a.toFixed(o),h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:c}));var u=!0;if((Mr.IsForeignExchange(n)||Mr.IsET(n)&&!Mr.IsETShowAvPrice(n)||Mr.IsShowAvPrice&&!Mr.IsShowAvPrice(n))&&(u=!1),u&&ze.IsNumber(e.AvPrice)&&this.IsShowAveragePrice){s=Ai.GetText("Tooltip-AvPrice",this.LanguageID);var c=this.TitlePaint.GetColor(e.AvPrice,this.YClose);f=e.AvPrice.toFixed(o),h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:c})}if(ze.IsNumber(a)&&ze.IsNumber(this.YClose)){s=Ai.GetText("Tooltip-Increase",this.LanguageID);var d=(a-this.YClose)/this.YClose*100;c=this.TitlePaint.GetColor(d,0),f=d.toFixed(2)+"%",h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:c})}if(ze.IsNumber(i)){s=Ai.GetText("Tooltip-Vol",this.LanguageID);var f=ze.FromatIntegerString(i,2,this.LanguageID);h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:this.VolColor})}if(ze.IsNumber(r)){s=Ai.GetText("Tooltip-Amount",this.LanguageID);f=ze.FormatValueString(r,2,this.LanguageID);h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:this.AmountColor})}if(ze.IsNumber(e.Position)){s=Ai.GetText("Tooltip-Position",this.LanguageID);f=ze.FormatValueString(e.Position,2,this.LanguageID);h.push({Title:s,TitleColor:this.TitleColor,Text:f,Color:this.TitleColor})}return l}}}function Ee(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="MinuteLeftTooltipPaint",this.BorderColor=xi.PCTooltipPaint.BorderColor,this.BGColor=xi.PCTooltipPaint.BGColor,this.TitleColor=xi.PCTooltipPaint.TitleColor,this.DateTimeColor=xi.PCTooltipPaint.DateTimeColor,this.VolColor=xi.PCTooltipPaint.VolColor,this.AmountColor=xi.PCTooltipPaint.AmountColor,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.TitlePaint,this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor,this.YClose,this.Mergin={Left:2,Top:3,Bottom:2,Right:2},this.LineHeight=15,this.FixedWidth,this.Font=xi.PCTooltipPaint.TitleFont,this.HQChart,this.SetOption=function(t){t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID),ze.IsNumber(t.FixedWidth)&&(this.FixedWidth=t.FixedWidth)},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;var t=this.HQChart.LastPoint;return!!t&&this.HQChart.IsMouseOnClient(t.X,t.Y)},this.Draw=function(){if(this.IsEnableDraw()&&(this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}this.YClose=this.TitlePaint.YClose;var r=this.GetForamtTitle(t);if(ze.IsNonEmptyArray(r)){this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.LineHeight=T(this.Canvas,null,"擎");var n=this.ChartBorder.GetBorder(),s=this.LineHeight*r.length*2,o={Left:1,Top:1,Right:n.Left};o.Bottom=o.Top+s,o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top,o.Height+=this.Mergin.Top+this.Mergin.Bottom,o.Bottom=o.Top+o.Height,ze.IsNumber(this.FixedWidth)&&(o.Width=this.FixedWidth),this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(F(o.Left),F(o.Top),L(o.Width),L(o.Height));var h=o.Left+o.Width-this.Mergin.Right,l=this.Mergin.Left+o.Left,u=this.Mergin.Top+o.Top,c={Left:l,Top:u,Right:h};c.Width=c.Right-c.Left;for(var d=0;d<r.length;++d){var f=r[d];this.DrawText(f,c)}}}},this.DrawText=function(t,e){this.Canvas.fillStyle=t.TitleColor,this.Canvas.textAlign="left",this.Canvas.fillText(t.Title,e.Left,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight,this.Canvas.textAlign="right",this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Text,e.Right,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight},this.GetForamtTitle=function(t){if(!t||!t.Data)return null;var e,a=[];this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var i=Hr(e);if(0==t.Type){var r=t.Data,n=this.FormatDate(r.Date);n&&a.push(n);n=this.ForamtTime(r.Time,"HH:MM","PCTooltip-Time");n&&a.push(n);n=this.ForamtPrice(r.Close,i,"PCTooltip-Price");n&&a.push(n);n=this.ForamtPrice(r.AvPrice,i,"PCTooltip-AvPrice");n&&a.push(n);n=this.ForamtIncrease(r.Close,"PCTooltip-Increase");n&&a.push(n);n=this.FormatVol(r.Vol,"PCTooltip-Vol");if(n&&a.push(n),ze.IsNumber(r.Amount)){n={Title:Ai.GetText("PCTooltip-Amount",this.LanguageID),TitleColor:this.TitleColor,Text:ze.FromatIntegerString(r.Amount,2,this.LanguageID),TextColor:this.AmountColor};a.push(n)}}else if(1==t.Type){r=t.Data.Data;if(!r)return;n=this.FormatDate(r.Date);n&&a.push(n);var s="HH:MM:SS";1===r.Ver&&(s="HH:MM");n=this.ForamtTime(r.Time,s,"PCTooltip-Time");n&&a.push(n);n=this.ForamtPrice(r.Price,i,"PCTooltip-AC-Price");n&&a.push(n);n=this.ForamtIncrease(r.Price,"PCTooltip-AC-Increase");if(n&&a.push(n),ze.IsNonEmptyArray(r.Vol)){n=this.FormatVol(r.Vol[0],"PCTooltip-AC-Vol");n&&a.push(n);n=this.FormatVol(r.Vol[1],"PCTooltip-AC-NotMatchVol");n&&a.push(n)}}return a},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.FormatDate=function(t){if(!ze.IsNumber(t))return null;var e={Title:Ai.GetText("PCTooltip-Date",this.LanguageID),TitleColor:this.TitleColor,Text:ze.FormatDateString(t,"MM-DD",this.LanguageID),TextColor:this.DateTimeColor};return e},this.ForamtTime=function(t,e,a){if(!ze.IsNumber(t))return null;var i={Title:Ai.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:ze.FormatTimeString(t,e,this.LanguageID),TextColor:this.DateTimeColor};return i},this.ForamtPrice=function(t,e,a){if(!ze.IsNumber(t))return null;var i={Title:Ai.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:t.toFixed(e),TextColor:this.GetColor(t,this.YClose)};return i},this.ForamtIncrease=function(t,e){if(!ze.IsNumber(t)||0==t)return null;var a=(t-this.YClose)/this.YClose*100,i={Title:Ai.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:a.toFixed(2)+"%",TextColor:this.GetColor(a,0)};return i},this.FormatVol=function(t,e){if(!ze.IsNumber(t))return null;var a={Title:Ai.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:ze.FromatIntegerString(t,2,this.LanguageID),TextColor:this.VolColor};return a}}function Ne(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.Left=80,this.Right=1,this.Top=1,this.Bottom=1,this.BorderColor=xi.FrameBorderPen,this.Symbol,this.Name,this.TitleFont=["14px 微软雅黑"],this.Draw=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top+18,i=t+(e-t)/2;this.Symbol&&this.Name&&(this.Canvas.font=this.TitleFont[0],this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.Symbol,i-2,a),this.Canvas.textAlign="left",this.Canvas.fillText(this.Name,i+2,a)),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.moveTo(t,a),this.Canvas.lineTo(e,a),this.Canvas.stroke(),a+=30,this.DrawBorder()},this.DrawBorder=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top,i=this.ChartBorder.GetChartHeight()-this.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,a,e-t,i-a)}}function Pe(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.Name="筹码分布",this.ClassName="StockChip",this.HQChart,this.PenBorder=xi.FrameBorderPen,this.ColorProfit="rgb(255,0,0)",this.ColorNoProfit="rgb(90,141,248)",this.ColorAveragePrice="rgb(0,139,0)",this.ColorBG="rgb(190,190,190)",this.PixelRatio=I(),this.ShowType=0,this.IsDynamic=!0,this.ClientRect={},this.Font=xi.TitleFont,this.InfoColor=xi.StockChip.InfoColor,this.DayInfoColor=xi.StockChip.DayInfoColor,this.LineHeight=16,this.Left=50*this.PixelRatio,this.IsShowX=!1,this.ShowXCount=3,this.Width=150*this.PixelRatio,this.CalculateType=0,this.PriceZoom=100,this.NotSupportMessage="不支持筹码图",this.Buttons=[],this.DefaultButton=E(xi.StockChip.DefaultButton),this.LongButton=E(xi.StockChip.LongButton),this.RecentButton=E(xi.StockChip.RecentButton),this.ButtonTooltip=E(xi.Buttons.Tooltip),this.DAY_COLOR=[["rgb(255,0,0)","rgb(255,128,128)","rgb(255,0,128)","rgb(255,100,0)","rgb(192,128,0)","rgb(255,192,0)"],["rgb(120,80,225)","rgb(160,160,225)","rgb(80,80,255)","rgb(120,120,255)","rgb(32,64,192)","rgb(0,64,128)"]],this.SetOption=function(t){t&&(t.ShowType>0&&(this.ShowType=t.ShowType),t.IsShowX&&(this.IsShowX=t.IsShowX),t.ShowXCount>0&&(this.ShowXCount=t.ShowXCount),t.Width>100&&(this.Width=t.Width*I()),t.CalculateType>0&&(this.CalculateType=t.CalculateType),ze.IsNumber(t.PriceZoom)&&(this.PriceZoom=t.PriceZoom))},this.ReloadResource=function(t){this.PenBorder=xi.FrameBorderPen,this.Font=xi.TitleFont,this.InfoColor=xi.StockChip.InfoColor,this.DayInfoColor=xi.StockChip.DayInfoColor,this.DefaultButton=E(xi.StockChip.DefaultButton),this.LongButton=E(xi.StockChip.LongButton),this.RecentButton=E(xi.StockChip.RecentButton),this.ButtonTooltip=E(xi.Buttons.Tooltip)},this.Draw=function(){this.PixelRatio=I();var t=F(this.ChartBorder.GetRight()+this.Left),e=F(this.ChartBorder.GetTop()),a=F(t+this.Width-1*this.PixelRatio),i=F(this.ChartBorder.GetBottom()),r=a-t,n=i-e;if(this.ClientRect={Left:t,Top:e,Width:r,Height:n},ut.IsTickPeriod(this.HQChart.Period)){this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor;var s=t+r/2,o=e+n/2;return this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,s,o),void this.DrawBorder()}this.CalculateChip()?(this.DrawFrame(),this.DrawAllChip(),1!=this.ShowType&&2!=this.ShowType||this.DrawDayChip(),this.CalculateCast(),this.DrawChipInfo()):l.Chart.Log("[StockChip::Draw] no data"),this.DrawBorder(),this.SizeChange=!1},this.DrawChipInfo=function(){var t=this.ClientRect.Top+this.ClientRect.Height-1,e=this.ClientRect.Left+2,a=this.ClientRect.Left+this.ClientRect.Width;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var i=this.LineHeight*I(),r="70%成本价 --.--";ze.IsNonEmptyArray(this.Data.Cast)&&(r="70%成本价"+this.Data.Cast[1].MinPrice.toFixed(2)+"-"+this.Data.Cast[1].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[1].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="90%成本价 --.--",ze.IsNonEmptyArray(this.Data.Cast)&&(r="90%成本价"+this.Data.Cast[0].MinPrice.toFixed(2)+"-"+this.Data.Cast[0].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[0].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="平均成本："+this.Data.ChipInfo.AveragePrice.toFixed(2)+"元",this.Canvas.fillText(r,e,t),t-=i,r=+this.Data.YPrice.toFixed(2)+"处获利盘："+this.Data.ChipInfo.YProfitRate.toFixed(2)+"%",this.Canvas.fillText(r,e,t),t-=i,r="获利比例：",this.Canvas.fillText(r,e,t);var n=this.Canvas.measureText(r).width+2,s=e+n,o=a-5-s;if(this.Canvas.strokeStyle=this.ColorNoProfit,this.Canvas.strokeRect(s,t-i,o,i),this.Canvas.strokeStyle=this.ColorProfit,this.Canvas.strokeRect(s,t-i,o*(this.Data.ChipInfo.ProfitRate/100),i),r=this.Data.ChipInfo.ProfitRate.toFixed(2)+"%",this.Canvas.textAlign="center",this.Canvas.fillText(r,s+o/2,t),t-=i,this.Canvas.textAlign="left",r="成本分布,日期："+ze.FormatDateString(this.Data.SelectData.Date),this.Data.SelectData.Time&&(r+=" "+ze.FormatTimeString(this.Data.SelectData.Time)),this.Canvas.fillText(r,e,t),t-=i,1==this.ShowType||2==this.ShowType){a=this.ClientRect.Left+this.ClientRect.Width-1;this.Canvas.textAlign="right";n=50;for(var h in this.Data.DayChip.sort((function(t,e){return e.Day-t.Day})),this.Data.DayChip){var l=this.Data.DayChip[h],u=0;this.Data.ChipInfo&&this.Data.ChipInfo.Vol>0&&(u=l.Vol/this.Data.ChipInfo.Vol*100),r=l.Day+"周期"+(1==this.ShowType?"前":"内")+"成本"+(ze.IsNumber(u)?u.toFixed(2)+"%":"--.--%"),0==h&&(n=this.Canvas.measureText(r).width+8),this.Canvas.fillStyle=l.Color,this.Canvas.fillRect(a-n,t-i,n,i),this.Canvas.fillStyle=this.DayInfoColor,this.Canvas.fillText(r,a,t),t-=i}}},this.DrawDayChip=function(){var t=this.HQChart.Frame.SubFrame[0].Frame;for(var e in this.Data.DayChip){var a=[],i=this.Data.DayChip[e].Chip;if(i){for(var r=0,n=0;n<i.length;++n){var s=i[n];if(s){r+=s;var o=(n+this.Data.MinPrice)/100,h=t.GetYFromData(o),l=s/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;a.push({X:l,Y:h})}}this.Data.DayChip[e].Vol=r,this.DrawArea(a,this.Data.DayChip[e].Color)}}},this.DrawToolbar=function(t,e){this.Buttons=[];this.ClientRect.Left;for(var a=this.ClientRect.Left+this.ClientRect.Width,i=this.ClientRect.Top+this.ChartBorder.TitleHeight/2,r=[{ID:p.CHIP_RECENT,Style:this.RecentButton,ShowType:2},{ID:p.CHIP_LONG,Style:this.LongButton,ShowType:1},{ID:p.CHIP_DEFULT,Style:this.DefaultButton,ShowType:0}],n=0;n<r.length;++n){var s=r[n],o=s.Style.Size,h=a-o-s.Style.MerginLeft,l="".concat(o,"px ").concat(s.Style.Family),u={Left:h,Top:i-o/2,Right:h+o+s.Style.MerginLeft,Bottom:i+o/2,Width:o+s.Style.MerginLeft,Height:o},c=s.Style.Color,d={ID:s.ID,Rect:u};this.ShowType==s.ShowType?(c=s.Style.SelectedColor,e&&t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(e.MouseOnToolbar={Rect:u,Item:d,Frame:this,Point:{X:t.X,Y:t.Y}})):t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(c=s.Style.MoveOnColor,e&&(e.MouseOnToolbar={Rect:u,Item:d,Frame:this,Point:{X:t.X,Y:t.Y}})),this.Canvas.fillStyle=c,this.Canvas.font=l,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(s.Style.Text,h,i),this.Buttons.push(d),a=h}},this.DrawToolbarTooltip=function(t){if(t){this.ClientRect.Left;var e=this.ClientRect.Left+this.ClientRect.Width,a="Toolbar-"+t.Item.ID;if(text=Ai.GetText(a,0),text){var i=t.Rect,r=i.Left+i.Width/2;this.Canvas.font=this.ButtonTooltip.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var n=this.Canvas.measureText(text).width+8,s=this.GetFontHeight(),o=s+8,h=r-n/2,l=i.Top-o;l<0&&(l=i.Bottom+1),h+n>e&&(h=e-n-2),this.Canvas.fillStyle=this.ButtonTooltip.ColorBG,this.Canvas.fillRect(h,l,n,o),this.Canvas.fillStyle=this.ButtonTooltip.Color,this.Canvas.fillText(text,h+4,l+o/2)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.DrawAllChip=function(){for(var t=this.HQChart.Frame.SubFrame[0].Frame,e=this.Data.SelectData.Close,a=[],i=[],r=0,n=0,s=0,o=0,h=this.Data.YPrice,l=t.HorizontalMax,u=t.HorizontalMin,c=1,d=0;d<this.Data.AllChip.length;++d){var f=this.Data.AllChip[d];if(f){var C=(d+this.Data.MinPrice)/this.PriceZoom;r+=f,n+=C*f,C<h&&(o+=f),C<e&&(s+=f),C<=l&&C>=u&&c<f&&(c=f)}}this.Data.MaxVol=c;for(d=0;d<this.Data.AllChip.length;++d){f=this.Data.AllChip[d];if(f){C=(d+this.Data.MinPrice)/this.PriceZoom;if(!(C>l||C<u)){var m=t.GetYFromData(C),D=f/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;C<e?a.push({X:D,Y:m}):i.push({X:D,Y:m})}}}if(this.Data.ChipInfo={Vol:r,AveragePrice:n/r,ProfitVol:s,ProfitRate:r>0?s/r*100:0,YProfitRate:r>0?o/r*100:0},0==this.ShowType){this.DrawLines(a,this.ColorProfit),this.DrawLines(i,this.ColorNoProfit);var p=this.Data.ChipInfo.AveragePrice;p>0&&p<=l&&p>=u&&(p=p.toFixed(2),this.DrawAveragePriceLine(a,i,t.GetYFromData(p),this.ColorAveragePrice))}else this.DrawLines(a,this.ColorBG),this.DrawLines(i,this.ColorBG)},this.CalculateCast=function(){if(this.Data.ChipInfo&&this.Data.ChipInfo.Vol){for(var t=[{Start:.05,End:.95,MaxPrice:0,MinPrice:0,Rate:0},{Start:.15,End:.85,MaxPrice:0,MinPrice:0,Rate:0}],e=(this.Data.ChipInfo.AveragePrice,this.Data.ChipInfo.ProfitVol),a=0,i=0,r=0;i<this.Data.AllChip.length;++i){if(4==r)break;var n=this.Data.AllChip[i];if(!(n<=0)){var s=(i+this.Data.MinPrice)/this.PriceZoom;a+=n;var o=a/e;for(var h in t){var l=t[h];l.MinPrice<=0&&o>l.Start&&(l.MinPrice=s,++r),l.MaxPrice<=0&&o>l.End&&(l.MaxPrice=s,++r)}}}for(var i in t){var u=t[i],c=u.MaxPrice+u.MinPrice;c&&(u.Rate=Math.abs(u.MaxPrice-u.MinPrice)/c*100)}this.Data.Cast=t}},this.DrawArea=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.fillStyle=e,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,t[0].Y),t){var i=t[a];this.Canvas.lineTo(i.X,i.Y)}this.Canvas.lineTo(this.ClientRect.Left,t[t.length-1].Y),this.Canvas.fill()}},this.DrawLines=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.strokeStyle=e,this.Canvas.beginPath(),t){var i=t[a];this.Canvas.moveTo(this.ClientRect.Left,i.Y),this.Canvas.lineTo(i.X,i.Y)}this.Canvas.stroke()}},this.DrawAveragePriceLine=function(t,e,a,i){for(var r in t){var n=t[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}for(var r in e){n=e[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}},this.DrawBorder=function(){this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(this.ClientRect.Left,this.ClientRect.Top,this.ClientRect.Width,this.ClientRect.Height)},this.EvenlyDistribute=function(t,e){var a=e.Low,i=e.High,r=e.MaxPrice,n=e.MinPrice,s=1;if(i-a!=0){for(var o=e.Vol/(i-a),h=a;h<=i&&h<=r;++h){var l=h-n;t[l]+=o,s<t[l]&&(s=t[l])}e.MaxVol=s}},this.TriangleDistribute=function(t,e){for(var a=e.Low,i=e.High,r=(e.MaxPrice,e.MinPrice),n=1,s=3.1415926535,o=(i-a)/2+a,h=0,l=[],u=a+1,c=1;u<=o;++u,++c){var d=Math.tan(45*s/180)*c;h+=d,l.push({Index:u-r,Value:d})}for(u=i-1,c=1;u>o;--u,++c){d=Math.tan(45*s/180)*c;h+=d,l.push({Index:u-r,Value:d})}if(h>0){for(u=0;u<l.length;++u){var f=l[u];t[f.Index]+=f.Value*e.Vol/h,n<t[f.Index]&&(n=t[f.Index])}e.MaxVol=n}},this.CalculateDistribute=function(t,e){1==this.CalculateType?this.TriangleDistribute(t,e):this.EvenlyDistribute(t,e)},this.CalculateChip=function(){if(!this.HQChart)return!1;if(!this.HQChart.FlowCapitalReady)return!1;var t=this.HQChart.Symbol;if(!t)return!1;if(Mr.IsSHSZIndex(t))return!1;var e=this.HQChart.ChartPaint[0].Data,a=e.DataOffset+parseInt(this.HQChart.CursorIndex);a>=e.Data.length&&(a=e.Data.length-1);var i=e.Data[a],r=i.Close,n=this.HQChart.LastPoint.Y;n&&(r=this.HQChart.Frame.SubFrame[0].Frame.GetYData(n));for(var s,o,h,l=[],u=1,c=a;c>=0;--c){var d=e.Data[c],f=1;d.FlowCapital>0&&(f=d.Vol/d.FlowCapital),s=c==a?d.Vol*f:d.Vol*u;var C={Vol:s,High:d.High,Low:d.Low};l.push(C),u*=1-1*f,(!o||o<d.High)&&(o=d.High),(!h||h>d.Low)&&(h=d.Low)}if(!o||!h)return!0;var m=this.PriceZoom;o=parseInt(o*m),h=parseInt(h*m);for(var D=o-h,p=new Array,v=0;v<=D;++v)p.push(0);var g,S=[];if(2==this.ShowType){S=[{Day:100,Color:this.DAY_COLOR[1][5]},{Day:60,Color:this.DAY_COLOR[1][4]},{Day:30,Color:this.DAY_COLOR[1][3]},{Day:20,Color:this.DAY_COLOR[1][2]},{Day:10,Color:this.DAY_COLOR[1][1]},{Day:5,Color:this.DAY_COLOR[1][0]}];for(var I in l){d=l[I];var T=parseInt(d.High*m),x=parseInt(d.Low*m),y=d.Vol;if(T-x>0&&(y=d.Vol/(T-x)),!(y<=1e-9)){for(var A=0;A<S.length;++A)if(I==S[A].Day){S[A].Chip=p.slice(0);break}g={Low:x,High:T,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(p,g)}}}else if(1==this.ShowType){S=[{Day:5,Color:this.DAY_COLOR[0][0]},{Day:10,Color:this.DAY_COLOR[0][1]},{Day:20,Color:this.DAY_COLOR[0][2]},{Day:30,Color:this.DAY_COLOR[0][3]},{Day:60,Color:this.DAY_COLOR[0][4]},{Day:100,Color:this.DAY_COLOR[0][5]}];for(var b=l.length-1;b>=0;--b){d=l[b],T=parseInt(d.High*m),x=parseInt(d.Low*m),y=d.Vol;if(T-x>0&&(y=d.Vol/(T-x)),!(y<=1e-9)){for(A=0;A<S.length;++A)if(b==S[A].Day){S[A].Chip=p.slice(0);break}g={Low:x,High:T,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(p,g)}}}else for(var w in l){d=l[w],T=parseInt(d.High*m),x=parseInt(d.Low*m),y=d.Vol;T-x>0&&(y=d.Vol/(T-x)),y<=1e-9||(g={Low:x,High:T,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(p,g))}return!!g&&(this.Data={AllChip:p,MaxVol:g.MaxVol,MaxPrice:o,MinPrice:h,SelectData:i,DayChip:S,YPrice:r},!0)},this.DrawFrame=function(){if(0!=this.IsShowX&&!(this.Data.MaxVol<=0)){var t=1!==this.HQChart.Frame.SubFrame.length,e=this.HQChart.Frame.SubFrame[0].Frame,a=e.ChartBorder,i=F(a.GetBottomEx()+1);t||(i=this.ClientRect.Top+this.ClientRect.Height);var r=this.ClientRect.Left,n=r+this.ClientRect.Width;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),t&&(this.Canvas.moveTo(r,i),this.Canvas.lineTo(n,i));var s=this.ShowXCount,o=this.Data.MaxVol,h=Math.floor(o/s);this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.InfoColor;I();for(var l=1;l<=s;++l){var u=h*l,c=u/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;if(c=F(c),l==s){this.Canvas.textAlign="right";var d=ze.FormatValueString(o,1);this.Canvas.fillText(d,c,i+2)}else{this.Canvas.moveTo(c,this.ClientRect.Top),this.Canvas.lineTo(c,i),this.Canvas.textAlign="center";d=ze.FormatValueString(u,1);var f=this.Canvas.measureText(d).width;this.Canvas.fillText(d,Math.floor(c-.25*f),i+2)}}this.Canvas.stroke()}}}function Oe(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="DrawToolsButton",this.HQChart,this.ID=b(),this.ToolsDiv,this.Color="#696969",this.Top=5*I(),this.Width=45*I(),this.SetOption=function(t){var e=I();t&&t.Width>10&&(this.Width=t.Width*e)},this.Clear=function(){this.ToolsDiv&&this.ChartBorder.UIElement.parentNode.removeChild(this.ToolsDiv)},this.Draw=function(){var t=this;if(0!=this.SizeChange){var e=[[{HTML:{Title:"线段",IClass:"iconfont icon-draw_line",ID:"icon-segment"},Name:"线段"},{HTML:{Title:"尺子",IClass:"iconfont icon-ruler",ID:"icon_ruler"},Name:"尺子"},{HTML:{Title:"射线",IClass:"iconfont icon-draw_rays",ID:"icon-beam"},Name:"射线"},{HTML:{Title:"标价线",IClass:"iconfont icon-price_line",ID:"icon-price-line"},Name:"标价线"},{HTML:{Title:"垂直线",IClass:"iconfont icon-vertical_line",ID:"icon-vertical-line"},Name:"垂直线"},{HTML:{Title:"箭头",IClass:"iconfont icon-draw_rays",ID:"icon-beam2"},Name:"箭头"},{HTML:{Title:"趋势线",IClass:"iconfont icon-draw_trendline",ID:"icon-trendline"},Name:"趋势线"},{HTML:{Title:"水平线",IClass:"iconfont icon-draw_hline",ID:"icon-hline"},Name:"水平线"},{HTML:{Title:"水平线段",IClass:"iconfont icon-draw_hlinesegment",ID:"icon-hlineseg"},Name:"水平线段"},{HTML:{Title:"平行射线",IClass:"iconfont icon-draw_p_rays_lines",ID:"icon-rayslineseg"},Name:"平行射线"},{HTML:{Title:"平行线",IClass:"iconfont icon-draw_parallel_lines",ID:"icon-parallellines"},Name:"平行线"},{HTML:{Title:"平行通道",IClass:"iconfont icon-draw_parallelchannel",ID:"icon-parallelchannel"},Name:"平行通道"},{HTML:{Title:"价格通道线",IClass:"iconfont icon-draw_pricechannel",ID:"icon-pricechannel"},Name:"价格通道线"},{HTML:{Title:"M头W底",IClass:"iconfont icon-draw_wavemw",ID:"icon-wavemw"},Name:"M头W底"},{HTML:{Title:"头肩型",IClass:"iconfont icon-draw_head_shoulders_bt",ID:"icon-Head-Shoulders"},Name:"头肩型"},{HTML:{Title:"波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"波浪尺"},{HTML:{Title:"AB波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"AB波浪尺"},{HTML:{Title:"箱型线",IClass:"iconfont icon-draw_box",ID:"icon-drawbox"},Name:"箱型线"},{HTML:{Title:"涂鸦线段",IClass:"iconfont icon-draw_line",ID:"icon-segment2"},Name:"涂鸦线段"}],[{HTML:{Title:"圆弧",IClass:"iconfont icon-draw_arc",ID:"icon-arc"},Name:"圆弧线"},{HTML:{Title:"矩形",IClass:"iconfont icon-rectangle",ID:"icon-rect"},Name:"矩形"},{HTML:{Title:"平行四边形",IClass:"iconfont icon-draw_quadrangle",ID:"icon-quad"},Name:"平行四边形"},{HTML:{Title:"三角形",IClass:"iconfont icon-draw_triangle",ID:"icon-triangle"},Name:"三角形"},{HTML:{Title:"圆",IClass:"iconfont icon-draw_circle",ID:"icon-circle"},Name:"圆"},{HTML:{Title:"对称角度",IClass:"iconfont icon-draw_symangle",ID:"icon-symangle"},Name:"对称角度"}],[{HTML:{Title:"文本",IClass:"iconfont icon-draw_text",ID:"icon-text"},Name:"文本"},{HTML:{Title:"向上箭头",IClass:"iconfont icon-arrow_up",ID:"icon-arrowup"},Name:"icon-arrow_up"},{HTML:{Title:"向下箭头",IClass:"iconfont icon-arrow_down",ID:"icon-arrowdown"},Name:"icon-arrow_down"},{HTML:{Title:"向左箭头",IClass:"iconfont icon-arrow_left",ID:"icon-arrowleft"},Name:"icon-arrow_left"},{HTML:{Title:"向右箭头",IClass:"iconfont icon-arrow_right",ID:"icon-arrowright"},Name:"icon-arrow_right"}],[{HTML:{Title:"江恩角度线",IClass:"iconfont icon-draw_gannfan",ID:"icon-gannfan"},Name:"江恩角度线"},{HTML:{Title:"斐波那契周期线",IClass:"iconfont icon-draw_fibonacci",ID:"icon-fibonacci"},Name:"斐波那契周期线"},{HTML:{Title:"阻速线",IClass:"iconfont icon-draw_resline",ID:"icon-resline"},Name:"阻速线"},{HTML:{Title:"黄金分割",IClass:"iconfont icon-draw_goldensection",ID:"icon-goldensection"},Name:"黄金分割"},{HTML:{Title:"百分比线",IClass:"iconfont icon-draw_percentage",ID:"icon-percentage"},Name:"百分比线"},{HTML:{Title:"波段线",IClass:"iconfont icon-draw_waveband",ID:"icon-waveband"},Name:"波段线"},{HTML:{Title:"线形回归线",IClass:"iconfont icon-linear_3",ID:"icon-waveband2"},Name:"线形回归线"},{HTML:{Title:"线形回归带",IClass:"iconfont icon-linear_1",ID:"icon-waveband3"},Name:"线形回归带"},{HTML:{Title:"延长线形回归带",IClass:"iconfont icon-linear_2",ID:"icon-waveband5"},Name:"延长线形回归带"}],[{HTML:{Title:"全部删除",IClass:"iconfont icon-recycle_bin",ID:"icon-delete"},Name:"全部删除"}]],a=this.HQChart;if(!this.ToolsDiv){var i=document.createElement("div");i.className="drawtools",i.id=this.ID;var r="",n="",s=new Array;e.forEach((function(t,e){s.push(t[0])}));for(var o=0;o<e.length;o++){for(var h=s[o],l=e[o],u="",c="",d=0;d<l.length;d++){var f=l[d],C=f.Name;C.indexOf("up")>-1?C="向上箭头":C.indexOf("down")>-1?C="向下箭头":C.indexOf("left")>-1?C="向左箭头":C.indexOf("right")>-1&&(C="向右箭头"),u+='<p class="menuTwoItem '+f.HTML.ID+'">'+C+'<i class="'+f.HTML.IClass+'" title="'+f.HTML.Title+'"></i></p>'}o!==e.length-1?(n='<div class="menuTwo">'+u+"</div>",c='<i class="contentArrow iconfont icon-menu_arraw_left"></i>'):(n="",c="");var m='<div class="icon-image first-'+h.HTML.ID+'"><i class="'+h.HTML.IClass+'" title="'+h.HTML.Title+'"></i>'+n+c+"</div>";r+=m}for(var o in this.ChartBorder.UIElement.parentNode.appendChild(i),i.innerHTML=r,this.ToolsDiv=i,e){var D=e[o][0];if($("#"+this.ID+" .first-"+D.HTML.ID).hover((function(){$(".drawtools").find(".contentArrow").hide(),$(this).find(".contentArrow").removeClass("trans").show()})),$("#"+this.ID+" .first-"+D.HTML.ID+" .contentArrow").click((function(t){t.stopPropagation(),$(".drawtools").find(".menuTwo").hide(),$(this).siblings(".menuTwo").show()})),$("#"+this.ID+" .first-"+D.HTML.ID+" .trans").click((function(){event.stopPropagation(),$(this).siblings(".menuTwo").hide()})),"全部删除"==D.Name)$("#"+this.ID+" .first-icon-delete").click((function(){$(".drawtools").find(".menuTwo").hide(),$(this).siblings().removeClass("active"),$(this).addClass("active"),a.ClearChartDrawPicture(),$(".subTolls").css("display","none")}));else{$("#"+this.ID+" .first-"+s[o].HTML.ID).click({CurrentIndex:o},(function(t){$(".drawtools").find(".menuTwo").hide(),$(this).siblings().removeClass("active"),$(this).addClass("active"),a.CreateChartDrawPicture(s[t.data.CurrentIndex].Name)}));var p=function(){v=e[o][d];var i=v.HTML.IClass;$("#"+t.ID+" ."+v.HTML.ID).hover((function(t){t.stopPropagation(),$(this).closest(".icon-image").find(".contentArrow").addClass("trans")})),$("#"+t.ID+" ."+v.HTML.ID).click({DrawName:v.Name,CurrentIndex:o,CurrentData:v},(function(t){t.stopPropagation(),$(this).closest(".icon-image").find(".contentArrow").hide(),$(this).siblings().removeClass("current"),$(this).addClass("current"),$(this).closest(".icon-image").children("i").eq(0).removeClass().addClass(i,"active").attr("title",t.data.CurrentData.HTML.Title),s.splice(t.data.CurrentIndex,1,t.data.CurrentData),$(this).parent().hide(),a.CreateChartDrawPicture(t.data.DrawName)}))};for(var d in e[o]){var v;p()}}}}var g=this.ID;$(document).click((function(t){$("#"+g).is(t.target)||0!==$("#"+g).has(t.target).length||($("#"+g+" .menuTwo").hide(),$("#"+g+" .contentArrow").hide())}));w();var S=I(),T=F(this.ChartBorder.GetRight()+this.Left),x=this.ChartBorder.GetTop();this.ToolsDiv.style.left=T/S+"px",this.ToolsDiv.style.top=x/S+"px",this.ToolsDiv.style.width=(this.Width-5)/S+"px",this.ToolsDiv.style.height="auto",this.ToolsDiv.style.position="absolute",this.ToolsDiv.style.display="block",this.SizeChange}}}function Re(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="FrameSplitPaint",this.LineColor="rgb(255,0,0)",this.TextColor="rgb(255,0,0)",this.LineWidth=2,this.Font="bold "+18*I()+"px 微软雅黑",this.TextTopOffset=10*I(),this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.TextColor&&(this.TextColor=t.TextColor),t.Font&&(this.Font=t.Font),ze.IsNumber(t.LineWidth)&&(this.LineWidth=t.LineWidth),ze.IsNumber(t.TextTopOffset)&&(this.TextTopOffset=t.TextTopOffset))},this.Draw=function(){if(this.HQChart&&(0==this.HQChart.Period||1==this.HQChart.Period)&&this.HQChart.ChartPaint[0]){var t=this.HQChart.ChartPaint[0].Data;if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount,s=this.LineWidth*I();if(a)var o=this.ChartBorder.GetHScreenBorder(),h=o.TopEx+r/2+xi.FrameLeftMargin,l=o.BottomEx;else{o=this.ChartBorder.GetBorder(),h=o.LeftEx+r/2+xi.FrameLeftMargin,l=o.RightEx;var u=o.ChartHeight-o.TopTitle-5*I()}this.Canvas.save(),this.Canvas.lineWidth=s,this.Canvas.font=this.Font,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";for(var c={Left:o.LeftEx,Top:M(s,o.TopTitle),Height:u,LineWidth:s},d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<n;++d,++f,h+=i+r){var C=this.Data.Data[d];if(C){var m=this.GetQuarter(C.Date);if(m){var D=h,p=h+i;if(p>l)break;var v=D+(p-D)/2;if(c.DateInfo){var g=c.DateInfo;g.Year!=m.Year||g.Quarter!=m.Quarter?(c.Right=v,this.DrawQuarter(c),c.Left=v,c.Right=null,c.DateInfo=m):c.Right=v}else c.DateInfo=m,c.Right=v}}}this.DrawQuarter(c),this.Canvas.restore()}}}},this.DrawQuarter=function(t){if(ze.IsNumber(t.Left)&&ze.IsNumber(t.Right)){var e=M(t.LineWidth,t.Left),a=M(t.LineWidth,t.Right),i=a-e;this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(e,t.Top,i,t.Height);var r=t.DateInfo,n=r.Year%100;if(n<10)var s="0"+n;else s=n.toString();var o="".concat(s,"年").concat(r.Quarter,"季度"),h=this.Canvas.measureText(o).width;if(h<i+5){var l=e+i/2,u=t.Top+this.TextTopOffset;this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,l,u)}}},this.GetQuarter=function(t){if(!ze.IsNumber(t))return null;var e=parseInt(t/1e4),a=parseInt(t%1e4/100);switch(a){case 1:case 2:case 3:var i=1;break;case 4:case 5:case 6:i=2;break;case 7:case 8:case 9:i=3;break;case 10:case 11:case 12:i=4;break;default:return null}return{Year:e,Month:a,Quarter:i}}}function Be(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="RectSelectPaint",this.LineColor=xi.RectSelect.LineColor,this.LineWidth=xi.RectSelect.LineWidth,this.LineDotted=xi.RectSelect.LineDotted,this.AreaColor=xi.RectSelect.AreaColor,this.SubAreaColor=xi.RectSelect.SubAreaColor,this.FirstPoint,this.SecondPoint,this.CenterPoint,this.PreventClose=!1,this.SpaceReselected=!1,this.SubClient={FirstPoint:null,SecondPoint:null,Start:null,End:null},this.StartDate,this.EndDate,this.CenterDate,this.HQChart,this.DragRect,this.ShowRangeText={Enable:!1,Position:0,Font:xi.RectSelect.RangeTextFont,Color:xi.RectSelect.RangeTextColor,BGColor:xi.RectSelect.RangeTextBGColor,SubPosition:0,SubFont:xi.RectSelect.RangeTextSubFont,SubColor:xi.RectSelect.RangeTextSubColor,SubBGColor:xi.RectSelect.RangeTextSubBGColor},this.BorderCache,this.SetOption=function(t){if(t&&(t.LineColor&&(this.LineColor=t.LineColor),t.AreaColor&&(this.AreaColor=t.AreaColor),ze.IsBool(t.SpaceReselected)&&(this.SpaceReselected=t.SpaceReselected),t.ShowRangeText)){var e=t.ShowRangeText;ze.IsBool(e.Enable)&&(this.ShowRangeText.Enable=e.Enable),ze.IsNumber(e.Position)&&(this.ShowRangeText.Position=e.Position),ze.IsNumber(e.SubPosition)&&(this.ShowRangeText.SubPosition=e.SubPosition)}},this.ReloadResource=function(t){this.LineColor=xi.RectSelect.LineColor,this.LineWidth=xi.RectSelect.LineWidth,this.LineDotted=xi.RectSelect.LineDotted,this.AreaColor=xi.RectSelect.AreaColor,this.ShowRangeText.Font=xi.RectSelect.RangeTextFont,this.ShowRangeText.Color=xi.RectSelect.RangeTextColor,this.ShowRangeText.BGColor=xi.RectSelect.RangeTextBGColor},this.IsMinuteChart=function(){var t=this.HQChart.ClassName,e="MinuteChartContainer"==t||"MinuteChartHScreenContainer"==t;return e},this.GetKData=function(){if(!this.HQChart)return null;var t=this.IsMinuteChart(),e=null;if(t){if(!this.HQChart.SourceData)return null;e=this.HQChart.SourceData}else{if(!this.HQChart.ChartPaint[0])return null;if(e=this.HQChart.ChartPaint[0].Data,!e)return null}return e},this.GetPointCount=function(){var t=0;return this.FirstPoint&&++t,this.SecondPoint&&++t,t},this.DateToNumber=function(t,e){if(e)return ze.IsNumber(t.Date)?1e4*t.Date+t.Time:t.Time;var a=this.HQChart.Period;return ut.IsDayPeriod(a,!0)?t.Date:ut.IsMinutePeriod(a,!0)?1e4*t.Date+t.Time:ut.IsSecondPeriod(a)||ut.IsTickPeriod(a)?1e6*t.Date+t.Time:null},this.GetSelectRectData=function(){if(!this.FirstPoint||!this.SecondPoint)return null;var t=this.GetKData();if(!t)return null;for(var e=this.IsMinuteChart(),a=this.DateToNumber(this.FirstPoint,e),i=this.DateToNumber(this.SecondPoint,e),r={Start:null,End:null,Data:t},n=0;n<t.Data.length;++n){var s=t.Data[n];if(s){var o=this.DateToNumber(s,e);if(a==o&&(r.Start=n),i==o&&(r.End=n),ze.IsNumber(r.Start)&&ze.IsNumber(r.End)){if(r.Start>r.End){var h=r.Start;r.Start=r.End,r.End=h}return r}}}return null},this.SortPoint=function(){var t=this.IsMinuteChart();if(this.CenterData=null,this.FirstPoint&&!this.SecondPoint)this.StartDate={Date:this.DateToNumber(this.FirstPoint,t),Index:0};else if(this.FirstPoint&&this.SecondPoint){var e=this.DateToNumber(this.FirstPoint,t),a=this.DateToNumber(this.SecondPoint,t);if(e<a?(this.StartDate={Date:e,Index:0},this.EndDate={Date:a,Index:1}):(this.StartDate={Date:a,Index:1},this.EndDate={Date:e,Index:0}),this.CenterPoint){var i=this.DateToNumber(this.CenterPoint,t);this.CenterDate={Date:i,Index:2}}if(this.SubClient.FirstPoint&&this.SubClient.SecondPoint){e=this.DateToNumber(this.SubClient.FirstPoint,t),a=this.DateToNumber(this.SubClient.SecondPoint,t);e<a?(this.SubClient.Start={Date:e,Index:3},this.SubClient.End={Date:a,Index:4}):(this.SubClient.Start={Date:a,Index:4},this.SubClient.End={Date:e,Index:3}),this.SubClient.End.Date<=this.StartDate.Date||this.SubClient.Start.Date>=this.EndDate.Date?(this.SubClient.Start=null,this.SubClient.End=null):(this.SubClient.Start.Date<this.StartDate.Date&&(this.SubClient.Start.Date=this.StartDate.Date),this.SubClient.End.Date>this.EndDate.Date&&(this.SubClient.End.Date=this.EndDate.Date))}}},this.GetCenterPoint=function(){if(!this.FirstPoint||!this.SecondPoint)return null;if(!ze.IsNumber(this.FirstPoint.DataIndex))return null;if(!ze.IsNumber(this.SecondPoint.DataIndex))return null;var t=this.FirstPoint.DataIndex-this.SecondPoint.DataIndex;if(Math.abs(t)<3)return null;var e=parseInt(this.FirstPoint.DataIndex+(this.SecondPoint.DataIndex-this.FirstPoint.DataIndex)/2);if(e<0)return null;var a=this.GetKData();if(!a||!a.Data)return null;var i=a.Data[e];return i?{Date:i.Date,Time:i.Time,DataIndex:e}:null},this.MovePoint=function(t){if(!this.FirstPoint||!this.SecondPoint)return!1;var e=this.GetKData();if(!e||!e.Data)return!1;var a=this.FirstPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var r={Date:i.Date,Time:i.Time,DataIndex:a};a=this.SecondPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var n={Date:i.Date,Time:i.Time,DataIndex:a};a=this.CenterPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var s={Date:i.Date,Time:i.Time,DataIndex:a};return this.FirstPoint=r,this.SecondPoint=n,this.CenterPoint=s,!0},this.MoveSubRect=function(t,e){if(!this.FirstPoint||!this.SecondPoint)return!1;if(!this.SubClient||!this.SubClient.FirstPoint||!this.SubClient.SecondPoint)return!1;var a=this.GetKData();if(!a||!a.Data)return!1;var i=Math.min(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),r=Math.max(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),n=this.SubClient.FirstPoint,s=this.SubClient.SecondPoint;if(this.SubClient.FirstPoint.DataIndex>this.SubClient.SecondPoint.DataIndex)n=this.SubClient.SecondPoint,s=this.SubClient.FirstPoint;var o=n.DataIndex,h=s.DataIndex;if(e){if(o<=i)return!1;o-=t,h-=t}else{if(s.DataIndex>=r)return!1;o+=t,h+=t}var l=!1;if(o!=n.DataIndex){n.DataIndex=o;var u=a.Data[o];n.Date=u.Date,n.Time=u.Time,l=!0}if(h!=n.DataIndex){s.DataIndex=h;u=a.Data[h];s.Date=u.Date,s.Time=u.Time,l=!0}return l},this.SetPoint=function(t,e){var a=null;if(e&&ze.IsNumber(e.DataIndex)&&(a=e.DataIndex),!e||!ze.IsNumber(e.Index))return this.FirstPoint?!this.SecondPoint&&(this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0):(this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0);switch(e.Index){case 0:return this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 1:return this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 2:var i=a-this.CenterPoint.DataIndex;return Math.abs(i)>0&&this.MovePoint(i);case 3:return this.SubClient.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;case 4:return this.SubClient.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;default:return!1}},this.ClearPoint=function(){if(this.PreventClose)return!1;var t=!1;return this.FirstPoint&&(this.FirstPoint=null,t=!0),this.SecondPoint&&(this.SecondPoint=null,t=!0),this.SubClient.FirstPoint=null,this.SubClient.SecondPoint=null,t},this.Draw=function(){if(this.BorderCache=null,this.StartDate=null,this.EndDate=null,this.CenterDate=null,this.DragRect=[],this.SubClient.Start=null,this.SubClient.End=null,this.FirstPoint||this.SecondPoint){this.SortPoint();var t=this.GetKData();if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount;if(a){var s=e.GetBorder(),o=s.TopEx+r/2+xi.FrameLeftMargin;s.BottomEx;this.BorderCache=s}else{s=e.GetBorder(),o=s.LeftEx+r/2+xi.FrameLeftMargin,s.RightEx,s.ChartHeight,s.TopTitle,I();var h=s.TopEx,l=s.BottomEx;this.BorderCache=s}this.Canvas.save();ut.IsDayPeriod(this.HQChart.Period,!0);for(var u=this.IsMinuteChart(),c=null,d=null,f=null,C=null,m=[],D=this.Data.DataOffset,p=0;D<this.Data.Data.length&&p<n;++D,++p,o+=i+r){var v=this.Data.Data[D];if(v){var g=o,S=o+i;if(u)var T=e.GetXFromIndex(p);else T=g+(S-g)/2;var x=this.DateToNumber(v,u);if(this.StartDate&&x==this.StartDate.Date&&(c={XIndex:D,X:T,Top:h,Bottom:l,PointIndex:this.StartDate.Index,Type:0,Item:v},m.push(c)),this.EndDate&&x==this.EndDate.Date&&(d={XIndex:D,X:T,Top:h,Bottom:l,PointIndex:this.EndDate.Index,Type:1,Item:v},m.push(d)),this.CenterDate&&x==this.CenterDate.Date){var y={XIndex:D,X:T,Top:h,Bottom:l,PointIndex:this.CenterDate.Index,Type:2,Item:v};m.push(y)}if(this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(x==this.SubClient.Start.Date&&(this.SubClient.Start.Point={Date:x,X:T,Top:h,Bottom:l,KItem:v}),x==this.SubClient.End.Date&&(this.SubClient.End.Point={Date:x,X:T,Top:h,Bottom:l,kItem:v})),f?(C.Date=x,C.X=T):(f={Date:x,X:T,Top:h,Bottom:l},C={Date:x,X:T,Top:h,Bottom:l}),c&&d)break}}if(this.DrawLines(m),this.DrawArea(c,d,f,C,this.AreaColor),this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(this.DrawArea(this.SubClient.Start.Point,this.SubClient.End.Point,f,C,this.SubAreaColor,4),this.SubClient.Start.Point)){v=this.SubClient.Start.Point;var A={X:v.X,Top:v.Top,Bottom:v.Bottom,PointIndex:v.DataIndex,Type:3,Item:v.KItem};m.push(A)}this.DrawRangeText(m),this.Canvas.restore()}}}},this.DrawRangeText=function(t){if(this.ShowRangeText&&0!=this.ShowRangeText.Enable)for(var e,a,i,r=this.BorderCache,n=this.IsMinuteChart(),s=this.HQChart.Period,o=0;o<t.length;++o){var h=t[o];if(0===h.Type||1==h.Type||3==h.Type){if(n){var l=ze.FormatDateString(h.Item.Date,"YYYY-MM-DD"),u=ze.FormatTimeString(h.Item.Time,"HH:MM");i="".concat(l," ").concat(u)}else{l=ze.FormatDateString(h.Item.Date,"YYYY-MM-DD"),u=null;ut.IsMinutePeriod(s,!0)?u=ze.FormatTimeString(h.Item.Time,"HH:MM"):(ut.IsSecondPeriod(s)||ut.IsTickPeriod(s))&&(u=ze.FormatTimeString(h.Item.Time,"HH:MM:SS")),i=u?"".concat(l," ").concat(u):l}if(3==h.Type){var c=this.ShowRangeText.SubPosition,d=this.ShowRangeText.SubBGColor,f=this.ShowRangeText.SubColor;this.Canvas.font=this.ShowRangeText.SubFont;var C=this.GetFontHeight()}else{c=this.ShowRangeText.Position,d=this.ShowRangeText.BGColor,f=this.ShowRangeText.Color;this.Canvas.font=this.ShowRangeText.Font;C=this.GetFontHeight()}var m=this.Canvas.measureText(i).width+4,D={Height:C,Width:m};0==h.Type||3==h.Type?m>h.X?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=h.X+2,D.X=h.X):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=h.X-2,D.X=h.X-m):1==h.Type&&(m>r.Right-h.X?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=h.X-2,D.X=h.X-m):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=h.X+2,D.X=h.X)),1==c?(a=h.Top+(h.Bottom-h.Top)/2,3==h.Type&&(a+=C),D.Y=a-C/2):2==c?(a=h.Bottom,D.Y=a-C/2):(a=h.Top,D.Y=a-C/2),d&&(this.Canvas.fillStyle=d,this.Canvas.fillRect(F(D.X),F(D.Y),L(D.Width),L(D.Height))),f&&(this.Canvas.fillStyle=f,this.Canvas.fillText(i,e,a,m))}}},this.DrawLines=function(t){if(ze.IsNonEmptyArray(t)){var e=this.LineWidth*I();this.Canvas.strokeStyle=this.LineColor,this.Canvas.lineWidth=e;for(var a=0;a<t.length;++a){var i=t[a],r=M(e,i.X);0==i.Type||1==i.Type?(this.LineDotted&&this.Canvas.setLineDash(this.LineDotted),this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke(),this.LineDotted&&this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke());var n=new Dt(r-3,i.Top,10,i.Bottom-i.Top);this.DragRect[a]={Rect:n,PointIndex:i.PointIndex,Type:i.Type}}}},this.PtInPaint=function(t,e){if(!ze.IsNonEmptyArray(this.DragRect))return null;for(var a=0;a<this.DragRect.length;++a){var i=this.DragRect[a],r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return(0,o.default)({Index:a,PointIndex:i.PointIndex,Type:i.Type,Self:this},"Type",i.Type)}return null},this.DrawArea=function(t,e,a,i,r,n){var s;if(a&&i&&this.StartDate&&this.EndDate&&(t&&e?s=[t,e]:!t&&e?s=[a,e]:t&&!e?s=[t,i]:a.Date>this.StartDate.Date&&i.Date<this.EndDate.Date&&(s=[a,i]),s&&2==s.length)){var o=s[0],h=s[1],l=F(o.X),u=F(h.X),c=u-l,d=o.Bottom-o.Top;this.Canvas.fillStyle=r,this.Canvas.fillRect(l,o.Top,c,d);var f={X:l,Y:o.Top,Right:u,Bottom:o.Top+d,Width:c,Height:d};ze.IsNumber(n)&&this.DragRect.push({Rect:f,Type:n})}}}function _e(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="DepthMapPaint",this.LineColor=xi.DepthMapPaint.LineColor,this.AreaColor=E(xi.DepthMapPaint.AreaColor),this.TextColor=xi.DepthMapPaint.TextColor,this.TextBGColor=xi.DepthMapPaint.TextBGColor,this.FrameID=0,this.ID=b(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.YRange,this.WidthRate=.8,this.IsShow=!0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),ze.IsObjectExist(t.ID)&&(this.ID=t.ID),t.IsShowCorssCursor&&(this.IsShowCorssCursor=t.IsShowCorssCursor),ze.IsNumber(t.WidthRate)&&(this.WidthRate=t.WidthRate)},this.Draw=function(){if(this.Data&&ze.IsNonEmptyArray(this.Data)&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.SubFrame[this.FrameID].Frame,a=e.ChartBorder,i=a.GetHeightEx(),r=a.GetRight(),n=a.GetTopEx(),s=a.GetBottomEx(),o=this.ChartBorder.Right*this.WidthRate;if(t){r=a.GetBottom(),n=a.GetRight(),s=a.GetLeft();o=this.Width;o>this.ChartBorder.Bottom&&(o=this.ChartBorder.Bottom)}var h={Left:r,Top:n,Right:r+o,Bottom:s,Height:i,Width:o};this.YRange={Max:null,Min:0};for(var l=0;l<this.Data.length;++l){var u=this.Data[l];this.CalculateYRange(u,this.YRange)}for(l=0;l<this.Data.length;++l){u=this.Data[l];u.Height>0&&u.Height<=1?h.Height=i*u.Height:h.Height=i,1==u.Type?(h.Top=n,h.Bottom=n+h.Height,this.DrawUpArea(u,h)):2==u.Type?(h.Bottom=s,h.Top=h.Bottom-h.Height,this.DrawDownArea(u,h)):(h.Top=n,h.Bottom=s,this.DrawDefaultArea(u,h))}}},this.CalculateYRange=function(t,e){for(var a in t.Data){var i=t.Data[a];(null==e.Max||e.Max<i.Y)&&(e.Max=i.Y),(null==e.Min||e.Min>i.Y)&&(e.Min=i.Y)}},this.GetXFromData=function(t,e,a){var i=e.Width*(t-a.Min)/(a.Max-a.Min);return e.Left+i},this.GetYFromData=function(t,e,a,i){if(i){var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Bottom-r}r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Top+r},this.DrawDefaultArea=function(t,e){for(var a=this.ChartFrame.SubFrame[this.FrameID].Frame,i=t.Range&&t.Range.Y?t.Range.Y:this.YRange,r=[],n=0;n<t.Data.length;++n){var s=t.Data[n],o=this.GetXFromData(s.Y,e,i);if(!(s.X>a.HorizontalMax||s.X<a.HorizontalMin)){var h=a.GetYFromData(s.X);r.push({X:o,Y:h})}}var l=t.LineColor?t.LineColor:this.LineColor,u=t.AreaColor?t.AreaColor:this.AreaColor;r.length>0&&(1==t.DrawType?this.DrawHLine(r,l,e):this.DrawLine(r,l,u,e))},this.DrawUpArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),s=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:s})}var o=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,o,h,e)},this.DrawDownArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),s=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:s})}var o=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,o,h,e)},this.DrawHLine=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;this.Canvas.strokeStyle=e,this.Canvas.beginPath();for(var r=0,n=0;n<t.length;++n){var s=t[n];i||(this.Canvas.moveTo(a.Left,s.Y),this.Canvas.lineTo(s.X,s.Y)),++r}r>0&&this.Canvas.stroke()},this.DrawLine=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=!0,s=0;for(var o in this.Canvas.strokeStyle=e,t){var h=t[o];n?(this.Canvas.beginPath(),r?this.Canvas.moveTo(h.Y,h.X):this.Canvas.moveTo(h.X,h.Y),n=!1):r?this.Canvas.lineTo(h.Y,h.X):this.Canvas.lineTo(h.X,h.Y),++s}s>0&&this.Canvas.stroke();var l=t[0],u=t[t.length-1];if(r?(this.Canvas.lineTo(u.Y,i.Left),this.Canvas.lineTo(l.Y,i.Left)):(this.Canvas.lineTo(i.Left,u.Y),this.Canvas.lineTo(i.Left,l.Y)),this.Canvas.closePath(),Array.isArray(a))if(r){var c=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());c.addColorStop(0,a[0]),c.addColorStop(1,a[1]),this.Canvas.fillStyle=c}else{var d=this.Canvas.createLinearGradient(i.Right,i.Top,i.Left,i.Top),f=1/a.length;for(o=0;o<a.length;++o)d.addColorStop(o*f,a[o]);this.Canvas.fillStyle=d}else this.Canvas.fillStyle=a;this.Canvas.fill()},this.GetYValueByXValue=function(t,e){for(var a=[],i=0,r=na[e],n=0;n<this.Data.length;++n){var s=this.Data[n];if(0==s.Type&&s.Data&&!(s.Data.length<0)&&0!=s.IsShowCorssCursor){for(var o=!1,h=0;h<s.Data.length;++h){var l=s.Data[h];if(i=parseInt(l.X*r),i==t){o=!0;var u={X:l.X,Y:l.Y,TextColor:s.TextColor?s.TextColor:this.TextColor,TextBGColor:s.TextBGColor?s.TextBGColor:this.TextBGColor};l.YText&&(u.YText=l.YText),a.push(u);break}}if(!o){var c=s.Data[0],d=s.Data[s.Data.length-1];t>c.X*r&&t<d.X*r&&a.push({X:null,Y:null,TextColor:s.TextColor?s.TextColor:this.TextColor,TextBGColor:s.TextBGColor?s.TextBGColor:this.TextBGColor})}}}return a}}function ke(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="KLineYAxisBGPaint",this.SplitData=[],this.Font=xi.KLineYAxisBGPaint.Font,this.FrameID=0,this.ID=b(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.IsShow=!0,this.BGWidth=50,this.LineColor=xi.KLineYAxisBGPaint.LineColor,this.DiffValutTextColor=xi.KLineYAxisBGPaint.DiffValutTextColor,this.DiffValueBGColor=xi.KLineYAxisBGPaint.DiffValueBGColor,this.KLineFrame,this.KLineData,this.Range={Max:null,Min:null},this.SetOption=function(t){t&&ze.IsNonEmptyArray(t.SplitData)&&(this.SplitData=t.SplitData)},this.Draw=function(){if(this.IsShow&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t){var e=!0===this.ChartFrame.IsHScreen;if(!e){this.KLineFrame=this.ChartFrame.SubFrame[this.FrameID].Frame;var a=this.KLineFrame.ChartBorder,i=this.KLineFrame.DataWidth,r=this.KLineFrame.DistanceWidth,n=this.KLineFrame.XPointCount,s=a.GetBorder(),o=s.LeftEx+r/2+xi.FrameLeftMargin,h=s.RightEx;this.KLineData=t.Data;for(var l=null,u=null,c=this.KLineData.DataOffset,d=0;c<this.KLineData.Data.length&&d<n;++c,++d,o+=i+r){var f=this.KLineData.Data[c];if(null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){var C=o+i;if(C>h)break;(null==l||l<f.High)&&(l=f.High),(null==u||u>f.Low)&&(u=f.Low)}}ze.IsNumber(l)&&ze.IsNumber(u)&&(this.Range.Max=l,this.Range.Min=u,this.DrawBackground())}}}},this.DrawBackground=function(){var t=this.Range.Min,e=this.KLineFrame.ChartBorder.GetBorder(),a=this.KLineFrame.GetYFromData(t,!1),i=e.Right,r=i+this.BGWidth;this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.textAlign="left";for(var n=0;n<this.SplitData.length;++n){var s=this.SplitData[n];if(s.Value+t>this.KLineFrame.HorizontalMax)break;var o=this.KLineFrame.GetYFromData(t+s.Value,!1);this.Canvas.fillStyle=s.Color,this.Canvas.fillRect(L(i),L(o),L(r-i),L(a-o)),s.Text&&s.TextColor&&(this.Canvas.fillStyle=s.TextColor,this.Canvas.fillText(s.Text,r+1,o)),a=o}var h=this.Range.Max-this.Range.Min,l=Hr(this.HQChart.Symbol),u=h.toFixed(l),c=this.KLineFrame.GetYFromData(this.Range.Max,!1);this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(i),F(c)),this.Canvas.lineTo(F(r),F(c)),this.Canvas.stroke();var d=this.Canvas.measureText(u).width+4,f=this.Canvas.measureText("擎").width+2,C={Left:r+1,Top:c-f,Width:d,Height:f};this.DiffValueBGColor&&(this.Canvas.fillStyle=this.DiffValueBGColor,this.Canvas.fillRect(C.Left,C.Top,C.Width,C.Height)),this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.DiffValutTextColor,this.Canvas.fillText(u,C.Left+1,c)}}function Ge(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="BackgroundPaint",this.IsDynamic=!1,this.IsCallbackDraw=!0,this.FrameID=0,this.Data,this.ID=b(),this.ChartSubFrame,this.ChartBorder,this.KData,this.Period,this.XPointCount=0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),ze.IsObjectExist(t.ID)&&(this.ID=t.ID)},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t&&t.Data&&(this.ChartSubFrame=this.ChartFrame.SubFrame[this.FrameID].Frame,this.ChartBorder=this.ChartSubFrame.ChartBorder,this.KData=t.Data,this.Period=this.HQChart.Period,this.KData&&!(this.KData.Data.length<=0))){var e=!0===this.ChartSubFrame.IsHScreen;this.XPointCount=this.ChartSubFrame.XPointCount;var a=this.ChartSubFrame.XPointCount,i=this.KData.Data[this.KData.DataOffset],r=this.KData.DataOffset+a-1;r>=this.KData.Data.length&&(r=this.KData.Data.length-1);var n=this.KData.Data[r],s=this.GetShowData(i,n);if(s&&!(s.length<=0)){var o=this.BuildKLineMap(),h=this.ChartBorder.GetBottomEx(),l=this.ChartBorder.GetTopEx(),u=this.ChartBorder.GetHeightEx();for(var c in e&&(l=this.ChartBorder.GetRightEx(),h=this.ChartBorder.GetLeftEx(),u=this.ChartBorder.GetWidthEx()),s){var d=s[c],f=this.GetBGCoordinate(d,o);if(f){if(Array.isArray(d.Color)){var C;C=e?this.Canvas.createLinearGradient(h,f.Left,l,f.Left):this.Canvas.createLinearGradient(f.Left,l,f.Left,h);var m=1/d.Color.length;for(var c in d.Color)C.addColorStop(c*m,d.Color[c]);this.Canvas.fillStyle=C}else this.Canvas.fillStyle=d.Color;e?this.Canvas.fillRect(L(h),L(f.Left),L(u),L(f.Width)):this.Canvas.fillRect(L(f.Left),L(l),L(f.Width),L(u))}}}}}},this.GetShowData=function(t,e){if(!ze.IsNonEmptyArray(this.Data))return null;for(var a=[],i=0;i<this.Data.length;++i){var r=this.Data[i],n={};r.Start.Date>=t.Date&&r.Start.Date<=e.Date&&(n.Start=r.Start),r.End.Date>=t.Date&&r.End.Date<=e.Date&&(n.End=r.End),r.Start.Date<t.Date&&r.End.Date>e.Date&&(n.Start=t,n.End=e),(n.Start||n.End)&&(n.Color=r.Color,a.push(n))}return a},this.BuildKLineMap=function(){var t=!0===this.ChartSubFrame.IsHScreen,e=this.ChartSubFrame.DataWidth,a=this.ChartSubFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+xi.FrameLeftMargin;t&&(i=this.ChartBorder.GetTop()+a/2+xi.FrameLeftMargin);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());for(var n={Data:new Map,Start:null,End:null},s=this.KData.DataOffset,o=0;s<this.KData.Data.length&&o<this.XPointCount;++s,++o,i+=e+a){var h=this.KData.Data[s],l=i,u=i+e;if(u>r)break;var c=l+(u-l)/2;0==o&&(n.XLeft=l),n.XRight=u;var d={Index:s,ShowIndex:o,X:c,Right:u,Left:l,Date:h.Date};if(ut.IsMinutePeriod(this.Period,!0)){var f="Date:".concat(h.Date," Time:").concat(h.Time);d.Time=h.Time}else f="Date:".concat(h.Date);n.Data.set(f,d),0==o&&(n.Start=d),n.End=d}return n},this.GetBGCoordinate=function(t,e){var a=null,i=null,r=ut.IsMinutePeriod(this.Period,!0),n=!1;if(r?t.Start&&t.End&&t.Start.Date==t.End.Date&&t.Start.Time==t.End.Time&&(n=!0):t.Start&&t.End&&t.Start.Date==t.End.Date&&(n=!0),n){if(r)var s="Date:".concat(t.Start.Date," Time:").concat(t.Start.Time);else s="Date:".concat(t.Start.Date);if(!e.Data.has(s))return null;var o=e.Data.get(s);return a=o.Left,i=o.Right,{Left:a,Right:i,Width:i-a}}if(t.Start){if(r)s="Date:".concat(t.Start.Date," Time:").concat(t.Start.Time);else s="Date:".concat(t.Start.Date);if(e.Data.has(s)){o=e.Data.get(s);a=o.Left}else if(r)if(t.Start.Date<e.Start.Date||t.Start.Date==e.Start.Date&&t.Start.Time<=e.Start.Time)a=e.Start.Left;else{var l,u=(0,h.default)(e.Data);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=c[1];if(d.Date>t.Start.Date||d.Date==t.Start.Date&&d.Time>t.Start.Time){a=d.Left;break}}}catch(S){u.e(S)}finally{u.f()}}else if(t.Start.Date<=e.Start.Date)a=e.Start.Left;else{var f,C=(0,h.default)(e.Data);try{for(C.s();!(f=C.n()).done;){c=f.value,d=c[1];if(d.Date>t.Start.Date){a=d.Left;break}}}catch(S){C.e(S)}finally{C.f()}}}else a=e.XLeft;if(t.End){if(r)s="Date:".concat(t.End.Date," Time:").concat(t.End.Time);else s="Date:".concat(t.End.Date);if(e.Data.has(s)){o=e.Data.get(s);i=o.Right}else if(r){if(t.End.Date<e.Start.Date||t.End.Date==e.Start.Date&&t.End.Time<e.Start.Time)return null;if(t.End.Date<e.End.Date||t.End.Date==e.End.Date&&t.End.Time>=e.End.Time)i=e.End.Right;else{var m,D=null,p=(0,h.default)(e.Data);try{for(p.s();!(m=p.n()).done;){c=m.value,d=c[1];if(d.Date>t.End.Date||d.Date==t.End.Date&&d.Time>t.End.Time){i=D;break}D=d.Right}}catch(S){p.e(S)}finally{p.f()}}}else{if(t.End.Date<e.Start.Date)return null;if(t.End.Date<=e.End.Date)i=e.End.Right;else{D=null;var v,g=(0,h.default)(e.Data);try{for(g.s();!(v=g.n()).done;){c=v.value,d=c[1];if(d.Date>t.End.Date){i=D;break}D=d.Right}}catch(S){g.e(S)}finally{g.f()}}}}else i=e.XRight;return null==a||null==i?null:{Left:a,Right:i,Width:i-a}}}function Ve(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="MinuteBackgroundPaint",this.IsDynamic=!0,this.IsCallbackDraw=!1,this.HQChart,this.Data,this.Font=xi.DefaultTextFont,this.TextColor=xi.DefaultTextColor,this.MerginTop=20,this.ID=b(),this.FrameID=0,this.SetOption=function(t){t&&(t.Font&&(this.Font=t.Font),ze.IsObjectExist(t.ID)&&(this.ID=t.ID),t.FrameID>0&&(this.FrameID=t.FrameID),t.MerginTop>0&&(this.MerginTop=t.MerginTop))},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.ChartFrame.SubFrame[this.FrameID];if(t&&t.Frame){var e=t.Frame,a=this.HQChart.SourceData;if(a){for(var i=e.XPointCount,r=0,n=null,s=new Map,o=a.DataOffset,h=0;o<a.Data.length&&h<i;++o,++h){var l=a.Data[o];l&&(l.Date!=r&&(r=l.Date,n?(n.Right=this.ChartFrame.GetXFromIndex(h-1),s.set(n.Date,n),n={Left:this.ChartFrame.GetXFromIndex(h),Date:l.Date}):n={Left:this.ChartFrame.GetXFromIndex(h),Date:l.Date}))}n&&!n.Right&&(n.Right=this.ChartFrame.GetXFromIndex(i-1),s.set(n.Date,n)),this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var u=e.ChartBorder.GetTopEx()+this.MerginTop;for(o=0;o<this.Data.length;++o){l=this.Data[o];if(s.has(l.Date)){n=s.get(l.Date);var c=n.Left+(n.Right-n.Left)/2;l.Font?this.Canvas.font=l.Font:this.Canvas.font=this.Font,l.TextColor?this.Canvas.fillStyle=l.TextColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(l.Text,c,u)}}}}}}}var He={MAIN_KLINE:1,OVERLAY_KLINE:2,MAIN_INDEX:3,OVERLAY_INDEX:4,OVERLAY_MINUTE:5,MAIN_MINUTE:6,MAIN_AVERAGE_MINUTE:7,MAIN_MINUTE_VOL:8};function Ye(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="DragMovePaint",this.DrawAfterTitle=!0,this.IsDynamic=!0,this.Info,this.IsShow=!1,this.Point,this.TextColor=xi.DragMovePaint.TextColor,this.Font=xi.DragMovePaint.Font,this.ReloadResource=function(t){this.TextColor=xi.DragMovePaint.TextColor,this.Font=xi.DragMovePaint.Font},this.Clear=function(){this.Info=null,this.IsShow=!1,this.Point=null},this.Draw=function(){if(this.Info&&this.IsShow&&this.Point){var t,e=this.Info.FrameID+1;this.Info.Type==He.MAIN_KLINE?t="K线:".concat(this.Info.Name,", 窗口:").concat(e):this.Info.Type==He.OVERLAY_KLINE?t="叠加K线:".concat(this.Info.Name,", 窗口:").concat(e):this.Info.Type==He.MAIN_INDEX?t="指标:".concat(this.Info.IndexName,", 窗口:").concat(e):this.Info.Type==He.OVERLAY_INDEX?t="叠加指标:".concat(this.Info.IndexName,", 窗口:").concat(e):this.Info.Type==He.OVERLAY_MINUTE?t="走势图, 叠加价格线:".concat(this.Info.Name,", 窗口:").concat(e):this.Info.Type==He.MAIN_MINUTE?t="走势图, 价格线:".concat(this.Info.Name,", 窗口:").concat(e):this.Info.Type==He.MAIN_AVERAGE_MINUTE?t="走势图, 均线:".concat(this.Info.Name,", 窗口:").concat(e):this.Info.Type==He.MAIN_MINUTE_VOL&&(t="走势图, 成交量:".concat(this.Info.Name,", 窗口:").concat(e)),t&&(this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(t,this.Point.X,this.Point.Y))}}}function Xe(){this.PlayList=[],this.Cache=[],this.MinLineHeight=40*I(),this.Height,this.Step=1,this.GetPlayList=function(t){for(var e=t.Canves,a=t.Right,i=t.Left,r=a-i,n=t.IsMoveStep,s=[],o=0,h=0;h<this.PlayList.length;++h){var l=this.PlayList[h],u=this.MinLineHeight;l.Height>this.MinLineHeight&&(u=l.Height);for(var c=!0,d=!1,f=0;f<l.Data.length;++f){var C=l.Data[f],m={X:C.X,Y:o,Text:C.Text,Color:C.Color,Height:u,Font:C.Font,Info:C.Info};s.push(m),n&&(f==l.Data.length-1&&this.Cache.length>0?(c=!1,C.TextWidth||(C.Font&&C.Font.Name?e.font=C.Font.Name:e.font=t.Font,C.TextWidth=e.measureText(m.Text+"擎擎").width),C.X>=C.TextWidth&&(c=!0)):0==f&&(d=!1,C.TextWidth||(C.Font&&C.Font.Name?e.font=C.Font.Name:e.font=t.Font,C.TextWidth=e.measureText(m.Text+"擎擎").width),C.X>r+C.TextWidth&&(d=!0)),C.X+=this.Step)}if(n&&c&&this.Cache.length>0){var D=this.Cache.shift(),p={X:0,Text:D.Text,Color:D.Color,Font:D.Font,Info:D.Info};l.Data.push(p)}if(n&&d&&l.Data.length>0){var v=l.Data.shift();this.OnItemPlayEnd(t.HQChart,v)}o+=u}return s},this.CacluatePlayLine=function(t){this.Height=t;var e=parseInt(t/this.MinLineHeight);if(this.PlayList.length<e)for(var a=e-this.PlayList.length,i=0;i<a;++i)this.PlayList.push({Data:[]});else if(this.PlayList.length>e){var r=this.PlayList.length-e;for(i=0;i<r;++i)for(var n=this.PlayList.pop(),s=0;s<n.Data.length;++s){var o=n.Data[s],h={Text:o.Text,Color:o.Color,Font:o.Font,Info:o.Info};this.Cache.unshift(h)}}l.Chart.Log("[BarrageList::CacluatePlayLine] LineCount=".concat(this.PlayList.length," Height=").concat(this.Height))},this.AddBarrage=function(t){for(var e in t){var a=t[e];this.Cache.push(a)}},this.OnItemPlayEnd=function(t,e){if(t.mapEvent.has(C.BARRAGE_PLAY_END)){var a=t.mapEvent.get(C.BARRAGE_PLAY_END);a.Callback&&a.Callback(a,e,this)}},this.Count=function(){return this.Cache.length}}function We(){this.newMethod=Fe,this.newMethod(),delete this.newMethod,this.ClassName="BarragePaint",this.IsAnimation=!0,this.IsEraseBG=!0,this.HQChart,this.Font=xi.Barrage.Font,this.TextColor=xi.Barrage.Color,this.FontHeight=xi.Barrage.Height,this.BarrageList=new Xe,this.IsMoveStep=!1,this.SetOption=function(t){t&&(t.Step>0&&(this.BarrageList.Step=t.Step),t.MinLineHeight&&(this.Barrage.MinLineHeight=t.MinLineHeight))},this.DrawHScreen=function(){var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx();this.ChartBorder.GetChartWidth();t!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(t),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:a,Left:e,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r){this.Canvas.save(),this.Canvas.translate(this.ChartBorder.GetChartHeight(),0),this.Canvas.rotate(90*Math.PI/180);for(var n=0;n<r.length;++n){var s=r[n];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,a-s.X,i+h)}this.Canvas.restore()}},this.Draw=function(){if(this.ChartFrame.IsHScreen)this.DrawHScreen();else{var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeight();i!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(i),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:e,Left:t,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r)for(var n=0;n<r.length;++n){var s=r[n];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,e-s.X,a+h)}}}}var Ue={LATEST_VALUE_ID:0,FIXED_VALUE_ID:1,PAGE_LAST_PRICE_ID:2,PAGE_DATA_INCREASE:3,PAGE_LAST_INDEX_VALUE_ID:4,PAGE_LAST_OVERLAY_INDEX_VALUE_ID:5};function ze(){this.ChartBorder,this.Frame,this.FrameSplitData,this.SplitCount=5,this.StringFormat=0,this.IsShowLeftText=!0,this.IsShowRightText=!0,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.GetEventCallback,this.GetKLineChartCallback,this.IntegerCoordinateSplit=function(t){var e=this.FrameSplitData.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=t.Max,i=t.Min,r=t.Max/e.FixInterval,n=t.Min/e.FixInterval;ze.IsFloat(r)&&(a=parseInt((r+.5).toFixed(0))*e.FixInterval),ze.IsFloat(n)&&(i=parseInt((n-.5).toFixed(0))*e.FixInterval),0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var s=0,o=i;o-a<1e-8;o+=e.FixInterval)++s;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=s,!0},this.Filter=function(t,e){if(this.SplitCount<=0||t.length<=0||t.length<=this.SplitCount)return t;var a=parseInt(t.length/this.SplitCount);a<=1&&(a=2);for(var i=[],r=0;r<t.length;r+=a)r+a>=t.length&&r!=t.length-1?i.push(t[t.length-1]):i.push(t[r]);if(2==this.SplitCount&&i.length>2)for(r=1;r<i.length-1;++r){var n=i[r];n.Message[0]=null,n.Message[1]=null}if(e){var s=!1;for(r=0;r<i.length;++r){n=i[r];if(Math.abs(n.Value)<1e-8){s=!0;break}}if(0==s){var o=new O;o.Value=0,o.Message[0]=null,o.Message[1]=null,i.push(o)}}return i},this.RemoveZero=function(t){for(var e=[!0,!0,!0,!0],a=0;a<t.length;++a){var i=t[a],r=i.Message[0];this.IsDecimalZeroEnd(r)||(e[0]=!1);r=i.Message[1];this.IsDecimalZeroEnd(r)||(e[1]=!1);r=i.Message[2];this.IsDecimalZeroEnd(r)||(e[2]=!1);r=i.Message[3];this.IsDecimalZeroEnd(r)||(e[3]=!1)}if(0!=e[0]||0!=e[1]||0!=e[2]||0!=e[3])for(a=0;a<t.length;++a){i=t[a];if(e[0]){r=i.Message[0];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[0]=r.replace(/[.][0]+/g,""))}if(e[1]){r=i.Message[1];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[1]=r.replace(/[.][0]+/g,""))}if(e[2]){r=i.Message[2];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[2]=r.replace(/[.][0]+/g,""))}if(e[3]){r=i.Message[3];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[3]=r.replace(/[.][0]+/g,""))}}},this.IsDecimalZeroEnd=function(t){if(null==t)return!0;if("number"==typeof t&&(t=t.toString()),"0"==t)return!0;var e=t.search(/[.]/);if(e<0)return!1;for(var a=e+1;a<t.length;++a){var i=t.charAt(a);if(i>="1"&&i<="9")return!1}return!0},this.GetKLinePageInfo=function(){if(!this.GetKLineChartCallback)return null;var t=this.GetKLineChartCallback();if(!t||!t.Data||!(t.Data.DataOffset>=0))return null;if(!ze.IsNonEmptyArray(t.Data.Data))return null;var e=t.Data.Data,a=t.Data.DataOffset,i=t.Data.DataOffset+t.ChartFrame.XPointCount-1;i>=e.length&&(i=e.length-1);var r={Start:{Item:e[a],Index:a},End:{Item:e[i],Index:i},IsLast:i==e.length-1};return r},this.CustomLatestIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.HQChart){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(C.ON_FORMAT_INDEX_Y_LABEL));var i=e.End.Index,r=2;ze.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,s=0;n<this.HQChart.ChartPaint.length;++n){var o=this.HQChart.ChartPaint[n];if(o.ChartFrame&&(o.GetItemData&&(o.ChartFrame.Identify==this.Frame.Identify||o.ChartFrame==this.Frame))){var h=o.GetItemData({Index:i});if(!ze.IsNonEmptyArray(h))continue;for(s=0;s<h.length;++s){var l=h[s],u=new O;u.Type=1,u.TextColor=xi.FrameLatestPrice.TextColor,u.LineColor=l.Color,u.LineType=-1,u.IsLast=e.IsLast,ze.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=l.Value;var c=ze.FormatValueString(l.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=c:u.Message[1]=c,!e.IsLast){var d={};e.IsLast||(d.EmptyBGColor=xi.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:d}}if(a){var f={PreventDefault:!1,Label:u,Data:l,IndexName:o.IndexName,FrameID:this.Frame.Identify};if(a.Callback(a,f,this),f.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}},this.CustomLatestOverlayIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.OverlayIndex&&ze.IsNonEmptyArray(this.OverlayIndex.ChartPaint)){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(C.ON_FORMAT_OVERLAY_INDEX_Y_LABEL));var i=e.End.Index,r=2;ze.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,s=0;n<this.OverlayIndex.ChartPaint.length;++n){var o=this.OverlayIndex.ChartPaint[n];if(o.ChartFrame&&o.GetItemData){var h=o.GetItemData({Index:i});if(ze.IsNonEmptyArray(h))for(s=0;s<h.length;++s){var l=h[s],u=new O;u.Type=1,u.TextColor=xi.FrameLatestPrice.TextColor,u.LineColor=l.Color,u.LineType=-1,u.IsLast=e.IsLast,ze.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=l.Value;var c=ze.FormatValueString(l.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=c:u.Message[1]=c,!e.IsLast){var d={};e.IsLast||(d.EmptyBGColor=xi.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:d}}if(a){var f={PreventDefault:!1,Label:u,Data:l,IndexName:o.IndexName,OverlayIdentify:this.OverlayIndex.Identify};if(a.Callback(a,f,this),f.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}}}function Ke(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.CoordinateType=0,this.Symbol,this.Data,this.FrameSplitData2,this.FloatPrecision=null,this.Period,this.KLineChart,this.Custom=[],this.SplitType=0,this.DefaultSplitType=0,this.DefaultYMaxMin,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.LastMaxMin,this.PercentageTextFormat=0,this.IsEnableDragY=function(){return 0==this.CoordinateType||1==this.CoordinateType},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Count=this.SplitCount,t.Max==t.Min&&(t.Max+=.01*t.Max,t.Min-=.01*t.Min);var e=this.FixedYMaxMin&&ze.IsNumber(this.FixedYMaxMin.Max)&&ze.IsNumber(this.FixedYMaxMin.Min);if(e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;ze.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),ze.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}t.Interval=(t.Max-t.Min)/(t.Count-1);var i=I(),r=this.Frame.ChartBorder.GetChartWidth(),n=r<450*i,s=Hr(this.Symbol);n&&Mr.IsSHSZIndex(this.Symbol)&&(s=0),null!=this.FloatPrecision&&(s=this.FloatPrecision),l.Chart.Log("[FrameSplitKLinePriceY::Operator] Max=".concat(t.Max," Min=").concat(t.Min," Count=").concat(t.Count," isPhoneModel=").concat(n," defaultfloatPrecision=").concat(s," ")),this.Frame.Logarithmic=null,this.Frame.MultiTextFormat=0;var o=!0;if(t.IsFixedMaxMin=e,t.IsFilter=o,ut.IsTickPeriod(this.Period))this.SplitTickData(t,s),o=t.IsFilter;else if(Ke.SplitCustom)Ke.SplitCustom(this,t,s),o=!1;else switch(this.CoordinateType){case 1:this.SplitPercentage(t,s,e)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,o=!1):this.SplitDefault(t,s,e);break;case 3:this.SplitIncrease(t,s)?o=!1:this.SplitDefault(t,s);break;case 4:this.SplitAverage(t,s),o=!1;break;case 5:this.SplitGoldenSection(t,s),o=!1;break;case 2:this.SplitLogarithmic(t,s)?o=!1:this.SplitDefault(t,s);break;default:1==this.SplitType?(this.SplitFixed(t,s),o=!1):2==this.SplitType?(this.SplitFixedV2(t,s),o=!1):this.SplitDefault(t,s,e);break}if(this.CustomCoordinate(s),o&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,!1)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),l.Chart.Log("[FrameSplitKLinePriceY::Operator] fixed . Max=".concat(t.Max," Min=").concat(t.Min," Count=").concat(t.Count)),this.GetEventCallback){var h=this.GetEventCallback(C.ON_SPLIT_YCOORDINATE);if(h&&h.Callback){var u={ID:this.Frame.Identify,Frame:this.Frame};h.Callback(h,u,this)}}},this.SplitTickData=function(t,e){switch(this.CoordinateType){case 1:this.SplitPercentage(t,e,t.IsFixedMaxMin)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,t.IsFilter=!1):this.SplitDefault(t,e,t.IsFixedMaxMin);break;default:3==this.SplitType?this.SplitTickPrice(t,e):this.SplitDefault(t,e,t.IsFixedMaxMin)}},this.SplitTickPrice=function(t,e){var a=this.KLineChart.GetAllPrice();for(var i in this.Frame.HorizontalInfo=[],a){var r=a[i];this.Frame.HorizontalInfo[i]=new O,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))}},this.SplitPercentage=function(t,e,a){var i=this.GetFirstOpenPrice();if(!ze.IsNumber(i))return!1;t.Max=(t.Max-i)/i,t.Min=(t.Min-i)/i,t.Interval=(t.Max-t.Min)/(t.Count-1),a||this.IntegerCoordinateSplit2(t);var r,n=(1+t.Min)*i,s=(1+t.Max)*i;if(xi.Frame&&xi.Frame.PercentageText){var o=xi.Frame.PercentageText;r={PriceColor:o.PriceColor,PercentageColor:o.PercentageColor,SplitColor:o.SplitColor,Font:o.Font}}for(var h=[],l=0;l<=t.Max;l+=t.Interval){var u=(l+1)*i;o=new O;if(o.Value=u,this.IsShowLeftText&&(o.Message[0]=u.toFixed(e)),this.IsShowRightText){var c=u.toFixed(e),d=(100*l).toFixed(2);d=ze.RemoveZero(d),d+="%",o.Message[1]=[d,c],o.ExtendData=r}h.push(o)}for(l=-t.Interval;l>=t.Min;l-=t.Interval){u=(l+1)*i;if(!(u<n||u>s)){o=new O;if(o.Value=u,this.IsShowLeftText&&(o.Message[0]=u.toFixed(e)),this.IsShowRightText){c=u.toFixed(e),d=(100*l).toFixed(2);d=ze.RemoveZero(d),d+="%",o.Message[1]=[d,c],o.ExtendData=r}h.push(o)}}return h.sort((function(t,e){return t.Value-e.Value})),this.Frame.HorizontalInfo=h,t.Min=n,t.Max=s,!0},this.SplitIncrease=function(t,e){var a=this.GetLast2ndClose();if(!ze.IsNumber(a))return!1;this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=xi.FrameSplitIncrease.Increase,r=[],n=a;n<t.Max;n*=1+i){var s=new O;s.Value=n;var o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}for(n=.9*a;n>t.Min;n*=1-i){s=new O;s.Value=n;o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}return this.Frame.HorizontalInfo=r,!0},this.SplitAverage=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];for(var r=xi.FrameSplitAverage.Count,n=(a-i)/r,s=0;s<=r;++s){var o=new O;o.Value=i+n*s;var h=o.Value.toFixed(e);this.IsShowLeftText&&(o.Message[0]=h),this.IsShowRightText&&(o.Message[1]=h),this.Frame.HorizontalInfo[s]=o}},this.SplitGoldenSection=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];var r=[],n=xi.FrameGoldenSection.Golden;for(var s in n){var o=(a-i)*n[s]+i;item=new O,item.Value=o;var h=o.toFixed(e);this.IsShowLeftText&&(item.Message[0]=h),this.IsShowRightText&&(item.Message[1]=h),r.push(item)}this.Frame.HorizontalInfo=r},this.SplitLogarithmic=function(t,e){var a=xi.FrameLogarithmic.MinInterval,i=this.GetFirstOpenPrice();if(!ze.IsNumber(i))return!1;for(var r=this.ChartBorder.GetHeightEx(),n=[.01,.02,.04,.08,.1,.2],s=n[n.length-1],o=0;o<n.length;++o){var h=n[o],u=i*h*(r/(t.Max-t.Min));if(u>a){s=h;break}}var c=[],d=i;o=s;do{var f={Start:d};d=i*(1+o),f.End=d,c.push(f),o+=s}while(d<t.Max);var C=d,m=[];d=i,o=s;do{f={End:d};d=i*(1-o),f.Start=d,m.push(f),o+=s}while(d>t.Min);var D=d;t.Max=C,t.Min=D,l.Chart.Log("[FrameSplitKLinePriceY::SplitLogarithmic] up, down",c,m),this.Frame.HorizontalInfo=[];f=new O;f.Value=i,f.Font=xi.FrameLogarithmic.OpenPriceFont;var p=f.Value.toFixed(e);for(var o in this.IsShowLeftText&&(f.Message[0]=p),this.IsShowRightText&&(f.Message[1]=p),this.Frame.HorizontalInfo.push(f),c){f=new O;f.Value=c[o].End;p=f.Value.toFixed(e);this.IsShowLeftText&&(f.Message[0]=p),this.IsShowRightText&&(f.Message[1]=p),this.Frame.HorizontalInfo.push(f)}for(var o in m){f=new O;f.Value=m[o].End;p=f.Value.toFixed(e);this.IsShowLeftText&&(f.Message[0]=p),this.IsShowRightText&&(f.Message[1]=p),this.Frame.HorizontalInfo.splice(0,0,f)}return this.Frame.Logarithmic={Up:c,Down:m,OpenPrice:i},!0},this.SplitDefault=function(t,e,a){a||this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=0,r=t.Min;i<t.Count;++i,r+=t.Interval)this.Frame.HorizontalInfo[i]=new O,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))},this.SplitFixed=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new O,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e))},this.SplitFixedV2=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new O,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e));t.IsFixedMaxMin||(0==e?(t.Max+=1,t.Min-=1):1==e?(t.Max+=.1,t.Min-=.1):2==e&&(t.Max+=.01,t.Min-=.01))},this.CustomCoordinate=function(t){var e,a;this.Frame.CustomHorizontalInfo=[];for(var i=0;i<this.Custom.length;++i){var r=this.Custom[i];if(r.Type==Ue.LATEST_VALUE_ID||r.Type==Ue.PAGE_DATA_INCREASE||r.Type==Ue.PAGE_LAST_PRICE_ID){var n=t;ze.IsNumber(r.FloatPrecision)&&r.FloatPrecision>=0&&(n=r.FloatPrecision);var s=this.GetLatestPrice(n,r);s&&(r.Type==Ue.LATEST_VALUE_ID?e=s:r.Type==Ue.PAGE_LAST_PRICE_ID?a=s:this.Frame.CustomHorizontalInfo.push(s))}else r.Type==Ue.FIXED_VALUE_ID?this.CustomFixedCoordinate(r):r.Type==Ue.PAGE_LAST_INDEX_VALUE_ID&&this.CustomLatestIndexDataCoordinate(r)}(e||a)&&(e&&a&&!0===a.IsLast?this.Frame.CustomHorizontalInfo.unshift(e):(e&&this.Frame.CustomHorizontalInfo.unshift(e),a&&this.Frame.CustomHorizontalInfo.push(a)))},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1],i=!0;if(2==e.Type){var r=this.GetKLinePageInfo();r&&(a=r.End.Item,i=r.IsLast)}var n=new O;n.Type=0,e&&ze.IsNumber(e.Type)&&(n.Type=e.Type),n.Value=a.Close,n.TextColor=xi.FrameLatestPrice.TextColor,n.LineType=2;var s=a.Close.toFixed(t);if(a.Close>a.Open?n.LineColor=xi.FrameLatestPrice.UpBarColor:a.Close<a.Open?n.LineColor=xi.FrameLatestPrice.DownBarColor:n.LineColor=xi.FrameLatestPrice.UnchagneBarColor,3==e.Type){r=this.GetKLinePageInfo();if(r&&ze.IsNumber(r.Start.Item.YClose)){var o=(r.End.Item.Close-r.Start.Item.YClose)/r.Start.Item.YClose*100;s="".concat(o.toFixed(2),"%");n.LineColor=o>0?xi.FrameLatestPrice.UpBarColor:o<0?xi.FrameLatestPrice.DownBarColor:xi.FrameLatestPrice.UnchagneBarColor,n.Value=r.End.Item.Close,i=r.IsLast}}if("HH:MM"==e.DateTime&&ut.IsMinutePeriod(this.Period,!0)){var h=ze.FormatTimeString(a.Time,e.DateTime),l=[{Text:s},{Text:h}];"left"==e.Position?n.Message[0]=l:n.Message[1]=l}else if(ze.IsBool(e.CountDown)){l=[{Text:s},{Type:1}];"left"==e.Position?n.Message[0]=l:n.Message[1]=l}else"left"==e.Position?n.Message[0]=s:n.Message[1]=s;if(ze.IsNumber(e.LineType)&&(n.LineType=e.LineType),ze.IsPlusNumber(e.LineWidth)&&(n.LineWidth=e.LineWidth),e.LineDash&&(n.LineDash=e.LineDash),0==e.IsShowLine&&(n.LineType=-1),n.IsLast=i,!i||1===e.PositionEx){var u={};i||(u.EmptyBGColor=xi.FrameLatestPrice.EmptyBGColor),1===e.PositionEx&&(u.Position=1),n.ExtendData={Custom:u}}return n},this.GetFirstOpenPrice=function(){if(!this.Data)return null;for(var t=this.Frame.XPointCount,e=this.Data.DataOffset,a=0;e<this.Data.Data.length&&a<t;++e,++a){var i=this.Data.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return ut.IsTickPeriod(this.Period)?i.YClose:i.Open}return null},this.GetLast2ndClose=function(){if(!this.Data)return null;if(this.Data.Data.length<=0)return null;var t=this.Frame.XPointCount,e=this.Data.DataOffset+t-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);for(var a=null,i=e,r=0;i>=0&&i<this.Data.Data.length;--i){var n=this.Data.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(0==r?a=n.Open:1==r&&(a=n.Close),++r,r>=2))break}return a},this.CustomFixedCoordinate=function(t){var e=Hr(this.Symbol);for(var a in t.Data){var i,r=t.Data[a],n=new O;n.Type=1,n.TextColor=r.TextColor,n.LineColor=r.Color,n.LineType=2,ze.IsNumber(t.LineType)&&(n.LineType=t.LineType),ze.IsPlusNumber(t.LineWidth)&&(n.LineWidth=t.LineWidth),t.LineDash&&(n.LineDash=t.LineDash),0==t.IsShowLine&&(n.LineType=-1),n.Value=r.Value,i=r.Text?r.Text:n.Value.toFixed(e),"left"==t.Position?n.Message[0]=i:n.Message[1]=i,1===t.PositionEx&&(n.ExtendData={Custom:{Position:1}}),this.Frame.CustomHorizontalInfo.push(n)}},this.IntegerCoordinateSplit2=function(t){var e=this.FrameSplitData2.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var r=0,n=i;n-a<1e-8;n+=e.FixInterval)++r;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=r,!0}}function Je(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.SplitCount=3,this.FloatPrecision=2,this.FLOATPRECISION_RANGE=[1,.1,.01,.001,1e-4],this.SplitType=0,this.DefaultSplitType=0,this.Custom=[],this.DefaultYMaxMin,this.EnableRemoveZero=!0,this.LineType=null,this.IgnoreYValue=null,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.IsBeforeData=!1,this.BeforeOpenData,this.IsAfterData=!1,this.AfterCloseData,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.OverlayIdentify,this.HQChart,this.OverlayIndex,this.IsEnableDragY=function(){return!0},this.GetFloatPrecision=function(t,e){if(t>this.FLOATPRECISION_RANGE[0])return e;if(e<0)return 2;for(;e<this.FLOATPRECISION_RANGE.length;++e)if(t>this.FLOATPRECISION_RANGE[e])break;return e},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Max==t.Min&&(0==t.Max?(t.Max=1,t.Min=-1):(t.Max+=.01*t.Max,t.Min-=.01*t.Min));var e=!1;if(this.FixedYMaxMin&&ze.IsNumber(this.FixedYMaxMin.Max)&&ze.IsNumber(this.FixedYMaxMin.Min)&&(e=!0),e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;ze.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),ze.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}if(this.Frame.YSpecificMaxMin?(t.Count=this.Frame.YSpecificMaxMin.Count,t.Interval=(t.Max-t.Min)/(t.Count-1)):1==this.SplitType||e?(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):2==this.SplitType?(t.Max=100,t.Min=0,t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit(t)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.HorizontalInfo=[],this.Frame.YSplitScale)for(var i in this.Frame.YSplitScale){var r=this.Frame.YSplitScale[i],n=new O;n.Value=r,ze.IsNumber(this.LineType)&&(n.LineType=this.LineType);var s=Math.abs(r);if(s<1e-10)n.Message[1]=0;else if(s<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])n.Message[1]=r.toExponential(2).toString();else{var o=this.GetFloatPrecision(s,this.FloatPrecision);n.Message[1]=ze.FormatValueString(r,o,this.LanguageID)}n.Message[0]=n.Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null),this.Frame.HorizontalInfo.push(n)}else for(i=0,r=t.Min;i<t.Count;++i,r+=t.Interval){n=new O;this.Frame.HorizontalInfo[i]=n,n.Value=r,ze.IsNumber(this.LineType)&&(n.LineType=this.LineType);var h=this.FormatValueString(r);this.Frame.HorizontalInfo[i].Message[0]=this.Frame.HorizontalInfo[i].Message[1]=h,0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null)}if(this.FilterIgnoreYValue(),this.CustomCoordinate(),1!=this.SplitType&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,t.Max>0&&t.Min<0)),this.RightFrameSplitY(),this.CallAcutionSplitY(this.SplitCount,t),this.EnableRemoveZero&&this.RemoveZero(this.Frame.HorizontalInfo),this.DynamicMessageText(),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),this.GetEventCallback){var l=this.GetEventCallback(C.ON_SPLIT_YCOORDINATE);if(l&&l.Callback){var u={ID:this.Frame.Identify,Frame:this.Frame};this.OverlayIdentify&&(u.OverlayIdentify=this.OverlayIdentify),l.Callback(l,u,this)}}},this.FormatValueString=function(t){var e;if(1==this.StringFormat){var a=this.FloatPrecision;ze.IsNumber(t)&&Math.abs(t)>1e3&&(a=0),e=ze.FormatValueString(t,a,this.LanguageID)}else{var i=Math.abs(t);if(i<1e-10)e=0;else if(i<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])e=t.toExponential(2).toString();else{a=this.GetFloatPrecision(i,this.FloatPrecision);e=ze.FormatValueString(t,a,this.LanguageID)}}return e},this.FilterIgnoreYValue=function(){if(this.IgnoreYValue&&!(this.IgnoreYValue.length<=0)){var t=new Set(this.IgnoreYValue);this.Frame.HorizontalInfo=this.Frame.HorizontalInfo.filter((function(e){return!t.has(e.Value)}))}},this.DynamicMessageText=function(){if(2==this.SplitType)for(var t=0;t<this.Frame.HorizontalInfo.length;++t){var e=this.Frame.HorizontalInfo[t];e.Message[0]&&(e.Message[0]+="%"),e.Message[1]&&(e.Message[1]+="%")}},this.CallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=this.GetCallAcutionSplitY(t,e);if(a){for(var i=0;i<this.Frame.HorizontalInfo.length;++i){var r=this.Frame.HorizontalInfo[i];a.IsBeforeData&&(r.Message[2]=r.Message[0],r.Message[0]=null),!a.IsAfterData||0!=this.ShareAfterVol&&2!=this.ShareAfterVol||(r.Message[3]=r.Message[1],r.Message[1]=null)}for(i=0;i<a.HorizontalInfo.length;++i){r=a.HorizontalInfo[i];this.Frame.HorizontalInfo.push(r)}}},this.GetCallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=1==this.IsBeforeData&&this.BeforeOpenData&&(2==this.BeforeOpenData.Ver||3==this.BeforeOpenData.Ver),i=1==this.IsAfterData&&this.AfterCloseData&&(2==this.AfterCloseData.Ver||3==this.AfterCloseData.Ver);if(a||i){var r=(e.Max-e.Min)/(t-1);if(a)var n=(this.BeforeOpenData.VolMax-this.BeforeOpenData.VolMin)/(t-1);if(i)var s=(this.AfterCloseData.VolMax-this.AfterCloseData.VolMin)/(t-1);for(var o=[],h=0;h<t;++h){var l=new O,u=r*h;if(l.Value=u,l.LineType=8,a){var c=n*h;l.Message[0]=this.FormatValueString(c)}if(i&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){var d=s*h;l.Message[1]=this.FormatValueString(d)}o.push(l)}return{HorizontalInfo:o,IsBeforeData:a,IsAfterData:i}}var f=!1;n=null;if(this.MultiDayBeforeOpenData&&ze.IsNonEmptyArray(this.MultiDayBeforeOpenData)){f=!0;var C=this.MultiDayBeforeOpenData[0];if(2==C.Ver||3==C.Ver)n=(C.VolMax-C.VolMin)/(t-1)}var m=!1;s=null;if(this.MultiDayAfterCloseData&&ze.IsNonEmptyArray(this.MultiDayAfterCloseData)){m=!0;C=this.MultiDayAfterCloseData[0];if(2==C.Ver||3==C.Ver)s=(C.VolMax-C.VolMin)/(t-1)}if(f||m){for(r=(e.Max-e.Min)/(t-1),o=[],h=0;h<t;++h){l=new O,u=r*h;l.Value=u,l.LineType=9;var D=!1;if(null!=n){c=n*h;l.Message[0]=this.FormatValueString(c),D=!0}if(null!=s&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){d=s*h;l.Message[1]=this.FormatValueString(d),D=!0}D&&o.push(l)}if(ze.IsNonEmptyArray(o))return{HorizontalInfo:o,IsBeforeData:f,IsAfterData:m}}return null},this.RightFrameSplitY=function(){if(this.Frame.RightFrame){var t=this.Frame.RightFrame;t.YSplitOperator&&t.YSplitOperator.Operator();for(var e=0;e<this.Frame.HorizontalInfo.length;++e){var a=this.Frame.HorizontalInfo[e],i=this.Frame.GetYFromData(a.Value),r=t.GetYData(i);a.Message[1]=ze.FormatValueString(r,this.FloatPrecision,this.LanguageID)}}},this.CustomCoordinate=function(){if(this.Frame.CustomHorizontalInfo=[],ze.IsNonEmptyArray(this.Custom))for(var t=0;t<this.Custom.length;++t){var e=this.Custom[t];e.Type==Ue.PAGE_LAST_INDEX_VALUE_ID?this.CustomLatestIndexDataCoordinate(e):e.Type==Ue.FIXED_VALUE_ID?this.CustomFixedCoordinate(e):e.Type==Ue.PAGE_LAST_OVERLAY_INDEX_VALUE_ID&&this.CustomLatestOverlayIndexDataCoordinate(e)}},this.CustomFixedCoordinate=function(t){if(ze.IsNonEmptyArray(t.Data))for(var e=0;e<t.Data.length;++e){var a,i=t.Data[e],r=new O;r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,ze.IsNumber(t.LineType)&&(r.LineType=t.LineType),0==t.IsShowLine&&(r.LineType=-1),r.Value=i.Value,a=i.Text?i.Text:r.Value.toFixed(2),"left"==t.Position?r.Message[0]=a:r.Message[1]=a,this.Frame.CustomHorizontalInfo.push(r)}}}function Qe(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Period,this.Symbol,this.MinTextDistance=50*I(),this.MinBarDistance=5,this.SplitDateTime=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,s=e;n<a&&s<this.Frame.Data.Data.length;++n,++s){i+=t,++r;var o=null;if(0==n){var h=ze.FormatDateString(this.Frame.Data.Data[s].Date,"MM-DD");o={Value:s-e,Text:h}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var l=ze.FormatTimeString(this.Frame.Data.Data[s].Time);o={Value:s-e,Text:l}}if(o){var u=new O;u.Value=o.Value,this.ShowText&&(u.Message[0]=o.Text),0==u.Value&&(u.LineType=-1),this.Frame.VerticalInfo.push(u),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitSecond=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,s=e;n<a&&s<this.Frame.Data.Data.length;++n,++s){i+=t,++r;var o=null;if(0==n){var h=ze.FormatDateString(this.Frame.Data.Data[s].Date,"MM-DD");o={Value:s-e,Text:h}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var l=ze.FormatTimeString(this.Frame.Data.Data[s].Time,"HH:MM:SS");o={Value:s-e,Text:l}}if(o){var u=new O;u.Value=o.Value,this.ShowText&&(u.Message[0]=o.Text),this.Frame.VerticalInfo.push(u),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=null,i=null,r=0,n=0,s=t,o=12;n<e&&s<this.Frame.Data.Data.length;++n,++s){var h=parseInt(this.Frame.Data.Data[s].Date/1e4),l=parseInt(this.Frame.Data.Data[s].Date/100)%100;if(i!=l&&++r,o<12||null!=a&&a==h&&null!=i&&i==l)i=l,++o;else{var u,c=new O;c.Value=s-t,null==a||a!=h?u=h.toString():null!=i&&i==l||(u=l.toString()+"月",u=Ai.GetText(u,this.LanguageID)),a=h,i=l,this.ShowText&&(c.Message[0]=u),0==c.Value&&(c.LineType=-1),this.Frame.VerticalInfo.push(c),o=0}}0==this.Period&&r<=2&&this.SplitShortDate()},this.SplitShortDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=!0,i=0,r=t,n=12;i<e&&r<this.Frame.Data.Data.length;++i,++r){var s=parseInt(this.Frame.Data.Data[r].Date/1e4);if(n<12)++n;else{var o=new O;o.Value=r-t,a?(u=s.toString(),a=!1):u=ze.FormatDateString(this.Frame.Data.Data[r].Date,"MM-DD"),this.ShowText&&(o.Message[0]=u),0==o.Value&&(o.LineType=-1),this.Frame.VerticalInfo.push(o),n=0}}if(1==this.Frame.VerticalInfo.length){var h=this.Frame.VerticalInfo[0],l=(r=h.Value+t,this.Frame.Data.Data[r]),u=ze.FormatDateString(l.Date,"YYYY-MM");this.ShowText&&(h.Message[0]=u)}},this.Operator=function(){if(null!=this.Frame.Data&&(Qe.SplitCustom?Qe.SplitCustom(this):ut.IsMinutePeriod(this.Period,!0)?this.SplitDateTime():ut.IsSecondPeriod(this.Period)||ut.IsTickPeriod(this.Period)?this.SplitSecond():this.SplitDate(),this.GetEventCallback)){var t=this.GetEventCallback(C.ON_SPLIT_XCOORDINATE);if(t&&t.Callback){var e={ID:this.Frame.Identify,Frame:this.Frame};t.Callback(t,e,this)}}},this.CreateCoordinateInfo=function(){return new O}}function $e(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.High=null,this.Low=null,this.YClose,this.Data,this.SourceData,this.OverlayChartPaint,this.SplitCount=7,this.Symbol,this.SplitType=0,this.DefaultSplitType=0,this.LimitPrice,this.Custom,this.RightTextFormat=0,this.BeforeOpenData,this.IsBeforeData=!1,this.AfterCloseData,this.IsAfterData=!1,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.AverageData,this.DayCount=1,this.GlobalOption,this.HQChart,this.IsEnableDragY=function(){return!1},this.Operator=function(){if(this.Frame.HorizontalInfo=[],this.Frame.CustomHorizontalInfo=[],this.Data){var t=this.GetMaxMin();if(this.Symbol&&Mr.IsUSA(this.Symbol.toUpperCase())||2==this.SplitType?this.USASplit(t):this.DefaultSplit(t),this.CustomCoordinate(),this.GetEventCallback){var e=this.GetEventCallback(C.ON_SPLIT_YCOORDINATE);if(e&&e.Callback){var a={ID:this.Frame.Identify,Frame:this.Frame};e.Callback(e,a,this)}}}},this.CustomCoordinate=function(){if(this.Custom){var t=Hr(this.Symbol);for(var e in this.Custom){var a=this.Custom[e];if(1==a.Type)this.CustomFixedCoordinate(a);else if(0==a.Type){var i=this.GetLatestPrice(t,a);i&&this.Frame.CustomHorizontalInfo.push(i)}}}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1];if(!ze.IsNumber(a)||!ze.IsNumber(this.YClose))return null;var i=new O;i.Type=0,i.Value=a,i.TextColor=xi.FrameLatestPrice.TextColor,i.LineType=2;var r=a.toFixed(t);if("HH:MM"==e.DateTime){var n=this.Frame.Data.Data[this.Frame.Data.Data.length-1],s=ze.FormatTimeString(n.Time,e.DateTime),o=[{Text:r},{Text:s}];"left"==e.Position?i.Message[0]=o:i.Message[1]=o}else"left"==e.Position?i.Message[0]=r:i.Message[1]=r;return a>this.YClose?i.LineColor=xi.FrameLatestPrice.UpBarColor:a<this.YClose?i.LineColor=xi.FrameLatestPrice.DownBarColor:i.LineColor=xi.FrameLatestPrice.UnchagneBarColor,ze.IsNumber(e.LineType)&&(i.LineType=e.LineType),ze.IsPlusNumber(e.LineWidth)&&(i.LineWidth=e.LineWidth),e.LineDash&&(i.LineDash=e.LineDash),0==e.IsShowLine&&(i.LineType=-1),1===e.PositionEx&&(i.ExtendData={Custom:{Position:1}}),i},this.CustomFixedCoordinate=function(t){for(var e=Hr(this.Symbol),a=0;a<t.Data.length;++a){var i,r=t.Data[a],n=new O;if(n.Type=1,n.TextColor=r.TextColor,n.LineColor=r.Color,n.LineType=2,ze.IsNumber(t.LineType)&&(n.LineType=t.LineType),ze.IsPlusNumber(t.LineWidth)&&(n.LineWidth=t.LineWidth),t.LineDash&&(n.LineDash=t.LineDash),0==t.IsShowLine&&(n.LineType=-1),1===t.PositionEx&&(n.ExtendData={Custom:{Position:1}}),ze.IsNumber(r.Increase)){if(!ze.IsNumber(this.YClose))continue;n.Value=this.YClose*(1+r.Increase)}else n.Value=r.Value;i=r.Text?r.Text:n.Value.toFixed(e),"left"==t.Position?n.Message[0]=i:n.Message[1]=i,this.Frame.CustomHorizontalInfo.push(n)}},this.GetCallAuctionMaxMin=function(t,e){for(var a in t.Data){var i=t.Data[a];i&&(ze.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==t.Ver&&ze.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!ze.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(!this.DayOffset)return this.MultiDayBeforeOpenData;if(!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayBeforeOpenData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayBeforeOpenData.slice(e,e+t);return a},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!ze.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(!this.DayOffset)return this.MultiDayAfterCloseData;if(!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayAfterCloseData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayAfterCloseData.slice(e,e+t);return a},this.GetMaxMin=function(){var t=this.YClose,e=this.YClose,a=this.Data,i=!1;if(this.SourceData&&(a=this.SourceData,i=!0),this.DayCount>1){var r=this.DayOffset.DataOffset,n=this.DayOffset.ShowDataCount;this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange&&(r=0,n=a.Data.length);for(var s=r,o=0;s<a.Data.length&&o<n;++s,++o){var h=null;if(i){var l=a.Data[s];h=l.Before?l.Before.Close:l.Close}else h=a.Data[s];null!=h&&(t<h&&(t=h),e>h&&(e=h))}if(this.AverageData)for(s=r,o=0;s<this.AverageData.Data.length&&o<n;++s,++o)null!=this.AverageData.Data[s]&&(t<this.AverageData.Data[s]&&(t=this.AverageData.Data[s]),e>this.AverageData.Data[s]&&(e=this.AverageData.Data[s]))}else{for(s=0;s<a.Data.length;++s){h=null;if(i){l=a.Data[s];h=l.Before?l.Before.Close:l.Close}else h=a.Data[s];null!=h&&(t<h&&(t=h),e>h&&(e=h))}if(this.AverageData)for(s=0;s<this.AverageData.Data.length;++s)null!=this.AverageData.Data[s]&&(t<this.AverageData.Data[s]&&(t=this.AverageData.Data[s]),e>this.AverageData.Data[s]&&(e=this.AverageData.Data[s]))}for(var s in this.OverlayChartPaint){l=this.OverlayChartPaint[s];var u=l.GetMaxMin();u.Max&&u.Max>t&&(t=u.Max),u.Min&&u.Min<e&&(e=u.Min)}1==this.SplitType&&this.LimitPrice&&(t<this.LimitPrice.Max&&(t=this.LimitPrice.Max),e>this.LimitPrice.Min&&(e=this.LimitPrice.Min)),ze.IsNumber(this.High)&&ze.IsNumber(this.Low)&&(t<this.High&&(t=this.High),e>this.Low&&(e=this.Low));u={Max:null,Min:null};this.IsAfterData&&this.AfterCloseData&&this.GetCallAuctionMaxMin(this.AfterCloseData,u),this.IsBeforeData&&this.BeforeOpenData&&this.GetCallAuctionMaxMin(this.BeforeOpenData,u);var c=this.GetMultiDayBeforeOpenData();if(c&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Left>0)for(s=0;s<c.length;++s){var d=c[s];this.GetCallAuctionMaxMin(d,u)}var f=this.GetMultiDayAfterCloseData();if(f&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Right>0)for(s=0;s<f.length;++s){d=f[s];this.GetCallAuctionMaxMin(d,u)}ze.IsNumber(u.Max)&&t<u.Max&&(t=u.Max),ze.IsNumber(u.Min)&&e>u.Min&&(e=u.Min);var C=this.GetOverlayMaxMin();return C&&(ze.IsNumber(C.Max)&&C.Max>t&&(t=C.Max),ze.IsNumber(C.Min)&&C.Min<e&&(e=C.Min)),{Max:t,Min:e}},this.GetOverlayMaxMin=function(){if(!this.HQChart)return null;if(!this.HQChart.Frame||!this.HQChart.Frame.SubFrame)return null;var t=this.HQChart.Frame.SubFrame[0];if(!t)return null;if(!ze.IsNonEmptyArray(t.OverlayIndex))return null;for(var e={Max:null,Min:null},a=0;a<t.OverlayIndex.length;++a){var i=t.OverlayIndex[a];if(i&&i.Frame){var r=i.Frame;if(1==r.IsShareY&&!1!==r.IsCalculateYMaxMin)for(var n=0;n<i.ChartPaint.length;++n){var s=i.ChartPaint[n],o=s.GetMaxMin();null!=o&&null!=o.Max&&null!=o.Min&&((null==e.Max||e.Max<o.Max)&&(e.Max=o.Max),(null==e.Min||e.Min>o.Min)&&(e.Min=o.Min))}}}return e},this.USASplit=function(t){var e=t.Max,a=t.Min;if(e==a)e+=.1*e,a-=.1*a;else{var i=I(),r=this.Frame.ChartBorder.GetHeight(),n=5*i*(e-a)/r;e+=n,a-=n,a<0&&(a=t.Min)}var s=this.SplitCount,o=(e-a)/(s-1),h=[1,.1,.01,.001,1e-4],l=Hr(this.Symbol);o<h[l]&&(o=h[l],e=a+o*s);for(var u=0;u<s;++u){var c=a+o*u;if(!this.YClose||c!=this.YClose){var d=new O;d.Value=c;var f=c.toFixed(l);if(this.IsShowLeftText&&(d.Message[0]=f),this.YClose){var C=100*(c/this.YClose-1);C>0?d.TextColor=xi.UpTextColor:C<0&&(d.TextColor=xi.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?d.Message[1]=f:d.Message[1]=ze.FormatValueString(C,2)+"%")}this.Frame.HorizontalInfo.push(d)}}if(this.YClose>a&&this.YClose<e){d=new O;d.Value=this.YClose,d.LineType=2,xi.FrameDotSplitPen&&(d.LineColor=xi.FrameDotSplitPen);f=this.YClose.toFixed(l);this.IsShowLeftText&&(d.Message[0]=f),this.IsShowRightText&&(1==this.RightTextFormat?d.Message[1]=f:d.Message[1]="0.00%"),this.Frame.HorizontalInfo.push(d)}this.Frame.HorizontalInfo.sort((function(t,e){return t.Value-e.Value})),this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a},this.DefaultSplit=function(t){var e=t.Max,a=t.Min;if(this.YClose==e&&this.YClose==a)e=this.YClose+.1*this.YClose,a=this.YClose-.1*this.YClose;else{var i=Math.max(Math.abs(this.YClose-e),Math.abs(this.YClose-a));e=this.YClose+i,a=this.YClose-i,a<0&&(a=t.Min)}var r=I(),n=this.Frame.ChartBorder.GetChartWidth(),s=n<450*r;l.Chart.Log("[FrameSplitMinutePriceY]max="+e+" min="+a+" isPhoneModel="+s);var o=this.SplitCount,h=(e-a)/(o-1),u=[1,.1,.01,.001,1e-4],c=Hr(this.Symbol);s&&Mr.IsSHSZIndex(this.Symbol)&&(c=0),h<u[c]&&(h=u[c],e=this.YClose+h*(o-1)/2,a=this.YClose-h*(o-1)/2);for(var d=0;d<o;++d){var f=a+h*d,C=new O;this.Frame.HorizontalInfo[d]=C,C.Value=f;var m=f.toFixed(c);if(this.IsShowLeftText&&(C.Message[0]=m),ze.IsNumber(this.YClose)){var D=100*(f/this.YClose-1);D>0?C.TextColor=xi.UpTextColor:D<0&&(C.TextColor=xi.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?C.Message[1]=m:C.Message[1]=ze.FormatValueString(D,2)+"%"),Math.abs(f-this.YClose)<1e-11&&(C.LineType=2,C.TextColor=xi.UnchagneTextColor,xi.FrameDotSplitPen&&(C.LineColor=xi.FrameDotSplitPen))}}this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a}}function je(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol=null,this.DayCount=1,this.DateFormat=0,this.Operator=function(){this.Frame.VerticalInfo=[];this.Frame.XPointCount;var t=this.Frame.ChartBorder.GetWidth(),e=!0===this.Frame.IsHScreen;e&&(t=this.Frame.ChartBorder.GetHeight()),t/=I();var a=Nr,i=a.GetCoordinateData(this.Symbol,t),r=i.Count,n=i.MiddleCount>0?i.MiddleCount:parseInt(r/2),s=i.Data;if(this.Frame.XPointCount=r*this.DayCount,this.Frame.MinuteCount=r,this.Frame.VerticalInfo=[],this.Frame.GlobalOption){var o=this.Frame.GlobalOption;ze.IsNumber(o.XDateFormat)&&(this.DateFormat=o.XDateFormat)}if(this.DayCount<=1){this.DayOffset.DataOffset=0,this.DayOffset.ShowDataCount=r,this.DayOffset.PageInfo=null;for(var h=0;h<s.length;++h){var l=new O;o=s[h];xi.Minute.FrameSplitTextColor&&(l.TextColor=xi.Minute.FrameSplitTextColor),l.Value=o[0],this.ShowText&&(l.Message[0]=o[3]),o[4]&&(l.LineColor=o[4]),this.Frame.VerticalInfo[h]=l}}else{var u=0,c=this.DayData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(u=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(c=this.DayOffset.ShowDayCount)),this.DayOffset.DataOffset=u*r,this.DayOffset.ShowDataCount=this.DayOffset.ShowDayCount*r,this.DayOffset.PageInfo={Day:[]};h=this.DayData.length-1-u;for(var d=0;h>=0&&d<c;--h,++d){l=new O;l.Value=d*r+n,l.LineType=-1,this.ShowText&&(l.Message[0]=this.FormatDate(this.DayData[h].Date),l.BG={Index:{Start:d*r+1,End:(d+1)*r-1},Date:this.DayData[h].Date}),this.Frame.VerticalInfo.push(l);l=new O;l.Value=(d+1)*r,this.Frame.VerticalInfo.push(l),this.DayOffset.PageInfo.Day.push({Date:this.DayData[h].Date,Index:h})}}if(this.GetEventCallback){var f=this.GetEventCallback(C.ON_SPLIT_XCOORDINATE);if(f&&f.Callback){var m={ID:this.Frame.Identify,Frame:this.Frame};f.Callback(f,m,this)}}},this.FormatDate=function(t){switch(this.DateFormat){case 1:return ze.FormatDateString(t,"MM/DD");case 2:return ze.FormatDateString(t,"MM/DD/W");default:return ze.FormatDateString(t,"MM-DD")}}}function Ze(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol,this.MinTextDistance=50*I(),this.MinBarDistance=5,this.Operator=function(){if(null!=this.Frame.Data&&null!=this.Frame.XData){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=0,i=t;a<e&&i<this.Frame.Data.Data.length;++a,++i){var r=new O;r.Value=i-t,this.ShowText&&(r.Message[0]=this.Frame.XData[a]),this.Frame.VerticalInfo.push(r),distance=0}}}}function qe(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.SplitCount=3,this.Symbol,this.LineType=3,this.Operator=function(){var t=this.Frame.VerticalRange;if(t){this.Frame.VerticalInfo=[];var e=2;this.Symbol&&(e=Hr(this.Symbol));var a=t.Max,i=t.Min;if(t.Bid)for(var r=(t.Bid.Max-i)/this.SplitCount,n=0;n<this.SplitCount;++n){var s=new O;s.Value=i+r*n,s.Value<=0||(ze.IsNumber(this.LineType)&&(s.LineType=this.LineType),this.ShowText&&(s.Message[0]=s.Value.toFixed(e)),this.Frame.VerticalInfo.push(s))}s=new O;if(s.Value=t.Center,this.Frame.VerticalInfo.push(s),t.Ask)for(r=(a-t.Ask.Min)/this.SplitCount,n=1;n<=this.SplitCount;++n){s=new O;s.Value=t.Ask.Min+r*n,ze.IsNumber(this.LineType)&&(s.LineType=this.LineType),this.ShowText&&(s.Message[0]=s.Value.toFixed(e)),this.Frame.VerticalInfo.push(s)}if(this.GetEventCallback){var o=this.GetEventCallback(C.ON_SPLIT_XCOORDINATE);if(o&&o.Callback){var h={ID:this.Frame.Identify,Frame:this.Frame};o.Callback(o,h,this)}}}}}function ta(){this.Frame,this.Value,this.Point,this.ClientPos,this.BeforOpeneData,this.AfterCloseData,this.X,this.Item,this.DataIndex,this.DayIndex,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.Operator=function(){return this.Item=null,this.DataIndex=null,this.DayIndex=null,2==this.ClientPos?this.GetBeforeOpenXIndex():3==this.ClientPos?this.GetAfterCloseXIndex():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpenXIndex():this.ClientPos>=300&&this.ClientPos<=399&&this.GetMultiDayAfterCloseXIndex()},this.GetBeforeOpenXIndex=function(){if(!ze.IsNumber(this.Value))return!1;if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=this.Frame.GetLeftExtendXData(this.Value,this.BeforeOpenData);if(t=parseInt(t.toFixed(0)),t>=0&&t<this.BeforeOpenData.Data.length){var e=this.BeforeOpenData.Data[t];if(ze.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.BeforeOpenData.Data.length&&(t=this.BeforeOpenData.Data.length-1);for(var a=-1,i=t;i>=0;--i){e=this.BeforeOpenData.Data[i];if(ze.IsNumber(e.Price)){a=i;break}}if(a<0)for(i=t+1;i<this.BeforeOpenData.Data.length;++i){e=this.BeforeOpenData.Data[i];if(ze.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetLeftExtendXFromIndex(a,this.BeforeOpenData),!0)},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!ze.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayBeforeOpenData.slice(e,e+t);return a},this.GetMultiDayBeforeOpenXIndex=function(){var t=this.GetMultiDayBeforeOpenData();if(!t||!ze.IsNonEmptyArray(t))return!1;var e=this.ClientPos-200;if(e<0||e>=t.length)return!1;var a=t[e],i=this.Frame.GetLeftExtendXData(this.Value,t);if(!i||!ze.IsNumber(i.DataIndex))return!1;var r=parseInt(i.DataIndex.toFixed(0));e=i.DayIndex;if(r>=0&&r<a.Data.length){var n=a.Data[r];if(ze.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=r,this.DayIndex=e,!0}r<0?r=0:r>=a.Data.length&&(r=a.Data.length-1);for(var s=-1,o=r;o>=0;--o){n=a.Data[o];if(n&&ze.IsNumber(n.Price)){s=o;break}}return!(s<0)&&(this.Item=n,this.DataIndex=s,this.DayIndex=e,this.X=this.Frame.GetLeftExtendXFromIndex(s,a),!0)},this.GetAfterCloseXIndex=function(){if(!ze.IsNumber(this.Value))return!1;if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=this.Frame.GetRightExtendXData(this.Value,this.AfterCloseData);if(t=parseInt(t.toFixed(0)),t>=0&&t<this.AfterCloseData.Data.length){var e=this.AfterCloseData.Data[t];if(ze.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.AfterCloseData.Data.length&&(t=this.AfterCloseData.Data.length-1);for(var a=-1,i=t;i>=0;--i){e=this.AfterCloseData.Data[i];if(ze.IsNumber(e.Price)){a=i;break}}if(a<0)for(i=t+1;i<this.AfterCloseData.Data.length;++i){e=this.AfterCloseData.Data[i];if(ze.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetRightExtendXFromIndex(a,this.AfterCloseData),!0)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!ze.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayAfterCloseData.slice(e,e+t);return a},this.GetMultiDayAfterCloseXIndex=function(){var t=this.GetMultiDayAfterCloseData();if(t&&ze.IsNonEmptyArray(t)){var e=this.ClientPos-300;if(!(e<0||e>=t.length)){var a=t[e],i=this.Frame.GetRightExtendXData(this.Value,t);if(i){var r=parseInt(i.DataIndex.toFixed(0));e=i.DayIndex;if(r>=0&&r<a.Data.length){var n=a.Data[r];if(ze.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=r,this.DayIndex=e,!0}r<0?r=0:r>=a.Data.length&&(r=a.Data.length-1);for(var s=-1,o=r;o>=0;--o){n=a.Data[o];if(n&&ze.IsNumber(n.Price)){s=o;break}}return!(s<0)&&(this.Item=n,this.DataIndex=s,this.DayIndex=e,this.X=this.Frame.GetRightExtendXFromIndex(s,a),!0)}}}}}function ea(){this.ClassName="ChartCorssCursor",this.Frame,this.Canvas,this.HPenColor=xi.CorssCursorHPenColor,this.HPenType=0,this.VPenColor=xi.CorssCursorVPenColor,this.VPenType=0,this.VLineType=0,this.Font=xi.CorssCursorTextFont,this.TextColor=xi.CorssCursorTextColor,this.TextBGColor=xi.CorssCursorBGColor,this.BorderColor=xi.CorssCursorBorderColor,this.XRangeBGColor=xi.CorssCursorXRangeBGColor,this.TextHeight=20,this.LastPoint,this.CursorIndex,this.IsOnlyDrawKLine=!1,this.IsOnlyDrawMinute=!1,this.IsFixXLastTime=!1,this.IsDrawXRangeBG=!1,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.ShowTextMode={Left:1,Right:1,Bottom:1},this.TextFormat={Right:0},this.IsShowCorss=!0,this.IsShow=!0,this.IsShowClose=!1,this.ClientPos=-1,this.CallAcutionXOperator,this.RightButton={Enable:!1,Rect:null,BGColor:xi.CorssCursor.RightButton.BGColor,PenColor:xi.CorssCursor.RightButton.PenColor,Icon:xi.CorssCursor.RightButton.Icon},this.Close=null,this.Status=0,this.ReloadResource=function(t){this.Font=xi.CorssCursorTextFont,this.HPenColor=xi.CorssCursorHPenColor,this.VPenColor=xi.CorssCursorVPenColor,this.TextColor=xi.CorssCursorTextColor,this.TextBGColor=xi.CorssCursorBGColor,this.BorderColor=xi.CorssCursorBorderColor,this.XRangeBGColor=xi.CorssCursorXRangeBGColor},this.GetCloseYPoint=function(t){if(!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];if(!i)return null;this.Close=i.Close;var r=this.Frame.GetYFromData(this.Close);return r},this.GetMinuteCloseYPoint=function(t){if(!ze.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];if(!ze.IsNumber(t))return null;this.Close=i;var r=this.Frame.GetYFromData(this.Close);return r},this.GetDateTimeRange=function(t,e){if(!ze.IsNumber(t))return null;t=parseInt(t);var a=this.StringFormatX.Data;if(!a.Data||a.Data.length<=0)return null;var i=a.DataOffset+t;if(i>=a.Data.length||i<0)return null;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return null;var r=this.Frame.SubFrame[0].Frame,n=r.DataWidth,s=r.DistanceWidth,o=r.XPointCount,h=a.Data[i];if(!h)return null;for(var l=1e6*h.Date,u=100*parseInt(h.Time/100),c=l+u,d=l+u+59,f=i,C=i;C<a.Data.length;++C){var m=a.Data[C],D=1e6*m.Date+m.Time;if(D>d)break;if(C-a.DataOffset>=o)break;f=C}var p=i;for(C=i;C>=0&&C>=a.DataOffset;--C){m=a.Data[C],D=1e6*m.Date+m.Time;if(D<c)break;p=C}var v={StartIndex:p,EndIndex:f};return v.XStart=this.Frame.GetXFromIndex(p-a.DataOffset),v.XEnd=this.Frame.GetXFromIndex(f-a.DataOffset),v.XStart-=(s+n)/2,v.XEnd+=(s+n)/2,v},this.FixMinuteLastTimeXPoint=function(t){if(!ze.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a<e.Data.length)return null;a=e.Data.length-1,a-=e.DataOffset;var i=this.Frame.GetXFromIndex(a);return{X:i,Index:a}},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{a=this.Frame.ChartBorder.GetBorder();this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")},this.Draw=function(){if(this.Status=0,this.RightButton.Rect=null,this.LastPoint){this.Close=null;var t=this.LastPoint.X,e=this.LastPoint.Y,a=this.PtInClient(t,e);if(this.PointY=null,this.PointY,this.ClientPos=a,!(a<=0))if(!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetBorder(),r=i.Left,n=i.Right,s=i.TopTitle,o=i.Bottom,h=this.Frame.ChartBorder.Right,l=i.ChartWidth;if(this.IsOnlyDrawKLine){if(t=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose){var u=this.GetCloseYPoint(this.CursorIndex);null!=u&&(e=u)}}else if(this.IsOnlyDrawMinute){u=this.GetMinuteCloseYPoint(this.CursorIndex);null!=u&&(e=u)}if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=t,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=a,this.CallAcutionXOperator.Operator()&&(t=this.CallAcutionXOperator.X)),this.IsFixXLastTime){var c=this.FixMinuteLastTimeXPoint(this.CursorIndex);c&&(t=c.X,this.CursorIndex=c.Index)}if(this.PointY=[[r,e],[n,e]],this.PointX=[[t,s],[t,o]],this.IsShowCorss){var d=null;this.IsDrawXRangeBG&&(d=this.GetDateTimeRange(this.CursorIndex));var f=I();if(1!=this.HPenType&&0!=this.HPenType||(this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*f,2*f]),this.Canvas.beginPath(),this.Canvas.moveTo(r,F(e)),this.Canvas.lineTo(n,F(e)),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*f,2*f]);else if(2==this.VPenType){var C=this.Frame.SubFrame[0].Frame.DataWidth;C>2*f&&(this.Canvas.lineWidth=C)}if(this.Canvas.beginPath(),1==this.VLineType)d&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(d.XStart,i.Top,d.XEnd-d.XStart,i.Bottom-i.Top)),this.Canvas.moveTo(F(t),i.Top),this.Canvas.lineTo(F(t),i.Bottom);else if(this.Frame.SubFrame.length>0)for(var m in this.Frame.SubFrame){var D=this.Frame.SubFrame[m].Frame,p=D.ChartBorder.GetBorder();s=p.TopTitle,o=p.Bottom,d&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(d.XStart,s,d.XEnd-d.XStart,o-s)),this.Canvas.moveTo(F(t),s),this.Canvas.lineTo(F(t),o)}else this.Canvas.moveTo(F(t),s),this.Canvas.lineTo(F(t),o);this.Canvas.stroke(),this.Canvas.restore()}this.Frame.GetXData(t);var v={},g=this.Frame.GetYData(e,v);(this.IsOnlyDrawMinute||this.IsShowClose)&&null!=this.Close&&(g=this.Close),this.StringFormatX.Value=this.CursorIndex,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=a,this.StringFormatY.Value=g,this.StringFormatY.RValue=v.RightYValue,this.StringFormatY.FrameID=v.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=a,this.Canvas.font=this.Font;var S=this.GetFontHeight();if(S>this.TextHeight&&(this.TextHeight=S),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Left>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Right>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var T=this.StringFormatY.Text;this.Canvas.font=this.Font;var x=this.Canvas.measureText(T).width+4,y={Y:e,YValue:g,FrameID:v.FrameID};if(this.Frame.ChartBorder.Left>=30&&1==this.ShowTextMode.Left?r<x?(this.DrawTextBGRect(F(2),F(e-this.TextHeight/2),L(x),L(this.TextHeight)),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,4,e,x)):(this.DrawTextBGRect(r-2,e-this.TextHeight/2,-x,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,r-4,e,x)):2==this.ShowTextMode.Left&&(this.DrawTextBGRect(r,e-this.TextHeight/2,x,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,r+2,e,x)),this.StringFormatY.PercentageText&&0==this.TextFormat.Right&&(T=this.StringFormatY.PercentageText+"%",x=this.Canvas.measureText(T).width+4),this.StringFormatY.RText){T=this.StringFormatY.RText;x=this.Canvas.measureText(T).width+4}var A=null;if(this.StringFormatY.RComplexText&&ze.IsNonEmptyArray(this.StringFormatY.RComplexText.Text)){x=0;A=this.StringFormatY.RComplexText;for(m=0;m<A.Text.length;++m){var b=A.Text[m],w=this.Canvas.measureText(b.Text).width+4;m>0&&ze.IsNumber(A.Space)&&(x+=A.Space),x+=w}}if(this.Frame.ChartBorder.Right>=30&&1==this.ShowTextMode.Right){var M=!1,E=null;if(v.FrameID>=0){D=this.Frame.SubFrame[v.FrameID];M=D.OverlayIndex.length>0,E=D.Interval}if(M&&x>E){var N=n+E;N>l&&(N=l);var P=N-2-x;this.DrawTextBGRect(P,e-this.TextHeight/2,x,this.TextHeight),A?this.DrawComplexText(P,e,A):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,N-4,e,x))}else if(h<x){P=l-2-x;this.DrawTextBGRect(P,e-this.TextHeight/2,x,this.TextHeight),A?this.DrawComplexText(P,e,A):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,l-4,e,x)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,l-2-x,this.TextHeight,this.TextHeight,y)}else{P=n+2;this.DrawTextBGRect(P,e-this.TextHeight/2,x,this.TextHeight),A?this.DrawComplexText(P,e,A):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,n+4,e,x)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,n+2,this.TextHeight,this.TextHeight,y)}if(this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var O=0;for(var m in this.StringFormatY.RExtendText){b=this.StringFormatY.RExtendText[m];var R="--.--";b.YText?R=b.YText:ze.IsNumber(b.Y)&&(R=b.Y.toFixed(0));var B=this.Canvas.measureText(R).width+4;h<B?(this.DrawTextBGRect(l-2-B,e+O+this.TextHeight/2,B,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=b.TextColor,this.Canvas.fillText(R,l-4,e+O+this.TextHeight,B)):(this.DrawTextBGRect(n+2,e+O+this.TextHeight/2,B,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=b.TextColor,this.Canvas.fillText(R,n+4,e+O+this.TextHeight,B)),O+=this.TextHeight}}}else if(2==this.ShowTextMode.Right){this.Canvas.fillStyle=this.TextBGColor;var _=n-x;this.DrawTextBGRect(_,e-this.TextHeight/2,x,this.TextHeight),A?this.DrawComplexText(_,e,A):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,_+2,e,x)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,_,this.TextHeight,this.TextHeight,y)}}if((1==this.ShowTextMode.Bottom||2==this.ShowTextMode.Bottom||10==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){T=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;x=this.Canvas.measureText(T).width+4;var k=o+2+this.TextHeight/2,G=o+2;if(2==this.ShowTextMode.Bottom)k=o-this.TextHeight/2-2,G=o-this.TextHeight-2;else if(10==this.ShowTextMode.Bottom){D=this.Frame.SubFrame[0].Frame;if(D.GetCorssCursorTop){c=D.GetCorssCursorTop();ze.IsNumber(c)&&(k=c+this.TextHeight/2,G=c)}}t-x/2<3?(this.DrawTextBGRect(t-1,G,x,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,t+1,k,x)):t+x/2>=n?(this.DrawTextBGRect(n-x,G,x,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,n-2,k,x)):(this.DrawTextBGRect(t-x/2,G,x,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,t,k,x))}if(v.FrameID>=0){D=this.Frame.SubFrame[v.FrameID];var V=!1;this.Frame.AutoRightBorder&&(V=!0);var H=n;for(var m in V&&(H=n+this.Frame.AuotRightWidth),this.Canvas.font=this.Font,D.OverlayIndex){b=D.OverlayIndex[m];if(!1!==b.Frame.IsShow){if(V||(H+=D.Interval),H+30>l)break;for(g=b.Frame.GetYData(e),m=2;m>=0;--m){T=ze.FormatValueString(g,m),x=this.Canvas.measureText(T).width+4;if(x<D.Interval)break}this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(H+2,e-this.TextHeight/2,x,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,H+4,e,x),V&&(H+=b.RightWidth.Width)}}}this.Status=1}else this.HScreenDraw()}},this.DrawComplexText=function(t,e,a){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";for(var i=t+2,r=0;r<a.Text.length;++r){var n=a.Text[r],s=this.Canvas.measureText(n.Text).width+4;n.Color?this.Canvas.fillStyle=n.Color:is.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(n.Text,i,e,s),r>0&&ze.IsNumber(a.Space)&&(i+=a.Space),i+=s}},this.DrawRightButton=function(t,e,a,i,r){this.Canvas.fillStyle=this.RightButton.BGColor;var n={Left:e-a,Top:t,Width:a,Height:i};this.RightButton.Rect=n,this.RightButton.Data=r,this.Canvas.fillRect(F(n.Left+1),F(n.Top),L(n.Width),L(n.Height));var s=I(),o=n.Top+3+(n.Height-6)/2,h=n.Left+3+(n.Width-6)/2;if(this.RightButton.Icon){var l=this.RightButton.Icon;this.Canvas.font="".concat(l.Size*s,"px ").concat(l.Family),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=l.Color,this.Canvas.fillText("",h,o)}else{this.Canvas.strokeStyle=this.RightButton.PenColor;var u=n.Left+3,c=n.Top+3;this.Canvas.save(),this.Canvas.linewidth=1*s,this.Canvas.beginPath(),this.Canvas.moveTo(F(u),F(o)),this.Canvas.lineTo(F(u+n.Width-6),F(o)),this.Canvas.moveTo(F(h),F(c)),this.Canvas.lineTo(F(h),F(c+n.Height-6)),this.Canvas.stroke(),this.Canvas.restore()}},this.PtInButton=function(t,e){if(!this.RightButton.Enable)return null;if(!this.RightButton.Rect)return null;var a=this.RightButton.Rect;return this.Canvas.beginPath(),this.Canvas.rect(a.Left,a.Top,a.Width,a.Height),this.Canvas.isPointInPath(t,e)?{Data:this.RightButton.Data,Rect:a}:void 0},this.DrawTextBGRect=function(t,e,a,i){this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(F(t),F(e),L(a),L(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(F(t),F(e),L(a),L(i)))},this.HScreenDraw=function(){var t=this.LastPoint.X,e=this.LastPoint.Y;this.IsOnlyDrawKLine&&(e=this.Frame.GetXFromIndex(this.CursorIndex));var a=this.Frame.ChartBorder.GetHScreenBorder(),i=a.Left,r=a.Right,n=a.Top,s=a.Bottom,o=this.Frame.ChartBorder.Bottom;if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=e,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=this.ClientPos,this.CallAcutionXOperator.Operator()&&(e=this.CallAcutionXOperator.X)),this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,s]],this.IsShowCorss){var h=I();if(this.Canvas.save(),this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*h,2*h]),this.Canvas.beginPath(),this.Canvas.moveTo(F(t),n),this.Canvas.lineTo(F(t),s),this.Canvas.stroke(),this.Canvas.restore(),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*h,2*h]);else if(2==this.VPenType){var l=this.Frame.SubFrame[0].Frame.DataWidth;l>2*h&&(this.Canvas.lineWidth=l)}if(this.Canvas.beginPath(),1==this.VLineType)this.Canvas.moveTo(i,F(e)),this.Canvas.lineTo(r,F(e));else if(this.Frame.SubFrame.length>0)for(var u in this.Frame.SubFrame){var c=this.Frame.SubFrame[u].Frame,d=c.ChartBorder.GetHScreenBorder();this.Canvas.moveTo(d.Left,F(e)),this.Canvas.lineTo(d.RightEx,F(e))}else this.Canvas.moveTo(i,F(e)),this.Canvas.lineTo(r,F(e));this.Canvas.stroke(),this.Canvas.restore()}var f=this.Frame.GetXData(e),C={},m=this.Frame.GetYData(t,C);this.StringFormatX.Value=f,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=this.ClientPos,this.StringFormatY.Value=m,this.StringFormatY.FrameID=C.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=this.ClientPos,this.Canvas.font=this.Font;var D=this.GetFontHeight();if(D>this.TextHeight&&(this.TextHeight=D),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Top>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Bottom>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var p=this.StringFormatY.Text;this.Canvas.font=this.Font;var v=this.Canvas.measureText(p).width+4;if(this.Frame.ChartBorder.Top>=30&&1==this.ShowTextMode.Left){var g=t,S=n;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,n>=v?(this.Canvas.fillRect(0,-this.TextHeight/2,-v,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,-2,0,v)):(this.Canvas.fillRect(v-n,-this.TextHeight/2,-v,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,v-n-2,0,v)),this.Canvas.restore()}else if(2==this.ShowTextMode.Left){g=t,S=n;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,v,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,2,0,v),this.Canvas.restore()}if(this.StringFormatY.RText){p=this.StringFormatY.RText;v=this.Canvas.measureText(p).width+4}if(this.Frame.ChartBorder.Bottom>=30&&1==this.ShowTextMode.Right){g=t,S=s;if(this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,o>v?(this.Canvas.fillRect(0,-this.TextHeight/2,v,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,2,0,v)):(this.Canvas.fillRect(o-v,-this.TextHeight/2,v,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,o-v+2,0,v)),this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var T=0;for(var u in this.StringFormatY.RExtendText){var x=this.StringFormatY.RExtendText[u],y="--.--";x.YText?y=x.YText:ze.IsNumber(x.Y)&&(y=x.Y.toFixed(0));var A=this.Canvas.measureText(y).width+4;if(this.Canvas.fillStyle=x.TextBGColor,o>A)this.Canvas.fillRect(0,T+this.TextHeight/2,A,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=x.TextColor,this.Canvas.fillText(y,2,T+this.TextHeight,A);else{var b=o-A;this.Canvas.fillRect(b,T+this.TextHeight/2,A,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=x.TextColor,this.Canvas.fillText(y,b+2,T+this.TextHeight,A)}T+=this.TextHeight}}this.Canvas.restore()}else if(2==this.ShowTextMode.Right){g=t,S=s;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,-v,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,-2,0,v),this.Canvas.restore()}}if((1===this.ShowTextMode.Bottom||10==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){p=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;v=this.Canvas.measureText(p).width+4,g=i;if(10==this.ShowTextMode.Bottom){c=this.Frame.SubFrame[0].Frame;if(c.GetCorssCursorTop){var w=c.GetCorssCursorTop();ze.IsNumber(w)&&(g=w)}}if(e-v/2<3){S=e;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(0,0,v,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,2,this.TextHeight/2,v),this.Canvas.restore()}else if(e+v/2>=s){S=e;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-v,0,v,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,-2,this.TextHeight/2,v),this.Canvas.restore()}else{S=e;this.Canvas.save(),this.Canvas.translate(g,S),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-v/2,0,v,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,0,this.TextHeight/2,v),this.Canvas.restore()}}this.Status=1}}function aa(){this.Frame,this.HQChart,this.Canvas,this.Data,this.Symbol,this.HPenType=0,this.VPenType=0,this.LineDash=xi.DepthCorss.LineDash,this.IsShowTooltip=!0,this.AskColor=xi.DepthCorss.AskColor.Line,this.BidColor=xi.DepthCorss.BidColor.Line,this.LineWidth=xi.DepthCorss.LineWidth,this.ClassName="DepthChartCorssCursor",this.Tooltip={Border:{Top:xi.DepthCorss.Tooltip.Border.Top,Left:xi.DepthCorss.Tooltip.Border.Left,Right:xi.DepthCorss.Tooltip.Border.Right,Bottom:xi.DepthCorss.Tooltip.Border.Bottom,ItemSpace:xi.DepthCorss.Tooltip.Border.ItemSpace},Font:xi.DepthCorss.Tooltip.Font,TextColor:xi.DepthCorss.Tooltip.TextColor,BGColor:xi.DepthCorss.Tooltip.BGColor},this.Font=xi.CorssCursorTextFont,this.TextColor=xi.CorssCursorTextColor,this.TextBGColor=xi.CorssCursorBGColor,this.TextHeight=20,this.LastPoint,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.IsShowCorss=!0,this.IsShow=!0,this.GetVol=function(t,e){if(!this.Data)return null;var a=e?this.Data.Asks:this.Data.Bids;if(!a||!Array.isArray(a)||a.length<=0)return null;for(var i in a){var r=a[i];if(r.Price==t)return r.Vol}return null},this.Draw=function(){if(this.Status=0,this.LastPoint&&this.Data&&this.IsShow){var t,e=this.LastPoint.X,a=this.LastPoint.Y;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),t=this.Canvas.isPointInPath(e,a),this.PointY=null,this.PointY,t&&!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=this.Frame.ChartBorder.GetTopTitle(),s=this.Frame.ChartBorder.GetBottom(),o=(this.Frame.ChartBorder.Right,this.Frame.ChartBorder.GetChartWidth(),this.Frame.GetXData(e)),h=this.Frame.GetXFromPrice(o);if(h){var l=this.GetVol(h.Price,h.IsAsk);if(a=this.Frame.GetYFromData(l),h.Vol=l,h.Y=a,this.PointY=[[i,a],[r,a]],this.PointX=[[e,n],[e,s]],this.IsShowCorss){h.IsAsk?this.Canvas.strokeStyle=this.AskColor:this.Canvas.strokeStyle=this.BidColor;var u=this.Canvas.lineWidth,c=I();this.Canvas.lineWidth=this.LineWidth*c;var d=this.Canvas.lineWidth;if(1==this.HPenType||0==this.HPenType){0==this.HPenType&&this.Canvas.setLineDash(this.LineDash);var f=M(d,a);this.Canvas.beginPath(),this.Canvas.moveTo(i,f),this.Canvas.lineTo(r,f),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])}0==this.VPenType&&this.Canvas.setLineDash(this.LineDash);var m=M(d,h.X);this.Canvas.beginPath(),this.Canvas.moveTo(m,n),this.Canvas.lineTo(m,s),this.Canvas.stroke(),0==this.VPenType&&this.Canvas.setLineDash([]),this.Canvas.lineWidth=u}if(this.HQChart){var D=this.HQChart.GetEventCallback(C.ON_DRAW_DEPTH_TOOLTIP);D&&D.Callback(D,h,this)}if(this.IsShowTooltip){var p=this.GetFormatTooltip(h);this.DrawTooltip(p,h)}}}}},this.GetFormatTooltip=function(t){var e=[],a=2;this.Symbol&&(a=Hr(this.Symbol));var i={Title:Ai.GetText("Depth-Price",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Price.toFixed(a),Color:this.Tooltip.TextColor};e.push(i);i={Title:Ai.GetText("Depth-Sum",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Vol.toFixed(4),Color:this.Tooltip.TextColor};return e.push(i),e},this.DrawTooltip=function(t,e){if(ze.IsNonEmptyArray(t)){this.Canvas.font=this.Tooltip.Font;for(var a=0,i=0,r=0,n=0;n<t.length;++n){var s=t[n];if(s){var o=!1;if(s.Title){var h=this.Canvas.measureText(s.Title).width;a<h&&(a=h),++i,o=!0}if(s.Text){h=this.Canvas.measureText(s.Text).width;a<h&&(a=h),++i,o=!0}o&&++r}}if(!(a<=0||i<=0)){this.Tooltip.LineHeight=this.Canvas.measureText("擎").width+2;var l=I(),u=this.Tooltip.Border;this.Tooltip.Width=a+(u.Left+u.Right)*l,this.Tooltip.Height=this.Tooltip.LineHeight*i+(u.Top+u.Bottom)*l+u.ItemSpace*l*(r-1);var c=this.Frame.ChartBorder.GetRight(),d=this.Frame.ChartBorder.GetTop(),f=e.X,C=e.Y-this.Tooltip.Height;f+this.Tooltip.Width>=c&&(f=e.X-this.Tooltip.Width),C<d&&(C=e.Y),this.Canvas.fillStyle=this.Tooltip.BGColor,this.Canvas.fillRect(f,C,this.Tooltip.Width,this.Tooltip.Height),this.Canvas.textBaseline="top",this.Canvas.textAlign="left";var m=u.Left*l+f,D=u.Top*l+C;for(n=0;n<t.length;++n){s=t[n],o=!1;s.Title&&(s.TitleColor?this.Canvas.fillStyle=s.TitleColor:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(s.Title,m,D),D+=this.Tooltip.LineHeight,o=!0),s.Text&&(s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(s.Text,m,D),D+=this.Tooltip.LineHeight,o=!0),o&&(D+=u.ItemSpace*l)}}}},this.PtInButton=function(t,e){return null}}function ia(){this.Frame,this.Canvas,this.Font=xi.DefaultTextFont,this.TextColor=xi.DefaultTextColor,this.IsEnableSplash=!1,this.SplashTitle="Loading",this.HQChart,this.Position=0,this.EnableSplash=function(t){if(this.IsEnableSplash=t,this.HQChart){var e=this.HQChart.GetEventCallback(C.ON_ENABLE_SPLASH_DRAW);if(e){var a={Enable:t};e.Callback(e,a,this)}}},this.SetTitle=function(t){this.SplashTitle=t},this.Draw=function(){if(this.IsEnableSplash)if(!0!==this.Frame.IsHScreen){var t=null,e=null;if(1==this.Position&&this.HQChart.Frame&&this.HQChart.Frame.SubFrame&&this.HQChart.Frame.SubFrame[0]){var a=this.HQChart.Frame.SubFrame[0].Frame;a&&(t=(a.ChartBorder.GetLeft()+a.ChartBorder.GetRight())/2,e=(a.ChartBorder.GetTop()+a.ChartBorder.GetBottom())/2)}if(!ze.IsNumber(t)||!ze.IsNumber(e))t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,t,e)}else this.HScreenDraw()},this.HScreenDraw=function(){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.save(),this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,0,0),this.Canvas.restore()}}function ra(){this.Data,this.Value,this.Text,this.Operator=function(){return!1},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!ze.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayBeforeOpenData.slice(e,e+t);return a},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!ze.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!ze.IsNumber(this.DayOffset.Offset)||!ze.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset,a=this.MultiDayAfterCloseData.slice(e,e+t);return a}}ze.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var r="",n=t.toFixed(e);if(e>0){var s=n.split(".")[1],o=n.split(".")[0];while(o.length>3)r=","+o.slice(-3)+r,o=o.slice(0,o.length-3);o&&(r=o+r+"."+s)}else{while(n.length>3)r=","+n.slice(-3)+r,n=n.slice(0,n.length-3);n&&(r=n+r)}return r},ze.FormatValueString=function(t,e,a){if(null==t||isNaN(t)){if(e>0){for(var i="-.",r=0;r<e;++r)i+="-";return i}return"--"}if(t<1e-11&&t>-1e-11)return"0";var n=Math.abs(t);return a===yi.LANGUAGE_ENGLISH_ID?n<1e4?t.toFixed(e):n<1e6?(t/1e3).toFixed(e)+"K":n<1e9?(t/1e6).toFixed(e)+"M":n<1e12?(t/1e9).toFixed(e)+"B":(t/1e12).toFixed(e)+"T":a===yi.LANGUAGE_TRADITIONAL_CHINESE_ID?n<1e4?t.toFixed(e):n<1e8?(t/1e4).toFixed(e)+"萬":n<1e12?(t/1e8).toFixed(e)+"億":(t/1e12).toFixed(e)+"萬億":n<1e4?t.toFixed(e):n<1e6||n<1e8?(t/1e4).toFixed(e)+"万":n<1e12?(t/1e8).toFixed(e)+"亿":(t/1e12).toFixed(e)+"万亿"},ze.FormatVolString=function(t,e){var a=Math.abs(t);return a<1e5?a.toFixed(0):a<1e7?(t/1e4).toFixed(1)+"万":a<1e8?(t/1e4).toFixed(0)+"万":a<1e9?(t/1e8).toFixed(2)+"亿":a<1e12?(t/1e8).toFixed(1)+"亿":(t/1e12).toFixed(1)+"万亿"},ze.FromatIntegerString=function(t,e,a){return t<1e4&&ze.IsInteger(t)&&(e=0),ze.FormatValueString(t,e,a)},ze.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},ze.MillisecondToString=function(t){return t<10?"00"+t.toString():t<100?"0"+t.toString():t.toString()},ze.FormatDateString=function(t,e,a){var i=parseInt(t/1e4),r=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return ze.NumberToString(r)+"-"+ze.NumberToString(n);case"MM/DD":return"".concat(ze.NumberToString(r),"/").concat(ze.NumberToString(n));case"MM/DD/W":var s=new Date(i,r-1,n),o=Ai.GetText(la[s.getDay()],a);return"".concat(ze.NumberToString(r),"/").concat(ze.NumberToString(n),"/").concat(o);case"YYYY-MM":return"".concat(i,"-").concat(ze.NumberToString(r));case"YYYY/MM/DD":return i.toString()+"/"+ze.NumberToString(r)+"/"+ze.NumberToString(n);case"YYYY/MM/DD/W":s=new Date(i,r-1,n),o=Ai.GetText(la[s.getDay()],a);return i.toString()+"/"+ze.NumberToString(r)+"/"+ze.NumberToString(n)+"/"+o.toString();case"DD/MM/YYYY":return ze.NumberToString(n)+"/"+ze.NumberToString(r)+"/"+i.toString();default:return i.toString()+"-"+ze.NumberToString(r)+"-"+ze.NumberToString(n)}},ze.FormatTimeString=function(t,e){if("HH:MM:SS"==e){var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return ze.NumberToString(a)+":"+ze.NumberToString(i)+":"+ze.NumberToString(r)}if("hh:mm"==e){a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return ze.NumberToString(a)+":"+ze.NumberToString(i)}if("HH:MM"==e){a=parseInt(t/100),i=t%100;return ze.NumberToString(a)+":"+ze.NumberToString(i)}if("HH:MM:SS.fff"==e){var n=t%1e3,s=parseInt(t/1e3);a=parseInt(s/1e4),i=parseInt(s%1e4/100),r=s%100;return"".concat(ze.NumberToString(a),":").concat(ze.NumberToString(i),":").concat(ze.NumberToString(r),".").concat(ze.MillisecondToString(n))}if(t<1e4){a=parseInt(t/100),i=t%100;return ze.NumberToString(a)+":"+ze.NumberToString(i)}a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return ze.NumberToString(a)+":"+ze.NumberToString(i)+":"+ze.NumberToString(r)},ze.FormatReportDateString=function(t){var e,a=parseInt(t/1e4),i=parseInt(t/100)%100;switch(i){case 3:e="一季度报";break;case 6:e="半年报";break;case 9:e="三季度报";break;case 12:e="年报";break}return a.toString()+e},ze.FormatDateTimeString=function(t,e,a){var i=t.split(" ");if(i.length<2)return"";var r="";if(e){var n=parseInt(i[0]),s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=n%100,l=s.toString()+"-"+(o<10?"0"+o.toString():o.toString())+"-"+(h<10?"0"+h.toString():h.toString());r+=l}if(a){var u=parseInt(i[1]);if(u<1e4){var c=u%100,d=parseInt(u/100);l=ze.NumberToString(d)+":"+ze.NumberToString(c);r.length>0&&(r+=" "),r+=l}else{d=parseInt(u/1e4),c=parseInt(u%1e4/100);var f=u%100;l=ze.NumberToString(d)+":"+ze.NumberToString(c)+":"+ze.NumberToString(f);r.length>0&&(r+=" "),r+=l}}return r},ze.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e||t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},ze.IsNumber=function(t){return null!=t&&!isNaN(t)},ze.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},ze.IsInteger=function(t){return"number"===typeof t&&t%1===0},ze.IsObjectExist=function(t){return void 0!==t&&null!=t},ze.IsBool=function(t){return!0===t||!1===t},ze.IsString=function(t){var e=(0,s.default)(t);return"string"==e},ze.IsNonEmptyArray=function(t){return!!t&&(!!Array.isArray(t)&&t.length>0)},ze.IsFloat=function(t){return void 0!==t&&(null!=t&&(!isNaN(t)&&t!=parseInt(t)))},ze.RemoveZero=function(t){while(t.length>0){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var na=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10];function sa(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Symbol,this.FrameID,this.Frame,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.YClose,this.PercentageText,this.RValue,this.RText,this.RComplexText,this.Point,this.ClientPos=-1,this.ExtendChartPaint,this.RExtendText=[],this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ShareAfterVol=0,this.PriceFormatType=0,this.DataFormatType=0,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.BeforeOpenData)return!1;var e={Max:this.BeforeOpenData.VolMax,Min:this.BeforeOpenData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetLeftExtendYData(a,!1,{Range:e});ze.IsNumber(i)&&(this.RText=this.Text=ze.FormatValueString(i,2,this.LanguageID))},this.GetAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.AfterCloseData)return!1;var e={Max:this.AfterCloseData.VolMax,Min:this.AfterCloseData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetRightExtendYData(a,!1,{Range:e});ze.IsNumber(i)&&(this.RText=this.Text=ze.FormatValueString(i,2,this.LanguageID))},this.GetMultiDayBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayBeforeOpenData();if(e&&ze.IsNonEmptyArray(e)){var a=this.ClientPos-200;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,s=t.Frame.GetLeftExtendYData(n,!1,{Range:r});ze.IsNumber(s)&&(this.RText=this.Text=ze.FormatValueString(s,2,this.LanguageID))}},this.GetMultiDayAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayAfterCloseData();if(e&&ze.IsNonEmptyArray(e)){var a=this.ClientPos-300;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,s=t.Frame.GetRightExtendYData(n,!1,{Range:r});ze.IsNumber(s)&&(this.RText=this.Text=ze.FormatValueString(s,2,this.LanguageID))}},this.Operator=function(){if(this.RText=null,this.RComplexText=null,this.RExtendText=[],ze.IsString(this.RValue)&&(this.RText=this.RValue),!this.Value)return!1;this.PercentageText=null;var t=2;if(0==this.FrameID){t=Hr(this.Symbol);1==this.PriceFormatType?this.Text=ze.FormatValueThousandsString(this.Value,t):this.Text=this.Value.toFixed(t),this.YClose>0&&(this.PercentageText=(100*(this.Value-this.YClose)/this.YClose).toFixed(2)),this.GetExtendPaintData(t)}else 1==this.FrameID?(1==this.DataFormatType?(this.Text=ze.FormatValueThousandsString(this.Value,t),ze.IsNumber(this.RValue)&&(this.RText=ze.FormatValueString(this.RValue,t,this.LanguageID))):(this.Text=ze.FormatValueString(this.Value,t,this.LanguageID),ze.IsNumber(this.RValue)&&(this.RText=ze.FormatValueString(this.RValue,t,this.LanguageID))),2==this.ClientPos?this.GetBeforeOpen():3==this.ClientPos?0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetAfterClose():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpen():this.ClientPos>=300&&this.ClientPos<=399&&(0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetMultiDayAfterClose())):1==this.DataFormatType?this.Text=ze.FormatValueThousandsString(this.Value,t):this.Text=ze.FormatValueString(this.Value,t,this.LanguageID);if(this.GetEventCallback){var e=this.GetEventCallback(C.ON_FORMAT_CORSSCURSOR_Y_TEXT);if(e){var a={Value:this.Value,FrameID:this.FrameID};e.Callback(e,a,this)}}return!0},this.GetExtendPaintData=function(t){var e=parseInt(this.Value*na[t]);for(var a in this.ExtendChartPaint){var i=this.ExtendChartPaint[a];if("DepthMapPaint"==i.ClassName&&i.FrameID==this.FrameID){var r=i.GetYValueByXValue(e,t);for(var n in r)this.RExtendText.push(r[n])}}}}function oa(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.DateFormatType=0,this.LanguageID=0,this.Operator=function(){if(!ze.IsNumber(this.Value))return!1;if(!this.Data)return!1;var t=this.Value;if(t=parseInt(t.toFixed(0)),this.Data.DataOffset+t>=this.Data.Data.length)return!1;var e=this.Data.Data[this.Data.DataOffset+t],a="YYYY-MM-DD";if(1==this.DateFormatType?a="YYYY/MM/DD":2==this.DateFormatType?a="YYYY/MM/DD/W":3==this.DateFormatType&&(a="DD/MM/YYYY"),this.Text=ze.FormatDateString(e.Date,a,this.LanguageID),ut.IsMinutePeriod(this.Data.Period,!0)){var i=ze.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}else if(ut.IsSecondPeriod(this.Data.Period)){i=ze.FormatTimeString(e.Time,"HH:MM:SS");this.Text=this.Text+"  "+i}else if(ut.IsTickPeriod(this.Data.Period)){i=ze.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}if(this.GetEventCallback){var r=this.GetEventCallback(C.ON_FORMAT_CORSSCURSOR_X_TEXT);if(r){var n={Item:e,Period:this.Data.Period,Date:e.Date,Time:e.Time,Index:this.Data.DataOffset+t};r.Callback(r,n,this)}}return!0}}function ha(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Frame,this.Symbol,this.Point,this.ClientPos=-1,this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetLeftExtendXData(t,this.BeforeOpenData);if(e=parseInt(e.toFixed(0)),e>=this.BeforeOpenData.Data.length)return!1;var a=this.BeforeOpenData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.BeforeOpenData),!0},this.GetAfterClose=function(){if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetRightExtendXData(t,this.AfterCloseData);if(e=parseInt(e.toFixed(0)),e>=this.AfterCloseData.Data.length)return!1;var a=this.AfterCloseData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.AfterCloseData),!0},this.GetMultiDayBeforeOpen=function(){var t=this.GetMultiDayBeforeOpenData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Left<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetLeftExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length||a.DataIndex<0)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.GetMultiDayAfterClose=function(){var t=this.GetMultiDayAfterCloseData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Right<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetRightExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.FormatCallAcutionDateTime=function(t,e){var a=t.Time;return 1==e.Ver?ze.FormatTimeString(a,"HH:MM"):ze.FormatTimeString(a,"HH:MM:SS")},this.Operator=function(){if(2==this.ClientPos)return this.GetBeforeOpen();if(3==this.ClientPos)return this.GetAfterClose();if(this.ClientPos>=200&&this.ClientPos<=299)return this.GetMultiDayBeforeOpen();if(this.ClientPos>=300&&this.ClientPos<=399)return this.GetMultiDayAfterClose();if(!ze.IsNumber(this.Value))return!1;var t=Math.abs(this.Value);t=parseInt(t.toFixed(0));var e=t;this.Frame&&this.Frame.MinuteCount&&(e=t%this.Frame.MinuteCount);var a=Er,i=a.GetTimeData(this.Symbol);if(!i)return!1;e<0?e=0:e>i.length&&(e=i.length-1),this.Frame&&t>=this.Frame.XPointCount&&(e=i.length-1);var r=i[e];if(this.Text=ze.FormatTimeString(r),this.GetEventCallback){var n=this.GetEventCallback(C.ON_FORMAT_CORSSCURSOR_X_TEXT);if(n){var s={Time:r,Index:e};n.Callback(n,s,this)}}return!0}}var la=["日","一","二","三","四","五","六"];function ua(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.ClassName="HistoryDataStringFormat",this.Symbol,this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor,this.VolColor=xi.Title.VolColor,this.AmountColor=xi.Title.AmountColor,this.TurnoverRateColor=xi.Title.TurnoverRateColor,this.PositionColor=xi.Title.PositionColor,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.LineCount=0,this.LineHeight=xi.PCTooltip.LineHeight,this.Width=157,this.Height=5*this.LineHeight,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;this.Width=157,this.LanguageID==yi.LANGUAGE_ENGLISH_ID&&(this.Width=180);var e=new Date(parseInt(t.Date/1e4),t.Date/100%100-1,t.Date%100),a=ze.FormatDateString(t.Date),i=Ai.GetText(la[e.getDay()],this.LanguageID),r=ut.IsTickPeriod(this.Value.ChartPaint.Data.Period);ut.IsMinutePeriod(this.Value.ChartPaint.Data.Period,!0)?i=ze.FormatTimeString(t.Time):(ut.IsSecondPeriod(this.Value.ChartPaint.Data.Period)||r)&&(i=ze.FormatTimeString(t.Time,"HH:MM:SS"));var n=this.Symbol.toUpperCase(),s=Hr(this.Symbol),o=null;if(t.YClose>0&&(o=(t.Close-t.YClose)/t.YClose*100),r){var h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Price",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Open,t.YClose)+";'>"+t.Open.toFixed(s)+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==o?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(o,0)+";'>"+o.toFixed(2)+"%</span><br/>");this.LineCount=4}else if(t.IsNonTrade){h="<span class='tooltip-title'>".concat(a,"&nbsp&nbsp").concat(i,"</span>");this.LineCount=2}else{var l=t.Vol;n&&Mr.IsSHSZ(n)&&(l/=100);var u=null;this.GetEventCallback&&(u=this.GetEventCallback(C.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR));h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Open",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Open",t.Open,t.YClose,t,u)+";'>"+(ze.IsNumber(t.Open)?t.Open.toFixed(s):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-High",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-High",t.High,t.YClose,t,u)+";'>"+(ze.IsNumber(t.High)?t.High.toFixed(s):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Low",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Low",t.Low,t.YClose,t,u)+";'>"+(ze.IsNumber(t.Low)?t.Low.toFixed(s):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Close",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Close",t.Close,t.YClose,t,u)+";'>"+(ze.IsNumber(t.Close)?t.Close.toFixed(s):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Vol",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.VolColor+";'>"+(ze.IsNumber(l)?ze.FormatValueString(l,2,this.LanguageID):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Amount",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.AmountColor+";'>"+(ze.IsNumber(t.Amount)?ze.FormatValueString(t.Amount,2,this.LanguageID):"--")+"</span><br/><span class='tooltip-con'>"+Ai.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==o?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(o,0)+";'>"+o.toFixed(2)+"%</span><br/>");if(this.LineCount=8,Mr.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var c=t.Vol/t.FlowCapital*100;h+="<span class='tooltip-con'>"+Ai.GetText("DivTooltip-Exchange",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.TurnoverRateColor+";'>"+c.toFixed(2)+"%</span><br/>",++this.LineCount}if(Mr.IsFutures(n)&&ze.IsNumber(t.Position)&&(h+="<span class='tooltip-con'>"+Ai.GetText("DivTooltip-Position",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.PositionColor+";'>"+t.Position+"</span><br/>",++this.LineCount),"Overlay-KLine"==this.Value.ChartPaint.Name){var d="<span style='color:rgb(0,0,0);font:微软雅黑;font-size:12px;text-align:center;display: block;'>"+this.Value.ChartPaint.Title+"</span>";h=d+h,++this.LineCount}}return this.Text=h,this.Height=this.LineCount*this.LineHeight,!0},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.GetPriceColor=function(t,e,a,i,r){var n=this.GetColor(e,a);if(e==a&&r&&r.Callback){var s={Item:i,TitleName:t,DefaultColor:n,TitleColor:null,ClassName:this.ClassName};r.Callback(r,s),s.TitleColor&&(n=s.TitleColor)}return n}}function ca(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor,this.Width=500,this.Operator=function(){if(!this.Value)return!1;var t=this.Value.Data.Data,e=this.Value.Data.Type,a="";for(var i in t){var r=t[i],n="";switch(e){case ot.BLOCKTRADING:n=this.BlockTradingFormat(r);break;case ot.TRADEDETAIL:n=this.TradeDetailFormat(r);break;case ot.RESEARCH:n=this.ResearchFormat(r);break;case ot.PFORECAST:n=this.PerformanceForecastFormat(r);break;default:n=this.DefaultFormat(r);break}a+=n}var s="<div class='title-length'>"+a+"</div>";if(t.length>8){var o="<div class='total-list'>共"+t.length+"条</div>";s+=o}return this.Text=s,!0},this.DefaultFormat=function(t){var e=ze.FormatDateString(t.Date);if(ze.IsNumber(t.Time)){var a=ze.FormatTimeString(t.Time);e+=" "+a}var i="<span>".concat(e,"&nbsp;&nbsp;&nbsp;").concat(t.Title,"</span>");return i},this.BlockTradingFormat=function(t){var e=t.ExtendData,a=ze.FormatDateString(t.Date),i="<span><i class='date-tipbox'>"+a+"</i>&nbsp;&nbsp;<i class='tipBoxTitle'>成交价:&nbsp;"+e.Price.toFixed(2)+"</i><i class='tipBoxTitle'>收盘价:&nbsp;"+e.ClosePrice.toFixed(2)+"</i><br/><i class='rate-discount tipBoxTitle'>溢折价率:&nbsp;<strong style='color:"+this.GetColor(e.Premium.toFixed(2))+"'>"+e.Premium.toFixed(2)+"%</strong></i><i class='tipBoxTitle'>成交量(万股):&nbsp;"+e.Vol.toFixed(2)+"</i></span>";return i},this.TradeDetailFormat=function(t){var e=t.ExtendData.Detail,a=ze.FormatDateString(t.Date),i=[];for(var r in e)i+="<i>"+e[r].TypeExplain+"</i><br/>";var n="<span><i class='trade-time'>"+a+"&nbsp;&nbsp;&nbsp;上榜原因:&nbsp;&nbsp;</i><i class='reason-list'>"+i+"</i><br/><i class='trade-detall'>一周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</strong>&nbsp;&nbsp;&nbsp;四周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+";'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</strong></i></span>";return n},this.ResearchFormat=function(t){var e=t.ExtendData.Level,a="";if(0==e.length)a="<i>一般调研</i>";else{for(var i in e)0==e[i]?a+="<i style='color:#00a0e9'>证券代表&nbsp;&nbsp;&nbsp;</i>":1==e[i]?a+="<i>董秘&nbsp;&nbsp;&nbsp;</i>":2==e[i]?a+="<i style='color:#00a0e9'>总经理&nbsp;&nbsp;&nbsp;</i>":3==e[i]&&(a+="<i style='color:#00a0e9'>董事长&nbsp;&nbsp;&nbsp;</i>");a="接待:&nbsp;&nbsp;&nbsp;"+a}var r="";t.ExtendData.Type&&"其他"!=t.ExtendData.Type&&(r="&nbsp;&nbsp;&nbsp;<i>"+t.ExtendData.Type+"</i>",0==e.length&&(a=""));var n=ze.FormatDateString(t.Date),s="<span>"+n+"&nbsp;&nbsp;&nbsp;"+r+a+"</span>";return s},this.PerformanceForecastFormat=function(t){var e,a=t.ExtendData.ReportDate,i=parseInt(a/1e4),r=a%1e4;1231==r?e="年报":331==r?e="一季度报":630==r?e="半年度报":930==r&&(e="三季度报");var n="";t.ExtendData.FWeek&&(null!=t.ExtendData.FWeek.Week1&&(n+="一周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</i>"),null!=t.ExtendData.FWeek.Week4&&(n+="&nbsp;四周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+"'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</i>"),n.length>0&&(n="<br/>&nbsp;&nbsp;<i class='prorecast-week'>"+n+"</i>"));var s=ze.FormatDateString(t.Date),o="<span>"+s+"&nbsp;&nbsp;"+i+e+t.Title+"&nbsp;"+n+"</span>";return o},this.GetColor=function(t){return t>0?this.UpColor:t<0?this.DownColor:this.UnchagneColor}}function da(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=120,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e,a=t.Data,i="<span class='tooltip-index-name'>".concat(a.Name).concat(a.Param,":</span>");return e=1==a.Type?"<span class='tooltip-index-buy'>买入</span>":"<span class='tooltip-index-sell'>卖出</span>",this.Text=i+e,!0}}function fa(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e=t.Data.Item,a=ze.FormatTimeString(e.Time),i="<span class='tooltip-minuteinfo-time'>".concat(a," </span>"),r="<span class='tooltip-minuteinfo-content'>".concat(e.Title,"</span>");return e.Content&&(r="<span class='tooltip-minuteinfo-content'>".concat(e.Content,"</span>")),this.Text=i+r,!0}}function Ca(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&(!!t.Item.Text&&(this.Text=t.Item.Text,!0))}}function ma(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&(!(!t.Item.Tooltip||!t.Item.Tooltip.Text)&&(this.Text=t.Item.Tooltip.Text,!0))}}function Da(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=200,this.Period=0,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(ut.IsDayPeriod(this.Period,!0)){var e=ze.FormatDateString(t.Data.Start.Date),a=ze.FormatDateString(t.Data.End.Date);if(e==a)return this.Text="<span class='tooltip-minuteinfo-content'>".concat(e,"</span>"),!0;var i="<span class='tooltip-minuteinfo-content'>起始时间:".concat(e,"</span>"),r="<span class='tooltip-minuteinfo-content'>结束时间:".concat(a,"</span>");return this.Text=i+"<br>"+r,!0}if(ut.IsMinutePeriod(this.Period,!0)){e=ze.FormatDateString(t.Data.Start.Date);var n=ze.FormatTimeString(t.Data.Start.Time,"HH:MM"),s=(a=ze.FormatDateString(t.Data.End.Date),ze.FormatTimeString(t.Data.End.Time,"HH:MM"));i="<span class='tooltip-minuteinfo-content'>起始时间:".concat(e," ").concat(n,"</span>"),r="<span class='tooltip-minuteinfo-content'>结束时间:".concat(a," ").concat(s,"</span>");return this.Text=i+"<br>"+r,!0}return!1}}function pa(){this.newMethod=ra,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(!ze.IsNonEmptyArray(t.Data.Tooltip))return!1;this.Text="";for(var e=0;e<t.Data.Tooltip.length;++e){var a=t.Data.Tooltip[e],i="<span class='tooltip-minuteinfo-content'>".concat(a,"</span>");this.Text+=i+"<br>"}return!0}}var va=new function(){this.DataMap=new Map([["KLineTradeDataStringFormat",{Create:function(){return new da}}],["MinuteInfoDataStringFormat",{Create:function(){return new fa}}],["HistoryDataStringFormat",{Create:function(){return new ua}}],["KLineInfoDataStringFormat",{Create:function(){return new ca}}],["IconDataStringFormat",{Create:function(){return new Ca}}],["ChartOXDataStringFormat",{Create:function(){return new Da}}],["ScatterPlotDataStringFormat",{Create:function(){return new pa}}],["ChartDrawSVGDataStringFormat",{Create:function(){return new ma}}],["CorssCursor_XStringFormat",{Create:function(){return new oa}}],["CorssCursor_YStringFormat",{Create:function(){return new sa}}],["CorssCursor_Minute_XStringFormat",{Create:function(){return new ha}}]]),this.Create=function(t){if(!this.DataMap.has(t))return null;var e=this.DataMap.get(t);return e.Create()}};function ga(){this.Frame,this.Data=new Array,this.Canvas,this.IsDynamic=!1,this.Position=0,this.CursorIndex,this.LastPoint,this.Font=xi.TitleFont,this.Title,this.TitleColor=xi.DefaultTextColor,this.ClassName="IChartTitlePainting",this.DrawStatus,this.GetEventCallback,this.GlobalOption,this.ReloadResource=function(){this.Font=xi.TitleFont,this.TitleColor=xi.DefaultTextColor}}var Sa=["不复权","前复权","后复权"];function Ia(){this.newMethod=ga,this.newMethod(),delete this.newMethod,this.ClassName="DynamicKLineTitlePainting",this.IsDynamic=!0,this.IsShow=!0,this.Period,this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor,this.VolColor=xi.Title.VolColor,this.AmountColor=xi.Title.AmountColor,this.DateTimeColor=xi.Title.DateTimeColor,this.NameColor=xi.Title.NameColor,this.SettingColor=xi.Title.SettingColor,this.TurnoverRateColor=xi.Title.TurnoverRateColor,this.PositionColor=xi.Title.PositionColor,this.Symbol,this.Name,this.SpaceWidth=2*I(),this.OverlayChartPaint,this.IsShowName=!0,this.IsShowSettingInfo=!0,this.IsShowDateTime=!0,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.OnDrawEvent,this.OnMouseMoveEvent,this.HQChart,this.ReloadResource=function(){this.Font=xi.TitleFont,this.TitleColor=xi.DefaultTextColor,this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor,this.VolColor=xi.Title.VolColor,this.AmountColor=xi.Title.AmountColor,this.DateTimeColor=xi.Title.DateTimeColor,this.NameColor=xi.Title.NameColor,this.SettingColor=xi.Title.SettingColor,this.TurnoverRateColor=xi.Title.TurnoverRateColor,this.PositionColor=xi.Title.PositionColor},this.GetCurrentKLineData=function(){if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)return null;var a=this.Data.Data[e];return a},this.GetFormatTitle=function(t){if(t&&t.Data){var e=Hr(this.Symbol),a=this.Symbol.toUpperCase(),i=t.Data,r=[],n={AryText:r};if(this.IsShowName&&r.push({Text:this.Name,Color:this.NameColor}),this.IsShowSettingInfo){var s="";s=this.Data.Period>ft&&this.Data.Period<=Ct?this.Data.Period-ft+Ai.GetText("自定义分钟",this.LanguageID):this.Data.Period>ct&&this.Data.Period<=dt?this.Data.Period-ct+Ai.GetText("自定义日线",this.LanguageID):this.Data.Period>3e4&&this.Data.Period<=32e3?this.Data.Period-3e4+Ai.GetText("自定义秒",this.LanguageID):Ai.GetText(ut.GetPeriodName(this.Data.Period),this.LanguageID);var o=Ai.GetText(Sa[this.Data.Right],this.LanguageID),h="("+s+" "+o+")";Mr.IsEnableRight(this.Data.Period,this.Symbol,this.HQChart.RightFormula)||(h="("+s+")"),r.push({Text:h,Color:this.SettingColor})}h=this.GetKLineCalculateTitle();if(h&&r.push({Text:h,Color:this.NameColor}),this.IsShowDateTime){h=ze.FormatDateString(i.Date);r.push({Text:h,Color:this.DateTimeColor})}var l=ut.IsTickPeriod(this.Period);if(ut.IsMinutePeriod(this.Period,!0)&&ze.IsNumber(i.Time)){h=ze.FormatTimeString(i.Time);r.push({Text:h,Color:this.DateTimeColor})}else if(ut.IsSecondPeriod(this.Period)&&ze.IsNumber(i.Time)){h=ze.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:h,Color:this.DateTimeColor})}else if(l){h=ze.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:h,Color:this.DateTimeColor})}if(l){var u=this.GetColor(i.Open,i.YClose);h=Ai.GetText("KTitle-Price",this.LanguageID)+i.Open.toFixed(e);if(r.push({Text:h,Color:u}),ze.IsNumber(i.YClose)&&0!=i.YClose){var c=(i.Close-i.YClose)/i.YClose*100;u=this.GetColor(c,0),h=Ai.GetText("KTitle-Increase",this.LanguageID)+c.toFixed(2)+"%";r.push({Text:h,Color:u})}return n}if(i.IsNonTrade)return n;var d=null;if(this.GetEventCallback&&(d=this.GetEventCallback(C.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR)),ze.IsNumber(i.Open)){u=this.GetColor(i.Open,i.YClose),h=Ai.GetText("KTitle-Open",this.LanguageID)+i.Open.toFixed(e);if(i.Open==i.YClose&&d){var f={Item:i,TitleName:"KTitle-Open",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(d,f)&&(u=f.TitleColor)}r.push({Text:h,Color:u})}if(ze.IsNumber(i.High)){u=this.GetColor(i.High,i.YClose),h=Ai.GetText("KTitle-High",this.LanguageID)+i.High.toFixed(e);if(i.High==i.YClose&&d){f={Item:i,TitleName:"KTitle-High",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(d,f)&&(u=f.TitleColor)}r.push({Text:h,Color:u})}if(ze.IsNumber(i.Low)){u=this.GetColor(i.Low,i.YClose),h=Ai.GetText("KTitle-Low",this.LanguageID)+i.Low.toFixed(e);if(i.Low==i.YClose&&d){f={Item:i,TitleName:"KTitle-Low",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(d,f)&&(u=f.TitleColor)}r.push({Text:h,Color:u})}if(ze.IsNumber(i.Close)){u=this.GetColor(i.Close,i.YClose),h=Ai.GetText("KTitle-Close",this.LanguageID)+i.Close.toFixed(e);if(i.Close==i.YClose&&d){f={Item:i,TitleName:"KTitle-Close",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(d,f)&&(u=f.TitleColor)}r.push({Text:h,Color:u})}if(i.YFClose>0&&Mr.IsChinaFutures(a)){c=(i.Close-i.YFClose)/i.YFClose*100,u=this.GetColor(c,0),h=Ai.GetText("KTitle-Increase",this.LanguageID)+c.toFixed(2)+"%";r.push({Text:h,Color:u})}else if(i.YClose>0){c=(i.Close-i.YClose)/i.YClose*100,u=this.GetColor(c,0),h=Ai.GetText("KTitle-Increase",this.LanguageID)+c.toFixed(2)+"%";r.push({Text:h,Color:u})}if(ze.IsNumber(i.Vol)){var m=i.Vol;a&&Mr.IsSHSZ(a)&&(m/=100);h=Ai.GetText("KTitle-Vol",this.LanguageID)+ze.FromatIntegerString(m,2,this.LanguageID);r.push({Text:h,Color:this.VolColor})}if(ze.IsNumber(i.Amount)){h=Ai.GetText("KTitle-Amount",this.LanguageID)+ze.FormatValueString(i.Amount,2,this.LanguageID);r.push({Text:h,Color:this.AmountColor})}if(Mr.IsSHSZStockA(this.Symbol)&&i.FlowCapital>0){c=i.Vol/i.FlowCapital*100,h=Ai.GetText("KTitle-Exchange",this.LanguageID)+ze.FormatValueString(c,2,this.LanguageID)+"%";r.push({Text:h,Color:this.TurnoverRateColor})}if(Mr.IsFutures(a)&&ze.IsNumber(i.Position)){h=Ai.GetText("KTitle-Position",this.LanguageID)+i.Position;r.push({Text:h,Color:this.PositionColor})}if(ze.IsNonEmptyArray(this.OverlayChartPaint))for(var D=0;D<this.OverlayChartPaint.length;++D){i=this.OverlayChartPaint[D];if(i.Symbol&&i.Title){var p=i.Color;h="[".concat(i.Title,"]");r.push({Text:h,Color:p})}}return n}},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,r=(this.Frame.ChartBorder.GetRight(),I());if(e){if(this.Frame.ChartBorder.Right<5*r)return;a=2,i=this.Frame.ChartBorder.Right/2,this.Frame.ChartBorder.GetHeight();var n=this.Frame.ChartBorder.GetChartWidth(),s=this.Frame.ChartBorder.GetTop();this.Canvas.translate(n,s),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*r)return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o={Left:a,Bottom:i,IsHScreen:e},h=this.GetFormatTitle({Data:t});if(h&&ze.IsNonEmptyArray(h.AryText))for(var l=0;l<h.AryText.length;++l){t=h.AryText[l];if(!this.DrawText(t.Text,t.Color,o))break}},this.Draw=function(){if(this.IsShow)if(null==this.CursorIndex||!this.Data||this.Data.length<=0)this.OnDrawEventCallback(null);else{this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)this.OnDrawEventCallback(null);else{this.IsShowLastData()&&(e=this.Data.Data.length-1);var a=this.Data.Data[e];this.OnDrawEventCallback(a),this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}}},this.OnDrawEventCallback=function(t){var e=this.OnDrawEvent&&this.OnDrawEvent.Callback,a=this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback;if(e||a){var i={Draw:t,Name:this.ClassName};if(this.Data&&this.Data.Data){var r=Math.abs(this.CursorIndex);r=parseInt(r.toFixed(0));var n=this.Data.DataOffset+r,s=this.Data.Data.length;i.DataIndex=n,i.DataCount=s}if(ze.IsNonEmptyArray(this.OverlayChartPaint)){i.OverlayStock=[];for(var o=0;o<this.OverlayChartPaint.length;++o){var h=this.OverlayChartPaint[o];h.Symbol&&h.Title&&i.OverlayStock.push({Symbol:h.Symbol,Name:h.Title})}}e&&this.OnDrawEvent.Callback(this.OnDrawEvent,i,this),a&&this.OnMouseMoveEvent.Callback(this.OnMouseMoveEvent,i,this)}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.OnUnchangeTitleColor=function(t,e){return!(!t||!t.Callback)&&(e.ClassName=this.ClassName,t.Callback(t,e,this),!(!e||!e.TitleColor))},this.DrawText=function(t,e,a){if(!t)return!0;var i=!0===this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetHeight()),this.Canvas.fillStyle=e;var n=this.Canvas.measureText(t).width;return!(a.Left+n>r)&&(this.IsShow&&this.Canvas.fillText(t,a.Left,a.Bottom,n),a.Left+=n+this.SpaceWidth,!0)},this.GetKLineCalculateTitle=function(){if(!this.HQChart)return null;var t=this.HQChart.GetKLineCalulate();return t&&t.GetTitle?t.GetTitle():null},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;(!ze.IsNumber(e.FrameID)||e.FrameID<0||e.CorssCursorTouchEnd&&0==e.IsOnTouch)&&(t=!0)}return t}}function Ta(){this.newMethod=Ia,this.newMethod(),delete this.newMethod,this.ClassName="DynamicMinuteTitlePainting",this.SpaceWidth=1*I(),this.YClose,this.IsShowDate=!1,this.IsShowTime=!0,this.IsShowName=!0,this.IsShowAveragePrice=!0,this.OverlayChartPaint,this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.LastShowData,this.OnDrawEvent,this.PointInfo=null,this.IsAlwaysShowLastData=!1,this.ShowLastDataFormat=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.TitleBaseLine=1,this.TimeFormat,this.CallAuctionShowTitle=new Set(["MTitle-AC-Price","MTitle-AC-Vol","MTitle-AC-NotMatchVol","MTitle-AC-Increase","MTitle-AC-AvPrice"]),this.GetCurrentKLineData=function(){if(this.LastShowData)return this.LastShowData;if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=Math.abs(this.CursorIndex);t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)return null;var a=this.Data.Data[e];return a},this.GetCurrentAuctionData=function(){var t=!0===this.Frame.IsHScreen,e={ClientPos:this.PointInfo.ClientPos,X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y};if(2==this.PointInfo.ClientPos){if(!this.BeforeOpenData)return e;if(!this.CallAcutionXOperator)return e;if(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var a={Explain:"BeforeOpen",Data:null,DataIndex:null,DataTotalCount:this.BeforeOpenData.TotalCount};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=this.BeforeOpenData.Ver,a}if(3==this.PointInfo.ClientPos){if(!this.AfterCloseData)return e;if(!this.CallAcutionXOperator)return e;if(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;a={Explain:"AfterClose",Data:null,DataIndex:null,DataTotalCount:this.AfterCloseData.TotalCount};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=this.AfterCloseData.Ver,a}if(this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299){if(!this.MultiDayBeforeOpenData||!ze.IsNonEmptyArray(this.MultiDayBeforeOpenData))return e;var i=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=i,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var r=this.MultiDayBeforeOpenData[this.CallAcutionXOperator.DayIndex];a={Explain:"MultiDayBeforeOpen",Data:null,DataIndex:null};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.DayIndex=this.CallAcutionXOperator.DayIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=r.Ver,a}if(this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399){if(!this.MultiDayAfterCloseData||!ze.IsNonEmptyArray(this.MultiDayAfterCloseData))return e;i=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=i,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;r=this.MultiDayAfterCloseData[this.CallAcutionXOperator.DayIndex],a={Explain:"MultiDayAfterClose",Data:null,DataIndex:null};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.DayIndex=this.CallAcutionXOperator.DayIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=r.Ver,a}return e},this.GetLatestKLineData=function(t){var e,a=null,i=1;if(ze.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var r=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1];r&&ze.IsNonEmptyArray(r.Data)&&(i=r.Ver,a=r.Data[r.Data.length-1],e="MultiDayBeforeOpen")}else this.BeforeOpenData&&ze.IsNonEmptyArray(this.BeforeOpenData.Data)&&(a=this.BeforeOpenData.Data[this.BeforeOpenData.Data.length-1],i=this.BeforeOpenData.Ver,e="BeforeOpen");var n,s=null,o=1;if(ze.IsNonEmptyArray(this.MultiDayAfterCloseData)){r=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1];r&&ze.IsNonEmptyArray(r.Data)&&(o=r.Ver,s=r.Data[r.Data.length-1],n="MultiDayAfterClose",r.Data.length==r.TotalCount&&(s=null))}else this.AfterOpenData&&ze.IsNonEmptyArray(this.AfterOpenData.Data)&&(s=this.AfterOpenData.Data[this.AfterOpenData.Data.length-1],o=this.AfterOpenData.Ver,n="AfterClose");var h=null;if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var l=this.Data.Data.length;h=this.Data.Data[l-1]}return a||s||h?t?h?a&&h&&(a.Date>h.Date||a.Date==h.Date&&a.Time>h.Time&&1==o)?{Type:2,Data:a,Ver:i,Explain:e}:s&&h&&s.Date>=h.Date?{Type:1,Data:s,Ver:o,Explain:n}:{Type:0,Data:h}:{Type:1,Data:a,Ver:i,Explain:e}:{Type:0,Data:h}:null},this.GetFormatTitle=function(t){if(t&&t.Data){var e=Hr(this.Symbol),a=t.Data,i=t.IsLastOne,r=[];if(this.IsShowName&&r.push({Text:this.Name,Color:this.NameColor}),this.IsShowDate||this.IsShowTime){var n=!1;if(i&&1==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&ze.IsNumber(this.Data.UpdateTime.Date)&&ze.IsNumber(this.Data.UpdateTime.Time)){var s=ze.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");r.push({Text:s,Color:this.DateTimeColor}),n=!0}if(!n)if(this.TimeFormat){var o=null,h=null;s=null;this.IsShowDate&&(o=ze.FormatDateString("YYYY-MM-DD",a.Date)),this.IsShowTime&&(h=ze.FormatTimeString(a.Time,this.TimeFormat)),o&&h?s="".concat(o," ").concat(h):o?s=o:h&&(s=h),s&&r.push({Text:s,Color:this.DateTimeColor})}else{s=ze.FormatDateTimeString(a.DateTime,this.IsShowDate,this.IsShowTime);r.push({Text:s,Color:this.DateTimeColor})}}var l=a.Close,u=a.Increase,c=a.Vol,d=a.Amount;if(ze.IsNumber(l)){var f=this.GetColor(l,this.YClose);s=Ai.GetText("MTitle-Close",this.LanguageID)+l.toFixed(e);r.push({Text:s,Color:f})}if(ze.IsNumber(u)){f=this.GetColor(u,0),s=Ai.GetText("MTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";r.push({Text:s,Color:f})}var C=!0,m=this.Symbol.toUpperCase();if((Mr.IsET(m)&&!Mr.IsETShowAvPrice(m)||Mr.IsShowAvPrice&&!Mr.IsShowAvPrice(m))&&(C=!1),ze.IsNumber(a.AvPrice)&&C&&this.IsShowAveragePrice){f=this.GetColor(a.AvPrice,this.YClose),s=Ai.GetText("MTitle-AvPrice",this.LanguageID)+a.AvPrice.toFixed(e);r.push({Text:s,Color:f})}if(ze.IsNumber(c)){s=Ai.GetText("MTitle-Vol",this.LanguageID)+ze.FromatIntegerString(c,2,this.LanguageID);r.push({Text:s,Color:this.VolColor})}if(ze.IsNumber(d)){s=Ai.GetText("MTitle-Amount",this.LanguageID)+ze.FormatValueString(d,2,this.LanguageID);r.push({Text:s,Color:this.AmountColor})}if(ze.IsNumber(a.Position)){s=Ai.GetText("MTitle-Position",this.LanguageID)+ze.FromatIntegerString(a.Position,2,this.LanguageID);r.push({Text:s,Color:this.VolColor})}if(i&&0==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&ze.IsNumber(this.Data.UpdateTime.Date)&&ze.IsNumber(this.Data.UpdateTime.Time)){s=Ai.GetText("MTitle-UpdateTime",this.LanguageID)+ze.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");r.push({Text:s,Color:this.DateTimeColor})}if(ze.IsNonEmptyArray(this.OverlayChartPaint))for(var D=0;D<this.OverlayChartPaint.length;++D){a=this.OverlayChartPaint[D];if(a.Symbol&&a.Title){var p=a.Color;s="[".concat(a.Title,"]");r.push({Text:s,Color:p})}}return{AryText:r}}},this.DrawItem=function(t,e){if(t){var a=I(),i=!0===this.Frame.IsHScreen,r=this.Frame.GetBorder(),n=r.Left,s=r.Top-this.Frame.ChartBorder.Top/2;Hr(this.Symbol);if(this.Canvas.font=this.Font,i){if(this.Frame.ChartBorder.Right<5*a)return;n=2,s=this.Frame.ChartBorder.Right/2;var o=r.ChartWidth,h=r.Top;this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*a)return;if(this.Canvas.textAlign="left",0==this.TitleBaseLine)this.Canvas.textBaseline="top",s=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";s=r.Top}else this.Canvas.textBaseline="middle";var l={Left:n,Bottom:s,IsHScreen:i},u=this.GetFormatTitle({Data:t,IsLastOne:e});if(u&&ze.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){t=u.AryText[c];if(!this.DrawText(t.Text,t.Color,l))break}}},this.FormatCallAuctionTitle=function(t){var e=[],a=Hr(this.Symbol);if(this.IsShowName&&e.push({Text:this.Name,Color:this.NameColor}),t&&t.Data){var i,r,n=t.Data;if(r=ze.FormatDateString(n.Date),i=1==t.Ver?ze.FormatTimeString(n.Time,"HH:MM"):ze.FormatTimeString(n.Time,"HH:MM:SS"),h="MultiDayBeforeOpen"==t.Explain||"MultiDayAfterClose"==t.Explain?"".concat(r," ").concat(i):i,e.push({Text:h,Color:this.DateTimeColor}),ze.IsNumber(n.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Price")){var s=this.GetColor(n.Price,this.YClose),o="MTitle-AC-Price";1==t.Ver&&(o="MTitle-Close");var h=Ai.GetText(o,this.LanguageID)+n.Price.toFixed(a);e.push({Text:h,Color:s})}if(ze.IsPlusNumber(this.YClose)&&ze.IsNumber(n.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Increase")){var l=(n.Price-this.YClose)/this.YClose*100;s=this.GetColor(l,0),o="MTitle-AC-Increase";1==t.Ver&&(o="MTitle-Increase");h=Ai.GetText(o,this.LanguageID)+l.toFixed(2)+"%";e.push({Text:h,Color:s})}if(ze.IsNumber(n.AvPrice)&&this.CallAuctionShowTitle.has("MTitle-AC-AvPrice")){s=this.GetColor(n.AvPrice,this.YClose),h=Ai.GetText("MTitle-AC-AvPrice",this.LanguageID)+n.AvPrice.toFixed(a);e.push({Text:h,Color:s})}if(ze.IsNumber(n.Vol[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Vol")){o="MTitle-AC-Vol";1==t.Ver&&(o="MTitle-Vol");h=Ai.GetText(o,this.LanguageID)+ze.FromatIntegerString(n.Vol[0],2);e.push({Text:h,Color:this.VolColor})}if(ze.IsNumber(n.Vol[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchVol")){h=Ai.GetText("MTitle-AC-NotMatchVol",this.LanguageID)+ze.FromatIntegerString(n.Vol[1],2);e.push({Text:h,Color:this.VolColor})}if(n.ExtendData&&ze.IsNonEmptyArray(n.ExtendData.Amount)){var u=n.ExtendData.Amount;if(ze.IsNumber(u[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Amount")){h=Ai.GetText("MTitle-AC-Amount",this.LanguageID)+ze.FromatIntegerString(u[0],2);e.push({Text:h,Color:this.AmountColor})}if(ze.IsNumber(u[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchAmount")){h=Ai.GetText("MTitle-AC-NotMatchAmount",this.LanguageID)+ze.FromatIntegerString(u[1],2);e.push({Text:h,Color:this.AmountColor})}}}return{AryText:e}},this.DrawCallAuction=function(){var t=!0===this.Frame.IsHScreen,e=this.Frame.GetBorder(),a=I(),i=e.Left,r=e.Top-this.Frame.ChartBorder.Top/2,n=!0;if(t){if(this.Frame.ChartBorder.Right<5*a)return;i=2,r=this.Frame.ChartBorder.Right/2;var s=e.ChartWidth,o=e.Top;this.Canvas.translate(s,o),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(n=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",r=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";r=e.Top}else this.Canvas.textBaseline="middle";var h={Left:i,Bottom:r,IsHScreen:t},l=this.GetCurrentAuctionData(),u=this.FormatCallAuctionTitle(l);if(n&&u&&ze.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){var d=u.AryText[c];if(!this.DrawText(d.Text,d.Color,h))break}this.OnDrawCallAuctionEventCallback(l)},this.OnDrawCallAuctionEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:this.ClassName};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}if(this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback){e={Draw:t,Name:this.ClassName};this.OnMouseMoveEvent.Callback(this.OnDrawEvent,e,this)}},this.DrawNone=function(){this.OnDrawEventCallback(null),this.IsAlwaysShowLastData&&(this.Canvas.save(),this.DrawLastDataItem(),this.Canvas.restore())},this.Draw=function(){if(this.LastShowData=null,this.GlobalOption=this.Frame.GlobalOption,!this.IsShow){var t=this.OnDrawEvent&&this.OnDrawEvent.Callback||this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback;if(!t)return}if(this.PointInfo&&(2==this.PointInfo.ClientPos||3==this.PointInfo.ClientPos||this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299||this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399))return this.Canvas.save(),this.DrawCallAuction(),void this.Canvas.restore();if(!this.Data||!this.Data.Data||this.Data.Data.length<=0)this.DrawNone();else if(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest){this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var e=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var a=this.DrawStatus;(!ze.IsNumber(a.FrameID)||a.FrameID<0||a.CorssCursorTouchEnd&&0==a.IsOnTouch)&&(e=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(e=!0);var i=!1;if(e){var r=null,n=this.GetLatestKLineData(!0);n&&0==n.Type&&(r=n.Data),i=!0}else{var s=this.CursorIndex;s=parseInt(s.toFixed(0));var o=s+this.Data.DataOffset;o>=this.Data.Data.length&&(o=this.Data.Data.length-1);r=this.Data.Data[o];o==this.Data.Data.length-1&&(i=!0)}this.LastShowData=r,this.Canvas.save(),this.OnDrawEventCallback(r),this.IsAlwaysShowLastData?this.DrawLastDataItem():this.DrawItem(r,i),this.Canvas.restore()}else this.DrawNone()},this.DrawCallAuctionItem=function(t,e){if(t){var a=t.Data,i=(t.Ver,!0===this.Frame.IsHScreen),r=this.Frame.GetBorder(),n=r.Left,s=r.Top-this.Frame.ChartBorder.Top/2,o=!0;if(i){n=2,s=this.Frame.ChartBorder.Right/2;var h=r.ChartWidth,l=r.Top;this.Canvas.translate(h,l),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(o=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",s=2*I();else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";s=r.Top}else this.Canvas.textBaseline="middle";var u={Left:n,Bottom:s,IsHScreen:i},c=this.FormatCallAuctionTitle(t);if(o&&c&&ze.IsNonEmptyArray(c.AryText))for(var d=0;d<c.AryText.length;++d){a=c.AryText[d];if(!this.DrawText(a.Text,a.Color,u))break}}},this.DrawLastDataItem=function(){var t=this.GetLatestKLineData(!0);t&&(0==t.Type?this.DrawItem(t.Data,!0):1!=t.Type&&2!=t.Type||this.DrawCallAuctionItem(t,!0))}}var xa={DEFAULT:1,ORIGINAL:2,INTEGER:3,THOUSANDS:21};function ya(t,e,a){this.Data=t,this.Name=e,this.Color=a,this.DataType,this.ChartClassName,this.StringFormat=xa.DEFAULT,this.FloatPrecision=2,this.IsShow=!0,this.Callback}function Aa(){this.newMethod=ga,this.newMethod(),delete this.newMethod,this.ClassName="DynamicChartTitlePainting",this.IsDynamic=!0,this.Data=[],this.Explain,this.ColorIndex,this.IsShowColorIndexTitle=!0,this.IsShowUpDownArrow=!0,this.IsShowIndexName=!0,this.IsShowIndexTitle=!0,this.IsShowNameArrow=!1,this.TradeIndex,this.IsShowTradeIndexTitle=!0,this.OverlayIndex=new Map,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:0,LineSpace:5,BGColor:xi.OverlayIndexTitleBGColor},this.LanguageID=yi.LANGUAGE_CHINESE_ID,this.TitleRect,this.IsDrawTitleBG=!1,this.BGColor=xi.IndexTitleBGColor,this.BGBorderColor=xi.IndexTitleBorderColor,this.BGBorderMoveOnColor=xi.IndexTitleBorderMoveOnColor,this.BorderRoundRadius=2,this.OnDrawEvent,this.ParamSpace=2,this.TitleSpace=2,this.TitleColor=xi.IndexTitleColor,this.SelectedColor=xi.IndexTitleSelectedColor,this.IsKLineFrame=!1,this.Identify,this.SelectedChart,this.ArgumentsText,this.MerginLeft=xi.IndexTitleMerginLeft,this.Buttons=[],this.DynamicTitle={OutName:null,OutValue:null},this.OverlayDynamicTitle=new Map,this.ReloadResource=function(){this.Font=xi.TitleFont,this.TitleColor=xi.DefaultTextColor,this.OverlayIndexType.BGColor=xi.OverlayIndexTitleBGColor},this.SetDynamicTitleData=function(t,e,a){a.OutName?a.OutName.clear():a.OutName=new Map,a.OutValue?a.OutValue.clear():a.OutValue=new Map;var i=new Map;for(var r in e){var n=e[r];i.set("{".concat(n.Name,"}"),n)}for(var r in t){n=t[r];if(n.DynamicName){var s=n.DynamicName.match(/{\w*}/i);if(!s||s.length<=0)a.OutName.set(n.Name,n.DynamicName);else{for(var o=n.DynamicName,h=!0,l=0;l<s.length;++l){var u=s[l];if(!i.has(u)){h=!1;break}var c=i.get(u).Value;o=o.replace(u,c.toString())}h&&a.OutName.set(n.Name,o)}}n.DynamicValue&&a.OutValue.set(n.Name,n.DynamicValue)}},this.SetDynamicTitle=function(t,e,a){if(ze.IsString(a)){var i=null;this.OverlayDynamicTitle.has(a)?i=this.OverlayDynamicTitle.get(a):(i={OutName:null,OutValue:null},this.OverlayDynamicTitle.set(a,i)),this.SetDynamicTitleData(t,e,i)}else this.SetDynamicTitleData(t,e,this.DynamicTitle)},this.GetDynamicOutName=function(t,e){if(ze.IsString(e)){if(!this.OverlayDynamicTitle.has(e))return null;var a=this.OverlayDynamicTitle.get(e),i=a.OutName}else i=this.DynamicTitle.OutName;return!i||i.size<=0?null:i.has(t)?i.get(t):null},this.GetDynamicOutValue=function(t,e){var a=this.DynamicTitle.OutValue;if(!a||a.size<=0)return null;if(!a.has(t))return null;var i=a.get(t);return i=i.replace("{Value}",e),i},this.IsClickTitle=function(t,e){return!!this.TitleRect&&(t>this.TitleRect.Left&&t<this.TitleRect.Left+this.TitleRect.Width&&e>this.TitleRect.Top&&e<this.TitleRect.Top+this.TitleRect.Height)},this.FormatValue=function(t,e){return e.StringFormat==xa.DEFAULT?ze.FormatValueString(t,e.FloatPrecision,this.LanguageID):e.StringFormat==xa.THOUSANDS?ze.FormatValueThousandsString(t,e.FloatPrecision):e.StringFormat==xa.ORIGINAL?t.toFixed(e.FloatPrecision).toString():e.StringFormat==xa.INTEGER?ze.FromatIntegerString(t,e.FloatPrecision,this.LanguageID):void 0},this.FormatMultiReport=function(t,e){var a="";for(var i in t){var r=t[i],n=r.Quarter,s=r.Year,o=r.Value;switch(a.length>0&&(a+=","),a+=s.toString(),n){case 1:a+="一季报 ";break;case 2:a+="半年报 ";break;case 3:a+="三季报 ";break;case 4:a+="年报 ";break}a+=this.FormatValue(o,e)}return a},this.FromatMultiDataLine=function(t,e){var a="";if(Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];if(0!=r.Type&&ze.IsNumber(r.Value)){var n=this.FormatValue(r.Value,e);a.length>0&&(a+=","),a+=n}}else 0!=t.Type&&ze.IsNumber(t.Value)&&(a=this.FormatValue(t.Value,e));return a.length<=0?null:a},this.FromatStackedBarTitle=function(t,e){if(!ze.IsNonEmptyArray(t))return null;if(!ze.IsNonEmptyArray(e.Color))return null;for(var a=[],i=0;i<t.length;++i){var r=t[i];if(ze.IsNumber(r)){var n={Text:r.toFixed(2)};e.Name&&e.Name[i]&&(n.Name=e.Name[i]),n.Color=e.Color[i],a.push(n)}}return a.length<=0?null:a},this.ForamtMultiLineTitle=function(t,e){if(!ze.IsNonEmptyArray(e.Lines))return null;for(var a=[],i=0;i<e.Lines.length;++i)for(var r=e.Lines[i],n=0;n<r.Point.length;++n){var s=r.Point[n];if(s.Index==t){s={Text:s.Value.toFixed(2)};0==a.length&&(s.Name=e.Name),s.Color=r.Color,a.push(s);break}}return ze.IsNonEmptyArray(a)?a:null},this.ForamtMultiPointTitle=function(t,e){if(!ze.IsNonEmptyArray(e.PointGroup))return null;for(var a=[],i=0;i<e.PointGroup.length;++i)for(var r=e.PointGroup[i],n=0;n<r.Point.length;++n){var s=r.Point[n];if(s.Index==t){s={Text:s.Value.toFixed(2)};0==a.length&&(s.Name=e.Name),s.Color=r.BGColor,a.push(s);break}}return ze.IsNonEmptyArray(a)?a:null},this.FormatVPVRTitle=function(t,e){var a=e.Chart,i=[];if(0==a.VolType){var r={Text:" Up/Down ",Color:this.TitleColor};i.push(r)}else{r={Text:" Total ",Color:this.TitleColor};i.push(r)}if(!ze.IsNumber(t.Y))return i;var n=this.Frame.ChartBorder.GetTopEx(),s=this.Frame.ChartBorder.GetBottomEx();if(t.Y<n||t.Y>s)return i;for(var o=this.Frame.GetYData(t.Y),h=null,l=0;l<e.Data.Data.length;++l){r=e.Data.Data[l];if(o>=r.Price-e.Data.PriceOffset/2&&o<r.Price+e.Data.PriceOffset/2){h=r;break}}if(!h)return null;if(0==a.VolType){var u=0;for(l=0;l<h.Vol.length;++l){var c=h.Vol[l];if(ze.IsNumber(c.Value)){r={Text:ze.FormatVolString(c.Value,this.LanguageID)};u+=c.Value,ze.IsNumber(c.ColorID)?r.Color=a.BarColor[c.ColorID]:c.Color&&(r.Color=c.Color),i.push(r)}}r={Text:ze.FormatVolString(u,this.LanguageID),Color:this.TitleColor};i.push(r)}else if(h.TotalVol&&ze.IsNumber(h.TotalVol.Value)){r={Text:ze.FormatVolString(h.TotalVol.Value,this.LanguageID)};ze.IsNumber(h.TotalVol.ColorID)?r.Color=a.BarColor[h.TotalVol.ColorID]:h.TotalVol.Color&&(r.Color=h.TotalVol.Color),i.push(r)}return i},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;(!ze.IsNumber(e.FrameID)||e.FrameID<0||e.CorssCursorTouchEnd&&0==e.IsOnTouch)&&(t=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(t=!0);return t},this.OnDrawTitleEvent=function(){var t=this.GetEventCallback(C.ON_INDEXTITLE_DRAW);if(t){var e={Index:null,Data:this.Data,Title:this.Title,Script:this.Script,FrameID:this.Frame.Identify,OverlayIndex:this.OverlayIndex,IsShowTitleOnly:!1};if(this.ArgumentsText&&(e.ArgumentsText=this.ArgumentsText),this.Frame&&this.Frame.ChartBorder&&(e.IsShowTitleOnly=this.Frame.ChartBorder.IsShowTitleOnly),ze.IsNumber(this.CursorIndex)){var a=Math.abs(this.CursorIndex);a=parseInt(a.toFixed(0)),e.Index=a}var i=I(),r=this.Frame.GetBorder();e.Left=r.LeftEx/i,e.Top=r.Top/i,e.Right=r.RightEx/i,t.Callback(t,e,this)}},this.IsSelectedChart=function(t){return!!t&&(!!this.SelectedChart&&(!!this.SelectedChart.Selected&&this.SelectedChart.Selected.Identify==t))},this.Draw=function(t,e){if(this.Buttons=[],!this.Frame.IsMinSize&&(this.IsKLineFrame="KLineFrame"==this.Frame.ClassName||"KLineHScreenFrame"==this.Frame.ClassName,this.IsDrawTitleBG=this.Frame.IsDrawTitleBG,this.IsShowNameArrow=this.Frame.IsShowNameArrow,this.IsShowUpDownArrow=this.Frame.IsShowTitleArraw,this.IsShowIndexName=this.Frame.IsShowIndexName,this.IsShowOverlayIndexName=this.Frame.IsShowOverlayIndexName,this.OverlayIndexType.Position=this.Frame.OverlayIndexType.Position,this.OverlayIndexType.LineSpace=this.Frame.OverlayIndexType.LineSpace,this.ParamSpace=this.Frame.IndexParamSpace,this.TitleSpace=this.Frame.IndexTitleSpace,this.TitleRect=null,this.GlobalOption=this.Frame.GlobalOption,this.OnDrawTitleEvent(),0!=this.Frame.IsShowIndexTitle&&!0!==xi.IsDOMFrameTitle&&this.Data&&!(this.Frame.ChartBorder.TitleHeight<5)&&(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest))){if(!0===this.Frame.IsHScreen)return this.Canvas.save(),this.HScreenDraw(),void this.Canvas.restore();var a=this.Frame.ChartBorder.GetLeft()+this.MerginLeft,i=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,r=this.Frame.ChartBorder.GetRight(),n={Width:0,YCenter:i};this.DrawToolbar(n,t,e),a+=n.Width,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var s=I();if(this.Title&&this.IsShowIndexName)if(this.IsDrawTitleBG){var o={Left:a,YCenter:i,Width:0};this.DrawNameButton(o,t,e),this.Buttons.push({ID:p.INDEX_NAME_BUTTON,Rect:o,FrameID:this.Frame.Identify,Type:2}),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,h),this.TitleRect=o,a+=o.Width+3*s,a+=this.TitleSpace}else{var h=this.Canvas.measureText(this.Title).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,a,i,h),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,h),a+=h,a+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName){h=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,a,i,h),a+=h,a+=this.TitleSpace}var l=this.IsShowLastData(),u=this.Frame.GetLockRect();if(u){var c=Math.abs(this.CursorIndex);this.IsKLineFrame&&(c=this.CursorIndex);var d=this.Frame.GetXFromIndex(c.toFixed(0));if(d>=u.Left)return;if(l)return}for(var f=0;f<this.Data.length;++f){var C=this.Data[f],m=this.GetTitleItem(C,l,f);if(m){var D=m.Text,v=m.ArrayText;if(v)for(var g=0;g<v.length;++g){var S=v[g];A=S.Name?S.Name+":"+S.Text:S.Text;var T=this.ParamSpace*I();h=this.Canvas.measureText(A).width+T;if(a+h>r)break;if(S.BG){var x=this.Canvas.measureText("擎").width+2,y=(h=this.Canvas.measureText(A).width+2,{Left:a,Top:i-x/2,Width:h,Height:x});this.Canvas.fillStyle=S.BG,this.Canvas.fillRect(y.Left,y.Top-1,y.Width,y.Height),this.Canvas.fillStyle=S.Color,this.Canvas.fillText(A,y.Left+1,i,h),a+=h+T}else this.Canvas.fillStyle=S.Color,this.Canvas.fillText(A,a,i,h),a+=h}else{this.Canvas.fillStyle=C.Color;var A=D;if(C.Name){var b=this.GetDynamicOutName(C.Name);A=b?b+":"+D:C.Name+":"+D}T=this.ParamSpace*I(),h=this.Canvas.measureText(A).width+T;if(a+h>r)break;this.Canvas.fillText(A,a,i,h),a+=h}}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;A="说明:"+this.Explain,h=this.Canvas.measureText(A).width+2;a+h<r&&(this.Canvas.fillText(A,a,i,h),a+=h)}if(this.ColorIndex&&this.IsShowColorIndexTitle){this.Canvas.fillStyle=xi.Title.ColorIndexColor;var w=this.ColorIndex.Name+this.ColorIndex.Param;h=this.Canvas.measureText(w).width+2;this.Canvas.fillText(w,a,i,h),a+=h}if(this.TradeIndex&&this.IsShowTradeIndexTitle){this.Canvas.fillStyle=xi.Title.TradeIndexColor;w=this.TradeIndex.Name+this.TradeIndex.Param,h=this.Canvas.measureText(w).width+2;this.Canvas.fillText(w,a,i,h),a+=h}1==this.OverlayIndexType.Position?this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine(t,e):this.DrawOverlayIndex(a+10*I())}},this.GetTitleItem=function(t,e,a){if(!t||!t.Data||!t.Data.Data)return null;if(Array.isArray(t.Data.Data)&&t.Data.Data.length<=0)return null;if(!1===t.IsShow)return null;var i=null,r=null,n=null,s=null;if("StraightLine"==t.DataType)n=t.Data.Data[0],i=this.FormatValue(n,t);else{if("ChartVolProfileVisibleRange"==t.ChartClassName)return r=this.FormatVPVRTitle(this.LastPoint,t),r?{Text:null,ArrayText:r}:null;if(e)var o=t.Data.Data.length-1;else{var h=Math.abs(this.CursorIndex);h=parseInt(h.toFixed(0)),this.IsKLineFrame&&(h=this.CursorIndex);o=t.Data.DataOffset+h;if(o>=t.Data.Data.length&&(o=t.Data.Data.length-1),o<0)return null}if("ChartMultiLine"==t.DataType)return r=this.ForamtMultiLineTitle(o,t),r?{Text:null,ArrayText:r}:null;if("ChartMultiPoint"==t.DataType)return r=this.ForamtMultiPointTitle(o,t),r?{Text:null,ArrayText:r}:null;if(n=t.Data.Data[o],null==n&&"ChartStepLine"==t.ChartClassName){if(s=this.GetPreVaildItem(t.Data.Data,o),!s)return null;if(preText=this.FormatValue(s.Item,t),t.Name){var l=this.GetDynamicOutValue(t.Name,preText);l&&(preText=l)}return i="--(".concat(preText,")"),{Text:i,ArrayText:r}}if(null==n)return null;if("HistoryData-Vol"==t.DataType)n=n.Vol,i=this.FormatValue(n,t);else if("MultiReport"==t.DataType)i=this.FormatMultiReport(n,t);else if("MULTI_POINT_LINE"==t.DataType){if(i=this.FromatMultiDataLine(n,t),!i)return null}else{if("ChartStackedBar"==t.DataType)return r=this.FromatStackedBarTitle(n,t),r?{Text:null,ArrayText:r}:null;if(dn.Has(t.DataType)){var u=dn.Get(t.DataType);if(u&&u.FormatTitleCallback)return u.FormatTitleCallback(n,t,o)}else{if(this.GetEventCallback){var c=this.GetEventCallback(C.ON_FORMAT_INDEX_OUT_TEXT);if(c){var d={Item:t,Index:a,Data:this.Data,FrameID:this.Frame.Identify,DataIndex:o,Value:n,Out:null};if(c.Callback(c,d,this),d.Out)return d.Out}}var f=null;if(this.IsShowUpDownArrow){var m=null;o-1>=0&&(m=t.Data.Data[o-1]),ze.IsNumber(m)&&(f=m>n?"↓":m<n?"↑":"→")}if(i=this.FormatValue(n,t),t.Name){l=this.GetDynamicOutValue(t.Name,i);l&&(i=l)}f&&(i+=f)}}}return{Text:i,ArrayText:r}},this.GetPreVaildItem=function(t,e){for(var a=e;a>=0;--a){var i=t[a];if(i)return{Item:i,Index:a}}return null},this.DrawSelectedLine=function(t,e,a){this.Canvas.save();var i=this.GetFontHeight();this.Canvas.strokeStyle=this.SelectedColor;var r=M(4,e+i/2);this.Canvas.lineWidth=4,this.Canvas.beginPath(),this.Canvas.moveTo(t,r),this.Canvas.lineTo(t+a,r),this.Canvas.stroke(),this.Canvas.restore()},this.DrawOverlayIndexSingleLine=function(t,e){var a=I(),i=this.Frame.GetBorder();if(!0===this.Frame.IsHScreen)var r=1,n=2*a,s=this.Frame.ChartBorder.GetHeight(),o=this.Frame.ChartBorder.GetWidthEx();else n=i.TopTitle+2*a,r=this.Frame.ChartBorder.GetLeft()+this.MerginLeft,s=i.Right,o=i.Bottom;var l=this.OverlayIndexType.LineSpace*a,u=r,c=n,d=T(this.Canvas,this.Font,"擎");c=n+d/2;var f,C=(0,h.default)(this.OverlayIndex);try{for(C.s();!(f=C.n()).done;){x=f.value;var m=x[1],D=x[0],p={Width:0,YCenter:c,ID:D};if(this.DrawOverlayToolbar(m,p,t,e),m.Frame.IsShowIndexTitle){if(u=r+p.Width,this.Canvas.font=this.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",m.Title&&this.IsShowOverlayIndexName){var v=this.Canvas.measureText(m.Title).width+2;if(u+v<s){if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var g={Left:u,Top:c-d/2,Width:v,Height:d+l};this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height)}this.IsSelectedChart(D)&&this.DrawSelectedLine(u,c,v,m.Title),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(m.Title,u,c,v)}u+=v}for(var S=0;S<m.Data.length;++S){var x=m.Data[S];if(x&&x.Data&&x.Data.Data&&x.Name&&!(x.Data.Data.length<=0)){var y=null,A=null,b=null;if("StraightLine"==x.DataType)y=x.Data.Data[0],A=this.FormatValue(y,x);else{var w=Math.abs(this.CursorIndex-.5);w=parseInt(w.toFixed(0)),this.IsKLineFrame&&(w=this.CursorIndex);var F=x.Data.DataOffset+w;if(F>=x.Data.Data.length&&(F=x.Data.Data.length-1),F<0)continue;if(y=x.Data.Data[F],null==y)continue;if("HistoryData-Vol"==x.DataType)y=y.Vol,A=this.FormatValue(y,x);else if("MultiReport"==x.DataType)A=this.FormatMultiReport(y,x);else if("ChartStackedBar"==x.DataType){if(b=this.FromatStackedBarTitle(y,x),!b)continue}else A=this.FormatValue(y,x)}if(b)for(var M=0;M<b.length;++M){var L=b[M];E=L.Name?L.Name+":"+L.Text:L.Text;v=this.Canvas.measureText(E).width+2;if(u+v>s)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;g={Left:u,Top:c-d/2,Width:v,Height:d+l};this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height)}this.Canvas.fillStyle=L.Color,this.Canvas.fillText(E,u,c,v),u+=v}else{var E=A;if(x.Name){var N=this.GetDynamicOutName(x.Name,D);E=N?N+":"+A:x.Name+":"+A}v=this.Canvas.measureText(E).width+2;if(u+v>s)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;g={Left:u,Top:c-d/2,Width:v,Height:d+l};this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height)}this.Canvas.fillStyle=x.Color,this.Canvas.fillText(E,u,c,v),u+=v}}}if(c+=d+l,c+d+l>=o)break}}}catch(P){C.e(P)}finally{C.f()}},this.DrawOverlayIndex=function(t){var e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(!0===this.Frame.IsHScreen&&(e=-this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetHeight()),!(t>a)){var i,r=5*I(),n=t,s=(0,h.default)(this.OverlayIndex);try{for(s.s();!(i=s.n()).done;){d=i.value,t+=r;var o=d[1],l=d[0];if(o.Title&&this.IsShowOverlayIndexName){this.Canvas.fillStyle=this.TitleColor;var u=this.Canvas.measureText(o.Title).width+2;if(n=t,t+=u,t>a)break;this.Canvas.fillText(o.Title,n,e,u),this.IsSelectedChart(l)&&this.DrawSelectedLine(n,e,u)}for(var c in o.Data){var d=o.Data[c];if(d&&d.Data&&d.Data.Data&&d.Name&&!(d.Data.Data.length<=0)){var f=null,C=null;if("StraightLine"==d.DataType)f=d.Data.Data[0],C=this.FormatValue(f,d);else{var m=Math.abs(this.CursorIndex-.5);m=parseInt(m.toFixed(0)),this.IsKLineFrame&&(m=this.CursorIndex);var D=d.Data.DataOffset+m;if(D>=d.Data.Data.length&&(D=d.Data.Data.length-1),D<0)continue;if(f=d.Data.Data[D],null==f)continue;"HistoryData-Vol"==d.DataType?(f=f.Vol,C=this.FormatValue(f,d)):C="MultiReport"==d.DataType?this.FormatMultiReport(f,d):this.FormatValue(f,d)}this.Canvas.fillStyle=d.Color;var p=d.Name+":"+C;u=this.Canvas.measureText(p).width+2;if(n=t,t+=u,t>a)break;this.Canvas.fillText(p,n,e,u)}}if(t>a)break}}catch(v){s.e(v)}finally{s.f()}}},this.HScreenDraw=function(){var t=this.Frame.ChartBorder.GetHScreenBorder(),e=this.Frame.ChartBorder.GetRightTitle(),a=t.TopEx;this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180);var i=1,r=-this.Frame.ChartBorder.TitleHeight/2,n=this.Frame.ChartBorder.GetHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var s=I();if(this.Title&&this.IsShowIndexName){var o=this.Canvas.measureText(this.Title).width+2;if(this.IsDrawTitleBG){var h=this.Title;this.IsShowNameArrow&&(h+="▼");o=this.Canvas.measureText(h).width;var l=this.Canvas.measureText("擎").width+4*s,u=o+4*s;this.TitleRect={Top:t.Top,Left:this.Frame.ChartBorder.GetRightTitle()+this.Frame.ChartBorder.TitleHeight/2-l/2,Width:l,Height:u},this.Canvas.fillStyle=this.BGColor;var c={Left:i,Top:r-l/2,Width:u,Height:l};this.Canvas.fillRect(c.Left,c.Top,c.Width,c.Height),this.BGBorderColor&&(this.Canvas.strokeStyle=this.BGBorderColor,this.Canvas.strokeRect(F(c.Left),F(c.Top),L(c.Width),L(c.Height))),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,i+2*s,r,o),i+=u+2*s,i+=this.TitleSpace}else this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,i,r,o),i+=o,i+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName){o=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,i,r,o),i+=o,i+=this.TitleSpace}var d=this.IsShowLastData(),f=this.Frame.GetLockRect();if(f){var C=Math.abs(this.CursorIndex-.5);this.IsKLineFrame&&(C=this.CursorIndex);var m=this.Frame.GetXFromIndex(C.toFixed(0));if(m>=f.Top)return;if(d)return}for(var D in this.Data){var p=this.Data[D],v=this.GetTitleItem(p,d);if(v){var g=v.Text,S=v.ArrayText;if(S)for(var T=0;T<S.length;++T){var x=S[T];A=x.Name?x.Name+":"+x.Text:x.Text;var y=this.ParamSpace*I();o=this.Canvas.measureText(A).width+y;if(i+o>n)break;this.Canvas.fillStyle=x.Color,this.Canvas.fillText(A,i,r,o),i+=o}else{this.Canvas.fillStyle=p.Color;var A=g;if(p.Name){var b=this.GetDynamicOutName(p.Name);A=b?b+":"+g:p.Name+":"+g}y=this.ParamSpace*I(),o=this.Canvas.measureText(A).width+y;if(i+o>n)break;this.Canvas.fillText(A,i,r,o),i+=o}}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;A="说明:"+this.Explain,o=this.Canvas.measureText(A).width+2;i+o<n&&(this.Canvas.fillText(A,i,r,o),i+=o)}1==this.OverlayIndexType.Position?this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine():this.DrawOverlayIndex(i+5*I())},this.OnDrawEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:"DynamicChartTitlePainting"};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")},this.DrawNameButton=function(t,e,a){var i=I(),r=this.Title;this.IsShowNameArrow&&(r+="▼");var n=this.Canvas.measureText(r).width,s=this.Canvas.measureText("擎").width+4*i,o=this.BorderRoundRadius*i,h=n+4*i+2*o;t.Top=t.YCenter-s/2-1,t.Width=h,t.Height=s,t.Right=t.Left+t.Width,t.Bottom=t.Top+t.Height;var l=this.BGBorderColor;if(e&&e.X>=t.Left&&e.X<t.Right&&e.Y>=t.Top&&e.Y<=t.Bottom&&(this.BGBorderMoveOnColor&&(l=this.BGBorderMoveOnColor),a)){var u={ID:p.INDEX_NAME_BUTTON};a.MouseOnToolbar={ID:"IndexNameButton",Rect:t,Item:u,Frame:this.Frame,Point:{X:e.X,Y:e.Y}}}this.Canvas.beginPath(),this.Canvas.roundRect(F(t.Left),F(t.Top),L(t.Width),L(t.Height),[o]),this.Canvas.closePath(),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(),l&&(this.Canvas.strokeStyle=l,this.Canvas.stroke()),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(r,t.Left+o+2*i,t.YCenter,n)},this.DrawButton=function(t,e,a,i){var r=t.Style.Size;ze.IsNumber(t.Style.YMoveOffset)&&(e.YCenter+=t.Style.YMoveOffset);var n="".concat(r,"px ").concat(t.Style.Family);e.Top=e.YCenter-r/2,e.Width=r+t.Style.MerginLeft,e.Height=r,e.Bottom=e.Top+e.Height,e.Right=e.Left+e.Width;var s=t.Style.Color;return a&&a.X>=e.Left&&a.X<e.Right&&a.Y>=e.Top&&a.Y<=e.Bottom&&(s=t.Style.MoveOnColor,i&&(i.MouseOnToolbar={ID:"TitleButton",Rect:e,Item:t,Frame:this.Frame,Point:{X:a.X,Y:a.Y}})),this.Canvas.fillStyle=s,this.Canvas.font=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t.Style.Text,e.Left,e.YCenter),!0},this.DrawToolbar=function(t,e,a){if(t.Width=0,this.Frame&&this.Frame.GetLeftToolbar){var i=this.Frame.GetLeftToolbar();if(ze.IsNonEmptyArray(i))if(!0===this.Frame.IsHScreen);else{for(var r=this.Frame.GetBorder(),n=(r.Right,r.Left+3),s=t.YCenter,o=0;o<i.length;++o){var h=i[o],l={Left:n,YCenter:s};this.DrawButton(h,l,e,a),this.Buttons.push({ID:h.ID,Rect:l,FrameID:this.Frame.Identify,Type:0}),n=l.Right,t.Width+=l.Width}t.Width>0&&(t.Width+=3)}}},this.DrawOverlayToolbar=function(t,e,a,i){if(e.Width=0,t&&t.Frame&&t.Frame.GetLeftToolbar){var r=t.Frame,n=r.GetLeftToolbar({Overlay:t,OverlayID:e.ID});if(ze.IsNonEmptyArray(n))if(!0===this.Frame.IsHScreen);else{for(var s=r.GetBorder(),o=(s.Right,s.Left+3),h=e.YCenter,l=0;l<n.length;++l){var u=n[l],c={Left:o,YCenter:h};this.DrawButton(u,c,a,i),this.Buttons.push({ID:u.ID,Rect:c,FrameID:this.Frame.Identify,Type:1,OverlayID:e.ID,Title:t.Title}),o=c.Right,e.Width+=c.Width}e.Width>0&&(e.Width+=3)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom){var n={ID:i.ID,Rect:r,FrameID:i.FrameID,Type:i.Type};return 1==i.Type&&(n.Title=i.Title,n.OverlayID=i.OverlayID),n}}}return null}}function ba(){this.Frame,this.Canvas,this.Point=new Array,this.Value=new Array,this.LinePoint=[],this.PointCount=2,this.Status=0,this.PointStatus=0,this.MovePointIndex=null,this.ClassName="IChartDrawPicture",this.FinishedCallback,this.Guid=b(),this.Symbol,this.Period,this.Right,this.IsSelected=!1,this.Option,this.EnableMove=!0,this.EnableSave=!0,this.EnableCtrlMove=!1,this.OnlyMoveXIndex=!1,this.IsSupportMagnet=!1,this.IsDrawFirst=!1,this.IsShowYCoordinate=!1,this.LineColor=xi.DrawPicture.LineColor[0],this.LineWidth=2,this.BackupLineWidth=null,this.AreaColor="rgba(25,25,25,0.4)",this.PointColor=xi.DrawPicture.PointColor[0],this.MoveOnPointColor=xi.DrawPicture.PointColor[1],this.PointBGColor=xi.DrawPicture.PointColor[2],this.PointRadius=5,this.SquareSize=8,this.PointType=xi.DrawPicture.PointType,this.IsShowPoint=xi.DrawPicture.IsShowPoint,this.LimitFrameID,this.SetLastPoint=null,this.Update=null,this.GetActiveDrawPicture=null,this.GetYCoordinatePoint=null,this.Draw=function(){},this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.LineWidth>0&&(this.LineWidth=t.LineWidth),t.AreaColor&&(this.AreaColor=t.AreaColor),t.PointColor&&(this.PointColor=t.PointColor),t.MoveOnPointColor&&(this.SelectPointColor=t.PointColor),t.PointRadius&&(this.PointRadius=t.PointRadius),ze.IsNumber(t.SquareSize)&&(this.SquareSize=t.SquareSize),ze.IsBool(t.IsShowPoint)&&(this.IsShowPoint=t.IsShowPoint),ze.IsNumber(t.LimitFrameID)&&(this.LimitFrameID=t.LimitFrameID),ze.IsBool(t.EnableCtrlMove)&&(this.EnableCtrlMove=t.EnableCtrlMove),ze.IsBool(t.IsShowYCoordinate)&&(this.IsShowYCoordinate=t.IsShowYCoordinate))},this.ReloadResource=function(t){t||(this.PointColor=xi.DrawPicture.PointColor[0],this.MoveOnPointColor=xi.DrawPicture.PointColor[1],this.PointBGColor=xi.DrawPicture.PointColor[2])},this.SetLineWidth=function(){this.BackupLineWidth=null,this.LineWidth>0&&(this.BackupLineWidth=this.Canvas.lineWidth,this.Canvas.lineWidth=this.LineWidth*I())},this.GetFontHeight=function(t){return T(this.Canvas,t,"擎")},this.RestoreLineWidth=function(){null!=this.BackupLineWidth&&(this.Canvas.lineWidth=this.BackupLineWidth)},this.PointMagnetKLine=function(){if(!this.IsSupportMagnet)return!1;if(!this.Frame)return!1;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class)return!1;if(0!=this.Frame.Identify)return!1;var t=-1;if(2==this.Status?t=1:1==this.Status?t=0:ze.IsNumber(this.MovePointIndex)&&(t=this.MovePointIndex),t<0)return!1;if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable){var e={IsFixedX:!1,Magnet:{Enable:!0,PointIndex:t,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type}};return this.AdjustPoint(this.Point,e)}return!1},this.PointToValue=function(){return!!this.Frame&&("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute():this.PointToValue_KLine())},this.PointToKLine=function(t){if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;var a=[],i=this.Frame.IsHScreen;if(i)for(var r in t){var n=t[r],s=parseInt(this.Frame.GetXData(n.Y))+e.DataOffset,o=this.Frame.GetYData(n.X),h={XValue:s,YValue:o},l=e.Data[s];h.DateTime={Date:l.Date},ze.IsNumber(l.Time)&&(h.DateTime.Time=l.Time),a[r]=h}else for(var r in t){n=t[r];var u=parseInt(this.Frame.GetXData(n.X,!1));s=u+e.DataOffset;s<0?s=0:s>=e.Data.length&&(s=e.Data.length-1,u=s-e.DataOffset);o=this.Frame.GetYData(n.Y,!1),h={XValue:s,YValue:o,XIndex:u},l=e.Data[s];h.DateTime={Date:l.Date},ze.IsNumber(l.Time)&&(h.DateTime.Time=l.Time),a[r]=h}return a},this.PointToValue_KLine=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;if(e)for(var a in this.Point){var i=this.Point[a],r=parseInt(this.Frame.GetXData(i.Y,!1))+t.DataOffset,n=this.Frame.GetYData(i.X,!1),s={XValue:r,YValue:n},o=t.Data[r];s.DateTime={Date:o.Date},ze.IsNumber(o.Time)&&(s.DateTime.Time=o.Time),this.Value[a]=s}else for(var a in this.Point){i=this.Point[a],r=parseInt(this.Frame.GetXData(i.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);n=this.Frame.GetYData(i.Y,!1),s={XValue:r,YValue:n},o=t.Data[r];s.DateTime={Date:o.Date},ze.IsNumber(o.Time)&&(s.DateTime.Time=o.Time),this.Value[a]=s}return!0},this.PointToValue_Minute=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;if(e)for(var a=0;a<this.Point.length;++a){var i=this.Point[a],r=parseInt(this.Frame.GetXData(i.Y)),n=this.Frame.GetYData(i.X),s={XValue:r,YValue:n},o=t.Data[r];s.DateTime={Date:o.Date,Time:o.Time},this.Value[a]=s}else{var h=Er.GetTimeData(this.Symbol);for(a=0;a<this.Point.length;++a){i=this.Point[a],r=parseInt(this.Frame.GetXData(i.X)),n=this.Frame.GetYData(i.Y);if(r>=t.Data.length){var l=r%h.length,u=t.Data.length-1,c=(s={XValue:r,YValue:n},o=t.Data[u],h[l]);s.DateTime={Date:o.Date,Time:c},this.Value[a]=s}else{s={XValue:r,YValue:n},o=t.Data[r];s.DateTime={Date:o.Date,Time:o.Time},this.Value[a]=s}}}return!0},this.IsPointIn=function(t,e,a){return!1},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;this.Point=[];for(var a=0;a<this.Value.length;++a){var i=this.Value[a],r=new N;e?(r.Y=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.X=this.Frame.GetYFromData(i.YValue,!1)):(r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1)),this.Point[a]=r}},this.UpdateXValue=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;for(var e=[],a=0;a<this.Value.length;++a){var i=this.Value[a];if(!i.DateTime)break;var r={Date:i.DateTime.Date};ze.IsNumber(i.DateTime.Time)&&(r.Time=i.DateTime.Time),e[a]=r}for(var a in t.FindDataIndexByDateTime(e),e){var n=e[a],s=this.Value[a];n.Index>=0&&(s.XValue=n.Index)}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;if(null==this.MovePointIndex)return!1;var i=parseInt(this.MovePointIndex);if(100===i)for(var r in this.Point)this.Point[r].X+=t,this.Point[r].Y+=e;else{if(0!==i&&1!==i&&2!==i&&3!==i&&4!==i&&5!==i)return!1;i<this.Point.length&&(this.Point[i].X+=t,this.Point[i].Y+=e)}},this.ClipFrame=function(){if(this.Frame.IsHScreen)var t=this.Frame.ChartBorder.GetLeftEx(),e=this.Frame.ChartBorder.GetTop(),a=this.Frame.ChartBorder.GetWidthEx(),i=this.Frame.ChartBorder.GetHeight();else t=this.Frame.ChartBorder.GetLeft(),e=this.Frame.ChartBorder.GetTopEx(),a=this.Frame.ChartBorder.GetWidth(),i=this.Frame.ChartBorder.GetHeightEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(t,e,a,i),this.Canvas.clip()},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.Data;if(!a)return null;for(var i=this.Frame.XPointCount,r=0,n=this.Frame.IsHScreen,s=0;s<this.Value.length;++s){var o=this.Value[s],h=o.XValue-a.DataOffset;(h<0||h>=i)&&++r;var u=new N;n?(u.Y=this.Frame.GetXFromIndex(o.XValue-a.DataOffset,!1),u.X=this.Frame.GetYFromData(o.YValue,!1)):(u.X=this.Frame.GetXFromIndex(o.XValue-a.DataOffset,!1),u.Y=this.Frame.GetYFromData(o.YValue,!1)),e.push(u)}if(t&&!0===t.IsCheckX&&r==this.Value.length)return null}else{for(s=0;s<this.Point.length;++s){o=this.Point[s];e.push({X:o.X,Y:o.Y})}if(this.OnlyMoveXIndex){t={IsFixedX:this.OnlyMoveXIndex};if(l.Chart.Log("[IChartDrawPicture::CalculateDrawPoint] Status=".concat(this.Status," MovePointIndex=").concat(this.MovePointIndex," Identify=").concat(this.Frame.Identify)),this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var c=-1;2==this.Status&&(c=1),ze.IsNumber(this.MovePointIndex)&&(c=this.MovePointIndex),c>=0&&(t.Magnet={Enable:!0,PointIndex:c,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(e,t)}}return e},this.AdjustPoint=function(t,e){return!!this.Frame&&("MinuteFrame"!=this.Frame.ClassName&&"MinuteHScreenFrame"!=this.Frame.Class&&this.AdjustPoint_KLine(t,e))},this.AdjustPoint_KLine=function(t,e){if(!e)return!1;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;var i=this.Frame.IsHScreen;if(i)for(var r=0;r<t.length;++r)var n=t[r],s=parseInt(this.Frame.GetXData(n.Y))+a.DataOffset;else for(r=0;r<t.length;++r){n=t[r];var o=parseInt(this.Frame.GetXData(n.X,!1));s=o+a.DataOffset;if(s<0?s=0:s>=a.Data.length&&(s=a.Data.length-1),e.IsFixedX&&(o=s-a.DataOffset,n.X=this.Frame.GetXFromIndex(o,!1)),e.Magnet&&e.Magnet.Enable&&r==e.Magnet.PointIndex){for(var h=a.Data[s],l=[h.Open,h.High,h.Low,h.Close],u=null,c=null,d=0;d<l.length;++d){var f=this.Frame.GetYFromData(l[d]),C=Math.abs(n.Y-f);(!ze.IsNumber(u)||u>C)&&(u=C,c=f)}1==e.Magnet.Type?ze.IsNumber(c)&&(n.Y=c):u<e.Magnet.Distance&&ze.IsNumber(c)&&(n.Y=c)}}},this.IsYValueInFrame=function(t){return!!this.Frame&&!(t>this.Frame.HorizontalMax||t<this.Frame.HorizontalMin)},this.DrawPoint=function(t){if(ze.IsNonEmptyArray(t)){var e=this.PointColor,a=!1;if(this.IsShowPoint);else if(this.GetActiveDrawPicture){var i=this.GetActiveDrawPicture();if(i.Move.Guid!=this.Guid&&i.Select.Guid!=this.Guid&&i.MoveOn.Guid!=this.Guid)return;i.Select.Guid!=this.Guid&&i.MoveOn.Guid==this.Guid&&(a=!0,e=this.MoveOnPointColor)}this.ClipFrame();var r=I();this.Canvas.fillStyle=e,2==this.PointType&&(this.Canvas.fillStyle=this.PointBGColor,this.Canvas.strokeStyle=this.PointColor,this.Canvas.lineWidth=a?1*r:2*r);for(var n=0;n<t.length;++n){var s=t[n];if(1==this.PointType){var o=this.SquareSize*r,h=s.X-o/2,l=s.Y-o/2;this.Canvas.fillRect(h,l,o,o)}else if(2==this.PointType){var u=new Path2D;u.arc(s.X,s.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(u),this.Canvas.stroke(u)}else this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(),this.Canvas.closePath()}this.Canvas.restore()}},this.CalculateExtendLinePoint=function(t,e){var a={},i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetTopEx()),r=this.Frame.ChartBorder.GetBottom(),n=e.X-t.X,s=e.Y-t.Y;if(n>0){var o=r-t.Y,h=n*o/s,l=new N;l.X=t.X+h,l.Y=r,a.End=l;o=e.Y-i,h=n*o/s;var u=new N;u.Y=i,u.X=e.X-h,a.Start=u}else{o=r-t.Y,h=Math.abs(n)*o/s,l=new N;l.X=t.X-h,l.Y=r,a.End=l;o=e.Y-i,h=Math.abs(n)*o/s,u=new N;u.Y=i,u.X=e.X+h,a.Start=u}return a},this.CalculateExtendLineEndPoint=function(t){var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=this.Frame.ChartBorder.GetBottomEx(),r=this.Frame.ChartBorder.GetTopEx(),n=t[1].X-t[0].X,s=t[1].Y-t[0].Y;if(n>0){var o=a-t[0].X,h=o*s/n,l=h+t[0].Y;if(l>=r&&l<=i){var u=new N;return u.X=a,u.Y=l,u}if(s>0){var c=i-t[0].Y,d=n*c/s,f=d+t[0].X,C=new N;return C.X=f,C.Y=i,C}c=r-t[0].Y,d=n*c/s,f=d+t[0].X,C=new N;return C.X=f,C.Y=r,C}o=t[0].X-e,h=o*s/Math.abs(n),l=h+t[0].Y;if(l>=r&&l<=i){u=new N;return u.X=e,u.Y=l,u}if(s>0){c=i-t[0].Y,d=n*c/s,f=d+t[0].X,C=new N;return C.X=f,C.Y=i,C}c=r-t[0].Y,d=n*c/s,f=d+t[0].X,C=new N;return C.X=f,C.Y=r,C},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;var i=this.Frame.Data;if(!i)return-1;if(!this.Value)return-1;var r=5;a&&ze.IsNumber(a.Zoom)?r+=a.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=this.Frame.IsHScreen;r*=I();for(var s=0;s<this.Value.length;++s){var o=this.Value[s],h=new N;if(n?(h.Y=this.Frame.GetXFromIndex(o.XValue-i.DataOffset),h.X=this.Frame.GetYFromData(o.YValue)):(h.X=this.Frame.GetXFromIndex(o.XValue-i.DataOffset),h.Y=this.Frame.GetYFromData(o.YValue)),this.Canvas.beginPath(),this.Canvas.arc(h.X,h.Y,r,0,360),this.Canvas.isPointInPath(t,e))return s}return-1},this.IsPointInLine=function(t,e,a){if(!this.LinePoint)return-1;var i=5;a&&ze.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom);var r=I();i*=r;for(var n=0;n<this.LinePoint.length;++n){var s=this.LinePoint[n],o=s.Start,h=s.End;if(this.Canvas.beginPath(),o.X==h.X?(this.Canvas.moveTo(o.X-i,o.Y),this.Canvas.lineTo(o.X+i,o.Y),this.Canvas.lineTo(h.X+i,h.Y),this.Canvas.lineTo(h.X-i,h.Y)):(this.Canvas.moveTo(o.X,o.Y+i),this.Canvas.lineTo(o.X,o.Y-i),this.Canvas.lineTo(h.X,h.Y-i),this.Canvas.lineTo(h.X,h.Y+i)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return n}return-1},this.IsPointIn_XYValue_Line=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);return i>=0?i:(i=this.IsPointInLine(t,e,a),i>=0?100:-1)},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.CreateLineData=function(t,e){var a={Start:new N,End:new N};return a.Start.Y=t.Y,a.Start.X=t.X,a.End.Y=e.Y,a.End.X=e.X,a},this.ExportStorageData=function(){for(var t={ClassName:this.ClassName,Symbol:this.Symbol,Guid:this.Guid,Period:this.Period,Value:[],FrameID:this.Frame.Identify,LineColor:this.LineColor,AreaColor:this.AreaColor,LineWidth:this.LineWidth,Right:this.Right,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate},e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption=this.FontOption),t},this.ExportBaseData=function(){var t={ClassName:this.ClassName,Guid:this.Guid,FrameID:this.Frame.Identify,Symbol:this.Symbol,Period:this.Period,Right:this.Right,LineColor:this.LineColor,LineWidth:this.LineWidth,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate};return this.AreaColor&&(t.AreaColor=this.AreaColor),this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption={},this.SetFont(t.FontOption,this.FontOption)),t},this.IsFrameMinSize=function(){return this.Frame&&this.Frame.IsMinSize},this.PointRange=function(t){if(!ze.IsNonEmptyArray(t))return null;if(1==t.length){var e={Points:[{X:t[0].X,Y:t[0].Y}]};return e}for(var a=t[0].X,i=a,r=t[0].Y,n=r,s=[{X:t[0].X,Y:t[0].Y}],o=1;o<t.length;++o)a<t[o].X&&(a=t[o].X),i>t[o].X&&(i=t[o].X),r<t[o].Y&&(r=t[o].Y),n>t[o].Y&&(n=t[o].Y),s.push({X:t[o].X,Y:t[o].Y});e={X:{Max:{X:a},Min:{X:i}},Y:{Max:{Y:r},Min:{Y:n}},Points:s};return e},this.GetXYCoordinate_default=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});return this.PointRange(t)},this.GetXYCoordinate=function(){return null},this.CopyData_default=function(){if(!this.Frame)return null;var t=this.ExportStorageData();if(!t)return null;var e=0;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class);else{var a=this.Frame.Data;if(!a)return null;e=a.DataOffset}for(var i=this.Frame.ChartBorder.GetHeight(),r=this.Frame.ChartBorder.GetBottomEx()-this.Point[0].Y,n=0;n<t.Value.length;++n){var s=t.Value[n],o=this.Point[n];if(s.XIndex=s.XValue-e+1,0==n)s.XOffset=0,s.YOffset=0;else{var h=t.Value[n-1],l=this.Point[n-1];s.XOffset=s.XValue-h.XValue,s.YOffset=o.Y-l.Y}}return t.DataOffset=e,t.YFristScale=r/i,t.Height=i,t},this.SetFont=function(t,e){e&&t&&(e.Family&&(t.Family=e.Family),e.Weight&&(t.Weight=e.Weight),e.Style&&(t.Style=e.Style),ze.IsNumber(e.Size)&&(t.Size=e.Size))},this.GetFontString=function(t){var e=16*I()+"px 微软雅黑";if(!t||!t.Family||!ze.IsPlusNumber(t.Size))return e;var a="";return t.Color&&(a+=t.Color+" "),t.Style&&(a+=t.Style+" "),t.Weight&&(a+=t.Weight+" "),a+=t.Size*I()+"px ",a+=t.Family,a},this.GetMultiLineText=function(t,e,a,i){a&&(this.Canvas.font=a);var r=this.Canvas.measureText(t).width;if(r<=e)return{AryText:[{Text:t}]};var n=this.Canvas.measureText("擎").width,s=parseInt(e/n),o=0,h=[];while(o<t.length-1){var l=s,u=o+l;u>=t.length&&(u=t.length-1,l=u-o);var c=t.slice(o,o+l);r=this.Canvas.measureText(c).width;if(r>e){for(var d=l;d>=0;--d)if(c=t.slice(o,o+d),r=this.Canvas.measureText(c).width,r<e){h.push({Text:c}),o+=d;break}}else if(r<e){var f=!1;for(d=l;d+o<=t.length;++d)if(c=t.slice(o,o+d),r=this.Canvas.measureText(c).width,r>e){c=t.slice(o,o+d-1),h.push({Text:c}),o+=d-1,f=!0;break}f||(h.push({Text:c}),o=t.length-1)}else h.push({Text:c}),o+=l}return{AryText:h}},this.CloneArrayText=function(t){if(!ze.IsNonEmptyArray(t))return[];for(var e=[],a=0;a<t.length;++a){var i=t[a];i&&e.push({Text:i.Text})}return e},this.CalculateAngle=function(t,e,a,i){var r=Math.abs(t-a),n=Math.abs(e-i),s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),o=r/s,h=Math.acos(o),l=180/(Math.PI/h);return a==t&&i<e?90:a==t&&i>e?270:a>t&&i==e?0:a<t&&i==e?180:a>t&&i>e?360-l:a<t&&i>e?180+l:a<t&&i<e?180-l:l}}function wa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowYCoordinate=!1,this.CopyData=this.CopyData_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.GetYCoordinatePoint=function(){if(this.IsFrameMinSize())return null;if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;if(10!=this.Status)return null;for(var t=[],e=0;e<this.Value.length;++e){var a=this.Value[e],i=this.Frame.GetYFromData(a.YValue,!1);t.push({Y:i,YValue:a.YValue,Item:a,Color:this.PointColor})}return t}}function Fa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawGraffitiLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=null,this.PointCount=2,this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;if(t)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=this.Frame.GetYData(a.X),r={XValue:a.Y,YValue:i};this.Value[e]=r}else for(e=0;e<this.Point.length;++e){a=this.Point[e],i=this.Frame.GetYData(a.Y),r={XValue:a.X,YValue:i};this.Value[e]=r}return!0},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;for(var e in this.Point=[],this.Value){var a=this.Value[e],i=new N;t?(i.Y=a.XValue,i.X=this.Frame.GetYFromData(a.YValue)):(i.X=a.XValue,i.Y=this.Frame.GetYFromData(a.YValue,!1)),this.Point[e]=i}},this.UpdateXValue=function(){},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.IsHScreen;for(var i in this.Value){var r=this.Value[i],n=new N;a?(n.Y=r.XValue,n.X=this.Frame.GetYFromData(r.YValue,!1)):(n.X=r.XValue,n.Y=this.Frame.GetYFromData(r.YValue,!1)),e.push(n)}}else e=this.Point;return e},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;if(!this.Value)return-1;var i=5;a&&ze.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom);var r=this.Frame.IsHScreen;i*=I();for(var n=0;n<this.Value.length;++n){var s=this.Value[n],o=new N;if(r?(o.Y=s.XValue,o.X,this.Frame.GetYFromData(s.YValue)):(o.X=s.XValue,o.Y=this.Frame.GetYFromData(s.YValue)),this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,i,0,360),this.Canvas.isPointInPath(t,e))return n}return-1},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}}function Ma(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawArrowLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.ArrawLineWidth=5,this.ArrawLength=15,this.ArrawAngle=35,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1],i=this.ArrawAngle,r=this.ArrawLength,n=180*Math.atan2(e.Y-a.Y,e.X-a.X)/Math.PI,s=(n+i)*Math.PI/180,o=(n-i)*Math.PI/180,h=r*Math.cos(s),l=r*Math.sin(s),u=r*Math.cos(o),c=r*Math.sin(o);this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.Canvas.beginPath();var d=a.X+h,f=a.Y+l;this.Canvas.moveTo(d,f),this.Canvas.lineTo(a.X,a.Y),d=a.X+u,f=a.Y+c,this.Canvas.lineTo(d,f),this.Canvas.lineWidth=this.ArrawLineWidth*I(),this.Canvas.stroke(),this.RestoreLineWidth();var C={Start:e,End:a};this.LinePoint.push(C),this.DrawPoint([t[0]]),this.Canvas.restore()}}}}function La(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHaflLine",this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FullLine,this.IsPointIn=function(t,e,a){var i=this.IsPointIn_XYValue_Line(t,e,a);if(i>=0)return i;if(!this.FullLine)return i;var r=this.FullLine.Start,n=this.FullLine.End,s=I(),o=5*s;return this.Canvas.beginPath(),r.X==n.X?(this.Canvas.moveTo(r.X-o,r.Y),this.Canvas.lineTo(r.X+o,r.Y),this.Canvas.lineTo(n.X+o,n.Y),this.Canvas.lineTo(n.X-o,n.Y)):(this.Canvas.moveTo(r.X,r.Y+o),this.Canvas.lineTo(r.X,r.Y-o),this.Canvas.lineTo(n.X,n.Y-o),this.Canvas.lineTo(n.X,n.Y+o)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?100:i},this.Draw=function(){if(this.LinePoint=[],this.FullLine=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1];this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y);var i=this.CalculateExtendLineEndPoint(t);this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore(),this.FullLine={Start:t[0],End:i}}}}}function Ea(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.Label,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.Label&&(this.Label=t.Label)},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.PointCount=1,this.ClassName="ChartDrawPictureHorizontalLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=16*I()+"px 微软雅黑",this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint();return this.PointRange(t)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetRight();e&&(a=this.Frame.ChartBorder.GetTop(),i=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(t[0].X,a),this.Canvas.lineTo(t[0].X,i)):(this.Canvas.moveTo(a,t[0].Y),this.Canvas.lineTo(i,t[0].Y)),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:new N,End:new N};if(e?(r.Start.X=t[0].X,r.Start.Y=a,r.End.X=t[0].X,r.End.Y=i):(r.Start.X=a,r.Start.Y=t[0].Y,r.End.X=i,r.End.Y=t[0].Y),this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var n=t[0].X,s=a;this.Canvas.translate(n,s),this.Canvas.rotate(90*Math.PI/180);var o=this.Frame.GetYData(t[0].X),h=o.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+o.toFixed(2):1==this.Label.Position&&(h=o.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,0,0)}else{this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";o=this.Frame.GetYData(t[0].Y),h=o.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+o.toFixed(2):1==this.Label.Position&&(h=o.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,a,t[0].Y)}this.Canvas.restore()}}}}function Na(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.LineWidth=1,this.Precision=2,this.ValueTextColor="rgb(250,250,250)",this.IsShowCorssCursor=!0,this.GetLabelCallback,this.PointCount=1,this.ClassName="ChartDrawHLine",this.Font=14*I()+"px 微软雅黑",this.TextFont=12*I()+"px 微软雅黑",this.RightSpaceWidth=50,this.ButtonPosition=0,this.ButtonBGColor="rgb(190,190,190)",this.ButtonSpace=3,this.Button={CloseIcon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:16},SettingIcon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:16}},this.AryButton=[],this.ExtendData,this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t){if(t.GetLabelCallback&&(this.GetLabelCallback=t.GetLabelCallback),ze.IsNumber(t.Precision)&&(this.Precision=t.Precision),ze.IsNumber(t.Precision)&&(this.Precision=t.Precision),t.Font&&(this.Font=t.Font),t.ValueTextColor&&(this.ValueTextColor=t.ValueTextColor),ze.IsNumber(t.ButtonPosition)&&(this.ButtonPosition=t.ButtonPosition),ze.IsNumber(t.RightSpaceWidth)&&(this.RightSpaceWidth=t.RightSpaceWidth),t.Button){var e=t.Button;e.CloseIcon&&(this.Button.CloseIcon=E(e.CloseIcon)),e.SettingIcon&&(this.Button.SettingIcon=E(e.SettingIcon))}t.ExtendData&&(this.ExtendData=t.ExtendData)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint();return this.PointRange(t)},this.IsDrawMain=function(){if(!this.GetActiveDrawPicture)return!0;var t=this.GetActiveDrawPicture();return t.Select.Guid!=this.Guid},this.MainDraw=function(){this.Draw()},this.Draw=function(t,e){if(this.LinePoint=[],this.AryButton=[],this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,!this.IsFrameMinSize()){var a=this.CalculateDrawPoint();if(a&&1==a.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var i=this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetLeft(),n=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetTop(),n=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),i?(this.Canvas.moveTo(a[0].X,r),this.Canvas.lineTo(a[0].X,n)):(this.Canvas.moveTo(r,F(a[0].Y)),this.Canvas.lineTo(n,F(a[0].Y))),this.Canvas.stroke(),this.RestoreLineWidth();var s,o={Start:new N,End:new N};i?(o.Start.X=a[0].X,o.Start.Y=r,o.End.X=a[0].X,o.End.Y=n):(o.Start.X=r,o.Start.Y=a[0].Y,o.End.X=n,o.End.Y=a[0].Y),this.LinePoint.push(o),this.GetLabelCallback&&(s=this.GetLabelCallback(this)),s&&this.DrawLab(s,a[0].Y);var h=r+(n-r)/2,l={X:h,Y:a[0].Y};this.DrawPoint([l]),this.Canvas.restore();var u={};if(this.CalculateButtonSize(),this.DrawValueText(a[0].Y,u,s),s&&this.DrawRightLab(s,u),t&&e)for(var c=0;c<this.AryButton.length;++c){var d=this.AryButton[c],f=d.Rect;if(t.X>=f.Left&&t.X<f.Right&&t.Y>=f.Top&&t.Y<=f.Bottom){e.MouseOnToolbar={Rect:f,Item:d,Frame:this.Frame,Point:{X:t.X,Y:t.Y}};break}}}}},this.CalculateLabSize=function(t){this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.TextFont;var e=this.Canvas.measureText("擎").width+2,a=0,i=0,r=0,n=0;ze.IsNumber(t.LineSpace)&&(n=t.LineSpace);a=0,i=0,r=0;for(var s=0,o=0;o<t.AryText.length;++o){var h=t.AryText[o];h.NameWidth=0,h.TextWidth=0,h.Name&&(h.NameWidth=this.Canvas.measureText(h.Name).width+2),h.Text&&(h.TextWidth=this.Canvas.measureText(h.Text).width+2),a<h.NameWidth&&(a=h.NameWidth),i<h.TextWidth&&(i=h.TextWidth);var l=h.NameWidth+h.TextWidth;s<l&&(s=l),++r}var u={Width:s,Height:r*(e+n)+n,NameWidth:a,TextWidth:i,LineHeight:e};return u},this.DrawLab=function(t,e){if(t&&ze.IsNonEmptyArray(t.AryText)&&2!==t.Position){this.Frame.ChartBorder.GetLeft();var a=this.Frame.ChartBorder.GetRight(),i=this.CalculateLabSize(t),r=a-i.Width,n=e-i.Height-1;if(t.BGColor){this.Canvas.fillStyle=t.BGColor;var s=e-i.Height-4;this.Canvas.fillRect(L(r),L(s),L(a+r),L(e-s))}for(var o=n,h=0;h<t.AryText.length;++h){var l=t.AryText[h];l.Name&&(this.Canvas.fillStyle=l.NameColor,this.Canvas.fillText(l.Name,r+1,o+1)),l.Text&&(this.Canvas.fillStyle=l.TextColor,this.Canvas.fillText(l.Text,r+i.NameWidth+1,o+1)),o+=i.LineHeight}}},this.DrawRightLab=function(t,e){if(t&&ze.IsNonEmptyArray(t.AryText)&&2==t.Position){var a=this.CalculateLabSize(t),i=e.Right-a.Width,r=e.Bottom,n=0;if(ze.IsNumber(t.LineSpace)&&(n=t.LineSpace),t.BGColor){this.Canvas.fillStyle=t.BGColor;var s=r;this.Canvas.fillRect(L(i),L(s),L(a.Width),L(a.Height))}var o=r+1+n;this.Canvas.textBaseline="top";for(var h=0;h<t.AryText.length;++h){var l=t.AryText[h];l.Name&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=l.NameColor,this.Canvas.fillText(l.Name,i+1,o+1)),l.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=l.TextColor,this.Canvas.fillText(l.Text,e.Right-1,o+1)),o+=a.LineHeight+n}}},this.DrawValueText=function(t,e,a){this.Frame.ChartBorder.GetLeft();var i=this.Frame.ChartBorder.GetRight();this.RightSpaceWidth>0&&(this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(i,F(t)),this.Canvas.lineTo(i+this.RightSpaceWidth,F(t)),this.Canvas.stroke());var r=this.Frame.GetYData(t),n=r.toFixed(this.Precision);a&&a.PriceSuffixText&&(n+=a.PriceSuffixText),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var s=this.Canvas.measureText(n).width,o=this.GetFontHeight(),h={Left:i+this.RightSpaceWidth,Top:t-o/2,Width:s+4,Height:o};h.Right=h.Left+h.Width,h.Bottom=h.Top+h.Height,1==this.ButtonPosition?this.Canvas.fillRect(L(h.Left),L(h.Top),L(h.Width+this.ButtonBGWidth),L(h.Height)):this.Canvas.fillRect(L(h.Left),L(h.Top),L(h.Width),L(h.Height)),this.Canvas.fillStyle=this.ValueTextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(n,h.Left+2,t),e.Left=h.Left,e.Top=h.Top,e.Bottom=h.Bottom,e.Right=h.Right,this.DrawButton(h.Top,h.Right,o,e)},this.CalculateButtonSize=function(){var t=I();if(this.Button.SettingIcon){var e=this.Button.SettingIcon,a="".concat(e.Size*t,"px ").concat(e.Family);this.Canvas.font=a;var i=this.Canvas.measureText(e.Text).width;this.SettingButtonSize=i}if(this.Button.CloseIcon){e=this.Button.CloseIcon,a="".concat(e.Size*t,"px ").concat(e.Family);this.Canvas.font=a;i=this.Canvas.measureText(e.Text).width;this.ColseButtonSize=i}if(!(this.ColseButtonSize<=0&&this.SettingButtonSize<=0)){var r=0;this.SettingButtonSize>0&&(r+=this.SettingButtonSize),this.ColseButtonSize>0&&(r>0&&(r+=this.ButtonSpace),r+=this.ColseButtonSize),r+=4,this.ButtonBGWidth=r}},this.DrawButton=function(t,e,a,i){if(!(this.ColseButtonSize<=0&&this.SettingButtonSize<=0)){1==this.ButtonPosition&&(t-=a),this.Canvas.fillStyle=this.LineColor;var r=e,n={Left:e,Top:t,Width:this.ButtonBGWidth,Height:a};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height,this.Canvas.fillStyle=this.ButtonBGColor,this.Canvas.fillRect(L(n.Left),L(n.Top),L(n.Width),L(n.Height)),r+=1;var s=I();if(this.Button.SettingIcon){var o={Left:r,Top:t,Width:this.SettingButtonSize,Height:a};o.Right=o.Left+o.Width,o.Bottom=o.Top+o.Height;var h=o.Top+o.Height/2,l=o.Left+o.Width/2,u=this.Button.SettingIcon;this.Canvas.font="".concat(u.Size*s,"px ").concat(u.Family),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=u.Color,this.Canvas.fillText(this.Button.SettingIcon.Text,l,h),this.AryButton.push({Rect:o,ID:p.DRAW_PICTURE_SETTING}),r=o.Right+this.ButtonSpace}if(this.Button.CloseIcon){o={Left:r,Top:t,Width:this.ColseButtonSize,Height:a};o.Right=o.Left+o.Width,o.Bottom=o.Top+o.Height;h=o.Top+o.Height/2,l=o.Left+o.Width/2,u=this.Button.CloseIcon;this.Canvas.font="".concat(u.Size*s,"px ").concat(u.Family),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=u.Color,this.Canvas.fillText(this.Button.CloseIcon.Text,l,h),this.AryButton.push({Rect:o,ID:p.DRAW_PICTURE_DELETE}),r=o.Right}i.Right=n.Right}},this.PtInButtons=function(t,e){for(var a=0;a<this.AryButton.length;++a){var i=this.AryButton[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null}}function Pa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTrendLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1],i=this.CalculateExtendLinePoint(e,a);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(i.Start.X,i.Start.Y),this.Canvas.lineTo(i.End.X,i.End.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore()}}}}function Oa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureRect",this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});t&&2==t.length&&(this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.rect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.fillRect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.restore(),this.DrawPoint(t))}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;var i=this.Frame.Data;if(!i)return-1;var r=this.IsPointInXYValue(t,e,a);if(r>=0)return r;var n=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!n||2!=n.length)return-1;var s=[{X:n[0].X,Y:n[0].Y},{X:n[1].X,Y:n[0].Y}];return this.IsPointInLine(s,t,e,a)?100:(s=[{X:n[1].X,Y:n[0].Y},{X:n[1].X,Y:n[1].Y}],this.IsPointInLine2(s,t,e,a)?100:(s=[{X:n[1].X,Y:n[1].Y},{X:n[0].X,Y:n[1].Y}],this.IsPointInLine(s,t,e,a)?100:(s=[{X:n[0].X,Y:n[1].Y},{X:n[0].X,Y:n[0].Y}],this.IsPointInLine2(s,t,e,a)?100:-1)))},this.IsPointInLine=function(t,e,a,i){var r=5;i&&ze.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=I();if(r*=n,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y+r),this.Canvas.lineTo(t[0].X,t[0].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y+r),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0},this.IsPointInLine2=function(t,e,a,i){var r=5;i&&ze.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=I();if(r*=n,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X-r,t[0].Y),this.Canvas.lineTo(t[0].X+r,t[0].Y),this.Canvas.lineTo(t[1].X+r,t[1].Y),this.Canvas.lineTo(t[1].X-r,t[1].Y),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0}}function Ra(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureArc",this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){if(this.ClipFrame(),this.SetLineWidth(),t[0].X<t[1].X&&t[0].Y>t[1].Y){var e=t[1].X-t[0].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var s=1.5*Math.PI;s<2*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1);for(var o=0;o<=.5*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(s=0;s<=Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){e=t[0].X-t[1].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(s=.5*Math.PI;s<=1.5*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){e=t[1].X-t[0].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(s=Math.PI;s<=2*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;var i=this.Frame.Data;if(!i)return-1;var r=this.IsPointInXYValue(t,e,a);if(r>=0)return r;var n=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!n||2!=n.length)return-1;var s=[{X:n[0].X,Y:n[0].Y},{X:n[1].X,Y:n[1].Y}];return this.IsPointInArc(s,t,e)?100:-1},this.IsPointInArc=function(t,e,a){if(2!=t.length)return!1;if(t[0].X<t[1].X&&t[0].Y>t[1].Y){var i=t[1].X-t[0].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=1.5*Math.PI;c<2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var d=0;d<=.5*Math.PI;d+=n)this.Canvas.lineTo(l+i*Math.cos(d),u+r*Math.sin(d)*-1);for(var f=.5*Math.PI;f>=0;f-=h)this.Canvas.lineTo(l+s*Math.cos(f),u+o*Math.sin(d)*-1);for(var C=2*Math.PI;C>=1.5*Math.PI;C-=h)this.Canvas.lineTo(l+s*Math.cos(C),u+o*Math.sin(C)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){i=t[0].X-t[1].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(c=0;c<=Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(d=Math.PI;d>=0;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){i=t[0].X-t[1].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(c=.5*Math.PI;c<=1.5*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(d=1.5*Math.PI;d>=.5*Math.PI;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){i=t[1].X-t[0].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(c=Math.PI;c<=2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(d=2*Math.PI;d>=Math.PI;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}return!!this.Canvas.isPointInPath(e,a)}}function Ba(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveMW",this.PointCount=5,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],this.Frame&&!this.IsFrameMinSize()){this.IsHScreen=this.Frame.IsHScreen;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(this.Frame&&!(t.length<2))if(2==this.Status){var e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}else if(5==t.length){e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);e={Start:new N,End:new N};e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e);e={Start:new N,End:new N};e.Start.Y=t[2].Y,e.Start.X=t[2].X,e.End.Y=t[3].Y,e.End.X=t[3].X,this.LinePoint.push(e);e={Start:new N,End:new N};e.Start.Y=t[3].Y,e.Start.X=t[3].X,e.End.Y=t[4].Y,e.End.X=t[4].X,this.LinePoint.push(e)}}}function _a(){this.newMethod=Ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHeadShouldersBT",this.CalculateLines_Backup=this.CalculateLines,this.CalculateLines=function(t){if(this.Frame&&!(t.length<2)){if(2!=this.Status)return this.CalculateLines_Backup(t);var e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X-a):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y-i,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new N,End:new N},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);r=e.End,n=new N;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}}}function ka(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelLines",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.CenterLine={LineDash:[2*I(),3*I()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&t.CenterLine){var e=t.CenterLine;ze.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),ze.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)})),t},this.Draw=function(){if(this.LinePoint=[],this.CenterLine.Line=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.DrawArea(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){i=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(i.Start,i.End),this.Canvas.setLineDash([])}this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new N,s=new N;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a);n=new N,s=new N;n.X=t[0].X+i/2,n.Y=t[0].Y+r/2,s.X=t[1].X+i/2,s.Y=t[1].Y+r/2,a=this.CalculateExtendLinePoint(n,s),this.CenterLine.Line=a}}}function Ga(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFlatTop",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a=0;a<this.LinePoint.length;++a){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=t[1],a=new N;a.X=e.X,a.Y=this.LastPoint.Y,t[2]=a}if(2==t.length)this.LinePoint.push({Start:t[0],End:t[1]});else if(3==t.length){this.LinePoint.push({Start:t[0],End:t[1]});var i=t[2];i.X=t[1].X;var r={X:t[0].X,Y:i.Y},n={X:t[1].X,Y:i.Y};this.LinePoint.push({Start:r,End:n})}}}function Va(){this.newMethod=Ga,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawDisjontChannel",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint}function Ha(){this.newMethod=ka,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawParallelRaysLines",this.DrawArea=function(){},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a})}else if(3==t.length){a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a});var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new N,s=new N;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLineEndPoint([n,s]),this.LinePoint.push({Start:t[2],End:a})}}}function Ya(){this.newMethod=ka,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePriceChannel",this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new N,s=new N;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a);n=new N,s=new N;n.X=t[0].X-i,n.Y=t[0].Y-r,s.X=t[1].X-i,s.Y=t[1].Y-r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.lineTo(this.LinePoint[2].Start.X,this.LinePoint[2].Start.Y),this.Canvas.closePath(),this.Canvas.fill())}}function Xa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelChannel",this.ChannelWidth=50,this.AreaColor="rgba(25,25,25,0.4)",this.LinePoint=[],this.CenterLine={LineDash:[2*I(),3*I()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.ExportStorageData=function(){var t=this.ExportBaseData();t.ChannelWidth=this.ChannelWidth,t.Value=[];for(var e=0;e<this.Value.length&&e<2;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)}),t},this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&(ze.IsNumber(t.ChannelWidth)&&(this.ChannelWidth=t.ChannelWidth),t.CenterLine)){var e=t.CenterLine;ze.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),ze.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.CalculateDrawPoint=function(){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=[];if(10==this.Status)for(var a=0;a<2;++a){var i=this.Value[a],r=new N;r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1),e.push(r)}else for(a=0;a<this.Point.length;++a){i=this.Point[a],r=new N;r.X=i.X,r.Y=i.Y,e.push(r)}if(e.length>=2){var n={Start:new N,End:new N};if(n.Start.X=e[0].X,n.Start.Y=e[0].Y,n.End.X=e[1].X,n.End.Y=e[1].Y,this.LinePoint.push(n),3==e.length||10==this.Status){var s=n.End.X-n.Start.X,o=n.End.Y-n.Start.Y,h=Math.atan(Math.abs(s/o)),l=this.ChannelWidth/Math.sin(h);n={Start:new N,End:new N},n.Start.X=e[0].X,n.Start.Y=e[0].Y-l,n.End.X=e[1].X,n.End.Y=e[1].Y-l,this.LinePoint.push(n);var u=new N;u.X=n.Start.X+(n.End.X-n.Start.X)/2,u.Y=n.Start.Y+(n.End.Y-n.Start.Y)/2,e[3]=u,this.Point[2]=u;var c=parseInt(this.Frame.GetXData(u.X))+t.DataOffset,d=this.Frame.GetYData(u.Y);this.Value[2]={XValue:c,YValue:d},this.PointCount=this.Point.length,n={Start:new N,End:new N},n.Start.X=e[0].X,n.Start.Y=e[0].Y-l/2,n.End.X=e[1].X,n.End.Y=e[1].Y-l/2,this.CenterLine.Line=n}}return e},this.DrawArea=function(t,e,a,i){this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.closePath(),this.Canvas.fill()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),2==this.LinePoint.length&&this.DrawArea(this.LinePoint[0].Start,this.LinePoint[0].End,this.LinePoint[1].End,this.LinePoint[1].Start);for(var e=0;e<this.LinePoint.length;++e){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){a=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(a.Start,a.End),this.Canvas.setLineDash([])}this.Canvas.restore(),this.DrawPoint(t)}}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;if(100==this.MovePointIndex)for(var i=0;i<this.Point.length;++i)this.Point[i].X+=t,this.Point[i].Y+=e;else if(0==this.MovePointIndex||1==this.MovePointIndex)this.MovePointIndex<this.Point.length&&(this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e);else if(2==this.MovePointIndex){this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e;var r=this.Point[1].X-this.Point[0].X,n=this.Point[1].Y-this.Point[0].Y,s=Math.atan(Math.abs(r/n)),o=this.ChannelWidth/Math.sin(s)-e;this.ChannelWidth=Math.sin(s)*o}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;for(var i=0;i<this.Value.length;++i){var r=this.Value[i],n=new N;if(i<2)n.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),n.Y=this.Frame.GetYFromData(r.YValue);else{if(i>=this.Point.length)continue;n.X=this.Point[i].X,n.Y=this.Point[i].Y}if(this.Canvas.beginPath(),this.Canvas.arc(n.X,n.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}for(var i in this.LinePoint){r=this.LinePoint[i];var s=r.Start,o=r.End;if(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y+5),this.Canvas.lineTo(s.X,s.Y-5),this.Canvas.lineTo(o.X,o.Y-5),this.Canvas.lineTo(o.X,o.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return 100}return-1}}function Wa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureText",this.Text="文本",this.PointCount=1,this.FontOption={Family:"微软雅黑",Size:20,Weight:null,Style:null},this.TextRect=null,this.IsInitialized=!1,this.SettingMenu,this.HQChart,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.Text&&(this.Text=t.Text),t.FontOption&&(this.FontOption=t.FontOption))},this.Draw=function(t){if(this.TextRect=null,!this.IsFrameMinSize()){var e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=this.GetTextFont(),this.Canvas.fillText(this.Text,e[0].X,e[0].Y);var a=this.Canvas.measureText(this.Text).width,i=this.FontOption.Size*I();this.TextRect={},this.TextRect.Left=e[0].X-a/2,this.TextRect.Top=e[0].Y-i,this.TextRect.Width=a,this.TextRect.Height=i,this.Canvas.restore(),!1===this.IsInitialized&&(this.SetTextOption(),this.IsInitialized=!0)}}},this.GetTextFont=function(){var t=16*I()+"px 微软雅黑";if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return t;var e="";return this.FontOption.Color&&(e+=this.FontOption.Color+" "),this.FontOption.Style&&(e+=this.FontOption.Style+" "),this.FontOption.Weight&&(e+=this.FontOption.Weight+" "),this.FontOption.Size>=0&&(e+=this.FontOption.Size*I()+"px "),e+=this.FontOption.Family,e},this.SetTextOption=function(){l.Chart.Log("[ChartDrawPictureText::SetTextOption]"),this.SettingMenu||(this.SettingMenu=new wr(this.Frame.ChartBorder.UIElement.parentNode)),this.SettingMenu.ChartPicture=this,this.SettingMenu.HQChart=this.HQChart,this.SettingMenu.Position={Left:this.TextRect.Left+this.TextRect.Width,Top:this.TextRect.Top},this.SettingMenu.DoModal()},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;return a&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}function Ua(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureIconFont",this.PointCount=1,this.Text="",this.FontOption={Family:"iconfont",Size:24},this.TextRect=null,this.SettingMenu,this.Angle=0,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.FontOption&&t.FontOption.Size>0&&(this.FontOption.Size=t.FontOption.Size),ze.IsNumber(t.Angle)&&(this.Angle=t.Angle))},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=I();this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0)):0!=this.Angle?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(this.Angle*(Math.PI/180)),this.Canvas.fillText(this.Text,0,0)):this.Canvas.fillText(this.Text,t[0].X,t[0].Y);var r=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-r/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i,this.TextRect.Width=r,this.TextRect.Height=this.FontOption.Size*i,this.Canvas.restore()}}}},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*I()+"px "),t+=this.FontOption.Family,t},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;if(!this.TextRect)return-1;var i=0;return this.Option&&this.Option.Zoom>=1&&(i=this.Option.Zoom*I()),this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left-i,this.TextRect.Top-i,this.TextRect.Width+2*i,this.TextRect.Height+2*i),this.Canvas.isPointInPath(t,e)?100:-1}}function za(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFan",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LinePoint=[],this.Font=16*I()+"px 微软雅黑",this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=this.GetQuadrant(t[0],t[1]);if(this.SetLineWidth(),1===e||4===e){for(var a in this.CalculateLines(t[0],t[1],e),this.DrawArea(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End,i.IsDottedLine)}for(var a in this.LinePoint){i=this.LinePoint[a];i.Text&&i.PtEnd&&this.DrawTitle(i.PtEnd,i.Text)}}else this.DrawLine(t[0],t[1],!1);this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X<e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:8"==i.Text?t=this.LinePoint[a]:"8:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();var i=[.5,1/3,.25,.125,2/3],r=["1:2","1:3","1:4","1:8","2:3"],n=["2:1","3:1","4:1","8:1","3:2"],s=new N,o=new N;s.X=t.X,s.Y=t.Y,o.X=e.X,o.Y=e.Y;var h=Math.abs(t.X-e.X),l=Math.abs(t.Y-e.Y);if(1===a){var u=this.CalculateExtendLinePoint(t,e),c={Start:s,End:u.Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var d in this.LinePoint.push(c),i){if(h>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new N,Text:r[d]},c.PtEnd.Y=e.Y,c.PtEnd.X=t.X+h*i[d];u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.Start,this.LinePoint.push(c)}if(l>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new N,Text:n[d]},c.PtEnd.Y=t.Y-l*i[d],c.PtEnd.X=e.X;u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.Start,this.LinePoint.push(c)}}}else{if(4!=a)return!1;u=this.CalculateExtendLinePoint(t,e),c={Start:s,End:u.End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var d in this.LinePoint.push(c),i){if(h>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new N,Text:r[d]},c.PtEnd.Y=e.Y,c.PtEnd.X=t.X+h*i[d];u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.End,this.LinePoint.push(c)}if(l>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new N,Text:n[d]},c.PtEnd.Y=t.Y+l*i[d],c.PtEnd.X=e.X;u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.End,this.LinePoint.push(c)}}}return!0}}function Ka(){this.newMethod=za,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLine",this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();var i=[1/3,2/3],r=["3:1","3:2"],n=new N,s=new N;n.X=t.X,n.Y=t.Y,s.X=e.X,s.Y=e.Y;Math.abs(t.X-e.X);var o=Math.abs(t.Y-e.Y);if(1===a){var h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var u in this.LinePoint.push(l),i)if(o>5){l={Start:n,End:null,IsDottedLine:!1,PtEnd:new N,Text:r[u]},l.PtEnd.Y=t.Y-o*i[u],l.PtEnd.X=e.X;h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.Start,this.LinePoint.push(l)}}else{if(4!=a)return!1;h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var u in this.LinePoint.push(l),i)if(o>5){l={Start:n,End:null,IsDottedLine:!1,PtEnd:new N,Text:r[u]},l.PtEnd.Y=t.Y+o*i[u],l.PtEnd.X=e.X;h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.End,this.LinePoint.push(l)}}return!0},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:1"==i.Text?t=this.LinePoint[a]:"3:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())}}function Ja(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGoldenSection",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=14*I()+"px 微软雅黑",this.GetSectionData=function(){return[0,.236,.382,.5,.618,.8,1,1.236,1.382,1.5,1.618,1.8,2]},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){for(var e in this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.CalculateLines(t[0],t[1]),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End,a.IsDottedLine)}for(var e in this.RestoreLineWidth(),this.LinePoint){a=this.LinePoint[e];a.Text&&this.DrawTitle(a.Start,a.Text)}this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateHSCreenLines=function(t,e){for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetTop(),r=this.Frame.ChartBorder.GetBottom(),n=t.X-e.X,s=0;s<a.length;++s){var o=n*a[s],h={Start:new N,End:new N};h.Start.X=t.X-o,h.Start.Y=i,h.End.X=t.X-o,h.End.Y=r;var l="";l=0==s?"Base ":(100*a[s]).toFixed(2)+"% ";var u=this.Frame.GetYData(h.Start.X);l+=u.toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.CalculateLines=function(t,e){if(this.Frame.IsHScreen)this.CalculateHSCreenLines(t,e);else for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=t.Y-e.Y,s=0;s<a.length;++s){var o=n*a[s],h={Start:new N,End:new N};h.Start.Y=t.Y-o,h.Start.X=i,h.End.Y=t.Y-o,h.End.X=r;var l="";l=0==s?"Base ":(100*a[s]).toFixed(2)+"% ";var u=this.Frame.GetYData(h.Start.Y);l+=u.toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()):this.Canvas.fillText(e,t.X,t.Y)}}function Qa(){this.newMethod=Ja,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePercentage",this.GetSectionData=function(){return[0,.25,.333,.5,1]}}function $a(){this.newMethod=Ja,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveBand",this.GetSectionData=function(){return[0,.125,.25,.375,.5,.625,.75,.875,1]}}function ja(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTriangle",this.PointCount=3,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){var e=t.slice(0);for(var a in this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(e),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(e),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){3==t.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y),this.Canvas.lineTo(t[2].X,t[2].Y),this.Canvas.lineTo(t[0].X,t[0].Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2===t.length){var a={Start:new N,End:new N};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a)}else if(3===t.length){a={Start:new N,End:new N};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a),a={Start:new N,End:new N},a.Start.Y=t[1].Y,a.Start.X=t[1].X,a.End.Y=t[2].Y,a.End.X=t[2].X,this.LinePoint.push(a),a={Start:new N,End:new N},a.Start.Y=t[2].Y,a.Start.X=t[2].X,a.End.Y=t[0].Y,a.End.X=t[0].X,this.LinePoint.push(a)}}}function Za(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureSymmetryAngle",this.PointCount=2,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawArea(),this.DrawPoint(t),this.DrawTitle(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(2==t.length&&this.Frame){var e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),e={Start:new N,End:new N},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X,this.LinePoint.push(e);var a=t[0].X-t[1].X;e={Start:new N,End:new N},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X+a,this.LinePoint.push(e)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status}}function qa(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureCircle",this.PointCount=2,this.CircleData,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=Math.sqrt(e*e+a*a);this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.LineColor,this.DrawLine(t[0],t[1]),this.Canvas.beginPath(),this.Canvas.arc(t[0].X,t[0].Y,i,0,2*Math.PI),this.Canvas.stroke(),this.Canvas.fill(),this.CircleData={X:t[0].X,Y:t[0].Y,R:i},this.DrawPoint(t),this.Canvas.restore()}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);if(i>=0)return i;if(this.CircleData&&this.CircleData.R>8){var r=this.CircleData.X-t,n=this.CircleData.Y-e,s=Math.sqrt(r*r+n*n);if(s<this.CircleData.R&&s>this.CircleData.R-8)return 100}return-1}}function ti(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureQuadrangle",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=ba.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){4==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a);a=this.CreateLineData(t[1],t[2]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new N;n.X=t[0].X+i,n.Y=t[0].Y+r;a=this.CreateLineData(t[2],n);this.LinePoint.push(a);a=this.CreateLineData(n,t[0]);this.LinePoint.push(a)}}}function ei(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureFibonacci",this.PointCount=1,this.Font=14*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&(this.CalculateLines(),!(this.LinePoint.length<=0))){for(var e in this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End),this.DrawTitle(a.Start,a.Title)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,2,10),this.Canvas.restore()):this.Canvas.fillText(e,t.X+2,t.Y+10)},this.CalculateHSCreenLines=function(){var t=this.Frame.Data;if(t){var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].Y))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetRightEx(),i=this.Frame.ChartBorder.GetLeftEx(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],s=0;s<n.length;++s){var o=e+n[s],h=o-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(o-t.DataOffset,!1),u={Start:new N,End:new N,Title:n[s]};u.Start.X=a,u.Start.Y=l,u.End.X=i,u.End.Y=l,this.LinePoint.push(u)}}}},this.CalculateLines=function(){if(!(this.Status<2)&&this.Frame){var t=this.Frame.Data;if(t)if(this.Frame.IsHScreen)this.CalculateHSCreenLines();else{var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].X))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetTopEx(),i=this.Frame.ChartBorder.GetBottom(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],s=0;s<n.length;++s){var o=e+n[s],h=o-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(o-t.DataOffset,!1),u={Start:new N,End:new N,Title:n[s]};u.Start.Y=a,u.Start.X=l,u.End.Y=i,u.End.X=l,this.LinePoint.push(u)}}}}}}function ai(t){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawLinearRegression",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.Lines=[],this.IsShowMaxMinLine=!1,this.IsShowExtendLine=!1,this.ExtendLineDash=[5,5],this.MaxPoint,this.MinPoint,t&&(1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0)),this.ImportStorageData=function(t){1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0),t.Lines&&(this.Lines=t.Lines),t.MaxPoint&&t.MinPoint&&(this.MaxPoint=t.MaxPoint,this.MinPoint=t.MinPoint)},this.Super_ExportStorageData=this.ExportStorageData,this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),t.IsShowMaxMinLine=this.IsShowMaxMinLine,t.IsShowExtendLine=this.IsShowExtendLine,t.Lines=this.Lines,this.IsShowMaxMinLine&&(t.MaxPoint=this.MaxPoint,t.MinPoint=this.MinPoint)),t},this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.Lines[0].X,Y:this.Lines[0].Y},this.Point[1]={X:this.Lines[this.Lines.length-1].X,Y:this.Lines[this.Lines.length-1].Y},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];if(10==this.Status)this.DrawLinearLines();else{var i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx(),n=this.PointToKLine([e,a]),s=this.Calculate(n);this.Lines=s.Points,this.MaxPoint=s.Max,this.MinPoint=s.Min,this.DrawLinearLines(),this.Canvas.beginPath(),this.Canvas.moveTo(e.X,i),this.Canvas.lineTo(e.X,r),this.Canvas.moveTo(a.X,i),this.Canvas.lineTo(a.X,r),this.Canvas.stroke()}this.RestoreLineWidth();var o={Start:e,End:a};this.LinePoint.push(o),this.DrawPoint(t),this.Canvas.restore()}else 10==this.Status&&(this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.DrawLinearLines(),this.RestoreLineWidth(),this.Canvas.restore())}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);var i,r,n,s,o=a.XValue-e.XValue+1,h=this.Frame.Data.Data,l=a.XValue,u=0,c=0,d=0,f=0;for(n=0,g=o;n<o&&n<=l;++n,--g)u+=g,c+=h[l-n].Close;for(u/=o,c/=o,n=0,g=o;n<o&&n<=l;++n,--g)d+=(g-u)*(h[l-n].Close-c),f+=(g-u)*(g-u);r=d/f,i=c-u*r;var C=[],m=null,D=null;for(n=0,s=o;n<o&&n<=l;++n,--s){var p=a.XIndex-n,v=a.XValue-n,g=this.Frame.GetXFromIndex(p),S=r*s+i,I=this.Frame.GetYFromData(S,!1),T={X:g,Y:I,XValue:v,YValue:S};C.push(T),(null==m||m.High<h[v].High)&&(m={X:g,Y:I,XValue:v,YValue:S,High:h[v].High}),(null==D||D.Low>h[v].Low)&&(D={X:g,Y:I,XValue:v,YValue:S,Low:h[v].Low})}return{Points:C,Slope:r,Const:i,Max:m,Min:D}},this.DrawLinearLines=function(){if(!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=this.Frame.XPointCount,a=t.DataOffset,i=this.Frame.IsHScreen,r=[];for(var n in this.Lines){var s=this.Lines[n],o=s.XValue-a;if(!(o<0||o>=e)){var h={};i||(h.X=this.Frame.GetXFromIndex(o,!1),h.Y=this.Frame.GetYFromData(s.YValue,!1),h.YValue=s.YValue),r.push(h)}}if(r.length>1){for(var n in r){s=r[n];0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}if(this.IsShowMaxMinLine&&r.length>1&&this.MaxPoint&&this.MinPoint){var l=this.MaxPoint.High-this.MaxPoint.YValue;for(var n in r){s=r[n];s.Y=this.Frame.GetYFromData(s.YValue+l,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r);var u=this.MinPoint.Low-this.MinPoint.YValue;for(var n in r){s=r[n];s.Y=this.Frame.GetYFromData(s.YValue+u,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}},this.DrawExtendLine=function(t){if(this.IsShowExtendLine){var e,a=t[0],i=t[t.length-1];e=i.X>a.X?[a,i]:[i,a];var r=this.CalculateExtendLineEndPoint(e);this.Canvas.beginPath(),this.Canvas.moveTo(i.X,i.Y),this.Canvas.lineTo(r.X,r.Y),this.Canvas.setLineDash(this.ExtendLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}function ii(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawRuler",this.PointCount=2,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.TitleColor=xi.ChartDrawRuler.TitleColor,this.IsHScreen=!1,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]),r=this.Calculate(i),n=ze.IsNumber(r.Increase)?r.Increase.toFixed(2)+"%":"--",s=ze.IsNumber(r.Risefall)?r.Risefall.toFixed(2):"--",o="间距:".concat(r.Count," 涨跌:").concat(s," 涨幅:").concat(n);this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var h={Start:e,End:a};this.LinePoint.push(h),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.TitleColor?this.Canvas.fillStyle=this.TitleColor:ze.IsNumber(r.Increase)?r.Increase>0?this.Canvas.fillStyle=xi.UpTextColor:r.Increase<0?this.Canvas.fillStyle=xi.DownTextColor:this.Canvas.fillStyle=xi.UnchagneTextColor:this.Canvas.fillStyle=xi.UnchagneTextColor;var l=3*I(),u=e.X,c=e.Y;this.IsHScreen?(this.Canvas.translate(u+l,c+l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o,0,0)):this.Canvas.fillText(o,u+l,c-l),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,s,o,h=this.Frame.Data.Data,l=0,u=e.XValue;u<=a.XValue;++u,++l){var c=h[u];0==l?(s=c.YClose,i=c.Open,o=c.Close,n=c.Low,r=c.High):(o=c.Close,n>c.Low&&(n=c.Low),r<c.High&&(r=c.High))}if(!ze.IsPlusNumber(s)){var d=e.XValue-1;d>=0&&d<h.length&&(s=h[d].Close)}var f={YClose:s,Open:i,High:r,Low:n,Close:o,Count:l};return ze.IsPlusNumber(s)&&(f.Increase=(o-s)/s*100,f.Risefall=o-s),f}}function ri(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLine",this.Font=16*I()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length){this.IsHScreen=this.Frame.IsHScreen;var e=t[0],a=this.Frame.ChartBorder;if(this.IsHScreen){var i=a.GetLeftEx(),r=a.GetRightEx();if(e.X<i||e.X>r)return;var n=a.GetBottom(),s={X:e.X,Y:n},o=this.Frame.GetYData(e.X,!1)}else{n=a.GetBottomEx();var h=a.GetTopEx();if(e.Y<h||e.Y>n)return;r=a.GetRight(),s={X:r,Y:e.Y},o=this.Frame.GetYData(e.Y,!1)}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(s.X,s.Y),this.Canvas.stroke(),this.RestoreLineWidth();var l={Start:e,End:s};this.LinePoint.push(l),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var u=2*I(),c=e.X,d=e.Y;this.IsHScreen?(this.Canvas.translate(c+u,d+u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.toFixed(2),0,0)):this.Canvas.fillText(o.toFixed(2),c+u,d-u),this.Canvas.restore()}}}}function ni(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLineV2",this.Font=12*I()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.LineWidth=1,this.IsDrawFirst=!0,this.TextColor="rgb(255,255,255)",this.Title,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Title&&(this.Title=t.Title))},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length&&this.IsYValueInFrame(this.Value[0].YValue)){this.IsHScreen=this.Frame.IsHScreen;var e=this.Frame.ChartBorder,a=this.Frame.GetBorder();if(this.IsHScreen){var i=a.LeftEx,r=a.RightEx,n=a.Bottom,s=a.Top,o={X:t[0].X,Y:s};if(o.X<i||o.X>r)return;var h={X:t[0].X,Y:n},l=this.Frame.GetYData(o.X,!1)}else{n=a.BottomEx,s=a.TopTitle,i=a.Left,r=a.Right,o={X:i,Y:t[0].Y};if(o.Y<s||o.Y>n)return;h={X:r,Y:t[0].Y},l=this.Frame.GetYData(o.Y,!1)}this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(F(o.X),F(o.Y)),this.Canvas.lineTo(F(h.X),F(h.Y)),this.Canvas.stroke(),this.RestoreLineWidth();var u={Start:o,End:h};this.LinePoint.push(u);var c=I();this.Canvas.font=this.Font;var d=2*c,f=h.X,C=h.Y;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var m=this.GetFontHeight(),D=l.toFixed(2),p=this.Canvas.measureText(D).width+2*d;if(this.IsHScreen){if(e.Bottom>10)var v={Left:f-m/2,Top:C,Width:m,Height:p};else{C-=p;v={Left:f-m/2,Top:C,Width:m,Height:p}}if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(v.Left,v.Top,v.Width,v.Height),this.Canvas.save(),this.Canvas.translate(f,C+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(D,0,0),this.Canvas.restore(),this.Title){p=this.Canvas.measureText(this.Title).width+2*c;if(e.Bottom>10)var g={Left:v.Left,Top:n-p-1*c,Width:m,Height:p};else g={Left:v.Left,Top:v.Top-p-1*c,Width:m,Height:p};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height),this.Canvas.save(),this.Canvas.translate(f,g.Top+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}}else{if(e.Right>10){v={Left:f,Top:C-m/2-1*c,Width:p,Height:m};v.Left+v.Width>a.ChartWidth&&(v.Left=a.ChartWidth-v.Width-2*c)}else v={Left:f-p,Top:C-m/2-1*c,Width:p,Height:m};if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(v.Left,v.Top,v.Width,v.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(D,v.Left+d,C),this.Title){p=this.Canvas.measureText(this.Title).width+2*c;if(e.Right>10){g={Left:r-p-1*c,Top:v.Top,Width:p,Height:m};v.Left!=r&&(g.Left=v.Left-p-1*c)}else g={Left:v.Left-p,Top:v.Top,Width:p,Height:m};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,g.Left+1*c,C)}}}}},this.DrawPrice=function(){}}function si(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVerticalLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.Frame&&this.Frame.Data){var t=this.Frame.Data,e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.IsHScreen=this.Frame.IsHScreen;var a=e[0],i=this.Frame.ChartBorder;if(this.IsHScreen){var r=Math.round(this.Frame.GetXData(a.Y,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var n=this.Frame.GetXFromIndex(r-t.DataOffset,!1);n=M(this.LineWidth,n);var s=i.GetLeftEx(),o=i.GetRightEx(),h={X:s,Y:n},l={X:o,Y:n}}else{r=Math.round(this.Frame.GetXData(a.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var u=this.Frame.GetXFromIndex(r-t.DataOffset,!1);u=M(this.LineWidth,u);var c=i.GetTopEx(),d=i.GetBottomEx();h={X:u,Y:c},l={X:u,Y:d}}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y),this.Canvas.lineTo(l.X,l.Y),this.Canvas.stroke(),this.RestoreLineWidth();var f={Start:h,End:l};this.LinePoint.push(f),10==this.Status&&this.DrawPoint(e),this.Canvas.restore()}}}}function oi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler",this.PointCount=3,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LastPoint,this.LinePoint,this.ScaleRuler=xi.ChartDrawWaveRuler.ScaleRuler,this.RulerWidth=xi.ChartDrawWaveRuler.RulerWidth,this.RulerLineWidth=xi.ChartDrawWaveRuler.RulerLineWidth,this.MaxScaleRuler=xi.ChartDrawWaveRuler.MaxScaleRuler,this.Font=xi.ChartDrawWaveRuler.MaxScaleRuler,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}3==t.length&&this.DrawWaveRuler(t),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new N;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a)}else if(3==t.length){a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a),a={Start:{X:t[1].X,Y:t[1].Y},End:{X:t[2].X,Y:t[2].Y}},this.LinePoint.push(a)}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*I();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*I();if(this.IsHScreen){var s=a.X-e.X,o={X:i.X-this.MaxScaleRuler*s,Y:i.Y};this.DrawLine(i,o),this.LinePoint.push({Start:i,End:o});var h=i.Y-n/2,l=i.Y+n/2}else{s=a.Y-e.Y,o={X:M(r,i.X),Y:i.Y-this.MaxScaleRuler*s};this.DrawLine({X:M(r,i.X),Y:i.Y},o),this.LinePoint.push({Start:i,End:o});var u=i.X-n/2,c=i.X+n/2}var d=4*I();for(var f in this.ScaleRuler){var C=this.ScaleRuler[f];if(this.IsHScreen){u=i.X-C.Value*s;var m=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var D="".concat(m.toFixed(2),"  ").concat(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(D,d,0),this.Canvas.restore()}else{h=i.Y-C.Value*s,m=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:M(r,h)},{X:c,Y:M(r,h)});D="".concat(m.toFixed(2),"  ").concat(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(D,c+d,h)}}}}function hi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler2Point",this.PointCount=2,this.Font=14*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointRate=[510,517,511.4],this.LinePoint,this.CPoint,this.ScaleRuler=xi.ChartDrawWaveRuler2Point.ScaleRuler,this.RulerWidth=xi.ChartDrawWaveRuler2Point.RulerWidth,this.RulerLineWidth=xi.ChartDrawWaveRuler2Point.RulerLineWidth,this.MaxScaleRuler=xi.ChartDrawWaveRuler2Point.MaxScaleRuler,this.Font=xi.ChartDrawWaveRuler2Point.MaxScaleRuler,this.IsHScreen=!1,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.PointRate&&(this.PointRate=t.PointRate)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}var i=[t[0],t[1],this.CPoint];this.DrawWaveRuler(i),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){var e={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(e);var a=t[0].Y,i=t[1].Y,r=this.PointRate[1]-this.PointRate[0],n=this.PointRate[2]-this.PointRate[0],s=a-(a-i)*n/r;this.CPoint={X:t[1].X,Y:s}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*I();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*I();if(this.IsHScreen){var s=a.X-e.X,o={X:i.X-this.MaxScaleRuler*s,Y:i.Y};this.DrawLine(i,o),this.LinePoint.push({Start:i,End:o});var h=i.Y-n/2,l=i.Y+n/2}else{s=a.Y-e.Y,o={X:M(r,i.X),Y:i.Y-this.MaxScaleRuler*s};this.DrawLine({X:M(r,i.X),Y:i.Y},o),this.LinePoint.push({Start:i,End:o});var u=i.X,c=i.X+n}var d=4*I();for(var f in this.ScaleRuler){var C=this.ScaleRuler[f];if(this.IsHScreen){u=i.X-C.Value*s;var m=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var D="".concat(m.toFixed(2),"  ").concat(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(D,d,0),this.Canvas.restore()}else{h=i.Y-C.Value*s,m=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:M(r,h)},{X:c,Y:M(r,h)});D="".concat(m.toFixed(2),"  ").concat(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(D,c+d,h)}}}}function li(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawBox",this.PointCount=2,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.AvPriceLineDash=[5*I(),5*I()],this.KLineBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.KLineBorder.Left,Y:this.KLineBorder.Top},this.Point[1]={X:this.KLineBorder.Right,Y:this.KLineBorder.Bottom},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]);l.Chart.Log("[ChartDrawBox::Draw] kPoint",i);var r=this.Calculate(i);l.Chart.Log("[ChartDrawBox::Draw] kDataInfo",r);var n,s=this.GetKLineBorder(t,r);if(this.KLineBorder=s,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(L(s.Left),L(s.Top),L(s.Right-s.Left),L(s.Bottom-s.Top)),r.Amount>0&&r.Vol>0){var o=r.Amount/r.Vol;if(n="均价".concat(o.toFixed(2)),this.Canvas.beginPath(),this.IsHScreen){var h=this.Frame.GetYFromData(o,!1);this.Canvas.moveTo(M(this.Canvas.lineWidth,h),s.Top),this.Canvas.lineTo(M(this.Canvas.lineWidth,h),s.Bottom)}else{var u=this.Frame.GetYFromData(o,!1);this.Canvas.moveTo(s.Left,M(this.Canvas.lineWidth,u)),this.Canvas.lineTo(s.Right,M(this.Canvas.lineWidth,u))}this.Canvas.setLineDash(this.AvPriceLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.Canvas.fillStyle=this.LineColor;var c=2*I(),d="K线数".concat(r.Count);this.IsHScreen?this.DrawText(d,s.Right,s.Top,c,c):this.DrawText(d,s.Left,s.Top,c,c),n&&(this.IsHScreen?this.DrawText(n,h,s.Top,c,c):this.DrawText(n,s.Left,u,c,c));var f=ze.IsNumber(r.YClose)?r.YClose:r.Open,C=(r.Close-f)/f*100;d="".concat(C.toFixed(2),"%"),this.IsHScreen?this.DrawText(d,s.Right,s.Bottom,c,c):this.DrawText(d,s.Right,s.Top,c,c),C=r.Close-f,d="".concat(C.toFixed(2)),this.Canvas.textBaseline="bottom",this.IsHScreen?this.DrawText(d,s.Left,s.Bottom,c,0):this.DrawText(d,s.Right,s.Bottom,c,0),this.Canvas.restore()}}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,s,o,h=this.Frame.Data.Data,l=0,u=0,c=0,d=e.XValue;d<=a.XValue;++d,++c){var f=h[d];0==c?(s=f.YClose,i=f.Open,o=f.Close,n=f.Low,r=f.High):(o=f.Close,n>f.Low&&(n=f.Low),r<f.High&&(r=f.High)),l+=f.Vol,u+=f.Amount}var C={YClose:s,Open:i,High:r,Low:n,Close:o,Count:c,Vol:l,Amount:u};return C},this.GetKLineBorder=function(t,e){var a=t[0],i=t[1],r=this.Frame.Data;if(this.IsHScreen){var n=Math.round(this.Frame.GetXData(a.Y,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var s=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.Y,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var o=this.Frame.GetXFromIndex(n-r.DataOffset,!1),h=this.Frame.GetYFromData(e.High,!1),l=this.Frame.GetYFromData(e.Low,!1),u={Left:l,Top:s,Right:h,Bottom:o};return this.LinePoint.push({Start:{X:l,Y:s},End:{X:o,Y:s}}),this.LinePoint.push({Start:{X:l,Y:o},End:{X:o,Y:o}}),this.LinePoint.push({Start:{X:l,Y:s},End:{X:l,Y:o}}),this.LinePoint.push({Start:{X:h,Y:s},End:{X:h,Y:o}}),u}n=Math.round(this.Frame.GetXData(a.X,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var c=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.X,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var d=this.Frame.GetXFromIndex(n-r.DataOffset,!1),f=this.Frame.GetYFromData(e.High,!1),C=this.Frame.GetYFromData(e.Low,!1);u={Left:c,Top:f,Right:d,Bottom:C};return this.LinePoint.push({Start:{X:c,Y:f},End:{X:d,Y:f}}),this.LinePoint.push({Start:{X:c,Y:C},End:{X:d,Y:C}}),this.LinePoint.push({Start:{X:c,Y:f},End:{X:c,Y:C}}),this.LinePoint.push({Start:{X:d,Y:f},End:{X:d,Y:C}}),u},this.DrawText=function(t,e,a,i,r){this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,i,r),this.Canvas.restore()):this.Canvas.fillText(t,e+i,a+r)}}function ui(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawTwoPointDemo",this.PointCount=2,this.Font=16*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.PointInfo=[],this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.OnFinish(),this.PointToValue_Backup()},this.OnFinish=function(){for(var t in this.PointInfo){var e=this.PointInfo[t];e&&e.Point&&ze.IsNumber(e.Point.Y2)&&(this.Point[t].Y=this.PointInfo[t].Point.Y2)}},this.Draw=function(){if(this.LinePoint=[],this.PointInfo=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame(),this.SetLineWidth();t[0],t[1];if(this.CalculatePointInfo(t),10==this.Status)this.DrawEx();else for(var e=1;e<t.length;++e)this.DrawLine(t[e-1],t[e]);this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculatePointInfo=function(t){if(this.Frame&&this.Frame.Data){var e=this.PointToKLine(t);if(3==this.PointCount&&2==this.PointStatus&&this.LastPoint){var a=new N;a.X=this.LastPoint.X,a.Y=this.LastPoint.Y,t[2]=a}var i=this.Frame.Data;for(var r in e){var n=e[r],s=(a=t[r],i.Data[n.XValue]),o={KItem:s,Data:n,Point:{X:a.X,Y:a.Y}};this.PointInfo.push(o)}this.CalculateYPoint(),l.Chart.Log("[ChartDrawTwoPointDemo::CalculateLines] kPoint",this.PointInfo)}},this.CalculateYPoint=function(){var t=this.PointInfo[0],e=this.Frame.GetYFromData(t.KItem.Low,!1);t.Point.Y2=e;var a=this.PointInfo[1],i=this.Frame.GetYFromData(a.KItem.High,!1);a.Point.Y2=i},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.Frame.ChartBorder,i=(a.GetRight(),{X:t.Point.X,Y:t.Point.Y2}),r={X:e.Point.X,Y:e.Point.Y2};this.DrawLine(i,r),this.LinePoint.push({Start:i,End:r}),this.Canvas.setLineDash([5,5]);var n=.09*e.KItem.YClose+e.KItem.High,s=this.Frame.GetYFromData(n,!1);this.DrawLine({X:this.ToFixedPoint(r.X),Y:r.Y},{X:this.ToFixedPoint(r.X),Y:s}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var o=3;o>0;--o){var h=e.KItem.YClose*(.03*o)+e.KItem.High;s=this.Frame.GetYFromData(h,!1);s=this.ToFixedPoint(s),this.DrawLine({X:r.X,Y:s},{X:r.X+100,Y:s}),this.Canvas.fillText(h.toFixed(2),r.X-5,s)}this.Canvas.setLineDash([])},this.ToFixedPoint=function(t,e){return ze.IsNumber(e)||(e=this.LineWidth),M(e,t)}}function ci(){this.newMethod=ui,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawThreePointDemo",this.PointCount=3,this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateYPoint=function(){var t;for(var e in this.PointInfo){var a=this.PointInfo[e];t=0==e||2==e?this.Frame.GetYFromData(a.KItem.Low,!1):this.Frame.GetYFromData(a.KItem.High,!1),a.Point.Y2=t}},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.PointInfo[2],i=this.Frame.ChartBorder,r=(i.GetRight(),i.GetLeft(),{X:t.Point.X,Y:t.Point.Y2}),n={X:e.Point.X,Y:e.Point.Y2},s={X:a.Point.X,Y:a.Point.Y2};this.DrawLine(r,n),this.DrawLine(n,s),this.LinePoint.push({Start:r,End:n}),this.LinePoint.push({Start:n,End:s}),this.Canvas.setLineDash([5,5]);var o=.09*a.KItem.YClose+a.KItem.High,h=this.Frame.GetYFromData(o,!1);this.DrawLine({X:this.ToFixedPoint(s.X),Y:s.Y},{X:this.ToFixedPoint(s.X),Y:h}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var l=3;l>0;--l){var u=a.KItem.YClose*(.03*l)+a.KItem.High;h=this.Frame.GetYFromData(u,!1);h=this.ToFixedPoint(h),this.DrawLine({X:s.X,Y:h},{X:s.X+100,Y:h}),this.Canvas.fillText(u.toFixed(2),s.X-5,h)}this.Canvas.setLineDash([])}}function di(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHLineSegment",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Frame.IsHScreen?this.Point[1].X=this.Point[0].X:this.Point[1].Y=this.Point[0].Y,this.PointToValue_Backup()},this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});return this.PointRange(t)},this.Draw=function(){if(this.Frame&&(this.IsHScreen=this.Frame.IsHScreen,this.LinePoint=[],!this.IsFrameMinSize())){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];10==this.Status?this.DrawLine(e,a,!1):this.DrawVerticalLine(e,a),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawVerticalLine=function(t,e){var a=this.Frame.Data;if(this.IsHScreen){var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetRight(),n=Math.round(this.Frame.GetXData(t.Y,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var s=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.Y,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var o=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(i,s),this.Canvas.lineTo(r,s),this.Canvas.moveTo(i,o),this.Canvas.lineTo(r,o),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(t.X,s),this.Canvas.lineTo(t.X,o),this.Canvas.stroke()}else{var h=this.ChartBorder.GetTopEx(),l=this.ChartBorder.GetBottomEx();n=Math.round(this.Frame.GetXData(t.X,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var u=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.X,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var c=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(u,h),this.Canvas.lineTo(u,l),this.Canvas.moveTo(c,h),this.Canvas.lineTo(c,l),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(u,t.Y),this.Canvas.lineTo(c,t.Y),this.Canvas.stroke()}}}function fi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVolProfile",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowText=!0,this.VolType=0,this.BarPosition=0,this.VolFont,this.VAVol=60,this.BarWidthRate=.3,this.Data,this.MaxVol,this.MaxVolPrice,this.DataStatus=0,this.BGColor=xi.ChartDrawVolProfile.BGColor,this.BorderColor=xi.ChartDrawVolProfile.BorderColor,this.VolLineColor=xi.ChartDrawVolProfile.VolLineColor,this.TextConfig=(0,o.default)({Color:xi.ChartDrawVolProfile.Text.Color,Family:xi.ChartDrawVolProfile.Text.Family,FontMaxSize:xi.ChartDrawVolProfile.Text.FontMaxSize,FontMinSize:xi.ChartDrawVolProfile.Text.FontMinSize},"Color",xi.ChartDrawVolProfile.Text.Color),this.BarColor=[xi.ChartDrawVolProfile.UpVolColor,xi.ChartDrawVolProfile.DownVolColor,xi.ChartDrawVolProfile.AreaUpColor,xi.ChartDrawVolProfile.AreaDonwColor],this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BGColor=t.BorderColor),t.VolLineColor&&(this.BGColor=t.VolLineColor),t.UpVolColor&&(this.BarColor[0]=t.UpVolColor),t.DownVolColor&&(this.BarColor[1]=t.DownVolColor),t.AreaUpColor&&(this.BarColor[2]=t.AreaUpColor),t.AreaDonwColor&&(this.BarColor[3]=t.AreaDonwColor),ze.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),ze.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),ze.IsNumber(t.VolType)&&(this.VolType=t.VolType),ze.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),ze.IsNumber(t.VAVol)&&(this.VAVol=t.VAVol))},this.OnFinish=function(){this.RequestVolumeProfileData()},this.OnMoveFinish=function(){this.RequestVolumeProfileData()},this.IsDrawMain=function(){if(!this.GetActiveDrawPicture)return!0;var t=this.GetActiveDrawPicture();return t.Select.Guid!=this.Guid},this.RequestVolumeProfileData=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a={Start:{Date:t.DateTime.Date,DataIndex:t.XValue},End:{Date:e.DateTime.Date,DataIndex:e.XValue},Chart:this};ze.IsNumber(t.DateTime.Time)&&(a.Start.Time=t.DateTime.Time),ze.IsNumber(e.DateTime.Time)&&(a.End.Time=e.DateTime.Time),a.ValueAreaVol=this.VAVol,this.DataStatus=0,this.HQChart&&this.HQChart.RequestVolumeProfileData&&this.HQChart.RequestVolumeProfileData(a)},this.OnRecvVolumeProfileData=function(t){if(t&&ze.IsNonEmptyArray(t.Data)){for(var e=0,a=0,i=null,r=0,n=0;r<t.Data.length;++r){var s=t.Data[r];for(a=0,n=0;n<s.Vol.length;++n){var o=s.Vol[n];ze.IsNumber(o.Value)&&(a+=o.Value)}e<a&&(e=a,i=s.Price)}if(this.MaxVolPrice=i,this.MaxVol=e,!(this.MaxVolPrice<=0||this.MaxVol<=0)&&ze.IsNumber(t.MaxPrice)&&ze.IsNumber(t.MinPrice)){var h=this.Frame.GetYFromData(t.MaxPrice,!1),l=this.Frame.GetYFromData(t.MinPrice,!1);this.Point[0].Y=h,this.Point[1].Y=l,this.PointToValue(),this.Data=t,this.DataStatus=1}}},this.Draw=function(){if(this.VolFont=null,this.IsDrawMain()||this.MainDraw(),!this.IsFrameMinSize()){this.Frame&&(this.ChartBorder=this.Frame.ChartBorder);var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.SetLineWidth();var e=t[0],a=t[1];10==this.Status?0==this.DataStatus&&this.DrawLineBorder(e,a):this.DrawLineBorder(e,a),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.MainDraw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&1==this.DataStatus&&10==this.Status){this.ClipFrame();this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});this.DrawVolBar(),this.Canvas.restore()}},this.DrawLineBorder=function(t,e){this.Canvas.strokeStyle=this.LineColor;var a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.moveTo(t.X,a),this.Canvas.lineTo(t.X,i),this.Canvas.moveTo(e.X,a),this.Canvas.lineTo(e.X,i),this.Canvas.stroke()},this.DrawVolBar=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a=this.GetKDataOffset(),i=this.GetPriceYOffset(this.Data.PriceOffset),r=this.Frame.GetXFromIndex(t.XValue-a,!1),n=this.Frame.GetXFromIndex(e.XValue-a,!1),s=this.Frame.GetYFromData(this.Data.MaxPrice)-i/2,o=this.Frame.GetYFromData(this.Data.MinPrice)+i/2,h=n-r,l=o-s,u=h*this.BarWidthRate;if(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(r,s,h,l),this.MaxVolPrice>=this.Frame.HorizontalMin&&this.MaxVolPrice<=this.Frame.HorizontalMax){var c=M(2,this.Frame.GetYFromData(this.MaxVolPrice,!1));this.Canvas.lineWidth=2,this.Canvas.strokeStyle=this.VolLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,c),this.Canvas.lineTo(n,c),this.Canvas.stroke();var d={Start:{X:r,Y:c},End:{X:n,Y:c}};this.LinePoint.push(d)}this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(i,u),this.VolFont&&(this.Canvas.font=this.VolFont));for(var f=0;f<this.Data.Data.length;++f){var C=this.Data.Data[f];C.Price<this.Frame.HorizontalMin||C.Price>this.Frame.HorizontalMax||this.DrawVolBarItem(C,r,n,u,i)}},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,s=a,o=this.Frame.GetYFromData(t.Price)-r/2,h=r-1;if(h<1&&(h=1),1==this.VolType){if(!t.TotalVol)return;if(!ze.IsNumber(t.TotalVol.Value))return;var l=t.TotalVol.Value*i/this.MaxVol;if(ze.IsNumber(t.TotalVol.ColorID)?d=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(d=t.TotalVol.Color),this.Canvas.fillStyle=d,1==this.BarPosition?this.Canvas.fillRect(s,L(o),-l,L(h)):this.Canvas.fillRect(n,L(o),l,L(h)),this.IsShowText&&this.VolFont){var u=ze.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,o+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,o+r/2))}}else{u="";for(var c=0;c<t.Vol.length;++c){var d,f=t.Vol[c];if(ze.IsNumber(f.Value))if(ze.IsNumber(f.ColorID)?d=this.BarColor[f.ColorID]:f.Color&&(d=f.Color),d){l=f.Value*i/this.MaxVol;this.Canvas.fillStyle=d,1==this.BarPosition?(this.Canvas.fillRect(s,L(o),-l,L(h)),s-=l):(this.Canvas.fillRect(n,L(o),l,L(h)),n+=l);var C=ze.FormatVolString(f.Value,this.HQChart.LanguageID);u.length>0&&(u+="x"),u+=C}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,o+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,o+r/2)))}},this.GetKDataOffset=function(){var t=this.HQChart.ChartPaint[0].Data;return t.DataOffset},this.GetPriceYOffset=function(t){var e=this.Frame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;if(t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize)return null;var r=this.FormatFontString(i,this.TextConfig.Family,a);return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i="".concat(a.Weight," ").concat(t,"px ").concat(e)):i="".concat(t,"px ").concat(e),i}}function Ci(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNote",this.PointCount=1,this.Text=xi.ChartDrawNote.Text,this.FontOption={Family:xi.ChartDrawNote.FontOption.Family,Size:xi.ChartDrawNote.FontOption.Size},this.AryNoteText=[{Text:"输入内容 ......"}],this.NoteFontOption={Family:xi.ChartDrawNote.NoteFontOption.Family,Size:xi.ChartDrawNote.NoteFontOption.Size,Weight:xi.ChartDrawNote.NoteFontOption.Weight,Style:xi.ChartDrawNote.NoteFontOption.Style},this.NoteWidth=xi.ChartDrawNote.NoteWidth,this.NoteMargin={Left:xi.ChartDrawNote.NoteMargin.Left,Top:xi.ChartDrawNote.NoteMargin.Top,Bottom:xi.ChartDrawNote.NoteMargin.Bottom,Right:xi.ChartDrawNote.NoteMargin.Right},this.NoteBGColor=xi.ChartDrawNote.NoteBGColor,this.NoteTextColor=xi.ChartDrawNote.NoteTextColor,this.NoteBorderColor=xi.ChartDrawNote.NoteBorderColor,this.LineSpace=xi.ChartDrawNote.LineSpace,this.ArrowSize=xi.ChartDrawNote.ArrowSize,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!1,this.PtButtom,this.PtTop,this.TextRect=null,this.PtCenter,this.SetOption_Backup=this.SetOption,this.SetOption=function(t){if(this.SetOption_Backup(t),t){if(t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.NoteFontOption&&this.SetFont(this.NoteFontOption,t.NoteFontOption),ze.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;ze.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),ze.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),ze.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),ze.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),t.NoteBorderColor&&(this.NoteBorderColor=t.NoteBorderColor),ze.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),ze.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),ze.IsNonEmptyArray(t.AryNoteText)&&(this.AryNoteText=this.CloneArrayText(t.AryNoteText))}},this.ExportStorageData=function(){var t=this.ExportBaseData();if(t.Value=[],this.Value&&this.Value[0]){var e=this.Value[0];t.Value.push({XValue:e.XValue,YValue:e.YValue,DateTime:e.DateTime})}return t.NoteFont=this.NoteFont,t.NoteWidth=this.NoteWidth,t.NoteBGColor=this.NoteBGColor,t.NoteTextColor=this.NoteTextColor,t.NoteBorderColor=this.NoteBorderColor,t.LineSpace=this.LineSpace,t.ArrowSize=this.ArrowSize,t.NoteMargin={Left:this.NoteMargin.Left,Top:this.NoteMargin.Right,Bottom:this.NoteMargin.Bottom,Right:this.NoteMargin.Right},t.AryNoteText=this.CloneArrayText(this.AryNoteText),t},this.ImportStorageData=function(t){if(t.NoteFont&&(this.NoteFont=t.NoteFont),ze.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;ze.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),ze.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),ze.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),ze.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),this.NoteBorderColor=t.NoteBorderColor,ze.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),ze.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),this.AryNoteText=this.CloneArrayText(t.AryNoteText)},this.Draw=function(){if(this.PtButtom=null,this.PtTop=null,this.TextRect=null,this.PtCenter=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=I();if(this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a){this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2},this.PtCenter=t[0];var r={X:t[0].X-this.FontOption.Size*i/2-2,Y:t[0].Y}}else{this.Canvas.fillText(this.Text,t[0].X,t[0].Y),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2};r={X:this.PtButtom.X,Y:this.PtButtom.Y}}var n=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-n/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i/2,this.TextRect.Width=n,this.TextRect.Height=this.FontOption.Size*i,this.IsShowNoteText()&&this.DrawText(),this.Canvas.restore(),this.DrawPoint([r])}}}},this.DrawText=function(){this.Canvas.font=this.GetFontString(this.NoteFontOption);var t=0,e=this.Canvas.measureText("擎").width,a=this.Frame.GetBorder(),i=I(),r=this.Frame.IsHScreen,n=this.NoteWidth,s=[];if(ze.IsNonEmptyArray(this.AryNoteText))for(var o=0;o<this.AryNoteText.length;++o){var h=this.AryNoteText[o];if(h)if(t>0&&(t+=this.LineSpace),h.Text){var l=this.GetMultiLineText(h.Text,n);if(l&&ze.IsNonEmptyArray(l.AryText))for(var u=0;u<l.AryText.length;++u){u>0&&(t+=this.LineSpace);var c=l.AryText[u];s.push(c),t+=e}}else s.push({Text:""}),t+=e}else t=e;var d={Width:n+this.NoteMargin.Left+this.NoteMargin.Right,Height:t+this.NoteMargin.Top+this.NoteMargin.Bottom,ArrowType:0};r?(d.Left=this.PtTop.X-d.Width/2-this.PtCenter.X,d.Top=this.PtTop.Y-d.Height-this.ArrowSize-this.PtCenter.Y,d.Right=d.Left+d.Width,d.Bottom=d.Top+d.Height,d.Arrow={X:this.PtTop.X-this.PtCenter.X,Y:this.PtTop.Y-this.PtCenter.Y},this.PtCenter.X+t+this.FontOption.Size*i/2+2+this.ArrowSize>a.RightEx&&(d.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i-this.PtCenter.Y,d.Bottom=d.Top+d.Height,d.Arrow.X=this.PtButtom.X-this.PtCenter.X,d.Arrow.Y=this.PtButtom.Y-this.PtCenter.Y,d.ArrowType=1)):(d.Left=this.PtTop.X-d.Width/2,d.Top=this.PtTop.Y-d.Height-this.ArrowSize,d.Right=d.Left+d.Width,d.Bottom=d.Top+d.Height,d.Arrow={X:this.PtTop.X,Y:this.PtTop.Y},d.Left<a.Left?(d.Left=a.Left,d.Right=d.Left+d.Width):d.Right>a.Right&&(d.Right=a.Right,d.Left=d.Right-d.Width),d.Top<a.TopEx&&(d.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i,d.Bottom=d.Top+d.Height,d.Arrow.X=this.PtButtom.X,d.Arrow.Y=this.PtButtom.Y,d.ArrowType=1)),this.DrawNoteBG(d),this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.NoteTextColor;var f=d.Left+this.NoteMargin.Left,C=d.Top+this.NoteMargin.Top;for(o=0;o<s.length;++o){h=s[o];h&&(h.Text?(this.Canvas.fillText(h.Text,f,C),C+=e):C+=e,C+=this.LineSpace)}},this.DrawNoteBG=function(t){if(this.Canvas.fillStyle=this.NoteBGColor,0==t.ArrowType||1==t.ArrowType){var e=new Path2D;if(0==t.ArrowType){e.moveTo(t.Left,t.Bottom),e.lineTo(t.Left,t.Top),e.lineTo(t.Right,t.Top),e.lineTo(t.Right,t.Bottom);var a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Bottom),e.lineTo(t.Arrow.X,t.Arrow.Y);a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Bottom)}else{e.moveTo(t.Left,t.Top),e.lineTo(t.Left,t.Bottom),e.lineTo(t.Right,t.Bottom),e.lineTo(t.Right,t.Top);a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Top),e.lineTo(t.Arrow.X,t.Arrow.Y);a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Top)}e.closePath(),this.Canvas.fill(e),this.NoteBorderColor&&(this.Canvas.strokeStyle=this.NoteBorderColor,this.Canvas.stroke(e))}else this.Canvas.fillRect(t.Left,t.Top,t.Width,t.Height)},this.IsShowNoteText=function(){if(this.GetActiveDrawPicture){var t=this.GetActiveDrawPicture();return t.Move.Guid==this.Guid||t.Select.Guid==this.Guid||t.MoveOn.Guid==this.Guid}return!1},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*I()+"px "),t+=this.FontOption.Family,t},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;if(!this.TextRect)return-1;var i=0;this.Option&&this.Option.Zoom>=1&&(i=this.Option.Zoom*I());var r={Left:this.TextRect.Left-i,Top:this.TextRect.Top-i,Width:this.TextRect.Width+2*i,Height:this.TextRect.Height+2*i};return r.Right=r.Left+r.Width,r.Bottom=r.Top+r.Height,t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function mi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawAnchoredText",this.PointCount=1,this.AryText=[{Text:"输入内容"}],this.TextColor=xi.ChartDrawAnchoredText.TextColor,this.FontOption={Family:xi.ChartDrawAnchoredText.FontOption.Family,Size:xi.ChartDrawAnchoredText.FontOption.Size,Weight:xi.ChartDrawAnchoredText.FontOption.Weight,Style:xi.ChartDrawAnchoredText.FontOption.Style},this.TextMaxWidth=xi.ChartDrawAnchoredText.TextMaxWidth,this.LineSpace=xi.ChartDrawAnchoredText.LineSpace,this.BGColor=xi.ChartDrawAnchoredText.BGColor,this.BorderColor=xi.ChartDrawAnchoredText.BorderColor,this.TextMargin={Left:xi.ChartDrawAnchoredText.TextMargin.Left,Top:xi.ChartDrawAnchoredText.TextMargin.Top,Bottom:xi.ChartDrawAnchoredText.TextMargin.Bottom,Right:xi.ChartDrawAnchoredText.TextMargin.Right},this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),ze.IsNumber(t.TextMaxWidth)&&(this.TextMaxWidth=t.TextMaxWidth),ze.IsNonEmptyArray(t.AryText)&&(this.AryText=this.CloneArrayText(t.AryText)))},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.FontOption={},this.SetFont(t.FontOption,this.FontOption),t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.LineSpace=this.LineSpace,t.TextMaxWidth=this.TextMaxWidth,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t.AryText=this.CloneArrayText(this.AryText),t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;ze.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),ze.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),ze.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),ze.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor,this.TextMaxWidth=t.TextMaxWidth,ze.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),this.AryText=this.CloneArrayText(t.AryText)},this.Draw=function(){if(this.TextRect=null,!(this.Status<2)&&1==this.Point.length&&this.Frame&&!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();t&&1==t.length&&(this.ClipFrame(),this.DrawMultiLineText(t[0]),this.Canvas.restore())}},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Value[0],e=this.XYValueToPoint(t.XValue,t.YValue);this.Point=[e]},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.GetBorder(),e=this.Frame.IsHScreen;if(e){var a=t.LeftEx,i=t.Top,r=t.RightEx-a,n=t.Bottom-i,s=this.Point[0],o=(s.X-a)/r,h=(s.Y-i)/n;this.Value[0]={XValue:h,YValue:o}}else{a=t.Left,i=t.TopEx,r=t.Right-a,n=t.BottomEx-i,s=this.Point[0],h=(s.X-a)/r,o=(s.Y-i)/n;this.Value[0]={XValue:h,YValue:o}}},this.XYValueToPoint=function(t,e){if(!this.Frame)return null;var a=this.Frame.IsHScreen,i=this.Frame.GetBorder();if(a){var r=i.LeftEx,n=i.Top,s=i.RightEx-r,o=i.Bottom-n,h=e*s+r,l=t*o+n;return{X:h,Y:l}}r=i.Left,n=i.TopEx,s=i.Right-r,o=i.BottomEx-n,h=t*s+r,l=e*o+n;return{X:h,Y:l}},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(1!=this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Value[0],i=this.XYValueToPoint(a.XValue,a.YValue);e.push(i)}else e=this.Point;return e},this.DrawMultiLineText=function(t){if(ze.IsNonEmptyArray(this.AryText)){var e=0;this.Canvas.font=this.GetFontString(this.FontOption);var a=this.Canvas.measureText("擎").width,i=(this.Frame.GetBorder(),I(),this.Frame.IsHScreen),r={X:t.X,Y:t.Y};i&&(this.Canvas.translate(r.X,r.Y),this.Canvas.rotate(90*Math.PI/180),r.X=0,r.Y=0);for(var n=[],s=0,o=0;o<this.AryText.length;++o){var h=this.AryText[o];if(h)if(e>0&&(e+=this.LineSpace),this.TextMaxWidth>50&&h.Text){var l=this.GetMultiLineText(h.Text,this.TextMaxWidth);if(l&&ze.IsNonEmptyArray(l.AryText))for(var u=0;u<l.AryText.length;++u){u>0&&(e+=this.LineSpace);var c=l.AryText[u];n.push(c),e+=a}}else{if(h.Text){var d=this.Canvas.measureText(h.Text).width+2;s<d&&(s=d)}n.push({Text:h.Text}),e+=a}}this.TextMaxWidth>50&&(s=this.TextMaxWidth);var f={Left:r.X,Bottom:r.Y,Height:e+this.TextMargin.Top+this.TextMargin.Bottom,Width:s+this.TextMargin.Left+this.TextMargin.Right};f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width,this.DrawBG(f),this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var C=f.Left+this.TextMargin.Left,m=f.Top+this.TextMargin.Top;for(o=0;o<n.length;++o){h=n[o];h&&(h.Text?(this.Canvas.fillText(h.Text,C,m),m+=a):m+=a,m+=this.LineSpace)}i&&(f.Left=t.X,f.Top=t.Y,f.Width=e+this.TextMargin.Top+this.TextMargin.Bottom,f.Height=s+this.TextMargin.Left+this.TextMargin.Right,f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height),this.TextRect=f;var D={X:f.Left+f.Width/2,Y:f.Bottom};this.DrawPoint([D])}},this.DrawBG=function(t){if(this.BGColor||this.BorderColor){var e=new Path2D;e.rect(t.Left,t.Top,t.Width,t.Height),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(e)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(e))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function Di(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLabel",this.PointCount=1,this.OnlyMoveXIndex=!0,this.TextColor=xi.ChartDrawPriceLabel.TextColor,this.FontOption={Family:xi.ChartDrawPriceLabel.FontOption.Family,Size:xi.ChartDrawPriceLabel.FontOption.Size,Weight:xi.ChartDrawPriceLabel.FontOption.Weight,Style:xi.ChartDrawPriceLabel.FontOption.Style},this.BGColor=xi.ChartDrawPriceLabel.BGColor,this.BorderColor=xi.ChartDrawPriceLabel.BorderColor,this.LabelOffset={X:10,Y:20},this.TextMargin={Left:xi.ChartDrawPriceLabel.TextMargin.Left,Top:xi.ChartDrawPriceLabel.TextMargin.Top,Bottom:xi.ChartDrawPriceLabel.TextMargin.Bottom,Right:xi.ChartDrawPriceLabel.TextMargin.Right},this.TextRect,this.SetOption=function(t){if(t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.LabelOffset)){var e=t.LabelOffset;ze.IsNumber(e.X)&&(this.LabelOffset.X=e.X),ze.IsNumber(e.Y)&&(this.LabelOffset.Y=e.Y)}},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;ze.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),ze.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),ze.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),ze.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=t[0];this.ClipFrame(),this.DrawPriceLabel(e),this.Canvas.restore(),this.DrawPoint([e])}}},this.DrawPriceLabel=function(t){var e=this.GetFontString(this.FontOption);if(e){var a,i,r=this.Frame.IsHScreen,n=(I(),0);r?(this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),a={X:0,Y:0},i=this.Frame.GetYData(t.X,!1),n=1):(a={X:t.X,Y:t.Y},i=this.Frame.GetYData(t.Y,!1));var s=2;this.Symbol&&0==this.Frame.Identify&&(s=Hr(this.Symbol));var o=i.toFixed(s);this.Canvas.font=e;var h=a.X+this.LabelOffset.X,l=a.Y-this.LabelOffset.Y,u=this.Canvas.measureText("擎").width,c=this.Canvas.measureText(o).width,d={Left:h,Bottom:l,Width:c+this.TextMargin.Left+this.TextMargin.Right,Height:u+this.TextMargin.Top+this.TextMargin.Bottom};d.Top=d.Bottom-d.Height,d.Right=d.Left+d.Width,this.DrawBG(d,a);var f=d.Left+d.Width/2,C=d.Top+d.Height/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,f,C+n),r?(this.TextRect={Left:t.X+this.LabelOffset.Y,Top:t.Y+this.LabelOffset.X,Width:u+this.TextMargin.Top+this.TextMargin.Bottom,Height:c+this.TextMargin.Left+this.TextMargin.Right},this.TextRect.Right=this.TextRect.Left+this.TextRect.Width,this.TextRect.Bottom=this.TextRect.Top+this.TextRect.Height):this.TextRect=d}},this.DrawBG=function(t,e){var a=I(),i=new Path2D;i.moveTo(t.Left,t.Bottom),i.lineTo(t.Left,t.Top),i.lineTo(t.Right,t.Top),i.lineTo(t.Right,t.Bottom);var r=t.Left+15*a;i.lineTo(r,t.Bottom),i.lineTo(e.X,e.Y),r=t.Left+5*a,i.lineTo(r,t.Bottom),i.closePath(),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i)),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(e.X,e.Y,2*a,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill())},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function pi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceNote",this.PointCount=2,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsPointIn=this.IsPointIn_XYValue_Line,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FontOption={Family:xi.ChartDrawPriceNote.FontOption.Family,Size:xi.ChartDrawPriceNote.FontOption.Size,Weight:xi.ChartDrawPriceNote.FontOption.Weight,Style:xi.ChartDrawPriceNote.FontOption.Style},this.TextMargin={Left:xi.ChartDrawPriceNote.TextMargin.Left,Top:xi.ChartDrawPriceNote.TextMargin.Top,Bottom:xi.ChartDrawPriceNote.TextMargin.Bottom,Right:xi.ChartDrawPriceNote.TextMargin.Right},this.BGColor=xi.ChartDrawPriceNote.BGColor,this.BorderColor=xi.ChartDrawPriceNote.BorderColor,this.TextColor=xi.ChartDrawPriceNote.TextColor,this.BorderRoundRadius=3,this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption))},this.ExportStorageData=function(){var t=this.ExportBaseData();t.Value=[];for(var e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;ze.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),ze.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),ze.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),ze.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.LinePoint=[],this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.LineWidth=1,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.DrawPriceLabel(e,a);var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawPriceLabel=function(t,e){var a=this.GetFontString(this.FontOption);if(a){var i=2;this.Symbol&&0==this.Frame.Identify&&(i=Hr(this.Symbol));var r=I(),n={X:e.X,Y:e.Y},s=this.Frame.GetYData(t.Y,!1),o=s.toFixed(i),h=this.Canvas.measureText("擎").width,l=this.Canvas.measureText(o).width,u=this.CalculateAngle(t.X,t.Y,e.X,e.Y);if(u>=0&&u<=45||u>=315&&u<=360){var c=n.X,d=n.Y,f={Left:c,Bottom:d,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};f.Bottom=d+f.Height/2,f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width}else if(u>45&&u<=135){c=n.X,d=n.Y,f={Left:c,Bottom:d,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};f.Left=c-f.Width/2,f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width}else if(u>=135&&u<=225){c=n.X,d=n.Y,f={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};f.Bottom=d+f.Height/2,f.Top=f.Bottom-f.Height,f.Right=c,f.Left=f.Right-f.Width}else{if(!(u>=225&&u<=315))return;c=n.X;var C=n.Y;f={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};f.Top=C,f.Bottom=f.Top+f.Height,f.Left=c-f.Width/2,f.Right=f.Left-f.Width}this.DrawBG(f),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor;var m=f.Left+this.TextMargin.Left,D=f.Top+f.Height/2;this.Canvas.fillText(o,m,D+0),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(t.X,t.Y,2*r,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill()),this.TextRect=f}},this.DrawBG=function(t){if(t){var e=I(),a=this.BorderRoundRadius*e,i=new Path2D;i.roundRect(F(t.Left),F(t.Top),L(t.Width),L(t.Height),[a]),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?1:this.IsPointIn_XYValue_Line(t,e)}}function vi(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFibWedge",this.PointCount=3,this.Font=12*I()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LastPoint,this.AreaConfig={AryData:[{Value:.236,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.786,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0},{Value:1.618,Color:"rgb(41,98,255)",Enable:!1},{Value:2.618,Color:"rgb(242,54,69)",Enable:!1}],Opacity:.3},this.TextAngle,this.Radius,this.CalculateHypotenuse=function(t,e){var a=t.X-e.X,i=t.Y-e.Y,r=Math.sqrt(a*a+i*i);return r},this.MagnetXY=function(t){var e={IsFixedX:this.OnlyMoveXIndex};if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var a=-1;2==this.Status&&(a=1),ze.IsNumber(this.MovePointIndex)&&(a=this.MovePointIndex),a>=0&&(e.Magnet={Enable:!0,PointIndex:a,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(t,e)},this.CalculateAllPoint=function(t,e,a){var i=[];i.push({X:t.X,Y:t.Y}),i.push({X:e.X,Y:e.Y}),this.MagnetXY(i),i.push({X:a.X,Y:a.Y});var r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-i[2].X,s=i[0].Y-i[2].Y,o=Math.sqrt(n*n+s*s),h=n*r/o,l=s*r/o;return i[2].X=i[0].X-h,i[2].Y=i[0].Y-l,i},this.ValueToPoint_V2=function(t){if(!ze.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;for(var a=this.Frame.IsHScreen,i=[],r=0;r<t.length;++r){var n=t[r],s=new N;a?(s.Y=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),s.X=this.Frame.GetYFromData(n.YValue,!1)):(s.X=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),s.Y=this.Frame.GetYFromData(n.YValue,!1)),i[r]=s}return i},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(2==this.Status)if(2==this.PointStatus&&this.LastPoint)e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.LastPoint);else{for(var a=0;a<this.Point.length&&a<2;++a){var i=this.Point[a];e.push({X:i.X,Y:i.Y})}this.MagnetXY(e)}else if(10==this.Status){var r=this.Frame.Data;if(!r)return null;var n=this.Frame.XPointCount,s=this.Frame.IsHScreen;for(a=0;a<this.Value.length;++a){i=this.Value[a];var o=i.XValue-r.DataOffset;(o<0||o>=n)&&0;var h=new N;s?(h.Y=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.X=this.Frame.GetYFromData(i.YValue,!1)):(h.X=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.Y=this.Frame.GetYFromData(i.YValue,!1)),e.push(h)}}else 20==this.Status&&(e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.Point[2]));return e},this.Draw=function(){if(this.LinePoint=[],this.TextAngle=null,this.Radius=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(ze.IsNonEmptyArray(t)){var e=t.slice(0);this.CalculateLines(e),this.ClipFrame(),this.DrawArea(e),this.DrawLines(this.LinePoint),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){if(3==t.length&&this.AreaConfig&&ze.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=this.CalculateHypotenuse(e,t[1]),i=this.CalculateAngle(e.X,e.Y,t[1].X,t[1].Y),r=this.CalculateAngle(e.X,e.Y,t[2].X,t[2].Y),n=i-r;if(n<0&&(n+=360),n>180){var s=i;i=r,r=s}var o=i-(i-r)/2;i-r<0&&(o-=180);for(var h=null,l=0;l<this.AreaConfig.AryData.length;++l){var u=this.AreaConfig.AryData[l];if(u.Enable){var c=a*u.Value,d=u.Color,f=ba.ColorToRGBA(d,this.AreaConfig.Opacity),C=new Path2D;ze.IsNumber(h)?(C.arc(e.X,e.Y,h,Math.PI/180*(360-i),Math.PI/180*(360-r)),C.arc(e.X,e.Y,c,Math.PI/180*(360-r),Math.PI/180*(360-i),!0)):(C.moveTo(e.X,e.Y),C.arc(e.X,e.Y,c,Math.PI/180*(360-i),Math.PI/180*(360-r))),this.Canvas.fillStyle=f,this.Canvas.fill(C),h=c}}for(l=0;l<this.AreaConfig.AryData.length;++l){u=this.AreaConfig.AryData[l];if(u.Enable){c=a*u.Value,d=u.Color,C=new Path2D;C.arc(e.X,e.Y,c,Math.PI/180*(360-i),Math.PI/180*(360-r)),this.Canvas.strokeStyle=d,this.Canvas.stroke(C)}}this.Radius=a,this.TextAngle=o}},this.DrawTitle=function(t){if(3==t.length&&this.AreaConfig&&ze.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=Math.PI/180*(360-this.TextAngle);this.Canvas.font=this.Font;for(var i=0;i<this.AreaConfig.AryData.length;++i){var r=this.AreaConfig.AryData[i];if(r.Enable){var n=this.Radius*r.Value,s=r.Color,o="".concat(r.Value),h=Math.sin(a)*n+e.Y,l=Math.cos(a)*n+e.X;this.Canvas.fillStyle=s,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(o,l+2,h+2)}}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawLines=function(t){if(ze.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];this.DrawLine(a.Start,a.End)}},this.CalculateLines=function(t){if(2===t.length){var e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e)}else if(3===t.length){e={Start:new N,End:new N};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),e={Start:new N,End:new N},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e)}},this.IsPointIn=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,this.AryPoint,a);return i>=0?i:(i=this.IsPointInLine(t,e,a),i>=0?100:-1)},this.IsPointInDots=function(t,e,a,i){if(!ze.IsNonEmptyArray(a))return-1;if(!this.Frame)return-1;var r=this.Frame.Data;if(!r)return-1;if(!this.Value)return-1;var n=5;i&&ze.IsNumber(i.Zoom)?n+=i.Zoom:this.Option&&ze.IsNumber(this.Option.Zoom)&&(n+=this.Option.Zoom);this.Frame.IsHScreen;n*=I();for(var s=0;s<a.length;++s){var o=a[s],h=new Path2D;if(h.arc(o.X,o.Y,n,0,360),this.Canvas.isPointInPath(h,t,e))return s}return-1},this.GetCursorType=function(t){return 2==t?"ns-resize":null},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Point[2],e={X:t.X,Y:t.Y};if(!this.PointToValue_Default())return!1;var a=[this.Value[0],this.Value[1]],i=this.ValueToPoint_V2(a),r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-e.X,s=i[0].Y-e.Y,o=Math.sqrt(n*n+s*s),h=n*r/o,l=s*r/o;this.Point[2].X=i[0].X-h,this.Point[2].Y=i[0].Y-l;a=this.PointToValue_V2([this.Point[2]],{Type:1});return!!a&&(this.Value[2]=a[0],!0)},this.PointToValue_V2=function(t,e){return this.Frame?"MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute_V2(t,e):this.PointToValue_KLine_V2(t,e):null},this.PointToValue_KLine_V2=function(t,e){if(!ze.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var a=this.Frame.Data;if(!a)return null;var i=[],r=this.Frame.IsHScreen;if(r)for(var n=0;n<t.length;++n){var s=t[n],o=this.Frame.GetXData(s.Y,!1)+a.DataOffset,h=this.Frame.GetYData(s.X,!1),l={XValue:o,YValue:h,Type:1};i[n]=l}else for(n=0;n<t.length;++n){s=t[n],o=this.Frame.GetXData(s.X,!1)+a.DataOffset,h=this.Frame.GetYData(s.Y,!1),l={XValue:o,YValue:h,Type:1};i[n]=l}return i}}function gi(){this.DrawData=new Map,this.StorageKey,this.GetEventCallback,this.Load=function(t){if(t){this.StorageKey=t;var e=localStorage[this.StorageKey];if(l.Chart.Log("[ChartDrawStorage::Load] Load to localStorage, key=".concat(this.StorageKey,", cache=").concat(e)),e&&"string"==typeof e){var a=JSON.parse(e);for(var i in a){var r=a[i],n=new Map;for(var s in r.Value){var o=r.Value[s];n.set(o.Key,o.Value)}this.DrawData.set(r.Key,n)}}}},this.Save=function(){if(this.StorageKey){var t,e=[],a=(0,h.default)(this.DrawData);try{for(a.s();!(t=a.n()).done;){var i,r=t.value,n=r[0],s=r[1],o={Key:n,Value:[]},u=(0,h.default)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;c[1]&&!1===c[1].EnableSave||o.Value.push({Key:c[0],Value:c[1]})}}catch(f){u.e(f)}finally{u.f()}ze.IsNonEmptyArray(o.Value)&&e.push(o)}}catch(f){a.e(f)}finally{a.f()}l.Chart.Log("[ChartDrawStorage::Save] save to localStorage, key=".concat(this.StorageKey));var d=JSON.stringify(e);localStorage[this.StorageKey]=d}},this.GetItemKey=function(t){var e="".concat(t.Symbol,"-").concat(t.Period);return e},this.SaveDrawData=function(t){var e=this.GetItemKey(t),a=t.ExportStorageData();if(a){if(this.DrawData.has(e))l.Chart.Log("[ChartDrawStorage::SaveDrawData] Upate: key, drawPicture, data",e,t,a),this.DrawData.get(e).set(a.Guid,a);else{l.Chart.Log("[ChartDrawStorage::SaveDrawData] Insert: key, drawPicture, data",e,t,a);var i=new Map;i.set(a.Guid,a),this.DrawData.set(e,i)}l.Chart.Log("[ChartDrawStorage::SaveDrawData] All draw data： ",this.DrawData),this.Save()}},this.DeleteDrawData=function(t){var e=this.GetItemKey(t);if(this.DrawData.has(e)){var a=this.DrawData.get(e);a.has(t.Guid)&&(a.delete(t.Guid),this.Save())}},this.Clear=function(){this.DrawData=new Map,this.Save()},this.GetDrawData=function(t){var e=[],a=this.GetItemKey(t);if(!this.DrawData.has(a))return e;var i,r=this.DrawData.get(a),n=(0,h.default)(r);try{for(n.s();!(i=n.n()).done;){var s=i.value;e.push(s[1])}}catch(o){n.e(o)}finally{n.f()}return e}}function Si(){this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,2e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.002],[.04,.05,.04,.001],[.05,.1,.05,.005],[.1,.2,.1,.01],[.2,.4,.2,.02],[.4,.5,.4,.01],[.5,1,.5,.05],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,20,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,1e4,1e3],[4e4,5e4,1e4,1e3],[5e4,1e5,1e4,1e3],[1e5,2e5,1e5,1e4],[2e5,4e5,1e5,1e4],[4e5,5e5,1e5,1e4],[5e5,1e6,1e5,1e4],[1e6,2e6,1e6,1e5],[2e6,4e6,1e6,1e5],[4e6,5e6,1e6,1e5],[5e6,1e7,1e6,1e5],[1e7,2e7,1e7,1e6],[2e7,4e7,1e7,1e6],[4e7,5e7,1e7,1e6],[5e7,1e8,1e7,1e6],[1e8,2e8,1e8,1e7],[2e8,4e8,1e8,1e7],[4e8,5e8,1e8,1e7],[5e8,1e9,1e8,1e7],[1e9,2e9,1e9,1e8],[2e9,4e9,1e9,1e8],[4e9,5e9,1e9,1e8],[5e9,1e10,1e9,1e8]],this.Find=function(t){for(var e in this.Data){var a=this.Data[e];if(t>a[0]&&t<=a[1]){var i={};return i.FixInterval=a[2],i.Increase=a[3],i}}return null}}function Ii(){this.newMethod=Si,this.newMethod(),delete this.newMethod,this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,1e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.001],[.04,.05,.04,.001],[.05,.1,.05,.001],[.1,.2,.1,.01],[.2,.4,.2,.01],[.4,.5,.2,.01],[.5,.8,.2,.01],[.8,1,.5,.01],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,2e4,2e3],[4e4,5e4,4e4,1e3],[5e4,1e5,5e4,5e3],[1e5,2e5,1e5,1e4],[2e5,4e5,2e5,2e4],[4e5,5e5,4e5,1e4],[5e5,1e6,5e5,5e4],[1e6,2e6,1e6,1e5],[2e6,4e6,2e6,2e5],[4e6,5e6,4e6,1e5],[5e6,1e7,5e6,5e5],[1e7,2e7,1e7,1e6],[2e7,4e7,2e7,2e6],[4e7,5e7,4e7,1e6],[5e7,1e8,5e7,5e6],[1e8,2e8,1e8,1e7],[2e8,4e8,2e8,2e7],[4e8,5e8,4e8,1e7],[5e8,1e9,5e8,5e7],[1e9,2e9,1e9,1e8],[2e9,4e9,2e9,2e8],[4e9,5e9,4e9,1e8],[5e9,1e10,5e9,5e8]]}function Ti(){this.IsDOMFrameTitle=!1,this.IsDOMFrameToolbar=!1,this.KLineToolbar={ModifyIndex:!0,ChangeIndex:!0,CloseIndex:!0,OverlayIndex:!1,MaxMinWindow:!0,TitleWindow:!0,ExportData:!1,IsShowOverlayToolbar:!0,IsShowOverlayFrame:!0},this.MinuteToolbar={ModifyIndex:!0,ChangeIndex:!0,CloseIndex:!0,OverlayIndex:!0,MaxMinWindow:!0,TitleWindow:!0,ExportData:!1},this.TooltipBGColor="rgb(255, 255, 255)",this.TooltipAlpha=.92,this.SelectRectBGColor="rgba(1,130,212,0.06)",this.UpBarColor="rgb(238,21,21)",this.DownBarColor="rgb(25,158,0)",this.UnchagneBarColor="rgb(0,0,0)",this.EmptyBarBGColor="rgb(255,255,255)",this.HighLowBarColor="rgb(41,98,255)",this.HLCArea={HighLineColor:"rgb(242,54,69)",LowLineColor:"rgb(8,153,129)",CloseLineColor:"rgb(224,227,227)",LineWidth:2*I(),UpAreaColor:"rgba(253,214,218, 0.5)",DownAreaColor:"rgba(205,235,230, 0.5)"},this.Minute={},this.Minute.VolBarColor=null,this.Minute.VolTitleColor="rgb(105,105,105)",this.Minute.PriceColor="rgb(50,171,205)",this.Minute.PriceLineWidth=1*I(),this.Minute.AreaPriceColor="rgba(50,171,205,0.1)",this.Minute.AvPriceColor="rgb(238,127,9)",this.Minute.PositionColor="rgb(218,165,32)",this.Minute.FrameSplitTextColor=null,this.Minute.Before={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*I()},CloseIcon:{Family:"iconfont",Text:"",Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Size:12*I()}},this.Minute.After={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*I()}},this.DefaultTextColor="rgb(43,54,69)",this.DefaultTextFont=14*I()+"px 微软雅黑",this.TitleFont=13*I()+"px 微软雅黑",this.IndexTitleBGColor="rgb(250,250,250)",this.IndexTitleBorderColor="rgb(180,180,180)",this.IndexTitleBorderMoveOnColor="rgb(0,0,0)",this.IndexTitleColor="rgb(43,54,69)",this.IndexTitleSelectedColor="rgb(65,105,225)",this.OverlayIndexTitleBGColor="rgba(255,255,255,0.7)",this.IndexTitleMerginLeft=1,this.Title={TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(43,54,69)",AmountColor:"rgb(43,54,69)",DateTimeColor:"rgb(43,54,69)",SettingColor:"rgb(43,54,69)",NameColor:"rgb(43,54,69)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(43,54,69)"},this.UpTextColor="rgb(238,21,21)",this.DownTextColor="rgb(25,158,0)",this.UnchagneTextColor="rgb(0,0,0)",this.CloseLineColor="rgb(0,191,255)",this.CloseLineAreaColor=["rgba(0,191,255,0.8)","rgba(0,191,255,0.2)"],this.CloseLineWidth=2,this.FrameBorderPen="rgb(225,236,242)",this.MultiDayBorderPen="rgb(225,236,242)",this.FrameSplitPen="rgb(225,236,242)",this.FrameDotSplitPen="rgb(105,105,105)",this.FrameYLineDash=null,this.FrameXLineDash=null,this.FrameSplitTextColor="rgb(117,125,129)",this.FrameSplitTextFont=14*I()+"px 微软雅黑",this.FrameTitleBGColor="rgb(246,251,253)",this.Frame={XBottomOffset:1*I(),YTopOffset:2*I(),YTextPadding:[2,2]},this.ToolbarButtonStyle=0,this.FrameLogo={TextColor:"rgb(178,34,34)",Font:"bold "+16*I()+"px 微软雅黑",Text:"*仅学习使用*"},this.Frame.PercentageText={PriceColor:"rgb(117,125,129)",PercentageColor:"rgb(117,125,129)",SplitColor:"rgb(117,125,129)",Font:14*I()+"px 微软雅黑"},this.FrameLogarithmic={OpenPriceFont:"bold "+14*I()+"px 微软雅黑",MinInterval:45*I()},this.FrameSplitIncrease={Increase:.1},this.FrameSplitAverage={Count:4},this.FrameGoldenSection={Golden:[0,.191,.382,.5,.618,.809,1]},this.FrameLatestPrice={TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(0,0,0)",BGAlpha:.6,EmptyBGColor:"rgb(255,255,255)",OverlayTextColor:"rgb(255,255,255)"},this.FrameMargin=4,this.FrameLeftMargin=2,this.FrameRightMargin=2,this.DragSubFrameBorder={TopBorderHeight:6*I(),MinFrameHeight:50*I()},this.OverlayFrame={BolderPen:"rgb(190,190,190)",TitleColor:"rgb(105,105,105)",TitleFont:11*I()+"px arial"},this.CorssCursorBGColor="rgb(43,54,69)",this.CorssCursorTextColor="rgb(255,255,255)",this.CorssCursorTextFont=14*I()+"px 微软雅黑",this.CorssCursorHPenColor="rgb(130,130,130)",this.CorssCursorVPenColor="rgb(130,130,130)",this.CorssCursorXRangeBGColor="rgba(100,149,237,0.3)",this.CorssCursor={RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},this.LockBGColor="rgb(220, 220, 220)",this.LockTextColor="rgb(210, 34, 34)",this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com",this.PyIndexDomain="https://py.zealink.com",this.KLine={MaxMin:{Font:12*I()+"px 微软雅黑",Color:"rgb(43,54,69)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}},IconLibrary:{Family:"iconfont",Icon:[{Text:"",HScreenText:"",Color:"#f39f7c"},{Text:"",HScreenText:"",Color:"#19b1b7"},{Text:"",HScreenText:"",Color:"#b22626"},{Text:"",HScreenText:"",Color:"#ed7520"}]}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},this.VirtualKLine={Color:"rgb(100,100,100)",LineDash:[2,2]},this.OrderFlow={UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(92,96,89)",Family:"Arial",FontMaxSize:18,MaxValue:"8888"},Line:{UpDownColor:"rgb(0,0,0)",MiddleColor:"rgb(211,211,211)"},AlwaysShowOrderText:!0,POCGBColor:"rgba(178,34,34,0.8)",AskBarColor:"rgb(14,209,69)",BidBarColor:"rgb(236,28,36)"},this.OrderFlow_Style2={BarWidth:10,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.OrderFlow_Style3={BarWidth:20,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.Index={},this.Index.LineColor=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],this.OverlaySymbol={Random:0},this.OverlaySymbol.Color=["rgb(38,198,218)","rgb(103,58,183)","rgb(0,191,165)","rgb(130,177,255)"],this.Index.StockHistoryDayApiUrl="https://opensource.zealink.com/API/StockHistoryDay",this.Index.MarketLongShortApiUrl="https://opensource.zealink.com/API/FactorTiming",this.Index.MarketAttentionApiUrl="https://opensource.zealink.com/API/MarketAttention",this.Index.MarketHeatApiUrl="https://opensource.zealink.com/API/MarketHeat",this.Index.CustomIndexHeatApiUrl="https://opensource.zealink.com/API/QuadrantCalculate",this.Index.NotSupport={Font:"".concat(14*I(),"px 微软雅黑"),TextColor:"rgb(52,52,52)"},this.Buttons={CloseOverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:12*I(),MerginLeft:3},CloseWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},ChangeIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},OverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},ModifyIndexParam:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},MaxMinWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},TitleWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},ExportData:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},Tooltip:{Font:14*I()+"px 微软雅黑",Color:"rgb(255,255,255)",ColorBG:"rgb(42,46,57)",ColorBorder:"rgb(0,0,0)"}},this.DrawPicture={LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(255,255,255)"],XYCoordinate:{BGColor:"rgba(203,216,255,0.5)",TextBGColor:"rgb(52,101,255)",TextColor:"rgb(255,255,255)",Font:14*I()+"px 微软雅黑"},PointType:2,IsShowPoint:!1},this.ChartOX={Family:"iconfont",Up:{Color:"rgb(178,34,34)",Text:""},Down:{Color:"rgb(0,206,209)",Text:""},SquareLineColor:"rgb(119,136,153)"},this.KLineTrain={Font:"bold 14px arial",LastDataIcon:{Color:"rgb(0,0,205)",Text:"⬇"},BuyIcon:{Color:"rgb(0,205,102 )",Text:"B"},SellIcon:{Color:"rgb(255,127,36 )",Text:"S"},IconFont:{Family:"iconfont",Buy:{Text:"",HScreenText:"",Color:"rgb(255,140,0)"},Sell:{Text:"",HScreenText:"",Color:"rgb(6,79,18)"},Last:{Text:"",HScreenText:"",Color:"rgb(55,0,255)"}}},this.ChartKLineTable={TextFont:{Family:"Arial",FontMaxSize:25},ItemMergin:{Left:5,Right:5,Top:4,Bottom:2}},this.TooltipPaint={BGColor:"rgba(250,250,250,0.8)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(79, 79, 79)",TitleFont:13*I()+"px 微软雅黑",DateTimeColor:"rgb(105 105 105)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)"},this.PCTooltipPaint={BGColor:"rgba(250,250,250)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(60,60,60)",TitleFont:12*I()+"px 微软雅黑",DateTimeColor:"rgb(60,60,60)",VolColor:"rgb(60,60,60)",AmountColor:"rgb(60,60,60)"},this.PCTooltip={LineHeight:25},this.Barrage={Font:16*I()+"px 微软雅黑",Height:20,Color:"RGB(109,109,109)"},this.MinuteInfo={TextColor:"rgb(84,143,255)",Font:14*I()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,0.8)"},this.ChartDrawRuler={TitleColor:null},this.ChartDrawWaveRuler={RulerWidth:10,RulerLineWidth:1,MaxScaleRuler:2,Font:14*I()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"0.0%"},{Value:.382,Text:"38.2%"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"},{Value:2,Text:"200%"}]},this.ChartDrawWaveRuler2Point={RulerWidth:20,RulerLineWidth:1,MaxScaleRuler:2,Font:14*I()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"base"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"}]},this.ChartDrawVolProfile={BGColor:"rgba(244,250,254,0.8)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},this.ChartVolProfileVisibleRange={VolLineColor:"rgb(232,5,9)",VolLineFont:14*I()+"px 微软雅黑",VolLineTextColor:"rgb(255,255,255)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6},VAHLineColor:"rgb(0,0,255)",VAHTextColor:"rgb(255,255,255)",VALLineColor:"rgb(0,0,255)",VALTextColor:"rgb(255,255,255)",VAFont:14*I()+"px 微软雅黑"},this.ChartDrawNote={Text:"",FontOption:{Family:"iconfont",Size:32},NoteFontOption:{Family:"微软雅黑",Size:12,Weight:null,Style:null},NoteWidth:200,NoteMargin:{Left:5,Top:5,Bottom:5,Right:5},NoteBGColor:"rgba(104,114,255,0.7)",NoteTextColor:"rgb(240,240,240)",NoteBorderColor:"rgb(220,220,220)",LineSpace:3,ArrowSize:10},this.ChartDrawAnchoredText={TextMargin:{Left:5,Top:5,Bottom:5,Right:5},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:12,Weight:null,Style:null},LineSpace:2,TextMaxWidth:-1},this.ChartDrawPriceLabel={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:14,Weight:null,Style:null}},this.ChartDrawPriceNote={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:14,Weight:null,Style:null}},this.DRAWICON={Icon:{MaxSize:24,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1}},Text:{MaxSize:50,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1},FontName:"Arial"}},this.DRAWTEXT={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWNUMBER={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWABOVE={YOffset:0},this.DRAWTEXT_FIX={Font:14*I()+"px 微软雅黑"},this.DRAWNUMBER_FIX={Font:14*I()+"px 微软雅黑"},this.DOTLINE={LineDash:[3,5]},this.DRAWSL={PixelWidth:15},this.CIRCLEDOT={Radius:1.3*I()},this.TIPICON={Family:"iconfont",TextFont:"".concat(I(),"px 微软雅黑"),Size:10*I(),Color:"rgb(255,165,0)"},this.POINTDOT={Radius:2*I()},this.DepthMapPaint={LineColor:"rgba(255,185,15)",AreaColor:["rgba(255,185,15,0.8)","rgba(255,185,15,0.4)"],TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},this.KLineYAxisBGPaint={Font:12*I()+"px 微软雅黑",LineColor:"rgb(117,125,129)",DiffValutTextColor:"rgb(117,125,129)",DiffValueBGColor:"rgb(251,140,1)"},this.StockChip={InfoColor:"rgb(0,0,0)",DayInfoColor:"rgb(255,255,255)",DefaultButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,0,0)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},LongButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,128,0)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4},RecentButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(0,0,204)",Family:"iconfont",Text:"",Size:13*I(),MerginLeft:4}},this.DepthChart={BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.8)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.8)"},LineWidth:4},this.DepthCorss={BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(236,240,245, 0.8)",TextColor:"rgb(130,140,151)",Border:{Top:5,Left:20,Right:20,Bottom:5,ItemSpace:5},Font:14*I()+"px 微软雅黑"}},this.RectSelect={LineColor:"rgb(64,64,64)",LineWidth:1*I(),LineDotted:[3,3],AreaColor:"rgba(234,234,234,0.5)",SubAreaColor:"rgba(105,105,105,0.5)",RangeTextColor:"rgb(248,248,255)",RangeTextFont:14*I()+"px 微软雅黑",RangeTextBGColor:"rgb(43,54,69)",RangeTextSubColor:"rgb(255,255,255)",RangeTextSubFont:12*I()+"px 微软雅黑",RangeTextSubBGColor:"rgb(54,54,54)"},this.SelectedChart={LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},this.DragMovePaint={TextColor:"rgb(0,0,0)",Font:14*I()+"px 微软雅黑"},this.DealList={BorderColor:"rgb(192,192,192)",Header:{Color:"RGB(60,60,60)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(90,90,90)",Time:"rgb(60,60,60)",Deal:"rgb(90,90,90)",Index:"rgb(60,60,60)",BarTitle:"rgb(60,60,60)",Text:"rgb(60,60,60)",Bar:["rgb(255,0,0)","rgb(34,139,34)","rgb(119,136,153)","rgb(75,0,130)","rgb(65,105,225)","rgb(255,215,0)","rgb(255,0,255)","rgb(128,128,0)"]},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(0,0,0)"},this.Report={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",Header:{Color:"rgb(60,60,60)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}},FixedItem:{Font:{Size:15,Name:"微软雅黑"}},LimitBorder:{Color:"rgb(180,180,180)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},LimitColor:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",TextColor:"rgb(250,250,250)"},FieldColor:{Index:"rgb(60,60,60)",Symbol:"rgb(60,60,60)",Name:"rgb(60,60,60)",Vol:"rgb(90,90,90)",Amount:"rgb(90,90,90)",Text:"rgb(60,60,60)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(90,90,90)",CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(105,105,105,0.5)",AreaColor:"rgba(0,191,255,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(90,90,90)",DataWidth:16,DistanceWidth:3},Tab:{Font:{Size:12,Name:"微软雅黑"},ScrollBarWidth:100,ButtonColor:"rgb(252,252,252)",BarColor:"rgb(180,180,180)",BorderColor:"rgb(180,180,180)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},TabTitleColor:"rgb(60,60,60)",TabSelectedTitleColor:"rgb(0,0,0)",TabSelectedBGColor:"rgb(252,252,252)",TabMoveOnTitleColor:"rgb(0,0,0)",TabBGColor:"rgb(220,220,220)"},PageInfo:{Font:{Size:15,Name:"微软雅黑"},TextColor:"rgb(0,0,0)",BGColor:"rgba(180,180,180,0.5)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(190,190,190,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(240,128,128)",SrcRowColor:"rgb(180,240,240)"}},this.Keyboard={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",TextColor:"rgb(0,0,0)",Item:{Mergin:{Top:2,Bottom:0,Left:1,Right:1},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:0,Right:0,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}}},this.ScrollBar={BorderColor:"rgb(192,192,192)",XSplitTextFont:"".concat(12*I(),"px 微软雅黑"),XSplitTextColor:"rgb(0,0,0)",XSplitLineColor:"rgba(0,0,0,0.8)",BGChart:{Color:"rgb(135,206,250)",LineWidth:1,AreaColor:"rgba(135,206,250,0.5)"},Slider:{DateFont:"".concat(14*I(),"px 微软雅黑"),DateColor:"rgb(0,0,0)",BarColor:"rgb(207,207,207)",BarAreaColor:"rgba(232,232,232,0.65)"}},this.SetStyle=function(t){var e=function(t,e){t&&(t.Color&&(e.Color=t.Color),t.MoveOnColor&&(e.MoveOnColor=t.MoveOnColor),t.SelectedColor&&(e.SelectedColor=t.SelectedColor),t.Family&&(e.Family=t.Family),t.Text&&(e.Text=t.Text),ze.IsNumber(t.Size)&&(e.Size=t.Size),ze.IsNumber(t.MerginLeft)&&(e.MerginLeft=t.MerginLeft))};if(t.TooltipBGColor&&(this.TooltipBGColor=t.TooltipBGColor),t.TooltipAlpha&&(this.TooltipAlpha=t.TooltipAlpha),t.SelectRectBGColor&&(this.SelectRectBGColor=t.SelectRectBGColor),t.UpBarColor&&(this.UpBarColor=t.UpBarColor),t.DownBarColor&&(this.DownBarColor=t.DownBarColor),t.UnchagneBarColor&&(this.UnchagneBarColor=t.UnchagneBarColor),t.EmptyBarBGColor&&(this.EmptyBarBGColor=t.EmptyBarBGColor),t.HighLowBarColor&&(this.HighLowBarColor=t.HighLowBarColor),t.HLCArea){var a=t.HLCArea;a.HighLineColor&&(this.HLCArea.HighLineColor=a.HighLineColor),a.LowLineColor&&(this.HLCArea.LowLineColor=a.LowLineColor),a.CloseLineColor&&(this.HLCArea.CloseLineColor=a.CloseLineColor),a.UpAreaColor&&(this.HLCArea.UpAreaColor=a.UpAreaColor),a.DownAreaColor&&(this.HLCArea.DownAreaColor=a.DownAreaColor),ze.IsNumber(a.LineWidth)&&(this.HLCArea.LineWidth=a.LineWidth)}if(t.Minute){if(t.Minute.VolBarColor&&(this.Minute.VolBarColor=t.Minute.VolBarColor),t.Minute.VolTitleColor&&(this.Minute.VolTitleColor=t.Minute.VolTitleColor),t.Minute.PriceColor&&(this.Minute.PriceColor=t.Minute.PriceColor),ze.IsNumber(t.Minute.PriceLineWidth)&&(this.Minute.PriceLineWidth=t.Minute.PriceLineWidth),t.Minute.AvPriceColor&&(this.Minute.AvPriceColor=t.Minute.AvPriceColor),t.Minute.AreaPriceColor&&(this.Minute.AreaPriceColor=t.Minute.AreaPriceColor),t.Minute.PositionColor&&(this.Minute.PositionColor=t.Minute.PositionColor),t.Minute.FrameSplitTextColor&&(this.Minute.FrameSplitTextColor=t.Minute.FrameSplitTextColor),t.Minute.Before){a=t.Minute.Before;a.BGColor&&(this.Minute.Before.BGColor=a.BGColor),a.LineColor&&(this.Minute.Before.LineColor=a.LineColor),a.VolColor&&(this.Minute.Before.VolColor=a.VolColor),a.AvPriceColor&&(this.Minute.Before.AvPriceColor=a.AvPriceColor),a.CloseIcon&&e(a.CloseIcon,this.Minute.Before.CloseIcon),a.Point&&(a.Point.Color&&(this.Minute.Before.Point.Color=a.Point.Color),a.Point.Radius&&(this.Minute.Before.Point.Radius=a.Point.Radius))}if(t.Minute.After){a=t.Minute.After;a.BGColor&&(this.Minute.After.BGColor=a.BGColor),a.LineColor&&(this.Minute.After.LineColor=a.LineColor),a.VolColor&&(this.Minute.After.VolColor=a.VolColor),a.AvPriceColor&&(this.Minute.After.AvPriceColor=a.AvPriceColor),a.Point&&(a.Point.Color&&(this.Minute.After.Point.Color=a.Point.Color),a.Point.Radius&&(this.Minute.After.Point.Radius=a.Point.Radius))}}if(t.DefaultTextColor&&(this.DefaultTextColor=t.DefaultTextColor),t.DefaultTextFont&&(this.DefaultTextFont=t.DefaultTextFont),t.TitleFont&&(this.TitleFont=t.TitleFont),t.IndexTitleBGColor&&(this.IndexTitleBGColor=t.IndexTitleBGColor),t.IndexTitleBorderColor&&(this.IndexTitleBorderColor=t.IndexTitleBorderColor),t.IndexTitleBorderMoveOnColor&&(this.IndexTitleBorderMoveOnColor=t.IndexTitleBorderMoveOnColor),t.IndexTitleColor&&(this.IndexTitleColor=t.IndexTitleColor),t.IndexTitleSelectedColor&&(this.IndexTitleSelectedColor=t.IndexTitleSelectedColor),t.OverlayIndexTitleBGColor&&(this.OverlayIndexTitleBGColor=t.OverlayIndexTitleBGColor),t.UpTextColor&&(this.UpTextColor=t.UpTextColor),t.DownTextColor&&(this.DownTextColor=t.DownTextColor),t.UnchagneTextColor&&(this.UnchagneTextColor=t.UnchagneTextColor),t.CloseLineColor&&(this.CloseLineColor=t.CloseLineColor),t.CloseLineAreaColor&&(this.CloseLineAreaColor=t.CloseLineAreaColor),t.CloseLineWidth&&(this.CloseLineWidth=t.CloseLineWidth),t.FrameBorderPen&&(this.FrameBorderPen=t.FrameBorderPen),t.MultiDayBorderPen&&(this.MultiDayBorderPen=t.MultiDayBorderPen),t.FrameSplitPen&&(this.FrameSplitPen=t.FrameSplitPen),t.FrameDotSplitPen&&(this.FrameDotSplitPen=t.FrameDotSplitPen),t.FrameSplitTextColor&&(this.FrameSplitTextColor=t.FrameSplitTextColor),t.FrameSplitTextFont&&(this.FrameSplitTextFont=t.FrameSplitTextFont),t.FrameTitleBGColor&&(this.FrameTitleBGColor=t.FrameTitleBGColor),ze.IsNumber(t.IndexTitleMerginLeft)&&(this.IndexTitleMerginLeft=t.IndexTitleMerginLeft),t.Frame&&(t.Frame.XBottomOffset&&(this.Frame.XBottomOffset=t.Frame.XBottomOffset),t.Frame.YTopOffset&&(this.Frame.YTopOffset=t.Frame.YTopOffset),t.Frame.PercentageText)){a=t.Frame.PercentageText;a.PriceColor&&(this.Frame.PercentageText.PriceColor=a.PriceColor),a.PercentageColor&&(this.Frame.PercentageText.PercentageColor=a.PercentageColor),a.SplitColor&&(this.Frame.PercentageText.SplitColor=a.SplitColor),a.Font&&(this.Frame.PercentageText.Font=a.Font)}if(ze.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),ze.IsBool(t.IsDOMFrameTitle)&&(this.IsDOMFrameTitle=t.IsDOMFrameTitle),t.FrameLatestPrice){a=t.FrameLatestPrice;t.FrameLatestPrice.TextColor&&(this.FrameLatestPrice.TextColor=t.FrameLatestPrice.TextColor),t.FrameLatestPrice.UpBarColor&&(this.FrameLatestPrice.UpBarColor=t.FrameLatestPrice.UpBarColor),t.FrameLatestPrice.DownBarColor&&(this.FrameLatestPrice.DownBarColor=t.FrameLatestPrice.DownBarColor),t.FrameLatestPrice.UnchagneBarColor&&(this.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UnchagneBarColor),t.FrameLatestPrice.BGAlpha&&(this.FrameLatestPrice.BGAlpha=t.FrameLatestPrice.BGAlpha),t.FrameLatestPrice.OverlayTextColor&&(this.FrameLatestPrice.OverlayTextColor=t.FrameLatestPrice.OverlayTextColor),a.EmptyBGColor&&(this.FrameLatestPrice.EmptyBGColor=a.EmptyBGColor)}if(t.CorssCursorBGColor&&(this.CorssCursorBGColor=t.CorssCursorBGColor),t.CorssCursorTextColor&&(this.CorssCursorTextColor=t.CorssCursorTextColor),t.CorssCursorTextFont&&(this.CorssCursorTextFont=t.CorssCursorTextFont),t.CorssCursorVPenColor&&(this.CorssCursorVPenColor=t.CorssCursorVPenColor),t.CorssCursorHPenColor&&(this.CorssCursorHPenColor=t.CorssCursorHPenColor),t.CorssCursorBorderColor&&(this.CorssCursorBorderColor=t.CorssCursorBorderColor),t.CorssCursorXRangeBGColor&&(this.CorssCursorXRangeBGColor=t.CorssCursorXRangeBGColor),t.CorssCursor&&t.CorssCursor.RightButton){a=t.CorssCursor.RightButton;a.BGColor&&(this.CorssCursor.RightButton.BGColor=a.BGColor),a.PenColor&&(this.CorssCursor.RightButton.PenColor=a.PenColor),a.Icon&&(this.CorssCursor.RightButton.Icon=a.Icon)}if(t.KLine&&(this.KLine=t.KLine),t.VirtualKLine){a=t.VirtualKLine;a.Color&&(this.VirtualKLine.Color=a.Color),a.LineDash&&(this.VirtualKLine.LineDash=a.LineDash)}if(t.Index&&(t.Index.LineColor&&(this.Index.LineColor=t.Index.LineColor),t.Index.NotSupport&&(this.Index.NotSupport=t.Index.NotSupport)),t.ColorArray&&(this.ColorArray=t.ColorArray),t.DrawPicture){a=t.DrawPicture;a.LineColor&&(this.DrawPicture.LineColor=a.LineColor),a.PointColor&&(this.DrawPicture.PointColor=a.PointColor),a.XYCoordinate&&(this.DrawPicture.XYCoordinate=a.XYCoordinate),ze.IsNumber(a.PointType)&&(this.DrawPicture.PointType=a.PointType),ze.IsBool(a.IsShowPoint)&&(this.DrawPicture.IsShowPoint=a.IsShowPoint)}if(t.TooltipPaint&&(t.TooltipPaint.BGColor&&(this.TooltipPaint.BGColor=t.TooltipPaint.BGColor),t.TooltipPaint.BorderColor&&(this.TooltipPaint.BorderColor=t.TooltipPaint.BorderColor),t.TooltipPaint.TitleColor&&(this.TooltipPaint.TitleColor=t.TooltipPaint.TitleColor),t.TooltipPaint.TitleFont&&(this.TooltipPaint.TitleFont=t.TooltipPaint.TitleFont),t.TooltipPaint.DateTimeColor&&(this.TooltipPaint.DateTimeColor=t.TooltipPaint.DateTimeColor),t.TooltipPaint.VolColor&&(this.TooltipPaint.VolColor=t.TooltipPaint.VolColor),t.TooltipPaint.AmountColor&&(this.TooltipPaint.AmountColor=t.TooltipPaint.AmountColor)),t.PCTooltipPaint){a=t.PCTooltipPaint;a.BGColor&&(this.PCTooltipPaint.BGColor=a.BGColor),a.BorderColor&&(this.PCTooltipPaint.BorderColor=a.BorderColor),a.TitleColor&&(this.PCTooltipPaint.TitleColor=a.TitleColor),a.TitleFont&&(this.PCTooltipPaint.TitleFont=a.TitleFont),a.DateTimeColor&&(this.PCTooltipPaint.DateTimeColor=a.DateTimeColor),a.VolColor&&(this.PCTooltipPaint.VolColor=a.VolColor),a.AmountColor&&(this.PCTooltipPaint.AmountColor=a.AmountColor)}if(t.MinuteInfo&&(t.MinuteInfo.TextColor&&(this.MinuteInfo.TextColor=t.MinuteInfo.TextColor),t.MinuteInfo.Font&&(this.MinuteInfo.Font=t.MinuteInfo.Font),t.MinuteInfo.PointColor&&(this.MinuteInfo.PointColor=t.MinuteInfo.PointColor),t.MinuteInfo.LineColor&&(this.MinuteInfo.LineColor=t.MinuteInfo.LineColor),t.MinuteInfo.TextBGColor&&(this.MinuteInfo.TextBGColor=t.MinuteInfo.TextBGColor)),t.Title&&(t.Title.TradeIndexColor&&(this.Title.TradeIndexColor=t.Title.TradeIndexColor),t.Title.ColorIndexColor&&(this.Title.ColorIndexColor=t.Title.ColorIndexColor),t.Title.VolColor&&(this.Title.VolColor=t.Title.VolColor),t.Title.AmountColor&&(this.Title.AmountColor=t.Title.AmountColor),t.Title.DateTimeColor&&(this.Title.DateTimeColor=t.Title.DateTimeColor),t.Title.NameColor&&(this.Title.NameColor=t.Title.NameColor),t.Title.SettingColor&&(this.Title.SettingColor=t.Title.SettingColor),t.Title.TurnoverRateColor&&(this.Title.TurnoverRateColor=t.Title.TurnoverRateColor),t.Title.PositionColor&&(this.Title.PositionColor=t.Title.PositionColor)),t.DRAWICON){if(t.DRAWICON.Icon){a=t.DRAWICON.Icon;ze.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.Icon.MaxSize=a.MaxSize),ze.IsPlusNumber(a.MinSize)&&(this.DRAWICON.Icon.MinSize=a.MinSize),a.Zoom&&(this.DRAWICON.Icon.Zoom=a.Zoom),ze.IsNumber(a.YOffset)&&(this.DRAWICON.Icon.YOffset=a.YOffset)}if(t.DRAWICON.Text){a=t.DRAWICON.Text;ze.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.Text.MaxSize=a.MaxSize),ze.IsPlusNumber(a.MinSize)&&(this.DRAWICON.Text.MinSize=a.MinSize),a.Zoom&&(this.DRAWICON.Text.Zoom=a.Zoom),a.FontName&&(this.DRAWICON.Text.FontName=a.FontName),ze.IsNumber(a.YOffset)&&(this.DRAWICON.Text.YOffset=a.YOffset)}}if(t.DRAWTEXT){a=t.DRAWTEXT;ze.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.MaxSize=a.MaxSize),ze.IsPlusNumber(a.MinSize)&&(this.DRAWICON.MinSize=a.MinSize),a.Zoom&&(this.DRAWTEXT.Zoom=a.Zoom),a.FontName&&(this.DRAWTEXT.FontName=a.FontName),ze.IsNumber(a.YOffset)&&(this.DRAWTEXT.YOffset=a.YOffset)}if(t.DRAWTEXT_FIX){a=t.DRAWTEXT_FIX;a.Font&&(this.DRAWTEXT_FIX.Font=a.Font)}if(t.DRAWNUMBER_FIX){a=t.DRAWNUMBER_FIX;a.Font&&(this.DRAWNUMBER_FIX.Font=a.Font)}if(t.DRAWNUMBER){a=t.DRAWNUMBER;ze.IsPlusNumber(a.MaxSize)&&(this.DRAWNUMBER.MaxSize=a.MaxSize),ze.IsPlusNumber(a.MinSize)&&(this.DRAWNUMBER.MinSize=a.MinSize),a.Zoom&&(this.DRAWNUMBER.Zoom=a.Zoom),a.FontName&&(this.DRAWNUMBER.FontName=a.FontName),ze.IsNumber(a.YOffset)&&(this.DRAWNUMBER.YOffset=a.YOffset)}if(t.DRAWABOVE){a=t.DRAWABOVE;ze.IsNumber(a.YOffset)&&(this.DRAWABOVE.YOffset=a.YOffset)}if(t.DOTLINE&&(this.DOTLINE=t.DOTLINE),t.DRAWSL&&(this.DOTLINE=t.DRAWSL),t.DragSubFrameBorder&&(this.DragSubFrameBorder=t.DragSubFrameBorder),t.DepthMapPaint){a=t.DepthMapPaint;a.LineColor&&(this.DepthMapPaint.LineColor=a.LineColor),a.AreaColor&&(this.DepthMapPaint.AreaColor=a.AreaColor),a.TextColor&&(this.DepthMapPaint.TextColor=a.TextColor),a.TextBGColor&&(this.DepthMapPaint.TextBGColor=a.TextBGColor)}if(t.KLineYAxisBGPaint){a=t.KLineYAxisBGPaint;a.Font&&(this.KLineYAxisBGPaint.Font=a.Font),a.LineColor&&(this.KLineYAxisBGPaint.LineColor=a.LineColor),a.DiffValutTextColor&&(this.KLineYAxisBGPaint.DiffValutTextColor=a.DiffValutTextColor),a.DiffValueBGColor&&(this.KLineYAxisBGPaint.DiffValueBGColor=a.DiffValueBGColor)}if(t.StockChip){a=t.StockChip;a.InfoColor&&(this.StockChip.InfoColor=a.InfoColor),a.DayInfoColor&&(this.StockChip.DayInfoColor=a.DayInfoColor),a.DefaultButton&&e(a.DefaultButton,this.StockChip.DefaultButton),a.LongButton&&e(a.LongButton,this.StockChip.LongButton),a.RecentButton&&e(a.RecentButton,this.StockChip.RecentButton)}if(t.DepthChart){a=t.DepthChart;a.BidColor&&(a.BidColor.Line&&(this.DepthChart.BidColor.Line=a.BidColor.Line),a.BidColor.Area&&(this.DepthChart.BidColor.Area=a.BidColor.Area)),a.AskColor&&(a.AskColor.Line&&(this.DepthChart.AskColor.Line=a.AskColor.Line),a.AskColor.Area&&(this.DepthChart.AskColor.Area=a.AskColor.Area)),a.LineWidth&&(this.DepthChart.LineWidth=a.LineWidth)}if(t.DepthCorss){a=t.DepthCorss;if(a.BidColor&&a.BidColor.Line&&(this.DepthCorss.BidColor.Line=a.BidColor.Line),a.AskColor&&a.AskColor.Line&&(this.DepthCorss.AskColor.Line=a.AskColor.Line),a.LineWidth&&(this.DepthCorss.LineWidth=a.LineWidth),a.LineDash&&(this.DepthCorss.LineDash=a.LineDash),a.Tooltip){var i=a.Tooltip;i.BGColor&&(this.DepthCorss.Tooltip.BGColor=i.BGColor),i.TextColor&&(this.DepthCorss.Tooltip.TextColor=i.TextColor),i.Font&&(this.DepthCorss.Tooltip.Font=i.Font),i.LineHeight&&(this.DepthCorss.Tooltip.LineHeight=i.LineHeight);var r=i.Border;ze.IsNumber(r.Top)&&(this.DepthCorss.Tooltip.Border.Top=r.Top),ze.IsNumber(r.Bottom)&&(this.DepthCorss.Tooltip.Border.Bottom=r.Bottom),ze.IsNumber(r.Left)&&(this.DepthCorss.Tooltip.Border.Left=r.Left),ze.IsNumber(r.Right)&&(this.DepthCorss.Tooltip.Border.Right=r.Right),ze.IsNumber(r.ItemSpace)&&(this.DepthCorss.Tooltip.Border.ItemSpace=r.ItemSpace)}}if(t.CIRCLEDOT){a=t.CIRCLEDOT;ze.IsNumber(a.Radius)&&(this.CIRCLEDOT.Radius=a.Radius)}if(t.POINTDOT){a=t.POINTDOT;ze.IsNumber(a.Radius)&&(this.POINTDOT.Radius=a.Radius)}if(t.RectSelect){a=t.RectSelect;a.LineColor&&(this.RectSelect.LineColor=a.LineColor),a.LineWidth>0&&(this.RectSelect.LineWidth=a.LineWidth),a.LineDotted&&(this.RectSelect.LineDotted=a.LineDotted),a.AreaColor&&(this.RectSelect.AreaColor=a.AreaColor),a.SubAreaColor&&(this.RectSelect.SubAreaColor=a.SubAreaColor),a.RangeTextColor&&(this.RectSelect.RangeTextColor=a.RangeTextColor),a.RangeTextFont&&(this.RectSelect.RangeTextFont=a.RangeTextFont),a.RangeTextBGColor&&(this.RectSelect.RangeTextBGColor=a.RangeTextBGColor),a.RangeTextSubColor&&(this.RectSelect.RangeTextSubColor=a.RangeTextSubColor),a.RangeTextSubFont&&(this.RectSelect.RangeTextSubFont=a.RangeTextSubFont),a.RangeTextSubBGColor&&(this.RectSelect.RangeTextSubBGColor=a.RangeTextSubBGColor)}if(t.OrderFlow&&(a=t.OrderFlow,a.UpColor&&(this.OrderFlow.UpColor=a.UpColor),a.DownColor&&(this.OrderFlow.DownColor=a.DownColor),a.UnchagneColor&&(this.OrderFlow.UnchagneColor=a.UnchagneColor),a.Text&&(this.OrderFlow.Text=a.Text),a.Line&&(this.OrderFlow.Line=a.Line)),t.OrderFlow_Style2&&(a=t.OrderFlow_Style2,a.UpColor&&(this.OrderFlow_Style2.UpColor=a.UpColor),a.DownColor&&(this.OrderFlow_Style2.DownColor=a.DownColor),a.UnchagneColor&&(this.OrderFlow_Style2.UnchagneColor=a.UnchagneColor),ze.IsNumber(a.BarWidth)&&(this.OrderFlow_Style2.BarWidth=a.BarWidth)),t.ChartOX){a=t.ChartOX;a.Family&&(this.ChartOX.Family=a.Family),a.Up&&(this.ChartOX.Up=a.Up),a.Down&&(this.ChartOX.Down=a.Down),a.SquareLineColor&&(this.ChartOX.SquareLineColor=a.SquareLineColor)}if(t.DealList){a=t.DealList;if(a.BorderColor&&(this.DealList.BorderColor=a.BorderColor),a.UpTextColor&&(this.DealList.UpTextColor=a.UpTextColor),a.DownTextColor&&(this.DealList.DownTextColor=a.DownTextColor),a.UnchagneTextColor&&(this.DealList.UnchagneTextColor=a.UnchagneTextColor),a.CloseLineColor&&(this.DealList.CloseLineColor=a.CloseLineColor),a.Header){var n=a.Header;if(n.Color&&(this.DealList.Header.Color=n.Color),n.Mergin){var s=n.Mergin;ze.IsNumber(s.Left)&&(this.DealList.Header.Mergin.Left=s.Left),ze.IsNumber(s.Right)&&(this.DealList.Header.Mergin.Left=s.Right),ze.IsNumber(s.Top)&&(this.DealList.Header.Mergin.Top=s.Top),ze.IsNumber(s.Bottom)&&(this.DealList.Header.Mergin.Bottom=s.Bottom)}if(n.Font){var o=n.Font;o.Name&&(this.DealList.Header.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.DealList.Header.Font.Size=o.Size)}}if(a.Row){var h=a.Row;if(h.Mergin){s=h.Mergin;ze.IsNumber(s.Top)&&(this.DealList.Row.Mergin.Top=s.Top),ze.IsNumber(s.Bottom)&&(this.DealList.Row.Mergin.Bottom=s.Bottom)}if(h.Font){o=h.Font;o.Name&&(this.DealList.Row.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.DealList.Row.Font.Size=o.Size)}if(h.BarMergin){s=h.BarMergin;ze.IsNumber(s.Left)&&(this.DealList.Row.BarMergin.Left=s.Left),ze.IsNumber(s.Top)&&(this.DealList.Row.BarMergin.Top=s.Top),ze.IsNumber(s.Right)&&(this.DealList.Row.BarMergin.Right=s.Right),ze.IsNumber(s.Bottom)&&(this.DealList.Row.BarMergin.Bottom=s.Bottom)}}if(a.FieldColor){var l=a.FieldColor;if(l.Vol&&(this.DealList.FieldColor.Vol=l.Vol),l.Time&&(this.DealList.FieldColor.Time=l.Time),l.Deal&&(this.DealList.FieldColor.Deal=l.Deal),l.Index&&(this.DealList.FieldColor.Index=l.Index),l.BarTitle&&(this.DealList.FieldColor.BarTitle=l.BarTitle),l.Text&&(this.DealList.FieldColor.Text=l.Text),ze.IsNonEmptyArray(l.Bar))for(var u=0;u<l.Bar.length;++u)this.DealList.FieldColor.Bar[u]=l.Bar[u]}}if(t.Report){a=t.Report;if(a.BorderColor&&(this.Report.BorderColor=a.BorderColor),a.UpTextColor&&(this.Report.UpTextColor=a.UpTextColor),a.DownTextColor&&(this.Report.DownTextColor=a.DownTextColor),a.UnchagneTextColor&&(this.Report.UnchagneTextColor=a.UnchagneTextColor),a.BorderColor&&(this.Report.SelectedColor=a.SelectedColor),a.CloseLine){var c=a.CloseLine;c.CloseColor&&(this.Report.CloseLine.CloseColor=c.CloseColor),c.YCloseColor&&(this.Report.CloseLine.YCloseColor=c.YCloseColor),c.AreaColor&&(this.Report.CloseLine.AreaColor=c.AreaColor)}if(a.KLine){var d=a.KLine;d.UpColor&&(this.Report.KLine.UpColor=d.UpColor),d.DownColor&&(this.Report.KLine.DownColor=d.DownColor),d.UnchagneColor&&(this.Report.KLine.UnchagneColor=d.UnchagneColor),ze.IsNumber(d.DataWidth)&&(this.Report.KLine.DataWidth=d.DataWidth),ze.IsNumber(d.DistanceWidth)&&(this.Report.KLine.DistanceWidth=d.DistanceWidth)}if(a.Header){n=a.Header;if(n.Color&&(this.Report.Header.Color=n.Color),n.SortColor&&(this.Report.Header.SortColor=n.SortColor),n.Mergin){s=n.Mergin;ze.IsNumber(s.Left)&&(this.Report.Header.Mergin.Left=s.Left),ze.IsNumber(s.Right)&&(this.Report.Header.Mergin.Left=s.Right),ze.IsNumber(s.Top)&&(this.Report.Header.Mergin.Top=s.Top),ze.IsNumber(s.Bottom)&&(this.Report.Header.Mergin.Bottom=s.Bottom)}if(n.Font){o=n.Font;o.Name&&(this.Report.Header.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.Header.Font.Size=o.Size)}}if(a.Item){h=a.Item;if(h.Mergin){s=h.Mergin;ze.IsNumber(s.Left)&&(this.Report.Item.Mergin.Left=s.Left),ze.IsNumber(s.Right)&&(this.Report.Item.Mergin.Right=s.Right),ze.IsNumber(s.Top)&&(this.Report.Item.Mergin.Top=s.Top),ze.IsNumber(s.Bottom)&&(this.Report.Item.Mergin.Bottom=s.Bottom)}if(h.Font){o=h.Font;o.Name&&(this.Report.Item.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.Item.Font.Size=o.Size)}if(h.BarMergin){s=h.BarMergin;ze.IsNumber(s.Left)&&(this.Report.Item.BarMergin.Left=s.Left),ze.IsNumber(s.Top)&&(this.Report.Item.BarMergin.Top=s.Top),ze.IsNumber(s.Right)&&(this.Report.Item.BarMergin.Right=s.Right),ze.IsNumber(s.Bottom)&&(this.Report.Item.BarMergin.Bottom=s.Bottom)}if(h.NameFont){o=h.NameFont;o.Name&&(this.Report.Item.NameFont.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.Item.NameFont.Size=o.Size)}if(h.SymbolFont){o=h.SymbolFont;o.Name&&(this.Report.Item.SymbolFont.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.Item.SymbolFont.Size=o.Size)}}if(a.FixedItem){h=a.FixedItem;if(h.Font){o=h.Font;o.Name&&(this.Report.FixedItem.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.FixedItem.Font.Size=o.Size)}}if(a.LimitBorder){var f=a.LimitBorder;if(f.Color&&(this.Report.LimitBorder.Color=f.Color),f.Mergin){s=f.Mergin;ze.IsNumber(s.Left)&&(this.Report.LimitBorder.Mergin.Left=s.Left),ze.IsNumber(s.Top)&&(this.Report.LimitBorder.Mergin.Top=s.Top),ze.IsNumber(s.Right)&&(this.Report.LimitBorder.Mergin.Right=s.Right),ze.IsNumber(s.Bottom)&&(this.Report.LimitBorder.Mergin.Bottom=s.Bottom)}}if(a.LimitColor){f=a.LimitColor;f.UpColor&&(this.Report.LimitColor.UpColor=f.UpColor),f.DownColor&&(this.Report.LimitColor.DownColor=f.DownColor),f.TextColor&&(this.Report.LimitColor.UpColor=f.TextColor)}if(a.FieldColor){l=a.FieldColor;if(l.Name&&(this.Report.FieldColor.Name=l.Name),l.Symbol&&(this.Report.FieldColor.Symbol=l.Symbol),l.Vol&&(this.Report.FieldColor.Vol=l.Vol),l.Amount&&(this.Report.FieldColor.Amount=l.Amount),l.Index&&(this.Report.FieldColor.Index=l.Index),l.BarTitle&&(this.Report.FieldColor.BarTitle=l.BarTitle),l.Text&&(this.Report.FieldColor.Text=l.Text),ze.IsNonEmptyArray(l.Bar))for(u=0;u<l.Bar.length;++u)this.Report.FieldColor.Bar[u]=l.Bar[u]}if(a.Tab){var C=a.Tab;if(C.Font){o=C.Font;o.Name&&(this.Report.Tab.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.Tab.Font.Size=o.Size)}ze.IsNumber(C.ScrollBarWidth)&&(this.Report.Tab.ScrollBarWidth=C.ScrollBarWidth),C.ButtonColor&&(this.Report.Tab.ButtonColor=C.ButtonColor),C.BarColor&&(this.Report.Tab.BarColor=C.BarColor),C.BorderColor&&(this.Report.Tab.BorderColor=C.BorderColor),C.TabTitleColor&&(this.Report.Tab.TabTitleColor=C.TabTitleColor),C.TabSelectedTitleColor&&(this.Report.Tab.TabSelectedTitleColor=C.TabSelectedTitleColor),C.TabSelectedBGColor&&(this.Report.Tab.TabSelectedBGColor=C.TabSelectedBGColor),C.TabMoveOnTitleColor&&(this.Report.Tab.TabMoveOnTitleColor=C.TabMoveOnTitleColor),C.TabBGColor&&(this.Report.Tab.TabBGColor=C.TabBGColor)}if(a.PageInfo){var m=a.PageInfo;if(m.Font){o=m.Font;o.Name&&(this.Report.PageInfo.Font.Name=o.Name),ze.IsNumber(o.Size)&&(this.Report.PageInfo.Font.Size=o.Size)}if(m.TextColor&&(this.Report.PageInfo.TextColor=m.TextColor),m.BGColor&&(this.Report.PageInfo.BGColor=m.BGColor),m.Mergin){s=m.Mergin;ze.IsNumber(s.Left)&&(this.Report.PageInfo.Mergin.Left=s.Left),ze.IsNumber(s.Top)&&(this.Report.PageInfo.Mergin.Top=s.Top),ze.IsNumber(s.Right)&&(this.Report.PageInfo.Mergin.Right=s.Right),ze.IsNumber(s.Bottom)&&(this.Report.PageInfo.Mergin.Bottom=s.Bottom)}}if(a.DragRow){var D=a.DragRow;D.Color&&(this.Report.DragRow.Color=D.Color),D.TextColor&&(this.Report.DragRow.TextColor=D.TextColor),D.MoveRowColor&&(this.Report.DragRow.MoveRowColor=D.MoveRowColor),D.SrcRowColor&&(this.Report.DragRow.SrcRowColor=D.SrcRowColor)}}if(t.SelectedChart){a=t.SelectedChart;ze.IsNumber(a.LineWidth)&&(this.SelectedChart.LineWidth=a.LineWidth),ze.IsNumber(a.Radius)&&(this.SelectedChart.Radius=a.Radius),ze.IsNumber(a.MinSpace)&&(this.SelectedChart.MinSpace=a.MinSpace),a.LineColor&&(this.SelectedChart.LineColor=a.LineColor),a.LineColor&&(this.SelectedChart.BGColor=a.BGColor)}if(t.DragMovePaint){a=t.DragMovePaint;a.TextColor&&(this.DragMovePaint.TextColor=a.TextColor),a.Font&&(this.DragMovePaint.Font=a.Font)}if(ze.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),t.Buttons){var p=t.Buttons;e(p.CloseOverlayIndex,this.Buttons.CloseOverlayIndex),e(p.CloseWindow,this.Buttons.CloseWindow),e(p.ChangeIndex,this.Buttons.ChangeIndex),e(p.OverlayIndex,this.Buttons.OverlayIndex),e(p.ModifyIndexParam,this.Buttons.ModifyIndexParam),e(p.MaxMinWindow,this.Buttons.MaxMinWindow),e(p.TitleWindow,this.Buttons.TitleWindow),e(p.ExportData,this.Buttons.ExportData)}if(t.ChartDrawVolProfile){a=t.ChartDrawVolProfile;a.UpVolColor&&(this.ChartDrawVolProfile.UpVolColor=a.UpVolColor),a.DownVolColor&&(this.ChartDrawVolProfile.DownVolColor=a.DownVolColor),a.AreaUpColor&&(this.ChartDrawVolProfile.AreaUpColor=a.AreaUpColor),a.AreaDonwColor&&(this.ChartDrawVolProfile.AreaDonwColor=a.AreaDonwColor),a.BGColor&&(this.ChartDrawVolProfile.BGColor=a.BGColor),a.BorderColor&&(this.ChartDrawVolProfile.BorderColor=a.BorderColor),a.VolLineColor&&(this.ChartDrawVolProfile.VolLineColor=a.VolLineColor),a.Text&&(a.Text.Color&&(this.ChartDrawVolProfile.Text.Color=a.Text.Color),a.Text.Family&&(this.ChartDrawVolProfile.Text.Family=a.Text.Family),ze.IsNumber(a.Text.FontMaxSize)&&(this.ChartDrawVolProfile.Text.FontMaxSize=a.Text.FontMaxSize),ze.IsNumber(a.Text.FontMinSize)&&(this.ChartDrawVolProfile.Text.FontMinSize=a.Text.FontMinSize))}if(!0===t.DisableLogo&&this.FrameLogo&&(this.FrameLogo.Text=null),t.ScrollBar){a=t.ScrollBar;if(a.BorderColor&&(this.ScrollBar.BorderColor=a.BorderColor),a.XSplitTextFont&&(this.ScrollBar.XSplitTextFont=a.XSplitTextFont),a.XSplitTextColor&&(this.ScrollBar.XSplitTextColor=a.XSplitTextColor),a.XSplitLineColor&&(this.ScrollBar.XSplitLineColor=a.XSplitLineColor),a.Slider){var v=a.Slider;v.DateFont&&(this.ScrollBar.Slider.DateFont=v.DateFont),v.DateColor&&(this.ScrollBar.Slider.DateColor=v.DateColor),v.BarColor&&(this.ScrollBar.Slider.BarColor=v.BarColor),v.BarAreaColor&&(this.ScrollBar.Slider.BarAreaColor=v.BarAreaColor)}if(a.BGChart){v=a.BGChart;v.Color&&(this.ScrollBar.BGChart.Color=v.Color),v.AreaColor&&(this.ScrollBar.BGChart.AreaColor=v.AreaColor),ze.IsPlusNumber(v.LineWidth)&&(this.ScrollBar.BGChart.LineWidth=v.LineWidth)}}}}ba.ColorToRGBA=function(t,e){if(/^(rgb|RGB)/.test(t)){for(var a="#",i=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r=0;r<i.length;r++){var n=Number(i[r]).toString(16);"0"===n&&(n+=n),a+=n}t=a}return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},ba.RGBToHex=function(t){var e=t.indexOf(",")>-1?",":" ";t=t.substr(4).split(")")[0].split(e);var a=(+t[0]).toString(16),i=(+t[1]).toString(16),r=(+t[2]).toString(16);return 1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+a+i+r},ba.ArrayDrawPricture=[{Name:"线段",ClassName:"ChartDrawPictureLine",Create:function(){return new wa}},{Name:"射线",ClassName:"ChartDrawPictureHaflLine",Create:function(){return new La}},{Name:"箭头",ClassName:"ChartDrawArrowLine",Create:function(){return new Ma}},{Name:"水平线",ClassName:"ChartDrawPictureHorizontalLine",Create:function(){return new Ea}},{Name:"趋势线",ClassName:"ChartDrawPictureTrendLine",Create:function(){return new Pa}},{Name:"矩形",ClassName:"ChartDrawPictureRect",Create:function(){return new Oa}},{Name:"圆弧线",ClassName:"ChartDrawPictureArc",Create:function(){return new Ra}},{Name:"M头W底",ClassName:"ChartDrawPictureWaveMW",Create:function(){return new Ba}},{Name:"头肩型",ClassName:"ChartDrawHeadShouldersBT",Create:function(){return new _a}},{Name:"平行线",ClassName:"ChartDrawPictureParallelLines",Create:function(){return new ka}},{Name:"平行通道",ClassName:"ChartDrawPictureParallelChannel",Create:function(){return new Xa}},{Name:"价格通道线",ClassName:"ChartDrawPicturePriceChannel",Create:function(){return new Ya}},{Name:"文本",ClassName:"ChartDrawPictureText",Create:function(){return new Wa}},{Name:"江恩角度线",ClassName:"ChartDrawPictureGannFan",Create:function(){return new za}},{Name:"阻速线",ClassName:"ChartDrawPictureResistanceLine",Create:function(){return new Ka}},{Name:"黄金分割",ClassName:"ChartDrawPictureGoldenSection",Create:function(){return new Ja}},{Name:"百分比线",ClassName:"ChartDrawPicturePercentage",Create:function(){return new Qa}},{Name:"波段线",ClassName:"ChartDrawPictureWaveBand",Create:function(){return new $a}},{Name:"三角形",ClassName:"ChartDrawPictureTriangle",Create:function(){return new ja}},{Name:"对称角度",ClassName:"ChartDrawPictureSymmetryAngle",Create:function(){return new Za}},{Name:"圆",ClassName:"ChartDrawPictureCircle",Create:function(){return new qa}},{Name:"平行四边形",ClassName:"ChartDrawPictureQuadrangle",Create:function(){return new ti}},{Name:"斐波那契周期线",ClassName:"ChartDrawPictureFibonacci",Create:function(){return new ei}},{Name:"线形回归线",ClassName:"ChartDrawLinearRegression",Create:function(){return new ai}},{Name:"线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new ai({IsShowMaxMinLine:!0})}},{Name:"延长线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new ai({IsShowMaxMinLine:!0,IsShowExtendLine:!0})}},{Name:"尺子",ClassName:"ChartDrawRuler",Create:function(){return new ii}},{Name:"标价线",ClassName:"ChartDrawPriceLine",Create:function(){return new ri}},{Name:"标价线2",ClassName:"ChartDrawPriceLineV2",Create:function(){return new ni}},{Name:"垂直线",ClassName:"ChartDrawVerticalLine",Create:function(){return new si}},{Name:"波浪尺",ClassName:"ChartDrawWaveRuler",Create:function(){return new oi}},{Name:"AB波浪尺",ClassName:"ChartDrawWaveRuler2Point",Create:function(){return new hi}},{Name:"箱型线",ClassName:"ChartDrawBox",Create:function(){return new li}},{Name:"2点画图例子",ClassName:"ChartDrawTwoPointDemo",Create:function(){return new ui}},{Name:"3点画图例子",ClassName:"ChartDrawThreePointDemo",Create:function(){return new ci}},{Name:"水平线段",ClassName:"ChartDrawHLineSegment",Create:function(){return new di}},{Name:"平行射线",ClassName:"ChartDrawParallelRaysLines",Create:function(){return new Ha}},{ClassName:"ChartDrawPictureIconFont",Create:function(){return new Ua}},{Name:"涂鸦线段",ClassName:"ChartDrawGraffitiLine",Create:function(){return new Fa}},{Name:"固定范围成交量分布图",ClassName:"ChartDrawVolProfile",Create:function(){return new fi}},{Name:"DisjointChannel",ClassName:"ChartDrawDisjontChannel",Create:function(){return new Va}},{Name:"FlatTop",ClassName:"ChartDrawDisjontChannel",Create:function(){return new Ga}},{Name:"水平线2",ClassName:"ChartDrawHLine",Create:function(){return new Na}},{Name:"Note",ClassName:"ChartDrawNote",Create:function(){return new Ci}},{Name:"AnchoredText",ClassName:"ChartDrawAnchoredText",Create:function(){return new mi}},{Name:"PriceLabel",ClassName:"ChartDrawPriceLabel",Create:function(){return new Di}},{Name:"PriceNote",ClassName:"ChartDrawPriceNote",Create:function(){return new pi}},{Name:"FibWedge",ClassName:"ChartDrawFibWedge",Create:function(){return new vi}}],ba.MapIonFont=new Map([["icon-arrow_up",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_down",{Text:"",Color:"#db563e",Family:"iconfont"}],["icon-arrow_right",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_left",{Text:"",Color:"#318757",Family:"iconfont"}]]),ba.GetDrawPictureByName=function(t){for(var e in ba.ArrayDrawPricture){var a=ba.ArrayDrawPricture[e];if(a.Name==t)return a}return null},ba.GetDrawPictureByClassName=function(t){for(var e in ba.ArrayDrawPricture){var a=ba.ArrayDrawPricture[e];if(a.ClassName==t)return a}return null},ba.RegisterDrawPicture=function(t){if(!t.Name||!t.ClassName||!t.Create)return!1;var e={Name:t.Name,ClassName:t.ClassName,Create:t.Create};return ba.ArrayDrawPricture.push(e),l.Chart.Log("[IChartDrawPicture.RegisterDrawPicture] registered new draw picture class. item=",e),!0},ba.RegisterIonFont=function(t){if(!t.Name||!t.Text||!t.Family)return!1;var e=ba.MapIonFont.has(t.Name);return ba.MapIonFont.set(t.Name,t),l.Chart.Log("[IChartDrawPicture.RegisterIonFont] registered new icon font, obj=, isOverwirte=",t,e),!0},ba.CreateChartDrawPicture=function(t){var e=ba.GetDrawPictureByClassName(t.ClassName);if(!e)return null;var a=e.Create();return t.Period>=0&&(a.Period=t.Period),t.Right>=0&&(a.Right=t.Right),t.Guid&&(a.Guid=t.Guid),t.Symbol&&(a.Symbol=t.Symbol),t.Value&&(a.Value=t.Value),t.Text&&(a.Text=t.Text),t.LineColor&&(a.LineColor=t.LineColor),t.AreaColor&&(a.AreaColor=t.AreaColor),t.FontOption&&(a.FontOption=t.FontOption),t.Label&&(a.Label=t.Label),t.LineWidth>0&&(a.LineWidth=t.LineWidth),!1===t.EnableMove&&(a.EnableMove=t.EnableMove),ze.IsBool(t.EnableSave)&&(a.EnableSave=t.EnableSave),ze.IsNumber(t.ChannelWidth)&&(a.ChannelWidth=t.ChannelWidth),ze.IsBool(t.IsShowYCoordinate)&&(a.IsShowYCoordinate=t.IsShowYCoordinate),a.SetOption&&a.SetOption(t),a};var xi=new Ti,yi={LANGUAGE_CHINESE_ID:0,LANGUAGE_ENGLISH_ID:1,LANGUAGE_TRADITIONAL_CHINESE_ID:2};var Ai=new function(){this.TextResource=new Map([["Tooltip-Open",{CN:"开:",EN:"O:",TC:"開"}],["Tooltip-High",{CN:"高:",EN:"H:",TC:"高"}],["Tooltip-Low",{CN:"低:",EN:"L:",TC:"低"}],["Tooltip-Close",{CN:"收:",EN:"C:",TC:"收"}],["Tooltip-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["Tooltip-Vol",{CN:"量:",EN:"V:",TC:"量"}],["Tooltip-Amount",{CN:"额:",EN:"A:",TC:"額"}],["Tooltip-AvPrice",{CN:"均:",EN:"AP:",TC:"均"}],["Tooltip-Price",{CN:"价:",EN:"P:",TC:"價"}],["Tooltip-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["Tooltip-Position",{CN:"持:",EN:"P:",TC:"持"}],["DivTooltip-Open",{CN:"开盘:",EN:"Open:",TC:"開盤"}],["DivTooltip-High",{CN:"最高:",EN:"High:",TC:"最高"}],["DivTooltip-Low",{CN:"最低:",EN:"Low:",TC:"最低"}],["DivTooltip-Close",{CN:"收盘:",EN:"Close:",TC:"收盤"}],["DivTooltip-Increase",{CN:"涨幅:",EN:"Increase:",TC:"漲幅"}],["DivTooltip-Vol",{CN:"数量:",EN:"Volume:",TC:"數量"}],["DivTooltip-Amount",{CN:"金额:",EN:"Amount:",TC:"金額"}],["DivTooltip-Exchange",{CN:"换手:",EN:"Exchange:",TC:"換手"}],["DivTooltip-Position",{CN:"持仓:",EN:"Position:",TC:"持倉"}],["DivTooltip-Price",{CN:"价格:",EN:"Open:",TC:"價格"}],["PCTooltip-Date",{CN:"日期",EN:"Date",TC:"日期"}],["PCTooltip-Time",{CN:"时间",EN:"Time",TC:"時間"}],["PCTooltip-Price",{CN:"价格",EN:"Price:",TC:"價格"}],["PCTooltip-AvPrice",{CN:"均价",EN:"AVPrice:",TC:"均價"}],["PCTooltip-Increase",{CN:"涨幅",EN:"Increase:",TC:"漲幅"}],["PCTooltip-Vol",{CN:"成交量",EN:"Volume:",TC:"成交量"}],["PCTooltip-Amount",{CN:"成交额",EN:"Amount:",TC:"成交額"}],["PCTooltip-AC-Price",{CN:"匹配价:",EN:"Price:",TC:"匹配價"}],["PCTooltip-AC-Increase",{CN:"竞价涨幅:",EN:"Increase:",TC:"競價漲幅"}],["PCTooltip-AC-Vol",{CN:"匹配量:",EN:"V:",TC:"匹配量"}],["PCTooltip-AC-NotMatchVol",{CN:"未匹配量:",EN:"NV:",TC:"未匹配量"}],["KTitle-Open",{CN:"开:",EN:"O:",TC:"開"}],["KTitle-High",{CN:"高:",EN:"H:",TC:"高"}],["KTitle-Low",{CN:"低:",EN:"L:",TC:"低"}],["KTitle-Close",{CN:"收:",EN:"C:",TC:"收"}],["KTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["KTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["KTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["KTitle-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["KTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["KTitle-Price",{CN:"价:",EN:"Price:",TC:"價"}],["MTitle-AC-Price",{CN:"匹配价:",EN:"C:",TC:"匹配價"}],["MTitle-AC-AvPrice",{CN:"匹配均价:",EN:"C:",TC:"匹配均價"}],["MTitle-AC-Increase",{CN:"竞价涨幅:",EN:"I:",TC:"競價漲幅"}],["MTitle-AC-Vol",{CN:"匹配量:",EN:"V:",TC:"匹配量"}],["MTitle-AC-NotMatchVol",{CN:"未匹配量:",EN:"NV:",TC:"未匹配量"}],["MTitle-AC-Amount",{CN:"匹配量金额:",EN:"A:",TC:"匹配量金额"}],["MTitle-AC-NotMatchAmount",{CN:"未匹配量金额:",EN:"NA:",TC:"未匹配量金额"}],["MTitle-Close",{CN:"价:",EN:"C:",TC:"價"}],["MTitle-AvPrice",{CN:"均:",EN:"AC:",TC:"均"}],["MTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["MTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["MTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["MTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["MTitle-UpdateTime",{CN:"更新:",EN:"Update:",TC:"更新:"}],["日线",{CN:"日线",EN:"1D",TC:"日綫"}],["周线",{CN:"周线",EN:"1W",TC:"周綫"}],["双周",{CN:"双周",EN:"2W",TC:"雙周"}],["月线",{CN:"月线",EN:"1M",TC:"月綫"}],["半年",{CN:"半年",EN:"HY",TC:"半年"}],["年线",{CN:"年线",EN:"1Y",TC:"年綫"}],["1分",{CN:"1分",EN:"1Min",TC:"1分"}],["5分",{CN:"5分",EN:"5Min",TC:"5分"}],["15分",{CN:"15分",EN:"15Min",TC:"15分"}],["30分",{CN:"30分",EN:"30Min",TC:"30分"}],["60分",{CN:"60分",EN:"60Min",TC:"60分"}],["季线",{CN:"季线",EN:"1Q",TC:"季綫"}],["分笔",{CN:"分笔",EN:"Tick",TC:"分筆"}],["2小时",{CN:"2小时",EN:"2H",TC:"2小時"}],["4小时",{CN:"4小时",EN:"4H",TC:"4小時"}],["不复权",{CN:"不复权",EN:"No Right",TC:"不復權"}],["前复权",{CN:"前复权",EN:"Pro Right",TC:"前復權"}],["后复权",{CN:"后复权",EN:"Post Right",TC:"后復權"}],["日",{CN:"日",EN:"Sun.",TC:"日"}],["一",{CN:"一",EN:"Mon.",TC:"壹"}],["二",{CN:"二",EN:"Tues.",TC:"貳"}],["三",{CN:"三",EN:"Wed.",TC:"叁"}],["四",{CN:"四",EN:"Thur.",TC:"肆"}],["五",{CN:"五",EN:"Fri.",TC:"伍"}],["六",{CN:"六",EN:"Sat.",TC:"陸"}],["1月",{CN:"1月",EN:"Jan",TC:"1月"}],["2月",{CN:"2月",EN:"Feb",TC:"2月"}],["3月",{CN:"3月",EN:"Mar",TC:"3月"}],["4月",{CN:"4月",EN:"Apr",TC:"4月"}],["5月",{CN:"5月",EN:"May",TC:"5月"}],["6月",{CN:"6月",EN:"Jun",TC:"6月"}],["7月",{CN:"7月",EN:"Jul",TC:"7月"}],["8月",{CN:"8月",EN:"Aug",TC:"8月"}],["9月",{CN:"9月",EN:"Sept",TC:"9月"}],["10月",{CN:"10月",EN:"Oct",TC:"10月"}],["11月",{CN:"11月",EN:"Nov",TC:"11月"}],["12月",{CN:"12月",EN:"Dec",TC:"12月"}],["自定义分钟",{CN:"分",EN:"Min",TC:"分"}],["自定义日线",{CN:"日",EN:"D",TC:"日"}],["自定义秒",{CN:"秒",EN:"S",TC:"秒"}],["MVol-Vol",{CN:"成交量",EN:"Volume",TC:"成交量"}],["MVol-Position",{CN:"持仓量",EN:"Position",TC:"持倉量"}],["Depth-Price",{CN:"委托价",EN:"Price",TC:"委托價"}],["Depth-Sum",{CN:"累计",EN:"Sum",TC:"累計"}],["Toolbar-"+p.MODIFY_INDEX_PARAM,{CN:"调整指标参数",EN:"Change indicator parameters",TC:"调整指标参数"}],["Toolbar-"+p.CHANGE_INDEX,{CN:"选择指标",EN:"Change indicator",TC:"切换指标"}],["Toolbar-"+p.CLOSE_INDEX_WINDOW,{CN:"关闭窗口",EN:"Delete window",TC:"关闭指标窗口"}],["Toolbar-"+p.OVERLAY_INDEX,{CN:"叠加指标",EN:"Overlay indicator",TC:"叠加指标"}],["Toolbar-"+p.MODIFY_OVERLAY_INDEX_PARAM,{CN:"调整叠加指标参数",EN:"Change overlay indicator parameters",TC:"调整叠加指标参数"}],["Toolbar-"+p.MAX_MIN_WINDOW,{CN:"最大化",EN:"Maximize",TC:"最大化"}],["Toolbar-"+p.TITLE_WINDOW,{CN:"折叠窗口",EN:"Collapse window",TC:"折叠窗口"}],["Toolbar-"+p.EXPORT_DATA,{CN:"数据导出",EN:"Export data",TC:"数据导出"}],["Toolbar-"+p.CLOSE_BEFOREOPEN_ID,{CN:"关闭集合竞价",EN:"Close call auction",TC:"关闭集合竞价"}],["Toolbar-"+p.CLOSE_OVERLAY_INDEX,{CN:"关闭叠加指标",EN:"Delte overlay indicator",TC:"关闭叠加指标"}],["Toolbar-"+p.CHIP_RECENT,{CN:"近期成本分布",EN:"Recent chip",TC:"近期成本分布"}],["Toolbar-"+p.CHIP_LONG,{CN:"远期成本分布",EN:"Long chip",TC:"远期成本分布"}],["Toolbar-"+p.CHIP_DEFULT,{CN:"默认筹码分布",EN:"Default chip",TC:"默认筹码分布"}],["Toolbar-"+p.DRAW_PICTURE_DELETE,{CN:"删除",EN:"Delete",TC:"删除"}],["Toolbar-"+p.DRAW_PICTURE_SETTING,{CN:"设置",EN:"Setting",TC:"设置"}]]),this.GetText=function(t,e){var a=this.TextResource.get(t);if(!a)return"";switch(e){case yi.LANGUAGE_CHINESE_ID:return a.CN;case yi.LANGUAGE_ENGLISH_ID:return a.EN;case yi.LANGUAGE_TRADITIONAL_CHINESE_ID:return a.TC;default:return a.CN}},this.SetTextResource=function(t,e){this.TextResource.set(t,e)},this.GetLanguageID=function(t){var e=null;switch(t){case"EN":e=yi.LANGUAGE_ENGLISH_ID;break;case"CN":e=yi.LANGUAGE_CHINESE_ID;break;case"TC":e=yi.LANGUAGE_TRADITIONAL_CHINESE_ID;break;default:break}return e}};function bi(){}function wi(){}bi.Get=function(t){var e=new Map([["市场多空",{IsMainIndex:!1,Create:function(){return new Qi}}],["市场择时",{IsMainIndex:!1,Create:function(){return new $i}}],["市场关注度",{IsMainIndex:!1,Create:function(){return new ji}}],["指数热度",{IsMainIndex:!1,Create:function(){return new Zi}}],["财务粉饰",{IsMainIndex:!1,Create:function(){return new tr}}],["自定义指数热度",{IsMainIndex:!1,Create:function(){return new qi},Name:"自定义指数热度"}],["CJL",{IsMainIndex:!1,Create:function(){return new Ji}}],["OX",{IsMainIndex:!1,Create:function(){return new zi}}],["可视范围成交量分布图",{IsMainIndex:!0,Create:function(t){return new Ki(t)}}]]);return e.get(t)},wi.EMA=function(t,e){var a=[],i=0;if(i>=t.length)return a;for(;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i]))break;var r=i,n=i+1;a[r]=t[r];for(var s=i+1;s<t.length;++s,++r,++n)a[n]=(2*t[n]+(e-1)*a[r])/(e+1);return a},wi.SMA=function(t,e,a){for(var i=[],r=0,n=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){n=t[r],i[r]=n;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*n)/e,n=i[r];return i},wi.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:t[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},wi.HHV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e,n=0;r<t.length;++r,++n){if(r<e+i)i=t[r]<t[i]?i:r;else for(n=1+(i=r-e+1);n<=r;++n)t[n]>t[i]&&(i=n);a[r]=t[i]}return a},wi.LLV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e;r<t.length;++r,++n){if(r<e+i)i=t[r]>t[i]?i:r;else for(var n=1+(i=r-e+1);n<=r;++n)t[n]<t[i]&&(i=n);a[r]=t[i]}return a},wi.REF=function(t,e){var a=[];if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null);return a},wi.REFDATE=function(t,e){var a=[];if(t.length<=0)return a;for(var i in e=t.length-1,t)a[i]=t[e];return a},wi.SUM=function(t,e){var a=[];if(0==e){a[0]=t[0];for(var i=1;i<t.length;++i)a[i]=a[i-1]+t[i]}else{i=e-1;for(var r=0;i<t.length;++i,++r)for(var n=0;n<e;++n)0==n?a[i]=t[n+r]:a[i]+=t[n+r]}return a},wi.ARRAY_SUBTRACT=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)null==t[r]||isNaN(t[r])?a[r]=null:a[r]=t[r]-e;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?null==t[r]||null==e[r]?a[r]=null:a[r]=t[r]-e[r]:a[r]=null}return a},wi.ARRAY_GT=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]>e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]>e[r]?1:0:a[r]=null}return a},wi.ARRAY_GTE=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]>=e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]>=e[r]?1:0:a[r]=null}return a},wi.ARRAY_LT=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]<e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]<e[r]?1:0:a[r]=null}return a},wi.ARRAY_LTE=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]<=e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]<=e[r]?1:0:a[r]=null}return a},wi.ARRAY_EQ=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]==e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]==e[r]?1:0:a[r]=null}return a},wi.ARRAY_IF=function(t,e,a){var i=[],r=["number"==typeof e,"number"==typeof a];for(var n in t)t[n]?i[n]=r[0]?e:e[n]:i[n]=r[1]?a:a[n];return i},wi.ARRAY_AND=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]&&e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]&&e[r]?1:0:a[r]=0}return a},wi.ARRAY_OR=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]||e?1:0;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&t[r]||r<e.length&&e[r]?a[r]=1:a[r]=0}return a},wi.ARRAY_MULTIPLY=function(t,e){if(2==arguments.length){var a=[],i="number"==typeof e;if(i)for(var r in t)null==t[r]||isNaN(t[r])?a[r]=null:a[r]=t[r]*e;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?a[r]=t[r]*e[r]:a[r]=null}return a}for(a=wi.ARRAY_MULTIPLY(arguments[0],arguments[1]),r=2;r<arguments.length;++r)a=wi.ARRAY_MULTIPLY(a,arguments[r]);return a},wi.ARRAY_DIVIDE=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]/e;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?null==t[r]||null==e[r]||isNaN(t[r])||isNaN(e[r])||0==e[r]?a[r]=null:a[r]=t[r]/e[r]:a[r]=null}return a},wi.ARRAY_ADD=function(t,e){if(2==arguments.length){var a=[],i="number"==typeof e;if(i)for(var r in t)a[r]=t[r]+e;else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?null==t[r]||null==e[r]||isNaN(t[r])||isNaN(e[r])?a[r]=null:a[r]=t[r]+e[r]:a[r]=null}return a}for(a=wi.ARRAY_ADD(arguments[0],arguments[1]),r=2;r<arguments.length;++r)a=wi.ARRAY_ADD(a,arguments[r]);return a},wi.MAX=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)null==t[r]?a[r]=null:a[r]=Math.max(t[r],e);else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?null==t[r]||null==e[r]?a[r]=null:a[r]=Math.max(t[r],e[r]):a[r]=null}return a},wi.MIN=function(t,e){var a=[],i="number"==typeof e;if(i)for(var r in t)null==t[r]?a[r]=null:a[r]=Math.min(t[r],e);else{var n=Math.max(t.length,e.length);for(r=0;r<n;++r)r<t.length&&r<e.length?null==t[r]||null==e[r]?a[r]=null:a[r]=Math.min(t[r],e[r]):a[r]=null}return a},wi.ABS=function(t){var e=[];for(var a in t)null==t[a]?e[a]=null:e[a]=Math.abs(t[a]);return e},wi.MA=function(t,e){for(var a=[],i=0,r=t.length;i<r;i++)if(i<e)a[i]=null;else{for(var n=0,s=0;s<e;s++)n+=t[i-s];a[i]=n/e}return a},wi.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},wi.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length;++i)if(t[i]&&!isNaN(t[i]))break;for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},wi.STD=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(s=0;s<e;++s)i+=Math.pow(t[n-s]-r[n],2);a[n]=Math.sqrt(i/e)}return a},wi.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(s=0;s<e;++s)i+=Math.abs(t[n-s]-r[n]);a[n]=i/e}return a},wi.COUNT=function(t,e){for(var a=[],i=e-1;i<t.length;++i){for(var r=0,n=0;n<e;++n)t[i-n]&&++r;a[i]=r}return a},wi.CROSS=function(t,e){var a=[];if(t.length!=e.length)return[];for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&isNaN(e[i]))break;for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0;return a},wi.MULAR=function(t,e){var a=[];if(t.length<e)return a;for(var i=e;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])){a[i]=t[i];break}for(++i;i<t.length;++i)a[i]=a[i-1]*t[i];return a},wi.STICKLINE=function(t,e,a){var i=[];if(t.length<=0)return i;var r="number"==typeof e,n="number"==typeof a;for(var s in t)if(i[s]=null,!isNaN(t[s])&&t[s])if(r&&n)i[s]={Value:e,Value2:a};else if(r&&!n){if(isNaN(a[s]))continue;i[s]={Value:e,Value2:a[s]}}else if(!r&&n){if(isNaN(e[s]))continue;i[s]={Value:e[s],Value2:a}}else{if(isNaN(e[s])||isNaN(a[s]))continue;i[s]={Value:e[s],Value2:a[s]}}return i};var Fi=new function(){this.DataMap=new Map([["RenkoCalculate",{Create:function(){return new Mi}}],["HeikinAshiCalculate",{Create:function(){return new Li}}],["LineBreakCalcuate",{Create:function(){return new Ei}}],["KagiCalculate",{Create:function(){return new Mi}}]]),this.Create=function(t){if(!this.DataMap.has(t))return null;var e=this.DataMap.get(t);return e.Create()}};function Mi(){this.BrickSize=.05,this.SourceData,this.LastData,this.ATR={Count:14,BrickSize:.05},this.BrickSizeType=1,this.Symbol,this.FloatPrecision=2,this.ClassName="RenkoCalculate",this.SetOption=function(t){if(t&&(ze.IsNumber(t.BrickSize)&&(this.BrickSize=t.BrickSize),ze.IsNumber(t.BrickSizeType)&&(this.BrickSizeType=t.BrickSizeType),t.ATR)){var e=t.ATR;ze.IsNumber(e.Count)&&(this.ATR.Count=e.Count)}},this.CalculateByClose=function(t){var e=new ut;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!ze.IsNonEmptyArray(t.Data))return e;var a=this.BrickSize;1==this.BrickSizeType&&(a=this.ATR.BrickSize);var i=t.Data[0];this.LastData=at.Copy(i);for(var r=1;r<t.Data.length;){i=t.Data[r];var n=i.Close-this.LastData.Close,s=i.Close-this.LastData.Open;if(Math.abs(n)>=a&&Math.abs(s)>=a){var o=0;if(n>0||s>0){var h=this.LastData.Close,l=Math.max(this.LastData.Close,this.LastData.Open),u=l+a,c=u,d=l;o=i.Vol}else{h=this.LastData.Close,l=Math.min(this.LastData.Close,this.LastData.Open),u=l-a,c=l,d=u;o=i.Vol}var f=new at;f.Date=i.Date,f.Time=i.Time,f.YClose=h,f.Open=l,f.High=c,f.Low=d,f.Close=u,f.Vol=this.LastData.Vol+o,e.Data.push(f),this.LastData.YClose=f.YClose,this.LastData.Open=f.Open,this.LastData.High=f.High,this.LastData.Low=f.Low,this.LastData.Close=f.Close,this.LastData.Date=f.Date,this.LastData.Time=f.Time,this.LastData.Vol=0}else this.LastData.Vol+=i.Vol,++r}return e},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Hr(this.Symbol),1==this.BrickSizeType&&this.CalculateATR(),this.CalculateByClose(t)},this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){if(1==this.BrickSizeType)var t="Renko [ATR(".concat(this.ATR.Count,"), ").concat(this.ATR.BrickSize,"]");else t="Renko [Traditional, ".concat(this.BrickSize,"]");return t},this.CalculateATR=function(){if(ze.IsNonEmptyArray(this.SourceData.Data)){for(var t=this.SourceData.Data,e=t.length,a=[],i=e-1,r=0;i>=0&&r<this.ATR.Count;--i,++r){var n=t[i],s=Math.max(n.High-n.Low,n.High-n.Close,n.Close-n.Low);a.push(s)}var o=0;for(i=0;i<a.length;++i)o+=a[i];var h=o/a.length;s=h.toFixed(this.FloatPrecision);this.ATR.BrickSize=parseFloat(s)}}}function Li(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.ClassName="HeikinAshiCalculate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Hr(this.Symbol),this.Calculate(t)},this.GetTitle=function(){return"Heikin Ashi"},this.Calculate=function(t){var e=new ut;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!ze.IsNonEmptyArray(t.Data))return e;for(var a=null,i=null,r=0;r<t.Data.length;++r){var n=t.Data[r],s=at.Copy(n);a?(s.Close=(n.Close+n.Open+n.High+n.Low)/4,s.Open=(a.Close+a.Open)/2,s.YClose=i,s.High=Math.max(s.Close,s.Open,n.High),s.Low=Math.min(s.Close,s.Open,n.Low),i=s.Close):(s.Open=(n.Close+n.Open)/2,s.Close=(n.Close+n.Open+n.High+n.Low)/4,i=s.Close),a=n,e.Data.push(s)}return e}}function Ei(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.LineCount=3,this.ClassName="LineBreakCalcuate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){return"Line Break [".concat(this.LineCount,"]")},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Hr(this.Symbol),this.CalculateByClose(t)},this.CalculatePreviousKLine=function(t){for(var e=0;e<t.Data.length;++e){var a=t.Data[e];0==e?(t.High=a.High,t.Low=a.Low):(t.High<a.High&&(t.High=a.High),t.Low<a.Low&&(t.Low=a.Low)),t.Date=a.Date,t.Time=a.Time,t.Vol+=a.Vol,t.Amount+=a.Amount}},this.CalculateByClose=function(t){var e=new ut;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!ze.IsNonEmptyArray(t.Data))return e;for(var a=0,i={High:null,Low:null,Date:null,Time:null,Direction:0};a<t.Data.length&&a<this.LineCount;++a){var r=t.Data[a];0==n?(i.High=r.High,i.Low=r.Low):(i.High<r.High&&(i.High=r.High),i.Low>r.Low&&(i.Low=r.Low)),i.Date=r.Date,i.Time=r.Time,i.Vol+=r.Vol,i.Amount+=r.Amount}for(var n=a;n<t.Data.length;++n){r=t.Data[n];if(r.Close>i.High){var s=new at;s.YClose=i.Low,s.Open=i.High,s.Close=r.Close,s.Low=Math.min(s.Open,s.Close),s.High=Math.max(s.Open,s.Close),s.Date=r.Date,s.Time=r.Time,s.Vol=r.Vol,s.Amount=r.Amount,s.Direction=1,e.Data.push(s),i=s}else if(r.Close<i.Low){s=new at;s.YClose=i.High,s.Open=i.Low,s.Close=r.Close,s.Low=Math.min(s.Open,s.Close),s.High=Math.max(s.Open,s.Close),s.Date=r.Date,s.Time=r.Time,s.Vol=r.Vol,s.Amount=r.Amount,s.Direction=2,e.Data.push(s),i=s}else i&&(1==i.Direction||i.Direction,i.Vol+=r.Vol,i.Amount+=r.Amount)}return e}}function Ni(t,e){this.newMethod=S,this.newMethod(t,e),delete this.newMethod,this.ClassName="KLineChartContainer",this.WindowIndex=new Array,this.ColorIndex,this.TradeIndex,this.Symbol,this.Name,this.Period=0,this.IsApiPeriod=!1,this.Right=0,this.RightFormula=0,this.SourceData,this.MaxRequestDataCount=3e3,this.MaxRequestMinuteDayCount=5,this.PageSize=200,this.KLineDrawType=0,this.ScriptErrorCallback,this.FlowCapitalReady=!1,this.EnableFlowCapital={},this.EnableZoomUpDown=null,this.ChartDrawStorage=new gi,this.ChartDrawStorageCache=null,this.RightSpaceCount=0,this.SourceDataLimit=new Map,this.CtrlMoveStep=5,this.CustomShow=null,this.OverlayIndexFrameWidth=60,this.ZoomType=0,this.IsZoomLockRight=!1,this.KLineSize=null,this.Page={Day:{Enable:!1,Index:0,Finish:!1},Minute:{Enable:!1,Index:0,Finish:!1}},this.DragDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.ZoomDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.KLineApiUrl=xi.Domain+"/API/KLine2",this.MinuteKLineApiUrl=xi.Domain+"/API/KLine3",this.DragMinuteKLineApiUrl=xi.Domain+"/API/KLine4",this.DragKLineApiUrl=xi.Domain+"/API/KLine5",this.ZoomMinuteKLineApiUrl=xi.Domain+"/API/KLine4",this.ZoomKLineApiUrl=xi.Domain+"/API/KLine5",this.RealtimeApiUrl=xi.Domain+"/API/Stock",this.KLineMatchUrl=xi.Domain+"/API/KLineMatch",this.StockHistoryDayApiUrl=xi.Domain+"/API/StockHistoryDay",this.TickApiUrl=xi.Domain+"/API/StockDetail",this.MinuteDialog,this.RightMenu,this.BeforeBindMainData=null,this.AfterBindMainData=null,this.KLineCalculate=null,this.KLineCalcOption=new Map,this.ScrollBar=null,this.GetKLineCalulate=function(){var t,e=this.GetKLineDrawType();if(10==e)t="RenkoCalculate";else if(11==e)t="HeikinAshiCalculate";else if(12==e)t="LineBreakCalcuate";else{if(16!=e)return null;t="KagiCalculate"}if((!this.KLineCalculate||this.KLineCalculate.ClassName!=t)&&(this.KLineCalculate=Fi.Create(t),this.KLineCalculate.SetOption&&this.KLineCalcOption.has(t))){var a=this.KLineCalcOption.get(t);this.KLineCalculate.SetOption(a)}return this.KLineCalculate},this.SetKLineCalcOption=function(t,e){this.KLineCalcOption.set(t,e),this.KLineCalculate&&this.KLineCalculate.ClassName==t&&this.KLineCalculate.SetOption&&this.KLineCalculate.SetOption(e)},this.ClearKLineCaluate=function(){this.KLineCalculate&&this.KLineCalculate.Clear&&this.KLineCalculate.Clear()},this.ResetDragDownload=function(){this.DragDownload.Day.Status=0,this.DragDownload.Day.IsEnd=!1,this.DragDownload.Minute.Status=0,this.DragDownload.Minute.IsEnd=!1,this.DragDownload.Tick.Status=0,this.DragDownload.Tick.IsEnd=!1},this.ResetZoomDownload=function(){this.ZoomDownload.Day.Status=0,this.ZoomDownload.Day.IsEnd=!1,this.ZoomDownload.Minute.Status=0,this.ZoomDownload.Minute.IsEnd=!1,this.ZoomDownload.Tick.Status=0,this.ZoomDownload.Tick.IsEnd=!1},this.ResetPage=function(){this.Page.Day.Finish=!1,this.Page.Day.Index=0,this.Page.Minute.Finish=!1,this.Page.Minute.Index=0},this.AddCustomKLine=function(t,e){var a=this.ChartPaint[0];if(a&&t){if(a.CustomKLine||(a.CustomKLine=new Map),Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];a.CustomKLine.set(r.Key,r.Data)}else t&&a.CustomKLine.set(t.Key,t.Data);e&&1==e.Draw&&this.Draw()}},this.ClearCustomKLine=function(t){var e=this.ChartPaint[0];e&&(e.ClearCustomKLine(),t&&1==t.Draw&&this.Draw())},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.SandTableOperator=function(t){switch(t.ID){case 1:this.StopAutoUpdate(),t.Data&&this.ManualUpdateKData(t);break;case 2:this.ManualUpdateKData(t);break;case 3:t.IsAutoUpdate&&(this.IsAutoUpdate=t.IsAutoUpdate),this.ChangeSymbol(this.Symbol);break}},this.ManualUpdateKData=function(t){var e=t.Data,a=e.length,i=new ut;i.Data=e,i.Period=this.Period,i.Right=this.Right,i.Symbol=this.Symbol,this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var r=0;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i);if(ze.IsNumber(t.DataOffset)&&t.DataOffset>=0){var n=null;n=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,n&&(n.DataOffset=t.DataOffset)}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendManualKLineUpdateEvent(i)},this.GetKDataInfo=function(){if(!this.ChartPaint[0])return null;var t=this.ChartPaint[0],e={};return t.Data&&t.Data.Data&&(e.Data=t.Data.CloneData("HistoryData")),e.ShowRange=t.ShowRange,e.Period=this.Period,e.RightSpaceCount=this.RightSpaceCount,e},this.ChartOperator=function(t){var e=t.ID;if(e===m.OP_SCROLL_LEFT||e===m.OP_SCROLL_RIGHT){var a=e===m.OP_SCROLL_LEFT,i=1;t.Step>0&&(i=t.Step);var r=this.GetMoveOneStepWidth();this.DataMove(i*r,a)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()):e===m.OP_SCROLL_RIGHT&&this.DragDownloadData&&this.DragDownloadData()}else if(e===m.OP_ZOOM_IN||e===m.OP_ZOOM_OUT){var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),e===m.OP_ZOOM_IN){if(!this.Frame.ZoomUp(n))return}else if(!this.Frame.ZoomDown(n))return;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else if(e===m.OP_GOTO_HOME){var s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;var o=this.Frame.SubFrame[0].Frame.XPointCount;o-=this.RightSpaceCount;var h=s.Data.length-o;s.DataOffset=h,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,l.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_HOME, dataOffset=".concat(s.DataOffset," CursorIndex=").concat(this.CursorIndex," PageSize=").concat(o)),this.ChartOperator_Temp_Update()}else if(e===m.OP_GOTO_END){s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;s.DataOffset=0,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,l.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_END "),this.ChartOperator_Temp_Update()}else if(e==m.OP_LEFT_ZOOM_IN||e==m.OP_LEFT_ZOOM_OUT){s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;var u=s.Data.length,c=(o=this.Frame.SubFrame[0].Frame.XPointCount,s.DataOffset);if(e==m.OP_LEFT_ZOOM_IN){if(ze.IsNumber(t.Step)){if(o>=u)return;i=t.Step;if(i>c&&(i=c),o+i>u&&(i=u-o),i<=0)return;o+=i,s.DataOffset-=i}}else if(e==m.OP_LEFT_ZOOM_OUT){var d=this.GetMaxMinPageSize(),f=d.Min;if(ze.IsNumber(t.Step)){if(o<f)return;i=t.Step;if(o-i<f&&(i=o-f),i<=0)return;o-=i,s.DataOffset+=i}}for(var D in this.Frame.SubFrame){var p=this.Frame.SubFrame[D].Frame;p.XPointCount=o}s.DataOffset<0&&(s.DataOffset=0),this.ChartOperator_Temp_Update()}else if(e==m.OP_RIGHT_ZOOM_IN||e==m.OP_RIGHT_ZOOM_OUT){s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;u=s.Data.length,o=this.Frame.SubFrame[0].Frame.XPointCount,c=s.DataOffset;if(e==m.OP_RIGHT_ZOOM_IN){if(ze.IsNumber(t.Step)){if(o>=u)return;var v=c+o,g=u-v;if(g<=0)return;i=t.Step;if(i>g&&(i=g),i<=0)return;o+=i}}else if(e==m.OP_RIGHT_ZOOM_OUT){d=this.GetMaxMinPageSize(),f=d.Min;if(ze.IsNumber(t.Step)){if(o<f)return;i=t.Step;if(i>o&&(i=o),o-i<f&&(i=o-f),i<=0)return;o-=i}}for(var D in this.Frame.SubFrame){p=this.Frame.SubFrame[D].Frame;p.XPointCount=o}s.DataOffset<0&&(s.DataOffset=0),this.ChartOperator_Temp_Update()}else{if(e==m.OP_SET_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;s=this.ChartOperator_Temp_GetHistroyData();if(!ze.IsNonEmptyArray(s.Data))return!1;var S=this.GetRectSelectPaint();if(!S)return!1;if(!ut.IsDayPeriod(this.Period,!0))return!1;for(D=0;D<s.Data.length;++D){p=s.Data[D];if(p.Date==t.Start.Date&&(A={KItem:p,DataIndex:D}),p.Date==t.End.Date&&(b={KItem:p,DataIndex:D}),t.SubClient&&t.SubClient.Start&&p.Date==t.SubClient.Start.Date&&(w={KItem:p,DataIndex:D}),t.SubClient&&t.SubClient.End&&p.Date==t.SubClient.End.Date&&(F={KItem:p,DataIndex:D}),A&&b)break}if(!A||!b)return l.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SELECTRECT] can't find date. firstPoint, secondPoint, obj",A,b,t),!1;S.SetPoint(A.KItem,{Index:0,DataIndex:A.DataIndex}),S.SetPoint(b.KItem,{Index:1,DataIndex:b.DataIndex}),w&&F&&(S.SetPoint(w.KItem,{Index:3,DataIndex:w.DataIndex}),S.SetPoint(F.KItem,{Index:4,DataIndex:F.DataIndex})),ze.IsBool(t.PreventClose)&&(S.PreventClose=t.PreventClose);var T=!1,x=this.ChartPaint[0].DrawKRange;if(x&&(x.Start>=A.DataIndex&&x.Start>=b.DataIndex||x.End<=A.DataIndex&&x.End<=b.DataIndex)){var y=A.DataIndex;u=s.Data.length,o=this.ChartPaint[0].ShowRange.ShowCount;y+o>u&&(y=u-o),y<0&&(y=0),s.DataOffset=y,T=!0}return T?this.ChartOperator_Temp_Update():this.Draw(),!0}if(e==m.OP_SET_SUB_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;s=this.ChartOperator_Temp_GetHistroyData();if(!ze.IsNonEmptyArray(s.Data))return!1;var A,b,w,F;S=this.GetRectSelectPaint();if(!S)return!1;if(!ut.IsDayPeriod(this.Period,!0))return!1;for(D=0;D<s.Data.length;++D){p=s.Data[D];if(p.Date==t.Start.Date&&(A={KItem:p,DataIndex:D}),p.Date==t.End.Date&&(b={KItem:p,DataIndex:D}),A&&b)break}return A&&b?(S.SetPoint(A.KItem,{Index:3,DataIndex:A.DataIndex}),S.SetPoint(b.KItem,{Index:4,DataIndex:b.DataIndex}),this.Draw(),!0):(l.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SUB_SELECTRECT] can't find date. firstPoint, secondPoint, obj",A,b,t),!1)}if(e==m.OP_SCROOLBAR_SLIDER_CHANGED){s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;if(0==t.Type)s.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update();else if(1==t.Type||2==t.Type){t.Start.Index,o=t.End.Index-t.Start.Index+1;var M=s.Data[t.Start.Index];s.Data[t.End.Index];this.Frame.SetXShowCount(o),s.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}}else if(e==m.OP_GOTO){if(!ze.IsNumber(t.Date))return;s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;h=null;if(ut.IsDayPeriod(this.Period,!0))for(D=0;D<s.Data.length;++D){p=s.Data[D];if(p.Date>=t.Date){h=D;break}}else if(ut.IsMinutePeriod(this.Period,!0)){var L=t.Time;if(ze.IsPlusNumber(L))for(D=0;D<s.Data.length;++D){p=s.Data[D];if(p.Date>t.Date||p.Date==t.Date&&p.Time>=L){h=D;break}}else for(D=0;D<s.Data.length;++D){p=s.Data[D];if(p.Date>=t.Date){h=D;break}}}if(null===h)return void l.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO can't find date=".concat(t.Date," time=").concat(t.Time));var E=this.Frame.SubFrame[0].Frame.XPointCount,N=E;t.PageSize>0&&(N=t.PageSize),N!=E&&this.Frame.SetXShowCount(N),s.DataOffset=h,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}else if(e==m.OP_CORSSCURSOR_GOTO){if(!ze.IsNumber(t.Date))return;var P=ze.IsNumber(t.Time),O=this.GetChartStatus();if(!O)return;s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;M=s.DataOffset;for(var R=-1,B=(D=M,0);D<s.Data.length&&B<O.KLine.PageSize;++D,++B){p=s.Data[D];if(P){if(p.Date==t.Date&&p.Time==t.Time){p,R=B,D;break}}else if(p.Date==t.Date){p,R=B,D;break}}if(R<0)return;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var _=this.Frame.SubFrame[0].Frame,k=_.GetXFromIndex(R),G=_.GetYFromData(p.Close),V={X:k,Y:G,IsInClient:this.IsMouseOnClient(k,G)};this.LastMouseStatus.OnMouseMove=V,this.LastMouseStatus.MoveOnPoint={X:k,Y:G};var H=this.GetEventCallback(C.ON_MOUSE_MOVE),Y=this.TitlePaint[0];H&&Y&&(Y.OnMouseMoveEvent=H);var X=I(),W={};W.clientX=k/X+this.UIElement.getBoundingClientRect().left,W.clientY=G/X+this.UIElement.getBoundingClientRect().top,this.MoveOnPoint={X:k,Y:G},this.OnMouseMove(k,G,W),this.LastMouseStatus.MoveOnPoint=null,Y&&(Y.OnMouseMoveEvent=null)}}},this.ChartOperator_Temp_GetHistroyData=function(){var t=null;return t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,t||null},this.ChartOperator_Temp_Update=function(){this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnWheel=function(t){var e=this;if(l.Chart.Log("[KLineChartContainer::OnWheel]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a,i=I(),r=(t.clientX-this.UIElement.getBoundingClientRect().left)*i,n=(t.clientY-this.UIElement.getBoundingClientRect().top)*i;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),a=this.Canvas.isPointInPath(r,n);var s=t.wheelDelta;ze.IsObjectExist(t.wheelDelta)||(s=-.01*t.deltaY);var o=!0;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(o=!1),this.SourceData&&this.SourceData.Data)if(a&&s<0&&o){var h={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};h.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomDown(h,{ZoomDownloadDataCallback:function(t){e.ZoomDownloadData(t)}})&&(this.CursorIndex=h.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"))}else if(a&&s>0&&o){h={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};h.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomUp(h)&&(l.Chart.Log("[KLineChartContainer::OnWheel] cursorIndex ",h),this.CursorIndex=h.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"))}a&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}},this.Create=function(t,e){var a=this;for(var i in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new ea,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=va.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=va.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new Z,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.GetExtendChartByClassName=function(t){return a.GetExtendChartByClassName(t)},this.Frame.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.Frame.SubFrame){var r=new Aa;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame;var n=!0,s=!0;if(e&&e.Listener){var o=e.Listener;!1===o.KeyDown&&(n=!1,l.Chart.Log("[KLineChartContainer::Create] not register keydown event.")),!1===o.Wheel&&(s=!1,l.Chart.Log("[KLineChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",(function(t){a.OnKeyDown(t)}),!0),s&&this.UIElement.addEventListener("wheel",(function(t){a.OnWheel(t)}),!0)},this.OnCustomKeyDown=function(t,e){return 37==t&&e.ctrlKey?(this.MoveCorssCursorLeft(this.CtrlMoveStep),!0):!(39!=t||!e.ctrlKey)&&(this.MoveCorssCursorRight(this.CtrlMoveStep),!0)},this.MoveCorssCursorLeft=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,e)if(e.DataOffset<=0&&this.CursorIndex<=0)this.DragDownloadData&&this.DragDownloadData();else{if(this.CursorIndex-t<0)return e.DataOffset-=t,e.DataOffset<0&&(e.DataOffset=0,this.CursorIndex=0),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown");this.CursorIndex-=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}},this.MoveCorssCursorRight=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,e){var a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!(this.CursorIndex+e.DataOffset+1>=e.Data.length)){var i=!1;if(this.CursorIndex+t+e.DataOffset+1>e.Data.length&&(t=e.Data.length-1-e.DataOffset-this.CursorIndex,i=!0),this.CursorIndex+t>=a){var r=this.CursorIndex+t-(a-1);return e.DataOffset+=r,i&&(this.CursorIndex=a-1),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown")}this.CursorIndex+=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}}},this.GetKLineChart=function(){return this.ChartPaint[0]?this.ChartPaint[0]:null},this.CreateChildWindow=function(t){for(var e=this,a=this.GetEventCallback(C.ON_CREATE_FRAME),i=0;i<t;++i){var r=new R;r.UIElement=this.UIElement;var n=B.Create("KLineFrame",{ID:i});if(n.Canvas=this.Canvas,n.ChartBorder=r,n.Identify=i,n.RightSpaceCount=this.RightSpaceCount,n.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ModifyIndexDialog&&(n.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(n.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),n.HorizontalMax=20,n.HorizontalMin=10,0==i){n.YSplitOperator=new Ke,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),n.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},n.YSplitOperator.HQChart=this;var s=I();r.BottomSpace=15*s,r.TopSpace=15*s,n.GetEventCallback=function(t){return e.GetEventCallback(t)}}else n.YSplitOperator=new Je,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},n.YSplitOperator.HQChart=this;n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=r,n.XSplitOperator=new Qe,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=r,n.XSplitOperator.LanguageID=this.LanguageID,n.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i!=t-1&&(n.XSplitOperator.ShowText=!1);for(var o=n.HorizontalMin;o<=n.HorizontalMax;o+=1)n.HorizontalInfo[o]=new O,n.HorizontalInfo[o].Value=o,0==i&&o==n.HorizontalMin||(n.HorizontalInfo[o].Message[1]=o.toString(),n.HorizontalInfo[o].Font="14px 微软雅黑");var h=new J;if(h.Frame=n,h.Height=0==i?20:10,this.Frame.SubFrame[i]=h,a&&a.Callback){var l={SubFrame:this.Frame.SubFrame[i],WindowIndex:i};a.Callback(a,l,this)}}},this.CreateSubFrameItem=function(t){var e=this,a=new R;a.UIElement=this.UIElement;var i=new W;i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=t,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),i.HorizontalMax=20,i.HorizontalMin=10,i.YSplitOperator=new Je,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new Qe,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,i.XSplitOperator.ShowText=!1,i.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},i.YSplitOperator.HQChart=this,i.XSplitOperator.Symbol=this.Symbol,i.XSplitOperator.Period=this.Period;var r=this.Frame.SubFrame[0].Frame.XPointCount;i.XPointCount=r,i.Data=this.ChartPaint[0].Data;for(var n=i.HorizontalMin;n<=i.HorizontalMax;n+=1)i.HorizontalInfo[n]=new O,i.HorizontalInfo[n].Value=n,i.HorizontalInfo[n].Message[1]=n.toString(),i.HorizontalInfo[n].Font="14px 微软雅黑";var s=new J;s.Frame=i,s.Height=10;var o=this.GetEventCallback(C.ON_CREATE_FRAME);if(o&&o.Callback){var h={SubFrame:s,WindowIndex:t};o.Callback(o,h,this)}return s},this.CreateMainKLine=function(){var t=this,e=pt.Create("ChartKLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Main-KLine",e.DrawType=this.KLineDrawType,e.Identify="Main-KLine",e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e,this.TitlePaint[0]=new Ia,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].HQChart=this,this.TitlePaint[0].GetEventCallback=function(e){return t.GetEventCallback(e)}},this.BindMainData=function(t,e){if(this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.KLineSize)if(null==this.KLineSize.DataWidth)e=this.Frame.SubFrame[0].Frame.XPointCount-this.RightSpaceCount;else{var a=this.Frame.SetDataWidth(this.KLineSize.DataWidth);e=a.XPointCount-this.RightSpaceCount,this.KLineSize.DataWidth=null}for(var i in this.Frame.SubFrame){var r=this.Frame.SubFrame[i].Frame;r.XPointCount=e+this.RightSpaceCount,r.Data=this.ChartPaint[0].Data,r.XSplitOperator.Symbol=this.Symbol,r.XSplitOperator.Period=this.Period}for(var i in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){r=this.OverlayChartPaint[i];r.MainData=this.ChartPaint[0].Data}var n=t.Data.length-e;n<0&&(n=0),this.ChartPaint[0].Data.DataOffset=n,this.ChartPaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.CursorIndex=e,this.CursorIndex+n>=t.Data.length&&(this.CursorIndex=t.Data.length-1-n),this.CursorIndex<0&&(this.CursorIndex=0),this.CustomShow&&(this.SetCustomShow(this.CustomShow,t),this.CustomShow=null)},this.UpdateMainData=function(t,e){var a=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(a=this.Frame.SubFrame[0].Frame.Data):a=this.Frame.Data,a){var i=this.Frame.SubFrame[0].Frame.XPointCount,r=0;for(var n in e>0&&t.Data.length>e?(r=t.Data.length-e,l.Chart.Log("[KLineChartContainer::UpdateMainData]  [count=".concat(e,"->").concat(t.Data.length,"], [newDataCount=").concat(r,"], [Pagesize=").concat(i,"]"))):0==e&&t.Data.length>i&&(r=t.Data.length-i,l.Chart.Log("[KLineChartContainer::UpdateMainData] history data is empty. [count=".concat(e,"->").concat(t.Data.length,"], [newDataCount=").concat(r,"], [Pagesize=").concat(i,"]"))),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,t.Data.length>i&&(this.ChartPaint[0].Data.DataOffset=a.DataOffset+r),this.Frame.SubFrame){var s=this.Frame.SubFrame[n].Frame;s.Data=this.ChartPaint[0].Data,0==n&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period)}for(var n in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){s=this.OverlayChartPaint[n];s.MainData=this.ChartPaint[0].Data}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol}},this.SetCustomShow=function(t,e){if(t&&t.Date&&!(t.Date<19910101)){for(var a=t.Date,i=null,r=0;r<e.Data.length;++r){var n=e.Data[r];if(n.Date>=a){i=r;break}}if(null!==i){var s=e.Data.length-i;t.PageSize>0&&(s=t.PageSize);var o=s,h=this.GetMaxMinPageSize();for(var r in s>h.Max?o=h.Max:s<h.Min&&(o=h.Min),this.Frame.SubFrame){n=this.Frame.SubFrame[r].Frame;n.XPointCount=o}this.ChartPaint[0].Data.DataOffset=i,this.CursorIndex=0}else l.Chart.Log("[KLineChartContainer::SetCustomShow] Can't find first date=".concat(a))}},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=I(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,s=r.LastPoint.Y/i,o=!0,h=this.GetEventCallback(C.ON_DRAG_SELECT_RECT_MOUSEUP);if(h){var l={X:n,Y:s,SelectData:a,RectSelectPaint:e,IsShowMenu:!1};h.Callback(h,l,this),o=l.IsShowMenu}o&&this.SelectRectRightMenu&&(t.data={Chart:this,X:n,Y:s,SelectData:a,RectSelectPaint:e},this.SelectRectRightMenu.DoModal(t))}}},this.OnDragSubSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=I(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,s=r.LastPoint.Y/i,o=this.GetEventCallback(C.ON_DRAG_SUB_SELECT_RECT_MOUSEUP);if(o){var h={Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},l={X:n,Y:s,SubSelectData:h,RectSelectPaint:e};o.Callback(o,l,this)}}}},this.ShowSelectData=function(t){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),l.Chart.Log("[KLineChartContainer::ShowSelectData] selectData",t);var e=t.Start,a=t.End-t.Start+1;for(var i in l.Chart.Log("[KLineChartContainer::ShowSelectData] DataOffset=".concat(e,", ShowCount=").concat(a)),this.Frame.SubFrame){var r=this.Frame.SubFrame[i].Frame;r.XPointCount=a}this.ChartPaint[0].Data.DataOffset=e,this.CursorIndex=0,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&ze.IsNumber(e.CursorIndex)&&this.ChartPaint[0]&&this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;l.Chart.Log("[KLineChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.ChartPaint[0].Data;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var s=r.Data[n];if(l.Chart.Log("[KLineChartContainer::OnMarkRectSelect] item",s),this.SetRectSelectData(s,n)){var o=a.GetPointCount(),h=I();if(1==o){var u=this.GetEventCallback(C.ON_KEYDOWN_SELECT_RECT_FIRST);if(u&&u.Callback){var c={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,Item:s,Index:n,RectSelectPaint:a};u.Callback(u,c,this)}}else if(2==o){var d=a.GetSelectRectData(),f=(u=this.GetEventCallback(C.ON_KEYDOWN_SELECT_RECT),!0);if(u&&u.Callback){c={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:d,RectSelectPaint:a,IsShowMenu:!0};u.Callback(u,c,this),f=c.IsShowMenu}f&&this.SelectRectRightMenu&&(t.data={Chart:this,X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:d,RectSelectPaint:a},this.SelectRectRightMenu.DoModal(t))}this.Draw()}}}},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.BindIndexData=function(t,e,a){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e,a))},this.BindOverlayIndexData=function(t,e,a){t.Script&&("function"!=typeof t.Script.RequestData?"function"!=typeof t.Script.ExecuteScript?t.Script.BindData(this,e,a):t.Script.ExecuteScript(this,e,a):t.Script.RequestData(this,e,a))},this.BindInstructionIndexData=function(t){this.ColorIndex&&"function"==typeof this.ColorIndex.ExecuteScript&&this.ColorIndex.ExecuteScript(this,0,t),this.TradeIndex&&"function"==typeof this.TradeIndex.ExecuteScript&&this.TradeIndex.ExecuteScript(this,0,t)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(0!=a){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.AutoUpdateEvent=function(t,e){var a=t?C.RECV_START_AUTOUPDATE:C.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,Right:this.Right,Period:this.Period},Explain:e};t&&(n.Callback=function(t){ut.IsDayPeriod(i.Period,!0)?i.RecvRealtimeData(t):(ut.IsMinutePeriod(i.Period,!0)||ut.IsSecondPeriod(i.Period))&&i.RecvMinuteRealtimeData(t)}),r.Callback(r,n,this)}},this.SendKLineUpdateEvent=function(t){var e=this.GetEventCallback(C.RECV_KLINE_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.SendManualKLineUpdateEvent=function(t){var e=this.GetEventCallback(C.RECV_KLINE_MANUAL_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.GetKLineDrawType=function(){return this.KLineDrawType},this.RequestHistoryData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.ResetZoomDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::RequestHistoryData",Explain:"日K数据",Request:{Url:t.KLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestDataCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())})),1==a.PreventDefault)return}$n.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}})},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.RecvHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[KLineChartContainer::RecvHistoryData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var e=Ni.JsonDataToHistoryData(t),a=new ut;a.Data=e,a.DataType=0,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvHistoryData");var i=new ut;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(ut.IsDayPeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var s,o=this.GetKLineCalulate();if(o){var h=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvHistoryData"});i=h,this.FlowCapitalReady=!0}this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvHistoryData"),this.Frame.SetSizeChage(!0),this.Frame.SubFrame[0]&&(s=this.Frame.SubFrame[0].Frame),s&&s.YSplitOperator&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period);var u=this.Page.Day;(0==u.Enable||1==u.Enable&&1==u.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),u.Enable&&(u.Index=1),this.BindInstructionIndexData(i);for(var c=0;c<this.Frame.SubFrame.length;++c)this.BindIndexData(c,i);if(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw(),this.BindAllOverlayIndexData(i),this.mapEvent.has(C.RECV_HISTROY_DATA)){var d=this.mapEvent.get(C.RECV_HISTROY_DATA);t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};d.Callback(d,t,this)}}},this.RequestHistoryPageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RequestHistoryPageData",Explain:"日K数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Day.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date}}},Page:t.Page.Day,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.RecvHistoryPageData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():t.AutoUpdate()})),1==a.PreventDefault)return}setTimeout((function(){var e=t.Page.Day;e.Finish=!0;var a={data:[[20150218,12.54,12.5,12.74,11.95,12.27,117632441,1459671045],[20150219,12.27,12.1,12.23,11.9,12.23,95889423,1157078548],[20150220,12.23,12.17,12.17,11.9,12.05,67763439,815652761]],symbol:t.Symbol,name:t.Name};t.RecvHistoryPageData(a),1==e.Enable&&0==e.Finish?t.RequestHistoryPageData():t.AutoUpdate()}),500)},this.RecvHistoryPageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[KLineChartContainer::RecvHistoryPageData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var e=Ni.JsonDataToHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new ut;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&n.Period<=3){var s=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=s}if(ut.IsDayPeriod(n.Period,!1)||ut.IsMinutePeriod(n.Period,!1)){var o=n.GetPeriodData(n.Period);n.Data=o}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Day;++h.Index,1==h.Enable&&1==h.Finish&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ReqeustHistoryMinuteData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.ResetZoomDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::ReqeustHistoryMinuteData",Explain:"1分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestMinuteDayCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())})),1==a.PreventDefault)return}$n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}})},this.RecvMinuteHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[KLineChartContainer::RecvMinuteHistoryData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var e=Ni.JsonDataToMinuteHistoryData(t),a=new ut;a.Data=e,a.DataType=1,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvMinuteHistoryData");var i=new ut;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=1,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(ut.IsMinutePeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var s,o=this.GetKLineCalulate();if(o){var h=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteHistoryData"});i=h,this.FlowCapitalReady=!0}for(var u in this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvMinuteHistoryData"),this.Frame.SetSizeChage(!0),this.Frame.SubFrame[0]&&(s=this.Frame.SubFrame[0].Frame),s&&s.YSplitOperator&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period),this.OverlayChartPaint){var c=this.OverlayChartPaint[u];c.Data=null}var d=this.Page.Minute;(0==d.Enable||1==d.Enable&&1==d.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvMinuteHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryMinuteData(),this.CreateChartDrawPictureByStorage()),d.Enable&&++d.Index,this.BindInstructionIndexData(i);for(u=0;u<this.Frame.SubFrame.length;++u)this.BindIndexData(u,i);if(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(i),this.mapEvent.has(C.RECV_HISTROY_DATA)){var f=this.mapEvent.get(C.RECV_HISTROY_DATA);t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};f.Callback(f,t,this)}}},this.ReqeustHistoryMinutePageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RecvHistoryMinutePageData",Explain:"1分钟K线数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Minute.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date,time:e.Time}}},Page:t.Page.Minute,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.RecvHistoryMinutePageData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()})),1==a.PreventDefault)return}setTimeout((function(){var e=t.Page.Minute;e.Finish=!0;t.RecvHistoryMinutePageData({data:[[20190906,14.58,14.71,14.71,14.71,14.71,1096425,16128411,925],[20190906,14.71,14.73,14.74,14.71,14.71,2154859,31731820,930],[20190906,14.71,14.71,14.71,14.68,14.69,1427516,20989208,931],[20190906,14.69,14.69,14.71,14.68,14.7,1680503,24694143,932],[20190906,14.7,14.69,14.7,14.65,14.65,1315900,19310964,933],[20190906,14.65,14.66,14.69,14.65,14.68,702955,10313842,934],[20190906,14.68,14.7,14.71,14.67,14.67,1735266,25495875,935],[20190906,14.67,14.68,14.7,14.67,14.67,739e3,10845398,936],[20190906,14.67,14.67,14.68,14.67,14.68,389800,5721266,937],[20190906,14.68,14.68,14.7,14.68,14.69,648477,9527859,938],[20190906,14.69,14.7,14.71,14.69,14.7,1128400,16589794,939],[20190906,14.7,14.7,14.71,14.69,14.71,714858,10509708,940],[20190906,14.71,14.71,14.71,14.69,14.69,401500,5900477,941],[20190906,14.69,14.69,14.71,14.69,14.69,1165684,17131034,942],[20190906,14.69,14.69,14.7,14.67,14.67,498516,7321024,943],[20190906,14.67,14.68,14.68,14.67,14.67,350126,5139012,944],[20190906,14.67,14.67,14.69,14.67,14.69,561600,8246789,945]]}),1==e.Enable&&0==e.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()}),500)},this.RecvHistoryMinutePageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[KLineChartContainer::RecvHistoryMinutePageData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var e=Ni.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new ut;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&ut.IsDayPeriod(n.Period,!1)){var s=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=s}if(ut.IsDayPeriod(n.Period,!1)||ut.IsMinutePeriod(n.Period,!1)){var o=n.GetPeriodData(n.Period);n.Data=o}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Minute;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.RequestFlowCapitalData(),this.CreateChartDrawPictureByStorage()),h.Enable&&++h.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==xt.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),n={Name:"KLineChartContainer::RequestRealtimeData",Explain:"当天最新日线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,(function(e){t.RecvRealtimeData(e),t.AutoUpdate()})),1==n.PreventDefault)return}$n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvRealtimeData(e),t.AutoUpdate()}})},this.RecvRealtimeData=function(t){if(1!=this.IsOnTouch){var e=Ni.JsonDataToRealtimeData(t,this.Symbol);if(e){var a=this.SourceData.Data[this.SourceData.Data.length-1],i=this.GetHistoryDataCount();if(0==this.SourceData.Data.length){var r=new at;at.CopyTo(r,e),this.SourceData.Data.push(r)}else if(a.Date==e.Date)l.Chart.Log("[KLineChartContainer::RecvRealtimeData] update kline by realtime data",e),at.CopyTo(a,e);else if(a.Date<e.Date){l.Chart.Log("[KLineChartContainer::RecvRealtimeData] insert kline by realtime data",e);r=new at;at.CopyTo(r,e),!ze.IsNumber(r.YClose)&&this.SourceData.Data.length>0&&(r.YClose=this.SourceData.Data[this.SourceData.Data.length-1].YClose),this.SourceData.Data.push(r)}else{for(var n=!1,s=this.SourceData.Data,o=s.length-1;o>=0;--o){var h=s[o];if(h.Date==e.Date){at.CopyTo(h,e),n=!0;break}}if(!n)return}var u=new ut;if(u.Data=this.SourceData.Data,u.Period=this.Period,u.Right=this.Right,u.DataType=this.SourceData.DataType,u.Symbol=this.Symbol,u.Right>0&&ut.IsDayPeriod(u.Period,!0)&&Mr.IsSHSZStockA(this.Symbol)&&!this.IsApiPeriod){var c=u.GetRightData(u.Right,{AlgorithmType:this.RightFormula});u.Data=c}if(!this.IsApiPeriod&&(ut.IsDayPeriod(u.Period,!1)||ut.IsMinutePeriod(u.Period,!1))){var d=u.GetPeriodData(u.Period);u.Data=d}var f=this.GetKLineCalulate();if(f){var C=f.RecvHistoryData(u,{Symbol:this.Symbol,Function:"RecvRealtimeData"});u=C,this.FlowCapitalReady=!0}this.UpdateMainData(u,i),this.UpdateOverlayRealtimeData(t),this.BindInstructionIndexData(u);for(o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,u);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(u),this.BindAllOverlayIndexData(u)}}},this.UpdateOverlayRealtimeData=function(t){if(ze.IsNonEmptyArray(this.OverlayChartPaint))for(var e=0;e<this.OverlayChartPaint.length;++e){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==xt.STATUS_FINISHED_ID)){var i=Ni.JsonDataToRealtimeData(t,a.Symbol);if(i){var r=a.SourceData,n=r.Data[r.Data.length-1];if(n.Date==i.Date)l.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] update kline by minute data",i),n.Close=i.Close,n.High=i.High,n.Low=i.Low,n.Vol=i.Vol,n.Amount=i.Amount;else{if(!(a.Date<i.Date))continue;l.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] insert kline by minute data",i);var s=new at;s.YClose=i.YClose,s.Open=i.Open,s.Close=i.Close,s.High=i.High,s.Low=i.Low,s.Vol=i.Vol,s.Amount=i.Amount,s.Date=i.Date,r.Data.push(s)}var o=new ut;if(o.Data=r.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=0,o.Right>0&&Mr.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var h=o.GetRightData(o.Right,{AlgorithmType:this.RightFormula});o.Data=h}var u=this.SourceData.GetOverlayData(o.Data,this.IsApiPeriod);if(o.Data=u,ut.IsDayPeriod(o.Period,!1)&&!this.IsApiPeriod){var c=o.GetPeriodData(o.Period);o.Data=c}a.Data=o}}}},this.RequestMinuteRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==xt.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),n={Name:"KLineChartContainer::RequestMinuteRealtimeData",Explain:"当天1分钟K线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","price","yclose","minutecount","minute","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,(function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()})),1==n.PreventDefault)return}$n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","price","yclose","minutecount","minute","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}})},this.SetSourceDatatLimit=function(t){for(var e in this.SourceDataLimit=new Map,t){var a=t[e];this.SourceDataLimit.set(a.Period,a.MaxCount),l.Chart.Log("[KLineChartContainer::SetSourceDatatLimit] Period=".concat(a.Period,", MaxCount=").concat(a.MaxCount))}},this.ReduceSourceData=function(){if(this.SourceDataLimit&&this.SourceDataLimit.has(this.Period)){var t=this.SourceDataLimit.get(this.Period),e=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(e=this.Frame.SubFrame[0].Frame.Data):e=this.Frame.Data,e&&!(t<50)){var a=e.DataOffset,i=0;while(this.SourceData.Data.length>t)this.SourceData.Data.shift(),--a,++i;i>0&&(a<0&&(a=0),e.DataOffset=a,l.Chart.Log("[KLineChartContainer::ReduceSourceData] remove data ".concat(i,", dataOffset=").concat(a)))}}},this.RecvMinuteRealtimeDataV2=function(t){if(1!=this.IsOnTouch)if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[KLineChartContainer::RecvMinuteRealtimeDataV2] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var e=Ni.JsonDataToMinuteHistoryData(t);if(e&&!(e.length<=0)){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount();if(this.SourceData&&this.SourceData.MergeMinuteData(e)){l.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeDataV2] update kline by 1 minute data [".concat(a,"->").concat(this.SourceData.Data.length,"]"));var i=new ut;if(i.Data=this.SourceData.Data,i.Period=this.Period,i.Right=this.Right,i.DataType=this.SourceData.DataType,i.Symbol=this.Symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if((ut.IsDayPeriod(i.Period,!1)||ut.IsMinutePeriod(i.Period,!1))&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var s=this.GetKLineCalulate();if(s){var o=s.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeDataV2"});i=o,this.FlowCapitalReady=!0}this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(i),this.BindAllOverlayIndexData(i)}}}},this.RecvMinuteRealtimeData=function(t){if(1!=this.IsOnTouch)if(2!=t.ver){var e=Ni.JsonDataToMinuteRealtimeData(t,this.Symbol);if(e){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount(),i=this.SourceData.Data.length;if(this.SourceData.MergeMinuteData(e)){l.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeData] update kline by 1 minute data [".concat(i,"->").concat(this.SourceData.Data.length,"]"));var r=new ut;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,r.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}if((ut.IsDayPeriod(r.Period,!1)||ut.IsMinutePeriod(r.Period,!1))&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}var o=this.GetKLineCalulate();if(o){var h=o.RecvHistoryData(r,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeData"});r=h,this.FlowCapitalReady=!0}this.UpdateMainData(r,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(r);for(var u=0;u<this.Frame.SubFrame.length;++u)this.BindIndexData(u,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(r),this.BindAllOverlayIndexData(r)}}}else this.RecvMinuteRealtimeDataV2(t)},this.UpdateOverlayMinuteRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==xt.STATUS_FINISHED_ID)){if(2==t.ver)var i=Ni.JsonDataToMinuteRealtimeDataV2(t,a.Symbol);else i=Ni.JsonDataToMinuteRealtimeData(t,a.Symbol);if(i){var r=a.SourceData;if(!r.MergeMinuteData(i))return;var n=new ut;n.Data=r.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=0;var s=this.SourceData.GetOverlayMinuteData(n.Data,this.IsApiPeriod);if(n.Data=s,ut.IsMinutePeriod(n.Period,!1)&&!this.IsApiPeriod){var o=n.GetPeriodData(n.Period);n.Data=o}a.Data=n}}}},this.GetHistoryDataCount=function(){var t=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(t=this.Frame.SubFrame[0].Frame.Data):t=this.Frame.Data,!t)return-1;var e=t.Data.length;return e},this.GetRequestDataCount=function(){var t={MaxRequestDataCount:this.MaxRequestDataCount,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount};if(!this.SourceData||!this.SourceData.Data||this.SourceData.Data.length<=0)return t;if(ut.IsDayPeriod(this.Period,!0)){var e=this.SourceData.Data.length;e>t.MaxRequestDataCount&&(t.MaxRequestDataCount=e)}else if(ut.IsMinutePeriod(this.Period,!0)){var a;e=0;for(var i in this.SourceData.Data){var r=this.SourceData.Data[i];r.Date!=a&&++e,a=r.Date}e>t.MaxRequestMinuteDayCount&&(t.MaxRequestMinuteDayCount=e)}return t},this.RequestTickData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),t.ChartSplashPaint.EnableSplash(!0),t.Draw();var e=xi.CacheDomain+"/cache/dealday/today/"+t.Symbol+".json";if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickData",Explain:"当天分笔数据",Request:{Url:e,Data:{symbol:t.Symbol},Type:"GET"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate()})),1==a.PreventDefault)return}$n.HttpRequest({url:e,data:{symbol:t.Symbol},type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvTickData=function(t){if(2==t.ver)var e=Ni.JsonDataToTickDataV2(t);else e=Ni.JsonDataToTickData(t);var a=new ut;a.Data=e,a.DataType=2,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvTickData");var i,r=new ut;r.Data=e,r.Right=this.Right,r.Period=this.Period,r.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(r,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvTickData"),this.BindInstructionIndexData(r);for(var n=0;n<this.Frame.SubFrame.length;++n)0==n&&(i=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,r);if(i&&i.YSplitOperator&&(i.YSplitOperator.Symbol=this.Symbol,i.YSplitOperator.Data=this.ChartPaint[0].Data,i.YSplitOperator.Period=this.Period,i.YSplitOperator.KLineChart=this.ChartPaint[0]),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(r),this.mapEvent.has(C.RECV_HISTROY_DATA)){var s=this.mapEvent.get(C.RECV_HISTROY_DATA);t={HistoryData:r,Stock:{Symbol:this.Symbol,Name:this.Name}};s.Callback(s,t,this)}},this.RequestTickRealtimeData=function(){var t=this,e=0;if(this.SourceData&&this.SourceData.Data&&(e=this.SourceData.Data.length),this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickRealtimeData",Explain:"当天最新分笔数据",Request:{Url:t.TickApiUrl,Data:{symbol:t.Symbol,start:e,end:e+1e3},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()})),1==a.PreventDefault)return}$n.HttpRequest({url:t.TickApiUrl,data:{symbol:t.Symbol,start:e-10,end:e+1e3},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}})},this.RecvTickRealtimeData=function(t){if(2==t.ver)var e=Ni.JsonDataToTickDataV2(t);else e=Ni.JsonDataToTickData(t);if(e&&!(e.length<=0)){var a=!1;1==t.redraw&&(a=!0);var i=this.SourceData.Data,r=this.SourceData.Data.length,n=0;i.length>0&&(n=i[i.length-1].Time);var s=0;for(var o in e){var h=e[o];h.Time<=n||(i.push(h),++s)}if(!(s<=0&&0==a)){var l=new ut;l.Data=i,l.Right=this.Right,l.Period=this.Period,l.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.UpdateMainData(l,r),this.BindInstructionIndexData(l);for(o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,l);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(l)}}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(ze.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(t=1;t<this.TitlePaint.length;++t){e=this.TitlePaint[t];e.OverlayIndex=new Map}},this.ChangePeriod=function(t,e){var a={Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType},i=!1,r=!1,n=null;if(e&&(e.KLine&&(ze.IsNumber(e.KLine.DrawType)&&(i=!0),ze.IsNumber(e.KLine.Right)&&(n=e.KLine.Right)),1==e.Reload&&(r=!0)),this.Period!=t||0!=r){i&&this.ChangeKLineDrawType(e.KLine.DrawType,!1);var s=!0;if(this.SourceData){s=!1;if(t>ct&&t<=dt)0!=this.SourceData.DataType&&(s=!0);else if(t>ft&&t<=Ct||t>3e4&&t<=32e3)(1!=this.SourceData.DataType||ut.IsSecondPeriod(t))&&(s=!0);else switch(t){case 0:case 1:case 2:case 3:case 9:case 21:0!=this.SourceData.DataType&&(s=!0);break;case 4:case 5:case 6:case 7:case 8:case 11:case 12:1!=this.SourceData.DataType&&(s=!0);break;case 10:2!=this.SourceData.DataType&&(s=!0);break}}this.Period=t,null!=n&&(this.Right=n),this.ReloadChartDrawPicture(),this.ClearRectSelect(!0),this.Frame.ClearUpDonwFrameYData(),this.ClearCustomKLine();var o=this.GetKLineDrawType();10!=o&&11!=o&&12!=o&&16!=o||(s=!0);var h=this.GetEventCallback(C.ON_CHANGE_KLINE_PERIOD);if(h&&h.Callback){var l={IsApiPeriod:this.IsApiPeriod,Old:a,Now:{Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType},IsDataTypeChange:s};h.Callback(h,l,this),s=l.IsDataTypeChange}0!=s||this.IsApiPeriod?(this.ClearIndexPaint(),ut.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()):ut.IsTickPeriod(this.Period)&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.RequestTickData())):this.Update({UpdateCursorIndexType:2})}else i&&this.ChangeKLineDrawType(e.KLine.DrawType)},this.ChangeRight=function(t){if(Mr.IsEnableRight(this.Period,this.Symbol,this.RightFormula)){var e=this.Symbol.toUpperCase();Mr.IsBIT(e)||t<0||t>2||this.Right!=t&&(this.Right=t,this.IsApiPeriod?ut.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.RequestHistoryData()):(ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period))&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.ReqeustHistoryMinuteData()):this.Update())}},this.SetFirstShowDate=function(t){if(t&&t.Date){var e={ID:m.OP_GOTO,Date:t.Date};ze.IsNumber(t.Time)&&(e.Time=t.Time),ze.IsNumber(t.PageSize)&&(e.PageSize=t.PageSize),this.ChartOperator(e)}},this.DeleteIndexPaint=function(t,e){var a=new Array;for(var i in this.ChartPaint){var r=this.ChartPaint[i];0==i||r.ChartFrame!=this.Frame.SubFrame[t].Frame?a.push(r):!0===e&&r&&r.OnDestroy&&r.OnDestroy()}var n=this.Frame.SubFrame[t].Frame;n.YSpecificMaxMin=null,n.IsLocked=!1,n.YSplitScale=null,n.YSplitOperator.SplitType=n.YSplitOperator.DefaultSplitType,this.ChartPaint=a;var s=t+1;this.TitlePaint[s].Data=[],this.TitlePaint[s].Title=null},this.ShowKLine=function(t){this.ChartPaint.length<=0||!this.ChartPaint[0]||(this.ChartPaint[0].IsShow=t)},this.SetInstructionData=function(t,e){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){var a=this.TitlePaint[1];2==t?(this.ChartPaint[0].ColorData=e.Data,a&&(a.ColorIndex={Name:e.Name,Param:e.Param})):1==t&&(this.ChartPaint[0].TradeData={Sell:e.Sell,Buy:e.Buy,Name:e.Name,Param:e.Param},a&&(a.TradeIndex={Name:e.Name,Param:e.Param}))}},this.ChangeInstructionIndex=function(t,e){var a=new d,i=a.Get(t);i&&(1!=i.InstructionType&&2!=i.InstructionType||(e&&e.Args&&(i.Args=e.Args),i.ID=t,this.ChangeInstructionScriptIndex(i)))},this.ChangeInstructionScriptIndex=function(t){if(1==t.InstructionType)this.TradeIndex=new fn(t.Name,t.Script,t.Args,t);else{if(2!=t.InstructionType)return;this.ColorIndex=new fn(t.Name,t.Script,t.Args,t)}var e=this.ChartPaint[0].Data;this.BindInstructionIndexData(e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.CancelInstructionIndex=function(){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){this.ColorIndex=null,this.TradeIndex=null,this.ChartPaint[0].ColorData=null,this.ChartPaint[0].TradeData=null;var t=this.TitlePaint[1];t&&(t.TradeIndex=null,t.ColorIndex=null),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.SetFrameToolbar=function(t,e){if(e&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame){var a=this.Frame.SubFrame[t].Frame,i=!1;ze.IsBool(e.Modify)&&(a.ModifyIndex=e.Modify,i=!0),ze.IsBool(e.Change)&&(a.ChangeIndex=e.Change,i=!0),ze.IsBool(e.Close)&&(a.CloseIndex=e.Close,i=!0),ze.IsBool(e.Overlay)&&(a.OverlayIndex=e.Overlay,i=!0),i&&(a.SizeChange=!0,a.ToolbarRect=null,a.DrawToolbar())}},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new fn(e.Name,e.Script,e.Args,e),a&&a.Window&&this.SetFrameToolbar(t,a.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.OnKLinePageChange=function(t){if(this.ChartPaint[0]){for(var e=this.ChartPaint[0].Data,a=0;a<this.WindowIndex.length;++a){var i=this.WindowIndex[a];i&&(!0===i.IsUsePageData&&this.BindIndexData(a,e,{Type:1}))}for(a=0;a<this.Frame.SubFrame.length;++a){i=this.Frame.SubFrame[a];for(var r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n&&n.Script&&1==n.Script.IsUsePageData&&this.BindOverlayIndexData(n,a,e)}}}},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new mn(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=bi.Get(e);if(!i){var r=new d,n=r.Get(e);if(!n)return;n.IsMainIndex?t=0:0==t&&(t=1);var s=n;return a&&(a.FloatPrecision>=0&&(s.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(s.StringFormat=a.StringFormat),a.Args&&(s.Args=a.Args),a.TitleFont&&(s.TitleFont=a.TitleFont),a.IsShortTitle&&(s.IsShortTitle=a.IsShortTitle),a.Lock&&(s.Lock=a.Lock)),this.ChangeScriptIndex(t,s,a)}i.IsMainIndex?t>0&&(t=0):0==t&&(t=1);var o=new Array;for(var h in this.ChartPaint){var l=this.ChartPaint[h];0!=h&&l.ChartFrame==this.Frame.SubFrame[t].Frame||o.push(l)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=o;var u=t+1;this.TitlePaint[u].Data=[],this.TitlePaint[u].Title=null,this.WindowIndex[t]=i.Create(a),this.CreateWindowIndex(t);var c=this.ChartPaint[0].Data;this.BindIndexData(t,c),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangePyScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new er(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.ChartPaint[0].Data;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,s=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{var o=new d;if(n=o.Get(a),!n&&(s=bi.Get(a),!s))return console.warn("[KLineChartContainer::CreateOverlayIndex] can not find index[".concat(a,"]")),null}var h=this.Frame.SubFrame[i];h.Interval=this.OverlayIndexFrameWidth;var l=new Q;t.Identify&&(l.Identify=t.Identify);var u="KLineChartHScreenContainer"===this.ClassName?new K:new U;if(u.Canvas=this.Canvas,u.MainFrame=h.Frame,u.ChartBorder=h.Frame.ChartBorder,u.GetEventCallback=function(t){return e.GetEventCallback(t)},!0===t.ShowRightText?u.IsShow=!0:!1===t.ShowRightText&&(u.IsShow=!1),ze.IsBool(t.ShowToolbar)&&(u.IsShowToolbar=t.ShowToolbar),ze.IsBool(t.IsShareY)&&(u.IsShareY=t.IsShareY),ze.IsBool(t.IsShowIndexTitle)&&(u.IsShowIndexTitle=t.IsShowIndexTitle),ze.IsBool(t.IsCalculateYMaxMin)&&(u.IsCalculateYMaxMin=t.IsCalculateYMaxMin),u.YSplitOperator=new Je,u.YSplitOperator.LanguageID=this.LanguageID,u.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),u.YSplitOperator.Frame=u,u.YSplitOperator.ChartBorder=u.ChartBorder,u.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,u.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},u.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},u.YSplitOperator.OverlayIndex=l,u.YSplitOperator.HQChart=this,u.YSplitOperator.OverlayIdentify=l.Identify,t.Frame){var c=t.Frame;c.Custom&&(u.YSplitOperator.Custom=c.Custom),ze.IsBool(c.IsYDrawMainFrame)&&(u.IsYDrawMainFrame=c.IsYDrawMainFrame),ze.IsBool(c.IsShowToolbar)&&(u.IsShowToolbar=c.IsShowToolbar)}if(l.Frame=u,r){var f=new mn(r.Name,r.Script,r.Args,t,!0);f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},l.Script=f}else if(n){var C=n.Args;t.Args&&(C=t.Args);var m={Name:n.Name,Script:n.Script,Args:C,ID:a,KLineType:n.KLineType,YSpecificMaxMin:n.YSpecificMaxMin,YSplitScale:n.YSplitScale,FloatPrecision:n.FloatPrecision,Condition:n.Condition,OutName:n.OutName};ze.IsNumber(t.FloatPrecision)&&(m.FloatPrecision=t.FloatPrecision);var D=new Cn(m.Name,m.Script,m.Args,m);D.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},l.Script=D}else{D=s.Create();D.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},D.Create(this,i),l.Script=D}return h.OverlayIndex.push(l),l},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.ChangeKLineDrawType=function(t,e,a){if(this.KLineDrawType!=t||a){var i=this.KLineDrawType;this.KLineDrawType=t;var r=new Set([5,7,8,10,11,12]);if(r.has(i)||r.has(t)){var n=this.ChartPaint[0];return n&&(n.DrawType=this.KLineDrawType),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeKLineDrawType"),void(ut.IsDayPeriod(this.Period,!0)?(this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):(ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period))&&(this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()))}for(var s=0;s<this.ChartPaint.length;++s){var o=this.ChartPaint[s];0==s?(o.DrawType=this.KLineDrawType,a&&ze.IsBool(a.IsThinAKBar)&&(o.IsThinAKBar=a.IsThinAKBar)):"ChartVolStick"==o.ClassName&&(o.KLineDrawType=this.KLineDrawType)}for(var s in this.OverlayChartPaint){o=this.OverlayChartPaint[s];o.DrawType=this.KLineDrawType}0!=e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.ChangeCoordinateType=function(t){if((this.Frame||this.Frame.SubFrame)&&this.Frame.SubFrame.length){if(ze.IsNumber(t)){var e=t;if(2==e)this.Frame.SubFrame[0].Frame.CoordinateType=1;else if(1==e)this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=e;else if(0==e)this.Frame.SubFrame[0].Frame.CoordinateType=0,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0;else{if(3!=e)return;this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=2}}else t.Type>=0&&t.Type<=5&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=t.Type),!0===t.IsReverse?this.Frame.SubFrame[0].Frame.CoordinateType=1:0==t.IsReverse&&(this.Frame.SubFrame[0].Frame.CoordinateType=0);this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ChangeIndexWindowCount=function(t,e){var a=this;if(!(t<=0)&&this.Frame.SubFrame.length!=t){this.Frame.RestoreIndexWindows();var i=this.Frame.SubFrame.length;if(i>t){for(var r=this.GetEventCallback(C.ON_DELETE_FRAME),n=i-1;n>=t;--n)if(this.DeleteIndexPaint(n),this.Frame.SubFrame[n].Frame.ClearToolbar(),r&&r.Callback){var s={SubFrame:this.Frame.SubFrame[n],WindowIndex:n};r.Callback(r,s,this)}this.Frame.SubFrame.splice(t,i-t),this.WindowIndex.splice(t,i-t);for(n=0;n<this.Frame.SubFrame.length;++n){var o=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}else{var h=I();for(n=i;n<t;++n){var l=this.CreateSubFrameItem(n);l.Frame.ChartBorder.TitleHeight*=h,this.Frame.SubFrame[n]=l;var u=new Aa;u.Frame=this.Frame.SubFrame[n].Frame,u.Canvas=this.Canvas,u.LanguageID=this.LanguageID,u.GetEventCallback=function(t){return a.GetEventCallback(t)},u.SelectedChart=this.SelectedChart,this.TitlePaint[n+1]=u}for(n=0;n<this.Frame.SubFrame.length;++n){o=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();var c=[{Index:"RSI"},{Index:"MACD"},{Index:"VOL"},{Index:"UOS"},{Index:"CHO"},{Index:"BRAR"}];e&&e.Windows.length>0&&(c=e.Windows);var f=new d;for(n=i;n<t;++n){o=c[n%c.length];var m=o.Index,D=f.Get(m),p=D.Args;o.Args&&(p=o.Args);var v={Name:D.Name,Script:D.Script,Args:p,ID:o.Index,KLineType:D.KLineType,YSpecificMaxMin:D.YSpecificMaxMin,YSplitScale:D.YSplitScale,FloatPrecision:D.FloatPrecision,Condition:D.Condition,OutName:D.OutName};this.WindowIndex[n]=new fn(v.Name,v.Script,v.Args,v);l=this.Frame.SubFrame[n];null!=o.Modify&&(this.Frame.SubFrame[n].Frame.ModifyIndex=o.Modify),null!=o.Change&&(this.Frame.SubFrame[n].Frame.ChangeIndex=o.Change),null!=o.Close&&(this.Frame.SubFrame[n].Frame.CloseIndex=o.Close),null!=o.Overlay&&(chart.Frame.SubFrame[n].Frame.OverlayIndex=o.Overlay),1==o.IsDrawTitleBG&&(this.Frame.SubFrame[n].Frame.IsDrawTitleBG=o.IsDrawTitleBG),ze.IsBool(o.IsShowNameArrow)&&(this.Frame.SubFrame[n].Frame.IsShowNameArrow=o.IsShowNameArrow),ze.IsNumber(o.TitleHeight)?this.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=o.TitleHeight:o.TitleHeight=this.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight,0==o.IsShowTitleArraw&&(this.Frame.SubFrame[n].Frame.IsShowTitleArraw=!1),0==o.IsShowIndexName&&(this.Frame.SubFrame[n].Frame.IsShowIndexName=!1),0==o.IsShowOverlayIndexName&&(this.Frame.SubFrame[n].Frame.IsShowOverlayIndexName=!1),ze.IsNumber(o.IndexParamSpace)&&(this.Frame.SubFrame[n].Frame.IndexParamSpace=o.IndexParamSpace),ze.IsNumber(o.IndexTitleSpace)&&(this.Frame.SubFrame[n].Frame.IndexTitleSpace=o.IndexTitleSpace),0==o.IsShowXLine&&(this.Frame.SubFrame[n].Frame.IsShowXLine=!1),0==o.IsShowYLine&&(this.Frame.SubFrame[n].Frame.IsShowYLine=!1),ze.IsBool(o.IsShowIndexTitle)&&(this.Frame.SubFrame[n].Frame.IsShowIndexTitle=o.IsShowIndexTitle),ze.IsBool(o.IsShowLeftText)&&(l.Frame.IsShowYText[0]=o.IsShowLeftText,l.Frame.YSplitOperator.IsShowLeftText=o.IsShowLeftText),ze.IsBool(o.IsShowRightText)&&(l.Frame.IsShowYText[1]=o.IsShowRightText,l.Frame.YSplitOperator.IsShowRightText=o.IsShowRightText),o.OverlayIndexType&&(ze.IsNumber(o.OverlayIndexType.Position)&&(l.Frame.OverlayIndexType.Position=o.OverlayIndexType.Position),ze.IsNumber(o.OverlayIndexType.LineSpace)&&(l.Frame.OverlayIndexType.LineSpace=o.OverlayIndexType.LineSpace));var g=this.ChartPaint[0].Data;this.BindIndexData(n,g)}}}},this.ChangeIndexTemplate=function(t){var e=this;if(t.Windows){var a=t.Windows.length;if(!(a<=0)){var i=this.Frame.SubFrame.length,r=null,n=null;t.KLine&&(ze.IsNumber(t.KLine.Period)&&t.KLine.Period!=this.Period&&(r=t.KLine.Period),ze.IsNumber(t.KLine.Right)&&t.KLine.Right!=this.Right&&(n=t.KLine.Right));for(var s=null!=r||null!=n,o=0;o<i;++o){this.DeleteIndexPaint(o);var h=this.Frame.SubFrame[o];h.YSpecificMaxMin=null,h.IsLocked=!1,h.YSplitScale=null}if(i>a){var l=this.GetEventCallback(C.ON_DELETE_FRAME);for(o=i-1;o>=a;--o)if(this.Frame.SubFrame[o].Frame.ClearToolbar(),l&&l.Callback){var u={SubFrame:this.Frame.SubFrame[o],WindowIndex:o};l.Callback(l,u,this)}this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a)}else for(o=i;o<a;++o){var c=this.CreateSubFrameItem(o);this.Frame.SubFrame[o]=c;var f=new Aa;f.Frame=this.Frame.SubFrame[o].Frame,f.Canvas=this.Canvas,f.LanguageID=this.LanguageID,f.GetEventCallback=function(t){return e.GetEventCallback(t)},f.SelectedChart=this.SelectedChart,this.TitlePaint[o+1]=f}var m=new d;for(o=0;o<a;++o){var D=o,p=t.Windows[o],v=null;t.Frame&&t.Frame.length>o&&(v=t.Frame[o]);var g=D+1;if(this.TitlePaint[g].Data=[],this.TitlePaint[g].Title=null,p.Script)this.WindowIndex[o]=new fn(p.Name,p.Script,p.Args,p);else if(p.API){var S=p.API;this.WindowIndex[D]=new mn(S.Name,S.Script,S.Args,p)}else{var I=p.Index,T=bi.Get(I);if(T)this.WindowIndex[o]=T.Create(),this.CreateWindowIndex(D);else{var x=m.Get(I);if(x){var y=x.Args;t.Windows[o].Args&&(y=t.Windows[o].Args);var A={Name:x.Name,Script:x.Script,Args:y,ID:I,KLineType:x.KLineType,YSpecificMaxMin:x.YSpecificMaxMin,YSplitScale:x.YSplitScale,FloatPrecision:x.FloatPrecision,Condition:x.Condition,OutName:x.OutName};p.TitleFont&&(A.TitleFont=p.TitleFont),this.WindowIndex[o]=new fn(A.Name,A.Script,A.Args,A)}}}this.SetSubFrameAttribute(this.Frame.SubFrame[o],p,v)}for(o=0;o<this.Frame.SubFrame.length;++o){p=this.Frame.SubFrame[o].Frame;o==this.Frame.SubFrame.length-1?p.XSplitOperator.ShowText=!0:p.XSplitOperator.ShowText=!1}if(s)this.Frame.SetSizeChage(!0),null!=r?this.ChangePeriod(r,t):null!=n&&this.ChangeRight(n);else{var b=this.ChartPaint[0].Data;for(o=0;o<a;++o)this.BindIndexData(o,b);this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}}},this.RemoveIndexWindow=function(t,e){if(l.Chart.Log("[KLineChartContainer::RemoveIndexWindow] remove id",t),0!=t){if(this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();var a=this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar();var i=this.GetEventCallback(C.ON_DELETE_FRAME);if(i&&i.Callback){var r={SubFrame:this.Frame.SubFrame[t],WindowIndex:t};i.Callback(i,r,this)}this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var n=0;n<this.Frame.SubFrame.length;++n){var s=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?s.XSplitOperator.ShowText=!0:s.XSplitOperator.ShowText=!1,s.Identify=n}if(this.ChartDrawPicture.length>0){var o=[];for(var n in this.ChartDrawPicture){s=this.ChartDrawPicture[n];s.Frame!=a&&o.push(s)}this.ChartDrawPicture=o}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}}else e&&e.DeleteMainIndex&&(this.DeleteIndexPaint(t),this.WindowIndex[t]=null,this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw())},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};if(a.ID&&(i.ID=a.ID),a.Arguments)for(var e in i.Args=[],a.Arguments){var r=a.Arguments[e];i.Args.push({Name:r.Name,Value:r.Value})}t.push(i)}return t},this.CreateExtendChart=function(t,e){var a;switch(t){case"筹码分布":return a=new Pe,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"画图工具":return a=new Oe,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"KLineTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Me,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"深度图":return a=new _e,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"K线Y轴背景图":return a=new ke,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"背景图":return a=new Ge,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"FrameSplitPaint":return a=new Re,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return a=we.Create(t),a?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.OnTouchFinished=function(){if(this.DragMode==D.CLICK_TOUCH_MODE_ID){if(1==this.TouchStatus.CorssCursorShow&&this.TouchDrawCount>0)return;return this.TouchStatus.CorssCursorShow=!1,void this.DrawDynamicInfo()}if(!0===this.EnableClickModel){if(1==this.ClickModel.IsShowCorssCursor&&this.TouchDrawCount>0)return;return this.ClickModel.IsShowCorssCursor=!1,void this.DrawDynamicInfo()}if(!0!==this.CorssCursorTouchEnd)for(var t in this.ExtendChartPaint){var e=this.ExtendChartPaint[t];"KLineTooltipPaint"===e.ClassName&&this.DrawDynamicInfo()}else this.TouchDrawCount>0&&this.DrawDynamicInfo()},this.LockIndex=function(t){if(t&&t.IndexName)for(var e in this.WindowIndex){var a=this.WindowIndex[e];if(a||conintue,a.Name==t.IndexName){a.SetLock(t),this.Update();break}}},this.TryClickLock=function(t,e){for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];if(i.Frame.IsLocked&&i.Frame.LockPaint){var r=new mt;if(i.Frame.LockPaint.GetTooltipData(t,e,r))return r.HQChart=this,r.Data.Callback&&r.Data.Callback(r),!0}}return!1},this.TryClickIndexTitle=function(t,e){for(var a in this.TitlePaint){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};l.Chart.Log("[KLineChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(C.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1},this.SetSizeChange=function(t){for(var e in this.Frame.SetSizeChage(t),this.ExtendChartPaint){var a=this.ExtendChartPaint[e];a.SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.Update=function(t){if(this.SourceData){this.BeforeBindMainData&&this.BeforeBindMainData("Update");var e,a=new ut;if(a.Data=this.SourceData.Data,a.Period=this.Period,a.Right=this.Right,a.DataType=this.SourceData.DataType,a.Symbol=this.Symbol,a.Right>0&&ut.IsDayPeriod(a.Period,!0)){var i=a.GetRightData(a.Right,{AlgorithmType:this.RightFormula});a.Data=i}else if(a.Right>0&&ut.IsMinutePeriod(a.Period,!0)&&this.RightFormula>=1){i=a.GetRightData(a.Right,{AlgorithmType:this.RightFormula});a.Data=i}if(ut.IsDayPeriod(a.Period,!1)||ut.IsMinutePeriod(a.Period,!1)){var r=a.GetPeriodData(a.Period);a.Data=r}this.BindMainData(a,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("Update");for(var n=0;n<this.Frame.SubFrame.length;++n)0==n&&(e=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,a);for(var n in e&&e.YSplitOperator&&(e.YSplitOperator.Symbol=this.Symbol,e.YSplitOperator.Data=this.ChartPaint[0].Data,e.YSplitOperator.Period=this.Period),this.OverlayChartPaint){var s=this.OverlayChartPaint[n];if(s.SourceData)if(ut.IsMinutePeriod(this.Period,!0)){a=new ut;a.Data=s.SourceData.Data,a.Period=this.Period,a.Right=this.Right;var o=this.SourceData.GetOverlayMinuteData(a.Data,this.IsApiPeriod);if(a.Data=o,ut.IsMinutePeriod(a.Period,!1)&&!this.IsApiPeriod){r=a.GetPeriodData(a.Period);a.Data=r}s.Data=a}else{a=new ut;if(a.Data=s.SourceData.Data,a.Period=this.Period,a.Right=this.Right,a.Right>0&&Mr.IsSHSZStockA(s.Symbol)){i=a.GetRightData(a.Right,{AlgorithmType:this.RightFormula});a.Data=i}o=this.SourceData.GetOverlayData(a.Data,this.IsApiPeriod);if(a.Data=o,ut.IsDayPeriod(a.Period,!1)&&!this.IsApiPeriod){r=a.GetPeriodData(a.Period);a.Data=r}s.Data=a}}this.ReqeustKLineInfoData({FunctionName:"Update"}),this.CreateChartDrawPictureByStorage(),this.UpdataDataoffset(),t&&t.UpdateCursorIndexType>0?this.UpdatePointByCursorIndex(t.UpdateCursorIndexType):this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(n=0;n<this.Frame.SubFrame.length;++n){s=this.Frame.SubFrame[n];for(var h in s.OverlayIndex){var l=s.OverlayIndex[h];this.BindOverlayIndexData(l,n,a)}}}},this.ChangeSymbol=function(t,e){if(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeSymbol"),this.ClearRectSelect(!0),this.ClearCustomKLine(),this.ClearKLineCaluate(),this.HideTooltip(),this.ResetScrollBar(),this.Symbol=t,t){if(e&&e.KLine){var a=e.KLine;ze.IsNumber(a.Right)&&(this.Right=a.Right),ze.IsNumber(a.Period)&&(this.Period=a.Period)}if(Mr.IsSHSZIndex(t)&&(this.Right=0),this.ClearIndexPaint(),e&&e.Windows&&Array.isArray(e.Windows)&&e.Windows.length>0){var i=e.Windows,r=new d;for(var n in i){if(n>=this.WindowIndex.length)break;a=i[n];if(a)if(a.Script)this.WindowIndex[n]=new fn(a.Name,a.Script,a.Args,a);else if(a.API){var s=a.API;this.WindowIndex[n]=new mn(s.Name,s.Script,s.Args,a)}else{var o=a.Index,h=r.Get(o);if(h){h.Args;a.Args&&(h.Args=a.Args),h.ID=o,this.WindowIndex[n]=new fn(h.Name,h.Script,h.Args,h)}}}}this.ReloadChartDrawPicture(),this.Frame.ClearUpDonwFrameYData(),ut.IsDayPeriod(this.Period,!0)?this.RequestHistoryData():ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period)?this.ReqeustHistoryMinuteData():ut.IsTickPeriod(this.Period)&&this.RequestTickData()}else this.DrawEmpty()},this.ReqeustKLineInfoData=function(t){if(t&&"RecvDragDayData"==t.FunctionName)t.Update=!0;else{if(this.ChartPaint.length>0){var e=this.ChartPaint[0];e.InfoData=new Map}t.Update=!1}if(ze.IsNonEmptyArray(this.ChartInfo))for(var a=0;a<this.ChartInfo.length;++a)this.ChartInfo[a].RequestData(this,t)},this.SetKLineInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=ir.Get(t[a]);if(i){var r=i.Create();r.MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r)}}1==e&&this.ReqeustKLineInfoData({FunctionName:"SetKLineInfo"})},this.AddKLineInfo=function(t,e){var a=ir.GetClassInfo(t);if(a){for(var i in this.ChartInfo){var r=this.ChartInfo[i];if(r.ClassName==a.ClassName)return}var n=ir.Get(t);if(n){r=n.Create();r.MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r),1==e&&r.RequestData(this)}}else console.warn("[KLineChartContainer::AddKLineInfo] can't find infoname=",t)},this.DeleteKLineInfo=function(t){var e=ir.GetClassInfo(t);if(e)for(var a in this.ChartInfo){var i=this.ChartInfo[a];if(i.ClassName==e.ClassName){this.ChartInfo.splice(a,1),this.UpdataChartInfo(),this.Draw();break}}else console.warn("[KLineChartContainer::DeleteKLineInfo] can't find infoname=",t)},this.ClearKLineInfo=function(){if(this.ChartInfo&&!(this.ChartInfo.length<=0)){this.ChartInfo=[];var t=this.ChartPaint[0];t.InfoData=null,this.Draw()}},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];if(i.Symbol===t)return console.warn("[KLineChartContainer::OverlaySymbol] overlay symbol=".concat(t," exist.")),!1}var r=new yt;return r.Canvas=this.Canvas,r.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,r.ChartFrame=this.Frame.SubFrame[0].Frame,r.Name="Overlay-KLine",r.DrawType=this.KLineDrawType,r.Symbol=t,r.Identify="Overlay-KLine-".concat(t),e&&e.Color?r.Color=e.Color:r.Color=xi.OverlaySymbol.Color[xi.OverlaySymbol.Random%xi.OverlaySymbol.Color.length],r.SetOption(e),++xi.OverlaySymbol.Random,this.ChartPaint[0]&&this.ChartPaint[0].Data&&this.SourceData&&(r.MainData=this.ChartPaint[0].Data),this.OverlayChartPaint.push(r),ut.IsDayPeriod(this.Period,!0)?this.RequestOverlayHistoryData():ut.IsMinutePeriod(this.Period,!0)&&this.RequestOverlayHistoryMinuteData(),!0},this.RequestOverlayHistoryData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date,r=function(){var r=t.OverlayChartPaint[n];if(!r.MainData)return"continue";if(r.Status!=xt.STATUS_NONE_ID)return"continue";var o=r.Symbol;return o?(r.Status=xt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"KLineChartContainer::RequestOverlayHistoryData",Explain:"叠加股票日K线数据",Request:{Url:e.KLineApiUrl,Data:{symbol:o,count:a.MaxRequestDataCount,first:{date:i},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,(function(t){r.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,r)})),1==s.PreventDefault)?"continue":void $n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high"],symbol:o,start:-1,count:a.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){r.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,r)}})):"continue"},n=0;n<this.OverlayChartPaint.length;++n){var s;r()}},this.RecvOverlayHistoryData=function(t,e){if(!e.IsDelete){var a=Ni.JsonDataToHistoryData(t),i=new ut;i.Data=a,i.DataType=0;var r=new ut;if(r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=0,r.Right>0&&Mr.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}var s=this.SourceData.GetOverlayData(r.Data,this.IsApiPeriod);if(r.Data=s,ut.IsDayPeriod(r.Period,!1)&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=xt.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date,r=this.SourceData.Data[0].Time,n=function(){var n=t.OverlayChartPaint[s];if(!n.MainData)return"continue";if(n.Status!=xt.STATUS_NONE_ID)return"continue";var h=n.Symbol;return h?(n.Status=xt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"KLineChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票分钟K线数据",Request:{Url:e.MinuteKLineApiUrl,Data:{symbol:h,count:a.MaxRequestMinuteDayCount,first:{date:i,time:r},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,(function(t){n.Status=xt.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,n)})),1==o.PreventDefault)?"continue":void $n.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","vol","amount"],symbol:h,start:-1,count:a.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){n.Status=xt.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,n)}})):"continue"},s=0;s<this.OverlayChartPaint.length;++s){var o;n()}},this.RecvOveralyHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)l.Chart.Warn("[MinuteChartContainer::RecvOveralyHistoryMinuteData] recv data symbol not match. paint[".concat(e.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var a=Ni.JsonDataToMinuteHistoryData(t);if(a){var i=new ut;i.Data=a,i.DataType=1;var r=new ut;r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=1;var n=this.SourceData.GetOverlayMinuteData(r.Data,this.IsApiPeriod);if(r.Data=n,ut.IsMinutePeriod(r.Period,!1)&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=xt.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){var e=this.OverlayChartPaint[t];e.Status=xt.STATUS_NONE_ID}},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){var e=this.OverlayChartPaint[t];e.IsDelete=!0}this.OverlayChartPaint=[],this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0,this.UpdateFrameMaxMin(),this.Draw()},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.OverlayChartPaint.length<=0&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[KLineChartContainer::DeleteOverlaySymbol] overlay symbol=".concat(t," not exist.")),!1},this.RequestFlowCapitalData=function(){if(this.Symbol&&1!=this.FlowCapitalReady){var t=this.Symbol.toUpperCase(),e=!0;if((Mr.IsBIT(t)||Mr.IsFutures(t))&&(e=!1),this.EnableFlowCapital&&Mr.IsBIT(t)&&1==this.EnableFlowCapital.BIT&&(e=!0),!e)return l.Chart.Log("[KLineChartContainer::RequestFlowCapitalData] symbol=".concat(this.Symbol," not need download data.")),void(this.FlowCapitalReady=!0);var a=this,i=["name","date","symbol","capital.a"];if(this.NetworkFilter){var r={Name:"KLineChartContainer::RequestFlowCapitalData",Explain:"流通股本数据",Request:{Url:a.StockHistoryDayApiUrl,Data:{symbol:[this.Symbol],orderfield:"date",field:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,(function(t){a.RecvFlowCapitalData(t)})),1==r.PreventDefault)return}$n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:i,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(t){a.RecvFlowCapitalData(t)}})}},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];if(this.EnableVerifyRecvData&&e.symbol!=this.Symbol)l.Chart.Warn("[MinuteChartContainer::RecvFlowCapitalData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(e.symbol,"]"));else{var a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new st;n.Date=r.date;var s=r.capital;s&&(s.a>0&&(n.Value=s.a,a.push(n)))}if(this.IsApiPeriod){var o=this.ChartPaint[0].Data,h=null;if(ut.IsMinutePeriod(this.Period,!0)?h=o.GetMinuteFittingFinanceData(a):ut.IsDayPeriod(this.Period,!0)&&(h=o.GetFittingFinanceData(a)),h&&o.Data&&h.length==o.Data.length)for(var u in o.Data){r=o.Data[u];h[u]&&ze.IsNumber(h[u].Value)&&(r.FlowCapital=h[u].Value)}}else if(ut.IsMinutePeriod(this.Period,!0)){for(h=this.SourceData.GetMinuteFittingFinanceData(a),u=0;u<this.SourceData.Data.length;++u){r=this.SourceData.Data[u];h[u]&&ze.IsNumber(h[u].Value)&&(r.FlowCapital=h[u].Value)}var c=this.ChartPaint[0].Data,d=new ut;if(d.Data=this.SourceData.Data,c.Right>0&&this.RightFormula>=1){var f=d.GetRightData(c.Right,{AlgorithmType:this.RightFormula});d.Data=f}if(ut.IsMinutePeriod(c.Period,!1)){var C=d.GetPeriodData(c.Period);d.Data=C}c.Data=d.Data}else{h=this.SourceData.GetFittingFinanceData(a);for(var m in this.SourceData.Data){r=this.SourceData.Data[m];h[m]&&ze.IsNumber(h[m].Value)&&(r.FlowCapital=h[m].Value)}c=this.ChartPaint[0].Data,d=new ut;if(d.Data=this.SourceData.Data,c.Right>0){f=d.GetRightData(c.Right,{AlgorithmType:this.RightFormula});d.Data=f}if(ut.IsDayPeriod(c.Period,!1)){C=d.GetPeriodData(c.Period);d.Data=C}c.Data=d.Data}this.FlowCapitalReady=!0;var D=!1;for(var u in this.ExtendChartPaint){r=this.ExtendChartPaint[u];if("StockChip"==r.ClassName){D=!0;break}}D&&this.Draw()}}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=ba.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"!=i.ClassName&&"ChartDrawVolProfile"!=i.ClassName||(i.HQChart=this)),!i&&ba.MapIonFont.has(t)){var n=ba.MapIonFont.get(t);i=new Ua,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var s=this;return i.Update=function(){s.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return s.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=ba.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),this.DrawDynamicInfo(),i},this.PasteChartDrawPicture=function(t,e,a){if(!t||!t.ClassName)return null;if(e<0||e>=this.Frame.SubFrame.length)return null;var i=ba.GetDrawPictureByClassName(t.ClassName);if(!i)return null;var r=i.Create();if(!r)return null;var n=this;return r.Canvas=this.Canvas,r.Status=10,r.Frame=this.Frame.SubFrame[e].Frame,r.Symbol=this.Symbol,r.Period=this.Period,r.Right=this.Right,r.Option=this.ChartDrawOption,r.GetActiveDrawPicture=function(){return n.GetActiveDrawPicture()},r.SetOption&&r.SetOption(t),this.RandomDrawPictureValue(r,t),r.PointToValue(),"ChartDrawPictureText"===r.ClassName&&(r.IsInitialized=!0),this.ChartDrawPicture.push(r),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(r),this.DrawDynamicInfo(),r},this.RandomDrawPictureValue=function(t,e){if(ze.IsNonEmptyArray(e.Value)){var a=this.GetKLineChart();if(!a||!a.Data||!ze.IsNumber(a.Data.DataOffset)||a.Data.DataOffset<0)return null;if(!ze.IsNonEmptyArray(a.Data.Data))return null;var i=a.Data.Data,r=(a.Data.DataOffset,a.Data.DataOffset+a.ChartFrame.XPointCount-1);r>=i.length&&(r=i.length-1);var n=t.Frame.ChartBorder.GetHeight(),s=(t.Frame.HorizontalMax,t.Frame.HorizontalMin,t.Frame.ChartBorder.GetBottomEx()-n*e.YFristScale),o={Max:5,Min:2},h=Math.floor(Math.random()*(o.Max-o.Min+1))+o.Min,l=e.Value[0].XIndex+h;t.Value=[];for(var u=0;u<e.Value.length;++u){var c=e.Value[u];t.Value[u]={XValue:l+c.XOffset},t.Point[u]={Y:s+c.YOffset,X:t.Frame.GetXFromIndex(l+c.XOffset,!1)}}}},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=I();a&&(n=1);var s=t*n,o=e*n;return r.Move(s,o,i),!0},this.UpdateChartDrawXValue=function(){for(var t in this.ChartDrawPicture){var e=this.ChartDrawPicture[t];e.UpdateXValue()}},this.OnRightMenu=function(t,e,a){var i=I();if(this.RightMenu){var r=this.Frame.PtInFrame(t*i,e*i);a.data={Chart:this,FrameID:r},this.RightMenu.DoModal(a)}var n=this.GetEventCallback(C.ON_CONTEXT_MENU);if(n){r=this.Frame.PtInFrame(t*i,e*i);var s={X:t,Y:e,Event:a,FrameID:r};n.Callback(n,s,this)}},this.ReloadChartDrawPicture=function(){if(this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage){this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:this.Period});var t=this.GetEventCallback(C.ON_LOAD_DRAWPICTURE);if(t&&t.Callback){var e={Symbol:this.Symbol,Period:this.Period,DrawStorage:this.ChartDrawStorage,ChartDrawStorageCache:this.ChartDrawStorageCache};t.Callback(t,e,this)}}},this.CreateChartDrawPictureByStorage=function(){if(ze.IsNonEmptyArray(this.ChartDrawStorageCache)){for(var t=0;t<this.ChartDrawStorageCache.length;++t){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=ba.CreateChartDrawPicture(e);if(a){a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.Option=this.ChartDrawOption,a.ImportStorageData&&a.ImportStorageData(e),a.UpdateXValue(),a.ValueToPoint();var i=this;a.GetActiveDrawPicture=function(){return i.GetActiveDrawPicture()},"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a)}}}this.ChartDrawStorageCache=null}},this.RequestKLineMatch=function(t,e){var a=this,i=e.Scope,r=e.WaitDialog;l.Chart.Log("[KLineChartContainer::RequestKLineMatch",t,i);for(var n=new Array,s=new Array,o=t.Start;o<t.End&&o<t.Data.Data.length;++o){var h=t.Data.Data[o];n.push(h.Date),s.push(h.Close)}var u={Stock:t.Stock,Index:{Start:t.Start,End:t.End},Date:{Start:n[0],End:n[n.length-1]},Minsimilar:i.Minsimilar,Plate:i.Plate,DayRegion:300};$.ajax({url:this.KLineMatchUrl,data:{userid:"guest",plate:i.Plate,period:this.Period,right:this.Right,dayregion:u.DayRegion,minsimilar:i.Minsimilar,sampledate:n,samplevalue:s},type:"post",dataType:"json",async:!0,success:function(t){r&&r.Close(),a.RecvKLineMatchData(t,u)},error:function(t,e,a){console.warn("[KLineChartContainer::RequestKLineMatch] failed",t,e,a),r&&r.Close()}})},this.RecvKLineMatchData=function(t,e){l.Chart.Log("[KLineChartContainer::RecvKLineMatchData] recv",t,e);var a=[];for(var i in t.match){var r=t.match[i];if(r.symbol!=e.Stock.Symbol)for(var n in r.data){var s=r.data[n],o={Symbol:r.symbol,Name:r.name,Similar:s.similar,Start:s.start,End:s.end};a.push(o)}}if(a.sort((function(t,e){return e.Similar-t.Similar})),l.Chart.Log("[KLineChartContainer::RecvKLineMatchData] filterData",a),this.mapEvent.has(C.RECV_KLINE_MATCH)){r=this.mapEvent.get(C.RECV_KLINE_MATCH),t={Sample:e,Match:a,Source:t};r.Callback(r,t,this)}else{var h=new Ir(this.Frame.ChartBorder.UIElement.parentNode),u={data:{Chart:this,MatchData:a,Sample:e,Source:t}};h.DoModal(u)}},this.UpdataChartInfo=function(){var t=null;if(0==this.Period)for(var e in t=new Map,this.ChartInfo){var a=this.ChartInfo[e].Data;for(var i in a){var r=a[i];t.has(r.Date.toString())?t.get(r.Date.toString()).Data.push(r):t.set(r.Date.toString(),{Data:new Array(r)})}}else if(ut.IsDayPeriod(this.Period,!1)){t=new Map;var n=this.ChartPaint[0].Data;if(n&&n.Data&&n.Data.length>0){var s=n.Data[0],o=[];for(var e in this.ChartInfo){var h=this.ChartInfo[e];for(var i in h.Data){r=h.Data[i];r.Date>=s.Date&&o.push(r)}}o.sort((function(t,e){return t.Date-e.Date}));for(e=0;e<n.Data.length;){var l=n.Data[e];if(o.length<=0)break;h=o[0];l.Date<h.Date?++e:(t.has(l.Date.toString())?t.get(l.Date.toString()).Data.push(h):t.set(l.Date.toString(),{Data:new Array(h)}),o.shift())}}}else if(ut.IsMinutePeriod(this.Period,!0)){t=new Map;n=this.ChartPaint[0].Data;if(n&&n.Data&&n.Data.length>0){var u=n.Data[0];for(o=[],e=0,i=0;e<this.ChartInfo.length;++e){h=this.ChartInfo[e];for(i=0;i<h.Data.length;++i){r=h.Data[i];(r.Date>=u.Date||r.Date==u.Date&&r.Time>=u.Time)&&o.push(r)}}o.sort((function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}));for(e=0;e<n.Data.length;){l=n.Data[e];if(o.length<=0)break;h=o[0];if(l.Date<h.Date||l.Date==h.Date&&l.Time<h.Time)++e;else{var c="".concat(l.Date,"-").concat(l.Time);t.has(c)?t.get(c).Data.push(h):t.set(c,{Data:new Array(h)}),o.shift()}}}}var d=this.ChartPaint[0];d.InfoData=t},this.RecvWindowIndex=function(t,e){var a=this.WindowIndex[t];if(a&&"function"==typeof a.RecvSubscribeData){var i=this.ChartPaint[0].Data;a.RecvSubscribeData(e,this,t,i)}},this.UpdateWindowIndex=function(t){var e=new ut;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,this.IsApiPeriod);else{if(e.Right>0){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(ut.IsDayPeriod(e.Period,!1)||ut.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}}if("function"==typeof this.WindowIndex[t].ExecuteScript){var r=this.ChartPaint[0].Data;this.WindowIndex[t].ExecuteScript(this,t,r)}else if("function"==typeof this.WindowIndex[t].RequestData){r=this.ChartPaint[0].Data;this.WindowIndex[t].RequestData(this,t,r,null)}else this.WindowIndex[t].BindData(this,t,e);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(ze.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.RecvOverlayIndex=function(t,e){var a=this.GetOverlayIndexByIdentify(t);if(null!=a){if(a.Script&&"function"==typeof a.RecvSubscribeData&&this.ChartPaint[0]){var i=this.ChartPaint[0].Data;i&&a.Script.RecvSubscribeData(e,this,a.WindowIndex,i)}}else console.warn("[KLineChartContainer::RecvOverlayIndex] can't find overlay index. [identify=".concat(t,"]"))},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null!=e){if(this.ChartPaint[0]){var a=this.ChartPaint[0].Data;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}}else console.warn("[KLineChartContainer::UpdateOverlayIndex] can't find overlay index. [identify=".concat(t,"]"))},this.ChangeWindowIndexParam=function(t){this.WindowIndex[t].Index[0].Param+=1,this.WindowIndex[t].Index[1].Param+=1,this.UpdateWindowIndex(t)},this.OnDoubleClick=function(t,e,a){if(this.EnableYDrag&&(this.EnableYDrag.Left||this.EnableYDrag.Right)&&this.Frame&&this.Frame.PtInFrameY){var i=I(),r=(t=(a.clientX-this.UIElement.getBoundingClientRect().left)*i,e=(a.clientY-this.UIElement.getBoundingClientRect().top)*i,this.Frame.PtInFrameY(t,e));r&&r.Index>=0&&0==r.IsOverlay&&this.CancelZoomUpDownFrameY(r)}var n;this.SelectedChart.EnableSelected&&(n=this.PtInChart(t,e));var s={SelectedChart:n};if(this.DBClickEvent(s,a),!n&&this.EnableZoomIndexWindow){var o=this.Frame.PtInFrame(t,e);if(l.Chart.Log("[KLineChartContainer::OnDoubleClick] frameId",o),o>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(o,{X:t,Y:e}))return this.Frame.SetSizeChage(!0),this.Draw(),!0}var h=null;if(this.mapEvent.has(C.DBCLICK_KLINE)&&(h=this.mapEvent.get(C.DBCLICK_KLINE)),this.MinuteDialog||h){var u=new mt;if(this.PtInChartPaintTooltip(t,e,u)&&u.Data){if(h){null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var c={Tooltip:u,Stock:{Symbol:this.Symbol,Name:this.Name},X:a.clientX,Y:a.clientY};h.Callback(h,c,this)}this.MinuteDialog&&(a.data={Chart:this,Tooltip:u},this.MinuteDialog.DoModal(a))}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=Mr.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout((function(){e.AutoUpdate()}),i):2==a&&(this.AutoUpdateTimer=setTimeout((function(){ut.IsDayPeriod(e.Period,!0)?e.RequestRealtimeData():ut.IsMinutePeriod(e.Period,!0)||ut.IsSecondPeriod(e.Period)?e.RequestMinuteRealtimeData():ut.IsTickPeriod(e.Period)&&e.RequestTickRealtimeData()}),i))}else this.AutoUpdateTimer=setTimeout((function(){e.AutoUpdate()}),2e4)}},this.GetMaxMinPageSize=function(){var t={},e=this.Frame.ChartBorder.GetWidth(),a=gt[gt.length-1][0]+gt[gt.length-1][1];return t.Max=parseInt(e/a)-2,a=gt[0][0]+gt[0][1],t.Min=parseInt(e/a)-2,l.Chart.Log("[KLineChartContainer::GetMaxMinPageSize] Max=".concat(t.Max," Min=").concat(t.Min)),t},this.GetChartStatus=function(){var t=this.Frame.SubFrame[0].Frame;if(!t)return null;var e=t.Data;if(!e)return null;var a={KLine:{},Zoom:{}};return a.KLine.Count=e.Data.length,a.KLine.Offset=e.DataOffset,a.KLine.PageSize=t.XPointCount,a.Zoom.Index=t.ZoomIndex,a.Zoom.Max=gt.length,a},this.DragDownloadData=function(){var t=null;if(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,!t)return!1;if(!(t.DataOffset>0))if(ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period)){if(l.Chart.Log("[KLineChartContainer.DragDownloadData] Minute:[Enable=".concat(this.DragDownload.Minute.Enable,", IsEnd=").concat(this.DragDownload.Minute.IsEnd,", Status=").concat(this.DragDownload.Minute.Status,", Period=").concat(this.Period,"]")),!this.DragDownload.Minute.Enable)return;if(this.DragDownload.Minute.IsEnd)return;if(0!=this.DragDownload.Minute.Status)return;this.RequestDragMinuteData()}else if(ut.IsDayPeriod(this.Period,!0)){if(l.Chart.Log("[KLineChartContainer.DragDownloadData] Day:[Enable=".concat(this.DragDownload.Minute.Enable,", IsEnd=").concat(this.DragDownload.Minute.IsEnd,", Status=").concat(this.DragDownload.Minute.Status,"]")),!this.DragDownload.Day.Enable)return;if(this.DragDownload.Day.IsEnd)return;if(0!=this.DragDownload.Day.Status)return;this.RequestDragDayData()}else if(ut.IsTickPeriod(this.Period)){if(l.Chart.Log("[KLineChartContainer.DragDownloadData] Tick:[Enable=".concat(this.DragDownload.Tick.Enable,", IsEnd=").concat(this.DragDownload.Tick.IsEnd,", Status=").concat(this.DragDownload.Tick.Status,"]")),!this.DragDownload.Tick.Enable)return;if(this.DragDownload.Tick.IsEnd)return;if(0!=this.DragDownload.Tick.Status)return;this.RequestDragTickData()}},this.ZoomDownloadData=function(t){var e=null;if(e=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data,!e)return!1;if(!(e.DataOffset>0))if(ut.IsMinutePeriod(this.Period,!0)||ut.IsSecondPeriod(this.Period)){if(l.Chart.Log("[KLineChartContainer.ZoomDownloadData] Minute:[Enable=".concat(this.ZoomDownload.Minute.Enable,", IsEnd=").concat(this.ZoomDownload.Minute.IsEnd,", Status=").concat(this.DragDownload.Minute.Status,", Period=").concat(this.Period,"]")),!this.ZoomDownload.Minute.Enable)return;if(this.ZoomDownload.Minute.IsEnd)return;if(0!=this.ZoomDownload.Minute.Status)return;this.RequestZoomMinuteData(t)}else if(ut.IsDayPeriod(this.Period,!0)){if(l.Chart.Log("[KLineChartContainer.ZoomDownloadData] Day:[Enable=".concat(this.ZoomDownload.Minute.Enable,", IsEnd=").concat(this.ZoomDownload.Minute.IsEnd,", Status=").concat(this.DragDownload.Minute.Status,"]")),!this.ZoomDownload.Day.Enable)return;if(this.ZoomDownload.Day.IsEnd)return;if(0!=this.ZoomDownload.Day.Status)return;this.RequestZoomDayData(t)}else if(ut.IsTickPeriod(this.Period)){if(l.Chart.Log("[KLineChartContainer.ZoomDownloadData] Tick:[Enable=".concat(this.ZoomDownload.Tick.Enable,", IsEnd=").concat(this.ZoomDownload.Tick.IsEnd,", Status=").concat(this.DragDownload.Tick.Status,"]")),!this.ZoomDownload.Tick.Enable)return;if(this.ZoomDownload.Tick.IsEnd)return;if(0!=this.ZoomDownload.Tick.Status)return;this.RequestZoomTickData(t)}},this.RequestDragTickData=function(){l.Chart.Log("[KLineChartContainer.RequestDragTickData] not finished.")},this.RequestPreviousMinuteData=function(t){var e=t.FuncName,a=t.FuncExplain,i=t.Download,r=t.Url,n=t.Count,s=this;this.AutoUpdateEvent(!1,e),this.CancelAutoUpdate(),i.Status=1;var o=this.SourceData.Data[0],h={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:s.Symbol,enddate:o.Date,endtime:o.Time,count:n,first:{date:o.Date,time:o.Time}};if(ze.IsNonEmptyArray(this.OverlayChartPaint)){h.overlay=[];for(var l=0;l<this.OverlayChartPaint.length;++l){var u=this.OverlayChartPaint[l];h.overlay.push({symbol:u.Symbol})}}if(this.NetworkFilter){var c={Name:e,Explain:a,Request:{Url:r,Type:"POST",Data:h,Period:this.Period,Right:this.Right},DragDownload:i,Option:t,Self:this,PreventDefault:!1,ZoomData:t.ZoomData};if(this.NetworkFilter(c,(function(a){s.RecvPreviousMinuteData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()})),1==c.PreventDefault)return}$n.HttpRequest({url:r,data:h,type:"post",dataType:"json",async:!0,success:function(a){s.RecvPreviousMinuteData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}})},this.RecvPreviousMinuteData=function(t,e){var a=e.Download,i=Ni.JsonDataToMinuteHistoryData(t);if(!i||i.length<=0)return a.IsEnd=!0,void l.Chart.Log("[KLineChartContainer.RecvPreviousMinuteData] ".concat(this.Symbol," data end. FuncName=").concat(e.FuncName));for(var r=this.GetHistoryDataCount(),n=this.SourceData.Data[0],s=null,o=i.length-1;o>=0;--o){var h=i[o];if(n.Date>h.Date||n.Date==h.Date&&n.Time>h.Time){s=o;break}if(n.Date==h.Date&&n.Time==h.Time){n.YClose=h.YClose,s=o-1;break}}if(!(null==s&&s<0)){for(o=0;o<i.length&&o<=s;++o){h=i[o];this.SourceData.Data.splice(o,0,h)}var u=new ut;if(u.Data=this.SourceData.Data,u.Period=this.Period,u.Right=this.Right,u.DataType=this.SourceData.DataType,u.Symbol=this.Symbol,!this.IsApiPeriod&&(ut.IsDayPeriod(u.Period,!1)||ut.IsMinutePeriod(u.Period,!1))){var c=u.GetPeriodData(u.Period);u.Data=c}var d=this.GetKLineCalulate();if(d){var f=d.RecvHistoryData(u,{Symbol:this.Symbol,Function:e.RecvFuncName});u=f,this.FlowCapitalReady=!0}if(this.UpdateMainData(u,r),e&&e.ZoomData){var C=e.ZoomData,m=C.PageSize-C.RightSpaceCount;u.DataOffset=u.Data.length-m,u.DataOffset<0&&(u.DataOffset=0)}this.UpdateOverlayDragMinuteData(t),this.BindInstructionIndexData(u);for(o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,u);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.BindAllOverlayIndexData(u)}},this.RequestZoomMinuteData=function(){var t={PageSize:requestData.PageSize,DataCount:requestData.DataCount,RightSpaceCount:requestData.RightSpaceCount},e={FuncName:"KLineChartContainer::RequestZoomMinuteData",FuncExplain:"缩放分钟|秒K线数据下载",RecvFuncName:"RecvZoomMinuteData",Download:this.DragDownload.Minute,Url:this.ZoomMinuteKLineApiUrl,Count:this.MaxRequestMinuteDayCount,ZoomData:t};this.RequestPreviousMinuteData(e)},this.RequestDragMinuteData=function(){var t={FuncName:"KLineChartContainer::RequestDragMinuteData",FuncExplain:"拖拽分钟|秒K线数据下载",RecvFuncName:"RecvDragMinuteData",Download:this.DragDownload.Minute,Url:this.DragMinuteKLineApiUrl,Count:this.MaxRequestMinuteDayCount};this.RequestPreviousMinuteData(t)},this.UpdateOverlayDragMinuteData=function(t){if(ze.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(ze.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==xt.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var s=e[n];if(s.symbol==i.Symbol){r=s;break}}if(r){var o=Ni.JsonDataToMinuteHistoryData(r),h=i.SourceData,l=h.Data[0],u=null;for(n=o.length-1;n>=0;--n){var c=o[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date&&l.Time>c.Time){u=n;break}if(l.Date==c.Date&&l.Time==c.Time){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(n=0;n<o.length&&n<=u;++n){c=o[n];h.Data.splice(n,0,c)}var d=new ut;d.Data=h.Data,d.Period=this.Period,d.Right=this.Right,d.DataType=0;var f=this.SourceData.GetOverlayMinuteData(d.Data,this.IsApiPeriod);if(d.Data=f,ut.IsMinutePeriod(d.Period,!1)&&!this.IsApiPeriod){var C=d.GetPeriodData(d.Period);d.Data=C}i.Data=d}}}}}},this.RequestPreviousDayData=function(t){var e=t.FuncName,a=t.FuncExplain,i=t.Download,r=t.Url,n=t.Count,s=this;this.AutoUpdateEvent(!1,e),this.CancelAutoUpdate(),i.Status=1;var o=this.SourceData.Data[0],h={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:s.Symbol,enddate:o.Date,count:n,first:{date:o.Date}};if(ze.IsNonEmptyArray(this.OverlayChartPaint)){h.overlay=[];for(var l=0;l<this.OverlayChartPaint.length;++l){var u=this.OverlayChartPaint[l];h.overlay.push({symbol:u.Symbol})}}if(this.NetworkFilter){var c={Name:e,Explain:a,Request:{Url:r,Type:"POST",Data:h,Period:this.Period,Right:this.Right},DragDownload:i,Self:this,PreventDefault:!1,ZoomData:t.ZoomData};if(this.NetworkFilter(c,(function(a){s.RecvPreviousDayData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()})),1==c.PreventDefault)return}$n.HttpRequest({url:r,data:h,type:"post",dataType:"json",async:!0,success:function(a){s.RecvPreviousDayData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}})},this.RecvPreviousDayData=function(t,e){var a=e.Download,i=Ni.JsonDataToHistoryData(t);if(!i||i.length<=0)return a.IsEnd=!0,void l.Chart.Log("[KLineChartContainer.RecvPreviousDayData] ".concat(this.Symbol," data end. FuncName=").concat(e.FuncName));for(var r=this.GetHistoryDataCount(),n=this.SourceData.Data[0],s=null,o=i.length-1;o>=0;--o){var h=i[o];if(n.Date>h.Date){s=o;break}if(n.Date==h.Date){n.YClose=h.YClose,s=o-1;break}}if(!(null==s&&s<0)){for(o=0;o<i.length&&o<=s;++o){h=i[o];this.SourceData.Data.splice(o,0,h)}var u=new ut;if(u.Data=this.SourceData.Data,u.Period=this.Period,u.Right=this.Right,u.DataType=this.SourceData.DataType,u.Symbol=this.Symbol,!this.IsApiPeriod&&(ut.IsDayPeriod(u.Period,!1)||ut.IsMinutePeriod(u.Period,!1))){var c=u.GetPeriodData(u.Period);u.Data=c}var d=this.GetKLineCalulate();if(d){var f=d.RecvHistoryData(u,{Symbol:this.Symbol,Function:e.RecvFuncName});u=f,this.FlowCapitalReady=!0}if(this.UpdateMainData(u,r),e&&e.ZoomData){var C=e.ZoomData,m=C.PageSize-C.RightSpaceCount;u.DataOffset=u.Data.length-m,u.DataOffset<0&&(u.DataOffset=0)}this.UpdateOverlayDragDayData(t),this.BindInstructionIndexData(u);for(o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,u);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.ReqeustKLineInfoData({FunctionName:e.RecvFuncName,StartDate:n.Date}),this.BindAllOverlayIndexData(u)}},this.RequestZoomDayData=function(t){var e=this.MaxRequestDataCount;t.Count>e&&(e=t.Count);var a={PageSize:t.PageSize,DataCount:t.DataCount,RightSpaceCount:t.RightSpaceCount},i={FuncName:"KLineChartContainer::RequestZoomDayData",FuncExplain:"缩放日K数据下载",RecvFuncName:"RecvZoomDayData",Download:this.ZoomDownload.Day,Url:this.ZoomKLineApiUrl,Count:e,ZoomData:a};this.RequestPreviousDayData(i)},this.RequestDragDayData=function(){var t={FuncName:"KLineChartContainer::RequestDragDayData",FuncExplain:"拖拽日K数据下载",RecvFuncName:"RecvDragDayData",Download:this.DragDownload.Day,Url:this.DragKLineApiUrl,Count:this.MaxRequestDataCount};this.RequestPreviousDayData(t)},this.UpdateOverlayDragDayData=function(t){if(ze.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(ze.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==xt.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var s=e[n];if(s.symbol==i.Symbol){r=s;break}}if(r){var o=Ni.JsonDataToHistoryData(r),h=i.SourceData,l=h.Data[0],u=null;for(n=o.length-1;n>=0;--n){var c=o[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(n=0;n<o.length&&n<=u;++n){c=o[n];h.Data.splice(n,0,c)}var d=new ut;if(d.Data=h.Data,d.Period=this.Period,d.Right=this.Right,d.DataType=0,d.Right>0&&Mr.IsSHSZStockA(r.symbol)&&!this.IsApiPeriod){var f=d.GetRightData(d.Right,{AlgorithmType:this.RightFormula});d.Data=f}var C=this.SourceData.GetOverlayData(d.Data,this.IsApiPeriod);if(d.Data=C,ut.IsDayPeriod(d.Period,!1)&&!this.IsApiPeriod){var m=d.GetPeriodData(d.Period);d.Data=m}i.Data=d}}}}}},this.SetCustomVerical=function(t,e){if(this.Frame&&!(t>=this.Frame.SubFrame.length)){var a=this.Frame.SubFrame[t];a.Frame&&(a.Frame.CustomVerticalInfo=e)}},this.OnSize=function(){if(this.Frame&&this.Frame.OnSize){var t=this.Frame.OnSize();this.Frame.SetSizeChage(!0),t.Changed&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin()),this.Draw()}},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==p.CLOSE_OVERLAY_INDEX){var r=t.IndexID;r&&this.DeleteOverlayWindowsIndex(r)}else if(t.ID==p.MODIFY_OVERLAY_INDEX_PARAM){r=t.IndexID;var n=t.Frame;e.data={Chart:this,Identify:r,IsOverlay:!0},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==p.CLOSE_INDEX_WINDOW){n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==p.CHANGE_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==p.MODIFY_INDEX_PARAM){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==p.OVERLAY_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!0},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==p.MAX_MIN_WINDOW){r=t.IndexID,n=t.Frame;var s=t.FrameID;s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==p.TITLE_WINDOW){r=t.IndexID,n=t.Frame,s=t.FrameID;this.ShowIndexTitleOnly(s)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==p.EXPORT_DATA){i=this.ExportData({Type:"CSV"});if(!i)return;var o=Date.now(),h="hqchart_".concat(this.Symbol,"_").concat(o,".csv"),l=document.createElement("a"),u=new Blob([i],{type:"text/csv"});l.href=URL.createObjectURL(u),document.body.appendChild(l),l.setAttribute("download",h),l.click(),document.body.removeChild(l)}},this.ClickTitleButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_TITLE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==p.CHIP_DEFULT?(t.Chart.ShowType=0,this.Draw()):t.ID==p.CHIP_LONG?(t.Chart.ShowType=1,this.Draw()):t.ID==p.CHIP_RECENT&&(t.Chart.ShowType=2,this.Draw())},this.RequestVolumeProfileData=function(t){var e=this,a=t.Chart;if(this.NetworkFilter){var i={Name:"KLineChartContainer::RequestVolumeProfileData",Explain:"成交量分布图下载",Request:{Period:this.Period,Right:this.Right,Start:t.Start,End:t.End,Symbol:this.Symbol,ValueAreaVol:t.ValueAreaVol},Self:this,VolProfile:a,PreventDefault:!1};if(this.NetworkFilter(i,(function(t){e.RecvVolumeProfileData(t,a)})),1==i.PreventDefault)return}},this.RecvVolumeProfileData=function(t,e){e.OnRecvVolumeProfileData(t),this.Draw()},this.ExportMainData=function(t,e){var a=t.ExportKLineData(e);return a},this.UpdateScrollBar=function(){if(this.ScrollBar){var t=this.GetChartStatus();if(t){var e=this.ChartPaint[0].Data,a=t.KLine.Offset,i=a+t.KLine.PageSize-1,r={Start:a,End:i,Data:e,Draw:!0,RightSpaceCount:this.RightSpaceCount};if(this.Frame&&this.Frame.ChartBorder){var n=this.Frame.ChartBorder;r.Border={Left:n.Left,Right:n.Right}}this.ScrollBar.UpdateSlider(r)}}},this.ResetScrollBar=function(){this.ScrollBar&&this.ScrollBar.Reset({Draw:!0})}}function Pi(t,e,a){this.newMethod=S,this.newMethod(t,e,a),delete this.newMethod,this.ClassName="MinuteChartContainer",this.WindowIndex=new Array,this.Symbol,this.Name,this.SourceData,this.IndexBindData,this.IsAutoUpdate=!0,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.TradeDate=0,this.DayCount=1,this.DayData,this.LimitPrice,this.IsShowBeforeData=!1,this.BeforeOpenData=null,this.IsBeforeData=!1,this.IsShowAfterData=!1,this.AfterCloseData=null,this.IsAfterData=!1,this.ShareAfterVol=0,this.ExtendWidth={Left:120,Right:120},this.IsShowLead=!0,this.IsShowMultiDayBeforeData=!1,this.MultiDayBeforeOpenData=null,this.IsShowMultiDayAfterData=!1,this.MultiDayAfterCloseData=null,this.MultiDayExtendWidth={Left:20,Right:20},this.ChartDrawStorage=new gi,this.ChartDrawStorageCache=null,this.MinuteApiUrl=xi.Domain+"/API/Stock",this.HistoryMinuteApiUrl=xi.Domain+"/API/StockMinuteData",this.ColorLineData,this.EnableSelectRect=!1,this.SelectRectDialog=null,this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1},this.EnableNewIndex=!1,this.DayOffset={Offset:0,ShowDayCount:-1,DataOffset:0,DayCount:1},this.PageInfo={Enable:!1,Offset:-8888,ShowDayCount:4},this.ZoomStepPixel=50,this.SetCallCationDataBorder=function(t){if(t){var e={Left:t.Left?this.ExtendWidth.Left:0,Right:t.Right?this.ExtendWidth.Right:0};if(this.Frame.SetExtendWidth(e),t.MultiDay){var a=t.MultiDay,i={Left:a.Left?this.MultiDayExtendWidth.Left:0,Right:a.Right?this.MultiDayExtendWidth.Right:0};this.Frame.SetMultiDayMinuteWidth(i)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.ReloadResource&&a.ReloadResource(t),0==e?"Minute-Line"==a.Name&&(a.Color=xi.Minute.PriceColor,a.AreaColor=xi.Minute.AreaPriceColor):1==e?"Minute-Average-Line"==a.Name&&(a.Color=xi.Minute.AvPriceColor):2==e&&"Minute-Vol-Bar"==a.Name&&(a.Color=xi.Minute.VolBarColor))}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(C.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==p.CLOSE_BEFOREOPEN_ID&&this.ShowCallAuctionData({Left:!1,Right:!1,MultiDay:{Left:!1,Right:!1}}),t.ID==p.CLOSE_OVERLAY_INDEX){var r=t.IndexID;r&&this.DeleteOverlayWindowsIndex(r)}else if(t.ID==p.MODIFY_OVERLAY_INDEX_PARAM){r=t.IndexID;var n=t.Frame;e.data={Chart:this,Identify:r,IsOverlay:!0},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==p.CLOSE_INDEX_WINDOW){n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==p.CHANGE_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==p.MODIFY_INDEX_PARAM){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==p.OVERLAY_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!0},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==p.MAX_MIN_WINDOW){r=t.IndexID,n=t.Frame;var s=t.FrameID;s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==p.TITLE_WINDOW){r=t.IndexID,n=t.Frame,s=t.FrameID;this.ShowIndexTitleOnly(s)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==p.EXPORT_DATA){i=this.ExportData({Type:"CSV"});if(!i)return;var o=Date.now(),h="hqchart_".concat(this.Symbol,"_").concat(o,".csv"),l=document.createElement("a"),u=new Blob([i],{type:"text/csv"});l.href=URL.createObjectURL(u),document.body.appendChild(l),l.setAttribute("download",h),l.click(),document.body.removeChild(l)}},this.ChartOperator=function(t){var e=t.ID;if(e===m.OP_SCROLL_LEFT||e===m.OP_SCROLL_RIGHT){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;var a=e===m.OP_SCROLL_LEFT,i=1;if(t.Step>0&&(i=t.Step),!this.DayOffset)return!1;if(a){var r=this.DayOffset.Offset;if(r+=i,r+this.DayOffset.ShowDayCount>this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}else{r=this.DayOffset.Offset;if(r-=i,r<0&&(r=0),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==m.OP_SCROLL_GOTO){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;if(ze.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount,this.DayOffset.ShowDayCount=t.ShowDayCount),ze.IsNumber(t.Offset)){r=t.Offset;if(this.DayOffset.ShowDayCount>0&&r+this.DayOffset.ShowDayCount>=this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==m.OP_CORSSCURSOR_GOTO){if(!this.SourceData)return!1;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var n=this.Frame.SubFrame[0].Frame;if(!ze.IsNonEmptyArray(this.SourceData.Data))return!1;if(ze.IsNumber(t.Time)&&ze.IsNumber(t.Date)){for(var s=-1,o=null,h=null,l=0;l<this.SourceData.Data.length;++l){var u=this.SourceData.Data[l];if(ze.IsNumber(u.Close)&&(h=u.Close),u.Time==t.Time&&u.Date==t.Date){s=l,o=u.Close;break}}if(s<0&&1==this.DayCount&&!(ze.IsNumber(t.Type)&&t.Type>0)){var c=Er.GetTimeData(this.Symbol);for(l=0;l<c.length;++l)if(c[l]==t.Time){s=l,o=h;break}}if(s<0){if(1==t.Type){var d=-1,f=-1,D={X:d,Y:f,IsInClient:this.IsMouseOnClient(d,f)};this.LastMouseStatus.OnMouseMove=D,this.LastMouseStatus.MoveOnPoint={X:d,Y:f};var p=this.GetEventCallback(C.ON_MOUSE_MOVE),v=this.TitlePaint[0];p&&v&&(v.OnMouseMoveEvent=p);var g={clientX:d,clientY:f};this.MoveOnPoint={X:d,Y:f},this.OnMouseMove(d,f,g),this.LastMouseStatus.MoveOnPoint=null,v&&(v.OnMouseMoveEvent=null)}return}}d=n.GetXFromIndex(s),f=n.GetYFromData(o),D={X:d,Y:f,IsInClient:this.IsMouseOnClient(d,f)};this.LastMouseStatus.OnMouseMove=D,this.LastMouseStatus.MoveOnPoint={X:d,Y:f};p=this.GetEventCallback(C.ON_MOUSE_MOVE),v=this.TitlePaint[0];p&&v&&(v.OnMouseMoveEvent=p),this.MoveOnPoint={X:d,Y:f},this.OnMouseMove(d,f,{}),this.LastMouseStatus.MoveOnPoint=null,v&&(v.OnMouseMoveEvent=null)}},this.SendPageChangedEvent=function(){var t=this.GetEventCallback(C.ON_MINUTE_PAGE_CHANGED);if(t&&t.Callback){var e={DayOffset:this.DayOffset,DayData:this.DayData};t.Callback(t,e,this)}},this.IsMouseOnClient=function(t,e){var a=this.Frame.IsHScreen?this.Frame.ChartBorder.GetHScreenBorder():this.Frame.ChartBorder.GetBorder(),i={Left:a.Left,Top:a.Top,Right:a.Right,Bottom:a.Bottom};return t>=i.Left&&t<=i.Right&&e>=i.Top&&e<=i.Bottom},this.OnDragMode_One=function(e,a){var i=this.MouseDrag,r=e.X,n=e.Y;if(this.RectSelectDrag&&this.RectSelectDrag.Index>=0){if(r<5)return;var s={X:a.clientX,Y:a.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(s)&&(i.LastMove.X=a.clientX,this.Draw())}else{if(r<5&&n<5)return;if(!this.EnableSelectRect)return;this.UIElement.style.cursor="default";var o=i.Click.X-t.getBoundingClientRect().left,h=i.Click.Y-t.getBoundingClientRect().top,l=a.clientX-t.getBoundingClientRect().left,u=a.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(o,h,l,u),i.LastMove.X=a.clientX,i.LastMove.Y=a.clientY}},this.OnMinuteSelectRectMouseUp=function(e){var a=this.MouseDrag;a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY;var i=new P,r=I();if(i.XStart=(a.Click.X-t.getBoundingClientRect().left)*r,i.YStart=(a.Click.Y-t.getBoundingClientRect().top)*r,i.XEnd=(a.LastMove.X-t.getBoundingClientRect().left)*r,i.YEnd=(a.LastMove.Y-t.getBoundingClientRect().top)*r,i.JSChartContainer=this,i.Stock={Symbol:this.Symbol,Name:this.Name},this.EnableSelectRect&&!this.BorderDrag&&this.GetSelectRectData(i)){var n=this.GetEventCallback(C.ON_SELECT_RECT),s=this.GetRectSelectPaint(),o=!0;if(n&&n.Callback){var h={X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:s};n.Callback(n,h,this),o=!1}o&&this.SelectRectDialog?(e.data={Chart:this,X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:s},this.SelectRectDialog.DoModal(e)):(this.HideSelectRect(),this.UpdateSelectRect(i.Start,i.End))}else this.TryClickPaintEvent(C.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e)},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=I(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,s=r.LastPoint.Y/i,o=!0,h=this.GetEventCallback(C.ON_DRAG_SELECT_RECT_MOUSEUP);if(h){var l={X:n,Y:s,SelectData:a,RectSelectPaint:e,IsShowDialog:!1};h.Callback(h,l,this),o=l.IsShowDialog}o&&this.SelectRectDialog&&(t.data={Chart:this,X:n,Y:s,SelectData:a,RectSelectPaint:e},this.SelectRectDialog.DoModal(t))}}},this.UpdateSelectRect=function(t,e){if(this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=this.SourceData;if(i&&ze.IsNonEmptyArray(i.Data)){var r=i.Data.length,n=i.Data[t];e>=r&&(e=r-1);var s=i.Data[e];l.Chart.Log("[MinuteChartContainer::UpdateSelectRect]",n,s),a.SetPoint(n,{Index:0}),a.SetPoint(s,{Index:1}),this.Draw()}}}},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.SourceData||!this.SourceData.Data)return!1;var i=this.SourceData;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=I(),s=(e.X-t.getBoundingClientRect().left)*n,o=r.GetXData(s);o=parseInt(o.toFixed(0));var h=o+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var u=i.Data[h];if(l.Chart.Log("[MinuteChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,u),!a.SetPoint(u,{Index:e.PointIndex}))return!1;var c=this.GetEventCallback(C.ON_DRAG_SELECT_RECT);if(c){var d=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:d,RectSelectPaint:a};c.Callback(c,f,this)}return!0},this.GetLastCursorIndex=function(t){if(1==t.DataType)for(var e=t.Data.length-1;e>=0;--e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(e=t.Data.length-1;e>=0;--e)for(var i=t.Data[e],r=i.length-1;r>=0;--r){a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}},this.GetFirstCursorIndex=function(t){if(1==t.DataType)for(var e=0;e<t.Data.length;++e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(e=0;e<t.Data.length;++e)for(var i=t.Data[e],r=0;r<i.length;++r){a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}},this.GetAfterCloseData=function(){var t=null;return this.AfterCloseData&&this.IsShowAfterData&&(t=this.AfterCloseData),t},this.GetBeforeOpenData=function(){var t=null;return this.BeforeOpenData&&this.IsShowBeforeData&&(t=this.BeforeOpenData),t},this.MoveCorssCursorIndex=function(t){if(!this.EnableNewIndex)return!1;if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var e=this.Frame.SubFrame[0].Frame;if(1==this.CorssCursorIndex.Type||2==this.CorssCursorIndex.Type||3==this.CorssCursorIndex.Type||-1==this.CorssCursorIndex.Type){var a=[],i=this.GetBeforeOpenData();a.push({DayItem:i,Type:2});i=null;this.SourceData&&(i=this.SourceData),a.push({DayItem:i,Type:1});i=this.GetAfterCloseData();a.push({DayItem:i,Type:3});var r={DataType:1,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(10==this.CorssCursorIndex.Type||20==this.CorssCursorIndex.Type||30==this.CorssCursorIndex.Type||-2==this.CorssCursorIndex.Type){a=[];var s=0,o=this.DayData.length;this.DayOffset&&(ze.IsNumber(this.DayOffset.Offset)&&(s=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(o=this.DayOffset.ShowDayCount));for(var h=s,l=0;h<this.DayData.length&&l<o;++h,++l){var u=[];i=null;this.MultiDayBeforeOpenData&&this.IsShowMultiDayBeforeData&&(i=this.MultiDayBeforeOpenData[h]),u.push({DayItem:i,Type:20});i=null;this.DayData&&(i=this.DayData[this.DayData.length-1-h]),u.push({DayItem:i,Type:10});i=null;this.MultiDayAfterCloseData&&this.IsShowMultiDayAfterData&&(i=this.MultiDayAfterCloseData[h]),u.push({DayItem:i,Type:30}),a.push(u)}r={DataType:2,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}},this.SetCorssCursorIndex=function(t){if(this.EnableNewIndex&&(l.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] option ",t),"OnMouseMove"==t.ParentFunction)){this.CorssCursorIndex.Point.X=t.Point.X,this.CorssCursorIndex.Point.Y=t.Point.Y;var e=this.PtInClient_V2(t.Point.X,t.Point.Y);if(l.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] clientPos ",e),e<=0)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:e});if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1});var a=this.Frame.SubFrame[0].Frame;if(1==e||2==e||3==e){if(this.CorssCursorIndex.DayIndex=0,this.CorssCursorIndex.Type=e,2==e)a.GetLeftExtendXValidData(t.Point.X,{Data:this.BeforeOpenData,IndexData:this.CorssCursorIndex});else if(3==e)a.GetRightExtendXValidData(t.Point.X,{Data:this.AfterCloseData,IndexData:this.CorssCursorIndex});else if(1==e){var i=a.GetXData(t.Point.X);this.CorssCursorIndex.DataIndex=parseInt(i.toFixed(0))}}else if(e>=100&&e<=199){this.CorssCursorIndex.DayIndex=e-100,this.CorssCursorIndex.Type=10;i=a.GetXData(t.Point.X);var r=parseInt(i.toFixed(0));this.CorssCursorIndex.DataIndex=r%a.MinuteCount}else if(e>=200&&e<=299){this.CorssCursorIndex.DayIndex=e-200,this.CorssCursorIndex.Type=20;var n=this.MultiDayBeforeOpenData;if(this.DayOffset){var s=0,o=this.MultiDayBeforeOpenData.length;ze.IsNumber(this.DayOffset.Offset)&&(s=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(o=this.DayOffset.ShowDayCount),n=this.MultiDayBeforeOpenData.slice(s,s+o)}a.GetLeftExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}else if(e>=300&&e<=399){this.CorssCursorIndex.DayIndex=e-300,this.CorssCursorIndex.Type=30;n=this.MultiDayAfterCloseData;if(this.DayOffset&&this.MultiDayAfterCloseData){s=0,o=this.MultiDayAfterCloseData.length;ze.IsNumber(this.DayOffset.Offset)&&(s=this.DayOffset.Offset),ze.IsNumber(this.DayOffset.ShowDayCount)&&(o=this.DayOffset.ShowDayCount),n=this.MultiDayAfterCloseData.slice(s,s+o)}a.GetRightExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}this.LastPoint.X=this.CorssCursorIndex.Point.X,t.Point.X=this.CorssCursorIndex.Point.X}},this.PtInClient_V2=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(var i=0;i<a.DayBorder.length;++i){var r=a.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,a.TopEx,r.RightEx-r.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 100+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,a.TopEx,r.LeftEx-r.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,a.TopEx,r.Right-r.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+i}return-2}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnTouchStart=function(e){if(0!=this.DragMode&&(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash))if(this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer(),0==this.EnableScrollUpDown&&e.preventDefault(),this.IsPhoneDragging(e)){var a={Click:{},LastMove:{}},i=this.GetToucheData(e,this.IsForceLandscape),r=this.PointAbsoluteToRelative(i[0].clientX,i[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var n=r.X,s=r.Y;if(this.TryClickLock&&this.TryClickLock(n,s))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(n,s))return}a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY;var o=this,h=function(){if(!0===o.ChartCorssCursor.IsShow){var i=I(),r=a.Click.X-t.getBoundingClientRect().left*i,n=a.Click.Y-t.getBoundingClientRect().top*i;o.OnMouseMove(r,n,e)}};if(this.ChartDrawOption.IsLockScreen){if(this.MouseDrag=a,this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;return 2==u.Status?this.SetChartDrawPictureThirdPoint(a.Click.X,a.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(a.Click.X,a.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var c={};I();if(c.X=i[0].clientX-t.getBoundingClientRect().left,c.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(c)){c.ChartDrawPicture.Status=20,c.ChartDrawPicture.ValueToPoint(),c.ChartDrawPicture.MovePointIndex=c.PointIndex,c.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=c.ChartDrawPicture,this.SelectChartDrawPicture=c.ChartDrawPicture;var d=this.GetEventCallback(C.ON_CLICK_DRAWPICTURE);if(d&&d.Callback){var f={DrawPicture:c.ChartDrawPicture};d.Callback(d,f,this)}return void(e.cancelable&&e.preventDefault())}}else 1==this.EnableScrollUpDown&&(this.DragTimer=setTimeout((function(){if(a.Click.X==a.LastMove.X&&a.Click.Y==a.LastMove.Y){o.MouseDrag;o.MouseDrag=null,h(),o.PreventTouchEvent(e)}}),800)),this.MouseDrag=a,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture=null,0==this.EnableScrollUpDown&&h();this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(i[0].clientX,i[0].clientY,Date.now()),l.Chart.Log("[MinuteChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}else if(this.IsPhonePinching(e)){var m={Start:{},Last:{}};i=this.GetToucheData(e,this.IsForceLandscape);m.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},m.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=m,this.SelectChartDrawPicture=null}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=I(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}else{var o=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;if(1==u.Status||2==u.Status){if(h<5&&l<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==u.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==u.Status){if(h<5&&l<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else{if((l>0&&h<=3||o<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();this.PreventTouchEvent(e),this.MouseDrag=null;r=I(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var c=this.PhonePinch;if(!c)return;var d=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(c.Last.Y-c.Last.Y2),m=d-f,D=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(c.Last.X-c.Last.X2),v=D-p,g=this.ZoomStepPixel;if(Math.abs(v)>g){var S=this.GetEventCallback(C.ON_MINUTE_TOUCH_ZOOM);if(S&&S.Callback){var T={XStep:v,YStep:m,PreventDefault:!1};if(S.Callback(S,T,this),T.PreventDefault)return this.PhonePinch=null,void this.StopDragTimer()}}c.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}0==this.EnableScrollUpDown?e.preventDefault():null==i?this.PreventTouchEvent(e):this.StopDragTimer()}},this.OnTouchEnd=function(t){if(l.Chart.Log("[MinuteChartContainer::OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var a=Date.now();this.PhoneDBClick.AddTouchEnd(a),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.StopDragTimer(),this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnKeyDown=function(t){if(this.StopDisplayLatest(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.keyCode?t.keyCode:t.which;switch(e){case 37:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!0});else{if(!ze.IsNumber(this.CursorIndex)){var a=0;a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex=a-1}if(this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}break;case 39:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!1});else{a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,ze.IsNumber(this.CursorIndex)||(this.CursorIndex=0),this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex+1>=a){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else{var i=null;if(i=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,!i)break;if(this.CursorIndex+i.DataOffset+1>=i.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}}break;case 46:if(this.SelectChartDrawPicture){var r=this.SelectChartDrawPicture;l.Chart.Log(r,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(r)}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var n=this.GetSelectedChartInfo(this.SelectedChart.Selected);n&&(n.Type==He.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(n.IndexID):n.Type==He.OVERLAY_MINUTE&&this.DeleteOverlaySymbol(n.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 33:if(this.PageInfo.Enable){var s={ID:m.OP_SCROLL_LEFT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(s)}break;case 34:if(this.PageInfo.Enable){s={ID:m.OP_SCROLL_RIGHT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(s)}break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&ze.IsNumber(e.CursorIndex)&&this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;l.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.SourceData;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var s=r.Data[n];if(l.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] item",s),this.SetRectSelectData(s)){var o=a.GetPointCount(),h=I();if(1==o){var u=this.GetEventCallback(C.ON_KEYDOWN_SELECT_RECT_FIRST);if(u&&u.Callback){var c={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,Item:s,Index:n,RectSelectPaint:a};u.Callback(u,c,this)}}else if(2==o){var d=a.GetSelectRectData();u=this.GetEventCallback(C.ON_KEYDOWN_SELECT_RECT);if(u&&u.Callback){c={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:d,RectSelectPaint:a};u.Callback(u,c,this)}this.SelectRectDialog&&(t.data={Chart:this,X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:d,RectSelectPaint:a},this.SelectRectDialog.DoModal(t))}this.Draw()}}}},this.OnRightMenu=function(t,e,a){if(this.RightMenu){var i=this.Frame.PtInFrame(t,e);a.data={Chart:this,FrameID:i},this.RightMenu.DoModal(a)}var r=this.GetEventCallback(C.ON_CONTEXT_MENU);if(r){i=this.Frame.PtInFrame(t,e);var n={X:t,Y:e,Event:a,FrameID:i};r.Callback(r,n,this)}},this.OnWheel=function(t){l.Chart.Log("[MinuteChartContainer::OnWheel]",t)},this.OnDoubleClick=function(t,e,a){var i;l.Chart.Log("[MinuteChartContainer::OnDoubleClick]",a),null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null),this.SelectedChart.EnableSelected&&(i=this.PtInChart(t,e));var r={SelectedChart:i};if(this.DBClickEvent(r,a),!i&&this.EnableZoomIndexWindow){var n=this.Frame.PtInFrame(t,e);l.Chart.Log("[MinuteChartContainer::OnDoubleClick] frameId",n),n>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(n,{X:t,Y:e})&&(this.Frame.SetSizeChage(!0),this.Draw())}},this.GetDataItem=function(t){if(!t)return null;if(!ze.IsNumber(t.Index))return null;if(!this.SourceData||!this.SourceData.Data)return null;var e=this.SourceData,a=t.ClientPos;if(2==a||3==a||a>=200&&a<=299||a>=300&&a<=399){if(!this.ChartCorssCursor||!this.ChartCorssCursor.CallAcutionXOperator)return null;var i=!0===this.Frame.IsHScreen,r=this.ChartCorssCursor.CallAcutionXOperator;if(r.Value=i?t.Point.Y:t.Point.X,r.Point={X:t.Point.X,Y:t.Point.Y},r.ClientPos=a,2==a){if(!this.BeforeOpenData)return null}else if(3==a){if(!this.AfterCloseData)return null}else if(a>=200&&a<=299){if(!this.MultiDayBeforeOpenData||!ze.IsNonEmptyArray(this.MultiDayBeforeOpenData))return}else if(a>=300&&tclientPos<=399&&(!this.MultiDayAfterCloseData||!ze.IsNonEmptyArray(this.MultiDayAfterCloseData)))return;if(r.Operator()){var n=r.Item;return{Type:a,Item:n,Index:r.DataIndex}}return null}var s=parseInt(t.Index.toFixed(0)),o=s+e.DataOffset;if(o>=e.Data.length)return null;n=e.Data[o];return{Type:a,Item:n,Index:o}},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Frame.SourceData;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t],i=null;i=a.Before?a.Before.Close:a.Close,this.LastPoint.Y=this.Frame.GetYFromData(i)}},this.Create=function(t,e){var a=this;for(var i in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new ea,this.ChartCorssCursor.PtInClient=function(t,e){return a.PtInClient(t,e)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=va.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=va.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ShareAfterVol=this.ShareAfterVol,this.ChartCorssCursor.CallAcutionXOperator=new ta,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new Z,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.TitleHeight=0,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.GetEventCallback=function(t){return a.GetEventCallback(t)},this.Frame.ZoomStartWindowIndex=2,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.Frame.SubFrame){var r=new Aa;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame);var n=!0,s=!0;if(e&&e.Listener){var o=e.Listener;!1===o.KeyDown&&(n=!1,l.Chart.Log("[MinuteChartContainer::Create] not register keydown event.")),!1===o.Wheel&&(s=!1,l.Chart.Log("[MinuteChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",(function(t){a.OnKeyDown(t)}),!0),s&&this.UIElement.addEventListener("wheel",(function(t){a.OnWheel(t)}),!0)},this.CreateChildWindow=function(t){for(var e=this,a=this.GetEventCallback(C.ON_CREATE_FRAME),i=0;i<t;++i){var r=new R;r.UIElement=this.UIElement;var n=new V;n.Canvas=this.Canvas,n.ChartBorder=r,n.Identify=i,n.GlobalOption=this.GlobalOption,i<2&&(n.ChartBorder.TitleHeight=0),n.XPointCount=243,i>=2&&(this.ModifyIndexDialog&&(n.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(n.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var s=[9,8,7,6,5,4,3,2,1];for(var o in n.HorizontalMax=s[0],n.HorizontalMin=s[s.length-1],0==i?(n.YSplitOperator=new $e,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.DayOffset=this.DayOffset,n.YSplitOperator.GlobalOption=this.GlobalOption,n.YSplitOperator.HQChart=this):(n.YSplitOperator=new Je,n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},1==i&&(n.YSplitOperator.ShareAfterVol=this.ShareAfterVol)),n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=r,n.XSplitOperator=new je,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=r,n.XSplitOperator.DayOffset=this.DayOffset,n.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i!=t-1&&(n.XSplitOperator.ShowText=!1),n.XSplitOperator.Operator(),s)n.HorizontalInfo[o]=new O,n.HorizontalInfo[o].Value=s[o],0==i&&o==n.HorizontalMin||(n.HorizontalInfo[o].Message[1]=s[o].toString(),n.HorizontalInfo[o].Font="14px 微软雅黑");var h=new J;if(h.Frame=n,h.Height=0==i?20:10,this.Frame.SubFrame[i]=h,a&&a.Callback){var l={SubFrame:this.Frame.SubFrame[i],WindowIndex:i};a.Callback(a,l,this)}}},this.CreateSubFrameItem=function(t,e){var a=this,i=new R;if(i.UIElement=this.UIElement,e&&e.ChartBorder&&e.ChartBorder.MultiDayMinute){var r=e.ChartBorder.MultiDayMinute;i.MultiDayMinute.Count=r.Count,i.MultiDayMinute.Left=r.Left,i.MultiDayMinute.Right=r.Right}var n=new V;n.Canvas=this.Canvas,n.ChartBorder=i,n.Identify=t,n.XPointCount=243,n.GlobalOption=this.GlobalOption,t>=2&&(this.ModifyIndexDialog&&(n.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(n.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var s=[9,8,7,6,5,4,3,2,1];n.HorizontalMax=s[0],n.HorizontalMin=s[s.length-1],n.YSplitOperator=new Je,n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=i,n.XSplitOperator=new je,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=i,n.XSplitOperator.ShowText=!1,n.XSplitOperator.DayOffset=this.DayOffset,n.XSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.XSplitOperator.Symbol=this.Symbol,this.DayCount>1&&(n.XSplitOperator.DayCount=this.DayData.length,n.XSplitOperator.DayData=this.DayData,n.DayCount=this.DayData.length);var o=this.Frame.SubFrame[0].Frame.XPointCount;for(var h in n.XPointCount=o,n.Data=this.ChartPaint[0].Data,s)n.HorizontalInfo[h]=new O,n.HorizontalInfo[h].Value=s[h],n.HorizontalInfo[h].Message[1]=s[h].toString(),n.HorizontalInfo[h].Font="14px 微软雅黑";var l=new J;l.Frame=n,l.Height=10;var u=this.GetEventCallback(C.ON_CREATE_FRAME);if(u&&u.Callback){var c={SubFrame:l,WindowIndex:t};u.Callback(u,c,this)}return l},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame[0].Frame,i=this.Frame.SubFrame.length,r=this.CreateSubFrameItem(i,a),n=I();r.Frame.ChartBorder.TitleHeight*=n,this.Frame.SubFrame[i]=r;var s=new Aa;s.Frame=this.Frame.SubFrame[i].Frame,s.Canvas=this.Canvas,s.LanguageID=this.LanguageID,s.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[i+1]=s,this.SetSubFrameOption(r,t);for(var o=0;o<this.Frame.SubFrame.length;++o){var h=this.Frame.SubFrame[o].Frame;o==this.Frame.SubFrame.length-1?h.XSplitOperator.ShowText=!0:h.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),i},this.UpdateXShowText=function(){for(var t=!0,e=this.Frame.SubFrame.length-1;e>=0;--e){var a=this.Frame.SubFrame[e].Frame,i=this.Frame.SubFrame[e];t?(a.XSplitOperator.ShowText=!0,i.Height>0&&(t=!1)):a.XSplitOperator.ShowText=!1}},this.DeleteIndexPaint=function(t,e){var a=new Array;for(var i in this.ChartPaint){var r=this.ChartPaint[i];0==i||r.ChartFrame!=this.Frame.SubFrame[t].Frame?a.push(r):!0===e&&r&&r.OnDestroy&&r.OnDestroy()}var n=this.Frame.SubFrame[t].Frame;n.YSpecificMaxMin=null,n.IsLocked=!1,n.YSplitOperator.SplitType=n.YSplitOperator.DefaultSplitType,this.ChartPaint=a;var s=t+1;this.TitlePaint[s].Data=[],this.TitlePaint[s].Title=null},this.CreateStockInfo=function(){this.ExtendChartPaint[0]=new Ne,this.ExtendChartPaint[0].Canvas=this.Canvas,this.ExtendChartPaint[0].ChartBorder=this.Frame.ChartBorder,this.ExtendChartPaint[0].ChartFrame=this.Frame,this.Frame.ChartBorder.Right=300},this.CreateMainKLine=function(){var t=this,e=pt.Create("ChartMinutePriceLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Identify="Minute-Line",e.Color=xi.Minute.PriceColor,e.LineWidth=xi.Minute.PriceLineWidth,e.AreaColor=xi.Minute.AreaPriceColor,e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e;var a=new Qt;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,a.ChartFrame=this.Frame.SubFrame[0].Frame,a.Name="Minute-Average-Line",a.Identify="Minute-Average-Line",a.Color=xi.Minute.AvPriceColor,a.IsDrawArea=!1,this.ChartPaint[1]=a;var i=pt.Create("ChartMinuteVolumBar");i.Color=xi.Minute.VolBarColor,i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[1].Frame,i.Name="Minute-Vol-Bar",i.Identify="Minute-Vol-Bar",i.ShareAfterVol=this.ShareAfterVol,this.ChartPaint[2]=i,this.TitlePaint[0]=new Ta,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].CallAcutionXOperator=new ta,this.TitlePaint[0].CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new fn(e.Name,e.Script,e.Args,e);var i=this.SourceData;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new mn(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(!(this.Frame.SubFrame.length<3)){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=new d,r=i.Get(e);if(r){t<2&&(t=2),t>=this.Frame.SubFrame.length&&(t=2);var n={Name:r.Name,Script:r.Script,Args:r.Args,ID:e,KLineType:r.KLineType,YSpecificMaxMin:r.YSpecificMaxMin,YSplitScale:r.YSplitScale,FloatPrecision:r.FloatPrecision,Condition:r.Condition,StringFormat:r.StringFormat,OutName:r.OutName};return a&&(a.FloatPrecision>=0&&(n.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(n.StringFormat=a.StringFormat),a.Args&&(n.Args=a.Args),ze.IsNumber(a.YSplitType)&&(n.YSplitType=a.YSplitType),a.Lock&&(n.Lock=a.Lock)),this.ChangeScriptIndex(t,n,a)}}},this.ChangeIndexWindowCount=function(t){var e=this;if(!(t<2)&&this.Frame.SubFrame.length!=t){var a=this.Frame.SubFrame.length;if(a>t){for(var i=this.GetEventCallback(C.ON_DELETE_FRAME),r=a-1;r>=t;--r){this.DeleteIndexPaint(r);var n=this.Frame.SubFrame[r].Frame;if(n.ClearToolbar&&n.ClearToolbar(),i&&i.Callback){var s={SubFrame:this.Frame.SubFrame[r],WindowIndex:r};i.Callback(i,s,this)}}this.Frame.SubFrame.splice(t,a-t),this.WindowIndex.splice(t,a-t)}else{var o=this.Frame.SubFrame[0].Frame;for(r=a;r<t;++r){var h=this.CreateSubFrameItem(r,o);this.Frame.SubFrame[r]=h;var l=new Aa;l.Frame=this.Frame.SubFrame[r].Frame,l.Canvas=this.Canvas,l.LanguageID=this.LanguageID,l.GetEventCallback=function(t){return e.GetEventCallback(t)},l.SelectedChart=this.SelectedChart,this.TitlePaint[r+1]=l}var u=["RSI","MACD","DMA","DMI","KDJ","WR"],c=new d;for(r=a;r<t;++r){var f=u[r%u.length],m=c.Get(f);this.WindowIndex[r]=new fn(m.Name,m.Script,m.Args,m);var D=this.SourceData;this.BindIndexData(r,D)}for(r=0;r<this.Frame.SubFrame.length;++r){n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.UpdateXShowText(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeIndexTemplate=function(t){var e=this;if(Array.isArray(t.Windows)){var a=t.Windows.length,i=this.Frame.SubFrame.length;a+=2;var r=null;ze.IsNumber(t.DayCount)&&t.DayCount!=this.DayCount&&(r=t.DayCount);for(var n=null!=r,s=2;s<i;++s){this.DeleteIndexPaint(s);var o=this.Frame.SubFrame[s];o.YSpecificMaxMin=null,o.IsLocked=!1,o.YSplitScale=null}if(i>a){var h=this.GetEventCallback(C.ON_DELETE_FRAME);for(s=i-1;s>=a;--s)if(this.Frame.SubFrame[s].Frame.ClearToolbar(),h&&h.Callback){var l={SubFrame:this.Frame.SubFrame[s],WindowIndex:s};h.Callback(h,l,this)}this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a)}else for(s=i;s<a;++s){var u=this.CreateSubFrameItem(s);this.Frame.SubFrame[s]=u;var c=new Aa;c.Frame=this.Frame.SubFrame[s].Frame,c.Canvas=this.Canvas,c.LanguageID=this.LanguageID,c.GetEventCallback=function(t){return e.GetEventCallback(t)},c.SelectedChart=this.SelectedChart,this.TitlePaint[s+1]=c}var f=new d;for(s=0;s<a;++s){var m=s,D=null,p=null;t.Frame&&t.Frame.length>s&&(p=t.Frame[m]),m>=2&&(D=t.Windows[m-2]);var v=m+1;if(this.TitlePaint[v].Data=[],this.TitlePaint[v].Title=null,D)if(D.Script)this.WindowIndex[m]=new fn(D.Name,D.Script,D.Args,D);else if(D.API){var g=D.API;this.WindowIndex[m]=new mn(g.Name,g.Script,g.Args,D)}else{var S=D.Index,I=bi.Get(S);if(I)this.WindowIndex[m]=I.Create(),this.CreateWindowIndex(m);else{var T=f.Get(S);if(T){var x=T.Args;D.Args&&(x=D.Args);var y={Name:T.Name,Script:T.Script,Args:x,ID:S,KLineType:T.KLineType,YSpecificMaxMin:T.YSpecificMaxMin,YSplitScale:T.YSplitScale,FloatPrecision:T.FloatPrecision,Condition:T.Condition,OutName:T.OutName};D.TitleFont&&(y.TitleFont=D.TitleFont),this.WindowIndex[m]=new fn(y.Name,y.Script,y.Args,y)}}}this.SetSubFrameAttribute(this.Frame.SubFrame[m],D,p)}for(s=0;s<this.Frame.SubFrame.length;++s){D=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?D.XSplitOperator.ShowText=!0:D.XSplitOperator.ShowText=!1}if(n)this.Frame.SetSizeChage(!0),null!=r&&this.ChangeDayCount(r);else{var A=this.SourceData;for(s=0;s<a;++s)this.BindIndexData(s,A);this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}},this.RemoveIndexWindow=function(t){if(l.Chart.Log("[MinuteChartContainer::RemoveIndexWindow] remove id",t),!(t<2)&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar();var e=this.GetEventCallback(C.ON_DELETE_FRAME);if(e&&e.Callback){var a={SubFrame:this.Frame.SubFrame[t],WindowIndex:t};e.Callback(e,a,this)}this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var i=0;i<this.Frame.SubFrame.length;++i){var r=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?r.XSplitOperator.ShowText=!0:r.XSplitOperator.ShowText=!1,r.Identify=i}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.AutoUpdateEvent=function(t,e){var a=t?C.RECV_START_AUTOUPDATE:C.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvMinuteData(t)}),r.Callback(r,n,this)}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){t>=2&&this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(ze.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(t=1;t<this.TitlePaint.length;++t){e=this.TitlePaint[t];e.OverlayIndex=new Map}},this.ResetDayOffset=function(){this.PageInfo.Enable?(this.DayOffset.Offset=this.PageInfo.Offset,this.DayOffset.ShowDayCount=this.PageInfo.ShowDayCount):(this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=-1),this.DayOffset.PageInfo=null},this.ChangeSymbol=function(t,e){if(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeSymbol"),this.Symbol=t,this.ResetDayOffset(),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ReloadChartDrawPicture(),e&&(ze.IsNumber(e.DayCount)&&(this.DayCount=e.DayCount),ze.IsNonEmptyArray(e.Windows)))for(var a=new d,i=0;i<e.Windows.length;++i){var r=2+i;if(r>=this.WindowIndex.length)break;var n=e.Windows[i];if(n)if(n.Script)this.WindowIndex[r]=new fn(n.Name,n.Script,n.Args,n);else if(n.API){var s=n.API;this.WindowIndex[r]=new mn(s.Name,s.Script,s.Args,n)}else{var o=n.Index,h=a.Get(o);if(h){h.Args;n.Args&&(h.Args=n.Args),h.ID=o,this.WindowIndex[r]=new fn(h.Name,h.Script,h.Args,h)}}}!t||this.DayCount<=0?this.DrawEmpty():(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestData())},this.SetPageInfo=function(t){t&&(ze.IsBool(t.Enable)&&(this.PageInfo.Enable=t.Enable),ze.IsNumber(t.Offset)&&(this.PageInfo.Offset=t.Offset),ze.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount))},this.ClearMinuteData=function(){this.SourceData=null,this.DayData=null,this.BeforeOpenData=null,this.AfterCloseData=null,this.MultiDayBeforeOpenData=null,this.MultiDayAfterCloseData=null},this.ChangeDayCount=function(t,e){t<0||(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeDayCount"),this.DayCount=t,this.ClearMinuteData(),e&&e.PageInfo&&(this.SetPageInfo(e.PageInfo),this.ResetDayOffset()),this.DayCount>1?this.ChartDrawPicture=[]:this.ReloadChartDrawPicture(),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.RequestData())},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];if(i.Symbol==t)return console.warn("[MinuteChartContainer::OverlaySymbol] overlay symbol=".concat(t," exist.")),!1}var r=new $t;return r.Canvas=this.Canvas,r.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,r.ChartFrame=this.Frame.SubFrame[0].Frame,r.Name="Overlay-Minute",r.Symbol=t,r.Identify="Overlay-Minute-".concat(t),e&&e.Color?r.Color=e.Color:r.Color=xi.OverlaySymbol.Color[xi.OverlaySymbol.Random%xi.OverlaySymbol.Color.length],++xi.OverlaySymbol.Random,this.ChartPaint[0].YClose>0&&this.ChartPaint[0].Data&&(r.MainData=this.ChartPaint[0].Data,r.MainYClose=this.ChartPaint[0].YClose),r.SetOption&&r.SetOption(e),this.OverlayChartPaint.push(r),this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){var e=this.OverlayChartPaint[t];e.Status=xt.STATUS_NONE_ID}},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[MinuteChartContainer::DeleteOverlaySymbol] overlay symbol=".concat(t," not exist.")),!1},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){var e=this.OverlayChartPaint[t];e.IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.UpdateFrameMaxMin(),this.Draw()},this.ShowBeforeData=function(t,e){this.ShowCallAuctionData({Left:t},e)},this.ShowCallAuctionData=function(t,e){if(t){var a=!1;if(ze.IsBool(t.Left)&&this.IsShowBeforeData!=t.Left&&(this.IsShowBeforeData=t.Left,a=!0),ze.IsBool(t.Right)&&this.IsShowAfterData!=t.Right&&(this.IsShowAfterData=t.Right,a=!0),t.MultiDay){var i=t.MultiDay;ze.IsBool(i.Left)&&this.IsShowMultiDayBeforeData!=i.Left&&(this.IsShowMultiDayBeforeData=i.Left,a=!0),ze.IsBool(i.Right)&&this.IsShowMultiDayAfterData!=i.Right&&(this.IsShowMultiDayAfterData=i.Right,a=!0)}if(e){if(e.BeforeOpen){i=e.BeforeOpen;ze.IsNumber(i.Left)&&this.ExtendWidth.Left!=i.Left&&(this.ExtendWidth.Left=i.Left,a=!0)}if(e.AfterClose){i=e.AfterClose;ze.IsNumber(i.Right)&&this.ExtendWidth.Right!=i.Right&&(this.ExtendWidth.Right=i.Right,a=!0)}if(e.MultiDay){i=e.MultiDay;ze.IsNumber(i.Left)&&this.MultiDayExtendWidth.Left!=i.Left&&(this.MultiDayExtendWidth.Left=i.Left,a=!0),ze.IsNumber(i.Right)&&this.MultiDayExtendWidth.Right!=i.Right&&(this.MultiDayExtendWidth.Right=i.Right,a=!0)}}a&&this.RequestData()}},this.RequestData=function(){this.DayCount<=1?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.ChangeDrawType=function(t){if(!(this.ChartPaint.length<=0)){if(0==t)this.ChartPaint[0].IsDrawArea=!0;else{if(1!=t)return;this.ChartPaint[0].IsDrawArea=!1}this.Draw()}},this.UpdateDataOffset=function(){this.SourceData.DataOffset=this.DayOffset.DataOffset;for(var t=0;t<this.ChartPaint.length;++t){var e=this.ChartPaint[t];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset,"ChartMinuteVolumBar"!=e.ClassName&&"ChartMinutePriceLine"!=e.ClassName||(e.DayOffset=this.DayOffset))}for(t=0;t<this.OverlayChartPaint.length;++t){e=this.OverlayChartPaint[t];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset)}for(t=0;t<this.Frame.SubFrame.length;++t)for(var a=this.Frame.SubFrame[t],i=0;i<a.OverlayIndex.length;++i)for(var r=a.OverlayIndex[i],n=0;n<r.ChartPaint.length;++n){e=r.ChartPaint[n];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset)}},this.RequestHistoryMinuteData=function(){var t=this;if(this.IsBeforeData=!1,this.IsAfterData=!1,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.NetworkFilter){var e={Name:"MinuteChartContainer::RequestHistoryMinuteData",Explain:"多日分时数据",Request:{Url:t.HistoryMinuteApiUrl,Data:{daycount:t.DayCount,symbol:t.Symbol},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)})),1==e.PreventDefault)return}$n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}})},this.RecvHistoryMinuteData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)l.Chart.Warn("[MinuteChartContainer::RecvHistoryMinuteData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.symbol,"]"));else{this.DayData=Pi.JsonDataToMinuteDataArray(t),this.ColorLineData=Pi.JsonDataToHistoryMinuteLineColorData(t),this.MultiDayBeforeOpenData=Pi.JosnDataToBeforeOpenDataArray(t),this.MultiDayAfterCloseData=Pi.JosnDataToAfterCloseDataArray(t);var e=Pi.JsonDataToHistoryMinuteLastUpdateTime(t);this.CaclutateCallCationYRange(),this.Symbol=t.symbol,this.Name=t.name,this.SetCallCationDataBorder({Left:!1,Right:!1,MultiDay:{Left:this.IsShowMultiDayBeforeData,Right:this.IsShowMultiDayAfterData}}),this.CaclutateLimitPrice(this.DayData[0].YClose,t.data[0].limitprice),this.UpdateHistoryMinuteUI(e),this.RecvMinuteDataEvent({FunctionName:"RecvHistoryMinuteData"}),this.RequestOverlayHistoryMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RequestHistoryMinuteData"),this.AutoUpdate()}},this.CaclutateCallCationYRange=function(){var t=null,e=null;if(ze.IsNonEmptyArray(this.MultiDayAfterCloseData)){for(var a={Max:null,Min:null},i=0;i<this.MultiDayAfterCloseData.length;++i){var r=this.MultiDayAfterCloseData[i];(null==a.Max||a.Max<r.VolMax)&&(a.Max=r.VolMax),(null==a.Min||a.Min>r.VolMin)&&(a.Min=r.VolMin)}t=a}if(ze.IsNonEmptyArray(this.MultiDayBeforeOpenData)){for(a={Max:null,Min:null},i=0;i<this.MultiDayBeforeOpenData.length;++i){r=this.MultiDayBeforeOpenData[i];(null==a.Max||a.Max<r.VolMax)&&(a.Max=r.VolMax),(null==a.Min||a.Min>r.VolMin)&&(a.Min=r.VolMin)}e=a}if(2==this.ShareAfterVol&&t&&e){var n=Math.max(t.Max,e.Max),s=Math.min(t.Min,e.Min);t.Max=e.Max=n,t.Min=e.Min=s}if(t)for(i=0;i<this.MultiDayAfterCloseData.length;++i){r=this.MultiDayAfterCloseData[i];r.VolMax=t.Max,r.VolMin=t.Min}if(e)for(i=0;i<this.MultiDayBeforeOpenData.length;++i){r=this.MultiDayBeforeOpenData[i];r.VolMax=e.Max,r.VolMin=e.Min}},this.UpdateHistoryMinuteUI=function(t){var e=this.HistoryMinuteDataToArray(this.DayData),a=new ut;if(a.Data=e,t&&(a.UpdateTime=t),this.SourceData=a,this.TradeDate=this.DayData[0].Date,this.PageInfo&&this.PageInfo.Enable){this.DayOffset.DayCount=this.DayData.length,-1==this.DayOffset.ShowDayCount&&(this.DayOffset.ShowDayCount=this.DayData.length),-8888==this.DayOffset.Offset&&(this.DayOffset.Offset=this.DayOffset.DayCount-this.DayOffset.ShowDayCount);var i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(i)}else{this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=this.DayData.length;i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(this.DayData.length)}var r=this.Symbol.toUpperCase(),n=this.DayData[0].YClose,s=Mr.IsFutures(r);ze.IsNumber(this.DayData[0].YClearing)&&s&&(n=this.DayData[0].YClearing),this.BindMainData(a,n),Mr.IsForeignExchange(r)&&(this.ChartPaint[1].Data=null);for(var o=0;o<this.Frame.SubFrame.length;++o){var h=this.Frame.SubFrame[o];for(var l in h.Frame.XSplitOperator.Symbol=this.Symbol,h.Frame.XSplitOperator.DayCount=i,h.Frame.XSplitOperator.DayData=this.DayData,h.Frame.XSplitOperator.Operator(),h.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.XSplitOperator.IsAfterData=this.IsAfterData,h.Frame.YSplitOperator.Symbol=this.Symbol,h.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.YSplitOperator.IsAfterData=this.IsAfterData,h.OverlayIndex){var u=h.OverlayIndex[l];u.Frame.XPointCount=h.Frame.XPointCount,u.Frame.MinuteCount=h.Frame.MinuteCount}}if(this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,this.ChartCorssCursor.StringFormatX.IsAfterData=this.IsAfterData,this.TitlePaint[0].IsShowDate=!0,this.UpdateDataOffset(),this.UpdateFrameMaxMin(),this.Frame.SubFrame.length>2){var c=new ut;c.Data=e;for(var d=2;d<this.Frame.SubFrame.length;++d)this.BindIndexData(d,c)}this.Frame.SetSizeChage(!0),this.Draw()},this.HistoryMinuteDataToArray=function(t){for(var e=[],a=t.length-1;a>=0;--a)for(var i=t[a],r=0;r<i.Data.length;++r)e.push(i.Data[r]);return e},this.UpdateLatestMinuteData=function(t,e,a){if(this.DayData){for(var i=0;i<this.DayData.length;++i){var r=this.DayData[i];if(r.Date===e)return r.Data=t,a&&ze.IsNumber(a.yclose)&&(r.YClose=a.yclose),void(a&&ze.IsNumber(a.yclearing)&&(r.YClearing=a.yclearing))}if(this.DayData.length>0&&this.DayData[0].Date<e){var n=new ut;n.Date=e,n.Data=t,a&&ze.IsNumber(a.yclose)&&(n.YClose=a.yclose),a&&ze.IsNumber(a.yclearing)&&(n.YClearing=a.yclearing),this.DayData.unshift(n)}}},this.UpdateLatestMinuteDataV2=function(t){if(this.DayCount>1){if(!this.DayData)return;for(var e=null,a=0;a<this.DayData.length;++a){var i=this.DayData[a];if(i.Date===date){e=i;break}}if(!e)return;var r=-1,n=t.Data[0];for(a=0;a<e.Data.length;++a){i=e.Data[a];if(i.Date==n.Date&&i.Time==n.Time){r=a;break}}r<0&&(r=e.Data.length);a=0;for(var s=r;a<t.Data.length;++a,++s){i=t.Data[a];e.Data[s]=i}}else{if(!this.SourceData)return;for(r=-1,n=t.Data[0],a=0;a<this.SourceData.Data.length;++a){i=this.SourceData.Data[a];if(i.Date==n.Date&&i.Time==n.Time){r=a;break}}r<0&&(r=this.SourceData.Data.length);for(a=0,s=r;a<t.Data.length;++a,++s){i=t.Data[a];this.SourceData.Data[s]=i}}},this.RequestMinuteData=function(){var t=this,e=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","minute","minutecount"],a=this.Symbol.toUpperCase();if(Mr.IsFutures(a)&&(e.push("clearing"),e.push("yclearing")),this.IsBeforeData=!1,this.IsShowBeforeData&&1===this.DayCount&&Mr.IsSHSZStockA(t.Symbol)&&(this.IsBeforeData=!0,e.push("before")),this.IsAfterData=!1,this.IsShowAfterData&&1===this.DayCount&&Mr.IsSHSZStockA(t.Symbol)&&(this.IsAfterData=!0),this.NetworkFilter){var i=null;if(this.DayCount>1){if(ze.IsNonEmptyArray(this.DayData)){var r=this.DayData[0];i=r.GetDateRange()}}else this.SourceData&&(i=this.SourceData.GetDateRange());var n={Before:this.IsShowBeforeData&&1===this.DayCount,After:this.IsShowAfterData&&1===this.DayCount},s={Name:"MinuteChartContainer::RequestMinuteData",Explain:"最新分时数据",Request:{Url:t.MinuteApiUrl,Data:{field:e,symbol:[t.Symbol],callcation:n},Type:"POST"},Self:this,PreventDefault:!1};if(i&&(s.DateRange=i),this.NetworkFilter(s,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)})),1==s.PreventDefault)return}$n.HttpRequest({url:t.MinuteApiUrl,data:{field:e,symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}})},this.RecvMinuteDataEvent=function(t){if(this.mapEvent.has(C.RECV_MINUTE_DATA)){var e=this.mapEvent.get(C.RECV_MINUTE_DATA),a={MinuteData:this.SourceData,Stock:{Symbol:this.Symbol,Name:this.Name},Option:t};e.Callback(e,a,this)}},this.UpdateLineColorData=function(t,e){if(this.ColorLineData){var a=this.ColorLineData.filter((function(t,a,i){return t.Date!=e}));if(ze.IsNonEmptyArray(t))for(var i in t)a.push(t[i]);this.ColorLineData=a}else this.ColorLineData=t},this.UpdateCallCationData=function(t,e){if(t&&ze.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var a=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1];a.Date==t.Date?this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1]=t:a.Date<t.Date&&this.MultiDayBeforeOpenData.push(t)}if(e&&ze.IsNonEmptyArray(this.MultiDayAfterCloseData)){a=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1];a.Date==e.Date?this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1]=e:a.Date<e.Date&&this.MultiDayAfterCloseData.push(e)}this.CaclutateCallCationYRange()},this.RecvUpdateMinuteData=function(t){var e=Pi.JsonDataToUpdateMinuteData(t),a=Pi.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=Pi.JsonDataToBeforeOpenData(t),r=Pi.JsonDataToAfterCloseData(t),n=Pi.JsonDataToMinuteLastUpdateTime(t);if(this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,e.date),this.UpdateLatestMinuteDataV2(e),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),void this.AutoUpdate();this.UpdateLatestMinuteDataV2(e);var s=this.SourceData,o=this.SourceData.Data;if(this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData.UpdateTime=n,this.Symbol=e.Symbol,this.Name=e.Name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var h=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),l=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=h,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=l}var u=e.YClose,c=this.Symbol.toUpperCase(),d=Mr.IsFutures(c);e.YClearing>0&&d&&(u=e.YClearing),this.CaclutateLimitPrice(u,e.LimitPrice);var f=null;if(e.High>0&&e.Low>0&&(f={High:e.High,Low:e.Low}),this.BindMainData(s,u,f),this.Frame.SubFrame.length>2){var C=new ut;C.Data=o;for(var m=2;m<this.Frame.SubFrame.length;++m)this.BindIndexData(m,C)}for(var D=0;D<this.Frame.SubFrame.length;++D){var p=this.Frame.SubFrame[D];if(p.Frame.XSplitOperator.Symbol=this.Symbol,p.Frame.XSplitOperator.DayCount=1,p.Frame.XSplitOperator.Operator(),p.Frame.YSplitOperator.Symbol=this.Symbol,ze.IsNonEmptyArray(p.OverlayIndex))for(var v=0;v<p.OverlayIndex.length;++v){var g=p.OverlayIndex[v];g.Frame.XPointCount=p.Frame.XPointCount,g.Frame.MinuteCount=p.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,Mr.IsSHSZ(c)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var S=this.GetChartMinuteInfo();S&&(S.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),this.AutoUpdate()},this.RecvMinuteData=function(t){if(t)if(1!=t.dataType){if(t.stock[0])if(t.stock[0].symbol!=this.Symbol&&this.EnableVerifyRecvData)l.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data symbol not match. HQChart[".concat(this.Symbol,"] , Recv[").concat(t.stock[0].symbol,"]"));else{var e=Pi.JsonDataToMinuteData(t),a=Pi.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=Pi.JsonDataToBeforeOpenData(t),r=Pi.JsonDataToAfterCloseData(t),n=Pi.JsonDataToMinuteLastUpdateTime(t);if(this.IsBeforeData&&(this.BeforeOpenData=i),this.IsAfterData&&(this.AfterCloseData=r),this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,t.stock[0].date),this.UpdateLatestMinuteData(e,t.stock[0].date,t.stock[0]),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),void this.AutoUpdate();var s=new ut;if(s.Data=e,s.UpdateTime=n,this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData=s,this.Symbol=t.stock[0].symbol,this.Name=t.stock[0].name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var o=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),h=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=o,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=h}var u=t.stock[0].yclose,c=this.Symbol.toUpperCase(),d=Mr.IsFutures(c);t.stock[0].yclearing>0&&d&&(u=t.stock[0].yclearing),this.CaclutateLimitPrice(u,t.stock[0].limitprice);var f=null;if(t.stock[0].high>0&&t.stock[0].low>0&&(f={High:t.stock[0].high,Low:t.stock[0].low}),this.BindMainData(s,u,f),this.Frame.SubFrame.length>2){var C=new ut;C.Data=e;for(var m=2;m<this.Frame.SubFrame.length;++m)this.BindIndexData(m,C)}for(var D in this.Frame.SubFrame){var p=this.Frame.SubFrame[D];for(var v in p.Frame.XSplitOperator.Symbol=this.Symbol,p.Frame.XSplitOperator.DayCount=1,p.Frame.XSplitOperator.Operator(),p.Frame.YSplitOperator.Symbol=this.Symbol,p.OverlayIndex){var g=p.OverlayIndex[v];g.Frame.XPointCount=p.Frame.XPointCount,g.Frame.MinuteCount=p.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,Mr.IsSHSZ(c)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var S=this.GetChartMinuteInfo();S&&(S.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData"}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),this.AutoUpdate()}}else this.RecvUpdateMinuteData(t);else l.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data is null")},this.CaclutateLimitPrice=function(t,e){if(this.LimitPrice=null,e&&e.max>0&&e.min>0)this.LimitPrice={Max:e.max,Min:e.min};else{var a=Mr.GetLimitPriceRange(this.Symbol,this.Name);a?t<=0||(this.LimitPrice={Max:t*(1+a.Max),Min:t*(1+a.Min)},l.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] ".concat(this.Symbol," yClose:").concat(t," max:").concat(this.LimitPrice.Max," min:").concat(this.LimitPrice.Min)),this.LimitPrice.Max=parseFloat(this.LimitPrice.Max.toFixed(2)),this.LimitPrice.Min=parseFloat(this.LimitPrice.Min.toFixed(2)),l.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] ".concat(this.Symbol," tofixed(2) max:").concat(this.LimitPrice.Max," min:").concat(this.LimitPrice.Min))):l.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] ".concat(this.Symbol," no limit price."))}},this.RequestOverlayMinuteData=function(){for(var t=this,e=this,a=this.TradeDate,i=function(){var i=t.OverlayChartPaint[r];return i.MainData&&i.MainYClose>0?i.Status!=xt.STATUS_NONE_ID?"continue":(n=i.Symbol,n?(i.Status=xt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"MinuteChartContainer::RequestOverlayMinuteData",Explain:"叠加股票最新分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:[a],symbol:n},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,(function(t){i.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,i)})),1==s.PreventDefault)?"continue":void $n.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:n,days:[a]},type:"post",dataType:"json",async:!0,success:function(t){i.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,i)}})):"continue"):"continue"},r=0;r<this.OverlayChartPaint.length;++r){var n,s;i()}},this.RecvMultiOverlayMinuteData=function(t){if(ze.IsNonEmptyArray(t)){for(var e=!1,a=0;a<t.length;++a){var i=t[a];if(i.symbol)for(var r=0;r<this.OverlayChartPaint.length;++r){var n=this.OverlayChartPaint[r];if(n.MainData&&n.MainYClose>0&&i.symbol==n.Symbol){this.RecvOverlayMinuteData(i,n,{Redraw:!1}),e=!0;break}}}e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RecvOverlayMinuteData=function(t,e,a){if(!e.IsDelete)if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)l.Chart.Warn("[MinuteChartContainer::RecvOverlayMinuteData] recv data symbol not match. paint[".concat(e.Symbol,"] , Recv[").concat(t.symbol,"]"));else{var i,r=Pi.JsonDataToMinuteDataArray(t),n=null;if(this.DayCount>1){if(r.length<=0)return;var s=r[0];for(var o in e.SourceData){var h=e.SourceData[o];if(h.Date==s.Date){e.SourceData[o]=s;var u=this.HistoryMinuteDataToArray(e.SourceData);n=new ut;n.Data=u,i=s.YClose;break}}if(null==n)return}else n=r.length>0?r[0]:new ut,i=n.YClose;e.Data=n,e.Title=t.name,e.Symbol=t.symbol,e.YClose=i,e.Status=xt.STATUS_FINISHED_ID;var c=!0;a&&0==a.Redraw&&(c=!1),c&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RequestOverlayHistoryMinuteData=function(){var t=this;if(ze.IsNonEmptyArray(this.DayData)){for(var e=this,a=[],i=0;i<this.DayData.length;++i){var r=this.DayData[i];a.push(r.Date)}if(!(a.length<=0)){var n=function(){var r=t.OverlayChartPaint[i];return s=r.Symbol,s?r.Status!=xt.STATUS_NONE_ID?"continue":(r.Status=xt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"MinuteChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票多日分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:a,symbol:s},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,(function(t){r.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)})),1==o.PreventDefault)?"continue":void $n.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:s,days:a},type:"post",dataType:"json",async:!0,success:function(t){r.Status=xt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)}})):"continue"};for(i=0;i<this.OverlayChartPaint.length;++i){var s,o;n()}}}},this.RecvOverlayHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)l.Chart.Warn("[MinuteChartContainer::RecvOverlayHistoryMinuteData] recv data symbol not match. paint[".concat(e.Symbol,"] , Recv[").concat(t.symbol,"]"));else if(ze.IsNonEmptyArray(this.DayData)){var a=Pi.JsonDataToMinuteDataArray(t);if(ze.IsNonEmptyArray(a)){for(var i=[],r=0;r<this.DayData.length;++r){for(var n=this.DayData[r],s=!1,o=0;o<a.length;++o)if(n.Date==a[o].Date){i.push(a[o]),s=!0;break}if(!s){var h=new ut;h.Date=n.Date,i.push(h)}}e.SourceData=i;var u=this.HistoryMinuteDataToArray(i),c=i[0].YClose,d=new ut;d.Data=u,e.Data=d,e.Title=t.name,e.Symbol=t.symbol,e.YClose=c,e.Status=xt.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=Mr.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout((function(){t.AutoUpdate()}),a):2==e&&(this.AutoUpdateTimer=setTimeout((function(){t.ResetOverlaySymbolStatus(),t.RequestMinuteData()}),a))}else this.AutoUpdateTimer=setTimeout((function(){t.AutoUpdate()}),2e4)}},this.BindIndexData=function(t,e){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e))},this.BindMainData=function(t,e,a){var i=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,r=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,n=new ut;if(n.Data=t.GetClose(),this.ChartPaint[0].Data=n,this.ChartPaint[0].YClose=e,this.ChartPaint[0].NotSupportMessage=null,this.ChartPaint[0].IsShowLead=!1,this.ChartPaint[0].LeadData=null,this.ChartPaint[0].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[0].AfterCloseData=this.AfterCloseData,this.ChartPaint[0].MultiDayBeforeOpenData=i,this.ChartPaint[0].MultiDayAfterCloseData=r,this.ChartPaint[0].ColorLineData=this.ColorLineData,this.ChartPaint[0].Source=t,Mr.IsSHSZIndex(this.Symbol)&&1==this.DayCount&&this.IsShowLead){var s=new ut;s.Data=t.GetLead(),this.ChartPaint[0].LeadData=s,this.ChartPaint[0].IsShowLead=!0}var o=this.Frame.SubFrame[0].Frame;for(var h in o.YSplitOperator.YClose=e,o.YSplitOperator.Data=n,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.SourceData=t,this.Frame.SubFrame){var l=this.Frame.SubFrame[h].Frame;l.Data=t}n=new ut,n.Data=t.GetMinuteAvPrice(),this.ChartPaint[1].Data=n;var u=this.Symbol.toUpperCase();for(var h in(Mr.IsForeignExchange(u)||Mr.IsShowAvPrice&&!Mr.IsShowAvPrice(u))&&(this.ChartPaint[1].Data=null),o.YSplitOperator.AverageData=n,o.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,o.YSplitOperator.LimitPrice=this.LimitPrice,o.YSplitOperator.MultiDayBeforeOpenData=i,o.YSplitOperator.MultiDayAfterCloseData=r,o.YSplitOperator.DayCount=this.DayCount,a?(o.YSplitOperator.High=a.High,o.YSplitOperator.Low=a.Low):(o.YSplitOperator.High=null,o.YSplitOperator.Low=null),this.ChartPaint[2].Data=t,this.ChartPaint[2].YClose=e,this.ChartPaint[2].Symbol=this.Symbol,this.ChartPaint[2].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[2].AfterCloseData=this.AfterCloseData,this.ChartPaint[2].MultiDayBeforeOpenData=i,this.ChartPaint[2].MultiDayAfterCloseData=r,this.Frame.SubFrame){l=this.Frame.SubFrame[h];l.Frame.YSplitOperator.BeforeOpenData=this.BeforeOpenData,l.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,l.Frame.YSplitOperator.AfterCloseData=this.AfterCloseData,l.Frame.YSplitOperator.IsAfterData=this.IsAfterData,l.Frame.YSplitOperator.MultiDayBeforeOpenData=i,l.Frame.YSplitOperator.MultiDayAfterCloseData=r}for(var h in Mr.IsShowMinutePostionLine(u)?this.BindOverlayPositionData(t,e):this.ClearBindOverlayPositionData(),this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].YClose=e,this.TitlePaint[0].BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].AfterCloseData=this.AfterCloseData,this.TitlePaint[0].MultiDayBeforeOpenData=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,this.TitlePaint[0].MultiDayAfterCloseData=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,this.TitlePaint[0].CallAcutionXOperator&&(this.TitlePaint[0].CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.TitlePaint[0].CallAcutionXOperator.MultiDayBeforeOpenData=i,this.TitlePaint[0].CallAcutionXOperator.MultiDayAfterCloseData=r,this.TitlePaint[0].CallAcutionXOperator.DayOffset=this.DayOffset),this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.YClose=e,this.ChartCorssCursor.StringFormatY.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatY.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatY.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatY.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatY.DayOffset=this.DayOffset,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.ChartCorssCursor.StringFormatX.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatX.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatX.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatX.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatX.DayOffset=this.DayOffset,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.CallAcutionXOperator.MultiDayBeforeOpenData=i,this.ChartCorssCursor.CallAcutionXOperator.MultiDayAfterCloseData=r,this.ChartCorssCursor.CallAcutionXOperator.DayOffset=this.DayOffset)),this.ExtendChartPaint[0]&&(this.ExtendChartPaint[0].Symbol=this.Symbol,this.ExtendChartPaint[0].Name=this.Name),this.OverlayChartPaint){l=this.OverlayChartPaint[h];l.MainData=this.ChartPaint[0].Data,l.MainYClose=e}},this.BindOverlayPositionData=function(t,e){var a=this;if(!(this.Frame.SubFrame.length<2)){for(var i=null,r=null,n=this.Frame.SubFrame[1],s=null,o=0;o<n.OverlayIndex.length;++o){var h=n.OverlayIndex[o];if("Position_Line_Frame"==h.Identify){s=h;break}}if(s){r=s.Frame;for(o=0;o<s.ChartPaint.length;++o){h=s.ChartPaint[o];if("Position-Line"==h.Name){i=h;break}}i||(i=new jt,i.Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=s.Identify,i.Color=xi.Minute.PositionColor,s.ChartPaint.push(i))}else{s=new Q,s.Identify="Position_Line_Frame",r="MinuteChartContainer"==this.ClassName?new Y:new X,r.Canvas=this.Canvas,r.MainFrame=n.Frame,r.ChartBorder=n.Frame.ChartBorder,r.GlobalOption=this.GlobalOption,s.Frame=r,r.YSplitOperator=new Je,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=r.ChartBorder,r.YSplitOperator.SplitCount=n.Frame.YSplitOperator.SplitCount,r.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},r.YSplitOperator.OverlayIdentify=s.Identify;i=new jt;i.Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=s.Identify,i.Color=xi.Minute.PositionColor,s.ChartPaint.push(i),n.OverlayIndex.push(s),n.Frame.RightFrame=r}var l=this.Frame.SubFrame[0].Frame.XPointCount;r.XPointCount=l,n.Frame.IsShowPositionTitle=!0;var u=new ut;u.Data=t.GetPosition(),i.Data=u}},this.ClearBindOverlayPositionData=function(){if(!(this.Frame.SubFrame.length<2)){var t=this.Frame.SubFrame[1];for(var e in t.Frame.RightFrame=null,t.Frame.IsShowPositionTitle=!1,t.OverlayIndex){var a=t.OverlayIndex[e];if("Position_Line_Frame"==a.Identify){t.OverlayIndex.splice(e,1);break}}}},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(ze.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.RecvOverlayIndex=function(t,e){var a=this.GetOverlayIndexByIdentify(t);if(null!=a){if(a.Script&&"function"==typeof a.RecvSubscribeData){var i=this.SourceData;i&&a.Script.RecvSubscribeData(e,this,a.WindowIndex,i)}}else console.warn("[MinuteChartContainer::RecvOverlayIndex] can't find overlay index. [identify=".concat(t,"]"))},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null!=e){var a=this.SourceData;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}else console.warn("[MinuteChartContainer::UpdateOverlayIndex] can't find overlay index. [identify=".concat(t,"]"))},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.SourceData;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,s=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{var o=new d;if(n=o.Get(a),!n&&(s=bi.Get(a),!s))return console.warn("[MinuteChartContainer::CreateOverlayIndex] can not find index[".concat(a,"]")),null}var h=this.Frame.SubFrame[i];h.Interval=this.OverlayIndexFrameWidth;var l=new Q;t.Identify&&(l.Identify=t.Identify);var u=null;if(u="MinuteChartContainer"==this.ClassName?new Y:new X,u.Canvas=this.Canvas,u.MainFrame=h.Frame,u.ChartBorder=h.Frame.ChartBorder,u.GlobalOption=this.GlobalOption,!0===t.ShowRightText?u.IsShow=!0:!1===t.ShowRightText&&(u.IsShow=!1),!0===t.IsShareY&&(u.IsShareY=!0),ze.IsBool(t.IsCalculateYMaxMin)&&(u.IsCalculateYMaxMin=t.IsCalculateYMaxMin),u.YSplitOperator=new Je,u.YSplitOperator.LanguageID=this.LanguageID,u.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),u.YSplitOperator.Frame=u,u.YSplitOperator.ChartBorder=u.ChartBorder,u.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,u.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},u.YSplitOperator.HQChart=this,u.YSplitOperator.OverlayIdentify=l.Identify,t.Frame){var c=t.Frame;c.Custom&&(u.YSplitOperator.Custom=c.Custom)}if(l.Frame=u,r){var f=new mn(r.Name,r.Script,r.Args,t,!0);f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},l.Script=f}else if(n){var C=n;t.Args&&(C.Args=t.Args);var m=new Cn(C.Name,C.Script,C.Args,C);m.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},l.Script=m}else{m=s.Create();m.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:i,Frame:l},m.Create(this,i),l.Script=m}return h.OverlayIndex.push(l),l},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.BindOverlayIndexData=function(t,e,a){t.Script&&("function"!=typeof t.Script.RequestData?"function"!=typeof t.Script.ExecuteScript?t.Script.BindData(this,e,a):t.Script.ExecuteScript(this,e,a):t.Script.RequestData(this,e,a))},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(!(a<3)){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};a.ID&&(i.ID=a.ID),t.push(i)}return t},this.OnTouchFinished=function(){!0!==this.CorssCursorTouchEnd||this.DrawDynamicInfo()},this.CreateExtendChart=function(t,e){var a;switch(t){case"MinuteTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Le,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"MinutePCTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Ee,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"画图工具":return a=new Oe,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"MinuteBackgroundPaint":return a=new Ve,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return a=we.Create(t),a?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.SetMinuteInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=cr.Get(t[a]);if(i){var r=i.Create();this.ChartInfo.push(r)}}1==e&&this.RequestMinuteInfoData()},this.GetChartMinuteInfo=function(){return this.ChartInfoPaint},this.CreateMinuteInfo=function(t){var e=new Zt;return e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.HQChartBorder=this.Frame.ChartBorder,e.ChartMinutePrice=this.ChartPaint[0],t&&e.SetOption&&e.SetOption(t),this.ChartInfoPaint=e,e},this.RequestMinuteInfoData=function(){if(!(this.ChartInfo.length<=0)){var t=this.GetChartMinuteInfo();for(var e in t||(t=this.CreateMinuteInfo(null)),t.SourceData=this.SourceData,this.ChartInfo)this.ChartInfo[e].RequestData(this)}},this.UpdataChartInfo=function(){var t=this.GetChartMinuteInfo();if(t){var e=new Map;for(var a in this.ChartInfo){var i=this.ChartInfo[a].Data;for(var r in i){var n=i[r],s="".concat(n.Date," ").concat(n.Time);e.has(s)?e.get(s).Data.push(n):e.set(s,{Data:new Array(n)})}}t.Data=e}},this.RecvWindowIndex=function(t,e){var a=this.WindowIndex[t];if(a&&"function"==typeof a.RecvSubscribeData){var i=this.SourceData;a.RecvSubscribeData(e,this,t,i)}},this.UpdateWindowIndex=function(t){if(!(t<2)){var e=this.SourceData;this.BindIndexData(t,e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=ba.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"==i.ClassName&&(i.HQChart=this)),!i&&ba.MapIonFont.has(t)){var n=ba.MapIonFont.get(t);i=new Ua,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=888888888,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var s=this;return i.Update=function(){s.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return s.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,l.Chart.Log("[MinuteChartContainer::CreateChartDrawPicture] ",t,this.CurrentChartDrawPicture),!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=ba.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=888888888,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),1==t.Draw&&this.DrawDynamicInfo(),i},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:888888888}))},this.CreateChartDrawPictureByStorage=function(){if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var t in this.ChartDrawStorageCache){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=ba.CreateChartDrawPicture(e);a&&(a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.UpdateXValue(),a.ValueToPoint(),"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a))}}this.ChartDrawStorageCache=null}},this.SetSizeChange=function(t){for(var e in this.Frame.SetSizeChage(t),this.ExtendChartPaint){var a=this.ExtendChartPaint[e];a.SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.GetDataIndexByPoint=function(t){var e=this.Frame;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame),e){var a=e.GetXData(t),i=parseInt(a.toFixed(0));return i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=this.PtInClient(t.XStart,t.YStart),a=this.PtInClient(t.XEnd,t.YEnd);t.StartClientPos=e,t.EndClientPos=a;var i=this.SourceData;if(!i)return!1;if(!ze.IsNonEmptyArray(i.Data))return!1;var r=this.GetDataIndexByPoint(t.XStart),n=this.GetDataIndexByPoint(t.XEnd);if(Math.abs(r-n)<2)return!1;t.Data=i;var s=i.DataOffset;r+=s,n+=s,r>n?(t.Start=n,t.End=r):(t.Start=r,t.End=n);var o=i.Data.length;return t.End>=o&&(t.End=o-1),!0},this.Super_UpdateFrameMaxMin=this.UpdateFrameMaxMin,this.UpdateFrameMaxMin=function(){if(this.Super_UpdateFrameMaxMin(),1==this.DayCount){var t=this.Frame.SubFrame[1];t.Frame&&(t.Frame.XYSplit=!0)}},this.ExportMainData=function(t,e){var a=t.ExportMinuteData(e);return a},this.DisplayLatest=function(){var t=this.GetEventCallback(C.ON_DISPLAY_LATEST);if(t){var e={PreventDefault:!1};if(t.Callback(t,e,this),e.PreventDefault)return}this.CursorIndex=null,this.LastPoint.X=0,this.LastPoint.Y=0,this.GlobalOption.IsDisplayLatest=!0,this.DrawDynamicInfo()},this.TryClickIndexTitle=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};l.Chart.Log("[MinuteChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(C.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1}}function Oi(t){this.newMethod=Pi,this.newMethod(t),delete this.newMethod,this.HistoryMinuteApiUrl="https://opensourcecache.zealink.com/cache/minuteday/day/",this.ClassName="HistoryMinuteChartContainer",this.CreateMainKLine=function(){var t=new Qt;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Minute-Line",t.Color=xi.Minute.PriceColor,this.ChartPaint[0]=t;var e=new Ft;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Average-Line",e.Color=xi.Minute.AvPriceColor,this.ChartPaint[1]=e;e=new bt;e.Color=xi.Minute.VolBarColor,e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[1].Frame,e.Name="Minute-Vol-Bar",this.ChartPaint[2]=e,this.TitlePaint[0]=new Ta,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].IsShowDate=!0},this.ChangeTradeDate=function(t){t&&(this.TradeDate=t,this.RequestData())},this.RequestData=function(){var t=new Date,e=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();e==this.TradeDate?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.RequestHistoryMinuteData=function(){var t=this,e=this.HistoryMinuteApiUrl+this.TradeDate.toString()+"/"+this.Symbol+".json";$n.HttpRequest({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)},error:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteError(e)}})},this.RecvHistoryMinuteError=function(t){if(404==t.status){var e=new ut;for(var a in this.SourceData=e,this.ChartPaint)this.ChartPaint[a].Data=e,0==a&&(this.ChartPaint[a].NotSupportMessage="没有权限访问!");this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=null,this.Draw()}},this.RecvHistoryMinuteData=function(t){var e=Oi.JsonDataToMinuteData(t),a=new ut;if(a.Data=e,this.TradeDate=t.date,this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(a,t.day.yclose),this.Frame.SubFrame.length>2){var i=new ut;i.Data=e;for(var r=2;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i)}this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function Ri(t){this.newMethod=Ni,this.newMethod(t),delete this.newMethod,this.ClassName="CustomKLineChartContainer",this.CustomKLineApiUrl=xi.Domain+"/API/IndexCalculate",this.CustomStock,this.QueryDate={Start:20180101,End:20180627},this.RequestHistoryData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),$n.HttpRequest({url:this.CustomKLineApiUrl,data:{stock:t.CustomStock,Name:t.Symbol,date:{startdate:t.QueryDate.Start,enddate:t.QueryDate.End}},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e)}})},this.RecvHistoryData=function(t){var e=Ni.JsonDataToHistoryData(t),a=new ut;a.Data=e,a.DataType=0;var i=new ut;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Right>0){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(ut.IsDayPeriod(this.Period,!1)){var n=a.GetPeriodData(i.Period);i.Data=n}this.SourceData=a,this.Name=t.name,this.BindMainData(i,this.PageSize);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function Bi(t,e){!0===e?(this.newMethod=ki,this.newMethod(t),delete this.newMethod):(this.newMethod=Ni,this.newMethod(t),delete this.newMethod),this.BuySellPaint,this.TrainDataCount=300,this.TrainStartDate,this.AutoRunTimer=null,this.BuySellData=[],this.TrainCallback,this.DragMode=1,this.IsAutoUpdate=!1,this.KLineSourceData,this.TrainInfo={Start:{},End:{}},this.Super_RecvFlowCapitalData=this.RecvFlowCapitalData,this.CreateBuySellPaint=function(){var t=new Te;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="KLine-Train-BuySell",this.ChartPaintEx[0]=t},this.GetKDataIndexByDateTime=function(t,e){if(!e||!t)return-1;for(var a=0;a<t.length;++a){var i=t[a];if(ut.IsMinutePeriod(this.Period,!0)){if(ze.IsNumber(this.TrainStartDate.Time)){if(i.Date>=this.TrainStartDate.Date&&i.Time>=this.TrainStartDate.Time)return a}else if(i.Date>=this.TrainStartDate.Date)return a}else if((ut.IsDayPeriod(this.Period,!0)||ut.IsTickPeriod(this.Period))&&i.Date>=this.TrainStartDate.Date)return a}return-1},this.AfterBindMainData=function(t){this.ChartPaintEx[0]||this.CreateBuySellPaint();var e=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=e;var a=e.Data[e.Data.length-1];this.TrainInfo.LastShowData=a,this.TrainInfo.LastData=this.SourceData.Data[this.SourceData.Data.length-1],"Update"!=t&&this.UpdateTrainUICallback("开始")},this.BeforeBindMainData=function(t){if("Update"!=t){this.KLineSourceData=new ut,this.KLineSourceData.Data=this.SourceData.Data.slice(0);var e=this.SourceData.Data.length,a=e-this.TrainDataCount-20,i=this.GetKDataIndexByDateTime(this.SourceData.Data,this.TrainStartDate);i>=0&&(a=i+1,e-a<this.TrainDataCount&&(this.TrainDataCount=e-a));var r=a-1,n=this.SourceData.Data[r];this.TrainInfo.Start.Index=r,this.TrainInfo.Start.Date=n.Date,this.TrainInfo.Start.Time=n.Time,this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,this.TrainInfo.LastData=n,this.SourceData.Data.length=a}},this.Run=function(t){if(!this.AutoRunTimer&&!(this.TrainDataCount<=0)){var e=this;this.AutoRunTimer=setInterval((function(){e.MoveNextKLineData(t)||clearInterval(e.AutoRunTimer)}),1e3)}},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=1;t&&t.Step>1&&(e=t.Step);for(var a=0,i=0;i<e;++i){var r=this.TrainInfo.End.Index+1;if(r>=this.KLineSourceData.Data.length)break;var n=this.KLineSourceData.Data[r];if(this.SourceData.Data.push(n),this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,--this.TrainDataCount,++a,this.TrainDataCount<=0)break}if(0==a)return!1;var s=this.Frame.GetCurrentPageSize();return ze.IsNumber(s)&&(this.PageSize=s-this.RightSpaceCount),t&&t.PageSize>0&&(this.PageSize=t.PageSize),this.Update(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.UpdateTrainUICallback=function(t){if(this.mapEvent.has(C.RECV_TRAIN_MOVE_STEP)){var e=this.mapEvent.get(C.RECV_TRAIN_MOVE_STEP);if(e.Callback){var a={TrainDataCount:this.TrainDataCount,BuySellData:this.BuySellData,KLine:{Start:{Index:this.TrainInfo.Start.Index,Date:this.TrainInfo.Start.Date},End:{Index:this.TrainInfo.End.Index,Date:this.TrainInfo.End.Date}},LastData:this.TrainInfo.LastData,LastShowData:this.TrainInfo.LastShowData};ze.IsNumber(this.TrainInfo.Start.Time)&&(a.KLine.Start.Time=this.TrainInfo.Start.Time),ze.IsNumber(this.TrainInfo.End.Time)&&(a.KLine.End.Time=this.TrainInfo.End.Time),t&&(a.Description=t),this.TrainDataCount<=0&&(a.Symbol=this.Symbol,a.Name=this.Name),e.Callback(e,a,this)}}},this.FinishTrainData=function(){l.Chart.Log("[KLineTrainChartContainer::FinishTrainData] trian end ")},this.Stop=function(){null!=this.AutoRunTimer&&clearInterval(this.AutoRunTimer),this.AutoRunTimer=null},this.BuyOrSell=function(t,e){var a=this.TrainInfo.LastShowData;if(!a)return!1;var i=this.ChartPaintEx[0];if(!i)return!1;var r=this.ChartPaint[0].Data;if(!r||r.Data.length<=0)return!1;var n=r.Data.length-1,s={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(s.Op=1);var o=n;s.Key=o,this.BuySellData.push(s),i.AddTradeItem(s),1==e&&this.Draw()},this.RestartTrain=function(t){l.Chart.Log("[KLineTrainChartContainer::RestartTrain] option ",t),this.TrainInfo={Start:{},End:{}},this.BuySellData=[],this.KLineSourceData=null;var e=this.ChartPaintEx[0];e&&(e.Data=null,e.ClearTradeData()),t.Symbol&&(this.Symbol=t.Symbol),ze.IsNumber(t.Period)&&(this.Period=t.Period),ze.IsNumber(t.Right)&&(this.Right=t.Right),t.Train&&(t.Train.DataCount>1&&(this.TrainDataCount=t.Train.DataCount),t.Train.DateTime&&(this.TrainStartDate=t.Train.DateTime));var a=this.Symbol;this.ChangeSymbol(a)},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0],a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new st;n.Date=r.date;var s=r.capital;s&&(s.a>0&&(n.Value=s.a,a.push(n)))}if(ut.IsMinutePeriod(this.Period,!0)){var o=this.SourceData.GetMinuteFittingFinanceData(a);for(var h in this.SourceData.Data){r=this.SourceData.Data[h];o[h]&&(r.FlowCapital=o[h].Value)}var l=this.ChartPaint[0].Data,u=new ut;if(u.Data=this.SourceData.Data,ut.IsMinutePeriod(l.Period,!1)){var c=u.GetPeriodData(l.Period);u.Data=c}l.Data=u.Data;o=this.KLineSourceData.GetMinuteFittingFinanceData(a);for(var d in this.KLineSourceData.Data){r=this.KLineSourceData.Data[d];o[d]&&(r.FlowCapital=o[d].Value)}}else{o=this.SourceData.GetFittingFinanceData(a);for(var f in this.SourceData.Data){r=this.SourceData.Data[f];o[f]&&(r.FlowCapital=o[f].Value)}l=this.ChartPaint[0].Data,u=new ut;if(u.Data=this.SourceData.Data,l.Right>0){var C=u.GetRightData(l.Right,{AlgorithmType:this.RightFormula});u.Data=C}if(ut.IsDayPeriod(l.Period,!1)){c=u.GetPeriodData(l.Period);u.Data=c}l.Data=u.Data;o=this.KLineSourceData.GetFittingFinanceData(a);for(var m in this.KLineSourceData.Data){r=this.KLineSourceData.Data[m];o[m]&&(r.FlowCapital=o[m].Value)}}this.FlowCapitalReady=!0;var D=!1;for(var p in this.ExtendChartPaint){r=this.ExtendChartPaint[p];if("StockChip"==r.ClassName){D=!0;break}}D&&this.Draw()}},this.AutoUpdate()}function _i(t,e){this.newMethod=Bi,this.newMethod(t,e),delete this.newMethod,this.IsHScreen=e,this.IsZoomLockRight=!0,this.RightSpaceCount=0,this.RecvFlowCapitalData=function(t){this.Super_RecvFlowCapitalData(t)},this.BeforeBindMainData=function(t){},this.UpdateLastDataIcon=function(){if(this.ChartPaintEx[0]){var t=this.ChartPaintEx[0];t.LastDataIndex=this.TrainInfo.End.Index}},this.AfterBindMainData=function(t){if(this.ChartPaintEx[0]||(this.CreateBuySellPaint(),this.ChartPaintEx[0].LastDataDrawType=1),"Update"!=t){var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=e.Data.length,i=a-this.TrainDataCount-20,r=this.Frame.SubFrame[0].Frame.XPointCount,n=this.GetKDataIndexByDateTime(e.Data,this.TrainStartDate);n>=0&&(i=n+1,a-i<this.TrainDataCount&&(this.TrainDataCount=a-i));var s=i-r;e.DataOffset=s;var o=i-1,h=e.Data[o];this.TrainInfo.LastShowData=h,this.TrainInfo.LastData=h,this.TrainInfo.Start.Index=o,this.TrainInfo.Start.Date=h.Date,this.TrainInfo.Start.Time=h.Time,this.TrainInfo.End.Index=o,this.TrainInfo.End.Date=h.Date,this.TrainInfo.End.Time=h.Time,this.UpdateLastDataIcon(),this.UpdateTrainUICallback("开始")}},this.Super_UpdataDataoffset=this.UpdataDataoffset,this.UpdataDataoffset=function(){this.Super_UpdataDataoffset();var t=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=t},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=1;t&&t.Step>1&&(a=t.Step);for(var i=e.Data.length,r=0,n=0;n<a;++n){var s=this.TrainInfo.End.Index+1;if(s>=i)break;var o=e.Data[s];if(this.TrainInfo.End.Index=s,this.TrainInfo.End.Date=o.Date,this.TrainInfo.End.Time=o.Time,--this.TrainDataCount,++r,this.TrainDataCount<=0)break}if(0==r)return!1;this.TrainInfo.LastShowData=o,this.TrainInfo.LastData=o;var h=this.TrainInfo.End.Index,l=this.Frame.SubFrame[0].Frame.XPointCount,u=h-l+1;return e.DataOffset=u,this.UpdateLastDataIcon(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.BuyOrSell=function(t,e){var a=this.TrainInfo.LastShowData;if(!a)return!1;var i=this.ChartPaintEx[0];if(!i)return!1;var r=this.ChartPaint[0].Data;if(!r||r.Data.length<=0)return!1;var n=this.TrainInfo.End.Index,s={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(s.Op=1);var o=n;s.Key=o,this.BuySellData.push(s),i.AddTradeItem(s),1==e&&this.Draw()},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if(t=parseInt(t/a),t<=0)return!1;var r=this.ChartOperator_Temp_GetHistroyData();if(!r)return!1;var n=0;if(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!n)return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var s=this.Frame.SubFrame[0].Frame;(s.DataWidth<=1||s.DistanceWidth<=1)&&ze.IsPlusNumber(this.StepPixel)&&(t=i*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{var o=this.TrainInfo.End.Index+1;if(n+r.DataOffset>=o)return!1;r.DataOffset+=t,r.DataOffset+n>=o&&(r.DataOffset=o-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.DataMoveRight=function(){var t=this.ChartOperator_Temp_GetHistroyData();if(!t)return!1;var e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!e)return!1;var a=this.TrainInfo.End.Index+1;return!(e+t.DataOffset>=a)&&(++t.DataOffset,!0)}}function ki(t){this.newMethod=Ni,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i};this.DrawDynamicInfo(r)},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=I();if(this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,r=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,r))return}var n={Click:{},LastMove:{}};n.Click.X=e.clientX,n.Click.Y=e.clientY,n.LastMove.X=e.clientX,n.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=n,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(t){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var e=this.JSChartContainer.MouseDrag;if(e){var a=Math.abs(e.LastMove.Y-t.clientY);if(1==this.JSChartContainer.DragMode){if(a<5)return;var i=this.JSChartContainer.GetMoveOneStepWidth();if(a<i)return;var r=!0;e.LastMove.Y<t.clientY&&(r=!1),this.JSChartContainer.DataMove(a,r)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,this.JSChartContainer.MouseDrag=null,this.JSChartContainer.CurrentChartDrawPicture=null,this.JSChartContainer=null}}},this.OnTouchStart=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.PhonePinch=null,this.IsOnTouch=!0,this.TouchDrawCount=0,this.StopDragTimer();var a=this.IsSingleTouch(e);if(e.cancelable&&e.preventDefault(),this.IsPhoneDragging(e)){var i=this.GetToucheData(e,!1),r=this.PointAbsoluteToRelative(i[0].clientX,i[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var n=r.X,s=r.Y;if(this.TryClickLock&&this.TryClickLock(n,s))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(n,s))return}if(this.ClickFrameButton){var o=this.Frame.PtInButtons(r.X,r.Y);if(o)return void this.ClickFrameButton(o,e)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(r.X,r.Y)&&(this.VerticalDrag.IsDrag=!0));var h=!0;this.ChartDrawOption.IsLockScreen?h=!1:this.DragMode==D.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(h=!1):this.DragMode==D.DISABLE_DRAG_ID?h=!1:a||(h=!1),this.VerticalDrag&&(h=!1);var l={Click:{},LastMove:{}};if(l.Click.X=i[0].clientX,l.Click.Y=i[0].clientY,l.LastMove.X=i[0].clientX,l.LastMove.Y=i[0].clientY,this.MouseDrag=l,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;return 2==u.Status?this.SetChartDrawPictureThirdPoint(l.Click.X,l.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(l.Click.X,l.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var c={};I();if(c.X=i[0].clientX-t.getBoundingClientRect().left,c.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(c)){c.ChartDrawPicture.Status=20,c.ChartDrawPicture.ValueToPoint(),c.ChartDrawPicture.MovePointIndex=c.PointIndex,c.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=c.ChartDrawPicture,this.SelectChartDrawPicture=c.ChartDrawPicture;var d=this.GetEventCallback(C.ON_CLICK_DRAWPICTURE);if(d&&d.Callback){var f={DrawPicture:c.ChartDrawPicture};d.Callback(d,f,this)}return void(e.cancelable&&e.preventDefault())}if(h){var m=this;this.DragTimer=setTimeout((function(){if(l.Click.X==l.LastMove.X&&l.Click.Y==l.LastMove.Y){m.MouseDrag;m.MouseDrag=null,m.MoveCorssCursor(l.Click,e)}}),m.PressTime)}this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==D.CLICK_TOUCH_MODE_ID||(this.DragMode==D.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(l.Click,e)):this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(l.Click,e):this.IsClickShowCorssCursor&&this.MoveCorssCursor(l.Click,e))}else if(this.IsPhonePinching(e)){var p={Start:{},Last:{}};i=this.GetToucheData(e,!1);p.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},p.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=p,this.SelectChartDrawPicture=null}this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){t.cancelable&&t.preventDefault();var e=this.GetToucheData(t,!1);if(this.IsPhoneDragging(t)){var a=this.MouseDrag;if(null==a)this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:e[0].clientX,Y:e[0].clientY},t);else{var i=Math.abs(a.LastMove.Y-e[0].clientY),r=Math.abs(a.LastMove.X-e[0].clientX),n=this.DragMode==D.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(n=!0!==this.VerticalDrag.IsDrag),this.CurrentChartDrawPicture){var s=this.CurrentChartDrawPicture;if(1==s.Status||2==s.Status){if(i<5&&r<5)return;this.SetChartDrawPictureSecondPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==s.Status)this.SetChartDrawPictureThirdPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==s.Status){if(i<5&&r<5)return;this.MoveChartDrawPicture(e[0].clientX-a.LastMove.X,e[0].clientY-a.LastMove.Y,!0)&&this.DrawDynamicInfo()}a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}else if(n){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(a.Click,t)}else if(1==this.DragMode||0==n){if(i<5)return;var o=this.GetMoveOneStepWidth();if(i<o)return;if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var h=!0;a.LastMove.Y<e[0].clientY&&(h=!1),this.DataMove(i,h)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=e[0].clientX,this.PhoneTouchInfo.End.Y=e[0].clientY)}else if(this.IsPhonePinching(t)){if(this.DragMode==D.DISABLE_DRAG_ID)return;var l=this.PhonePinch;if(!l)return;var u=Math.abs(e[0].pageX-e[1].pageX),c=Math.abs(l.Last.X-l.Last.X2),d=u-c;if(Math.abs(d)<5)return;if(d>0){var f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(f))return;this.CursorIndex=f.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}else{f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(f))return;this.CursorIndex=f.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}l.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}}},this.OnTouchEnd=function(t){if(l.Chart.Log("[KLineChartHScreenContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}this.IsOnTouch=!1,this.VerticalDrag=null,this.StopDragTimer(),this.TouchEvent({EventID:C.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.Create=function(t){var e=this;for(var a in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new ea,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=va.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=va.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new q,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var i=new Aa;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.UIElement.addEventListener("keydown",A,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new R;i.UIElement=this.UIElement;var r=B.Create("KLineHScreenFrame",{ID:a});if(r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new Ke,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=I();i.TopSpace=12*n,i.BottomSpace=12*n}else r.YSplitOperator=new Je,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double");r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new Qe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var s=r.HorizontalMin;s<=r.HorizontalMax;s+=1)r.HorizontalInfo[s]=new O,r.HorizontalInfo[s].Value=s,0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=s.toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new J;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}}}function Gi(t){this.newMethod=Pi,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r=this.PtInClient(t,e),n={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:r};this.DrawDynamicInfo(n)},this.Create=function(t){var e=this;for(var a in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new ea,this.ChartCorssCursor.PtInClient=function(t,a){return e.PtInClient(t,a)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=va.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=va.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.CallAcutionXOperator=new ta,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new q,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var i=new Aa;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",A,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new R;i.UIElement=this.UIElement;var r=new H;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243;var n=[9,8,7,6,5,4,3,2,1];for(var s in r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new $e,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.DayOffset=this.DayOffset,r.YSplitOperator.HQChart=this):(r.YSplitOperator=new Je,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new je,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.DayOffset=this.DayOffset,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator(),n)r.HorizontalInfo[s]=new O,r.HorizontalInfo[s].Value=n[s],0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=n[s].toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new J;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}}}function Vi(t){this.newMethod=S,this.newMethod(t),delete this.newMethod,this.ClassName="DepthChartContainer",this.Symbol,this.MapAsk=new Map,this.MapBid=new Map,this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.DefaultZoom=.8,this.MaxVolRate=1.1,this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new aa,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.HQChart=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new tt,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.ChartBorder.TitleHeight=0,this.Frame.Canvas=this.Canvas,this.Frame.Identify=0;var a=new Je;a.FrameSplitData=this.FrameSplitData.get("double"),a.LanguageID=this.LanguageID,a.Frame=this.Frame,a.SplitCount=5,a.LineType=3,a.IgnoreYValue=[0],a.ChartBorder=this.Frame.ChartBorder,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.YSplitOperator=a;var i=new qe;i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.LanguageID=this.LanguageID,i.LineType=3,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.XSplitOperator=i,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame;var r=new xe;r.Canvas=this.Canvas,r.ChartBorder=this.Frame.ChartBorder,r.ChartFrame=this.Frame,r.Name="深度图",this.ChartPaint.push(r);var n=!0;t&&!1===t.Wheel&&(n=!1,l.Chart.Log("[DepthChartContainer::Create] not register wheel event.")),this.UIElement.addEventListener("keydown",(function(t){e.OnKeyDown(t)}),!0),n&&this.UIElement.addEventListener("wheel",(function(t){e.OnWheel(t)}),!0)},this.OnWheel=function(t){l.Chart.Log("[KLineChartContainer::OnWheel]",t);var e,a=t.clientX-this.UIElement.getBoundingClientRect().left,i=t.clientY-this.UIElement.getBoundingClientRect().top;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),e=this.Canvas.isPointInPath(a,i);var r=t.wheelDelta;ze.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=!0;this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(n=!1),e&&r<0&&n?this.Frame.ZoomDown()&&(this.UpdateFrameMaxMin(),this.Draw()):e&&r>0&&n&&this.Frame.ZoomUp()&&(this.UpdateFrameMaxMin(),this.Draw()),t.preventDefault?t.preventDefault():t.returnValue=!1},this.UIOnMouseDown=function(t){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null;var e=this.IsSingleTouch(t);if(0!=this.EnableScrollUpDown&&e||t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a={Click:{},LastMove:{}},i=this.GetToucheData(t,this.IsForceLandscape);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,this.MouseDrag=a,this.MoveCorssCursor(a.Click,t)}else if(this.IsPhonePinching(t)){var r={Start:{},Last:{}};i=this.GetToucheData(t,this.IsForceLandscape);r.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},r.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=r}}},this.OnTouchMove=function(e){var a=this.GetToucheData(e,!1);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=I(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}else{var o=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),(l>0&&h<=3||o<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return;this.PreventTouchEvent(e),this.MouseDrag=null;r=I(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var u=this.PhonePinch;if(!u)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var c=Math.abs(a[0].pageY-a[1].pageY),d=Math.abs(u.Last.Y-u.Last.Y2),f=c-d,C=Math.abs(a[0].pageX-a[1].pageX),m=Math.abs(u.Last.X-u.Last.X2),D=C-m,p=this.ZoomStepPixel;if(Math.abs(f)<p&&Math.abs(D)<p)return;var v=f;if(Math.abs(f)<p&&(v=D),v>0){if(!this.Frame.ZoomUp())return;this.UpdateFrameMaxMin(),this.Draw()}else{if(!this.Frame.ZoomDown())return;this.UpdateFrameMaxMin(),this.Draw()}u.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)},this.OnTouchEnd=function(t){l.Chart.Log("[DepthChartContainer::OnTouchEnd]",t),this.IsOnTouch=!1,this.OnTouchFinished(),this.TouchDrawCount=0},this.OnTouchFinished=function(){!0!==this.CorssCursorTouchEnd||this.DrawDynamicInfo()},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.Symbol=t,this.MapBid=new Map,this.MapAsk=new Map,this.Frame.VerticalRange.Differ=null,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestDepthData()},this.RequestDepthData=function(){var t=this;if(this.NetworkFilter){var e={Name:"DepthChartContainer::RequestDepthData",Explain:"深度图数据",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDepthData(e),t.AutoUpdate()})),1==e.PreventDefault)return}},this.RecvDepthData=function(t){this.UpdateAskAndBid(t);var e=Array.from(this.MapAsk.values());e.sort((function(t,e){return t.Price-e.Price}));var a=0;for(var i in e){var r=e[i];a+=r.Vol,e[i]={Price:r.Price,Vol:a}}var n=Array.from(this.MapBid.values());n.sort((function(t,e){return e.Price-t.Price}));a=0;for(var i in n){r=n[i];a+=r.Vol,n[i]={Price:r.Price,Vol:a}}var s={Asks:e,Bids:n},o=this.ChartPaint[0];o.Data=s,this.Frame.XSplitOperator.Symbol=this.Symbol,this.ChartCorssCursor.Data=s,this.ChartCorssCursor.Symbol=this.Symbol,this.UpdateFramePriceList(),this.UpdateFrameMaxMin(),this.Draw()},this.UpdateAskAndBid=function(t){for(var e in"snapshot"==t.datatype&&(this.MapBid=new Map,this.MapAsk=new Map),t.asks){var a=t.asks[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapAsk.has(i)){var n=this.MapAsk.get(i);r<=0?this.MapAsk.delete(i):n.Vol=r}else r>0&&this.MapAsk.set(i,{Price:i,Vol:r})}for(var e in t.bids){a=t.bids[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapBid.has(i)){n=this.MapBid.get(i);r<=0?this.MapBid.delete(i):n.Vol=r}else r>0&&this.MapBid.set(i,{Price:i,Vol:r})}},this.UpdateFramePriceList=function(){var t=Array.from(this.MapAsk.keys()),e=Array.from(this.MapBid.keys());t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e}));var a={Max:88,Min:8};if(t.length>1&&e.length>1){var i=t[0],r=t[t.length-1],n=e[0],s=e[e.length-1],o=r-i,h=s-n,l=Math.max(o,h),u={Min:i,Max:i+l},c={Max:s,Min:s-l};a={Max:u.Max,Min:c.Min}}this.Frame.SetPriceList(t,e);var d=this.Frame.VerticalRange;d.Max=a.Max,d.Center=a.Min+(a.Max-a.Min)/2,d.Min=a.Min,d.MaxDiffer=l,d.Ask=u,d.Bid=c,ze.IsNumber(d.Differ)||(d.Differ=l*this.DefaultZoom),d.Min=d.Center-d.Differ,d.Max=d.Center+d.Differ},this.UpdateFrameMaxMin=function(){var t=this.ChartPaint[0].GetMaxMin();this.Frame.HorizontalMax=t.Max*this.MaxVolRate,this.Frame.HorizontalMin=0,this.Frame.XYSplit=!0},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=Mr.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout((function(){t.AutoUpdate()}),a):2==e&&(this.AutoUpdateTimer=setTimeout((function(){t.RequestDepthData()}),a))}}}}function Hi(t){this.newMethod=S,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new et,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart(),this.UIElement.addEventListener("keydown",A,!0)},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("BAR"==e.Type){var a=new te;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.UpBarColor=e.Color),e.Color2&&(a.DownBarColor=e.Color2),this.ChartPaint.push(a)}else if("LINE"==e.Type){a=new Ft;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.Color=e.Color),this.ChartPaint.push(a)}}this.Frame.YSplitOperator=new Je,this.Frame.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),this.Frame.YSplitOperator.Frame=this.Frame,this.Frame.YSplitOperator.ChartBorder=this.Frame.ChartBorder,this.Frame.XSplitOperator=new Ze,this.Frame.XSplitOperator.Frame=this.Frame,this.Frame.XSplitOperator.ChartBorder=this.Frame.ChartBorder}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){var e=0;for(var a in t.Data){var i=new ut;i.Data=t.Data[a],this.ChartPaint[a].Data=i,e<i.Data.length&&(e=i.Data.length)}this.Frame.XPointCount=e,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.XData=t.XData,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function Yi(t){this.Radius,this.newMethod=S,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new k,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl)for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("PIE"==e.Type){var a=new ye;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,this.Radius&&(a.Radius=this.Radius),this.ChartPaint.push(a)}else if("RADAR"==e.Type){a=new Ae;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.StartAngle&&(a.StartAngle=e.StartAngle),this.ChartPaint.push(a)}}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){for(var e in t.Data){var a=new ut;a.Data=t.Data[e],this.ChartPaint[e].Data=a}this.Frame.SetSizeChage(!0),this.Draw()}}function Xi(t){this.newMethod=S,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new k,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){var t=new be;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=this.MainDataControl.DataType[0].Name,this.Radius&&(t.Radius=this.Radius),this.ChartPaint.push(t)}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){this.ChartPaint[0].Data=t.Data[0],this.Frame.SetSizeChage(!0),this.Draw()}}function Wi(t,e){this.Name=t,this.Param=e,this.LineColor,this.ReqeustData=null}function Ui(t){this.Index,this.Name=t,this.Script=null,this.ClassName="BaseIndex",this.OverlayIndex=null,this.GetEventCallback,this.Status=0,this.Guid=b(),this.Create=function(t,e){},this.NotSupport=function(t,e,a){var i=this.IsOverlay();if(!i){t.DeleteIndexPaint(e);var r=t.Frame.SubFrame[e].Frame,n=new wt;n.Canvas=t.Canvas,n.ChartBorder=r.ChartBorder,n.ChartFrame=r,n.NotSupportMessage=a,t.ChartPaint.push(n)}},this.FormatIndexTitle=function(){var t=this.Name,e=null;for(var a in this.Index){var i=this.Index[a];null!=i.Param&&(e?e+=","+i.Param.toString():e=i.Param.toString())}return e&&(t+="("+e+")"),t},this.IsOverlay=function(){return!(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)},this.CreateChart=function(t){return new Ft},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[];for(var n in this.Index){var s=this.CreateChart(n);s.Color=this.Index[n].LineColor,s.Canvas=t.Canvas,s.Name=this.Name+"-"+n.toString(),s.ChartBorder=a.ChartBorder,s.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(s):t.ChartPaint.push(s),r.push(s)}return r},this.SendEvent=function(t,e,a,i){if(t.GetIndexEvent){var r=t.GetIndexEvent();if(r){var n={Data:this.GetOutData(),WindowIndex:e,Name:this.Name,HistoryData:a,Stock:{Symbol:t.Symbol,Name:t.Name}};i&&(n.Error=i),r.Callback(r,n,self)}}},this.GetOutData=function(){return null}}function zi(){this.newMethod=Ui,this.newMethod("OX"),delete this.newMethod,this.ClassName="JSIndex_OX",this.IsUsePageData=!0,this.BlockSize=.5,this.Arguments=[{Name:"Reversal",Value:3}],this.SetArgs=function(t){if(t&&ze.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"Reversal"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new ve;return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),r},this.CalculateBlockSize=function(t,e){var a=t-e;return a<=5?.25:a<=20?.5:a<=100?1:a<=200?2:a<=500?5:a<=1e3?10:50},this.Calculate=function(t,e){if(!t.ChartPaint[0])return null;var a=t.ChartPaint[0].ShowRange;if(!a)return null;if(!ze.IsNonEmptyArray(e.Data))return null;for(var i=null,r=null,n=null,s=a.Start;s<=a.End&&s<e.Data.length;++s){var o=e.Data[s];null==i?ze.IsNumber(o.High)&&(i=o.High):ze.IsNumber(o.High)&&i<o.High&&(i=o.High),null==r?ze.IsNumber(o.Low)&&(r=o.Low):ze.IsNumber(o.Low)&&r>o.Low&&(r=o.Low),null==n&&ze.IsNumber(o.High)&&(n=o.High)}var h=this.GetParamValue("Reversal"),l=this.CalculateBlockSize(i,r);this.BlockSize=l;for(var u={Max:i+l,Min:r-l,StartPrice:n,Data:[],BlockSize:l},c=1,d=n,f={Type:0,Data:[],Start:null,End:null},C=(s=a.Start,0);s<=a.End&&s<e.Data.length;++s){o=e.Data[s];if(1==c){if(o.High>=d+l){var m=parseInt((o.High-d)/l);for(C=0;C<m;++C)d+=l,f.Data.push(d)}else if(o.Low<=d-l*h){c=0,f&&ze.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:1,Data:[],Start:null,End:null};m=parseInt((d-o.Low)/l);for(C=0;C<m;++C)d-=l,f.Data.push(d)}}else if(o.Low<=d-l){m=parseInt((d-o.Low)/l);for(C=0;C<m;++C)d-=l,f.Data.push(d)}else if(o.High>=d+l*h){c=1,f&&ze.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:0,Data:[],Start:null,End:null};m=parseInt((o.High-d)/l);for(C=0;C<m;++C)d+=l,f.Data.push(d)}null==f.Start&&(f.Start=o),f.End=o}return f&&ze.IsNonEmptyArray(f.Data)&&u.Data.push(f),u},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay(),n=t.GetEventCallback(C.ON_CALCULATE_INDEX_OX);if(n&&n.Callback){var s={HQChart:t,WidnowIndex:e,HisData:a,OXData:null};n.Callback(n,s,this),i[0].OXData=s.OXData}else i[0].OXData=this.Calculate(t,a);var o=this.BlockSize,h=this.GetParamValue("Reversal"),l="".concat(this.Name," BlockSize=").concat(o," Reversal=").concat(h),u=e+1;if(r){var c=t.TitlePaint[u];c.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""})}else t.TitlePaint[u].Title=l;return!0}}function Ki(t){this.newMethod=Ui,this.newMethod("VRVR"),delete this.newMethod,this.ClassName="VolProfileVisibleRangeIndex",this.IsUsePageData=!0,this.ChartVolProfile,this.HQChart,this.WindowIndex,this.RequestTimer=null,this.DelayRequestFrequency=500,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.Arguments=[{Name:"VAVol",Value:70},{Name:"BarPosition",Value:0}],this.SetArgs=function(t){if(t&&ze.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];("VAVol"==a.Name||"BarPosition"==a.Name)&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},t&&(ze.IsNumber(t.VolType)&&(this.VolType=t.VolType),ze.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),ze.IsNumber(t.DelayRequestFrequency)&&(this.DelayRequestFrequency=t.DelayRequestFrequency),t.Args&&this.SetArgs(t.Args),ze.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition,this.SetParamValue("BarPosition",this.BarPosition))),this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.Create=function(t,e){this.HQChart=t,this.WindowIndex=e},this.CreateChart=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new ge;return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,n.HQChart=this.HQChart,n.Identify=this.Guid,n.SetOption(this),i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),this.ChartVolProfile=n,r},this.CancelRequestTimer=function(){this.RequestTimer&&(clearTimeout(this.RequestTimer),this.RequestTimer=null)},this.RequestData=function(t,e,a,i){var r=this;this.CancelRequestTimer();var n=function(){var e=t.ChartPaint[0],a=e.Data;if(a&&!ze.IsNonEmptyArray(!a.Data)){var i=e.DrawKRange;if(i&&ze.IsNumber(i.Start)&&ze.IsNumber(i.End)){var n=a.Data[i.Start],s=a.Data[i.End],o={Start:{Date:n.Date,DataIndex:i.Start},End:{Date:s.Date,DataIndex:i.End},Chart:r};ze.IsNumber(n.Time)&&(o.Start.Time=n.Time),ze.IsNumber(s.Time)&&(o.End.Time=s.Time),o.ValueAreaVol=r.Arguments[0].Value,r.Arguments[1].Value>0?r.BarPosition=1:r.BarPosition=0,r.ChartVolProfile&&r.ChartVolProfile.SetOption({BarPosition:r.BarPosition}),r.DataStatus=0,t&&t.RequestVolumeProfileData&&t.RequestVolumeProfileData(o)}}};return i&&1==i.Type?this.RequestTimer=setTimeout((function(){n()}),this.DelayRequestFrequency):n(),!0},this.OnRecvVolumeProfileData=function(t){return this.BindData(t),this.HQChart.UpdataDataoffset(),this.HQChart.UpdateFrameMaxMin(),this.HQChart.Draw(),!0},this.BindData=function(t){this.ChartVolProfile&&1!=this.ChartVolProfile.IsDestroy||this.CreateChart(this.HQChart,this.WindowIndex);var e=this.ChartVolProfile;if(e.Data=null,t&&ze.IsNonEmptyArray(t.Data)&&ze.IsNumber(t.MaxPrice)&&ze.IsNumber(t.MinPrice)){for(var a=0,i=0,r=null,n=0,s=0;n<t.Data.length;++n){var o=t.Data[n];for(i=0,s=0;s<o.Vol.length;++s){var h=o.Vol[s];ze.IsNumber(h.Value)&&(i+=h.Value)}a<i&&(a=i,r=o.Price)}if(!(this.maxVolPrice<=0||this.maxVol<=0)){e.MaxVolPrice=r,e.MaxVol=a,e.MaxPrice=t.MaxPrice,e.MinPrice=t.MinPrice,e.Data=t;var l=this.WindowIndex+1;this.HQChart.TitlePaint[l].Title="VPVR",this.HQChart.TitlePaint[l].Identify=this.Guid;var u=new ya(e.Data,"VPVR",e.Data);u.ChartClassName="ChartVolProfileVisibleRange",u.Chart=e,this.HQChart.TitlePaint[l].Data[0]=u}}}}function Ji(){this.newMethod=Ui,this.newMethod("CJL"),delete this.newMethod,this.Index=new Array(new Wi("VOL",null),new Wi("OPID",null)),this.Index[0].LineColor=xi.Index.LineColor[0],this.Index[1].LineColor=xi.Index.LineColor[1],this.CreateChart=function(t){if(0==t){var e=new Gt;return e}if(1==t){e=new Et;return e.LineWidth=1*I(),e}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;var n=a.GetVol(),s=a.GetPosition();i[0].HistoryData=a,i[0].Data.Data=n,i[1].Data.Data=s;var o=e+1;if(r){var h=t.TitlePaint[o];for(var l in h.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var u=new ya(i[l].Data,this.Index[l].Name,this.Index[l].LineColor);h.OverlayIndex.get(this.OverlayIndex.Identify).Data[l]=u}}else t.TitlePaint[o].Data[0]=new ya(i[0].Data,this.Index[0].Name,this.Index[0].LineColor),t.TitlePaint[o].Data[1]=new ya(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[o].Title=this.Name;return!0}}function Qi(){this.newMethod=Ui,this.newMethod("Long-Short"),delete this.newMethod,this.Index=new Array(new Wi("多头区域",null),new Wi("空头区域",null),new Wi("市场多空指标",null)),this.Index[0].LineColor=xi.UpBarColor,this.Index[1].LineColor=xi.DownBarColor,this.Index[2].LineColor=xi.Index.LineColor[0],this.LongShortData,this.CreateChart=function(t){if(2==t){var e=new Ft;return e.LineWidth=2,e}return new Kt},this.GetOutData=function(){return{LongShortData:this.LongShortData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):($n.HttpRequest({url:xi.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new st;n.Date=r[0],n.Value=r[1],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new ut;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.LongShortData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[2].Data.Data=this.LongShortData,i[0].Data.Data[0]=8,i[1].Data.Data[0]=1;var n=e+1;if(r){this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:9,Min:0,Count:3};var s=t.TitlePaint[n];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new ya(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);2!=o&&(h.DataType="StraightLine"),s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:9,Min:0,Count:3},i)t.TitlePaint[n].Data[o]=new ya(i[o].Data,this.Index[o].Name,this.Index[o].LineColor),2!=o&&(t.TitlePaint[n].Data[o].DataType="StraightLine");return!0}}function $i(){this.newMethod=Ui,this.newMethod("Market-Timing"),delete this.newMethod,this.Index=new Array(new Wi("因子择时",null)),this.TimingData,this.TitleColor=xi.FrameSplitTextColor,this.CreateChart=function(t){return new qt},this.GetOutData=function(){return{TimingData:this.TimingData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):($n.HttpRequest({url:xi.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new st;n.Date=r[0],n.Value=r[2],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new ut;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.TimingData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.TimingData,i[0].NotSupportMessage=null;var n=e+1;if(r){var s=t.TitlePaint[n];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new ya(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);h.StringFormat=xa.THOUSANDS,h.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in i)t.TitlePaint[n].Data[o]=new ya(i[o].Data,this.Index[o].Name,this.TitleColor),t.TitlePaint[n].Data[o].StringFormat=xa.THOUSANDS,t.TitlePaint[n].Data[o].FloatPrecision=0;return!0}}function ji(){this.newMethod=Ui,this.newMethod("Market-Attention"),delete this.newMethod,this.Index=new Array(new Wi("市场关注度",null)),this.Data,this.TitleColor=xi.FrameSplitTextColor,this.ApiUrl=xi.Index.MarketAttentionApiUrl,this.CreateChart=function(t){return new qt},this.GetOutData=function(){return{Data:this.Data}},this.SetFrame=function(t,e,a){var i=this.IsOverlay();i?this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}:t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):($n.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new st;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),s=new ut;s.Data=n,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),this.SetFrame(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=e+1;if(r){var s=t.TitlePaint[n];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new ya(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);h.StringFormat=xa.THOUSANDS,h.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in i)t.TitlePaint[n].Data[o]=new ya(i[o].Data,this.Index[o].Name,this.TitleColor),t.TitlePaint[n].Data[o].StringFormat=xa.THOUSANDS,t.TitlePaint[n].Data[o].FloatPrecision=0;return!0}}function Zi(){this.newMethod=Ui,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Wi("热度",5),new Wi("MA",10),new Wi("MA",null)),this.Data,this.ApiUrl=xi.Index.MarketHeatApiUrl,this.Index[0].LineColor=xi.FrameSplitTextColor,this.Index[1].LineColor=xi.Index.LineColor[0],this.Index[2].LineColor=xi.Index.LineColor[1],this.CreateChart=function(t){return 0==t?new qt:new Ft},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):($n.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new st;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),s=new ut;s.Data=n,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=wi.MA(this.Data,this.Index[0].Param);i[1].Data.Data=n;var s=wi.MA(this.Data,this.Index[1].Param);i[2].Data.Data=s;var o=e+1;if(r){var h=t.TitlePaint[o];for(var l in h.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param;var c=new ya(i[l].Data,u,this.Index[l].LineColor);c.StringFormat=xa.DEFAULT,c.FloatPrecision=2,h.OverlayIndex.get(this.OverlayIndex.Identify).Data[l]=c}}else for(var l in i){u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param,t.TitlePaint[o].Data[l]=new ya(i[l].Data,u,this.Index[l].LineColor),t.TitlePaint[o].Data[l].StringFormat=xa.DEFAULT,t.TitlePaint[o].Data[l].FloatPrecision=2}return!0}}function qi(){this.newMethod=Ui,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Wi("区域",3),new Wi("热度指数",10),new Wi("MA",5),new Wi("MA",10)),this.Data,this.ApiUrl=xi.Index.CustomIndexHeatApiUrl,this.Index[1].LineColor=xi.Index.LineColor[1],this.Index[2].LineColor=xi.Index.LineColor[2],this.Index[3].LineColor=xi.Index.LineColor[3],this.Create=function(t,e){for(var a in this.Index){var i=null;0==a?i=new Jt:(i=new Ft,i.Color=this.Index[a].LineColor),i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):($n.HttpRequest({url:this.ApiUrl,data:{stock:r.HQChart.CustomStock,date:{startdate:r.HQChart.QueryDate.Start,enddate:r.HQChart.QueryDate.End},day:[this.Index[0].Param,this.Index[1].Param]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(null==t.data||t.data.length<0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new st;n.Date=r[0],n.Value=r[1],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new ut;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.Data=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"热度1",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"热度2",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:.8,Color:"rgb(255,106,106)",Title:"热度3",TitleColor:"rgb(245,255 ,250)"},{Value:.8,Value2:1,Color:"rgb(208, 32 ,144)",Title:"热度4",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data;var r=wi.MA(this.Data,this.Index[2].Param);i[2].Data.Data=r;var n=wi.MA(this.Data,this.Index[3].Param);i[3].Data.Data=n,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};for(var s=e+1,o=1;o<i.length;++o){var h=this.Index[o].Name;"MA"==h&&(h="MA"+this.Index[o].Param),t.TitlePaint[s].Data[o]=new ya(i[o].Data,h,this.Index[o].LineColor),t.TitlePaint[s].Data[o].StringFormat=xa.DEFAULT,t.TitlePaint[s].Data[o].FloatPrecision=2}return t.TitlePaint[s].Title="热度("+this.Index[0].Param+","+this.Index[1].Param+","+this.Index[2].Param+","+this.Index[3].Param+")",!0}}function tr(){this.newMethod=Ui,this.newMethod("财务粉饰"),delete this.newMethod,this.Index=new Array(new Wi("区域",null),new Wi("系数",null)),this.Data,this.ApiUrl=xi.Index.StockHistoryDayApiUrl,this.Index[0].LineColor=xi.Index.LineColor[0],this.Index[1].LineColor="rgb(105,105,105)",this.CreateChart=function(t){return 0==t?new Jt:new Yt},this.GetOutData=function(){return{Data:this.Data}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};if(this.Data=[],2!=r.HQChart.Period)return this.NotSupport(r.HQChart,r.WindowIndex,"只支持月线"),r.HQChart.Draw(),this.SendEvent(t,e,a,"只支持月线"),!1;return $n.HttpRequest({url:this.ApiUrl,data:{symbol:[r.HQChart.Symbol],field:["finance.benford","announcement2.quarter","announcement1.quarter","announcement3.quarter","announcement4.quarter"],condition:[{item:["date","int32","gte","20130101"]},{item:["announcement1.year","int32","gte",0,"announcement2.year","int32","gte",0,"announcement3.year","int32","gte",0,"announcement4.year","int32","gte",0,"or"]}]},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0},this.JsonDataToMapSingleData=function(t){var e=t.stock[0].stockday,a=new Map;for(var i in e){var r=e[i],n=new st;if(n.Date=r.date,n.Value=new Array,null!=r.finance1&&null!=r.announcement1){var s=r.announcement1.year,o=r.announcement1.quarter,l=r.finance1.benford;n.Value.push({Year:s,Quarter:o,Value:l})}if(null!=r.finance2&&null!=r.announcement2){var u=r.announcement2.year,c=r.announcement2.quarter,d=r.finance2.benford;n.Value.push({Year:u,Quarter:c,Value:d})}if(null!=r.finance3&&null!=r.announcement3){var f=r.announcement3.year,C=r.announcement3.quarter,m=r.finance3.benford;n.Value.push({Year:f,Quarter:C,Value:m})}if(null!=r.finance4&&null!=r.announcement4){var D=r.announcement4.year,p=r.announcement4.quarter,v=r.finance4.benford;n.Value.push({Year:D,Quarter:p,Value:v})}a.set(n.Date,n)}var g,S=new Array,I=(0,h.default)(a);try{for(I.s();!(g=I.n()).done;){r=g.value;S.push(r[1])}}catch(T){I.e(T)}finally{I.f()}return S},this.RecvData=function(t,e){if(l.Chart.Log(t),!(null==t.stock||t.stock.length<=0)){var a=this.JsonDataToMapSingleData(t),i=e.HistoryData.GetFittingMonthData(a),r=new ut;r.Data=i,r.Period=e.HQChart.Period,r.Right=e.HQChart.Right,this.Data=r.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"安全区",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"预警区",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:1,Color:"rgb(255,106,106)",Title:"警示区",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};var r=e+1;return t.TitlePaint[r].Data[1]=new ya(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[r].Data[1].DataType="MultiReport",t.TitlePaint[r].Title=this.FormatIndexTitle(),!0}}function er(t,e,a,i){this.newMethod=Ui,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ApiUrl=xi.PyIndexDomain+"/hq/code",a&&(this.Arguments=a),this.RequestData=function(t,e,a){this.OutVar=[];var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a},n="";for(var s in this.Arguments){n.length>0&&(n+=",");var o=this.Arguments[s];n+='"'+o.Name+'":'+o.Value}n="{"+n+"}";var h=JSON.parse(n),l=JSON.stringify({code:this.Script,symbol:r.HQChart.Symbol,period:r.HQChart.Period,right:r.HQChart.Right,params:h,numcount:t.MaxRequestDataCount});return $n.HttpRequest({url:this.ApiUrl,data:l,type:"post",dataType:"json",contentType:" application/json; charset=utf-8",async:!0,success:function(t){i.RecvData(t,r)},complete:function(t){},error:function(t,e){i.RecvError(t,e,r)}}),!0},this.RecvError=function(t,e,a){l.Chart.Log("[PyScriptIndex::RecvError] error",e),a.HQChart.ScriptErrorCallback&&a.HQChart.ScriptErrorCallback(e)},this.RecvData=function(t,e){if(0!=t.code)return l.Chart.Log("[PyScriptIndex::RecvData] failed.",t),void(e.HQChart.ScriptErrorCallback&&e.HQChart.ScriptErrorCallback(t.msg));l.Chart.Log("[PyScriptIndex::RecvData] recv data.",t);var a=t.date;for(var i in t.data){for(var r=t.data[i],n=[],s=0;s<a.length&&s<a.length;++s)if(!(s>=r.data.length)){var o=new st;o.Date=a[s],o.Value=r.data[s],n.push(o)}var h=e.HistoryData.GetFittingData(n),u=new ut;u.Data=h,u.Period=e.HQChart.Period,u.Right=e.HQChart.Right;var c={Name:r.name,Type:r.graph,LineWidth:r.width,Data:u.GetValue(),Color:r.color};this.OutVar.push(c)}this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()},this.BindData=function(t,e,a){for(var i in t.DeleteIndexPaint(e),this.OutVar){var r=this.OutVar[i];switch(r.Type){case"line":this.CreateLine(t,e,r,i);break;case"colorstick":this.CreateColorStock(t,e,r,i);break}}var n=e+1;t.TitlePaint[n].Title=this.Name;var s="";for(var o in this.Arguments){var h=this.Arguments[o];s.length>0&&(s+=","),s+=h.Value.toString()}return s.length>0&&(t.TitlePaint[n].Title=this.Name+"("+s+")"),!0},this.CreateLine=function(t,e,a,i){var r=new Ft;r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=a.Color:r.Color=this.GetDefaultColor(i),a.LineWidth>0&&(r.LineWidth=a.LineWidth),0==a.IsShow&&(r.IsShow=!1);var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new ya(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateColorStock=function(t,e,a,i){var r=new qt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame;var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new ya(r.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(r)},this.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],a=parseInt(t);return e[a%(e.length-1)]}}function ar(t,e,a,i){this.newMethod=er,this.newMethod(t),delete this.newMethod,this.JsonData,i.JsonData&&(this.JsonData=i.JsonData),this.RequestData=function(t,e,a){if(this.JsonData){var i={HQChart:t,WindowIndex:e,HistoryData:a};this.JsonData.code=0;var r=this.JsonData;this.RecvData(r,i)}else console.warn("[PyScriptIndex::RequestData] JsonData is null"),i.HQChart.ScriptErrorCallback&&i.HQChart.ScriptErrorCallback("json 数据不能为空")}}function ir(){}function rr(){this.MaxRequestDataCount=1e3,this.StartDate=20160101,this.Data,this.ClassName="IKLineInfo",this.Explain="IKLineInfo",this.GetToday=function(){var t=new Date,e=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();return e},this.GetRequestData=function(t){var e={Symbol:t.Symbol,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Period:t.Period},a=null;return t.ChartOperator_Temp_GetHistroyData&&(a=t.ChartOperator_Temp_GetHistroyData()),a&&(e.DateRange=a.GetDateRange()),e},this.NetworkFilter=function(t,e){if(!t.NetworkFilter)return!1;var a=this,i={HQChart:t},r={Name:"".concat(this.ClassName,"::RequestData"),Explain:this.Explain,Request:this.GetRequestData(t),Self:this,HQChart:t,PreventDefault:!1};return e&&(1==e.Update&&(r.Update={Start:{Date:e.StartDate}},i.Update={Start:{Date:e.StartDate}}),r.CallFunctionName=e.FunctionName),t.NetworkFilter(r,(function(t){a.RecvData(t,i)})),1==r.PreventDefault}}function nr(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="InvestorInfo",this.Explain="互动易",this.RequestData=function(t,e){var a=this,i={HQChart:t};if(this.Data=[],!this.NetworkFilter(t,e)){var r={filed:["question","answerdate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},n=xi.Domain+xi.KLine.Info.Investor.ApiUrl;return $n.HttpRequest({url:n,data:r,type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0}},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new ht;r.Date=i.answerdate,r.Title=i.question,r.InfoType=ot.INVESTOR,this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function sr(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="AnnouncementInfo",this.Explain="公告",this.ApiType=1,this.RequestData=function(t,e){var a=this,i={HQChart:t};if(e&&!0===e.Update||(this.Data=[]),!this.NetworkFilter(t,e))if(1==this.ApiType){var r="".concat(xi.CacheDomain,"/cache/analyze/shszreportlist/").concat(i.HQChart.Symbol,".json");$n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}else{r=xi.Domain+xi.KLine.Info.Announcement.ApiUrl;$n.HttpRequest({url:r,data:{filed:["title","releasedate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}},this.RecvData=function(t,e){if(ze.IsNonEmptyArray(t.report)){for(var a=[],i=0;i<t.report.length;++i){var r=t.report[i],n=new ht;for(var s in n.Date=r.releasedate,n.Title=r.title,n.InfoType=ot.ANNOUNCEMENT,ze.IsNumber(r.time)&&(n.Time=r.time),r.type){var o=r.type[s];switch(o){case"一季度报告":n.InfoType=ot.ANNOUNCEMENT_QUARTER_1;break;case"半年度报告":n.InfoType=ot.ANNOUNCEMENT_QUARTER_2;break;case"三季度报告":n.InfoType=ot.ANNOUNCEMENT_QUARTER_3;break;case"年度报告":n.InfoType=ot.ANNOUNCEMENT_QUARTER_4;break}}for(var s in r.typeex){var h=r.typeex[s];n.InfoType=ot.ANNOUNCEMENT_EX_START+h;break}a.push(n)}!0===t.Update&&this.Data.length>0?this.UpdateData(a):this.Data=a,e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}},this.UpdateData=function(t){if(t&&!(t.length<=0)){var e=new Set;for(var a in this.Data){var i=this.Data[a],r="".concat(i.Date,"-").concat(i.Time,"-").concat(i.InfoType,"-").concat(i.Title);e.add(r)}var n=0;for(var a in t){i=t[a],r="".concat(i.Date,"-").concat(i.Time,"-").concat(i.InfoType,"-").concat(i.Title);e.has(r)||(this.Data.push(i),++n)}l.Chart.Log("[AnnouncementInfo::UpdateData] add new count=".concat(n))}},this.RecvError=function(t,e,a){console.warn("[AnnouncementInfo::RecvError] error, http ",e,t)}}function or(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="PforecastInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=xi.Domain+xi.KLine.Info.Pforecast.ApiUrl;return $n.HttpRequest({url:r,data:{field:["pforecast.type","pforecast.reportdate","fweek"],condition:[{item:["pforecast.reportdate","int32","gte",this.StartDate]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a];if(i.pforecast.length>0){var r=i.pforecast[0],n=new ht;n.Date=i.date,n.Title=r.type,n.InfoType=ot.PFORECAST,n.ExtendData={Type:r.type,ReportDate:r.reportdate},i.fweek&&(n.ExtendData.FWeek={},null!=i.fweek.week1&&(n.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(n.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(n)}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function hr(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="ResearchInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=xi.Domain+xi.KLine.Info.Research.ApiUrl;return $n.HttpRequest({url:r,data:{filed:["releasedate","researchdate","level","symbol","id","type"],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new ht;r.ID=i.id,r.Date=i.researchdate,r.InfoType=ot.RESEARCH,r.ExtendData={Level:i.level,Type:i.type},this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function lr(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="BlockTrading",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=xi.Domain+xi.KLine.Info.BlockTrading.ApiUrl;return $n.HttpRequest({url:r,data:{field:["blocktrading.price","blocktrading.vol","blocktrading.premium","fweek","price"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["blocktrading.vol","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new ht;r.Date=i.date,r.InfoType=ot.BLOCKTRADING,r.ExtendData={Price:i.blocktrading.price,Premium:i.blocktrading.premium,Vol:i.blocktrading.vol,ClosePrice:i.price},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function ur(){this.newMethod=rr,this.newMethod(),delete this.newMethod,this.ClassName="TradeDetail",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=xi.Domain+xi.KLine.Info.TradeDetail.ApiUrl;return $n.HttpRequest({url:r,data:{field:["tradedetail.typeexplain","tradedetail.type","fweek"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["tradedetail.type","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new ht;for(var n in r.Date=i.date,r.InfoType=ot.TRADEDETAIL,r.ExtendData={Detail:new Array},i.tradedetail){var s=i.tradedetail[n];r.ExtendData.Detail.push({Type:s.type,TypeExplain:s.typeexplain})}i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function cr(){}function dr(){this.Data,this.ClassName="IMinuteInfo"}function fr(){this.newMethod=dr,this.newMethod(),delete this.newMethod,this.ClassName="MarketEventInfo",this.RequestData=function(t){var e=this;this.Data=[];var a={HQChart:t},i=xi.CacheDomain+"/cache/analyze/shszevent/marketevent/concept/"+t.TradeDate+".json";if(t.NetworkFilter){var r={Name:"MarketEventInfo::RequestData",Explain:"大盘异动",Request:{Url:i,Type:"Get",Data:{Date:t.TradeDate,Symbol:t.Symbol}},Self:this,PreventDefault:!1};if(t.NetworkFilter(r,(function(t){e.RecvData(t,a),a.HQChart.UpdataChartInfo(),a.HQChart.Draw()})),1==r.PreventDefault)return}return $n.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,e){console.warn("[MarketEventInfo::RequestData] error, http ",e,t)}}),!0},this.RecvData=function(t,e){for(var a in t.event){var i=t.event[a];for(var r in i.data){var n=i.data[r];if(Array.isArray(n)){if(n.length<2)continue;var s={Date:i.date,Time:n[0],Title:n[1],Type:0};n.length>=3&&n[2]&&"string"==typeof n[2]&&(s.Color=n[2]),n.length>=4&&n[3]&&"string"==typeof n[3]&&(s.BGColor=n[3]),this.Data.push(s)}else{if(!ze.IsNumber(n.Date)||!ze.IsNumber(n.Time)||!n.Title)continue;s={Date:n.Date,Time:n.Time,Title:n.Title,Type:0};n.Color&&(s.Color=n.Color),n.BGColor&&(s.BGColor=n.BGColor),ze.IsNumber(n.Price)&&(s.Price=n.Price),n.Content&&(s.Content=n.Content),n.Link&&(s.Link=n.Link),this.Data.push(s)}}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}Ni.JsonDataToHistoryData=function(t){var e=[];if(!t.data)return e;var a=null;t.symbol&&(a=t.symbol.toUpperCase());a&&Mr.IsFutures(a);for(var i=t.data,r=v.KLINE_ORDERFLOW,n=v.KLINE_COLOR_DATA,s=v.KLINE_HEATMAP,o=v.KLINE_DAY_EXTENDDATA,h=0;h<i.length;++h){var l=new at,u=i[h];l.Date=u[0],l.Open=u[2],l.YClose=u[1],l.Close=u[5],l.High=u[3],l.Low=u[4],l.Vol=u[6],l.Amount=u[7],ze.IsNumber(u[8])&&(l.Position=u[8]),ze.IsNumber(u[9])&&(l.FClose=u[9]),ze.IsNumber(u[10])&&(l.YFClose=u[10]),ze.IsNumber(u[11])&&(l.BFactor=u[11]),ze.IsNumber(u[12])&&(l.AFactor=u[12]),ze.IsBool(u[13])&&(l.IsVirtual=u[13]),ze.IsBool(u[14])&&(l.IsNonTrade=u[14]),(ze.IsNumber(l.Open)||!0===l.IsVirtual)&&(u[r]&&(l.OrderFlow=u[r]),u[n]&&(l.ColorData=u[n]),u[o]&&(l.ExtendData=u[o]),u[s]&&(l.HeatMap=u[s]),e.push(l))}return e},Ni.JsonDataToRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),s=(Mr.IsSHSZ(n),new at);return s.Date=a.date,s.Open=a.open,s.YClose=a.yclose,s.High=a.high,s.Low=a.low,s.Vol=a.vol,s.Amount=a.amount,s.Close=a.price,ze.IsNumber(a.position)&&(s.Position=a.position),ze.IsNumber(a.yclearing)&&(s.YFClose=a.yclearing),ze.IsNumber(a.clearing)&&(s.FClose=a.clearing),ze.IsNumber(a.bfactor)&&(s.BFactor=a.bfactor),ze.IsNumber(a.afactor)&&(s.AFactor=a.afactor),a.colordata&&(s.ColorData=a.colordata),a.extendData&&(s.ExtendData=a.extendData),a.heatmapData&&(s.HeatMap=a.heatmapData),ze.IsBool(a.isvirtual)&&(s.IsVirtual=a.isvirtual),ze.IsBool(a.isnontrade)&&(s.IsNonTrade=a.isnontrade),s},Ni.JsonDataToMinuteRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),s=(Mr.IsSHSZ(n),Mr.IsFutures(n)),o=new Array,h=a.yclose,l=a.date;for(var i in s&&a.yclearing&&(h=a.yclearing),a.minute){var u=a.minute[i],c=new at;c.Close=u.price,c.Open=u.open,c.High=u.high,c.Low=u.low,c.Vol=u.vol,c.Amount=u.amount,u.date>0?c.Date=u.date:c.Date=l,c.Time=u.time,c.YClose=h,ze.IsNumber(u.position)&&(c.Position=u.position),ze.IsNumber(c.Close)||(c.Close=h,c.Open=c.High=c.Low=c.Close),ze.IsNumber(c.Open)||(c.Open=null),ze.IsNumber(c.Close)||(c.Close=null),ze.IsNumber(c.High)||(c.High=null),ze.IsNumber(c.Low)||(c.Low=null),ze.IsNumber(u.price)&&(h=u.price),o[i]=c}return o},Ni.JsonDataToMinuteRealtimeDataV2=function(t,e){if(!t||!t.overlay||!e)return null;for(var a=null,i=0;i<t.overlay.length;++i){var r=t.overlay[i];if(r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),s=(Mr.IsSHSZ(n),Mr.IsFutures(n),v.KLINE_ORDERFLOW),o=null;for(i=0;i<a.data.length;++i){r=new at;var h=a.data[i];r.Date=h[0],r.Open=h[2],r.YClose=h[1],r.Close=h[5],r.High=h[3],r.Low=h[4],r.Vol=h[6],r.Amount=h[7],r.Time=h[8],ze.IsNumber(h[9])&&(r.Position=h[9]),ze.IsNumber(r.YClose)||ze.IsNumber(o)&&(r.YClose=o),ze.IsNumber(r.Close)&&(o=r.Close),h[s]&&(r.OrderFlow=h[s]),aryMinuteData.push(r)}return aryMinuteData},Ni.JsonDataToMinuteHistoryData=function(t){var e=null;t.symbol&&(e=t.symbol.toUpperCase());e&&Mr.IsSHSZ(e);e&&Mr.IsFutures(e);for(var a=t.data,i=new Array,r=v.KLINE_ORDERFLOW,n=v.KLINE_COLOR_DATA,s=v.KLINE_HEATMAP,o=v.KLINE_MINUTE_EXTENDDATA,h=null,l=0;l<a.length;++l){var u=new at,c=a[l];u.Date=c[0],u.Open=c[2],u.YClose=c[1],u.Close=c[5],u.High=c[3],u.Low=c[4],u.Vol=c[6],u.Amount=c[7],u.Time=c[8],ze.IsNumber(c[9])&&(u.Position=c[9]),ze.IsNumber(c[10])&&(u.FClose=c[10]),ze.IsNumber(c[11])&&(u.YFClose=c[11]),ze.IsNumber(c[12])&&(u.BFactor=c[12]),ze.IsNumber(c[13])&&(u.AFactor=c[13]),ze.IsNumber(u.YClose)||ze.IsNumber(h)&&(u.YClose=h),ze.IsNumber(u.Close)&&(h=u.Close),c[r]&&(u.OrderFlow=c[r]),c[n]&&(u.ColorData=c[n]),c[o]&&(u.ExtendData=c[o]),c[s]&&(u.HeatMap=c[s]),i.push(u)}return i},Ni.JsonDataToTickData=function(t){var e=[];if(!t.detail)return e;var a=t.date,i=t.yclose;for(var r in t.detail){var n=new at,s=t.detail[r];s&&(n.Date=a,n.Time=s[0],n.Low=n.High=n.Close=n.Open=s[1],n.YClose=i,n.Vol=s[2],n.Amount=s[3],n.Flag=s[4],ze.IsNumber(n.Open)&&e.push(n))}return e},Ni.JsonDataToTickDataV2=function(t){var e=[];if(!ze.IsNonEmptyArray(t.data))return e;for(var a=0;a<t.data.length;++a){var i=new at,r=t.data[a];r&&(i.Date=r[0],i.Time=r[1],i.YClose=r[2],i.Low=i.High=i.Close=i.Open=r[3],e.push(i),r[4]&&(i.ExtendData=r[4]))}return e},Pi.JsonDataToBeforeOpenData=function(t){var e=t.stock[0].symbol,a=e.toUpperCase(),i=Mr.IsSHSZ(a),r=t.stock[0].yclose,n=t.stock[0],s=n.date,o={Data:[],TotalCount:15,Ver:1,Date:s},h=v.MINUTE_BEFOREOPEN_EXTENDDATA;if(n.beforeinfo&&(ze.IsNumber(n.beforeinfo.totalcount)&&(o.TotalCount=n.beforeinfo.totalcount),ze.IsNumber(n.beforeinfo.ver)&&(o.Ver=n.beforeinfo.ver)),1==o.Ver){if(ze.IsNonEmptyArray(n.before))for(var l=0;l<n.before.length;++l){var u=new rt,c=n.before[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.Price?r=u.Price:u.Price=r,u.Vol[0]=i?c[2]/100:c[2],u.Amount=c[3],ze.IsNumber(c[4])&&c[4]>19000101&&(u.Date=c[4]),u.DateTime="".concat(u.Date," ").concat(u.Time),o.Data.push(u)}}else if(2==o.Ver){var d=0;for(var l in n.before){u=new rt,c=n.before[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.Vol[0]=c[2],u.Vol[1]=c[3],u.ColorID=c[4],ze.IsNumber(c[6])&&(u.Date=c[6]),u.DateTime="".concat(u.Date," ").concat(u.Time,")");var f=u.Vol[0]+u.Vol[1];ze.IsNumber(c[5])&&(f=c[5]),f>d&&(d=f),c[h]&&(u.ExtendData=c[h]),o.Data.push(u)}o.VolMax=d,o.VolMin=0}else if(3==o.Ver){d=0;for(var l in n.before){u=new rt,c=n.before[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.AvPrice=c[2],u.Vol[0]=c[3],u.ColorID=c[4],u.DateTime=s.toString()+" "+u.Time.toString();f=u.Vol[0];ze.IsNumber(c[5])&&(f=c[5]),f>d&&(d=f),c[h]&&(u.ExtendData=c[h]),o.Data.push(u)}o.VolMax=d,o.VolMin=0}return o},Pi.JsonDataToAfterCloseData=function(t){t.stock[0].yclose;var e=t.stock[0],a=e.date;if(!e.afterinfo)return null;var i={Data:[],TotalCount:180,Ver:2,Date:a},r=e.afterinfo;ze.IsNumber(r.totalcount)&&(i.TotalCount=r.totalcount),ze.IsNumber(r.ver)&&(i.Ver=r.ver);var n=v.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==i.Ver)for(var s=0;s<e.after.length;++s){r=new nt;var o=e.after[s];r.Time=o[0],r.Date=a,r.Price=o[1],r.Vol[0]=o[2],r.Amount=o[3],ze.IsNumber(o[4])&&(r.Date=o[4]),r.DateTime="".concat(r.Date," ").concat(r.Time),i.Data.push(r)}else if(2==i.Ver){var h=0;for(var s in e.after){r=new nt,o=e.after[s];r.Time=o[0],r.Date=a,r.Price=o[1],r.Vol[0]=o[2],r.Vol[1]=o[3],r.ColorID=o[4],r.DateTime=a.toString()+" "+r.Time.toString();var l=r.Vol[0]+r.Vol[1];ze.IsNumber(o[5])&&(l=o[5]),l>h&&(h=l),o[n]&&(r.ExtendData=o[n]),i.Data.push(r)}i.VolMax=h,i.VolMin=0}else if(3==i.Ver){h=0;for(var s in e.after){r=new nt,o=e.after[s];r.Time=o[0],r.Date=a,r.Price=o[1],r.AvPrice=o[2],r.Vol[0]=o[3],r.ColorID=o[4],r.DateTime=a.toString()+" "+r.Time.toString();l=r.Vol[0];ze.IsNumber(o[5])&&(l=o[5]),l>h&&(h=l),o[n]&&(r.ExtendData=o[n]),i.Data.push(r)}i.VolMax=h,i.VolMin=0}return i},Pi.JsonDataToMinuteData=function(t,e){var a=t.stock[0].symbol,i=a.toUpperCase(),r=Mr.IsSHSZ(i),n=Mr.IsFutures(i),s=Mr.IsSHO(i),o=Mr.IsSZO(i),h=[],l=t.stock[0].yclose,u=t.stock[0].yclose,c=t.stock[0].yclose;if(n&&t.stock[0].yclearing&&(c=l=u=t.stock[0].yclearing),!ze.IsNonEmptyArray(t.stock[0].minute))return h;for(var d=t.stock[0].date,f=0;f<t.stock[0].minute.length;++f){var C=t.stock[0].minute[f],m=new it;m.Close=C.price,m.Open=C.open,m.High=C.high,m.Low=C.low,m.Vol=r?C.vol/100:C.vol,m.Amount=C.amount,C.date>0&&(d=C.date),m.DateTime=d.toString()+" "+C.time.toString(),m.Date=d,m.Time=C.time,(n||s||o||ze.IsNumber(C.position))&&(m.Position=C.position),m.Increase=C.increase,m.Risefall=C.risefall,m.AvPrice=C.avprice,ze.IsNumber(C.lead)&&(m.Lead=C.lead),ze.IsNumber(m.Close)||(m.Close=l,m.Open=m.High=m.Low=m.Close),m.AvPrice||(m.AvPrice=u),c&&m.Close&&(m.Increase=(m.Close-c)/c*100);var D=Math.abs(m.AvPrice-m.Close);r&&D>.13*m.Close&&(m.AvPrice=u),ze.IsNumber(C.price)&&(l=C.price),ze.IsNumber(C.avprice)&&m.AvPrice===C.avprice&&(u=C.avprice),C.ExtendData&&(m.ExtendData=C.ExtendData),h[f]=m}return h},Pi.JsonDataToUpdateMinuteData=function(t){if(!t||!t.stock)return null;var e=t.stock[0];if(!ze.IsNumber(e.date))return null;var a=t.stock[0].symbol,i=a.toUpperCase(),r=Mr.IsSHSZ(i),n={Date:e.date,Data:[],Symbol:a,Name:e.name},s=v.MINUTE_DAY_EXTENDDATA;if(ze.IsNumber(e.high)&&(n.High=e.high),ze.IsNumber(e.low)&&(n.Low=e.low),ze.IsNumber(e.yclose)&&(n.YClose=e.yclose),ze.IsNumber(e.YClearing)&&(n.YClearing=e.yclearing),ze.IsNonEmptyArray(t.stock[0].minute))for(var o=0;o<e.minute.length;++o){var h=e.minute[o],l=new it;l.Date=h[0],l.Time=h[1],l.Open=h[2],l.High=h[3],l.Low=h[4],l.Close=h[5],l.AvPrice=h[6],l.Vol=h[7],l.Amount=h[8],ze.IsNumber(h[9])&&(l.Increase=h[9]),ze.IsNumber(h[10])&&(l.Risefall=h[10]),ze.IsNumber(h[11])&&(l.Lead=h[11]),h[s]&&(l.ExtendData=h[s]),l.DateTime=l.Date.toString()+" "+l.Time.toString(),r&&(l.Vol=l.Vol/100),ze.IsNumber(n.YClose)&&l.Close&&(l.Increase=(l.Close-n.YClose)/n.YClose*100),n.Data.push(l)}return n},Pi.JsonDataToMinuteLineColorData=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];if(!e.linecolor||!ze.IsNonEmptyArray(e.linecolor.data))return null;var a=[];for(var i in e.linecolor.data){var r=e.linecolor.data[i];if(ze.IsNumber(r.type)&&ze.IsNumber(r.date)&&ze.IsNumber(r.start)&&ze.IsNumber(r.end)&&r.color&&!(r.start>=r.end)){var n={Type:r.type,Date:r.date,Start:r.start,End:r.end,Color:r.color};ze.IsPlusNumber(r.linewidth)&&(n.LineWidth=r.linewidth),a.push(n)}}return a},Pi.JsonDataToMinuteLastUpdateTime=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];return ze.IsNumber(e.date)&&ze.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},Pi.JsonDataToHistoryMinuteLastUpdateTime=function(t){if(!t||!t.updatetime)return null;var e=t.updatetime;return ze.IsNumber(e.date)&&ze.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},Pi.JsonDataToMinuteDataArray=function(t){var e=t.symbol,a=e.toUpperCase(),i=Mr.IsSHSZ(a),r=Mr.IsSHO(a),n=Mr.IsSZO(a),s=Mr.IsFutures(a),o=[],h=v.MINUTE_MULTI_DAY_EXTENDDATA;for(var l in t.data){var u=[],c=t.data[l],d=c.date,f=c.yclose,C=f,m=null,D=c.yclearing;for(var p in c.minute){var g=c.minute[p];g[2]&&(C=g[2]);var S=new it;if(S.Close=g[2],S.Open=g[1],S.High=g[3],S.Low=g[4],S.Vol=i?g[5]/100:g[5],S.Amount=g[6],7<g.length&&g[7]>0&&(S.AvPrice=g[7]),S.DateTime=d.toString()+" "+g[0].toString(),S.Date=d,S.Time=g[0],8<g.length&&g[8]>0&&(S.Date=g[8],S.DateTime=S.Date.toString()+" "+g[0].toString()),(s||r||n)&&9<g.length&&(S.Position=g[9]),ze.IsNumber(S.Close)||(S.Close=C,S.Open=S.High=S.Low=S.Close),!S.AvPrice&&m&&(S.AvPrice=m),S.Close&&f?S.Increase=(S.Close-f)/f*100:S.Increase=null,S.AvPrice&&i){var I=Math.abs(S.AvPrice-S.Close);I>.13*S.Close&&(S.AvPrice=m)}g.length>7&&g[7]>0&&S.AvPrice===g[7]&&(m=g[7]),g[h]&&(S.ExtendData=g[h]),u[p]=S}var T=new ut;T.Data=u,T.YClose=f,T.Close=c.close,T.Date=d,ze.IsNumber(D)&&(T.YClearing=D),o.push(T)}return o},Pi.JsonDataToHistoryMinuteLineColorData=function(t){if(!t)return null;var e=[];for(var a in t.data){var i=t.data[a];if(i.linecolor)for(var r in i.linecolor.data){var n=i.linecolor.data[r];if(ze.IsNumber(n.type)&&ze.IsNumber(n.date)&&ze.IsNumber(n.start)&&ze.IsNumber(n.end)&&n.color&&!(n.start>=n.end)){var s={Type:n.type,Date:n.date,Start:n.start,End:n.end,Color:n.color};ze.IsPlusNumber(n.linewidth)&&(s.LineWidth=n.linewidth),e.push(s)}}}return e.length>0?e:null},Pi.JsonDataToCallAuctionItem=function(t,e,a,i){var r=!1;if(i){var n=i.toUpperCase();r=Mr.IsSHSZ(n)}var s=e.Date,o=a?v.MINUTE_BEFOREOPEN_EXTENDDATA:v.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==e.Ver){var h=null;for(var l in t){var u=a?new rt:new nt,c=t[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.Price?h=u.Price:u.Price=h,u.Vol[0]=r?c[2]/100:c[2],u.Amount=c[3],ze.IsNumber(c[4])&&(u.Date=c[4]),u.DateTime="".concat(u.Date," ").concat(u.Time),e.Data.push(u)}}else if(2==e.Ver){var d=0;for(var l in t){u=a?new rt:new nt,c=t[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.Vol[0]=c[2],u.Vol[1]=c[3],u.ColorID=c[4],u.DateTime=s.toString()+" "+u.Time.toString();var f=u.Vol[0]+u.Vol[1];ze.IsNumber(c[5])&&(f=c[5]),f>d&&(d=f),c[o]&&(u.ExtendData=c[o]),e.Data.push(u)}e.VolMax=d,e.VolMin=0}else if(3==beforeOpenData.Ver){d=0;for(var l in t){u=a?new rt:new nt,c=t[l];u.Time=c[0],u.Date=s,u.Price=c[1],u.AvPrice=c[2],u.Vol[0]=c[3],u.ColorID=c[4],u.DateTime=s.toString()+" "+u.Time.toString();f=u.Vol[0];ze.IsNumber(c[5])&&(f=c[5]),f>d&&(d=f),c[o]&&(u.ExtendData=c[o]),e.Data.push(u)}e.VolMax=d,e.VolMin=0}},Pi.JosnDataToBeforeOpenDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.beforeinfo&&(ze.IsNumber(i.beforeinfo.totalcount)&&(r.TotalCount=i.beforeinfo.totalcount),ze.IsNumber(i.beforeinfo.ver)&&(r.Ver=i.beforeinfo.ver)),Pi.JsonDataToCallAuctionItem(i.before,r,!0,t.symbol),e.push(r)}return e.sort((function(t,e){return t.Date-e.Date})),e},Pi.JosnDataToAfterCloseDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.afterinfo&&(ze.IsNumber(i.afterinfo.totalcount)&&(r.TotalCount=i.afterinfo.totalcount),ze.IsNumber(i.afterinfo.ver)&&(r.Ver=i.afterinfo.ver)),Pi.JsonDataToCallAuctionItem(i.after,r,!1,t.symbol),e.push(r)}return e.sort((function(t,e){return t.Date-e.Date})),e},Oi.JsonDataToMinuteData=function(t){var e=[];for(var a in t.minute.time){var i=new it;t.minute.price[a]<=0&&a>0?(i.Close=e[a-1].Close,i.Open=e[a-1].Close,i.High=i.Close,i.Low=i.Close,i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=e[a-1].AvPrice):(i.Close=t.minute.price[a],i.Open=t.minute.open[a],i.High=t.minute.high[a],i.Low=t.minute.low[a],i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=t.minute.avprice[a]),i.Open<=0&&(i.Open=null),i.Close<=0&&(i.Close=null),i.AvPrice<=0&&(i.AvPrice=null),i.High<=0&&(i.High=null),i.Low<=0&&(i.Low=null),e[a]=i}return e},er.prototype.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],a=parseInt(t);return e[a%(e.length-1)]},ir.Get=function(t){var e=new Map([["互动易",{Create:function(){return new nr}}],["公告",{Create:function(){return new sr}}],["业绩预告",{Create:function(){return new or}}],["调研",{Create:function(){return new hr}}],["大宗交易",{Create:function(){return new lr}}],["龙虎榜",{Create:function(){return new ur}}]]);return e.get(t)},ir.GetClassInfo=function(t){var e=new Map([["互动易",{ClassName:"InvestorInfo"}],["公告",{ClassName:"AnnouncementInfo"}],["业绩预告",{ClassName:"PforecastInfo"}],["调研",{ClassName:"ResearchInfo"}],["大宗交易",{ClassName:"BlockTrading"}],["龙虎榜",{ClassName:"TradeDetail"}]]);return e.get(t)},ir.GetIconUrl=function(t){switch(t){case ot.INVESTOR:return xi.KLine.Info.Investor.Icon;case ot.PFORECAST:return xi.KLine.Info.Pforecast.Icon;case ot.ANNOUNCEMENT:return xi.KLine.Info.Announcement.Icon;case ot.ANNOUNCEMENT_QUARTER_1:case ot.ANNOUNCEMENT_QUARTER_2:case ot.ANNOUNCEMENT_QUARTER_3:case ot.ANNOUNCEMENT_QUARTER_4:return xi.KLine.Info.Announcement.IconQuarter;case ot.RESEARCH:return xi.KLine.Info.Research.Icon;case ot.BLOCKTRADING:return xi.KLine.Info.BlockTrading.Icon;case ot.TRADEDETAIL:return xi.KLine.Info.TradeDetail.Icon;default:return xi.KLine.Info.Announcement.Icon}},ir.GetIconLibrary=function(t){var e=xi.KLine.Info.IconLibrary;if(!e||!e.Icon)return xi.KLine.Info.Announcement.IconFont;if(t>=0&&t<e.Icon.length){var a=e.Icon[t],i={Text:a.Text,HScreenText:a.HScreenText,Color:a.Color,Family:e.Family};return i}return xi.KLine.Info.Announcement.IconFont},ir.GetIconFont=function(t){if(t>=ot.ANNOUNCEMENT_EX_START&&t<=ot.ANNOUNCEMENT_EX_END){var e=t-ot.ANNOUNCEMENT_EX_START;return ir.GetIconLibrary(e)}switch(t){case ot.INVESTOR:return xi.KLine.Info.Investor.IconFont;case ot.PFORECAST:return xi.KLine.Info.Pforecast.IconFont;case ot.ANNOUNCEMENT:return xi.KLine.Info.Announcement.IconFont;case ot.ANNOUNCEMENT_QUARTER_1:case ot.ANNOUNCEMENT_QUARTER_2:case ot.ANNOUNCEMENT_QUARTER_3:case ot.ANNOUNCEMENT_QUARTER_4:return xi.KLine.Info.Announcement.IconFont2;case ot.RESEARCH:return xi.KLine.Info.Research.IconFont;case ot.BLOCKTRADING:return xi.KLine.Info.BlockTrading.IconFont;case ot.TRADEDETAIL:return xi.KLine.Info.TradeDetail.IconFont;default:return xi.KLine.Info.Announcement.IconFont}},cr.InfoMap=new Map([["大盘异动",{Create:function(){return new fr}}]]),cr.Get=function(t){return cr.InfoMap.get(t)};var Cr=new function(){this.DataMap=new Map([["ChartPictureSettingMenu",{Create:function(t){return new br(t)}}],["ChartPictureTextSettingMenu",{Create:function(t){return new wr(t)}}]]),this.Create=function(t,e){if(!this.DataMap.has(t))return l.Warn("[DialogFactory::Create] can't find class=".concat(t,".")),null;var a=this.DataMap.get(t);return a.Create(e)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}};function mr(t){this.DivElement=t,this.ID=null,this.TimeOut=null,this.Hide=function(){$("#"+this.ID).hide()},this.Show=function(t,e,a,i){var r={display:"block"};ze.IsNumber(t)&&(r.left=t+"px"),ze.IsNumber(e)&&(r.top=e+"px"),ze.IsNumber(a)&&(r.width=a+"px"),ze.IsNumber(i)&&(r.height=i+"px"),$("#"+this.ID).css(r)}}function Dr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.Title={ID:b()},this.ParamList={ID:b()},this.ParamData=[],this.Identify,this.HQChart,this.IsOverlay=!1,this.IndexScript,this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-modifyindex-box",t.id=this.ID,t.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span></span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'><input/>MA</div>            <div class='parameter-footer'>                <button class='submit' >确定</button>                <button class='cancel' >取消</button>            </div>        </div>",this.DivElement.appendChild(t),$("#"+this.ID+" .submit").click({divBox:this},(function(t){t.data.divBox.Hide()}));var e=t.getElementsByTagName("span")[0];e.id=this.Title.ID;var a=t.getElementsByClassName("parameter-content")[0];a.id=this.ParamList.ID},this.SetTitle=function(t){$("#"+this.Title.ID).html(t)},this.ClearParamList=function(){$("#"+this.ParamList.ID).empty(),this.ParamData=[]},this.BindParam=function(){for(var t=0;t<this.IndexScript.Arguments.length;++t){var e=this.IndexScript.Arguments[t];if(null==e.Name||isNaN(e.Value))break;var a=b(),i='<input class="row-line" id="'+a+'" value="'+e.Value+'" type="number" step="1"/>'+e.Name+"<br>";$("#"+this.ParamList.ID).append(i),this.ParamData.push({ID:a,Value:e.Value})}var r=this;for(t=0;t<this.ParamData.length;++t){e=this.ParamData[t];$("#"+e.ID).mouseup({ParamIndex:t},(function(t){var e=parseInt($(this).val());if(ze.IsNumber(e)){var a=r.HQChart,i=r.Identify,n=t.data.ParamIndex,s=r.IndexScript,o=r.IsOverlay;s.Arguments[n].Value=e,o?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i)}else alert("参数不能为空")})),$("#"+e.ID).keyup({ParamIndex:t},(function(t){var e=parseInt($(this).val());if(ze.IsNumber(e)){var a=r.HQChart,i=r.Identify,n=t.data.ParamIndex,s=r.IndexScript,o=r.IsOverlay;s.Arguments[n].Value=e,o?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i)}else alert("参数不能为空")}))}},this.BindCancel=function(){var t=this;$("#"+this.ID+" .cancel");$("#"+this.ID+" .cancel").unbind("click").click((function(e){var a=t.HQChart,i=t.Identify;t.RestoreParam();var r=t.IsOverlay;r?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i),t.IndexScript=null,t.Hide()})),$("#"+this.ID+" #close").unbind("click").click((function(e){var a=t.HQChart,i=t.Identify,r=t.IsOverlay;t.RestoreParam(),r?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i),t.IndexScript=null,t.Hide()}))},this.RestoreParam=function(){if(this.IndexScript)for(var t=0;t<this.ParamData.length;++t){var e=this.ParamData[t];this.IndexScript.Arguments[t].Value=e.Value}},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ModifyIndexDialog,r=!0===t.data.IsOverlay;if(i){if(null==i.ID&&i.Create(),i.Identify=a,i.HQChart=e,i.IsOverlay=r,r){var n=e.GetOverlayIndexByIdentify(a);if(!n||!n.OverlayItem.Script)return;i.IndexScript=n.OverlayItem.Script,i.SetTitle(i.IndexScript.Name+" 叠加指标参数设置")}else i.IndexScript=e.WindowIndex[a],i.SetTitle(i.IndexScript.Name+" 指标参数设置");i.ClearParamList(),i.BindParam(e,a),i.BindCancel(),i.Show()}}}function pr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.DivElement=t,this.IndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.OverlayIndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.IsOverlayIndex=!1,this.Create=function(){var t=document.createElement("div");t.className="jchart-changeindex-box",t.id=this.ID=b(),t.innerHTML='<div class="target-panel">\n            <div class="target-header">\n                <span>换指标</span>\n                <strong class="close-tar icon iconfont icon-close"></strong>\n            </div>\n            <div class="target-content">\n                <div class="target-left">\n                    <input type="text">\n                    <ul></ul>\n                </div>\n                <div class="target-right">\n                    <ul></ul>\n                </div>\n            </div>\n        </div>',this.DivElement.appendChild(t)},this.ReqeustData=function(){if($("#"+this.ID+" .target-left ul li").length>0)return!1;var t=this.IndexTreeApiUrl;1==this.IsOverlayIndex&&(t=this.OverlayIndexTreeApiUrl),$n.HttpRequest({url:t,type:"get",success:function(t){var e=t.list;(function(t){$(".target-left ul").html(""),$.each(t,(function(t,e){var a;a="<li>"+e.node+"</li>",$(".target-left ul").append(a)})),$(".target-left ul li:first-child").addClass("active-list")})(e),function(t){var e,a=[];$.each(t,(function(t,e){a.push(e.list)})),$.each(a[0],(function(t,a){e="<li id="+a.id+">"+a.name+"</li>",$(".target-right ul").append(e)})),$(".target-left ul").delegate("li","click",(function(){$(this).addClass("active-list").siblings().removeClass("active-list");var t=$(this).index();$(".target-right ul").html(""),$.each(a[t],(function(t,a){e="<li id="+a.id+">"+a.name+"</li>",$(".target-right ul").append(e)}))}))}(e)}})},this.BindClose=function(t){$("#"+this.ID+" .close-tar").click({Chart:t},(function(t){var e=t.data.Chart;e.ChangeIndexDialog.Hide()}))},this.BindSearch=function(t){$(".target-left input").on("input",{Chart:t},(function(t){var e=new d,a=e.Search(t.target.value);for(var i in $(".target-right ul").html(""),a){var r=a[i],n="<li id="+r+">"+r+"</li>";$(".target-right ul").append(n)}}))},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ChangeIndexDialog,r=t.data.IsOverlay;i&&(null==i.ID&&i.Create(),i.IsOverlayIndex=r,i.ReqeustData(),function(){$(".target-right ul").undelegate().delegate("li","click",(function(){var t=$(this).attr("id");r?e.AddOverlayIndex({WindowIndex:a,IndexName:t}):e.ChangeIndex(a,t),$(this).addClass("active-list").siblings().removeClass("active-list")}))}(),i.BindSearch(e),i.BindClose(e),i.Show())}}function vr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.JSChart=null,this.Height=500,this.Width=600,this.Symbol,this.TradeDate,this.HistoryData,this.Show=function(t,e,a,i){var r=document.getElementById(this.ID);if(!r)return!1;var n=r.getElementsByClassName("minute-hqchart");if(!n||1!=n.length)return!1;var s=n[0];ze.IsNumber(a)&&(r.style.width=a+"px"),ze.IsNumber(i)&&(r.style.height=i+"px"),ze.IsNumber(t)&&(r.style.left=t+"px"),ze.IsNumber(e)&&(r.style.top=e+"px"),r.style.display="block";var o=s.offsetWidth,h=s.offsetTop;s.style.width=o+"px",s.style.height=i-h-5+"px"},this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-kline-minute-box",t.id=this.ID;var e=b();t.innerHTML="<div><div class='minute-dialog-title'><span></span><strong class='close-munite icon iconfont icon-close'></strong></div><div class='minute-hqchart' id='".concat(e,"' ></div></div>"),t.style.width=this.Height+"px",t.style.height=this.Width+"px",this.DivElement.appendChild(t),this.JSChart=f.Init(document.getElementById(e));var a={Type:"历史分钟走势图",Symbol:this.Symbol,IsAutoUpdate:!1,IsShowRightMenu:!1,HistoryMinute:{TradeDate:this.TradeDate,IsShowName:!1,IsShowDate:!1}};this.JSChart.SetOption(a)},this.BindClose=function(t){$("#"+this.ID+" .close-munite").click({Chart:t},(function(t){var e=t.data.Chart;e.MinuteDialog.Hide()}))},this.DoModal=function(t){this.UpColor=xi.UpTextColor,this.DownColor=xi.DownTextColor,this.UnchagneColor=xi.UnchagneTextColor;var e=t.data.Chart,a=t.data.Tooltip,i=e.MinuteDialog;if(i.Symbol=e.Symbol,i.TradeDate=a.Data.Date,i){null==i.ID?i.Create():(i.JSChart.JSChartContainer.TradeDate=i.TradeDate,i.JSChart.ChangeSymbol(this.Symbol));t.clientX,t.clientY;var r=I();i.Show(500/r,100/r,600,500),i.JSChart.OnSize(),this.BindClose(e),this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor};var n=t.data.Chart.Name,s=t.data.Tooltip.Data,o=(new Date(parseInt(s.Date/1e4),s.Date/100%100-1,s.Date%100),s.Date.toString()),h=o.substring(0,4)+"-"+o.substring(4,6)+"-"+o.substring(6,8),l="<span>"+n+"</span><span>"+h+"</span>&nbsp;<span style='color:"+this.GetColor(s.Open,s.YClose)+";'>开:"+s.Open.toFixed(2)+"</span><span style='color:"+this.GetColor(s.High,s.YClose)+";'>高:"+s.High.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Low,s.YClose)+";'>低:"+s.Low.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Close,s.YClose)+";'>收:"+s.Close.toFixed(2)+"</span><span style='color:"+this.VolColor+";'>量:"+ze.FormatValueString(s.Vol,2)+"</span><span style='color:"+this.AmountColor+";'>额:"+ze.FormatValueString(s.Amount,2)+"</span>";$(".minute-dialog-title span").html(l)}}}function gr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null,this.ID=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>分时图区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,$("#"+this.ID+" #close").click({divBox:this},(function(t){t.data.divBox.Close()}))},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Close,i.High=n.High,i.Low=n.Low),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low)}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.Open>0&&(i.Increase=(i.Close-i.Open)/i.Open*100,i.Amplitude=(i.High-i.Low)/i.Open*100);var s=Hr(this.SelectData.Symbol),o=ze.FormatDateString(i.Date.Start.Date),h=ze.FormatDateString(i.Date.End.Date);o+=" "+ze.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+ze.FormatTimeString(i.Date.End.Time,"HH:MM");var l="",u="",c="",d="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(d="BtnBackground");var f=document.createElement("div");f.className="jchart-select-table-right",f.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+o+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+d+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.Open.toFixed(s)+"</span></td>               <td><strong>终止价: </strong><span>"+i.Close.toFixed(s)+"</span></td>               <td><strong>均价: </strong><span>"+(ze.IsNumber(i.AvPrice)?i.AvPrice.toFixed(s):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(s)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(s)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+ze.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+ze.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+ze.FormatValueString(i.Amount,2)+"元</span></td></tr>\n        </table>",$(".parameter-content").html(f),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&$(".jchart-select-date .start-date-left").click((function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.Start<t.SelectData.End&&($(".jchart-select-date .start-date-right").click((function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),$(".jchart-select-date .end-date-left").click((function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}))),t.SelectData.End<t.SelectData.Data.Data.length-1&&$(".jchart-select-date .end-date-right").click((function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}))},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()}}function Sr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>            <button id='match' class='submit' >形态匹配</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,$("#"+this.ID+" #close").click({divBox:this},(function(t){t.data.divBox.Close()})),$("#"+this.ID+" #match").click({divBox:this},(function(t){t.data.divBox.KLineMatch()}))},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,YClose:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0,KLine:{Up:0,Down:0,Unchanged:0}},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Open,i.High=n.High,i.Low=n.Low,i.YClose=n.YClose),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low),n.Close>n.Open?++i.KLine.Up:n.Close<n.Open?++i.KLine.Down:++i.KLine.Unchanged}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.YClose>0&&(i.Increase=(i.Close-i.YClose)/i.YClose*100,i.Amplitude=(i.High-i.Low)/i.YClose*100);var s=Hr(this.SelectData.Symbol),o=ze.FormatDateString(i.Date.Start.Date),h=ze.FormatDateString(i.Date.End.Date);ut.IsMinutePeriod(this.HQChart.Period)?(o+=" "+ze.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+ze.FormatTimeString(i.Date.End.Time,"HH:MM")):(ut.IsSecondPeriod(this.HQChart.Period)||ut.IsTickPeriod(this.HQChart.Period))&&(o+=" "+ze.FormatTimeString(i.Date.Start.Time,"HH:MM:SS"),h+=" "+ze.FormatTimeString(i.Date.End.Time,"HH:MM:SS"));var l="",u="",c="",d="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(d="BtnBackground");var f=document.createElement("div");f.className="jchart-select-table-right",f.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+o+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+d+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.YClose.toFixed(s)+"</span></td>               <td><strong>最终价: </strong><span>"+i.Close.toFixed(s)+"</span></td>               <td><strong>均价: </strong><span>"+(ze.IsNumber(i.AvPrice)?i.AvPrice.toFixed(s):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(s)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(s)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+ze.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+ze.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+ze.FormatValueString(i.Amount,2)+"元</span></td></tr>\n            <tr><td><strong>阴线: </strong><span>"+i.KLine.Up+"</span></td>               <td><strong>阳线: </strong><span>"+i.KLine.Down+"</span></td>               <td><strong>平线: </strong><span>"+i.KLine.Unchanged+"</span></td></tr>\n        </table>",$(".parameter-content").html(f),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&$(".jchart-select-date .start-date-left").click((function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.Start<t.SelectData.End&&($(".jchart-select-date .start-date-right").click((function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),$(".jchart-select-date .end-date-left").click((function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}))),t.SelectData.End<t.SelectData.Data.Data.length-1&&$(".jchart-select-date .end-date-right").click((function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}))},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()},this.KLineMatch=function(t){var e=new Tr(this.DivElement);e.DoModal({data:{Title:"计算中......",Chart:this.HQChart}}),this.Close();var a=this.HQChart,i={Scope:{Plate:["CNA.ci"],Minsimilar:.9},WaitDialog:e};a.RequestKLineMatch(this.SelectData,i)}}function Ir(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.MatchData,this.Sample,this.Dialog,this.HQChart,this.PageData,this.Close=function(){this.DivElement.removeChild(this.Dialog)},this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-kline-match-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>形态匹配</span>\n                <strong id='close' class='icon iconfont icon-close'></strong>\n            </div>\n            <div class='parameter-content'>\n                <p class='dataCount'></p>\n                <table class='matchTable'>\n                    <thead>\n                        <tr>\n                            <td>股票名称</td>\n                            <td>匹配度</td>\n                            <td>时间段</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n                <div class='pagination' data-current='1'></div>\n            </div>\n            <div class='parameter-footer'>\n                <button id='close' class='submit' >确定</button>\n            </div>\n        </div>".trim(),this.DivElement.appendChild(t),this.Dialog=t,$("#"+this.ID+" #close").click({divBox:this},(function(t){t.data.divBox.Close()}))},this.BindData=function(){l.Chart.Log("[KLineMatchDialog::BindData] 形态源: ".concat(this.Sample.Stock.Name," 区间:").concat(this.Sample.Date.Start," - ").concat(this.Sample.Date.End));var t=this.MatchData.length+1,e={NewData:{},MetaData:[],PageCount:0,Count:t},a=0;$("#"+this.ID+" .dataCount").html("个数："+t);for(var i=0;i<t;i++){var r={};if(0==i)r={Symbol:this.Sample.Stock.Symbol,Name:this.Sample.Stock.Name,Rate:"形态源",Color:"red",Date:"".concat(this.Sample.Date.Start,"-").concat(this.Sample.Date.End)};else{var n=this.MatchData[i-1];r={Symbol:n.Symbol,Name:n.Name,Rate:Number(100*n.Similar).toFixed(2),Color:"",Date:"".concat(n.Start,"-").concat(n.End)}}e.MetaData.push(r)}a=e.Count%10==0?e.Count/10:Math.floor(e.Count/10)+1,e.PageCount=a,this.PaginationMetaData(e),this.PageData=e,l.Chart.Log("[KLineMatchDialog::DoModal pageData]",e),this.RenderDom(1),this.PaginationInit("#"+this.ID,e.PageCount,this.paginationCallback)},this.RenderDom=function(t){var e=this.PageData.NewData[t];l.Chart.Log("[KLineMatchDialog::RenderDom currentPageData]",e);for(var a="",i=0;i<e.length;i++)a+="<tr>\n                        <td class=".concat(e[i].Color,">").concat(e[i].Name,"</td>\n                        <td class=").concat(e[i].Color,">").concat(e[i].Rate,"</td>\n                        <td class=").concat(e[i].Color,">").concat(e[i].Date,"</td>\n                    </tr>").trim();$("#"+this.ID+" .matchTable tbody").html(a)};var e=this;this.paginationCallback=function(t){e.RenderDom(t),e.PaginationInit("#"+e.ID,e.PageData.PageCount,e.paginationCallback)},this.PaginationInit=function(t,e,a){var i="",r=$(t+" .pagination").data("current"),n=0;if(r<5)if(e>=5)for(var s=0;s<5;s++)i+=s+1!=r?"<span>"+(s+1)+"</span>":"<span class='active'>"+(s+1)+"</span>";else for(s=0;s<e;s++)i+=s+1!=r?"<span>"+(s+1)+"</span>":"<span class='active'>"+(s+1)+"</span>";else{n=r+1>e?r:r+1;for(var o=r-3;o<=n;o++)i+=o!=r?"<span>"+o+"</span>":"<span class='active'>"+o+"</span>"}i="<span class='beforePage'>上一页</span>"+i+"<span class='nextPage'>下一页</span>",$(t+" .pagination").html(i),$(t+" .pagination span").bind("click",{maxpage:e,Callback:a},this.PaginationCurrentIndex)},this.PaginationCurrentIndex=function(t){var e=$(this).text();l.Chart.Log("[::PaginationCurrentIndex text]",e);var a=Number($(this).parent().data("current")),i=t.data.maxpage,r=t.data.Callback,n=1;n="上一页"===e?1===a?a:a-1:"下一页"===e?a===i?a:a+1:Number(e),$(this).parent().data("current",n),r(n)},this.PaginationMetaData=function(t){for(var e={},a=t.MetaData,i=t.PageCount,r=0;r<i;r++){for(var n=[],s=0;s<10;s++){var o=10*r+s;if(!(o<=a.length-1))break;var h=a[o];n.push(h)}e[r+1]=n}t.NewData=e},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.MatchData=t.data.MatchData,this.Sample=t.data.Sample,this.HQChart=e,this.BindData();var a=e.Frame.ChartBorder,i=(w(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,200)}}function Tr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.Title="加载中......",this.Dialog,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null)},this.SetTitle=function(t){this.Title=t,this.Dialog},this.Create=function(){this.ID=b();var t=document.createElement("div");t.className="jchart-wait-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>".concat(this.Title,"</span>\n            </div>\n        </div>").trim(),this.DivElement.appendChild(t),this.Dialog=t},this.DoModal=function(t){this.Title=t.data.Title;var e=t.data.Chart;null==this.ID&&this.Create();var a=e.Frame.ChartBorder,i=(w(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,40)}}function xr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.option={},this.Create=function(){this.ID=b(),this.BindData(),this.BindEvent()},this.BindData=function(){var t=this.DivElement.id,e=$("#"+t);e.find("div[id^='topMenu_']").remove(),e.find("div[id^='childMenu_']").remove();var a=$("<div />");a.attr("id","topMenu_"+this.ID).addClass("context-menu-wrapper topmenu").hide(),e.append(a);var i=$("<table />");i.attr({id:"topTable_"+this.ID,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),a.append(i),i.append(this.childrenList(this.option.data));for(var r=0;r<this.option.data.length;r++){var n="undefined"!=typeof this.option.data[r].children;if(n){var s=$("<div />");s.attr({id:"childMenu_"+this.ID+r,"data-index":r}).addClass("context-menu-wrapper").hide(),e.append(s);var o=$("<table />");o.attr({id:"childTable_"+this.ID+r,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),s.append(o),o.append(this.childrenList(this.option.data[r].children))}}},this.Update=function(){this.BindData(),this.BindEvent()},this.childrenList=function(t){for(var e=[],a=0;a<t.length;a++){var i="undefined"!=typeof t[a].isBorder&&t[a].isBorder,r=$("<tr />");r.addClass("font_Arial context-menu"),i&&r.addClass("border");var n=$("<td />");t[a].selected?n.addClass("spacer context-menu").html("√"):n.addClass("spacer context-menu");var s=$("<td />");s.addClass("text").html(t[a].text);var o=$("<td />");o.addClass("right shortcut");var h=$("<td />");h.addClass("undefined"!=typeof t[a].children?"submenu-arrow":"context-menu spacer"),r.append(n).append(s).append(o).append(h),e.push(r)}return e},this.Show=function(t){$.extend(this.option,t),this.ID?this.Update():this.Create();var e=$("#topMenu_"+this.ID),a=e.outerWidth(),i=e.outerHeight(),r=this.option.x,n=this.option.y;a>this.option.position.X+this.option.position.W-r&&(r-=a),i>this.option.position.Y+this.option.position.H-n&&(n-=i),e.hide(),e.css({position:"absolute",left:r+"px",top:n+"px"}).show(),this.isInit=!0},this.Hide=function(){"undefined"!=typeof $&&($("#topMenu_"+this.ID).hide(),$("[id^='childMenu_"+this.ID+"']").hide())},this.BindEvent=function(){var t=this,e=$("[id^='childMenu_"+t.ID+"']");$("#topTable_"+t.ID).find("tr").mouseenter((function(){var a=$(this),i=a.index(),r=$("#topMenu_"+t.ID),n=$("#childMenu_"+t.ID+i),s=a.outerWidth(),o=a.outerHeight(),h=r.position().left+s+1,l=r.position().top+o*i;s>t.option.position.X+t.option.position.W-h&&(h=h-s-r.outerWidth()-2),n.outerHeight()>t.option.position.Y+t.option.position.H-l&&(l=r.position().top+r.outerHeight()-n.outerHeight()),e.hide(),n.css({left:h+"px",top:l+"px"}).show()})).mouseleave((function(){var e=$(this).index();setTimeout((function(){1!=$("#childMenu_"+t.ID+e).attr("data-isShow")&&$("#childMenu_"+t.ID+e).hide()}),10)})).click((function(){var e=$(this),a=e.index();"function"==$.type(t.option.data[a].click)&&(t.option.data[a].click(t.option.returnData),e.hide())})).contextmenu((function(){return!1})),e.mouseenter((function(){$(this).attr("data-isShow","1")})).mouseleave((function(){$(this).attr("data-isShow","0")})).contextmenu((function(){return!1})),e.find("tr").click((function(){var a=$(this),i=parseInt(a.closest("div").attr("data-index")),r=a.index();"function"==$.type(t.option.data[i].children[r].click)&&(t.option.data[i].children[r].click(t.option.windowIndex||1),e.hide())}))},this.GetPeriod=function(t){var e=[{text:"日线",Value:0,click:function(){t.ChangePeriod(0)}},{text:"周线",Value:1,click:function(){t.ChangePeriod(1)}},{text:"双周线",Value:21,click:function(){t.ChangePeriod(21)}},{text:"月线",Value:2,click:function(){t.ChangePeriod(2)}},{text:"季线",Value:9,click:function(){t.ChangePeriod(9)}},{text:"半年",Value:22,click:function(){t.ChangePeriod(22)}},{text:"年线",Value:3,click:function(){t.ChangePeriod(3)}},{text:"1分",Value:4,click:function(){t.ChangePeriod(4)}},{text:"5分",Value:5,click:function(){t.ChangePeriod(5)}},{text:"15分",Value:6,click:function(){t.ChangePeriod(6)}},{text:"30分",Value:7,click:function(){t.ChangePeriod(7)}},{text:"60分",Value:8,click:function(){t.ChangePeriod(8)}},{text:"2小时",Value:11,click:function(){t.ChangePeriod(11)}},{text:"4小时",Value:12,click:function(){t.ChangePeriod(12)}},{text:"分笔",Value:10,click:function(){t.ChangePeriod(10)}},{text:"自定义周期:3分钟",Value:20003,click:function(){t.ChangePeriod(20003)}},{text:"自定义周期:35分钟",Value:20035,click:function(){t.ChangePeriod(20035)}},{text:"自定义周期:8日",Value:40008,click:function(){t.ChangePeriod(40008)}}];for(var a in e){var i=e[a];if(i.Value==t.Period){i.selected=!0;break}}return e},this.GetRight=function(t){var e=[{text:"不复权",click:function(){t.ChangeRight(0)}},{text:"前复权",click:function(){t.ChangeRight(1)}},{text:"后复权",click:function(){t.ChangeRight(2)}}];return t.Right>=0&&t.Right<e.length&&(e[t.Right].selected=!0),e},this.GetIndex=function(t){return[{text:"均线",click:function(e){t.ChangeIndex(e,"均线")}},{text:"BOLL",click:function(e){t.ChangeIndex(e,"BOLL")},isBorder:!0},{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"VOL",click:function(e){t.ChangeIndex(e,"VOL")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"BIAS",click:function(e){t.ChangeIndex(e,"BIAS")}},{text:"OBV",click:function(e){t.ChangeIndex(e,"OBV")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"CR",click:function(e){t.ChangeIndex(e,"CR")}},{text:"PSY",click:function(e){t.ChangeIndex(e,"PSY")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}},{text:"VR",click:function(e){t.ChangeIndex(e,"VR")}},{text:"EMV",click:function(e){t.ChangeIndex(e,"EMV")}},{text:"ROC",click:function(e){t.ChangeIndex(e,"ROC")}},{text:"MIM",click:function(e){t.ChangeIndex(e,"MIM")}},{text:"FSL",click:function(e){t.ChangeIndex(e,"FSL")}}]},this.GetColorIndex=function(t){var e=[{text:"十字星",click:function(e){t.ChangeInstructionIndex("五彩K线-十字星")}},{text:"早晨之星",click:function(e){t.ChangeInstructionIndex("五彩K线-早晨之星")}},{text:"垂死十字",click:function(e){t.ChangeInstructionIndex("五彩K线-垂死十字")}},{text:"三只乌鸦",click:function(e){t.ChangeInstructionIndex("五彩K线-三只乌鸦")}},{text:"光脚阴线",click:function(e){t.ChangeInstructionIndex("五彩K线-光脚阴线")}},{text:"黄昏之星",click:function(e){t.ChangeInstructionIndex("五彩K线-黄昏之星")}}];return t.ColorIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除五彩K线",click:function(e){t.CancelInstructionIndex()}})),e},this.GetTradeIndex=function(t){var e=[{text:"BIAS",click:function(e){t.ChangeInstructionIndex("交易系统-BIAS")}},{text:"CCI",click:function(e){t.ChangeInstructionIndex("交易系统-CCI")}},{text:"DMI",click:function(e){t.ChangeInstructionIndex("交易系统-DMI")}},{text:"KD",click:function(e){t.ChangeInstructionIndex("交易系统-KD")}},{text:"BOLL",click:function(e){t.ChangeInstructionIndex("交易系统-BOLL")}},{text:"KDJ",click:function(e){t.ChangeInstructionIndex("交易系统-KDJ")}}];return t.TradeIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除专家系统",click:function(e){t.CancelInstructionIndex()}})),e},this.GetOverlay=function(t){var e=[{text:"上证指数",click:function(){t.OverlaySymbol("000001.sh")}},{text:"深证成指",click:function(){t.OverlaySymbol("399001.sz")}},{text:"中小板指",click:function(){t.OverlaySymbol("399005.sz")}},{text:"创业板指",click:function(){t.OverlaySymbol("399006.sz")}},{text:"沪深300",click:function(){t.OverlaySymbol("000300.sh")}}];for(var a in t.OverlayChartPaint){var i,r=t.OverlayChartPaint[a],n=r.Symbol,s=new Map([["000001.sh",0],["399001.sz",1],["399005.sz",2],["399006.sz",3],["000300.sh",4]]);if(s.has(n))(function(){i=e[s.get(n)];var a=n;i.selected=!0,i.click=function(){t.DeleteOverlaySymbol(a)}})()}return t.OverlayChartPaint&&t.OverlayChartPaint.length>0&&(e[e.length-1].isBorder=!0,e.push({text:"取消叠加",click:function(){t.ClearOverlaySymbol()}})),e},this.GetKLineType=function(t){var e=[{text:"K线(空心阳线)",click:function(){t.ChangeKLineDrawType(3)}},{text:"K线(实心阳线)",click:function(){t.ChangeKLineDrawType(0)}},{text:"美国线",click:function(){t.ChangeKLineDrawType(2,!0,{IsThinAKBar:!1})}},{text:"收盘线",click:function(){t.ChangeKLineDrawType(1)}},{text:"收盘面积",click:function(){t.ChangeKLineDrawType(4)}},{text:"K线(空心阳线阴线)",click:function(){t.ChangeKLineDrawType(6)}},{text:"Heikin Ashi",click:function(){t.ChangeKLineDrawType(11)}},{text:"Line Break",click:function(){t.ChangeKLineDrawType(12)}},{text:"High-low",click:function(){t.ChangeKLineDrawType(13)}},{text:"HLC Area",click:function(){t.ChangeKLineDrawType(15)}}];switch(t.KLineDrawType){case 0:e[1].selected=!0;break;case 1:e[3].selected=!0;break;case 2:e[2].selected=!0;break;case 3:e[0].selected=!0;break;case 4:e[4].selected=!0;break;case 6:e[5].selected=!0;break;case 11:e[6].selected=!0;break;case 12:e[7].selected=!0;break;case 13:e[8].selected=!0;break;case 15:e[9].selected=!0;break}return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(1)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"4个窗口",click:function(){t.ChangeIndexWindowCount(4)}},{text:"5个窗口",click:function(){t.ChangeIndexWindowCount(5)}}],a=t.Frame.SubFrame.length;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetCoordinateType=function(t){var e=[{text:"普通坐标",click:function(){t.ChangeCoordinateType({Type:0})}},{text:"百分比坐标",click:function(){t.ChangeCoordinateType({Type:1})}},{text:"反转坐标",click:function(){t.ChangeCoordinateType({IsReverse:!0})}},{text:"对数坐标",click:function(){t.ChangeCoordinateType({Type:2})}},{text:"等比坐标",click:function(){t.ChangeCoordinateType({Type:3})}},{text:"等分坐标",click:function(){t.ChangeCoordinateType({Type:4})}},{text:"黄金分割",click:function(){t.ChangeCoordinateType({Type:5})}}];return t.Frame&&t.Frame.SubFrame&&t.Frame.SubFrame.length>0&&(1==t.Frame.SubFrame[0].Frame.CoordinateType&&(e[2].selected=!0,e[2].click=function(){t.ChangeCoordinateType({IsReverse:!1})}),1==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[1].selected=!0:0==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[0].selected=!0:2==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[3].selected=!0:3==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[4].selected=!0:4==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[5].selected=!0:5==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType&&(e[6].selected=!0)),e},this.GetDragModeType=function(t){var e=[{text:"禁止拖拽",click:function(){t.DragMode=0}},{text:"启动拖拽",click:function(){t.DragMode=1}},{text:"区间选择",click:function(){t.DragMode=2}}];return t.DragMode>=0&&t.DragMode<e.length&&(e[t.DragMode].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");a?e.push({text:"关闭画图工具",click:function(){for(var e=a.Chart.Width,i=parseInt(a.Index),r=i+1;r<t.ExtendChartPaint.length;++r){var n=t.ExtendChartPaint[r];"StockChip"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}});var i=t.GetExtendChartByClassName("StockChip");return i?e.push({text:"关闭移动筹码",click:function(){for(var e=i.Chart.Width,a=parseInt(i.Index),r=a+1;r<t.ExtendChartPaint.length;++r){var n=t.ExtendChartPaint[r];"DrawToolsButton"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(i),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"移动筹码",click:function(){var e={Name:"筹码分布",ShowType:1,Width:230};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e},this.GetKLineInfo=function(t){var e=new Set;for(var a in t.ChartInfo){var i=t.ChartInfo[a];e.add(i.ClassName)}var r=["公告","业绩预告","调研","大宗交易","龙虎榜","互动易"],n=[];for(var a in r){var s=r[a],o=ir.GetClassInfo(s);if(o){i=this.CreateKlineInfoItem(s,e.has(o.ClassName),t);n.push(i)}}if(t.ChartInfo.length>0){n[n.length-1].isBorder=!0;i={text:"删除所有",click:function(){t.ClearKLineInfo()}};n.push(i)}return n},this.CreateKlineInfoItem=function(t,e,a){var i={text:t,selected:e};return i.click=e?function(){a.DeleteKLineInfo(t)}:function(){a.AddKLineInfo(t,!0)},i},this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"分析周期",children:this.GetPeriod(e)},{text:"复权处理",children:this.GetRight(e)},{text:"指标切换",children:this.GetIndex(e)},{text:"五彩K线",children:this.GetColorIndex(e)},{text:"专家系统",children:this.GetTradeIndex(e)},{text:"信息地雷",children:this.GetKLineInfo(e)},{text:"叠加品种",children:this.GetOverlay(e)},{text:"主图线型",children:this.GetKLineType(e)},{text:"坐标类型",children:this.GetCoordinateType(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"鼠标拖拽",children:this.GetDragModeType(e)},{text:"工具",children:this.GetTools(e)}],s=e.Symbol.toUpperCase();(Mr.IsSHSZIndex(e.Symbol)||Mr.IsBIT(s))&&n.splice(1,1);var o=t.data.FrameID,h=this.GetOverlayIndex(e,o);if(h&&h.length>0){var u={text:"删除叠加指标",children:this.GetDeleteOverlayIndex(e,h)};n.splice(3,0,u)}l.Chart.Log("[KLineRightMenu::DoModal]",o),a.Show({windowIndex:o,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),$(document).click((function(){a.Hide()}))},this.GetOverlayIndex=function(t,e){if(e>=t.Frame.SubFrame.length||e<0)return[];var a=[],i=t.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];a.push({Name:n.Script.Name,Identify:n.Identify})}return a},this.GetDeleteOverlayIndex=function(t,e){var a=[],i=function(){var i=e[r].Identify;a.push({text:e[r].Name,click:function(){t.DeleteOverlayWindowsIndex(i)}})};for(var r in e)i();return a}}function yr(t){this.newMethod=xr,this.newMethod(t),delete this.newMethod,this.DoModal=function(e){var a=e.data.Chart,i=this,r=e.data.X,n=e.data.Y,s=[{text:"区间统计",click:function(){l.Chart.Log("[KLineSelectRightMenu::click] 区间统计"),i.Hide();var a=new Sr(t);a.DoModal(e)}},{text:"区间放大",click:function(){l.Chart.Log("[KLineSelectRightMenu::click] 区间放大");var t=e.data.Chart;t.ShowSelectData(e.data.SelectData)}}];i.Show({x:r,y:n,position:a.Frame.Position,data:s})},this.Show=function(t){$.extend(this.option,t),this.ID||this.Create();var e="topMenu_"+this.ID,a=document.getElementById(e);a||this.Create();var i=$("#topMenu_"+this.ID),r=i.outerWidth(),n=i.outerHeight();i.contextmenu((function(){return!1}));var s=this.option.x,o=this.option.y;r>this.option.position.X+this.option.position.W-s&&(s-=r),n>this.option.position.Y+this.option.position.H-o&&(o-=n),i.hide(),i.css({position:"absolute",left:s+"px",top:o+"px"}).show(),$("#topMenu_"+this.ID).find("tr").show(),this.isInit=!0}}function Ar(t){this.newMethod=xr,this.newMethod(t),delete this.newMethod,this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"叠加品种",children:this.GetOverlay(e)},{text:"多日分时图",children:this.GetDayCount(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"副图指标切换",children:this.GetIndex(e)},{text:"区间选择",children:this.GetSelectRect(e)}],s=e.Symbol;Mr.IsSHSZStockA(s)&&n.push({text:"集合竞价",children:this.GetShowBeforeData(e)}),n.push({text:"工具",children:this.GetTools(e)});var o=t.data.FrameID,h=this.GetOverlayIndex(e,o);if(h&&h.length>0){var u={text:"删除叠加指标",children:this.GetDeleteOverlayIndex(e,h)};n.splice(3,0,u)}o=t.data.FrameID;l.Chart.Log("[MinuteRightMenu::DoModal]",o),a.Show({windowIndex:o,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),$(document).click((function(){a.Hide()}))},this.GetDayCount=function(t){var e=[{text:"当日分时图",click:function(){t.ChangeDayCount(1)},isBorder:!0},{text:"最近2日",click:function(){t.ChangeDayCount(2)}},{text:"最近3日",click:function(){t.ChangeDayCount(3)}},{text:"最近4日",click:function(){t.ChangeDayCount(4)}},{text:"最近5日",click:function(){t.ChangeDayCount(5)}},{text:"最近6日",click:function(){t.ChangeDayCount(6)}}];return t.DayCount-1>=0&&t.DayCount-1<e.length&&(e[t.DayCount-1].selected=!0),e},this.GetIndex=function(t){var e=[{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}}];return e},this.GetShowBeforeData=function(t){if(t.IsShowBeforeData){var e=[{text:"隐藏",click:function(){t.ShowCallAuctionData({Left:!1,MultiDay:{Left:!1}})}}];return e}e=[{text:"显示",click:function(){t.ShowCallAuctionData({Left:!0,MultiDay:{Left:!0}})}}];return e},this.GetSelectRect=function(t){if(t.EnableSelectRect){var e=[{text:"禁用区间选择",click:function(){t.EnableSelectRect=!1}}];return e}e=[{text:"启动区间选择",click:function(){t.EnableSelectRect=!0}}];return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(4)}},{text:"4个窗口",click:function(){t.ChangeIndexWindowCount(5)}},{text:"5个窗口",click:function(){t.ChangeIndexWindowCount(6)}}],a=t.Frame.SubFrame.length-1;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");return a?e.push({text:"关闭画图工具",click:function(){var e=a.Chart.Width;parseInt(a.Index);t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e}}function br(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.HQChart,this.ChartPicture,this.SubToolsDiv,this.SettingMenu,this.SettingPV,this.DoModal=function(t){if(!this.SubToolsDiv){this.ID=b();var e=document.createElement("div");e.className="subTolls",e.id=this.ID,this.DivElement.appendChild(e),this.SubToolsDiv=e}this.HQChart=t.data.HQChart,this.ChartPicture=t.data.ChartPicture;var a=I(),i=this.HQChart.Frame.SubFrame[0].Frame,r=i.ChartBorder.Top+40,n=i.ChartBorder.Right,s=i.ChartBorder.GetLeft(),o=this.ChartPicture.ClassName,h=this.ChartPicture.LineColor;0!=h.indexOf("rgb(")&&0!=h.indexOf("RGB(")||(h=ba.RGBToHex(h.toLowerCase()));var u="";u="ChartDrawPictureText"===o?'<span class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></span>\n<span class="subtool-set" title="设置"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':"ChartDrawVolProfile"==o?'<span class="vp-set" title="设置"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':'<p class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></p>\n        <p class="subtool-del"><i class="iconfont icon-recycle_bin"></i></p>',this.SubToolsDiv.style.right=n/a+"px",this.SubToolsDiv.style.top=r/a+"px",this.SubToolsDiv.innerHTML=u,this.SubToolsDiv.style.position="absolute",this.SubToolsDiv.style.display="block";var c=this.HQChart,d=this.ChartPicture;this.SubToolsDiv;$(".subtool-del").click((function(){c.SelectChartDrawPicture=null,c.ClearChartDrawPicture(d),$(".subTolls").css("display","none")}));var f=this;$(".subtool-set").click((function(){$(f.SubToolsDiv).hide(),f.SettingMenu||(f.SettingMenu=new wr(i.ChartBorder.UIElement.parentNode)),f.SettingMenu.ChartPicture=d,f.SettingMenu.HQChart=c,f.SettingMenu.Position={Left:n+80,Top:r+20},f.SettingMenu.DoModal()})),$(".changes-color").click((function(){document.getElementById("color").click(),$(".change-color").change((function(){var t=$(".change-color").val();d.LineColor=t,d.PointColor=t,c.ChartDrawStorage&&c.ChartDrawStorage.SaveDrawData(d)}))})),$(".vp-set").click((function(){f.SettingPV||(f.SettingPV=new Fr(i.ChartBorder.UIElement.parentNode)),f.SettingPV.ChartPicture=d,f.SettingPV.HQChart=c,f.SettingPV.Position={Left:n+80,Top:r+20},f.SettingPV.DoModal()})),l.Chart.Log("[ChartPictureSettingMenu::DoModal]",{Top:r,Left:s,Right:n})}}function wr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.BackupData,this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.Text,e=this.ChartPicture.FontOption,a=this.ChartPicture.LineColor;this.BackupData={Text:t,LineColor:a,FontOption:{Family:e.Family,Size:e.Size,Weight:e.Weight,Style:e.Style}},l.Chart.Log("[ChartPictureTextSettingMenu::DoModal] picture info",this.BackupData);var i=this,r=this.DivElement.getElementsByClassName("chartpicture-text-setting")[0];r||(r=document.createElement("div"),r.className="chartpicture-text-setting",this.DivElement.appendChild(r)),this.SettingDiv=r;var n=[10,11,12,14,16,20,24,28,32,40],s=["微软雅黑","宋体","Arial","仿宋"],o="",h="";s.forEach((function(t,e){h+=0!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"})),n.forEach((function(t,e){o+=5!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"}));var u='<div class="contentWrap"><div class="styleOptions"><span class="colorPicker"><input type="color" id="fontColor" value="#1e90ff"></span><div class="likeSelect fontSelect"><span class="choicedText">微软雅黑</span><div class="selectList">'+h+'</div><i class="iconfont icon-xia"></i></div><div class="likeSelect fontSizeSelect"><span class="choicedText">20</span><div class="selectList">'+o+'</div><i class="iconfont icon-xia"></i></div><span class="strongFont likeBtn"><i class="iconfont icon-jiacu"></i></span><span class="italicsFont likeBtn"><i class="iconfont icon-qingxieL"></i></span></div><textarea class="tArea" id="tArea" placeholder="Text"></textarea></div>',c=I(),d='<div class="titleWrap"><span class="titleName">样式设置</span><i class="closeBtn iconfont icon-close"></i></div>'+u+'<div class="btnsContainer"><span class="okBtn btn">确认</span><span class="cancelBtn btn">取消</span></div>';this.SettingDiv.style.left=this.Position.Left/c+"px",this.SettingDiv.style.top=this.Position.Top/c+"px",this.SettingDiv.innerHTML=d,this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",$(".chartpicture-text-setting .colorPicker").css({borderColor:i.ChartPicture.LineColor,"background-color":i.ChartPicture.LineColor});var f=this.ChartPicture.FontOption.Family;$(".chartpicture-text-setting .fontSelect .choicedText").html(f),s.forEach((function(t,e){t==f&&($(".chartpicture-text-setting .fontSelect p").removeClass("active"),$(".chartpicture-text-setting .fontSelect p").eq(e).addClass("active"))}));var C=this.ChartPicture.FontOption.Size;$(".chartpicture-text-setting .fontSizeSelect .choicedText").html(C),n.forEach((function(t,e){t==C&&($(".chartpicture-text-setting .fontSizeSelect p").removeClass("active"),$(".chartpicture-text-setting .fontSizeSelect p").eq(e).addClass("active"))}));var m=this.ChartPicture.FontOption.Weight;null!=m&&"bold"==m&&$(".chartpicture-text-setting .strongFont").addClass("hot");var D=this.ChartPicture.FontOption.Style;null!=D&&"italic"==D&&$(".chartpicture-text-setting .italicsFont").addClass("hot");t=this.ChartPicture.Text;$(".chartpicture-text-setting .tArea").val(t);$(".chartpicture-text-setting #fontColor").change({Picture:this.ChartPicture},(function(t){var e=$(this).val();$(this).parent().css({borderColor:e,"background-color":e});var a=t.data.Picture;a.LineColor=e,a.Update&&a.Update()})),$(".chartpicture-text-setting .fontSelect,.chartpicture-text-setting .fontSizeSelect").click((function(){$(this).find(".selectList").toggle(),$(this).toggleClass("hot")})),$(".chartpicture-text-setting .fontSelect p").click({Picture:this.ChartPicture},(function(t){var e=$(this).closest(".fontSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){$(this).closest(".fontSelect").find(".choicedText").html(a),$(this).siblings().removeClass("active"),$(this).addClass("active");var i=t.data.Picture;i.FontOption.Family=a,i.Update&&i.Update()}})),$(".chartpicture-text-setting .fontSizeSelect p").click({Picture:this.ChartPicture},(function(t){var e=$(this).closest(".fontSizeSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){$(this).closest(".fontSizeSelect").find(".choicedText").html(a),$(this).siblings().removeClass("active"),$(this).addClass("active");var i=t.data.Picture;i.FontOption.Size=Number(a),i.Update&&i.Update()}})),$(".chartpicture-text-setting .strongFont").click({Picture:this.ChartPicture},(function(t){$(this).toggleClass("hot");var e=$(this).attr("class");if(e.indexOf("hot")>0){var a=t.data.Picture;a.FontOption.Weight="bold",a.Update&&a.Update()}})),$(".chartpicture-text-setting .italicsFont").click({Picture:this.ChartPicture},(function(t){$(this).toggleClass("hot");var e=$(this).attr("class");if(e.indexOf("hot")>0){var a=t.data.Picture;a.FontOption.Style="italic",a.Update&&a.Update()}})),$(".chartpicture-text-setting .titleWrap .closeBtn,.chartpicture-text-setting .btnsContainer .cancelBtn").click({Picture:this.ChartPicture},(function(t){var e=t.data.Picture;e.Text=i.BackupData.Text,e.LineColor=i.BackupData.LineColor,e.FontOption=i.BackupData.FontOption,e.Update&&e.Update(),i.Close()})),$(".chartpicture-text-setting .tArea").keyup({Picture:this.ChartPicture},(function(t){l.Chart.Log('[ChartPictureTextSettingMenu::DoModal] $(".chartpicture-text-setting .tArea").keyup()');var e=$(this).val(),a=t.data.Picture;a.Text=e,a.Update&&a.Update()})),$(".chartpicture-text-setting .btnsContainer .okBtn").click((function(){i.Close(),i.HQChart&&i.HQChart.ChartDrawStorage&&i.HQChart.ChartDrawStorage.SaveDrawData(i.ChartPicture)}))}}function Fr(t){this.newMethod=mr,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.ID=b(),this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.VAVol,e=this.ChartPicture.BarPosition,a=this,i=document.getElementById(this.ID);i||(i=document.createElement("div"),i.className="jchart-modifyindex-box",i.id=this.ID,this.DivElement.appendChild(i)),this.SettingDiv=i,i.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span>固定范围成交量分布设置</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>\n                <input class='row-line' value=".concat(t," />VAVol <br>\n                <input class='row-line' value=").concat(e," />BarPosition\n            </div>            <div class='parameter-footer'>                <button class='submit' >确定</button>                <button class='cancel' >取消</button>            </div>        </div>");var r=I(),n=this.HQChart.Frame.SubFrame[0].Frame,s=n.ChartBorder.Top+40,o=n.ChartBorder.Right;n.ChartBorder.GetLeft();this.SettingDiv.style.right=o/r+"px",this.SettingDiv.style.top=s/r+"px",this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block";var h=i.getElementsByClassName("cancel")[0];h.onclick=function(){a.Close()};var l=i.getElementsByClassName("icon iconfont icon-close")[0];l.onclick=function(){a.Close()};var u=i.getElementsByClassName("submit")[0];u.onclick=function(){var t=i.getElementsByClassName("row-line")[0].value;a.ChartPicture.VAVol=parseFloat(t);t=parseInt(i.getElementsByClassName("row-line")[1].value);a.ChartPicture.BarPosition=t>0?1:0,a.ChartPicture.RequestVolumeProfileData(),a.Close()}}}var Mr={SH:".SH",SZ:".SZ",SHSZ_C_Index:".CI",BJ:".BJ",SHO:".SHO",SZO:".SZO",HK:".HK",FHK:".FHK",SHFE:".SHF",SHFE2:".SHFE",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",GZFE:".GZFE",USA:".USA",FTSE:".FTSE",BIT:".BIT",BIZ:".BIZ",FOREX:".FOREX",NYMEX:".NYMEX",COMEX:".COMEX",NYBOT:".NYBOT",CBOT:".CBOT",LME:".LME",TOCOM:".TOCOM",IPE:".IPE",TW:".TW",JP:".JP",HSX:".HSX",HNX:".HNX",UPCOM:".UPCOM",ET:".ET",IsET:function(t){return!!t&&t.indexOf(this.ET)>0},IsETShowAvPrice:function(t){return!1},IsHSX:function(t){return!!t&&t.indexOf(this.HSX)>0},IsHNX:function(t){return!!t&&t.indexOf(this.HNX)>0},IsUPCOM:function(t){return!!t&&t.indexOf(this.UPCOM)>0},IsNYMEX:function(t){return!!t&&t.indexOf(this.NYMEX)>0},IsCOMEX:function(t){return!!t&&t.indexOf(this.COMEX)>0},IsNYBOT:function(t){return!!t&&t.indexOf(this.NYBOT)>0},IsCBOT:function(t){return!!t&&t.indexOf(this.CBOT)>0},IsLME:function(t){return!!t&&t.indexOf(this.LME)>0},IsTOCOM:function(t){return!!t&&t.indexOf(this.TOCOM)>0},IsIPE:function(t){return!!t&&t.indexOf(this.IPE)>0},IsForeignExchange:function(t){return!!t&&t.indexOf(this.FOREX)>0},IsFTSE:function(t){return!!t&&t.indexOf(this.FTSE)>0},IsFHK:function(t){return!!t&&t.indexOf(this.FHK)>0},IsBIT:function(t){return!!t&&(t.indexOf(this.BIT)>0||t.indexOf(this.BIZ)>0)},IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length,a=t.indexOf(this.SH);return a==e},IsSZ:function(t){var e=t.length-this.SZ.length,a=t.indexOf(this.SZ);return a==e},IsBJ:function(t){var e=t.length-this.BJ.length,a=t.indexOf(this.BJ);return a==e},IsSHSZCustomIndex:function(t){var e=t.length-this.SHSZ_C_Index.length,a=t.indexOf(this.SHSZ_C_Index);return a==e},IsSHO:function(t){var e=t.length-this.SHO.length,a=t.indexOf(this.SHO);return a==e},IsSZO:function(t){var e=t.length-this.SZO.length,a=t.indexOf(this.SZO);return a==e},IsHK:function(t){var e=t.length-this.HK.length,a=t.indexOf(this.HK);return a==e},IsTW:function(t){var e=t.length-this.TW.length,a=t.indexOf(this.TW);return a==e},IsJP:function(t){var e=t.length-this.JP.length,a=t.indexOf(this.JP);return a==e},IsSHFE:function(t){return!!t&&(t.indexOf(this.SHFE)>0||t.indexOf(this.SHFE2)>0)},IsCFFEX:function(t){return!!t&&t.indexOf(this.CFFEX)>0},IsDCE:function(t){return!!t&&t.indexOf(this.DCE)>0},IsCZCE:function(t){return!!t&&t.indexOf(this.CZCE)>0},IsGZFE:function(t){return!!t&&t.indexOf(this.GZFE)>0},IsChinaFutures:function(t){return this.IsSHO(t)||this.IsSZO(t)||this.IsGZFE(t)||this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsFutures:function(t){return this.IsChinaFutures(t)||this.IsNYMEX(t)||this.IsCOMEX(t)||this.IsNYBOT(t)||this.IsCBOT(t)||this.IsLME(t)||this.IsTOCOM(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)||this.IsSHSZCustomIndex(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(this.IsSHSZCustomIndex(e))return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e))if("0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(2))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}else if("3"==e.charAt(0)&&"0"==e.charAt(1)){if("0"==e.charAt(2))return!0;if("1"==e.charAt(2))return!0}return!1},IsBJStock:function(t){if(!t)return!1;var e=t.toUpperCase();if(!this.IsBJ(e))return!1;var a=e.charAt(0);return"4"==a||"8"==a},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase(),a=new Date,i=a.getDay(),r=100*a.getHours()+a.getMinutes();if(this.IsUSA(e)){var n=Yr(-4);i=n.getDay(),r=100*n.getHours()+n.getMinutes();return 6==i||0==i?0:r>1730?3:r<930?1:2}return this.IsBIT(e)||this.IsForeignExchange(e)?2:this.IsFTSE(e)?6==i||0==i?0:r>=830&&r<=2359||r>=0&&r<=500?2:0:this.IsFHK(e)?6==i||0==i?0:r>=900&&r<=2359||r>=0&&r<=320?2:0:this.IsET(e)?this.GetETMarketStatus(t):this.IsHK(e)?6==i||0==i?0:r>1630?3:r<925?1:2:this.IsTW(e)?6==i||0==i?0:r>1410?3:r<820?1:2:this.IsJP(e)?6==i||0==i?0:r>1520?3:r<830?1:2:this.IsNYMEX(e)?this.GetNYMEXMarketStatus(e):this.IsCOMEX(e)?this.GetCOMEXMarketStatus(e):this.IsNYBOT(e)?this.GetNYBOTMarketStatus(e):this.IsCBOT(e)?this.GetCBOTMarketStatus(e):this.IsLME(e)?this.GetLMEMarketStatus(e):this.IsTOCOM(e)?this.GetTOCOMMarketStatus(e):this.IsChinaFutures(e)?6==i||0==i?0:this.IsCFFEX(e)?r>1540?3:r<910?1:2:r>=2100||r<=240||r>=830&&r<=1510?2:1:6==i||0==i?0:r>1540?3:r<910?1:2},GetLimitPriceRange:function(t,e){return this.IsSHSZStockA(t)?this.IsSHStockSTAR(t)?{Max:.2,Min:-.2}:e?e.indexOf("ST")>=0?{Max:.05,Min:-.05}:{Max:.1,Min:-.1}:null:null},GetDefaultDecimal:function(t){return 2},GetFHKDecimal:function(t){return 0},GetFTSEDecimal:function(t){return 0},GetBITDecimal:function(t){return 2},GetSHODecimal:function(t){return 4},GetETDecimal:function(t){return 2},GetHKDecimal:function(t){return 2},GetTWDecimal:function(t){return 2},GetJPDecimal:function(t){return 2},GetHSXDecimal:function(t){return 2},GetHNXDecimal:function(t){return 2},GetUPCOMDecimal:function(t){return 2},GetForeignExchangeDecimal:function(t){return 4},GetNYMEXDecimal:function(t){return Or.GetDecimal(t)},GetCOMEXDecimal:function(t){return Rr.GetDecimal(t)},GetNYBOTDecimal:function(t){return Br.GetDecimal(t)},GetCBOTDecimal:function(t){return _r.GetDecimal(t)},GetLMEDecimal:function(t){return kr.GetDecimal(t)},GetTOCOMDecimal:function(t){return Gr.GetDecimal(t)},GetIPEDecimal:function(t){return Vr.GetDecimal(t)},GetETMarketStatus:function(t){return 2},GetNYMEXMarketStatus:function(t){return Or.GetMarketStatus(t)},GetCOMEXMarketStatus:function(t){return Rr.GetMarketStatus(t)},GetNYBOTMarketStatus:function(t){return Br.GetMarketStatus(t)},GetCBOTMarketStatus:function(t){return _r.GetMarketStatus(t)},GetLMEMarketStatus:function(t){return kr.GetMarketStatus(t)},GetTOCOMMarketStatus:function(t){return Gr.GetMarketStatus(t)},GetIPEMarketStatus:function(t){return Vr.GetMarketStatus(t)},IsShowMinuteVolTitle:function(t){if(!t)return!1;t.toUpperCase();return!1},IsShowMinutePostionLine:function(t){return!!(Mr.IsFutures(t)||Mr.IsSHO(t)||Mr.IsSZO(t))},IsShowMinuteColorVolBar:function(t){return!!xi.Minute.VolBarColor},IsEnableRight:function(t,e,a){return!(!Mr.IsSHSZStockA(e)&&!Mr.IsBJStock(e))&&(!ut.IsTickPeriod(t)&&(!!ze.IsPlusNumber(a)||!ut.IsMinutePeriod(t,!0)))}};function Lr(){this.TIME_SPLIT=[{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1900,Text:"19:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"CL",Decimal:2,Time:0,Name:"原油"},{Symbol:"NG",Decimal:3,Time:0,Name:"天然气"},{Symbol:"RB",Decimal:4,Time:0,Name:"汽油"},{Symbol:"PL",Decimal:1,Time:0,Name:"铂金"},{Symbol:"PA",Decimal:2,Time:0,Name:"钯金"},{Symbol:"HR",Decimal:0,Time:0,Name:"热轧钢卷"},{Symbol:"QM",Decimal:3,Time:0,Name:"迷你原油"},{Symbol:"HO",Decimal:4,Time:0,Name:"燃油"}],this.MarketSuffix=".NYMEX",this.TimeType=0,this.GetFuturesInfo=function(t){if(t.indexOf(this.MarketSuffix)<=0)return null;for(var e in this.FUTURES_LIST){var a=this.FUTURES_LIST[e];if(0==t.indexOf(a.Symbol))return a}return null},this.GetSplitData=function(t){var e=0==this.TimeType?this.TIME_SPLIT:this.TIME_SPLIT2,a=this.GetFuturesInfo(t);return a?e[a.Time]:e[0]},this.GetDecimal=function(t){var e=this.GetFuturesInfo(t);return e?e.Decimal:3},this.GetMarketStatus=function(t){var e=Yr(-4),a=new Date,i=e.getDay(),r=100*a.getHours()+a.getMinutes();return 6==i||0==i?0:r>430&&r<730?1:2},this.AddNewFutures=function(t){if(t){for(var e={Symbol:t.Symbol,Time:t.Time,Decimal:t.Decimal,Name:t.Name},a=0;a<this.FUTURES_LIST.length;++a){var i=this.FUTURES_LIST[a];if(i.Symbol==e.Symbol)return void(this.FUTURES_LIST[a]=e)}this.FUTURES_LIST.push(e)}}}var Er=new function(){this.SHSZ=null,this.BJ=null,this.SHO=null,this.HK=null,this.Futures=new Map,this.USA=null,this.FTSE=null,this.FHK=null,this.ForeEx=null,this.BIT=null,this.TW=null,this.JP=null,this.HSX=null,this.HNX=null,this.UPCOM=null,this.Initialize=function(){},this.GetET=function(t){throw{Name:"MinuteTimeStringData::GetET",Error:"not implement"}},this.GetSHSZ=function(t){return this.SHSZ||(this.SHSZ=this.CreateSHSZData()),this.SHSZ},this.GetBJ=function(t){return this.BJ||(this.BJ=this.CreateBJData()),this.BJ},this.GetSHO=function(){return this.SHO||(this.SHO=this.CreateSHOData()),this.SHO},this.GetHK=function(t){return this.HK||(this.HK=this.CreateHKData()),this.HK},this.GetTW=function(t){return this.TW&&(this.TW=this.CreateTWData()),this.TW},this.GetJP=function(t){return this.JP&&(this.JP=this.CreateJPData()),this.JP},this.GetHSX=function(t){return this.HSX&&(this.HSX=this.CreateHSXData()),this.HSX},this.GetHNX=function(t){return this.HNX&&(this.HSX=this.CreateHNXData()),this.HNX},this.GetUPCOM=function(t){return this.UPCOM&&(this.UPCOM=this.CreateUPCOMData()),this.UPCOM},this.GetFutures=function(t){if(!this.Futures.has(t.Name)){var e=this.CreateTimeData(t.Data);this.Futures.set(t.Name,e)}return this.Futures.get(t.Name)},this.GetUSA=function(){return this.USA||(this.USA=this.CreateUSAData(0)),this.USA},this.GetFTSE=function(){return this.FTSE||(this.FTSE=this.CreateFTSEData()),this.FTSE},this.GetFHK=function(){return this.FHK||(this.FHK=this.CreateFHKData()),this.FHK},this.GetForeignExchange=function(t){return this.ForeEx||(this.ForeEx=this.CreateForeignExchangeData()),this.ForeEx},this.GetBIT=function(t){return this.BIT||(this.BIT=this.CreateBITData()),this.BIT},this.CreateSHSZData=function(){return this.CreateTimeData([{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}])},this.CreateBJData=function(){return this.CreateTimeData([{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}])},this.CreateSHOData=function(){return this.CreateTimeData([{Start:930,End:1129},{Start:1300,End:1500}])},this.CreateHKData=function(){return this.CreateTimeData([{Start:930,End:1200},{Start:1300,End:1600}])},this.CreateTWData=function(){return this.CreateTimeData([{Start:900,End:1330}])},this.CreateJPData=function(){return this.CreateTimeData([{Start:900,End:1130},{Start:1230,End:1500}])},this.CreateFTSEData=function(){return this.CreateTimeData([{Start:1700,End:2359},{Start:0,End:445},{Start:900,End:1630}])},this.CreateFHKData=function(){return this.CreateTimeData([{Start:1715,End:2359},{Start:0,End:300},{Start:915,End:1200},{Start:1300,End:1630}])},this.CreateHSXData=function(){throw{Name:"MinuteTimeStringData::CreateHSXData",Error:"not implement"}},this.CreateHNXData=function(){throw{Name:"MinuteTimeStringData::CreateHNXData",Error:"not implement"}},this.CreateUPCOMData=function(){throw{Name:"MinuteTimeStringData::CreateUPCOMData",Error:"not implement"}},this.CreateUSAData=function(t){if(1==t){return this.CreateTimeData([{Start:2130,End:2359},{Start:0,End:400}])}if(2==t){return this.CreateTimeData([{Start:2230,End:2359},{Start:0,End:500}])}return this.CreateTimeData([{Start:930,End:1600}])},this.CreateForeignExchangeData=function(){return this.CreateTimeData([{Start:600,End:2359},{Start:0,End:559}])},this.CreateBITData=function(){return this.CreateTimeData([{Start:600,End:2359},{Start:0,End:559}])},this.CreateTimeData=function(t){var e=[];for(var a in t)for(var i=t[a],r=i.Start;r<=i.End;++r)r%100>=60||e.push(r);return e},this.GetTimeData=function(t){if(!t)return this.SHSZ;var e=t.toLocaleUpperCase();if(Mr.IsSH(e)||Mr.IsSZ(e))return this.GetSHSZ(e);if(Mr.IsBJ(e))return this.GetBJ(e);if(Mr.IsSHO(e)||Mr.IsSZO(e))return this.GetSHO();if(Mr.IsHK(e))return this.GetHK(e);if(Mr.IsTW(e))return this.GetTW(e);if(Mr.IsJP(e))return this.GetJP(e);if(Mr.IsUSA(e))return this.GetUSA(!0);if(Mr.IsCFFEX(e)||Mr.IsCZCE(e)||Mr.IsDCE(e)||Mr.IsSHFE(e)||Mr.IsGZFE(e)){var a=Pr.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsFTSE(e))return this.GetFTSE();if(Mr.IsFHK(e))return this.GetFHK();if(Mr.IsForeignExchange(e))return this.GetForeignExchange(e);if(Mr.IsET(e))return this.GetET(e);if(Mr.IsBIT(e))return this.GetBIT(e);if(Mr.IsHSX(e))return this.GetHSX(e);if(Mr.IsHNX(e))return this.GetHNX(e);if(Mr.IsUPCOM(e))return this.GetUPCOM(e);if(Mr.IsNYMEX(e)){a=Or.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsCOMEX(e)){a=Rr.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsNYBOT(e)){a=Br.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsCBOT(e)){a=_r.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsLME(e)){a=kr.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsTOCOM(e)){a=Gr.GetSplitData(e);return a?this.GetFutures(a):null}if(Mr.IsIPE(e)){a=Vr.GetSplitData(e);return a?this.GetFutures(a):null}}},Nr=new function(){var t={Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[122,1,"RGB(200,200,200)","13:00"],[152,0,"RGB(200,200,200)","13:30"],[182,0,"RGB(200,200,200)","14:00"],[212,0,"RGB(200,200,200)","14:30"],[242,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[122,1,"RGB(200,200,200)","13:00"],[182,0,"RGB(200,200,200)","14:00"],[242,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[122,1,"RGB(200,200,200)","13:00"],[242,1,"RGB(200,200,200)","15:00"]],Count:243,MiddleCount:122,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},e={Full:[[0,0,"rgb(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,0,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","13:00"],[150,0,"RGB(200,200,200)","13:30"],[180,0,"RGB(200,200,200)","14:00"],[210,0,"RGB(200,200,200)","14:30"],[240,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[60,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","13:00"],[180,0,"RGB(200,200,200)","14:00"],[240,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[120,1,"RGB(200,200,200)","13:00"],[240,1,"RGB(200,200,200)","15:00"]],Count:241,MiddleCount:120,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},a={Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:332,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},i={Full:[[0,0,"rgb(200,200,200)","9:30"],[30,0,"RGB(200,200,200)","10:00"],[90,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","14:00"],[330,0,"RGB(200,200,200)","15:00"],[390,0,"RGB(200,200,200)","16:00"]],Simple:[[30,0,"rgb(200,200,200)","10:00"],[150,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","14:00"],[390,0,"RGB(200,200,200)","16:00"]],Min:[[30,0,"rgb(200,200,200)","10:00"],[210,1,"RGB(200,200,200)","13:00"],[390,0,"RGB(200,200,200)","16:00"]],Count:391,MiddleCount:211,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},r={Full:[[0,1,"RGB(200,200,200)","17:00"],[120,1,"RGB(200,200,200)","19:00"],[240,1,"RGB(200,200,200)","21:00"],[360,1,"RGB(200,200,200)","23:00"],[480,1,"RGB(200,200,200)","01:00"],[600,1,"RGB(200,200,200)","03:00"],[706,1,"RGB(200,200,200)","09:00"],[826,1,"RGB(200,200,200)","11:00"],[946,1,"RGB(200,200,200)","13:00"],[1066,1,"RGB(200,200,200)","15:00"],[1156,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:00"],[240,1,"RGB(200,200,200)","21:00"],[480,1,"RGB(200,200,200)","01:00"],[706,1,"RGB(200,200,200)","09:00"],[946,1,"RGB(200,200,200)","13:00"],[1156,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:00"],[706,1,"RGB(200,200,200)","09:00"],[1156,1,"RGB(200,200,200)","16:30"]],Count:1157,MiddleCount:707,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},n={Full:[[0,1,"RGB(200,200,200)","17:15"],[105,1,"RGB(200,200,200)","19:00"],[225,1,"RGB(200,200,200)","21:00"],[345,1,"RGB(200,200,200)","23:00"],[586,0,"RGB(200,200,200)","09:15"],[691,1,"RGB(200,200,200)","11:00"],[812,1,"RGB(200,200,200)","14:00"],[963,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:15"],[225,1,"RGB(200,200,200)","21:00"],[586,0,"RGB(200,200,200)","09:15"],[752,1,"RGB(200,200,200)","13:00"],[963,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:15"],[586,0,"RGB(200,200,200)","09:15"],[963,1,"RGB(200,200,200)","16:30"]],Count:963,MiddleCount:526,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},s={Full:[[0,1,"RGB(200,200,200)","06:00"],[120,1,"RGB(200,200,200)","08:00"],[240,1,"RGB(200,200,200)","10:00"],[360,1,"RGB(200,200,200)","12:00"],[480,0,"RGB(200,200,200)","14:00"],[600,1,"RGB(200,200,200)","16:00"],[720,1,"RGB(200,200,200)","18:00"],[840,1,"RGB(200,200,200)","20:00"],[960,1,"RGB(200,200,200)","22:00"],[1080,1,"RGB(200,200,200)","0:00"],[1200,1,"RGB(200,200,200)","02:00"],[1320,1,"RGB(200,200,200)","04:00"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[480,0,"RGB(200,200,200)","14:00"],[960,1,"RGB(200,200,200)","22:00"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},o={Full:[[0,1,"RGB(200,200,200)","09:00"],[30,0,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:00"],[90,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","11:30"],[180,1,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","12:30"],[240,1,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","13:30"]],Simple:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","10:00"],[120,1,"RGB(200,200,200)","11:00"],[180,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","13:30"]],Min:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","11:00"],[270,0,"RGB(200,200,200)","13:30"]],Count:271,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}};this.GetCoordinateData=function(e,a){var i=null;if(e){var r=e.toLocaleUpperCase();if(Mr.IsSH(r)||Mr.IsSZ(r)||Mr.IsSHSZIndex(r))i=this.GetSHSZData(r,a);else if(Mr.IsBJ(r))i=this.GetBJData(r,a);else if(Mr.IsSHO(r)||Mr.IsSZO(r))i=this.GetSHOData(r,a);else if(Mr.IsHK(r))i=this.GetHKData(r,a);else if(Mr.IsTW(r))i=this.GetTWData(r,a);else if(Mr.IsJP(r))i=this.GetJPData(r,a);else{if(Mr.IsCFFEX(r)||Mr.IsCZCE(r)||Mr.IsDCE(r)||Mr.IsSHFE(r)||Mr.IsGZFE(r))return this.GetChinatFuturesData(r,a);if(Mr.IsUSA(r))i=this.GetUSAData(r,a);else if(Mr.IsFTSE(r))i=this.GetFTSEData(r,a);else if(Mr.IsFHK(r))i=this.GetFHKData(r,a);else if(Mr.IsForeignExchange(r))i=this.GetForeignExchangeData(r);else if(Mr.IsBIT(r,a))i=this.GetBITData(r,a);else if(Mr.IsET(r))i=this.GetETData(r,a);else{if(Mr.IsNYMEX(r))return this.GetNYMEXData(r,a);if(Mr.IsCOMEX(r))return this.GetCOMEXData(r,a);if(Mr.IsNYBOT(r))return this.GetNYBOTData(r,a);if(Mr.IsCBOT(r))return this.GetCBOTData(r,a);if(Mr.IsLME(r))return this.GetLMEData(r,a);if(Mr.IsTOCOM(r))return this.GetTOCOMData(r,a);if(Mr.IsIPE(r))return this.GetIPEData(r,a);if(Mr.IsHSX(r))return this.GetHSXData(r,a);if(Mr.IsHNX(r))return this.GetHNXData(r,a);if(Mr.IsUPCOM(r))return this.GetUPCOMData(r,a)}}}else i=t;var n={Count:i.Count,MiddleCount:i.MiddleCount,Data:i.GetData(a)};return n},this.GetSHSZData=function(e,a){var i=t;return i},this.GetBJData=function(e,a){var i=t;return i},this.GetUSAData=function(t,e){var a=i;return a},this.GetHKData=function(t,e){var i=a;return i},this.GetTWData=function(t,e){return o},this.GetSHOData=function(t,a){var i=e;return i},this.GetFuturesData=function(t,e,a){var i=a.GetSplitData(t);if(!i)return null;var r=Er.GetFutures(i);if(!r)return null;var n={Count:r.length},s=null;s=e<200?i.Coordinate.Min:e<480?i.Coordinate.Simple:i.Coordinate.Full;for(var o=[],h=0;h<r.length;++h)for(var l=r[h],u=0;u<s.length;++u){var c=s[u];if(l==c.Value){var d=[h,0,"RGB(200,200,200)",c.Text];o.push(d);break}}return n.Data=o,n},this.GetChinatFuturesData=function(t,e){return this.GetFuturesData(t,e,Pr)},this.GetNYMEXData=function(t,e){return this.GetFuturesData(t,e,Or)},this.GetCOMEXData=function(t,e){return this.GetFuturesData(t,e,Rr)},this.GetNYBOTData=function(t,e){return this.GetFuturesData(t,e,Br)},this.GetCBOTData=function(t,e){return this.GetFuturesData(t,e,_r)},this.GetLMEData=function(t,e){return this.GetFuturesData(t,e,kr)},this.GetTOCOMData=function(t,e){return this.GetFuturesData(t,e,Gr)},this.GetIPEData=function(t,e){return this.GetFuturesData(t,e,Vr)},this.GetFTSEData=function(t,e){var a=r;return a},this.GetFHKData=function(t,e){var a=n;return a},this.GetForeignExchangeData=function(t,e){var a=s;return a},this.GetBITData=function(t,e){var a=s;return a},this.GetETData=function(t,e){throw{Name:"MinuteCoordinateData::GetETData",Error:"not implement"}},this.GetJPData=function(t,e){throw{Name:"MinuteCoordinateData::GetJPData",Error:"not implement"}},this.GetHSXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHSXData",Error:"not implement"}},this.GetHNXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHNXData",Error:"not implement"}},this.GetUPCOMData=function(t,e){throw{Name:"MinuteCoordinateData::GetUPCOMData",Error:"not implement"}}},Pr=new function(){this.TIME_SPLIT=[{Name:"9:00-10:15,10:31-11:30,13:31-15:00",Data:[{Start:900,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:930,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:30-11:30,13:00-15:00",Data:[{Start:930,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2330},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2100,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:00-11:30,13:00-15:00",Data:[{Start:900,End:1130},{Start:1300,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2300},{Start:900,End:1015},{Start:1030,End:1130},{Start:1330,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:901,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:901,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:901,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2101,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:931,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:31-11:30,13:01-15:00",Data:[{Start:931,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1500,Text:"15:00"}]}}],this.MAP_TWOWORDS=new Map([[Mr.DCE+"-JD",{Time:0,Decimal:0,Name:"鸡蛋"}],[Mr.DCE+"-FB",{Time:0,Decimal:2,Name:"纤板"}],[Mr.DCE+"-BB",{Time:0,Decimal:2,Name:"胶板"}],[Mr.DCE+"-PP",{Time:6,Decimal:0,Name:"丙烯"}],[Mr.DCE+"-JM",{Time:6,Decimal:1,Name:"焦煤"}],[Mr.DCE+"-EG",{Time:6,Decimal:0,Name:"乙二醇"}],[Mr.DCE+"-EB",{Time:6,Decimal:0,Name:"苯乙烯"}],[Mr.DCE+"-CS",{Time:6,Decimal:0,Name:"淀粉"}],[Mr.DCE+"-PG",{Time:6,Decimal:0,Name:"液化气"}],[Mr.DCE+"-RR",{Time:6,Decimal:0,Name:"梗米"}],[Mr.DCE+"-LH",{Time:0,Decimal:0,Name:"生猪"}],[Mr.SHFE+"-CU",{Time:4,Decimal:0,Name:"铜"}],[Mr.SHFE+"-AL",{Time:4,Decimal:0,Name:"铝"}],[Mr.SHFE+"-NI",{Time:4,Decimal:0,Name:"镍"}],[Mr.SHFE+"-SN",{Time:4,Decimal:0,Name:"沪锡"}],[Mr.SHFE+"-ZN",{Time:4,Decimal:0,Name:"沪锌"}],[Mr.SHFE+"-PB",{Time:4,Decimal:0,Name:"沪铅"}],[Mr.SHFE+"-RU",{Time:6,Decimal:0,Name:"天然橡胶"}],[Mr.SHFE+"-FU",{Time:6,Decimal:0,Name:"燃料油"}],[Mr.SHFE+"-RB",{Time:6,Decimal:0,Name:"螺纹钢"}],[Mr.SHFE+"-BU",{Time:6,Decimal:0,Name:"石油沥青"}],[Mr.SHFE+"-HC",{Time:6,Decimal:0,Name:"热轧卷板"}],[Mr.SHFE+"-SP",{Time:6,Decimal:0,Name:"纸浆"}],[Mr.SHFE+"-WR",{Time:0,Decimal:0,Name:"线材"}],[Mr.SHFE+"-AG",{Time:5,Decimal:0,Name:"白银"}],[Mr.SHFE+"-AU",{Time:5,Decimal:2,Name:"黄金"}],[Mr.SHFE+"-SS",{Time:4,Decimal:0,Name:"不锈钢"}],[Mr.SHFE+"-AO",{Time:4,Decimal:0,Name:"氧化铝"}],[Mr.SHFE+"-BR",{Time:6,Decimal:0,Name:"合成橡胶"}],[Mr.SHFE+"-NR",{Time:6,Decimal:1,Name:"20号胶"}],[Mr.SHFE+"-SC",{Time:5,Decimal:1,Name:"原油"}],[Mr.SHFE+"-LU",{Time:6,Decimal:0,Name:"低硫燃油"}],[Mr.SHFE+"-BC",{Time:4,Decimal:0,Name:"国际铜"}],[Mr.CZCE+"-CF",{Time:6,Decimal:0,Name:"棉花"}],[Mr.CZCE+"-SR",{Time:6,Decimal:0,Name:"白糖"}],[Mr.CZCE+"-MA",{Time:6,Decimal:0,Name:"甲醇"}],[Mr.CZCE+"-ZC",{Time:6,Decimal:1,Name:"动力煤"}],[Mr.CZCE+"-TA",{Time:6,Decimal:0,Name:"精对苯二甲酸(PTA)"}],[Mr.CZCE+"-RM",{Time:6,Decimal:0,Name:"菜籽粕"}],[Mr.CZCE+"-OI",{Time:6,Decimal:0,Name:"菜籽油"}],[Mr.CZCE+"-ME",{Time:3,Decimal:0,Name:"甲醇(老)"}],[Mr.CZCE+"-FG",{Time:6,Decimal:0,Name:"平板玻璃"}],[Mr.CZCE+"-WS",{Time:0,Decimal:0}],[Mr.CZCE+"-WT",{Time:0,Decimal:0}],[Mr.CZCE+"-GN",{Time:0,Decimal:0}],[Mr.CZCE+"-RO",{Time:0,Decimal:0}],[Mr.CZCE+"-RS",{Time:0,Decimal:0,Name:"菜籽"}],[Mr.CZCE+"-ER",{Time:0,Decimal:0}],[Mr.CZCE+"-RI",{Time:0,Decimal:0,Name:"早籼稻"}],[Mr.CZCE+"-WH",{Time:0,Decimal:0,Name:"强麦"}],[Mr.CZCE+"-AP",{Time:0,Decimal:0,Name:"苹果"}],[Mr.CZCE+"-PM",{Time:0,Decimal:0,Name:"普麦"}],[Mr.CZCE+"-QM",{Time:0,Decimal:0}],[Mr.CZCE+"-TC",{Time:0,Decimal:0}],[Mr.CZCE+"-JR",{Time:0,Decimal:0,Name:"粳稻"}],[Mr.CZCE+"-LR",{Time:0,Decimal:0,Name:"晚籼稻"}],[Mr.CZCE+"-SF",{Time:0,Decimal:0,Name:"硅铁"}],[Mr.CZCE+"-SM",{Time:0,Decimal:0,Name:"锰硅"}],[Mr.CZCE+"-CJ",{Time:0,Decimal:2,Name:"红枣"}],[Mr.CZCE+"-CY",{Time:6,Decimal:0,Name:"棉纱"}],[Mr.CZCE+"-UR",{Time:0,Decimal:0,Name:"尿素"}],[Mr.CZCE+"-SA",{Time:6,Decimal:0,Name:"纯碱"}],[Mr.CZCE+"-PF",{Time:6,Decimal:0,Name:"短纤"}],[Mr.CZCE+"-PK",{Time:0,Decimal:0,Name:"花生"}],[Mr.CFFEX+"-TF",{Time:1,Decimal:3,Name:"二债"}],[Mr.CFFEX+"-TS",{Time:1,Decimal:3,Name:"五债"}],[Mr.CFFEX+"-IH",{Time:2,Decimal:1,Name:"上证股指期货"}],[Mr.CFFEX+"-IC",{Time:2,Decimal:1,Name:"中证股指期货"}],[Mr.CFFEX+"-IF",{Time:2,Decimal:1,Name:"沪深股指期货"}],[Mr.CFFEX+"-IM",{Time:2,Decimal:1,Name:"中证1000股指期货"}],[Mr.GZFE+"-SI",{Time:0,Decimal:2,Name:"工业硅"}],[Mr.GZFE+"-LC",{Time:0,Decimal:2,Name:"碳酸锂"}]]),this.MAP_ONEWORD=new Map([[Mr.DCE+"-C",{Time:6,Decimal:0,Name:"玉米"}],[Mr.DCE+"-L",{Time:6,Decimal:0,Name:"乙烯"}],[Mr.DCE+"-V",{Time:6,Decimal:0,Name:"PVC"}],[Mr.DCE+"-A",{Time:6,Decimal:0,Name:"豆一"}],[Mr.DCE+"-B",{Time:6,Decimal:0,Name:"豆二"}],[Mr.DCE+"-M",{Time:6,Decimal:0,Name:"豆粕"}],[Mr.DCE+"-Y",{Time:6,Decimal:0,Name:"豆油"}],[Mr.DCE+"-P",{Time:6,Decimal:0,Name:"棕榈"}],[Mr.DCE+"-J",{Time:6,Decimal:1,Name:"焦炭"}],[Mr.DCE+"-I",{Time:6,Decimal:1,Name:"铁矿"}],[Mr.CFFEX+"-T",{Time:1,Decimal:3,Name:"十债"}]]),this.AddNewFutures=function(t){if(t){var e=t.Suffix+"-"+t.Symbol,a={Time:t.Time,Decimal:t.Decimal,Name:t.Name};1==t.Symbol.length?this.MAP_ONEWORD.set(e,a):2==t.Symbol.length&&this.MAP_TWOWORDS.set(e,a)}},this.GetData=function(t){var e=t.charAt(0),a=t.substr(0,2),i=null,r=null;return Mr.IsDCE(t)?(i=Mr.DCE+"-"+e,r=Mr.DCE+"-"+a):Mr.IsSHFE(t)?(i=Mr.SHFE+"-"+e,r=Mr.SHFE+"-"+a):Mr.IsCFFEX(t)?(i=Mr.CFFEX+"-"+e,r=Mr.CFFEX+"-"+a):Mr.IsCZCE(t)?(i=Mr.CZCE+"-"+e,r=Mr.CZCE+"-"+a):Mr.IsGZFE(t)&&(i=Mr.GZFE+"-"+e,r=Mr.GZFE+"-"+a),this.MAP_TWOWORDS.has(r)?this.MAP_TWOWORDS.get(r):this.MAP_ONEWORD.has(i)?this.MAP_ONEWORD.get(i):null},this.GetSplitData=function(t){var e=this.GetData(t);return e?this.TIME_SPLIT[e.Time]:null},this.GetDecimal=function(t){var e=this.GetData(t);return e?e.Decimal:2}},Or=new Lr,Rr=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.FUTURES_LIST=[{Symbol:"GC",Decimal:1,Time:0,Name:"COMEX黄金"},{Symbol:"QO",Decimal:2,Time:0,Name:"迷你黄金"},{Symbol:"MG",Decimal:1,Time:0,Name:"微型黄金"},{Symbol:"QI",Decimal:4,Time:0,Name:"迷你白银"},{Symbol:"SI",Decimal:3,Time:0,Name:"COMEX白银"},{Symbol:"HG",Decimal:4,Time:0,Name:"COMEX铜"}],this.MarketSuffix=".COMEX"},Br=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"9:00-2:20",Data:[{Start:900,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1700,Text:"17:00"},{Value:100,Text:"1:00"}]}},{Name:"15:30-1:00",Data:[{Start:1530,End:2359},{Start:0,End:100}],Coordinate:{Full:[{Value:1600,Text:"16:00"},{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"}],Simple:[{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"}],Min:[{Value:1600,Text:"16:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}]}}],this.TIME_SPLIT2=[{Name:"10:00-3:20",Data:[{Start:1e3,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:1e3,Text:"10:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"16:30-2:00",Data:[{Start:1630,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Min:[{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SB",Decimal:2,Time:1},{Symbol:"CT",Decimal:2,Time:0}],this.MarketSuffix=".NYBOT",this.GetMarketStatus=function(t){var e=Yr(-4),a=e.getDay(),i=100*e.getHours()+e.getMinutes();if(6==a||0==a)return 0;var r=this.GetFuturesInfo(t);if(!r)return 2;if("SB"==r.Symbol){if(i>300&&i<1400)return 2}else if("CT"==r.Symbol)return i>=0&&i<=1500||i>=2e3&&i<=2359?2:1;return 0}},_r=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"8:00-2:20",Data:[{Start:800,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"08:00-20:45 21:31-02:20",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"06:00-04:15 04:31-05:00",Data:[{Start:600,End:2359},{Start:0,End:415},{Start:431,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"9:00-3:20",Data:[{Start:900,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"9:00-3:45",Data:[{Start:900,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"09:00-21:45 22:31-03:20",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"09:00-21:45 22:31-03:45",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"07:00-05:15 05:31-06:00",Data:[{Start:700,End:2359},{Start:0,End:515},{Start:531,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"ZC",Decimal:2,Time:0,Name:"玉米"},{Symbol:"XC",Decimal:2,Time:1,Name:"迷你玉米"},{Symbol:"ZS",Decimal:2,Time:0,Name:"大豆"},{Symbol:"XK",Decimal:2,Time:1,Name:"迷你大豆"},{Symbol:"ZL",Decimal:2,Time:0,Name:"豆油"},{Symbol:"ZR",Decimal:2,Time:0,Name:"稻谷"},{Symbol:"ZO",Decimal:2,Time:0,Name:"燕麦"},{Symbol:"ZW",Decimal:2,Time:0,Name:"小麦"},{Symbol:"XW",Decimal:2,Time:1,Name:"迷你小麦"},{Symbol:"ZM",Decimal:1,Time:0,Name:"豆粕"},{Symbol:"EH",Decimal:3,Time:2},{Symbol:"YM",Decimal:0,Time:2,Name:"小型道指"},{Symbol:"ES",Decimal:2,Time:2,Name:"小型标普"},{Symbol:"NQ",Decimal:2,Time:2,Name:"小型纳指"},{Symbol:"TY",Decimal:4,Time:2,Name:"10年美国债"},{Symbol:"TU",Decimal:4,Time:2,Name:"2年美国债"},{Symbol:"FV",Decimal:4,Time:2,Name:"5年美国债"},{Symbol:"US",Decimal:4,Time:2,Name:"30年美国债"},{Symbol:"UL",Decimal:4,Time:2,Name:"超国债"}],this.MarketSuffix=".CBOT"},kr=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"LME 9:00-3:00",Data:[{Start:900,End:2359},{Start:0,End:300}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1800,Text:"18:00"},{Value:300,Text:"3:00"}]}}],this.TIME_SPLIT=[{Name:"LME 8:00-2:00",Data:[{Start:800,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SN",Decimal:0,Time:0,Name:"LME锡"},{Symbol:"AH",Decimal:2,Time:0,Name:"LME铝"},{Symbol:"PB",Decimal:2,Time:0,Name:"LME铅"},{Symbol:"ZS",Decimal:2,Time:0,Name:"LME锌"},{Symbol:"CA",Decimal:2,Time:0,Name:"LME铜"},{Symbol:"NI",Decimal:0,Time:0,Name:"LME镍"}],this.MarketSuffix=".LME"},Gr=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.TimeType=0,this.TIME_SPLIT=[{Name:"15:30-04:30 07:46-14:15",Data:[{Start:1530,End:2359},{Start:0,End:430},{Start:746,End:1415}],Coordinate:{Full:[{Value:1530,Text:"15:30"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"},{Value:430,Text:"4:30"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1415,Text:"14:15"}],Simple:[{Value:1530,Text:"15:30"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:430,Text:"4:30"},{Value:1100,Text:"11:00"},{Value:1415,Text:"14:15"}],Min:[{Value:1530,Text:"15:30"},{Value:100,Text:"1:00"},{Value:1415,Text:"14:15"}]}}],this.FUTURES_LIST=[{Symbol:"JRV",Decimal:0,Time:0,Name:"东京TSR20橡胶"},{Symbol:"JPL",Decimal:0,Time:0,Name:"东京铂金"},{Symbol:"JAU",Decimal:0,Time:0,Name:"东京黄金"},{Symbol:"JCO",Decimal:0,Time:0,Name:"中东原油"},{Symbol:"JRU",Decimal:1,Time:0,Name:"东京RSS3橡胶橡胶"},{Symbol:"JAG",Decimal:1,Time:0,Name:"日白银"},{Symbol:"JPA",Decimal:1,Time:0,Name:"日钯金"}],this.MarketSuffix=".TOCOM"},Vr=new function(){this.newMethod=Lr,this.newMethod(),delete this.newMethod,this.MarketSuffix=".IPE",this.TIME_SPLIT=[{Name:"8:00-6:00",Data:[{Start:800,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Min:[{Value:800,Text:"8:00"},{Value:2e3,Text:"20:00"},{Value:600,Text:"6:00"}]}}],this.TIME_SPLIT2=[{Name:"09:00-07:00",Data:[{Start:900,End:2359},{Start:0,End:700}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Min:[{Value:900,Text:"9:00"},{Value:2100,Text:"21:00"},{Value:700,Text:"7:00"}]}}],this.FUTURES_LIST=[{Symbol:"RC",Decimal:2,Time:0,Name:"罗布斯塔咖啡"},{Symbol:"W",Decimal:2,Time:0,Name:"白糖"},{Symbol:"C",Decimal:2,Time:0,Name:"伦敦可可"},{Symbol:"R",Decimal:2,Time:0,Name:"长期英国国债"},{Symbol:"L",Decimal:2,Time:0,Name:"3个月英镑利率"},{Symbol:"T",Decimal:2,Time:0,Name:"WTI原油"},{Symbol:"G",Decimal:2,Time:0,Name:"低硫柴油"},{Symbol:"B",Decimal:2,Time:0,Name:"布伦特原油"}]};function Hr(t){var e=2;if(!t)return e;var a=t.toUpperCase();return"function"==typeof Mr.GetCustomDecimal?Mr.GetCustomDecimal(a):(e=Mr.IsSHSZFund(a)?3:Mr.IsSHO(a)||Mr.IsSZO(a)?Mr.GetSHODecimal(a):Mr.IsChinaFutures(a)?Pr.GetDecimal(a):Mr.IsFHK(a)?Mr.GetFHKDecimal(a):Mr.IsFTSE(a)?Mr.GetFTSEDecimal(a):Mr.IsBIT(a)?Mr.GetBITDecimal(a):Mr.IsET(a)?Mr.GetETDecimal(a):Mr.IsForeignExchange(a)?Mr.GetForeignExchangeDecimal(a):Mr.IsNYMEX(a)?Or.GetDecimal(a):Mr.IsCOMEX(a)?Rr.GetDecimal(a):Mr.IsNYBOT(a)?Br.GetDecimal(a):Mr.IsCBOT(a)?_r.GetDecimal(a):Mr.IsLME(a)?kr.GetDecimal(a):Mr.IsTOCOM(a)?Gr.GetDecimal(a):Mr.IsIPE(a)?Vr.GetDecimal(a):Mr.IsHK(a)?Mr.GetHKDecimal(a):Mr.IsTW(a)?Mr.GetTWDecimal(a):Mr.IsJP(a)?Mr.GetJPDecimal(a):Mr.IsHSX(a)?Mr.GetHSXDecimal(a):Mr.IsHNX(a)?Mr.GetHNXDecimal(a):Mr.IsUPCOM(a)?Mr.GetUPCOMDecimal(a):Mr.GetDefaultDecimal(a),e)}function Yr(t){if("number"===typeof t){var e=new Date,a=e.getTime(),i=6e4*e.getTimezoneOffset(),r=a+i;return new Date(r+36e5*t)}}if(!l)l={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};var Xr={Domain:"https://opensource.zealink.com",CacheDomain:"https://opensourcecache.zealink.com",DrawIcon:{Family:"iconfont",Data:new Map([[1,{Text:"",Color:"rgb(243,28,15)"}],[2,{Text:"",Color:"rgb(87,247,41)"}],[3,{Text:"",Color:"rgb(237,153,0)"}],[4,{Text:"",Color:"rgb(237,153,0)"}],[5,{Text:"",Color:"rgb(237,153,0)"}],[6,{Text:"",Color:"rgb(140,57,208)"}],[7,{Text:"",Color:"rgb(246,135,37)"}],[8,{Text:"",Color:"rgb(85,231,56)"}],[9,{Text:"",Color:"rgb(227,61,41)"}],[10,{Text:"",Color:"rgb(216,78,48)"}],[11,{Text:"",Color:"rgb(249,187,0)"}],[12,{Text:"",Color:"rgb(249,187,0)"}],[13,{Text:"",Color:"rgb(216,42,0)"}],[14,{Text:"",Color:"rgb(58,90,236)"}],[15,{Text:"",Color:"rgb(227,149,0)"}],[16,{Text:"",Color:"rgb(208,82,78)"}],[17,{Text:"",Color:"rgb(234,114,26)"}],[18,{Text:"",Color:"rgb(116,25,255)"}],[19,{Text:"",Color:"rgb(102,9,11)"}],[20,{Text:"",Color:"rgb(127,125,137)"}],[21,{Text:"",Color:"rgb(110,188,255)"}],[22,{Text:"",Color:"rgb(238,79,51)"}],[23,{Text:"",Color:"rgb(244,71,0)"}],[24,{Text:"",Color:"rgb(102,183,248)"}],[25,{Text:"",Color:"rgb(234,88,231)"}],[26,{Text:"",Color:"rgb(242,171,0)"}],[27,{Text:"",Color:"rgb(87,247,168)"}],[28,{Text:"",Color:"rgb(97,204,113)"}],[29,{Text:"",Color:"rgb(84,115,193)"}],[30,{Text:"",Color:"rgb(141,51,255)"}],[31,{Text:"",Color:"rgb(200,126,24)"}],[32,{Text:"",Color:"rgb(195,41,32)"}],[33,{Text:"",Color:"rgb(215,85,194)"}],[34,{Text:"",Color:"rgb(250,222,105)"}],[35,{Text:"",Color:"rgb(112,249,224)"}],[36,{Text:"",Color:"rgb(217,107,98)"}],[37,{Text:"",Color:"rgb(114,231,17)"}],[38,{Text:"",Color:"rgb(238,31,25)"}],[39,{Text:"",Color:"rgb(92,247,113)"}],[40,{Text:"",Color:"rgb(175,175,175)"}],[41,{Text:"",Color:"rgb(252,228,23)"}],[42,{Text:"",Color:"rgb(88,195,235)"}],[43,{Text:"",Color:"rgb(55,74,94)"}],[44,{Text:"",Color:"rgb(248,175,33)"}],[45,{Text:"",Color:"rgb(194,180,112)"}],[46,{Text:"",Color:"rgb(50,153,28)"}],[47,{Text:"",Color:"rgb(17,65,152)"}],[48,{Text:"",Color:"rgb(194,55,26)"}],[49,{Text:"",Color:"rgb(243,0,0)"}]])},CustomDrawIcon:{Data:new Map},CustomFunction:{Data:new Map},CustomVariant:{Data:new Map},GetDrawIcon:function(t){var e;if(Xr.CustomDrawIcon.Data.has(t)){var a=Xr.CustomDrawIcon.Data.get(t);return e=a.Symbol?{Symbol:a.Symbol,Color:a.Color,IconFont:!1,ID:t}:{Symbol:a.Text,Color:a.Color,Family:a.Family,IconFont:!0,ID:t},e}if(Xr.DrawIcon.Data.has(t)){var i=Xr.DrawIcon.Data.get(t);return e={Symbol:i.Text,Color:i.Color,Family:Xr.DrawIcon.Family,IconFont:!0,ID:t},e}return null},GetDrawTextIcon:function(t){var e=new Map([[1,{Symbol:"↑",Color:"rgb(238,44,44)"}],[2,{Symbol:"↓",Color:"rgb(0,139,69)"}],[3,{Symbol:"??"}],[4,{Symbol:"??"}],[5,{Symbol:"??"}],[6,{Symbol:"??"}],[7,{Symbol:"B",Color:"rgb(238,44,44)"}],[8,{Symbol:"S",Color:"rgb(0,139,69)"}],[9,{Symbol:"??"}],[10,{Symbol:"??"}],[11,{Symbol:"??"}],[12,{Symbol:"??"}],[13,{Symbol:"B",Color:"rgb(178,34,34)"}],[14,{Symbol:"S",Color:"rgb(0,139,69)"}],[36,{Symbol:"Χ",Color:"rgb(238,44,44)"}],[37,{Symbol:"X",Color:"rgb(0,139,69)"}],[38,{Symbol:"▲",Color:"rgb(238,44,44)"}],[39,{Symbol:"▼",Color:"rgb(0,139,69)"}],[40,{Symbol:"◉",Color:"rgb(238,44,44)"}],[41,{Symbol:"◈",Color:"rgb(238,44,44)"}],[42,{Symbol:"??"}],[43,{Symbol:"??"}],[44,{Symbol:"??"}],[45,{Symbol:"??"}],[46,{Symbol:"??"}],[47,{Symbol:"??"}]]),a=e.get(t);return a},IsCustomFunction:function(t){return!!Xr.CustomFunction.Data.has(t)},IsCustomVariant:function(t){return!!Xr.CustomVariant.Data.has(t)}},Wr={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"},Ur={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},zr={FromCodePoint:function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))},IsWhiteSpace:function(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0},IsLineTerminator:function(t){return 10===t||13===t||8232===t||8233===t},IsIdentifierStart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Ur.NonAsciiIdentifierStart.test(zr.FromCodePoint(t))},IsIdentifierPart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||35===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Ur.NonAsciiIdentifierPart.test(zr.FromCodePoint(t))},IsDecimalDigit:function(t){return t>=48&&t<=57},IsHexDigit:function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},isOctalDigit:function(t){return t>=48&&t<=55}},Kr={};function Jr(){}function Qr(){this.Error=[],this.RecordError=function(t){this.Error.push(t)},this.ConstructError=function(t,e){var a=new Error(t);try{throw a}catch(i){Object.create&&Object.defineProperties&&(a=Object.create(i),a.Column=e)}return a},this.CreateError=function(t,e,a,i,r){var n="Line "+e+": "+i,s=this.ConstructError(n,a);return s.Index=t,s.LineNumber=e,s.Description=i,s.Word=r,s},this.ThrowError=function(t,e,a,i,r){var n=this.CreateError(t,e,a,i,r);throw n},this.ThrowDownloadJob=function(t,e,a,i,r){var n=this.CreateError(t,e,a,i);throw n.Job=r,n}}function $r(t,e){this.Source=t,this.ErrorHandler=e,this.Length=t.length,this.Index=0,this.LineNumber=t.length>0?1:0,this.LineStart=0,this.CurlyStack=[],this.SaveState=function(){return{Index:this.Index,LineNumber:this.LineNumber,LineStart:this.LineStart}},this.RestoreState=function(t){this.Index=t.Index,this.LineNumber=t.LineNumber,this.LineStart=t.LineStart},this.IsEOF=function(){return this.Index>=this.Length},this.IsKeyword=function(t){return!1},this.CodePointAt=function(t){var e=this.Source.charCodeAt(t);if(e>=55296&&e<=56319){var a=this.Source.charCodeAt(t+1);if(a>=56320&&a<=57343){var i=e;e=1024*(i-55296)+a-56320+65536}}return e},this.Lex=function(){if(this.IsEOF())return{Type:2,Value:"",LineNumber:this.LineNumber,LineStart:this.LineStart,Start:this.Index,End:this.Index};var t=this.Source.charCodeAt(this.Index);return zr.IsIdentifierStart(t)?this.ScanIdentifier():40===t||41===t||59===t?this.ScanPunctuator():39===t||34===t?this.ScanStringLiteral():46==t?zr.IsDecimalDigit(this.Source.charCodeAt(this.Index+1))?this.ScanNumericLiteral():this.ScanPunctuator():zr.IsDecimalDigit(t)?this.ScanNumericLiteral():t>=55296&&t<57343&&zr.IsIdentifierStart(this.CodePointAt(this.Index))?this.ScanIdentifier():this.ScanPunctuator()},this.ScanIdentifier=function(){var t,e=this.Index,a=92===this.Source.charCodeAt(e)?this.GetComplexIdentifier():this.GetIdentifier();if(t=a.length?3:this.IsKeyword(a)?4:null==a?5:"true"==a||"false"==a?1:3,3!=t&&e+a.length!=this.Index){this.Index;throw this.Index=e,Wr.InvalidEscapedReservedWord}return"AND"!=a&&"OR"!=a||(t=7),{Type:t,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:e,End:this.Index}},this.GetIdentifier=function(){var t=this.Index++;while(!this.IsEOF()){var e=this.Source.charCodeAt(this.Index);if(92==e)return this.Index=t,this.GetComplexIdentifier();if(e>=55296&&e<57343)return this.Index=t,this.GetComplexIdentifier();if(!zr.IsIdentifierPart(e))break;++this.Index}return this.Source.slice(t,this.Index)},this.ScanPunctuator=function(){var t=this.Index,e=this.Source[this.Index];switch(e){case"(":++this.Index;break;case")":case";":case",":++this.Index;break;case".":++this.Index;break;default:e=this.Source.substr(this.Index,3),"AND"==e?this.Index+=3:(e=this.Source.substr(this.Index,2),"&&"===e||"||"===e||"=="===e||"!="===e||"<="===e||">="===e||"=>"===e||":="==e||"OR"==e||"<>"==e?this.Index+=2:(e=this.Source[this.Index],"<>=!+-*%&|^/:".indexOf(e)>=0&&++this.Index))}return this.Index==t&&this.ThrowUnecpectedToken(),{Type:7,Value:e,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanStringLiteral=function(){var t=this.Index,e=this.Source[this.Index];++this.Index;var a="";while(!this.IsEOF()){var i=this.Source[this.Index++];if(i==e){e="";break}if("\\"==i)throw"not complete";if(zr.IsLineTerminator(i.charCodeAt(0)))break;a+=i}return""!=e&&(this.Index=t,this.ThrowUnecpectedToken()),{Type:8,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanNumericLiteral=function(){var t=this.Index,e=this.Source[this.Index],a="";if("."!=e){if(a=this.Source[this.Index++],e=this.Source[this.Index],"0"==a&&("x"==e||"X"==e))return++this.Index,this.ScanHexLiteral(t);while(zr.IsDecimalDigit(this.Source.charCodeAt(this.Index)))a+=this.Source[this.Index++];e=this.Source[this.Index]}if("."==e){a+=this.Source[this.Index++];while(zr.IsDecimalDigit(this.Source.charCodeAt(this.Index)))a+=this.Source[this.Index++];e=this.Source[this.Index]}if("e"==e||"E"==e)if(a+=this.Source[this.Index++],e=this.Source[this.Index],"+"!=e&&"-"!=e||(a+=this.Source[this.Index]),zr.IsDecimalDigit(this.Source.charCodeAt(this.Index)))while(zr.IsDecimalDigit(this.Source.charCodeAt(this.Index)))a+=this.Source[this.Index++];else this.ThrowUnecpectedToken();return zr.IsIdentifierStart(this.Source.charCodeAt(this.Index))&&this.ThrowUnecpectedToken(),{Type:6,Value:parseFloat(a),LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanComments=function(){this.Index;while(!this.IsEOF()){var t=this.Source.charCodeAt(this.Index);if(zr.IsWhiteSpace(t))++this.Index;else if(zr.IsLineTerminator(t))++this.Index,13==t&&10==this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,!0;else if(47==t){if(t=this.Source.charCodeAt(this.Index+1),47!=t)break;this.Index+=2;this.SkipSingleLineComment(2);!0}else{if(123!=t)break;this.Index+=1;this.SkipMultiLineComment()}}},this.SkipMultiLineComment=function(){var t=[];while(!this.IsEOF()){var e=this.Source.charCodeAt(this.Index);if(zr.IsLineTerminator(e))++this.LineNumber,++this.Index,this.LineStart=this.Index;else{if(125==e)return this.Index+=1,t;++this.Index}}return t},this.SkipSingleLineComment=function(t){var e=[];while(!this.IsEOF()){var a=this.Source.charCodeAt(this.Index);if(++this.Index,zr.IsLineTerminator(a))return 13===a&&10===this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,e}return e},this.ThrowUnecpectedToken=function(t,e){return t||(t=Wr.UnexpectedTokenIllegal),this.ErrorHandler.ThrowError(this.Index,this.LineNumber,this.Index-this.LineStart+1,t,e)}}function jr(t){this.ErrorHandler=new Qr,this.Scanner=new $r(t,this.ErrorHandler),this.Buffer=[],this.GetNextToken=function(){if(0==this.Buffer.length){this.Scanner.ScanComments();if(!this.Scanner.IsEOF()){var t=this.Scanner.Lex(),e={Type:Kr[t.Type],Value:this.Scanner.Source.slice(t.Start,t.End)};this.Buffer.push(e)}}return this.Buffer.shift()}}Kr[1]="Boolean",Kr[2]="<end>",Kr[3]="Identifier",Kr[4]="Keyword",Kr[5]="Null",Kr[6]="Numeric",Kr[7]="Punctuator",Kr[8]="String",Kr[9]="RegularExpression",Kr[10]="Template",Jr.GetPeriodInfo=function(t){var e=[{Name:"MIN1",Period:4,Order:1},{Name:"MIN5",Period:5,Order:2},{Name:"MIN15",Period:6,Order:3},{Name:"MIN30",Period:7,Order:4},{Name:"MIN60",Period:8,Order:5},{Name:"DAY",Period:0,Order:1e3},{Name:"MULTIDAY",Period:40002,Order:1002},{Name:"DAY2",Period:40002,Order:1002},{Name:"DAY3",Period:40003,Order:1003},{Name:"DAY4",Period:40004,Order:1004},{Name:"DAY5",Period:40005,Order:1005},{Name:"WEEK",Period:1,Order:1005},{Name:"DAY6",Period:40006,Order:1006},{Name:"DAY7",Period:40007,Order:1007},{Name:"DAY8",Period:40008,Order:1008},{Name:"DAY9",Period:40009,Order:1009},{Name:"DAY10",Period:40009,Order:1010},{Name:"WEEK2",Period:21,Order:1010},{Name:"DAY11",Period:40011,Order:1011},{Name:"DAY12",Period:40012,Order:1012},{Name:"DAY13",Period:40013,Order:1013},{Name:"DAY14",Period:40014,Order:1014},{Name:"MONTH",Period:2,Order:1030},{Name:"SEASON",Period:9,Order:1090},{Name:"HALFYEAR",Period:22,Order:1180},{Name:"YEAR",Period:3,Order:1365}];if(t.Name){for(var a in e)if(t.Name&&e[a].Name==t.Name)return e[a];return null}if(ze.IsNumber(t.PeriodID)){for(var a in e)if(e[a].Period==t.PeriodID)return e[a];return null}return null},Jr.GetConvertValueName=function(t){var e;return"COVER_C"==t?e="CLOSE":"COVER_O"==t?e="OPEN":"COVER_H"==t?e="HIGH":"COVER_L"==t?e="LOW":"COVER_A"==t?e="AMOUNT":"COVER_V"==t&&(e="VOL"),e};var Zr={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function qr(t){this.IsNeedIndexData=!1,this.IsNeedLatestIndexData=!1,this.IsNeedSymbolData=!1,this.IsNeedMarginData=new Set,this.IsNeedNewsAnalysisData=new Set,this.NeedBlockIncreaseData=[],this.IsNeedSymbolExData=new Set,this.NeedHK2SHSZData=[],this.IsNeedSectionFinance=new Map,this.FunctionData=[],this.Dynainfo=[],this.IsAPIData=[],this.ExecuteIndex=[],this.OtherSymbolData=[],this.PeriodSymbolData=[],this.ErrorHandler=t,this.GetDataJobList=function(){var t=[];this.IsNeedSymbolData&&t.push({ID:sn.JOB_DOWNLOAD_SYMBOL_DATA}),this.IsNeedIndexData&&t.push({ID:sn.JOB_DOWNLOAD_INDEX_DATA}),this.IsNeedLatestIndexData&&t.push({ID:sn.JOB_DOWNLOAD_LATEST_INDEX_DATA});for(var e=0;e<this.Dynainfo.length;++e){var a=this.Dynainfo[e];t.push(a)}for(var e in this.NeedBlockIncreaseData)t.push(this.NeedBlockIncreaseData[e]);var i,r=(0,h.default)(this.IsNeedMarginData);try{for(r.s();!(i=r.n()).done;){var n=i.value;t.push({ID:n})}}catch(f){r.e(f)}finally{r.f()}for(var e in this.NeedHK2SHSZData)t.push(this.NeedHK2SHSZData[e]);var s,o=(0,h.default)(this.IsNeedNewsAnalysisData);try{for(o.s();!(s=o.n()).done;){n=s.value;t.push({ID:n})}}catch(f){o.e(f)}finally{o.f()}var l,u=(0,h.default)(this.IsNeedSymbolExData);try{for(u.s();!(l=u.n()).done;){n=l.value;t.push({ID:n})}}catch(f){u.e(f)}finally{u.f()}var c,d=(0,h.default)(this.IsNeedSectionFinance);try{for(d.s();!(c=d.n()).done;){a=c.value;t.push({ID:sn.JOB_DOWNLOAD_SECTION_SF,SF:a})}}catch(f){d.e(f)}finally{d.f()}for(var e in this.IsAPIData){a=this.IsAPIData[e];t.push(a)}for(var e in this.ExecuteIndex){a=this.ExecuteIndex[e];t.push(a)}for(var e in this.OtherSymbolData){a=this.OtherSymbolData[e];t.push(a)}for(var e in this.PeriodSymbolData){a=this.PeriodSymbolData[e];t.push(a)}for(var e in this.FunctionData){a=this.FunctionData[e];t.push(a)}return t},this.VerifySymbolVariable=function(t,e){var a=new Set(["INDEXA","INDEXC","INDEXH","INDEXL","INDEXO","INDEXV","INDEXDEC","INDEXADV"]);if(a.has(t))this.IsNeedIndexData=!0;else{var i=new Set(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]);if(i.has(t))this.IsNeedSymbolData=!0;else{"VOLR"===t&&(this.IsNeedSymbolExData.has(sn.JOB_DOWNLOAD_VOLR_DATA)||this.IsNeedSymbolExData.add(sn.JOB_DOWNLOAD_VOLR_DATA));var r=new Set(["CAPITAL","TOTALCAPITAL","EXCHANGE","HYBLOCK","DYBLOCK","GNBLOCK","FGBLOCK","ZSBLOCK","ZHBLOCK","ZDBLOCK","HYZSCODE","GNBLOCKNUM","FGBLOCKNUM","ZSBLOCKNUM","ZHBLOCKNUM","ZDBLOCKNUM","HYSYL","HYSJL"]);if(r.has(t)){var n={ID:sn.JOB_DOWNLOAD_VARIANT,VariantName:t};return e&&(n.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(n)}if("FROMOPEN"!=t){if("ADVANCE"==t||"DECLINE"==t){n={ID:sn.JOB_DOWNLOAD_INDEX_INCREASE_DATA,IsSelfSymbol:!0,FunctionName:t};return e&&(n.Token={Index:e.Start,Line:e.LineNumber}),void this.NeedBlockIncreaseData.push(n)}if(t.indexOf("#")>0){var s=t.split("#");if(2!=s.length){var o="".concat(t,", 跨周期语法错误, 变量名#周期");this.ThrowUnexpectedToken(e,o)}else{if(["C","CLOSE","O","OPEN","H","HIGH","L","LOW","AMOUNT","AMO","VOL","V","VOLINSTK"].indexOf(s[0])<0){o="".concat(t,", 跨周期语法错误, 数据只支持'OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK'");this.ThrowUnexpectedToken(e,o)}if(["MIN1","MIN5","MIN15","MIN30","MIN60","MIN120","MIN240","DAY","WEEK","MONTH","SEASON","YEAR","HALFYEAR","WEEK2","MULTIDAY","DAY2","DAY3","DAY4","DAY5","DAY6","DAY7","DAY8","DAY9","DAY10","DAY11","DAY12","DAY13","DAY14","DAY15"].indexOf(s[1])<0){o="".concat(t,", 跨周期语法错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'");this.ThrowUnexpectedToken(e,o)}n={ID:sn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,VarName:t,ValueName:s[0],PeriodName:s[1]};e&&(n.Token={Index:e.Start,Line:e.LineNumber}),this.PeriodSymbolData.push(n)}}else if(Xr.IsCustomVariant(t)){n={VariantName:t,ID:sn.JOB_CUSTOM_VARIANT_DATA};return e&&(n.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(n)}}else this.IsNeedLatestIndexData=!0}}},this.VerifySymbolLiteral=function(t,e){if(ze.IsString(t)&&t.indexOf("$")>0){var a=t.split("$");if(2!=a.length)return;var i={Literal:t,ID:sn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA};e&&(i.Token={Index:e.Start,Line:e.LineNumber}),this.OtherSymbolData.push(i)}},this.VerifySymbolFunction=function(t,e,a){if(Xr.IsCustomFunction(t.Name)){var i={FunctionName:t.Name,ID:sn.JOB_CUSTOM_FUNCTION_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("DYNAINFO"!=t.Name){if("FINANCE"==t.Name){i={ID:sn.JOB_DOWNLOAD_FINANCE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINVALUE"==t.Name){i={ID:sn.JOB_DOWNLOAD_FINVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINONE"==t.Name){i={ID:sn.JOB_DOWNLOAD_FINONE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("GPJYVALUE"==t.Name){i={ID:sn.JOB_DOWNLOAD_GPJYVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("SCJYVALUE"==t.Name){i={ID:sn.JOB_DOWNLOAD_SCJYVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("MARGIN"!==t.Name)if("NEWS"!==t.Name){if("HK2SHSZ"===t.Name){i={ID:sn.JOB_DOWNLOAD_HK_TO_SHSZ,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedHK2SHSZData.push(i)}if("COST"==t.Name||"WINNER"==t.Name||"PPART"==t.Name||"COSTEX"==t.Name||"LWINNER"==t.Name||"PWINNER"==t.Name){i={ID:sn.JOB_DOWNLOAD_FINANCE,Args:[7],FunctionName:"FINANCE",FunctionName2:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("INBLOCK"==t.Name){i={ID:sn.JOB_DOWNLOAD_VARIANT,VariantName:"INBLOCK"};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("BETA"!==t.Name){if("UPCOUNT"==t.Name||"DOWNCOUNT"==t.Name){i={ID:sn.JOB_DOWNLOAD_INDEX_INCREASE_DATA,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedBlockIncreaseData.push(i)}if("STKINDI"==t.Name||"CALCSTOCKINDEX"==t.Name){i={ID:sn.JOB_EXECUTE_INDEX,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.ExecuteIndex.push(i)}if("COVER_C"==t.Name||"COVER_O"==t.Name||"COVER_H"==t.Name||"COVER_L"==t.Name||"COVER_A"==t.Name||"COVER_V"==t.Name){var r=e[0].Value;if(["MIN1","MIN5","MIN15","MIN30","MIN60","DAY","WEEK","MONTH","SEASON","YEAR"].indexOf(r)<0){var n="".concat(t.Name,", 跨周期函数错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'");this.ThrowUnexpectedToken(a,n)}var s=Jr.GetConvertValueName(t.Name);i={ID:sn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,FunctionName:t.Name,ValueName:s,PeriodName:r};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.PeriodSymbolData.push(i)}if("SF"!=t.Name){if("LOADAPIDATA"==t.Name){i={Name:t.Name,ID:sn.JOB_DOWNLOAD_CUSTOM_API_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.IsAPIData.push(i)}var o=new Set(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]);if(o.has(t.Name)){i={Name:t.Name,ID:sn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.OtherSymbolData.push(i)}}else{var h=sn.GetSectionReportPeriod(e[0].Value,e[1].Value);if(!h)return;var l=sn.GetSectionFinanceID(e[2].Value);if(!l)return;var u=h.Year+"-"+h.Quarter;if(this.IsNeedSectionFinance.has(u)){c=this.IsNeedSectionFinance.get(u);c.Fields.has(l)||c.Fields.add(l)}else{var c={Period:h,Fields:new Set([l])};this.IsNeedSectionFinance.set(u,c)}}}else this.IsNeedIndexData=!0}else{var d=sn.GetNewsAnalysisID(e[0].Value);d&&!this.IsNeedNewsAnalysisData.has(d)&&this.IsNeedNewsAnalysisData.add(d)}else{var f=sn.GetMarginJobID(e[0].Value);f&&!this.IsNeedMarginData.has(f)&&this.IsNeedMarginData.add(f)}}else{var i={ID:sn.JOB_DOWNLOAD_SYMBOL_LATEST_DATA,Args:e,FunctionName:t.Name};this.Dynainfo.push(i)}},this.VerifyMemberVariable=function(t,e,a){var i={ID:sn.JOB_EXECUTE_INDEX,Member:{Object:t,Property:e}};a&&(i.Token={Index:a.Start,Line:a.LineNumber}),this.ExecuteIndex.push(i)},this.ExpressionStatement=function(t){return{Type:Zr.ExpressionStatement,Expression:t}},this.Script=function(t){return{Type:Zr.Program,Body:t,SourceType:"通达信脚本"}},this.SequenceExpression=function(t){return{Type:Zr.SequenceExpression,Expression:t}},this.BinaryExpression=function(t,e,a){var i="||"===t||"&&"===t||"AND"==t||"OR"==t,r=i?Zr.LogicalExpression:Zr.BinaryExpression;return{Type:r,Operator:t,Left:e,Right:a}},this.Literal=function(t,e,a){return this.VerifySymbolLiteral(t,a),{Type:Zr.Literal,Value:t,Raw:e}},this.Identifier=function(t,e){return this.VerifySymbolVariable(t,e),{Type:Zr.Identifier,Name:t}},this.MemberIdentifier=function(t,e){return{Type:Zr.Identifier,Name:t}},this.AssignmentExpression=function(t,e,a){return{Type:Zr.AssignmentExpression,Operator:t,Left:e,Right:a}},this.UnaryExpression=function(t,e){return{Type:Zr.UnaryExpression,Operator:t,Argument:e,Prefix:!0}},this.EmptyStatement=function(){return{Type:Zr.EmptyStatement}},this.CallExpression=function(t,e,a){return this.VerifySymbolFunction(t,e,a),{Type:Zr.CallExpression,Callee:t,Arguments:e}},this.StaticMemberExpression=function(t,e,a){return this.VerifyMemberVariable(t,e,a),{Type:Zr.MemberExpression,Computed:!1,Object:t,Property:e}},this.Directive=function(t,e){return{Type:Zr.ExpressionStatement,Expression:t,Directive:e}},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.UnexpectedTokenError=function(t,e){var a=e||Wr.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber;return this.ErrorHandler.CreateError(r,n,-1,a)}}}function tn(t){this.ErrorHandler=new Qr,this.Scanner=new $r(t,this.ErrorHandler),this.Node=new qr(this.ErrorHandler),this.LookAhead={Type:2,Value:"",LineNumber:this.Scanner.LineNumber,LineStart:0,Start:0,End:0},this.HasLineTerminator=!1,this.Context={IsModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,FirstCoverInitializedNameError:null,IsAssignmentTarget:!1,IsBindingElement:!1,InFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},Strict:!1},this.PeratorPrecedence={")":0,";":0,",":0,"]":0,"||":1,OR:1,"&&":2,AND:2,"|":3,"^":4,"&":5,"==":6,"=":6,"!=":6,"<>":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.StartMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.LastMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.Initialize=function(){this.NextToken(),this.LastMarker={Index:this.Scanner.Index,Line:this.Scanner.LineNumber,Column:this.Scanner.Index-this.Scanner.LineStart}},this.CreateNode=function(){return{Index:this.StartMarker.Index,Line:this.StartMarker.Line,Column:this.StartMarker.Column}},this.StartNode=function(t,e){void 0==e&&(e=0);var a=t.Start-t.LineStart,i=t.LineNumber;return a<0&&(a+=e,i--),{Index:t.Start,Line:i,Column:a}},this.Match=function(t){return 7==this.LookAhead.Type&&this.LookAhead.Value==t},this.Expect=function(t){var e=this.NextToken();7==e.Type&&e.Value==t||this.ThrowUnexpectedToken(e)},this.MatchAssign=function(){if(7!=this.LookAhead.Type)return!1;var t=this.LookAhead.Value;return":"==t||":="==t},this.GetTokenRaw=function(t){return this.Scanner.Source.slice(t.Start,t.End)},this.NextToken=function(){var t=this.LookAhead;this.LastMarker.Index=this.Scanner.Index,this.LastMarker.Line=this.Scanner.LineNumber,this.LastMarker.Column=this.Scanner.Index-this.Scanner.LineStart,this.CollectComments(),this.Scanner.Index!==this.StartMarker.Index&&(this.StartMarker.Index=this.Scanner.Index,this.StartMarker.Line=this.Scanner.LineNumber,this.StartMarker.Column=this.Scanner.Index-this.Scanner.LineStart);var e=this.Scanner.Lex();return this.HasLineTerminator=t.LineNumber!=e.LineNumber,e&&this.Context.Strict&&e.Type,this.LookAhead=e,t},this.CollectComments=function(){this.Scanner.ScanComments()},this.ParseScript=function(){var t=this.CreateNode(),e=this.ParseDirectivePrologues();while(2!=this.LookAhead.Type)e.push(this.ParseStatementListItem());return this.Finalize(t,this.Node.Script(e))},this.ParseDirective=function(){var t=this.LookAhead,e=this.CreateNode(),a=this.ParseExpression(),i=a.Type===Zr.Literal?this.GetTokenRaw(t).slice(1,-1):null;return this.ConsumeSemicolon(),this.Finalize(e,i?this.Node.Directive(a,i):this.Node.ExpressionStatement(a))},this.ParseDirectivePrologues=function(){var t=[];while(1){var e=this.LookAhead;if(8!=e.Type)break;var a=this.ParseDirective();t.push(a)}return t},this.ParseStatementListItem=function(){var t;return this.Context.IsAssignmentTarget=!0,this.Context.IsBindingElement=!0,4==this.LookAhead.Type||(t=this.ParseStatement()),t},this.ParseStatement=function(){var t;switch(this.LookAhead.Type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.ParseExpressionStatement();break;case 7:var e=this.LookAhead.Value;t="("===e?this.ParseExpressionStatement():";"===e?this.ParseEmptyStatement():this.ParseExpressionStatement();break;case 3:t=this.ParseLabelledStatement();break;case 4:break;default:t="error"}return t},this.ParseEmptyStatement=function(){var t=this.CreateNode();return this.Expect(";"),this.Finalize(t,this.Node.EmptyStatement())},this.ParseLabelledStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();this.ConsumeSemicolon();var a=new this.Node.ExpressionStatement(e);return this.Finalize(t,a)},this.ParseExpression=function(){var t=this.LookAhead,e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(this.Match(",")){var a=[];a.push(e);while(2!=this.LookAhead.Type){if(!this.Match(","))break;this.NextToken(),a.push(this.IsolateCoverGrammar(this.ParseAssignmentExpression))}e=this.Finalize(this.StartNode(t),this.Node.SequenceExpression(a))}return e},this.ParseAssignmentExpression=function(){var t,e=this.LookAhead,a=e;if(t=this.ParseConditionalExpression(),this.MatchAssign()){if(!this.Context.IsAssignmentTarget){var i=t.Marker;this.ThrowUnexpectedError(i.Index,i.Line,i.Column,Wr.InvalidLHSInAssignment)}this.Match("=")||this.Match(":")?this.ReinterpretExpressionAsPattern(t):(this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1),a=this.NextToken();var r=a.Value,n=this.IsolateCoverGrammar(this.ParseAssignmentExpression);t=this.Finalize(this.StartNode(e),this.Node.AssignmentExpression(r,t,n)),this.Context.FirstCoverInitializedNameError=null}return t},this.ParseConditionalExpression=function(){this.LookAhead;var t=this.InheritCoverGrammar(this.ParseBinaryExpression);return t},this.ParseBinaryExpression=function(){var t=this.LookAhead,e=this.InheritCoverGrammar(this.ParseExponentiationExpression),a=this.LookAhead,i=this.BinaryPrecedence(a);if(i>0){this.NextToken(),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1;var r=[t,this.LookAhead],n=e,s=this.IsolateCoverGrammar(this.ParseExponentiationExpression),o=[n,a.Value,s],h=[i];while(1){if(i=this.BinaryPrecedence(this.LookAhead),i<=0)break;while(o.length>2&&i<=h[h.length-1]){s=o.pop();var l=o.pop();h.pop(),n=o.pop(),r.pop();var u=this.StartNode(r[r.length-1]);o.push(this.Finalize(u,this.Node.BinaryExpression(l,n,s)))}o.push(this.NextToken().Value),h.push(i),r.push(this.LookAhead),o.push(this.IsolateCoverGrammar(this.ParseExponentiationExpression))}var c=o.length-1;e=o[c];var d=r.pop();while(c>1){var f=r.pop(),C=d&&d.LineStart,m=this.StartNode(f,C),D=o[c-1];e=this.Finalize(m,this.Node.BinaryExpression(D,o[c-2],e)),c-=2,d=f}}return e},this.ParseExponentiationExpression=function(){this.LookAhead;var t=this.InheritCoverGrammar(this.ParseUnaryExpression);return t},this.ParseUnaryExpression=function(){var t;if(this.Match("+")||this.Match("-")){var e=this.StartNode(this.LookAhead),a=this.NextToken();t=this.InheritCoverGrammar(this.ParseUnaryExpression),t=this.Finalize(e,this.Node.UnaryExpression(a.Value,t)),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1}else t=this.ParseUpdateExpression();return t},this.ParseUpdateExpression=function(){var t;this.LookAhead;return t=this.InheritCoverGrammar(this.ParseLeftHandSideExpressionAllowCall),t},this.ParseLeftHandSideExpressionAllowCall=function(){var t,e=this.LookAhead;t=this.InheritCoverGrammar(this.ParsePrimaryExpression);while(1)if(this.Match(".")){this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!0,this.Expect(".");var a=this.ParseMemberIdentifierName();t=this.Finalize(this.StartNode(e),this.Node.StaticMemberExpression(t,a,e))}else{if(!this.Match("("))break;this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!1;var i=this.ParseArguments();t=this.Finalize(this.StartNode(e),this.Node.CallExpression(t,i,e))}return t},this.IsIdentifierName=function(t){return 3===t.Type||4===t.Type||1===t.Type||5===t.Type},this.ParseIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.Identifier(e.Value,e))},this.ParseMemberIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.MemberIdentifier(e.Value,e))},this.ParseArguments=function(){this.Expect("(");var t=[];if(!this.Match(")"))while(1){var e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(t.push(e),this.Match(")"))break;if(this.ExpectCommaSeparator(),this.Match(")"))break}return this.Expect(")"),t},this.ExpectCommaSeparator=function(){this.Expect(",")},this.ParsePrimaryExpression=function(){var t,e,a,i=this.CreateNode();switch(this.LookAhead.Type){case 3:e=this.NextToken(),t=this.Finalize(i,this.Node.Identifier(e.Value,e));break;case 6:case 8:this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1,e=this.NextToken(),a=this.GetTokenRaw(e),t=this.Finalize(i,this.Node.Literal(e.Value,a,e));break;case 7:switch(this.LookAhead.Value){case"(":this.Context.IsBindingElement=!1,t=this.InheritCoverGrammar(this.ParseGroupExpression);break;default:t=this.ThrowUnexpectedToken(this.NextToken())}break;default:t=this.ThrowUnexpectedToken(this.NextToken())}return t},this.ParseGroupExpression=function(){var t;if(this.Expect("("),this.Match(")"))this.NextToken();else{this.LookAhead;if(this.Context.IsBindingElement=!0,t=this.InheritCoverGrammar(this.ParseAssignmentExpression),this.Match(",")){this.Context.IsAssignmentTarget=!1,[].push(t);while(2!=this.LookAhead.Type){if(!this.Match(","))break;this.NextToken(),this.Match(")")}}this.Expect(")"),this.Context.IsBindingElement=!1}return t},this.ParseExpressionStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();return this.ConsumeSemicolon(),this.Finalize(t,this.Node.ExpressionStatement(e))},this.ConsumeSemicolon=function(){this.Match(";")?this.NextToken():this.HasLineTerminator||(this.LastMarker.Index=this.StartMarker.Index,this.LastMarker.Line=this.StartMarker.Line,this.LastMarker.Column=this.StartMarker.Column)},this.ReinterpretExpressionAsPattern=function(t){switch(t.Type){case Zr.Identifier:case Zr.MemberExpression:case Zr.AssignmentExpression:break;default:break}},this.Finalize=function(t,e){return e.Marker={Line:t.Line,Column:t.Column,Index:t.Index},e},this.BinaryPrecedence=function(t){var e,a=t.Value;return e=7===t.Type&&this.PeratorPrecedence[a]||0,e},this.IsolateCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.FirstCoverInitializedNameError,this.Context.IsBindingElement=e,this.Context.IsAssignmentTarget=a,this.Context.FirstCoverInitializedNameError=i,r},this.InheritCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.IsBindingElement=this.Context.IsBindingElement&&e,this.Context.IsAssignmentTarget=this.Context.IsAssignmentTarget&&a,this.Context.FirstCoverInitializedNameError=i||this.Context.FirstCoverInitializedNameError,r},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.ThrowUnexpectedError=function(t,e,a,i){var r=i||"执行异常";return this.ErrorHandler.ThrowError(t,e,a,r)},this.UnexpectedTokenError=function(t,e){var a=e||Wr.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber,s=this.LastMarker.Index-this.LastMarker.Column,o=t.Start-s+1;return this.ErrorHandler.CreateError(r,n,o,a)}var h=this.LastMarker.Index,l=this.LastMarker.Line,u=this.LastMarker.Column+1;return this.ErrorHandler.CreateError(h,l,u,a)}}function en(t,e){this.ErrorHandler=t,this.SymbolData=e,this.Add=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t+e;var r,n,s=[];if(!a&&!i){for(var o=Math.max(t.length,e.length),h=0;h<o;++h)s[h]=null,h<t.length&&h<e.length&&this.IsNumber(t[h])&&this.IsNumber(e[h])&&(s[h]=t[h]+e[h]);return s}for(var l in a?(r=t,n=e):(r=e,n=t),n)s[l]=null,this.IsNumber(n[l])&&this.IsNumber(r)&&(s[l]=r+n[l]);return s},this.Subtract=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t-e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(r[s]=t[s]-e[s]);return r}if(a)for(var o in e)r[o]=null,this.IsNumber(t)&&this.IsNumber(e[o])&&(r[o]=t-e[o]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsNumber(e)&&(r[h]=t[h]-e);return r},this.Multiply=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t*e;var r,n,s=[];if(!a&&!i){for(var o=Math.max(t.length,e.length),h=0;h<o;++h)s[h]=null,h<t.length&&h<e.length&&this.IsNumber(t[h])&&this.IsNumber(e[h])&&(s[h]=t[h]*e[h]);return s}for(var l in a?(r=t,n=e):(r=e,n=t),n)s[l]=null,this.IsNumber(n[l])&&this.IsNumber(r)&&(s[l]=r*n[l]);return s},this.Divide=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return 0==e?null:t/e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsDivideNumber(e[s])&&(r[s]=t[s]/e[s]);return r}if(a)for(var o in e)r[o]=null,this.IsNumber(t)&&this.IsDivideNumber(e[o])&&(r[o]=t/e[o]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsDivideNumber(e)&&(r[h]=t[h]/e);return r},this.GT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]>e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t>e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>e?1:0);return r},this.GTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]>=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t>=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>=e?1:0);return r},this.LT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t<e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]<e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t<e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<e?1:0);return r},this.LTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]<=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t<=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<=e?1:0);return r},this.EQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t==e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]==e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t==e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]==e?1:0);return r},this.NEQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t!=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]!=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t!=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]!=e?1:0);return r},this.And=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t&&e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]&&e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t&&e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]&&e?1:0);return r},this.Or=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t||e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]||e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t||e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]||e?1:0);return r},this.IF=function(t,e,a){var i=this.IsNumber(t),r=this.IsNumber(e),n=this.IsNumber(a),s=Array.isArray(e),o=Array.isArray(a);if(i)return t?e:a;var h=[];for(var l in t)t[l]?h[l]=r?e:s?e[l]:null:h[l]=n?a:o?a[l]:null;return h},this.IFN=function(t,e,a){return this.IF(t,a,e)},this.REF=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=t[0],r=0;r<e;++r)a.unshift(i)}else for(var n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var s=e[n];a[n]=s>=0&&s<=n?t[n-s]:n?a[n-1]:t[n]}return a},this.REFV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null)}else for(var r=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){var n=e[r];n>=0&&n<=r&&(a[r]=t[r-n])}return a},this.REFX=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return t.length>0?t[t.length-1]:a;a=t.slice(e,t.length);for(var i=t[t.length-1],r=0;r<e;++r)a.push(i)}else for(var n=t.length,s=0;s<t.length;++s)if(a[s]=null,!(s>=e.length)){var o=e[s];a[s]=o>=0&&o+s<n?t[s+o]:s?a[s-1]:t[s]}return a},this.REFXV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(e,t.length);for(var i=0;i<e;++i)a.push(null)}else for(var r=t.length,n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var s=e[n];s>=0&&s+n<r&&(a[n]=t[n+s])}return a},this.MAX=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MAX() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];ze.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var s=null;if(i.length>0){s=i[0];for(r=1;r<i.length;++r)s=Math.max(s,i[r])}var o=null;if(a.length>0){o=a[0].slice(0);for(r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=o[l];n=h[l];ze.IsNumber(u)&&(ze.IsNumber(n)?o[l]=Math.max(u,n):o[l]=null)}}}if(null==o&&null!=s)return s;if(o&&null==s)return o;for(var r in o)ze.IsNumber(o[r])&&(o[r]=Math.max(o[r],s));return o},this.MIN=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MIN() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];ze.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var s=null;if(i.length>0){s=i[0];for(r=1;r<i.length;++r)s=Math.min(s,i[r])}var o=null;if(a.length>0){o=a[0].slice(0);for(r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=o[l];n=h[l];ze.IsNumber(u)&&(ze.IsNumber(n)?o[l]=Math.min(u,n):o[l]=null)}}}if(null==o&&null!=s)return s;if(o&&null==s)return o;for(var r in o)ze.IsNumber(o[r])&&(o[r]=Math.min(o[r],s));return o},this.ABS=function(t){var e=[];for(var a in t)e[a]=null,isNaN(t[a])||(e[a]=Math.abs(t[a]));return e},this.MA=function(t,e){var a=[];if(e<=0)return a;if(Array.isArray(e)){for(h=0;h<t.length;++h)if(a[h]=null,!(h>=e.length)){var i=e[h];if(this.IsNumber(i)&&!(i<=0)){for(var r=0,n=0,s=h,o=0;s>=0&&o<i;--s,++o)r+=t[s],++n;n>0&&(a[h]=r/n)}}}else{if(e<=0&&(e=1),!t||!t.length)return a;for(var h=0;h<t.length;++h)if(a[h]=null,this.IsNumber(t[h]))break;t=t.slice(0);for(var l=0;h<t.length;++h,++l)if(l<e-1)a[h]=null;else{for(var u=t[h-(e-1)],c=0,d=e-1;d>=0;--d){var f=t[h-d];this.IsNumber(f)?u=f:(f=u,t[h-d]=f),c+=f}a[h]=c/e}}return a},this.EMA=function(t,e){var a=[];if(t.length<=0)return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){var r=e[i];if(this.IsNumber(r)&&(r=parseInt(r),!(r<=0))){r>i+1&&(r=i+1);for(var n=[2/(r+1),(r-1)/(r+1)],s=null,o=null,h=0;h<r;++h){var l=i-(r-h-1),u=t[l];this.IsNumber(u)||coninue,null==o?(s=u,o=s):(s=n[0]*u+n[1]*o,o=s)}a[i]=s}}else{if(e<=0)return a;for(var c=0;c<t.length;++c)if(null!=t[c]&&!isNaN(t[c]))break;var d=c,f=c+1;a[d]=t[d];for(i=c+1;i<t.length;++i,++d,++f)a[f]=(2*t[f]+(e-1)*a[d])/(e+1)}return a},this.XMA=function(t,e){for(var a=[],i=0;i<t.length;++i)if(this.IsNumber(t[i]))break;for(var r=parseInt((e-2)/2),n=0,s=0,o=0,h=0,l=i,u=0;l<t.length;++l){for(o=l-r-1,h=l+(e-r)-1,u=o;u<h;++u)u>=0&&u<t.length&&this.IsNumber(t[u])&&(n+=t[u],++s);a[l]=0!=s?n/s:null,n=0,s=0}return a},this.SMA=function(t,e,a){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;++r){var n=e[r];if(this.IsNumber(n)&&(n=parseInt(n),!(n<=0))){n>r+1&&(n=r+1);for(var s=null,o=null,h=0;h<n;++h){var l=r-(n-h-1),u=t[l];this.IsNumber(u)&&(null==s?(s=u,o=u):(o=(a*u+(n-a)*s)/n,s=o))}i[r]=o}}else{r=0;for(var c=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){c=t[r],i[r]=c;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*c)/e,c=i[r]}return i},this.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:e[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},this.WMA=function(t,e){var a=[];if(!t||!t.length)return a;if(Array.isArray(e)){for(d=0;d<e.length&&d<t.length;++d){a[d]=null;var i=e[d];if(!(i<=0)){for(var r=0,n=0,s=0,o=0,h=0;h<i;++h)if(s=d-(i-h-1),n=t[s],r=h,this.IsNumber(n)){o=n;break}if(!(r>=i)){for(var l=0,u=0,c=(h=r,1);h<i;++h,++c)s=d-(i-h-1),n=t[s],this.IsNumber(n)?o=n:n=o,u+=c,l+=n*c;a[d]=l/u}}}return a}if(e<=0)return[];var d=0;for(d=0;d<t.length&&!this.IsNumber(t[d]);++d)a[d]=null;t=t.slice(0);for(var f=0;d<t.length;++d,++f)if(f<e-1)a[d]=null;else{for(o=t[d-(e-1)],l=0,u=0,h=e-1;h>=0;--h){n=t[d-h];this.IsNumber(n)?o=n:(n=o,t[d-h]=n),u+=e-h,l+=n*(e-h)}a[d]=l/u}return a},this.MEMA=function(t,e){var a=[];if(!t||!t.length)return a;var i=0,r=0;for(r=0;r<t.length&&!this.IsNumber(t[r]);++r)a[r]=null;if(i=r,e<1||i+e>=t.length)return a;var n=0;for(t=t.slice(0);i<r+e;++i)a[i]=null,!this.IsNumber(t[i])&&i-1>=0&&(t[i]=t[i-1]),n+=t[i];for(a[i-1]=n/e;i<t.length;++i)this.IsNumber(a[i-1])&&this.IsNumber(t[i])?a[i]=(t[i]+a[i-1]*(e-1))/e:i-1>-1&&this.IsNumber(a[i-1])?a[i]=a[i-1]:a[i]=null;return a},this.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length;++i)if(t[i]&&!isNaN(t[i]))break;for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.SUMBARS=function(t,e){var a=[];if(!t||!t.length||!e||!e.length)return a;for(var i=0,r=0,n=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;for(r=t.length-1;r>=i;--r){var s=0;for(n=r,s=0;n>=i&&s<e[r];--n)s+=t[n];a[r]=n<i?null:r-n}for(r=i+1;r<t.length;++r)null==a[r]&&(a[r]=a[r-1]);return a},this.REVERSE=function(t){if(this.IsNumber(t))return 0-t;for(var e=[],a=0;a<t.length&&!this.IsNumber(t[a]);++a)e[a]=null;for(;a<t.length;++a)this.IsNumber(t[a])?e[a]=0-t[a]:e[a]=null;return e},this.COUNT=function(t,e){if(Array.isArray(e)){for(var a=null,i=t.length,r=0;r<i;++r)if(this.IsNumber(t[r])){a=r;break}if(null==a)return[];var n=[],s=0;for(r=0;r<e.length;++r){var o=e[r];if(ze.IsNumber(o)){o<1&&(o=r+1),s=0;for(var h=r,l=0;h>=0&&l<o;--h,++l)t[h]&&++s;n[r]=s}}return n}for(o=e,i=t.length,o=o<1?i:o,r=0,h=0;r<i;++r)if(this.IsNumber(t[r]))break;n=[];for(var u=0;r<i&&h<o;++r,++h)u=t[r]?u+1:u,n[r]=u;for(;r<i;++r)t[r-o]&&u&&u--,u=t[r]?u+1:u,n[r]=u;return n},this.HHV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=null,r=0,n=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){i=null;var s=e[r];if(s>0&&s<=r)for(n=r-s;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);else for(s=r,n=0;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);a[r]=i}}else{if(!ze.IsNonEmptyArray(t))return a;(e<=0||e>t.length)&&(e=t.length);var o=this.GetFirstVaildIndex(t);if(o>=t.length)return a;var h=o;h<t.length&&(a[h]=t[h]);for(r=h+1,n=2;r<t.length&&n<e;++r,++n)t[r]>=t[h]&&(h=r),a[r]=t[h];for(;r<t.length;++r){if(r-h<e)h=t[r]<t[h]?h:r;else for(n=h=r-e+1;n<=r;++n)h=t[n]<t[h]?h:n;a[r]=t[h]}}return a},this.HV=function(t,e){var a=this.HHV(t,e);return this.REF(a,1)},this.LLV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=null,n=e[i];if(n>0&&n<=i)for(var s=i-n;s<=i;++s)(null==r||r>t[s])&&(r=t[s]);else{n=i;for(s=0;s<=i;++s)(null==r||r>t[s])&&(r=t[s])}a[i]=r}}else{if(!ze.IsNonEmptyArray(t))return a;(e<=0||e>t.length)&&(e=t.length);var o=this.GetFirstVaildIndex(t);if(o>=t.length)return a;var h=o;h<t.length&&(a[h]=t[h]);for(i=h+1,s=2;i<t.length&&s<e;++i,++s)t[i]<=t[h]&&(h=i),a[i]=t[h];for(;i<t.length;++i){if(i-h<e)h=t[i]>t[h]?h:i;else for(s=h=i-e+1;s<=i;++s)h=t[s]>t[h]?h:s;a[i]=t[h]}}return a},this.LV=function(t,e){var a=this.LLV(t,e);return this.REF(a,1)},this.STD=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!ze.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,s=!0,o=0,h=0;for(r+=e-1;r<t.length;++r){if(o=0,s){for(s=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)o+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(o/(e-1))}return a},this.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(s=0;s<e;++s)i+=Math.abs(t[n-s]-r[n]);a[n]=i/e}return a},this.CROSS=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return[];for(var i=0;i<t.length;++i)if(this.IsNumber(t[i])&&this.IsNumber(e[i]))break;for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0}else if(Array.isArray(t)&&"number"==typeof e){for(i=0;i<t.length;++i)if(this.IsNumber(t[i]))break;for(++i;i<t.length;++i)a[i]=t[i]>e&&t[i-1]<e?1:0}else if("number"==typeof t&&Array.isArray(e)){for(i=0;i<e.length;++i)if(this.IsNumber(e[i]))break;for(++i;i<e.length;++i)a[i]=e[i]<t&&e[i-1]>t?1:0}return a},this.CROSSDOWN=function(t,e){return this.CROSS(e,t)},this.CROSSUP=function(t,e){return this.CROSS(t,e)},this.MULAR=function(t,e){var a=[];if(Array.isArray(e))for(n=0;n<t.length;++n){a[n]=null;var i=e[n];if(this.IsNumber(i)&&(i=parseInt(i),!(i<0)))for(s=n,o=0;s>=0&&o<i;--s,++o)0==o?a[n]=t[s]:a[n]*=t[s]}else{if(t.length<e)return a;if(0==e){for(var r=e;r<t.length;++r)if(this.IsNumber(t[r])){a[r]=t[r];break}for(++r;r<t.length;++r)a[r]=a[r-1]*t[r]}else for(var n=e-1,s=0;n<t.length;++n,++s)for(var o=0;o<e;++o)0==o?a[n]=t[o+s]:a[n]*=t[o+s]}return a},this.SUM=function(t,e){var a=[];if(Array.isArray(e))for(r=0;r<t.length;++r){a[r]=null;var i=e[r];if(i>0)for(n=r,s=0;n>=0&&s<i;--n,++s)0==s?a[r]=t[n]:a[r]+=t[n]}else if(0==e){a[0]=t[0];for(var r=1;r<t.length;++r)a[r]=a[r-1]+t[r]}else for(var r=e-1,n=0;r<t.length;++r,++n)for(var s=0;s<e;++s)0==s?a[r]=t[s+n]:a[r]+=t[s+n];return a},this.BARSCOUNT=function(t){var e=[],a=null;for(var i in t){if(e[i]=0,null==a){if(!this.IsNumber(t[i]))continue;a=0}e[i]=a,++a}return e},this.DEVSQ=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)){var i=null;if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(this.IsNumber(e[r])){i=parseInt(e[r]);break}}else i=parseInt(e);if(!this.IsNumber(i))return a;var n=t.length,s=(r=0,0),o=0,h=0,l=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;if(i<1||r+i>n)return a;for(h=0;r<n&&s<i;++r,++s)h+=t[r]/i;if(s==i){for(l=0,r--;o<i;o++)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l,r++}for(;r<n;++r){for(h+=(t[r]-t[r-i])/i,l=0,o=0;o<i;++o)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l}}return a},this.NOT=function(t){var e="number"==typeof t;if(e)return t?0:1;var a=[];for(var i in t)a[i]=null,this.IsNumber(t[i])&&(a[i]=t[i]?0:1);return a},this.FORCAST=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,s,o,h,l,u=0,c=0,d=0,f=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(o=h+i-1;o<r;++o){for(u=c=d=f=0,h=0,l=i;h<i&&h<=o;++h,--l)u+=l,c+=t[o-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=o;++h,--l)d+=(l-u)*(t[o-h]-c),f+=(l-u)*(l-u);s=d/f,n=c-u*s,a[o]=s*i+n}return a},this.TSMA=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,s,o,h,l,u=0,c=0,d=0,f=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(o=h+i-1;o<r;++o){for(u=c=d=f=0,h=0,l=i;h<i&&h<=o;++h,--l)u+=l,c+=t[o-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=o;++h,--l)d+=(l-u)*(t[o-h]-c),f+=(l-u)*(l-u);s=d/f,n=c-u*s,a[o]=s*i+n+s}return a},this.SLOPE=function(t,e){var a=[];if("number"!=typeof e&&(e=parseInt(e)),e<1||!t.length)return a;if(e>=t.length)return a;for(var i,r,n,s,o=0,h=0;h<t.length;++h,++o)if(a[h]=null,this.IsNumber(t[h]))break;for(var l=o+e-1;l<t.length;++l){a[l]=null,i=r=n=s=0;for(var u=0;u<e&&u<=l;++u)i+=l-u,r+=t[l-u];for(i/=e,r/=e,u=0;u<e&&u<=l;++u)n+=(l-u-i)*(t[l-u]-r),s+=(l-u-i)*(l-u-i);s?a[l]=n/s:l&&(a[l]=a[l-1])}return a},this.STDP=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!ze.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,s=!0,o=0,h=0;for(r+=e-1;r<t.length;++r){if(o=0,s){for(s=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)o+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(o/e)}return a},this.VAR=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)&&this.IsNumber(e)){var i,r=parseInt(e),n=t.length;if(r<=0||r>=n)return a;for(o=0;o<n&&!this.IsNumber(t[o]);++o)a[o]=null;for(l=0,o=o+r-1;o<n;++o){for(h=i=0,l=0;l<r&&l<=o;++l)h+=t[o-l]*t[o-l],i+=t[o-l];a[o]=(r*h-i*i)/r*(r-1)}}else if(Array.isArray(t)&&Array.isArray(e))for(var s=this.GetFirstVaildIndex(t),o=s;o<t.length;++o){var h=i=0;if(this.IsNumber(e[o])){r=parseInt(e[o]);if(!(r<=0||o-(r-1)<0)){for(var l=0;l<r;++l)h+=t[o-l]*t[o-l],i+=t[o-l];a[o]=(r*h-i*i)/r*(r-1)}}}return a},this.VARP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n=0,s=0;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;for(var o=0,h=0;n<r&&s<i;++n,++s)o+=t[n]*t[n],h+=t[n];for(s==i&&(a[n-1]=(i*o-h*h)/(i*i));n<r;++n)o+=t[n]*t[n]-t[n-i]*t[n-i],h+=t[n]-t[n-i],a[n]=(i*o-h*h)/(i*i);return a},this.RANGE=function(t,e,a){var i="number"==typeof t,r="number"==typeof e,n="number"==typeof a;if(i&&r&&n)return t>Math.min(e,a)&&t<Math.max(e,a)?1:0;for(var s,o,h=[],l=0;l<t.length;++l)if(h[l]=null,s=t[l],this.IsNumber(s)){if(r)o=e;else{if(l>=e.length)continue;o=e[l]}if(this.IsNumber(o)){if(n)rangeValue2=a;else{if(l>=a.length)continue;rangeValue2=a[l]}this.IsNumber(rangeValue2)&&(h[l]=s>Math.min(o,rangeValue2)&&s<Math.max(o,rangeValue2)?1:0)}}return h},this.EXIST=function(t,e){if("number"==typeof t)return 0;if(Array.isArray(e)){var a=[];if(t.length<=0)return a;for(var i in t)a[i]=0;for(i=0;i<e.length&&i<t.length;++i){var r=e[i];if(this.IsNumber(r)&&(r=parseInt(r),!(r<=0))){r>i+1&&(r=i+1);for(var n=!1,s=0,o=0;o<r;++o)if(i-(r-o-1),s=t[i],this.IsNumber(s)&&s>0){n=!0;break}a[i]=n?1:0}}return a}e=parseInt(e);for(var h=null,l=(a=[],0);l<t.length;++l)a[l]=null,s=t[l],this.IsNumber(s)&&s>0&&(h=l),a[l]=null!=h&&l-h<e?1:0;return a},this.TFILTER=function(t,e,a){if(!this.IsNumber(a))return[];if(1==a)return this.And(t,this.EQ(this.COUNT(t,this.BARSLAST(e)),1));if(2==a)return this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1));if(0==a){for(var i=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),r=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),n=0;n<i.length;++n){var s=r[n];s>0&&(i[n]=2)}return i}return[]},this.FILTER=function(t,e){for(var a=[],i=0,r=0;i<t.length;++i)if(t[i]){for(a[i]=1,r=0;r<e&&r+i+1<t.length;++r)a[r+i+1]=0;i+=e}else a[i]=0;return a},this.BARSLAST=function(t){var e=[];if(!t)return e;for(var a=null,i=0;i<t.length;++i)e[i]=null,t[i]>0?a=0:null!=a&&++a,null!=a&&(e[i]=a);return e},this.BARSSINCEN=function(t,e){var a=[];if(this.IsNumber(e)&&Array.isArray(t)){var i=e;i<1&&(i=t.length);var r=this.GetFirstVaildIndex(t);if(r>=t.length)return a;var n=0;for(n=r<=i-1?i-1:r,a[n]=n-r;n<t.length;++n)if(this.IsNumber(a[n-1])){if(a[n-1]+1<i)a[n]=a[n-1]+1;else for(var s=n-i+1;s<=n;++s)if(!(Math.abs(t[s])<1e-6)){a[n]=n-s;break}}else Math.abs(t[n])<1e-6||(a[n]=0)}return a},this.BARSSINCE=function(t){for(var e=[],a=null,i=0;i<t.length;++i)e[i]=null,null==a?t[i]&&(a=0):++a,a&&(e[i]=a);return e},this.Trigonometric=function(t,e){if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=e(r):a[i]=null}return a}return this.IsNumber(t)?e(t):null},this.ASIN=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.asin(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.ACOS=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.acos(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.LAST=function(t,e,a){if(!Array.isArray(t))return[];for(var i=[],r=t.length,n=e,s=a,o=0,h=0,l=0,u=0;o<r;++o)if(t[o])break;for(h=o,u=o-s+1;h<r;++h,++u){for(l=0==n?o:Math.max(o,h-n);l<u;++l)if(t[l]<=0)break;i[h]=l<u?0:1}return i},this.ZIG=function(t,e){var a=this.SymbolData.Data;if("number"==typeof t)switch(t){case 0:t=a.GetOpen();break;case 1:t=a.GetHigh();break;case 2:t=a.GetLow();break;case 3:t=a.GetClose();break;default:return[]}return this.ZIG_Calculate(t,e)},this.GetFirstVaildIndex=function(t){for(var e=0;e<t.length;++e)if(this.IsNumber(t[e]))return e;return t.length},this.ZIG_Calculate=function(t,e){var a=[],i=t.length,r=this.GetFirstVaildIndex(t),n=0,s=0,o=0,h=0,l=0;for(n=r+1,s=o=r;n<i-1&&o==r;++n)o=100*Math.abs(t[n]-t[r])>=e*t[r]?t[n]>t[r]?n:-n:r;for(;n<i-1;++n)if(t[n]>=t[n-1]&&t[n]>=t[n+1])if(o<0){if(100*(t[n]-t[-o])<e*t[-o])continue;for(l=(t[s]-t[h=-o])/(-o-s),a[h--]=t[-o];h>=s;h--)a[h]=t[-o]+(-o-h)*l;s=-o,o=n}else t[n]>t[o]&&(o=n);else if(t[n]<=t[n-1]&&t[n]<=t[n+1])if(o>0){if(100*(t[o]-t[n])<e*t[o])continue;for(l=(t[o]-t[h=s])/(o-s),a[h++]=t[s];h<=o;++h)a[h]=t[s]+(h-s)*l;s=o,o=-n}else t[n]<t[-o]&&(o=-n);if(Math.abs(o)>=i-2&&(o>0&&t[i-1]>=t[o]&&(o=i-1),o<0&&t[i-1]<=t[-o]&&(o=1-i)),o>0)for(l=(t[o]-t[h=s])/(o-s),a[h++]=t[s];h<=o;++h)a[h]=t[s]+(h-s)*l;else for(l=(t[s]-t[h=-o])/(-o-s),a[h--]=t[-o];h>=s;h--)a[h]=t[-o]+(-o-h)*l;if((o=Math.abs(o))<i-1)if(t[i-1]>=t[o])for(l=(t[i-1]-t[h=o])/(i-o),a[h++]=t[o];h<i;++h)a[h]=t[o]+(h-o)*l;else for(l=(t[o]-t[h=i-1])/(i-o),a[h--]=t[i-1];h>=o;h--)a[h]=t[i-1]+(i-h)*l;return a},this.JSDraw=null,this.CalculateZIGLine=function(t,e,a,i,r){null==this.JSDraw&&(this.JSDraw=new an(this.ErrorHandler));var n=e.Up,s=t;if(n)for(var o=t.ID+1;o<a.ID;++o){var h=i[o];this.IsNumber(h)&&(s.Value<h&&(s={ID:o,Value:h}))}else for(o=t.ID+1;o<a.ID;++o){h=i[o];this.IsNumber(h)&&(s.Value>h&&(s={ID:o,Value:h}))}e.Value=s.Value,e.ID=s.ID;var l={Start:{ID:t.ID,Value:t.Value},End:{ID:e.ID,Value:e.Value}},u=this.JSDraw.CalculateDrawLine(l);for(var o in u){var c=u[o];r[c.ID]=c.Value}if(a.ID==i.length-1)for(var o in l={Start:{ID:e.ID,Value:e.Value},End:{ID:a.ID,Value:a.Value}},u=this.JSDraw.CalculateDrawLine(l),u){c=u[o];r[c.ID]=c.Value}else t.ID=e.ID,t.Value=e.Value,e.ID=a.ID,e.Value=a.Value,e.Up=t.Value<e.Value},this.TROUGHBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var s=i.length,o=[],h=0;h<n;++h)o[h]=0;var l=0;h=this.GetFirstVaildIndex(i)+1;for(n--;h<s&&i[h]>i[h-1];++h);for(;h<s&&i[h]<i[h-1];++h);for(o[0]=--h;h<s-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=o.slice(0),c=0;c<n;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[n]&&(r[h]=h-o[n])}return o[n]&&(r[h]=h-o[n]),r},this.TROUGH=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var s=i.length,o=[],h=0;h<n;++h)o[h]=0;h=1;var l=0;h=this.GetFirstVaildIndex(i)+1;for(n--;h<s&&i[h]>i[h-1];++h);for(;h<s&&i[h]<i[h-1];++h);for(o[0]=--h;h<s-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=o.slice(0),c=0;c<n;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[n]&&(r[h]=i[o[n]])}return o[n]&&(r[h]=i[o[n]]),r},this.PEAKBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,s=a;if(s<1)return r;for(var o=[],h=0;h<s;++h)o[h]=0;var l=0;h=this.GetFirstVaildIndex(i)+1;for(s--;h<n&&i[h]<i[h-1];++h);for(;h<n&&i[h]>i[h-1];++h);for(o[0]=--h;h<n-1;++h){if(i[h]>i[h+1]){if(l){if(s)for(var u=o.slice(0),c=0;c<s;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[s]&&(r[h]=h-o[s])}return o[s]&&(r[h]=h-o[s]),r},this.PEAK=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,s=a;if(s<1)return r;for(var o=0,h=[],l=0;l<s;++l)h[l]=0;l=this.GetFirstVaildIndex(i)+1;for(s--;l<n&&i[l]<i[l-1];++l);for(;l<n&&i[l]>i[l-1];++l);for(h[0]=--l;l<n-1;++l){if(i[l]>i[l+1]){if(o){if(s)for(var u=h.slice(0),c=0;c<s;++c)h[c+1]=u[c];h[o=0]=l}}else o=1;h[s]&&(r[l]=i[h[s]])}return h[s]&&(r[l]=i[h[s]]),r},this.EVERY=function(t,e){var a=[];if(e<1)return a;if(ze.IsNumber(e)){e=parseInt(e);for(var i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i]))break;for(var r=0;i<t.length;++i)t[i]?r+=1:r=0,r==e?(a[i]=1,--r):a[i]=0}else if(Array.isArray(e))for(i=0;i<e.length;++i){var n=e[i];if(a[i]=null,ze.IsPlusNumber(n)){n=parseInt(n);r=0;for(var s=i,o=0;s>=0&&o<n;--s,++o)t[s]&&++r;a[i]=r==n?1:0}}return a},this.COST=function(t,e){var a=[],i=t/100;if(i<1e-6||i>1)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),s=r[0].High,o=r[0].Low,h=0;h<r.length;++h){var l=r[h];o=Math.min(o,l.Low),s=Math.max(s,l.High)}(o>2e3||o<0||s>2e3||o<0)&&this.ThrowUnexpectedNode(e,"COST() 历史K线最大最小值错误, 超出(0,1000)范围");var u=parseInt(100*s+1),c=parseInt(100*o-1),d=0,f=0,C=0;s=u/100,o=c/100;var m=u-c+1;if(m<1)return a;var D=[],p=[];for(h=0;h<m;++h)D[h]=0,p[h]=0;var v=0,g=0,S=0,I=0;for(h=0;h<r.length;++h)if(!(h>=n.length)){if(n[h]>1){var T=r[h];v=T.Vol/n[h];for(var x=0;x<m;x++)D[x]*=1-v;d=parseInt(Math.min(u,Math.max(c,100*T.Low)))-c,f=parseInt(Math.min(u,Math.max(c,100*T.High)))-c,C=parseInt(Math.min(u,Math.max(c,100*T.Close)))-c;for(x=0;x<m;++x)p[x]=0;var y=parseInt((d+f+2*C)/4);if(y==f||y==d)p[y]+=T.Vol;else{for(var A=T.Vol/(y-d),b=d;b<y;++b)p[b]+=A/(y-d)*(b-d);for(b;b<=f;++b)p[b]+=A/(y-f)*(b-f)}for(g=0,x=d;x<=f;x++)D[x]+=p[x];for(x=0;x<m;x++)g+=D[x];for(x=0,I=S=0;x<m;++x)if(S+=D[x],S>=g*i){I=(s-o)*x/m+o;break}}a[h]=I}return a},this.WINNER=function(t,e){var a=[],i=this.SymbolData.Data.Data;if(!i||i.length<=0)return a;for(var r=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),n=i[0].High,s=i[0].Low,o=0;o<i.length;++o){var h=i[o];s=Math.min(s,h.Low),n=Math.max(n,h.High)}(s>5e3||s<0||n>5e3||s<0)&&this.ThrowUnexpectedNode(e,"WINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var l=parseInt(100*n+1),u=parseInt(100*s-1),c=0,d=0,f=0;n=l/100,s=u/100;var C=l-u+1;if(C<1)return a;var m=[],D=[];for(o=0;o<C;++o)m[o]=0,D[o]=0;var p=0,v=0,g=0;for(o=0;o<i.length;++o)if(!(o>=r.length)&&r[o]>1){var S=i[o];p=S.Vol/r[o];for(var I=0;I<C;I++)m[I]*=1-p;c=parseInt(Math.min(l,Math.max(u,100*S.Low)))-u,d=parseInt(Math.min(l,Math.max(u,100*S.High)))-u,f=parseInt(Math.min(l,Math.max(u,100*S.Close)))-u;for(I=0;I<C;++I)D[I]=0;var T=parseInt((c+d+2*f)/4);if(T==d||T==c)D[T]+=S.Vol;else{for(var x=S.Vol/(T-c),y=c;y<T;++y)D[y]+=x/(T-c)*(y-c);for(y;y<=d;++y)D[y]+=x/(T-d)*(y-d)}for(v=0,I=c;I<=d;I++)m[I]+=D[I];for(I=0;I<C;I++)v+=m[I];d=Array.isArray(t)?parseInt(Math.min(100*t[o]-u,C-1)):parseInt(Math.min(100*t-u,C-1));for(I=0,g=0;I<=d;I++)g+=m[I];v>0?a[o]=g/v:o-1>=0&&(a[o]=a[o-1])}return a},this.COSTEX=function(t,e,a){var i=[],r=this.SymbolData.Data.Data;if(!r||r.length<=0)return i;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),s=r[0].High,o=r[0].Low,h=0;h<r.length;++h){var l=r[h];o=Math.min(o,l.Low),s=Math.max(s,l.High)}(o>5e3||o<0||s>5e3||o<0)&&this.ThrowUnexpectedNode(a,"COSTEX() 历史K线最大最小值错误, 超出(0,5000)范围");var u=parseInt(100*s+1),c=parseInt(100*o-1),d=0,f=0,C=0;s=u/100,o=c/100;var m=u-c+1;if(m<1)return i;var D=[],p=[];for(h=0;h<m;++h)D[h]=0,p[h]=0;for(var v=0,g=0,S=0,I=0,T=0,x=0,y=(h=0,0);h<r.length;++h)if(!(h>=n.length)&&n[h]>1){var A=r[h];v=A.Vol/n[h];for(y=0;y<m;y++)D[y]*=1-v;d=parseInt(Math.min(u,Math.max(c,100*A.Low)))-c,f=parseInt(Math.min(u,Math.max(c,100*A.High)))-c,C=parseInt(Math.min(u,Math.max(c,100*A.Close)))-c;for(y=0;y<m;++y)p[y]=0;var b=parseInt((d+f+2*C)/4);if(b==f||b==d)p[b]+=A.Vol;else{for(var w=A.Vol/(b-d),F=d;F<b;++F)p[F]+=w/(b-d)*(F-d);for(F;F<=f;++F)p[F]+=w/(b-f)*(F-f)}0;for(y=d;y<=f;y++)D[y]+=p[y];for(y=0;y<m;y++)D[y];for(f=Array.isArray(t)?parseInt(Math.min(100*t[h]-c,m-1)):parseInt(Math.min(100*t-c,m-1)),y=0,S=0,I=0;y<=f;y++)S+=D[y],I+=.01*(y+c)*D[y];for(f=Array.isArray(e)?parseInt(Math.min(100*e[h]-c,m-1)):parseInt(Math.min(100*e-c,m-1)),y=0,T=0,x=0;y<=f;y++)T+=D[y],x+=.01*(y+c)*D[y];g=S-T,dPerVolRange=I-x,Math.abs(dPerVolRange)>.001&&0!=g?i[h]=dPerVolRange/g:h-1>=0&&(i[h]=i[h-1])}return i},this.PPART=function(t,e){var a=[],i=t;if(i<0)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),s=i,o=0;s<r.length;++s){var h=s-i;if(!(h<0)){var l=0;for(o=0;o<i;++o){var u=r[o+h];l+=u.Vol}if(s<n.length&&n[s]>0){var c=1-l/n[s];a[s]=c}}}return a},this.LWINNER=function(t,e,a){var i=t;i<=0&&this.ThrowUnexpectedNode(a,"LWINNER() 第1个参数错误");var r=[],n=this.SymbolData.Data.Data;if(!n||n.length<=0)return r;for(var s=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),o=0,h=0,l=i-1,u=0,c=0;l<n.length;++l){var d=l-i+1,f=n[d].High,C=n[d].Low;for(u=0;u<i;++u){var m=n[d+u];C=Math.min(C,m.Low),f=Math.max(f,m.High)}(C>5e3||C<0||f>5e3||C<0)&&this.ThrowUnexpectedNode(a,"LWINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var D=parseInt(100*f+1),p=parseInt(100*C-1),v=0,g=0,S=0;f=D/100,C=p/100;var I=D-p+1;if(I<1)return r;var T=[],x=[];for(u=0;u<I;++u)T[u]=0,x[u]=0;for(u=0;u<i;++u){var y=s[d+u];if(!(y<1)){var A=n[d+u],b=A.Vol/y;for(c=0;c<I;c++)T[c]*=1-b;v=parseInt(Math.min(D,Math.max(p,100*A.Low)))-p,g=parseInt(Math.min(D,Math.max(p,100*A.High)))-p,S=parseInt(Math.min(D,Math.max(p,100*A.Close)))-p;for(c=0;c<I;++c)x[c]=0;var w=parseInt((v+g+2*S)/4);if(w==g||w==v)x[w]+=A.Vol;else{for(var F,M=A.Vol/(w-v),L=v;L<w;++L)x[L]+=M/(w-v)*(L-v);for(;F<=g;++F)x[F]+=M/(w-g)*(F-g)}o=0;for(c=v;c<=g;c++)T[c]+=x[c]}}for(u=0;u<I;u++)o+=T[u];for(g=Array.isArray(e)?parseInt(Math.min(100*e[l]-p,I-1)):parseInt(Math.min(100*e-p,I-1)),h=0,c=0;c<=g;c++)h+=T[c];o>0&&h>0&&h<=o?r[l]=h/o:l-1>=0&&(r[l]=r[l-1])}return r},this.PWINNER=function(t,e,a){return[]},this.CalculateChip=function(t,e,a,i){for(var r={Min:null,Max:null,Data:[]},n=1,s=null,o=null,h=t;h>=0;--h){var l={},u=a[h];l.Vol=h==t?u.Vol*e[h]:u.Vol*n,l.Date=u.Date,l.High=u.High,l.Low=u.Low,(null==s||s<l.High)&&(s=l.High),(null==o||o<l.Low)&&(o=l.Low),r.Data[h]=l,n*=1-e[h]/100*i}return r.Max=s,r.Min=o,r},this.UPNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]>t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.DOWNNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]<t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.NDAY=function(t,e,a){var i=[];if(a<1)return i;if(!Array.isArray(t)&&!Array.isArray(e))return i;if(null==t||null==e)return i;if(Array.isArray(t)&&Array.isArray(e)){if(a>=t.length||a>=e.length)return i;for(var r=Math.max(t.length,e.length),n=0,s=0;s<r;++s)i[s]=0,s>=t.length||s>=e.length||(this.IsNumber(t[s])&&this.IsNumber(e[s])?(t[s]>e[s]?++n:n=0,n==a&&(i[s]=1,--n)):n=0)}else if(Array.isArray(t)&&!Array.isArray(e)){if(a>=t.length||!this.IsNumber(e))return;n=0;for(var o in t)i[o]=0,this.IsNumber(t[o])?(t[o]>e?++n:n=0,n==a&&(i[o]=1,--n)):n=0}else if(!Array.isArray(t)&&Array.isArray(e)){if(a>=e.length||!this.IsNumber(t))return;n=0;for(var h in e)i[h]=0,this.IsNumber(e[h])?(t>e[h]?++n:n=0,n==a&&(i[h]=1,--n)):n=0}return i},this.LONGCROSS=function(t,e,a){for(var i=[],r=Math.max(t.length,e.length),n=0;n<r;++n)i[n]=0,n-1<0||n>=t.length||n>=e.length||this.IsNumber(t[n])&&this.IsNumber(e[n])&&this.IsNumber(t[n-1])&&this.IsNumber(e[n-1])&&t[n]>e[n]&&t[n-1]<e[n-1]&&(i[n]=1);for(var s=0,o=0;s<r;++s)if(i[s])for(o=1;o<=a&&s-o>=0;++o)if(t[s-o]>=e[s-o]){i[s]=0;break}return i},this.ISVALID=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=i?1:0}return e}return t?1:0},this.EXISTR=function(t,e,a){var i=[];if(!Array.isArray(t))return i;if(e=parseInt(e),a=parseInt(a),e<=0&&(e=t.length),a<=0&&(a=1),a>e)return i;i=[];for(var r=0,n=0;r<t.length;++r)if(i[r]=null,!(r-e<0||r-a<0))for(i[r]=0,n=e;n>=a;--n){var s=t[r-n];if(this.IsNumber(s)&&s){i[r]=1;break}}return i},this.RELATE=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),s=Math.max(t.length,e.length),o=0,h=0;o<s;++o)if(i[o]=null,!(o>=t.length||o>=e.length||o>=r.length||o>=n.length)){var l=r[o],u=n[o],c=0,d=0,f=0;for(h=o-a+1;h<=o;++h)c+=(t[h]-l)*(e[h]-u),d+=Math.pow(t[h]-l,2),f+=Math.pow(e[h]-u,2);i[o]=c/a/(Math.sqrt(d/a)*Math.sqrt(f/a))}return i},this.CalculateAverage=function(t,e){var a=[];if(e<1)return a;for(var i=0,r=0;r<t.length;++r)if(this.IsNumber(t[r]))break;for(;r<t.length&&r<e;++r){a[r]=null;var n=t[r];this.IsNumber(n)&&(i+=n)}for(a[r-1]=i/e;r<t.length;++r){n=t[r];var s=t[r-e];this.IsNumber(n)||(n=0),this.IsNumber(s)||(s=0),i=i-s+n,a[r]=i/e}return a},this.COVAR=function(t,e,a){if(this.IsNumber(t)||this.IsNumber(e))return 0;var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),s=Math.max(t.length,e.length),o=(s=Math.max(t.length,e.length),0),h=0;o<s;++o)if(i[o]=null,!(o>=t.length||o>=e.length||o>=r.length||o>=n.length)){var l=r[o],u=n[o],c=0;for(h=o-a+1;h<=o;++h)c+=(t[h]-l)*(e[h]-u);i[o]=c/a}return i},this.HHVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var s=null,o=n;o<t.length;++o)if(this.IsNumber(t[o])){s=o;break}for(var h=0;o<t.length&&h<r;++h,++o)t[o]>=t[s]&&(s=o);null!=s&&(a[i]=i-s)}}else{e<1&&(e=t.length);for(s=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){s=i;break}o=0;for(i=s+1;i<t.length&&o<e;++i,++o)t[i]>=t[s]&&(s=i),e==t.length&&(a[i]=i-s);for(;i<t.length;++i){if(i-s<e)t[i]>=t[s]&&(s=i);else for(s=i-e+1,o=s;o<=i;++o)t[o]>=t[s]&&(s=o);a[i]=i-s}}return a},this.LLVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var s=null,o=n;o<t.length;++o)if(this.IsNumber(t[o])){s=o;break}for(var h=0;o<t.length&&h<r;++h,++o)t[o]<=t[s]&&(s=o);null!=s&&(a[i]=i-s)}}else{e<1&&(e=t.length);for(s=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){s=i;break}o=0;for(i=s+1;i<t.length&&o<e;++i,++o)t[i]<=t[s]&&(s=i),e==t.length&&(a[i]=i-s);for(;i<t.length;++i){if(i-s<e)t[i]<=t[s]&&(s=i);else for(s=i-e+1,o=s;o<=i;++o)t[o]<=t[s]&&(s=o);a[i]=i-s}}return a},this.BETA=function(t){var e=[],a=this.SymbolData.Data,i=this.SymbolData.IndexData;t<=0&&(t=1);for(var r=[],n=[],s=0;s<a.Data.length;++s){r[s]=0,n[s]=0;var o=a.Data[s],h=i.Data[s];o.Close>0&&o.YClose>0&&(r[s]=(o.Close-o.YClose)/o.YClose),h.Close>0&&h.YClose>0&&(n[s]=(h.Close-h.YClose)/h.YClose)}for(var l=this.CalculateAverage(r,t),u=this.CalculateAverage(n,t),c=0,d=0;c<a.Data.length;++c)if(e[c]=null,!(c>=r.length||c>=n.length||c>=l.length||c>=u.length)){var f=l[c],C=u[c],m=0,D=0;for(d=c-t+1;d<=c;++d){var p=n[d]-C,v=r[d]-f;m+=p*v,D+=p*p}this.IsDivideNumber(D)&&this.IsNumber(m)&&(e[c]=m/D)}return e},this.BETA2=function(t,e,a){var i=[];a<=0&&(a=1);for(var r=[null],n=[null],s=Math.max(t.length,e.length),o={X:t[0],Y:e[0]},h=1;h<s;++h){r[h]=0,n[h]=0;var l=t[h],u=e[h];o.X>0&&(r[h]=(l-o.X)/o.X),o.Y>0&&(n[h]=(u-o.Y)/o.Y),o={X:l,Y:u}}for(var c=this.CalculateAverage(r,a),d=this.CalculateAverage(n,a),f=(h=0,0);h<s;++h)if(i[h]=null,!(h>=r.length||h>=n.length||h>=c.length||h>=d.length)){var C=c[h],m=d[h],D=0,p=0;for(f=h-a+1;f<=h;++f){var v=r[f]-C,g=n[f]-m;D+=v*g,p+=v*v}this.IsDivideNumber(p)&&this.IsNumber(D)&&(i[h]=D/p)}return i},this.SAR=function(t,e,a){var i=[],r=this.SymbolData.Data;if(t>=r.Data.length)return i;for(var n=null,s=null,o=0;o<t;++o){var h=r.Data[o];(null==n||n<h.High)&&(n=h.High),(null==s||s>h.Low)&&(s=h.Low)}var l=0;i[t-1]=s;var u=s,c=r.Data[0].High,d=e/100;for(o=t;o<r.Data.length;++o){var f=c,C=(h=r.Data[o],r.Data[o-1]);0==l?h.Low<i[o-1]?(l=1,c=h.Low,d=e/100,u=Math.max(h.High,C.High),u=Math.max(u,f+d*(c-f))):(l=0,h.High>f&&(c=h.High,d=Math.min(d+e/100,a/100)),u=Math.min(h.Low,C.Low),u=Math.min(u,i[o-1]+d*(c-i[o-1]))):1==l&&(h.High>i[o-1]?(l=0,c=h.High,d=e/100,u=Math.min(h.Low,C.Low),u=Math.min(u,i[o-1]+d*(c-f))):(l=1,h.Low<f&&(c=h.Low,d=Math.min(d+e/100,a/100)),u=Math.max(h.High,C.High),u=Math.max(u,i[o-1]+d*(c-i[o-1])))),i[o]=u}return i},this.SARTURN=function(t,e,a){var i=[],r=this.SAR(t,e,a),n=this.SymbolData.Data,s=0;for(s=0;s<r.length;++s)if(this.IsNumber(r[s]))break;var o=0;s<n.Data.length&&(o=n.Data[s].Close>r[s]);for(var h=s+1;h<n.Data.length;++h){var l=n.Data[h];l.Close<r[h]&&o?i[h]=-1:i[h]=l.Close>r[h]&&!o?1:0,o=l.Close>r[h]}return i},this.BACKSET=function(t,e){var a=[];if(!t)return a;var i=t.length;if(!this.IsNumber(i)||i<=0)return a;if(Array.isArray(e)){for(var r=0;r<i;++r)a[r]=0;for(r=0;r<i;++r){var n=t[r],s=e[r];if(this.IsNumber(n)&&n&&this.IsNumber(s))for(var o=r,h=0;o>=0&&h<s;--o,++h)a[o]=1}}else{for(r=0;r<i;++r)a[r]=0;for(var l=0;l<i;++l)if(this.IsNumber(t[l]))break;if(l==i)return a;var u=Math.min(i-l,Math.max(e,1));for(r=i-1,o=0;r>=0;--r){n=t[r];if(this.IsNumber(n)&&n)for(o=r;o>r-u;--o)a[o]=1}if(t[r])for(o=r;o>=l;--o)a[o]=1}return a},this.BETWEEN=function(t,e,a){var i=[],r="number"==typeof t,n="number"==typeof e,s="number"==typeof a;if(r&&n&&s)return t>=e&&t<=a?1:0;for(var o in t){i[o]=0;var h=t[o],l=null,u=null;n?l=e:o<e.length-1&&(l=e[o]),s?u=a:o<a.length-1&&(u=a[o]),null!=l&&null!=u&&(l>u?h>=u&&h<=l&&(i[o]=1):h<=u&&h>=l&&(i[o]=1))}return i},this.STRCAT=function(t,e){var a=[];return ze.IsString(t)&&ze.IsString(e)&&(a=t+e),a},this.VARCAT=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=Math.max(t.length,e.length),r="",n=0;n<i;++n){if(a[n]=null,r="",n<t.length){var s=t[n];ze.IsString(s)&&(r+=s)}if(n<e.length){s=e[n];ze.IsString(s)&&(r+=s)}""!=r&&(a[n]=r)}else if(ze.IsString(t)&&Array.isArray(e))for(n=0;n<e.length;++n){a[n]=null;s=e[n];ze.IsString(s)&&(a[n]=t+s)}else if(Array.isArray(t)&&ze.IsString(e))for(n=0;n<t.length;++n){a[n]=null;s=t[n];ze.IsString(s)&&(a[n]=s+e)}else ze.IsString(t)&&ze.IsString(e)&&(a=t+e);return a},this.FINDSTR=function(t,e){var a,i,r=[];if(a=ze.IsNumber(t)?t.toString():t,i=ze.IsNumber(e)?e.toString():e,ze.IsString(a)&&ze.IsString(i))return a.indexOf(i)>=0?1:0;if(Array.isArray(t)&&ze.IsString(i))for(var n=0;n<t.length;++n){var s=t[n];ze.IsString(s)?r[n]=s.indexOf(i)>=0?1:0:ze.IsNumber(s)?(a=s.toString(),r[n]=a.indexOf(i)>=0?1:0):r[n]=0}return r},this.STRLEN=function(t){if(ze.IsString(t))return t.length;if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];ze.IsString(i)?e[a]=i.length:e[a]=null}return e}return null},this.STRCMP=function(t,e){return ze.IsString(t)&&ze.IsString(e)?t==e?1:0:null},this.STRSPACE=function(t){var e=[];if(Array.isArray(t))for(var a=0;a<t.length;++a){e[a]=null;var i=t[a];ze.IsString(i)&&(e[a]=i+" ")}else ze.IsString(t)&&(e=t+" ");return e},this.CON2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(this.IsNumber(r))return a=r.toFixed(e),a}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.VAR2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=0;i<t.length;++i){a[i]=null;var r=t[i];this.IsNumber(r)&&(a[i]=r.toFixed(e))}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.MOD=function(t,e){var a=[],i="number"==typeof t,r="number"==typeof e;if(i&&r)return en.MOD(t,e);if(!i&&!r){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)a[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(a[s]=en.MOD(t[s],e[s]));return a}if(i&&!r){for(var o in e)a[o]=null,this.IsNumber(t)&&this.IsNumber(e[o])&&(a[o]=en.MOD(t,e[o]));return a}if(!i&&r){for(var o in t)a[o]=null,this.IsNumber(t[o])&&this.IsNumber(e)&&(a[o]=en.MOD(t[o],e));return a}return a},this.POW=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=0;i<t.length;++i){var r=t[i],n=e[i];this.IsNumber(r)&&this.IsNumber(n)?a[i]=Math.pow(r,n):a[i]=null}else if(ze.IsNumber(t)&&Array.isArray(e))for(i=0;i<e.length;++i){var s=e[i];this.IsNumber(s)?a[i]=Math.pow(t,s):a[i]=null}else{if(ze.IsNumber(t)&&ze.IsNumber(e))return Math.pow(t,e);if(Array.isArray(t)&&ze.IsNumber(e))for(i=0;i<t.length;++i){s=t[i];this.IsNumber(s)?a[i]=Math.pow(s,e):a[i]=null}}return a},this.CEILING=function(t){var e="number"==typeof t;if(e)return parseInt(t);var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=parseInt(r):a[i]=null}return a},this.FLOOR=function(t){var e="number"==typeof t;if(e)return parseInt(t-1);var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=parseInt(r-1):a[i]=null}return a},this.ZTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1+e)*r:a[i]=null}return a}if(this.IsNumber(t)){a=(1+e)*t;return a}},this.DTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1-e)*r:a[i]=null}return a}if(this.IsNumber(t)){a=(1-e)*t;return a}},this.FRACPART=function(t){if(Array.isArray(t)){var e=[],a=0;for(var i in t){var r=t[i];this.IsNumber(r)?(a=parseInt(r),e[i]=r-a):e[i]=null}return e}if(this.IsNumber(t)){a=parseInt(t);e=t-a;return e}},this.SIGN=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=null,ze.IsNumber(i)&&(e[a]=i>0?1:0==i?0:-1)}return e}return t>0?1:0==t?0:-1},this.BARSLASTCOUNT=function(t){var e=null;if(Array.isArray(t)){if(e=[],t.length>0)for(var a=0,i=t.length-1;i>=0;--i){a=0;for(var r=i;r>=0;--r){if(!t[r])break;++a}e[i]=a}}else e=t?1:0;return e},this.INTPART=function(t){var e=null;if(Array.isArray(t))for(var a in e=[],t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}else this.IsNumber(t)&&(e=parseInt(t));return e},this.CONST=function(t){if(Array.isArray(t)){var e=t.length;return e>0?t[e-1]:null}return t},this.TOPRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,s=i-1;s>=0;--s){if(t[s]>r)break;++n}e[i]=n}}return e},this.LOWRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,s=i-1;s>=0;--s){if(t[s]<r)break;++n}e[i]=n}}return e},this.FINDLOW=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push(u)}if(o.length>0){o.sort((function(t,e){return t-e}));l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l]}}return r},this.FINDHIGH=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push(u)}if(o.length>0){o.sort((function(t,e){return e-t}));l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l]}}return r},this.FINDHIGHBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push({Value:u,Period:h})}if(o.length>0){o.sort((function(t,e){return e.Value-t.Value}));l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l].Period}}return r},this.FINDLOWBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push({Value:u,Period:h})}if(o.length>0){o.sort((function(t,e){return t.Value-e.Value}));l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l].Period}}return r},this.HOD=function(t,e){var a=[];if(ze.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(ze.IsNumber(n)){if(Array.isArray(e))var s=parseInt(e[r]);else s=parseInt(e);e<=0&&(s=r);for(var o=1,h=r-1,l=1;h>=0&&l<s;--h,++l){var u=t[h];ze.IsNumber(u)&&u>n&&++o}a[r]=o}}return a},this.LOD=function(t,e){var a=[];if(ze.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(ze.IsNumber(n)){if(Array.isArray(e))var s=parseInt(e[r]);else s=parseInt(e);e<=0&&(s=r);for(var o=1,h=r-1,l=1;h>=0&&l<s;--h,++l){var u=t[h];ze.IsNumber(u)&&u<n&&++o}a[r]=o}}return a},this.BARSNEXT=function(t){if(!Array.isArray(t))return 0;for(var e=[],a=0;a<t.length;++a){e[a]=0;for(var i=a,r=0;i<t.length;++i,++r){var n=t[i];if(n>0){e[a]=r;break}}}return e},this.RAND=function(t){if(Array.isArray(t)){var e=[];for(var a in t){e[a]=null;var i=t[a],r=parseInt(i);r<=0||(e[a]=Math.ceil(Math.random()*r))}return e}r=parseInt(t);if(r<=0)return null;var n=this.SymbolData.Data,s=n.Data.length;for(e=[],a=0;a<s;++a)e[a]=Math.ceil(Math.random()*r);return e},this.AMA=function(t,e){var a,i=[];if(Array.isArray(e)){for(var r=t.length-1;r>=0;--r)if(this.IsNumber(e[r])){a=e[r];break}}else a=e;if(this.IsNumber(a)){if(a>1)return i;var n=0,s=0;for(n;n<t.length;++n)if(i[n]=null,this.IsNumber(t[n])){s=t[n],i[n]=s;break}for(r=n+1;r<t.length;++r){var o=t[r];i[r]=i[r-1]+a*(o-i[r-1])}}return i},this.TMA=function(t,e,a){var i=[];if(this.IsNumber(e)&&e<=1&&this.IsNumber(a)&&a<1){var r=!1;for(var n in t)if(i[n]=null,0==r){var s=t[n];this.IsNumber(s)&&(i[n]=s,i[n],r=!0)}else{s=t[n];if(!this.IsNumber(s))continue;i[n]=e*i[n-1]+a*s,i[n]}}return i},this.ROUND=function(t){if(this.IsNumber(t))return Math.round(t);var e=[];if(Array.isArray(t))for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=Math.round(i):e[a]=null}return e},this.ROUND2=function(t,e){var a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12],i=0;if(this.IsNumber(e)&&(i=parseInt(e)),e<0?i=0:e>=a.length&&(i=a.length-1),this.IsNumber(t))return Math.round(t*a[i])/a[i];var r=[];if(Array.isArray(t))for(var n in t){var s=t[n];this.IsNumber(s)?r[n]=Math.round(s*a[i])/a[i]:r[n]=null}return r},this.TRMA=function(t,e){if(!this.IsNumber(e)||e<=0)return[];e=parseInt(e);var a=0,i=0;e%2==0?(a=parseInt(e/2),i=a+1):(a=parseInt((e+1)/2),i=a);var r=this.MA(t,a),n=this.MA(r,i);return n},this.VALUEWHEN=function(t,e){if(Array.isArray(t)){var a=[];if(Array.isArray(e)){var i=null;for(var r in t)if(r>=e.length)a[r]=i;else{var n=e[r];t[r]?(a[r]=n,i=n):a[r]=i}}else{i=null;for(var r in t)t[r]?(a[r]=e,i=e):a[r]=i}return a}return t?1:0},this.HARMEAN=function(t,e){var a=[];if(Array.isArray(t))if(Array.isArray(e))for(var i=0;i<t.length;++i)if(i>=e.length)a[i]=null;else{var r=parseInt(e[i]);if(r<=0||r>i)a[i]=null;else{for(var n=0,s=0;s<r;++s){var o=t[i-s];if(!this.IsNumber(o)||0==o){n=null;break}n+=1/o}a[i]=null==n?null:1/(n/r)}}else if(this.IsNumber(e)){if(e=parseInt(e),e<=0)return a;for(i=0;i<t.length;++i)if(e>i)a[i]=null;else{for(n=0,s=0;s<e;++s){o=t[i-s];if(!this.IsNumber(o)||0==o){n=null;break}n+=1/o}a[i]=null==n?null:1/(n/e)}}return a},this.DATETODAY=function(t){var e=[],a=new Date("1990-12-19");if(Array.isArray(t))for(var i in t){e[i]=null;var r=t[i];if(this.IsNumber(r)){var n=r+19e6;if(!(n<19901219)){var s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=parseInt(n%100),l=new Date("".concat(s,"-").concat(o,"-").concat(h));e[i]=Math.round((l-a)/864e5)}}}else if(this.IsNumber(t)){n=t+19e6;if(n>=19901219){s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=parseInt(n%100),l=new Date("".concat(s,"-").concat(o,"-").concat(h));return Math.round((l-l)/864e5)}}return e},this.DAYTODATE=function(t){var e=new Date("1990-12-19"),a=[];if(Array.isArray(t))for(var i in t){a[i]=null;var r=t[i];if(this.IsNumber(r)){e.setDate(e.getDate()+r);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();n-=19e6,a[i]=n,e.setDate(e.getDate()-r)}}else if(this.IsNumber(t)){e.setDate(e.getDate()+t);n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();return n-=19e6,n}return a},this.TIMETOSEC=function(t){var e=parseInt(t/1e4),a=parseInt(t%1e4/100),i=t%100,r=60*e*60+60*a+i;return r},this.SECTOTIME=function(t){Math.floor(t/86400);var e=Math.floor(t%86400/3600),a=Math.floor(t%3600/60),i=t%60,r=1e4*e+100*a+i;return r},this.ANY=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=0;for(r=0;r<e;++r){var s=t[i-r];if(s>0){n=1;break}}a[i]=n}return a}if(ze.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.ALL=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=1;for(r=0;r<e;++r){var s=t[i-r];if(!(s>0)){n=0;break}}a[i]=n}return a}if(ze.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.TESTSKIP=function(t,e){if(Array.isArray(t)){if(t.length<=0)return!1;var a=t[t.length-1];return!!a}return ze.IsNumber(t)?!(t<=0):!!t},this.IFC=function(t){if(Array.isArray(t)){var e=t[t.length-1];return!!ze.IsNumber(e)&&e>0}return!!ze.IsNumber(t)&&t>0},this.ALIGNRIGHT=function(t){if(Array.isArray(t)){for(var e=[],a=t.length-1,i=t.length-1;i>=0;--i){var r=t[i];(ze.IsNumber(r)||ze.IsString(r))&&(e[a]=r,--a)}for(i=a;i>=0;--i)e[i]=null;return e}return t},this.SUMBARS=function(t,e){var a=Array.isArray(t),i=Array.isArray(e),r=ze.IsNumber(t),n=ze.IsNumber(e),s=[];if(a&&n)for(var o=0,h=0;o<t.length;++o){for(var l=0,u=(h=0,o-1);u>=0;--u,++h){var c=t[o];if(ze.IsNumber(c)&&(l+=t[u],l>e))break}s[o]=h}else if(a&&i){var d=Math.max(t.length,e.length);for(o=0;o<d;++o){s[o]=null;l=0,h=0;var f=e[o];if(ze.IsNumber(f)){for(u=o-1;u>=0;--u,++h){c=t[o];if(ze.IsNumber(c)&&(l+=t[u],l>f))break}s[o]=h}}}else if(r&&i)for(o=0;o<e.length;++o){s[o]=null;l=0,h=0,f=e[o];if(ze.IsNumber(f)){for(u=o-1;u>=0;--u,++h)if(l+=t,l>f)break;s[o]=h}}return s},this.STRFORMAT=function(t,e,a){var i=t.match(/{\d+}/g);if(!ze.IsNonEmptyArray(i))return null;for(var r=new Map,n=-1,s=0;s<i.length;++s){var o=i[s];if(!(o.length<3)){var l=o.slice(1,o.length-1),u=parseInt(l),c={Src:o,Index:u,Text:null};n<u&&(n=u),r.set(u,c)}}var d=!1,f=0;for(s=1;s<e.length;++s){o=e[s];Array.isArray(o)&&(d=!0,f<o.length&&(f=o.length))}if(d){var C=[];for(s=0;s<f;++s){var m,D=t,p=(0,h.default)(r);try{for(p.s();!(m=p.n()).done;){o=m.value;var v=o[1],g=(c=e[v.Index+1],"null");if(c)if(Array.isArray(c)){l=c[s];l&&(g="".concat(l))}else g="".concat(c);D=D.replace(v.Src,g)}}catch(T){p.e(T)}finally{p.f()}C[s]=D}return C}C=t;var S,I=(0,h.default)(r);try{for(I.s();!(S=I.n()).done;){o=S.value,v=o[1],c=e[v.Index+1],g="null";c&&(g="".concat(c)),C=C.replace(v.Src,g)}}catch(T){I.e(T)}finally{I.f()}return C},this.CallFunction=function(t,e,a,i){switch(t){case"MAX":case"MAX6":return this.MAX(e,a);case"MIN":case"MIN6":return this.MIN(e,a);case"REF":return this.REF(e[0],e[1]);case"REFV":return this.REFV(e[0],e[1]);case"REFX":return this.REFX(e[0],e[1]);case"REFXV":return this.REFXV(e[0],e[1]);case"REFX1":return this.REFX(e[0],e[1]);case"ABS":return this.ABS(e[0]);case"MA":return this.MA(e[0],e[1]);case"EMA":return this.EMA(e[0],e[1]);case"SMA":return this.SMA(e[0],e[1],e[2]);case"DMA":return this.DMA(e[0],e[1]);case"XMA":return this.XMA(e[0],e[1]);case"EXPMA":return this.EXPMA(e[0],e[1]);case"EXPMEMA":return this.EXPMEMA(e[0],e[1]);case"COUNT":return this.COUNT(e[0],e[1]);case"LLV":return this.LLV(e[0],e[1]);case"LV":return this.LV(e[0],e[1]);case"LLVBARS":return this.LLVBARS(e[0],e[1]);case"HHV":return this.HHV(e[0],e[1]);case"HV":return this.HV(e[0],e[1]);case"HHVBARS":return this.HHVBARS(e[0],e[1]);case"MULAR":return this.MULAR(e[0],e[1]);case"CROSS":return this.CROSS(e[0],e[1]);case"LONGCROSS":return this.LONGCROSS(e[0],e[1],e[2]);case"ISVALID":return this.ISVALID(e[0]);case"CROSSDOWN":return this.CROSSDOWN(e[0],e[1]);case"CROSSUP":return this.CROSSUP(e[0],e[1]);case"AVEDEV":return this.AVEDEV(e[0],e[1]);case"STD":return this.STD(e[0],e[1]);case"IF":case"IFF":case"IFELSE":return this.IF(e[0],e[1],e[2]);case"IFN":return this.IFN(e[0],e[1],e[2]);case"NOT":return this.NOT(e[0]);case"SUM":return this.SUM(e[0],e[1]);case"RANGE":return this.RANGE(e[0],e[1],e[2]);case"EXIST":return this.EXIST(e[0],e[1]);case"EXISTR":return this.EXISTR(e[0],e[1],e[2]);case"FILTER":return this.FILTER(e[0],e[1]);case"TFILTER":return this.TFILTER(e[0],e[1],e[2]);case"SLOPE":return this.SLOPE(e[0],e[1]);case"BARSLAST":return this.BARSLAST(e[0]);case"BARSCOUNT":return this.BARSCOUNT(e[0]);case"BARSSINCEN":return this.BARSSINCEN(e[0],e[1]);case"BARSSINCE":return this.BARSSINCE(e[0]);case"LAST":return this.LAST(e[0],e[1],e[2]);case"EVERY":return this.EVERY(e[0],e[1]);case"DEVSQ":return this.DEVSQ(e[0],e[1]);case"ZIG":return this.ZIG(e[0],e[1]);case"TROUGHBARS":return this.TROUGHBARS(e[0],e[1],e[2]);case"TROUGH":return this.TROUGH(e[0],e[1],e[2]);case"PEAKBARS":return this.PEAKBARS(e[0],e[1],e[2]);case"PEAK":return this.PEAK(e[0],e[1],e[2]);case"COST":return this.COST(e[0]);case"WINNER":return this.WINNER(e[0],a);case"PPART":return this.PPART(e[0],a);case"COSTEX":return this.COSTEX(e[0],e[1],a);case"LWINNER":return this.LWINNER(e[0],e[1],a);case"PWINNER":return this.PWINNER(e[0],e[1],a);case"FORCAST":return this.FORCAST(e[0],e[1]);case"TSMA":return this.TSMA(e[0],e[1]);case"STDP":return this.STDP(e[0],e[1]);case"VAR":return this.VAR(e[0],e[1]);case"VARP":return this.VARP(e[0],e[1]);case"UPNDAY":return this.UPNDAY(e[0],e[1]);case"DOWNNDAY":return this.DOWNNDAY(e[0],e[1]);case"NDAY":return this.NDAY(e[0],e[1],e[2]);case"RELATE":return this.RELATE(e[0],e[1],e[2]);case"COVAR":return this.COVAR(e[0],e[1],e[2]);case"BETA":return this.BETA(e[0]);case"BETA2":return this.BETA2(e[0],e[1],e[2]);case"WMA":return this.WMA(e[0],e[1]);case"MEMA":return this.MEMA(e[0],e[1]);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"REVERSE":return this.REVERSE(e[0]);case"SAR":return this.SAR(e[0],e[1],e[2]);case"SARTURN":return this.SARTURN(e[0],e[1],e[2]);case"BACKSET":return this.BACKSET(e[0],e[1]);case"BETWEEN":return this.BETWEEN(e[0],e[1],e[2]);case"STRCAT":return this.STRCAT(e[0],e[1]);case"CON2STR":return this.CON2STR(e[0],e[1]);case"VAR2STR":return this.VAR2STR(e[0],e[1]);case"VARCAT":return this.VARCAT(e[0],e[1]);case"STRSPACE":return this.STRSPACE(e[0]);case"FINDSTR":return this.FINDSTR(e[0],e[1]);case"STRCMP":return this.STRCMP(e[0],e[1]);case"STRLEN":return this.STRLEN(e[0]);case"STRFORMAT":return this.STRFORMAT(e[0],e,a);case"DTPRICE":return this.DTPRICE(e[0],e[1]);case"ZTPRICE":return this.ZTPRICE(e[0],e[1]);case"MOD":return this.MOD(e[0],e[1]);case"POW":return this.POW(e[0],e[1]);case"CEILING":return this.CEILING(e[0]);case"FLOOR":return this.FLOOR(e[0]);case"FRACPART":return this.FRACPART(e[0]);case"SIGN":return this.SIGN(e[0]);case"BARSLASTCOUNT":return this.BARSLASTCOUNT(e[0]);case"INTPART":return this.INTPART(e[0]);case"CONST":return this.CONST(e[0]);case"TOPRANGE":return this.TOPRANGE(e[0]);case"LOWRANGE":return this.LOWRANGE(e[0]);case"FINDLOW":return this.FINDLOW(e[0],e[1],e[2],e[3]);case"FINDLOWBARS":return this.FINDLOWBARS(e[0],e[1],e[2],e[3]);case"FINDHIGH":return this.FINDHIGH(e[0],e[1],e[2],e[3]);case"FINDHIGHBARS":return this.FINDHIGHBARS(e[0],e[1],e[2],e[3]);case"BARSNEXT":return this.BARSNEXT(e[0]);case"HOD":return this.HOD(e[0],e[1]);case"LOD":return this.LOD(e[0],e[1]);case"AMA":return this.AMA(e[0],e[1]);case"TMA":return this.TMA(e[0],e[1],e[2]);case"ROUND":return this.ROUND(e[0]);case"ROUND2":return this.ROUND2(e[0],e[1]);case"TRMA":return this.TRMA(e[0],e[1]);case"VALUEWHEN":return this.VALUEWHEN(e[0],e[1]);case"HARMEAN":return this.HARMEAN(e[0],e[1]);case"DATETODAY":return this.DATETODAY(e[0]);case"DAYTODATE":return this.DAYTODATE(e[0]);case"TIMETOSEC":return this.TIMETOSEC(e[0]);case"SECTOTIME":return this.SECTOTIME(e[0]);case"ANY":return this.ANY(e[0],e[1]);case"ALL":return this.ALL(e[0],e[1]);case"TESTSKIP":return this.TESTSKIP(e[0],a);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"ALIGNRIGHT":return this.ALIGNRIGHT(e[0]);case"ATAN":return this.Trigonometric(e[0],Math.atan);case"ACOS":return this.ACOS(e[0]);case"ASIN":return this.ASIN(e[0]);case"COS":return this.Trigonometric(e[0],Math.cos);case"SIN":return this.Trigonometric(e[0],Math.sin);case"TAN":return this.Trigonometric(e[0],Math.tan);case"LN":return this.Trigonometric(e[0],Math.log);case"LOG":return this.Trigonometric(e[0],Math.log10);case"EXP":return this.Trigonometric(e[0],Math.exp);case"SQRT":return this.Trigonometric(e[0],Math.sqrt);case"RAND":return this.RAND(e[0]);default:this.ThrowUnexpectedNode(a,"函数"+t+"不存在",t)}},this.CallCustomFunction=function(t,e,a,i){var r=Xr.CustomFunction.Data.get(t),n=a.GetStockCacheData({CustomName:t,Node:i});if(!r.Invoke)return{Out:n};l.Complier.Log("[JSAlgorithm::CallCustomFunction] call custom function functionInfo=",r);var s=this,o={Name:t,Args:e,Symbol:a.Symbol,Period:a.Period,Right:a.Right,KData:a.Data,DownloadData:n,ThrowError:function(t){s.ThrowUnexpectedNode(i,t)}};return r.Invoke(o)},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)}}function an(t,e){this.ErrorHandler=t,this.SymbolData=e,this.DRAWTEXT=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWTEXT",Text:a};if(Array.isArray(t)){if(t.length<=0)return r;var n=this.IsNumber(e),s=!1;for(var o in"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,s=!0),t)i[o]=null,!isNaN(t[o])&&t[o]&&(n||s?i[o]=e:this.IsNumber(e[o])&&(i[o]=e[o]))}else if(this.IsNumber(t)&&t){n=this.IsNumber(e),s=!1;"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,s=!0);for(o=0;o<this.SymbolData.Data.Data.length;++o)n||s?i[o]=e:this.IsNumber(e[o])&&(i[o]=e[o])}return r},this.DRAWTEXT_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},s={DrawData:n,DrawType:"DRAWTEXT_FIX",Text:null,Position:{X:e,Y:a,Type:i}};if(t.length<=0)return s;if(Array.isArray(t))for(var o in t)n.Text[o]=null,n.Value[o]=0,!isNaN(t[o])&&t[o]&&(n.Value[o]=1,n.Text[o]=r);else if(t)for(o=0;o<this.SymbolData.Data.Data.length;++o)n.Text[o]=r,n.Value[o]=1;return s},this.SUPERDRAWTEXT=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"SUPERDRAWTEXT",Text:a,YOffset:r,Direction:i,TextAlign:"center"};if(t.length<=0)return s;var o="number"==typeof e;for(var h in t)n[h]=null,!isNaN(t[h])&&t[h]&&(o?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return s},this.STICKLINE=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"STICKLINE",Width:i,Type:r};s.Width<0&&(s.Width=3);var o="number"==typeof e,h="number"==typeof a;if(Array.isArray(t)){if(t.length<=0)return s;for(var l in t)if(n[l]=null,!isNaN(t[l])&&t[l])if(o&&h)n[l]={Value:e,Value2:a};else if(o&&!h){if(isNaN(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!o&&h){if(isNaN(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}else{if(!t)return s;for(l=0;l<this.SymbolData.Data.Data.length;++l)if(n[l]=null,o&&h)n[l]={Value:e,Value2:a};else if(o&&!h){if(!ze.IsNumber(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!o&&h){if(!ze.IsNumber(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(!ze.IsNumber(e[l])||!ze.IsNumber(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}return s},this.DRAWLINE=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"DRAWLINE",Expand:r};if(t.length<=0)return s;for(var o=Math.max(t.length,a.length),h=!1,l=!1,u={Start:{},End:{},List:new Array},c=0;c<o;++c){if(n[c]=null,c<t.length&&c<a.length)if(0==h&&0==l){if(null==t[c]||!t[c])continue;h=!0,u.Start={ID:c,Value:e[c]}}else if(1==h&&0==l){var d=null!=a[c]&&a[c];if(!d){t[c]&&(u.Start={ID:c,Value:e[c]});continue}d&&(l=!0,u.End={ID:c,Value:i[c]})}else if(1==h&&1==l){d=null!=a[c]&&a[c];if(d)u.End={ID:c,Value:i[c]};else if(t[c]){var f=this.CalculateDrawLine(u);for(var C in f){var m=f[C];n[m.ID]=m.Value}1==r&&this.CalculateDrawDataExtendLine(n,u.Start.ID-2),h=l=!1,u={Start:{},End:{}},h=!0,l=!1,u.Start={ID:c,Value:e[c]}}}if(1==h&&1==l){var D=this.CalculateDrawLine(u);for(var p in D){var v=D[p];n[v.ID]=v.Value}}}return 1==r&&this.CalculateDrawDataExtendLine(n),s},this.DRAWBAND=function(t,e,a,i){ze.IsNumber(e)&&(e="rgb(".concat(e,",0,0)")),ze.IsNumber(i)&&(i="rgb(".concat(i,",0,0)"));var r=[],n={DrawData:r,DrawType:"DRAWBAND",Color:[null,null]};e&&(n.Color[0]=e.toLowerCase()),i&&(n.Color[1]=i.toLowerCase());var s=ze.IsNumber(t),o=ze.IsNumber(a);if(s||o){if(s&&!o)for(h=a.length,l=0;l<h;++l){u={Value:t,Value2:null};l<a.length&&(u.Value2=a[l]),r.push(u)}else if(!s&&o)for(h=t.length,l=0;l<h;++l){u={Value:null,Value2:a};l<t.length&&(u.Value=t[l]),r.push(u)}else if(s&&o)for(h=this.SymbolData.Data.Data.length,l=0;l<h;++l){u={Value:t,Value2:a};r.push(u)}}else for(var h=Math.max(t.length,a.length),l=0;l<h;++l){var u={Value:null,Value2:null};l<t.length&&(u.Value=t[l]),l<a.length&&(u.Value2=a[l]),r.push(u)}return n},this.GetDataByIndex=function(t,e){var a={Result:!1,Data:null};return this.IsNumber(t)?(a.Result=!0,a.Data=t):e<t.length?(a.Result=!0,a.Data=t[e]):a.Result=!1,a},this.FILLRGN=function(t,e,a){var i=[],r={DrawData:i,DrawType:"FILLRGN"};this.IsNumber(e),this.IsNumber(a);if(Array.isArray(t))for(var n in t){i[n]=null;var s=t[n];if(s){var o=this.GetDataByIndex(e,n);if(o.Result){var h=this.GetDataByIndex(a,n);if(h.Result){var l={Value:o.Data,Value2:h.Data};i[n]=l}}}}else if(t)for(n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;o=this.GetDataByIndex(e,n);if(o.Result){h=this.GetDataByIndex(a,n);if(h.Result){l={Value:o.Data,Value2:h.Data};i[n]=l}}}return r},this.DRAWKLINE=function(t,e,a,i){for(var r=[],n={DrawData:r,DrawType:"DRAWKLINE"},s=Math.max(t.length,e.length,a.length,i.length),o=0;o<s;++o){var h={Open:null,High:null,Low:null,Close:null};o<t.length&&o<e.length&&o<a.length&&o<i.length&&(h.Open=e[o],h.High=t[o],h.Low=a[o],h.Close=i[o]),r[o]=h}return n},this.DRAWKLINE_IF=function(t,e,a,i,r){for(var n=[],s={DrawData:n,DrawType:"DRAWKLINE_IF"},o=Math.max(t.length,e.length,a.length,i.length,r.length),h=0;h<o;++h){var l={Open:null,High:null,Low:null,Close:null};h<e.length&&h<a.length&&h<i.length&&h<r.length&&h<t.length&&t[h]&&(l.Open=a[h],l.High=e[h],l.Low=i[h],l.Close=r[h]),n[h]=l}return s},this.DRAWCOLORKLINE=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWCOLORKLINE",IsEmptyBar:!(0==a),Color:e};if(Array.isArray(t))for(var n=0;n<t.length&&n<this.SymbolData.Data.Data.length;++n){i[n]=null;var s=t[n];if(s){var o=this.SymbolData.Data.Data[n];o&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}}else if(t)for(n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;o=this.SymbolData.Data.Data[n];o&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}return r},this.POLYLINE=function(t,e){var a=[],i={DrawData:a,DrawType:"POLYLINE"},r="number"==typeof e,n=!1;if(r)if(this.IsNumber(t)){if(t)for(var s=this.SymbolData.Data.Data.length,o=0;o<s;++o)a[o]=e}else{var h=!1;for(var o in t)if(a[o]=null,h)a[o]=e;else{if(!t[o])continue;h=!0,a[o]=e}}else{var l={Start:{},End:{},List:new Array};for(var u in t)if(a[u]=null,0==n){if(null==t[u]||!t[u])continue;if(u>=e.length||!this.IsNumber(e[u]))continue;n=!0,l.Start={ID:parseInt(u),Value:e[u]}}else if(1==n){if(null==t[u]||!t[u])continue;if(u>=e.length||!this.IsNumber(e[u]))continue;l.End={ID:parseInt(u),Value:e[u]};var c=this.CalculateDrawLine(l);for(var d in c){var f=c[d];a[f.ID]=f.Value}var C={ID:l.End.ID,Value:l.End.Value};l={Start:C,End:{}}}this.CalculateDrawDataExtendLine(a)}return i},this.CalculateDrawDataExtendLine=function(t,e){if(!(e<0)){var a=null,i=t.length;this.IsNumber(e)&&e<i&&(i=e);for(var r=i-1;r>=0;--r)if(this.IsNumber(t[r])){a=r;break}if(null!=a&&a-1>=0){var n=a-1;for(r=a+1;r<i;++r){var s=t[n],o=t[a],h=(s-o)*(r-n)/(a-n);if(s-h<0)break;t[r]=s-h}}}},this.DRAWNUMBER=function(t,e,a,i){var r={Value:[],Text:[]},n={DrawData:r,DrawType:"DRAWNUMBER"},s=2;ze.IsNumber(i)&&(s=i);var o={DataType:0,SingleValue:null,ArrayValue:null};Array.isArray(e)?(o.ArrayValue=e,o.DataType=2):("TOP"!==e&&"BOTTOM"!==e||(n.FixedPosition=e),o.SingleValue=e,o.DataType=1);var h={DataType:0,SingleValue:null,ArrayValue:null};if(Array.isArray(a)?(h.ArrayValue=a,h.DataType=2):(h.SingleValue=a,h.DataType=1,ze.IsNumber(a)&&(ze.IsInteger(a)?h.SingleValue=a.toString():text=a.toFixed(s))),Array.isArray(t))for(var l=0;l<t.length;++l)r.Value[l]=null,t[l]&&(r.Value[l]=this.DRAWNUMBER_Temp_PriceItem(l,o),r.Text[l]=this.DRAWNUMBER_Temp_NumberItem(l,h,s));else if(this.IsNumber(t)&&t)for(l=0;l<this.SymbolData.Data.Data.length;++l)r.Value[l]=this.DRAWNUMBER_Temp_PriceItem(l,o),r.Text[l]=this.DRAWNUMBER_Temp_NumberItem(l,h,s);return n},this.DRAWNUMBER_Temp_PriceItem=function(t,e){return e?1==e.DataType?e.SingleValue:ze.IsNonEmptyArray(e.ArrayValue)?e.ArrayValue[t]:null:null},this.DRAWNUMBER_Temp_NumberItem=function(t,e,a){if(!e)return null;if(1==e.DataType)return e.SingleValue;if(!ze.IsNonEmptyArray(e.ArrayValue))return null;var i=e.ArrayValue[t];return this.IsNumber(i)?ze.IsInteger(i)?i.toString():i.toFixed(a):i.toString()},this.DRAWNUMBER_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},s={DrawData:n,DrawType:"DRAWNUMBER_FIX",Position:{X:e,Y:a,Type:i}},o=ze.IsNumber(r);if(Array.isArray(t)){for(var h in t)if(n.Text[h]=null,n.Value[h]=null,t[h])if(o)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!ze.IsNumber(r[h]))continue;var l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}}else if(t)for(h=0;h<this.SymbolData.Data.Data.length;++h)if(o)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!ze.IsNumber(r[h]))continue;l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}else;return s},this.DRAWICON=function(t,e,a){if(ze.IsString(a)){var i=a.replace("ICO","");a=parseInt(i)}var r=Xr.GetDrawIcon(a);r||Xr.GetDrawTextIcon(a),r||(r={Symbol:"??"});var n=[],s={DrawData:n,DrawType:"DRAWICON",Icon:r,IconType:a};if(t.length<=0)return s;var o="number"==typeof e;if("number"==typeof t){if(!t)return s;for(var h=0;h<this.SymbolData.Data.Data.length;++h)o?n[h]=e:h<e.length&&this.IsNumber(e[h])?n[h]=e[h]:n[h]=null;return s}for(var h in t)n[h]=null,t[h]&&(o?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return s},this.ICON=function(t,e){if(ze.IsString(e)){var a=e.replace("ICO","");e=parseInt(a)}var i=Xr.GetDrawIcon(e);i||Xr.GetDrawTextIcon(e),i||(i={Symbol:"??"});for(var r=[],n={DrawData:r,DrawType:"ICON",Icon:i},s=0;s<this.SymbolData.Data.Data.length;++s){var o=this.SymbolData.Data.Data[s];o&&(0==t?r[s]=o.Low:1==t&&(r[s]=o.High))}return n},this.TIPICON=function(t,e,a,i){if(ze.IsString(a)){var r=a.replace("ICO","");a=parseInt(r)}var n=Xr.GetDrawIcon(a),s=[],o={DrawData:s,DrawType:"TIPICON",Icon:n,IconType:a,Text:i};if(t.length<=0)return o;var h="number"==typeof e;if(ze.IsNumber(t)){if(!t)return o;for(var l=0;l<this.SymbolData.Data.Data.length;++l)h?s[l]=e:l<e.length&&ze.IsNumber(e[l])?s[l]=e[l]:s[l]=null}else if(Array.isArray(t))for(l=0;l<t.length;++l)s[l]=null,t[l]&&(h?s[l]=e:ze.IsNumber(e[l])&&(s[l]=e[l]));return o},this.DRAWCHANNEL=function(t,e,a,i,r,n,s){var o=[],h={DrawData:o,DrawType:"DRAWCHANNEL",Border:{}};if(t.length<=0)return h;if(i&&(h.Border.Color=i),s&&(h.AreaColor=s),r>0&&(h.Border.Width=r),n)if("0"==n)h.Border.Dotted=[];else{var l=n.split(",");for(var u in h.Border.Dotted=[],l){var c=l[u];if(c){var d=parseInt(l[u]);ze.IsNumber(d)&&(d<=0||h.Border.Dotted.push(d))}}h.Border.Dotted.length<=0&&(h.Border.Dotted=null)}var f="number"==typeof e,C="number"==typeof a;if("number"==typeof t){if(!t)return h;for(u=0;u<this.SymbolData.Data.Data.length;++u)if(o[u]=null,f&&C)o[u]={Value:e,Value2:a};else if(f&&!C){if(isNaN(a[u]))continue;o[u]={Value:e,Value2:a[u]}}else if(!f&&C){if(isNaN(e[u]))continue;o[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;o[u]={Value:e[u],Value2:a[u]}}}else for(u=0;u<t.length;++u)if(o[u]=null,!isNaN(t[u])&&t[u])if(f&&C)o[u]={Value:e,Value2:a};else if(f&&!C){if(isNaN(a[u]))continue;o[u]={Value:e,Value2:a[u]}}else if(!f&&C){if(isNaN(e[u]))continue;o[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;o[u]={Value:e[u],Value2:a[u]}}return h},this.RGB=function(t,e,a){var i="RGB(".concat(t,",").concat(e,",").concat(a,")");return i},this.RGBA=function(t,e,a,i){var r="RGB(".concat(t,",").concat(e,",").concat(a,",").concat(i,")");return r},this.UPCOLOR=function(t){return t},this.DOWNCOLOR=function(t){return t},this.XMOVE=function(t){return t},this.YMOVE=function(t){return t},this.SOUND=function(t){return{Name:"SOUND",Value:t}},this.PLAYSOUND=function(t,e){return null},this.PARTLINE=function(t){var e=[],a={DrawData:e,DrawType:"PARTLINE"};if(t.length<3)return a;for(var i=t[0],r=[],n=1;n<t.length&&n+1<t.length;n+=2)r.push({Cond:t[n],RGB:t[n+1]});for(var n in i){var s={Value:null,RGB:null};e[n]=s;var o=i[n];if(this.IsNumber(o)){var h=null;for(var l in r){var u=r[l];if(Array.isArray(u.Cond)){if(n<u.Cond.length&&u.Cond[n]){h=u.RGB;break}}else if(this.IsNumber(u.Cond)&&u.Cond){h=u.RGB;break}}h&&(s.Value=o,s.RGB=h)}}return a},this.FILLRGN2=function(t){var e=[],a={DrawData:e,DrawType:"FILLRGN2"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],s=2;s<t.length&&s+1<t.length;s+=2)n.push({Cond:t[s],Color:t[s+1]});for(s=0;s<this.SymbolData.Data.Data.length;++s){e[s]=null;var o={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(i)){if(s>=i.length)continue;if(!this.IsNumber(i[s]))continue;o.Value=i[s]}else{if(!this.IsNumber(i))continue;o.Value=i}if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value2=r[s]}else{if(!this.IsNumber(r))continue;o.Value2=r}e[s]=o}}return a},this.FLOATRGN=function(t){var e=[],a={DrawData:e,DrawType:"FLOATRGN"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],s=2;s<t.length&&s+1<t.length;s+=2)n.push({Cond:t[s],Color:t[s+1]});for(s=0;s<this.SymbolData.Data.Data.length;++s){e[s]=null;var o={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(i)){if(s>=i.length)continue;if(!this.IsNumber(i[s]))continue;o.Value=i[s]}else{if(!this.IsNumber(i))continue;o.Value=i}if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value2=r[s]}else{if(!this.IsNumber(r))continue;o.Value2=r}e[s]=o}}return a},this.FILLBGRGN=function(t,e){var a=[],i={DrawData:a,DrawType:1==t?"FILLTOPRGN":"FILLBOTTOMRGN"};if(e.length<3)return i;for(var r=e[0],n=[],s=1;s<e.length&&s+1<e.length;s+=2)n.push({Cond:e[s],Color:e[s+1]});for(s=0;s<this.SymbolData.Data.Data.length;++s){a[s]=null;var o={Value:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value=r[s]}else{if(!this.IsNumber(r))continue;o.Value=r}a[s]=o}}return i},this.FILLVERTICALRGN=function(t){var e=[],a={DrawData:e,DrawType:"FILLVERTICALRGN"};if(t.length<2)return a;for(var i=[],r=0;r<t.length&&r+1<t.length;r+=2)i.push({Cond:t[r],Color:t[r+1]});for(r=0;r<this.SymbolData.Data.Data.length;++r){e[r]=null;var n={Color:null};for(var s in i){var o=i[s];if(Array.isArray(o.Cond)){if(r<o.Cond.length&&o.Cond[r]){n.Color=o.Color;break}}else if(this.IsNumber(o.Cond)&&o.Cond){n.Color=o.Color;break}}n.Color&&(e[r]=n)}return a},this.DRAWGBK=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK"};if(Array.isArray(t))for(var s in t){var o=t[s];if(o){n.DrawData=r;break}}else t&&(n.DrawData=r);return n},this.DRAWGBK2=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK2"};if(Array.isArray(t)){for(var s in r.Data=[],t){var o=t[s];r.Data[s]=o?1:0}n.DrawData=r}else t&&(n.DrawData=r,n.DrawType="DRAWGBK");return n},this.DRAWGBK_DIV=function(t,e,a,i,r){var n={AryColor:[e,a],ColorType:i,FillType:r,Data:[]},s={DrawData:n,DrawType:"DRAWGBK_DIV"};if(!this.SymbolData||!this.SymbolData.Data||!ze.IsNonEmptyArray(this.SymbolData.Data.Data))return s;var o=this.SymbolData.Data.Data;if(Array.isArray(t))for(var h=0;h<o.length;++h){var l=t[h],u=null;if(l){var c=o[h];u=1==r?{AryValue:[c.High,c.Low]}:2==r?{AryValue:[c.Open,c.Close]}:{AryValue:null}}n.Data[h]=u}else if(t)for(h=0;h<o.length;++h){c=o[h],u=null;u=1==r?{AryValue:[c.High,c.Low]}:2==r?{AryValue:[c.Open,c.Close]}:{AryValue:null},n.Data[h]=u}return s},this.DRAWTEXT_LINE=function(t,e,a,i,r,n,s){var o={Text:{Title:a,Color:i},Line:{Type:n,Color:s}};r<=0&&(r=12),o.Text.Font=r*I()+"px 微软雅黑";var h={DrawData:null,DrawType:"DRAWTEXT_LINE"};if(Array.isArray(t))for(var l in t){var u=t[l];if(u){Array.isArray(e)?o.Price=e[l]:o.Price=e,h.DrawData=o;break}}else t&&(Array.isArray(e)?o.Price=e[0]:o.Price=e,h.DrawData=o);return h},this.DRAWRECTREL=function(t,e,a,i,r){var n={Rect:{Left:Math.min(t,a),Top:Math.min(e,i),Right:Math.max(a,t),Bottom:Math.max(i,e)},Color:r};0==r&&(n.Color=null);var s={DrawData:n,DrawType:"DRAWRECTREL"};return s},this.DRAWTEXTREL=function(t,e,a){var i={Point:{X:t,Y:e}};ze.IsString(a)?i.Text=a:ze.IsNonEmptyArray(a)&&(i.Text=a[0]);var r={DrawData:i,DrawType:"DRAWTEXTREL"};return r},this.DRAWTEXTABS=function(t,e,a){var i={Point:{X:t,Y:e}};ze.IsString(a)?i.Text=a:ze.IsNonEmptyArray(a)&&(i.Text=a[0]);var r={DrawData:i,DrawType:"DRAWTEXTABS"};return r},this.DRAWOVERLAYLINE=function(t,e,a){var i={Data:t,MainData:e};a&&"string"==typeof a&&(i.Title=a);var r={DrawData:i,DrawType:"DRAWOVERLAYLINE"};return r},this.DRAWSL=function(t,e,a,i,r){var n={Data:[],Option:[]},s={DrawData:n,DrawType:"DRAWSL"},o=this.IsNumber(e);if(Array.isArray(t))for(var h in t)n[h]=null,t[h]&&(o?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r}));else if(t){var l=this.SymbolData.Data.Data.length;for(h=0;h<l;++h)n[h]=null,o?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r})}return s},this.VERTLINE=function(t,e){var a={Data:[],LineType:e},i={DrawData:a,DrawType:"VERTLINE"};if(Array.isArray(t))for(var r=0;r<t.length;++r){var n=t[r];a.Data[r]=n?1:0}return i},this.HORLINE=function(t,e,a,i){var r={Data:[],LineType:a,Extend:i},n={DrawData:r,DrawType:"HORLINE"};if(Array.isArray(t)&&Array.isArray(e))for(var s=0;s<t.length;++s){var o=t[s];if(r.Data[s]=null,o&&!(s>=e.length)){var h=e[s];ze.IsNumber(h)&&(r.Data[s]=h)}}else if(Array.isArray(t)&&ze.IsNumber(e))for(s=0;s<t.length;++s){o=t[s];r.Data[s]=null,o&&(r.Data[s]=e)}else if(ze.IsNumber(t)&&t&&this.SymbolData&&this.SymbolData.Data&&this.SymbolData.Data.Data)if(Array.isArray(e)){var l=this.SymbolData.Data.Data.length;for(s=0;s<l;++s)if(r.Data[s]=null,!(s>=e.length)){h=e[s];ze.IsNumber(h)&&(r.Data[s]=h)}}else if(ze.IsNumber(e))for(l=this.SymbolData.Data.Data.length,s=0;s<l;++s)r.Data[s]=e;return n},this.BACKGROUND=function(t,e,a,i,r,n){var s={Margin:[0,1,1,1]};return t&&(s.Color=t),e&&(s.Border=e),ze.IsNumber(a)&&(s.Margin[2]=a),ze.IsNumber(i)&&(s.Margin[3]=i),ze.IsNumber(r)&&(s.Margin[0]=r),ze.IsNumber(n)&&(s.Margin[1]=n),s},this.CKLINE=function(t,e,a,i){var r={Color:t,LineWidth:1,LineType:0,LineDot:[3,3]};if(ze.IsPlusNumber(e)&&(r.LineWidth=e),ze.IsPlusNumber(a)&&(r.LineType=a),i){var n=i.split(","),s=[];for(var o in n){var h=n[o];if(h){var l=parseInt(n[o]);l<=0||s.push(l)}}s.length>0&&(r.LineDotted=s)}r.Data=[];for(o=0;o<this.SymbolData.Data.Data.length;++o){h=this.SymbolData.Data.Data[o];r.Data[o]={High:h.High,Low:h.Low}}return r}}en.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},en.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},en.MOD=function(t,e){if(t<0&&e<0||t>=0&&e>=0){if(parseInt(t)==t&&parseInt(e)==e)return t%e;var a=parseFloat((t-Math.floor(t/e)*e).toFixed(1));return a}var i=Math.abs(t),r=Math.abs(e);a=Math.abs(Math.abs(e)*(Math.floor(i/r)+1)-Math.abs(t));return e<0&&(a=-a),a},an.prototype.CalculateDrawLine=function(t){t.List=[];for(var e=t.Start.ID;e<=t.End.ID;++e)t.List.push(e);var a=Math.abs(t.Start.Value-t.End.Value),i=t.List.length-1,r=[];if(r.push({ID:t.Start.ID,Value:t.Start.Value}),t.Start.Value>t.End.Value)for(var n=1;n<t.List.length-1;++n){var s=a*(t.List.length-1-n)/i+t.End.Value;r.push({ID:t.List[n],Value:s})}else for(var o=1;o<t.List.length-1;++o){s=a*o/i+t.Start.Value;r.push({ID:t.List[o],Value:s})}return r.push({ID:t.End.ID,Value:t.End.Value}),r},an.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},an.prototype.IsDrawFunction=function(t){var e=new Set(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","DRAWCOLORKLINE","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWTEXTREL","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2","DRAWGBK_DIV","VERTLINE","HORLINE","TIPICON"]);return!!e.has(t)},an.prototype.RemoveZero=function(t){while(t.length>0){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var rn={YCLOSE:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,AMOUNT:10,AMPLITUDE:13,INCREASE:14,EXCHANGERATE:37};function nn(t,e,a){this.AST=t,this.Execute=a,this.Symbol="600000.sh",this.Name,this.Data=null,this.PeriodData=new Map,this.IsApiPeriod=!1,this.SourceData=null,this.MarketValue=null,this.Period=0,this.Right=0,this.DataType=0,this.IsBeforeData=!1,this.DayCount,this.Arguments=[],this.KLineApiUrl=Xr.Domain+"/API/KLine2",this.MinuteKLineApiUrl=Xr.Domain+"/API/KLine3",this.RealtimeApiUrl=Xr.Domain+"/API/stock",this.HistoryMinuteApiUrl=xi.Domain+"/API/StockMinuteData",this.StockHistoryDayApiUrl=Xr.Domain+"/API/StockHistoryDay",this.StockHistoryDay3ApiUrl=Xr.Domain+"/API/StockHistoryDay3",this.StockHistoryDay2ApiUrl=Xr.Domain+"/API/StockHistoryDay2",this.StockNewsAnalysisApiUrl=Xr.CacheDomain+"/cache/newsanalyze",this.HKToSHSZApiUrl=[Xr.CacheDomain+"/cache/historyday/all/hk2shsz.json",Xr.CacheDomain+"/cache/analyze/hk2shsz/hk2shsz.json",Xr.Domain+"/API/HKToSHSZMinuteData",Xr.CacheDomain+"/cache/analyze/hk2szshanalyze"],this.MaxRequestDataCount=1e3,this.MaxRequestMinuteDayCount=5,this.KLineDateTimeRange,this.LatestData=new Map,this.IndexData,this.LatestIndexData,this.MarginData=new Map,this.HKToSHSZData=new Map,this.NewsAnalysisData=new Map,this.ExtendData=new Map,this.UserData=new Map,this.CustomAPIData=new Map,this.ScriptIndexOutData=new Map,this.OtherSymbolData=new Map,this.StockData=new Map,this.SectionFinanceData=new Map,this.ThrowSFPeirod=new Set,this.NetworkFilter,this.DrawInfo,e&&(e.HQDataType&&(this.DataType=e.HQDataType),e.Data&&(this.Data=e.Data,this.DataType!=un.MINUTE_ID&&this.DataType!=un.MULTIDAY_MINUTE_ID&&this.DataType!=un.HISTORY_MINUTE_ID&&(this.Period=e.Data.Period,this.Right=e.Data.Right)),e.SourceData&&(this.SourceData=e.SourceData),e.Symbol&&(this.Symbol=e.Symbol),e.Name&&(this.Name=e.Name),e.MaxRequestDataCount>0&&(this.MaxRequestDataCount=e.MaxRequestDataCount),e.MaxRequestMinuteDayCount>0&&(this.MaxRequestMinuteDayCount=e.MaxRequestMinuteDayCount),e.KLineApiUrl&&(this.KLineApiUrl=e.KLineApiUrl),e.Right&&(this.Right=e.Right),e.Period&&(this.Period=e.Period),!0===e.IsBeforeData&&(this.IsBeforeData=e.IsBeforeData),e.NetworkFilter&&(this.NetworkFilter=e.NetworkFilter),e.DayCount>0&&(this.DayCount=e.DayCount),e.Arguments&&(this.Arguments=e.Arguments),e.KLineRange&&(this.KLineDateTimeRange=e.KLineRange),e.IsApiPeriod&&(this.IsApiPeriod=e.IsApiPeriod),e.DrawInfo&&(this.DrawInfo=e.DrawInfo)),this.RecvError=function(t){throw l.Complier.Log("[JSSymbolData::RecvError] ajax error.",t.status),{FunctionName:"RecvError",Request:t}},this.GetLatestDataKey=function(t){t="DYNAINFO-".concat(t);return t},this.GetLatestData=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetLatestDataKey(a);if(this.LatestData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n={Name:"JSSymbolData::GetLatestData",Explain:"DYNAINFO()",Args:e,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,(function(t){r.RecvLatestData(t),r.Execute.RunNextJob()})),1==n.PreventDefault)return}$n.HttpRequest({url:r.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){r.RecvLatestData(t),r.Execute.RunNextJob()},error:function(t){r.RecvError(t)}})},this.RecvLatestData=function(t){if(2!=t.ver){if(t.stock&&1==t.stock.length){var e=t.stock[0];e&&(ze.IsNumber(e.yclose)&&this.LatestData.set(rn.YCLOSE,e.yclose),ze.IsNumber(e.open)&&this.LatestData.set(rn.OPEN,e.open),ze.IsNumber(e.high)&&this.LatestData.set(rn.HIGH,e.high),ze.IsNumber(e.low)&&this.LatestData.set(rn.LOW,e.low),ze.IsNumber(e.price)&&this.LatestData.set(rn.CLOSE,e.price),ze.IsNumber(e.vol)&&this.LatestData.set(rn.VOL,e.vol),ze.IsNumber(e.amount)&&this.LatestData.set(rn.AMOUNT,e.amount),ze.IsNumber(e.increase)&&this.LatestData.set(rn.INCREASE,e.increase),ze.IsNumber(e.exchangerate)&&this.LatestData.set(rn.EXCHANGERATE,e.exchangerate),ze.IsNumber(e.amplitude)&&this.LatestData.set(rn.AMPLITUDE,e.amplitude),l.Complier.Log("[JSSymbolData::RecvLatestData] symbol, LatestData",e.symbol,this.LatestData))}}else this.RecvLatestDataVer2(t)},this.RecvLatestDataVer2=function(t){if(ze.IsNonEmptyArray(t.data)){for(var e=t.symbol,a=0;a<t.data.length;++a){var i=t.data[a];i&&(ze.IsNumber(i.id)&&(ze.IsNumber(i.value)||ze.IsString(i.value))&&(l.Complier.Log("[JSSymbolData::RecvLatestDataVer2] symbol=".concat(e," DYNAINFO(").concat(i.id,")=").concat(i.value,".")),this.LatestData.set(i.id,i.value)))}l.Complier.Log("[JSSymbolData::RecvLatestDataVer2]",this.LatestData)}},this.GetLatestCacheData=function(t){return this.LatestData.has(t)?this.LatestData.get(t):null},this.GetLatestIndexData=function(){if(this.LatestIndexData)return this.Execute.RunNextJob();var t=this;if(this.NetworkFilter){var e={Name:"JSSymbolData::GetLatestIndexData",Explain:"最新大盘数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{symbol:["000001.sh"],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,(function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()})),1==e.PreventDefault)return}$n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"],symbol:["000001.sh"]},type:"post",dataType:"json",async:!0,success:function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})},this.RecvLatestIndexData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];this.LatestIndexData={Symbol:e.symbol,Name:e.name,Date:e.date,Time:e.time,YClose:e.yclose,Price:e.price,Open:e.open,High:e.high,Low:e.low,Vol:e.vol,Amount:e.amount,Increase:e.increase,Amplitude:e.amplitude},l.Complier.Log("[JSSymbolData::RecvLatestIndexData]",this.LatestIndexData)}},this.GetLatestIndexCacheData=function(t){if(!this.LatestIndexData)return null;switch(t){case"FROMOPEN":var e=parseInt(this.LatestIndexData.Time/100),a=60*parseInt(e/100)+e%100,i=0;return i=a<=565?0:a<570?1:a<=690?a-570+1:a<780?121:a<=900?122+a-780:242,i;default:return null}},this.GetVolRateData=function(t,e){var a=t.ID.toString()+"-VolRate-"+this.Symbol;if(this.ExtendData.has(a))return this.Execute.RunNextJob();var i=this,r=30;if(this.NetworkFilter){var n=this.Data.GetDateRange();r=1;this.DataType==un.MULTIDAY_MINUTE_ID&&(r=this.DayCount);var s={Name:"JSSymbolData::GetVolRateData",Explain:"分时量比数据(成交量)",Request:{Url:i.KLineApiUrl,Type:"POST",Data:{symbol:i.Symbol,dayCount:r,field:["name","symbol","vol"],period:0,right:0,dateRange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,(function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()})),1==s.PreventDefault)return}$n.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","vol"],symbol:i.Symbol,start:-1,count:r},type:"post",dataType:"json",async:!0,success:function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})},this.RecvVolRateData=function(t,e){var a=0,i=0,r=new Map;if(2==t.Ver){if(!ze.IsNonEmptyArray(t.data))return;for(var n=0;n<t.data.length;++n){var s=t.data[n];ze.IsNonEmptyArray(s)&&(s.length<2||ze.IsNumber(s[0])&&ze.IsPlusNumber(s[1])&&r.set(s[0],{AvgVol5:s[1]}))}}else{if(!ze.IsNonEmptyArray(t.data))return;var o=241;ze.IsNumber(t.minutecount)&&(o=t.minutecount);n=0;for(var h=0,u=0;n<t.data.length;++n){for(a=0,h=n,u=0;h>=0&&u<5;--h,++u){s=t.data[h];ze.IsNumber(s[6])&&(a+=s[6])}if(u>0){i=a/u/o;s=t.data[n];r.set(s[0],{AvgVol5:i})}}}r.size>0&&this.ExtendData.set(e,r),l.Complier.Log("[JSSymbolData::RecvVolRateData]",r)},this.GetVolRateCacheData=function(t){var e=sn.JOB_DOWNLOAD_VOLR_DATA.toString()+"-VolRate-"+this.Symbol;e&&this.ExtendData.has(e)||this.Execute.ThrowUnexpectedNode(t,"不支持VOLR");for(var a=[],i=this.ExtendData.get(e),r=0,n=0,s=null,o=0,h=0;o<this.Data.Data.length;++o){a[o]=null;var l=this.Data.Data[o];if(n!=l.Date){if(s=null,h=0,r=0,i.has(l.Date)){var u=i.get(l.Date);s=u.AvgVol5}n=l.Date}null!=s&&(r+=l.Vol,a[o]=r/(h+1)/s*100,++h)}return a},this.GetIndexData=function(){if(this.IndexData)return this.Execute.RunNextJob();var t=this;if(ut.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.KLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()})),1==a.PreventDefault)return}$n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(ut.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()})),1==a.PreventDefault)return}$n.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvIndexHistroyData=function(t){l.Complier.Log("[JSSymbolData::RecvIndexHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.IndexData=new ut,this.IndexData.DataType=0,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else{var a=this.SourceData.GetOverlayData(this.IndexData.Data);if(this.IndexData.Data=a,ut.IsDayPeriod(this.Period,!1)){var i=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=i}}},this.RecvIndexMinuteHistroyData=function(t){l.Complier.Log("[JSSymbolData::RecvIndexMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.IndexData=new ut,this.IndexData.DataType=1,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else if(ut.IsMinutePeriod(this.Period,!1)){var a=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=a}},this.GetOtherSymbolParam=function(t){var e=t.split("$"),a=new Set(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]);if(!a.has(e[1]))return null;var i=e[0];if(6==i.length)"6"==i[0]||"5"==i[0]||"8"==i[0]||"9"==i[0]?i+=".SH":"0"!=i[0]&&"1"!=i[0]&&"2"!=i[0]&&"3"!=i[0]||(i+=".SZ");else if(0==i.indexOf("SZ"))i=i.substr(2)+".SZ";else if(0==i.indexOf("SH"))i=i.substr(2)+".SH";else{if(!(i.indexOf("_")>0))return null;var r=i.split("_");i="".concat(r[1],".").concat(r[0])}return{Symbol:i.toLowerCase(),DataName:e[1]}},this.GetOtherSymbolData=function(t){var e=this.Symbol;if(t.Literal){var a=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!a){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"".concat(t.Literal," Error."))}e=a.Symbol}else{a=t.Args;if(a.length>0){var r=a[0];if(r.Type==Zr.Literal)e=r.Value;else if(r.Type==Zr.Identifier){var n=!1;for(var s in this.Arguments){var o=this.Arguments[s];if(o.Name==r.Name){e=o.Value,n=!0;break}}if(!n){i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"".concat(t.FunctionName,"() Error: can't read ").concat(r.Name))}}}}if(t.Symbol=e.toLowerCase(),t.Symbol==this.Symbol)return this.Execute.RunNextJob();if(this.OtherSymbolData.has(t.Symbol))return this.Execute.RunNextJob();var h=this;if(this.DataType==un.KLINE_ID&&ut.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var l=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:l}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,(function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()})),1==u.PreventDefault)return}$n.HttpRequest({url:h.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKDayData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}else if(ut.IsMinutePeriod(this.Period,!0)||this.DataType==un.MINUTE_ID||this.DataType==un.MULTIDAY_MINUTE_ID){if(this.NetworkFilter){l=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:l}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,(function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()})),1==u.PreventDefault)return}$n.HttpRequest({url:h.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKMinuteData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}},this.RecvOtherSymbolKData=function(t,e){l.Complier.Log("[JSSymbolData::RecvOtherSymbolKData] recv data",t);var a=new ut,i=null,r=this.Period;this.DataType==un.KLINE_ID&&ut.IsDayPeriod(this.Period,!0)?(i=this.JsonDataToHistoryData(t),a.DataType=0):(i=this.JsonDataToMinuteHistoryData(t),a.DataType=1,this.DataType!=un.MINUTE_ID&&this.DataType!=un.MULTIDAY_MINUTE_ID||(r=4)),a.Period=this.Period,a.Right=this.Right,a.Data=this.Data.FixKData(i,r),this.OtherSymbolData.set(e.Symbol,a)},this.RecvOtherSymbolKDayData=function(t,e){l.Complier.Log("[JSSymbolData::RecvOtherSymbolKDayData] recv data",t);var a=this.JsonDataToHistoryData(t),i=new ut;i.DataType=0,i.Data=a;var r=this.SourceData.GetOverlayData(i.Data);if(i.Data=r,ut.IsDayPeriod(this.Period,!1)){var n=i.GetPeriodData(this.Period);i.Data=n}this.OtherSymbolData.set(e.Symbol,i)},this.RecvOtherSymbolKMinuteData=function(t,e){l.Complier.Log("[JSSymbolData::RecvOtherSymbolKMinuteData] recv data",t);var a=this.JsonDataToMinuteHistoryData(t),i=new ut;if(i.DataType=1,i.Data=a,ut.IsMinutePeriod(this.Period,!1)){var r=i.GetPeriodData(this.Period);i.Data=r}this.OtherSymbolData.set(e.Symbol,i)},this.GetOtherSymolCacheData=function(t){var e,a;if(t.FunctionName){a=t.FunctionName;var i=t.Args;if(i.length<=0)return this.GetSymbolCacheData(a);e=i[0].toString().toLowerCase()}else if(t.Literal){i=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!i)return[];e=i.Symbol,a=i.DataName}if(e==this.Symbol)return this.GetSymbolCacheData(a);if(!this.OtherSymbolData.has(e))return[];var r=this.OtherSymbolData.get(e),n=e.toUpperCase();switch(a){case"CLOSE":case"C":return r.GetClose();case"VOL":case"V":return Mr.IsSHSZ(n)?r.GetVol(100):r.GetVol();case"OPEN":case"O":return r.GetOpen();case"HIGH":case"H":return r.GetHigh();case"LOW":case"L":return r.GetLow();case"AMOUNT":case"AMO":return r.GetAmount();case"VOLINSTK":return r.GetPosition()}},this.GetIndexCacheData=function(t){if(!this.IndexData)return new Array;switch(t){case"INDEXA":return this.IndexData.GetAmount();case"INDEXC":return this.IndexData.GetClose();case"INDEXH":return this.IndexData.GetHigh();case"INDEXL":return this.IndexData.GetLow();case"INDEXO":return this.IndexData.GetOpen();case"INDEXV":return this.IndexData.GetVol();case"INDEXADV":return this.IndexData.GetUp();case"INDEXDEC":return this.IndexData.GetDown()}},this.GetBlockSymbol=function(t){var e=new Map([["沪深A股","CNA.ci"],["创业板","GEM.ci"],["沪市A股","SHA.ci"],["中小板","SME.ci"],["深市A股","SZA.ci"]]);if(e.has(t))return e.get(t);if(!t)return null;var a=null,i=t.toUpperCase();if(i.indexOf(".SH")>0||i.indexOf(".SZ")>0){var r=new Set(["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]);if(!r.has(i))return null;a=t.replace(".SH",".sh"),a=t.replace(".SZ",".sz")}else t.indexOf(".CI")>0&&(a=t.replace(".CI",".ci"));return a},this.GetIndexIncreaseData=function(t){var e=null;if(t.IsSelfSymbol)e=this.Symbol;else{if(!t.Args||t.Args.length<=0){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"".concat(t.FunctionName," Error: 参数不能为空"))}e=t.Args[0].Value}var i=this.GetBlockSymbol(e);if(!i){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"".concat(t.FunctionName," Error: can't support ").concat(e))}var r=t.ID.toString()+"-UpCount-"+i,n=t.ID.toString()+"-DownCount-"+i;if(this.ExtendData.has(r)&&this.ExtendData.has(n))return this.Execute.RunNextJob();var s=this;if(this.NetworkFilter){var o={Type:this.DataType};this.DataType===un.KLINE_ID&&(o.Period=this.Period);var h=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetIndexIncreaseData",Explain:"涨停家数统计",DateRange:h,DataType:o,Request:{Url:"数据地址",Type:"POST",Data:{symbol:this.Symbol,blocksymbol:i,field:["up","down"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,(function(t){this.DataType===un.KLINE_ID?this.RecvHistoryIncreaseDataV2(t,{UpKey:r,DownKey:n}):this.RecvMinuteIncreaseDataV2(t,{UpKey:r,DownKey:n}),s.Execute.RunNextJob()})),1==u.PreventDefault)return}if(this.DataType===un.MINUTE_ID||this.DataType===un.MULTIDAY_MINUTE_ID){var c=Xr.CacheDomain+"/cache/analyze/increaseanalyze/"+i+".json";l.Complier.Log("[JSSymbolData::GetIndexIncreaseData] minute Get url=",c),$n.HttpRequest({url:c,type:"get",dataType:"json",async:!0,success:function(t){s.RecvMinuteIncreaseData(t,{UpKey:r,DownKey:n}),s.Execute.RunNextJob()},error:function(t){s.RecvError(t)}})}else this.DataType===un.KLINE_ID&&ut.IsDayPeriod(this.Period,!0)?(l.Complier.Log("[JSSymbolData::GetIndexIncreaseData] K day Get url=",s.KLineApiUrl),$n.HttpRequest({url:s.KLineApiUrl,data:{symbol:i,start:-1,count:s.MaxRequestDataCount,field:["up","down"]},type:"post",dataType:"json",async:!0,success:function(t){s.RecvHistoryIncreaseData(t,{UpKey:r,DownKey:n}),s.Execute.RunNextJob()},error:function(t){s.RecvError(t)}})):this.Execute.RunNextJob()},this.RecvHistoryIncreaseDataV2=function(t,e){l.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data, key",t,e);var a=[],i=[];for(var r in t.data){var n=t.data[r],s=new st,o=new st,h=n[0],u=null;s.Date=h,o.Date=h,ut.IsMinutePeriod(this.Period,!0)&&ze.IsNumber(n[1])&&(u=n[1],s.Time=u,o.Time=u),s.Value=n[2],a[r]=s,o.Value=n[3],i[r]=o}var c=this.Data.GetFittingData2(a,0),d=this.Data.GetFittingData2(i,0);this.ExtendData.set(e.UpKey,c),this.ExtendData.set(e.DownKey,d)},this.RecvHistoryIncreaseData=function(t,e){l.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data",t);var a,i,r=[],n=[];for(var s in t.data){var o=t.data[s],h=new st,u=new st;h.Date=o[0],h.Value=o[8],r[s]=h,u.Date=o[0],u.Value=o[9],n[s]=u}a=this.SourceData?this.SourceData.GetFittingData(r):this.Data.GetFittingData(aryData),i=this.SourceData?this.SourceData.GetFittingData(n):this.Data.GetFittingData(aryData),this.ExtendData.set(e.UpKey,a),this.ExtendData.set(e.DownKey,i)},this.RecvMinuteIncreaseDataV2=function(t,e){l.Complier.Log("[JSSymbolData::RecvMinuteIncreaseDataV2] recv data, key",t,e)},this.RecvMinuteIncreaseData=function(t,e){if(l.Complier.Log("[JSSymbolData::RecvMinuteIncreaseData] recv data",t),t.minute){var a=t.minute;if(a.time&&a.up&&a.down){var i=[],r=[];if(this.IsBeforeData)for(var n=0,s=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;var o=this.Data.Data[n];if(!o.Before){var h=o.DateTime;if(h){var u=h.split(" ");if(2==u.length){var c=parseInt(u[0]);c==t.date&&(i[n]=a.up[s],r[n]=a.down[s],++s)}}}}else for(n=0,s=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;o=this.Data.Data[n],h=o.DateTime;if(h){u=h.split(" ");if(2==u.length){c=parseInt(u[0]);c==t.date&&(i[n]=a.up[s],r[n]=a.down[s],++s)}}}this.ExtendData.set(e.UpKey,i),this.ExtendData.set(e.DownKey,r)}}},this.GetIndexIncreaseCacheData=function(t,e,a){var i,r=this.GetBlockSymbol(e);if(r||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")"),"UPCOUNT"==t||"ADVANCE"==t?i=sn.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-UpCount-"+r:"DOWNCOUNT"!=t&&"DECLINE"!=t||(i=sn.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-DownCount-"+r),i&&this.ExtendData.has(i)||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")"),this.DataType===un.MINUTE_ID||this.DataType===un.MULTIDAY_MINUTE_ID)return this.ExtendData.get(i);if(this.DataType===un.KLINE_ID&&ut.IsDayPeriod(this.Period,!0)){var n=this.ExtendData.get(i),s=new ut;if(s.Data=n,s.Period=this.Period,s.Period>0){var o=s.GetPeriodSingleData(s.Period);s.Data=o}return s.GetValue()}return null},this.GetSymbolData=function(){if(this.Data)return this.Execute.RunNextJob();var t=this;if(this.DataType!==un.MINUTE_ID)if(this.DataType!==un.MULTIDAY_MINUTE_ID){if(ut.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"日线数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,(function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()})),1==e.PreventDefault)return}$n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(ut.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){e={Name:"JSSymbolData::GetSymbolData",Explain:"分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,(function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()})),1==e.PreventDefault)return}$n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}}else $n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMultiDayMinuteData(e),t.Execute.RunNextJob()}});else $n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","minute","time","minutecount"],symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteData(e),t.Execute.RunNextJob()}})},this.RecvHistroyData=function(t){l.Complier.Log("[JSSymbolData::RecvHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.Data=new ut,this.Data.DataType=0,this.Data.Data=e,this.SourceData=new ut,this.SourceData.Data=e,this.IsApiPeriod);else{if(this.Right>0){var a=this.Data.GetRightData(this.Right);this.Data.Data=a}if(ut.IsDayPeriod(this.Period,!1)){var i=this.Data.GetPeriodData(this.Period);this.Data.Data=i}}this.Data.Right=this.Right,this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteHistroyData=function(t){l.Complier.Log("[JSSymbolData::RecvMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.Data=new ut,this.Data.DataType=1,this.Data.Data=e,this.SourceData=new ut,this.SourceData.Data=e,this.IsApiPeriod);else if(ut.IsMinutePeriod(this.Period,!1)){var a=this.Data.GetPeriodData(this.Period);this.Data.Data=a}this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteData=function(t){l.Complier.Log("[JSSymbolData::RecvMinuteData] recv data",t);var e=this.JsonDataToMinuteData(t);this.Data=new ut,this.Data.DataType=2,this.Data.Data=e,this.Name=t.stock[0].name},this.RecvMultiDayMinuteData=function(t){var e=this.JsonDataToMultiDayMinuteData(t);this.Data=new ut,this.Data.DataType=2,this.Data.Data=e,this.Name=t.name},this.GetSymbolCacheData=function(t){if(!this.Data)return new Array;var e=this.Symbol.toUpperCase();switch(t){case"CLOSE":case"C":return this.Data.GetClose();case"VOL":case"V":return Mr.IsSHSZ(e)?this.Data.GetVol(100):this.Data.GetVol();case"OPEN":case"O":return this.Data.GetOpen();case"HIGH":case"H":return this.Data.GetHigh();case"LOW":case"L":return this.Data.GetLow();case"AMOUNT":case"AMO":return this.Data.GetAmount();case"OPI":case"VOLINSTK":return this.Data.GetPosition();case"ZSTJJ":return this.Data.GetAvPrice();case"SETTLE":case"QHJSJ":return this.Data.GetSettlementPrice();case"ISEQUAL":return this.Data.GetIsEqual();case"ISUP":return this.Data.GetIsUp();case"ISDOWN":return this.Data.GetIsDown()}},this.GetSymbolPeriodData=function(t){var e=Jr.GetPeriodInfo({Name:t.PeriodName}).Period,a={PeriodID:e,PeriodName:t.PeriodName};if(e==this.Period&&this.Execute.RunNextJob(),this.IsApiPeriod){if(this.PeriodData.has(t.PeriodName))return this.Execute.RunNextJob()}else if(ut.IsDayPeriod(e,!0)){if(ut.IsDayPeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:0,PeriodName:"DAY"}}else{if(!ut.IsMinutePeriod(e,!0))return this.Execute.RunNextJob();if(ut.IsMinutePeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:4,PeriodName:"MIN1"}}var i=this;if(this.NetworkFilter){var r={Name:"JSSymbolData::GetSymbolPeriodData",Explain:"跨周期数据",Request:{Data:{field:["symbol","name",t.ValueName],period:t.PeriodName,symbol:i.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,(function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()})),1==r.PreventDefault)return}if(ut.IsMinutePeriod(e,!0))$n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}});else{if(!ut.IsDayPeriod(e,!0))return this.Execute.RunNextJob();$n.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})}},this.RecvSymbolPeriodData=function(t,e){if(l.Complier.Log("[JSSymbolData::RecvSymbolPeriodData] data, periodInfo ",t,e),ut.IsDayPeriod(e.PeriodID,!0)){var a=this.JsonDataToHistoryData(t),i=new ut;i.DataType=0,i.Data=a,i.Right=0,i.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,i)}else if(ut.IsMinutePeriod(e.PeriodID,!0)){a=this.JsonDataToMinuteHistoryData(t);var r=new ut;r.DataType=1,r.Data=a,r.Right=0,r.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,r)}},this.GetSymbolPeriodCacheData=function(t,e){var a=Jr.GetPeriodInfo({Name:e});if(this.Period==a.Period)return this.GetSymbolCacheData(t);var i=null;if(this.IsApiPeriod){var r=Jr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(!this.PeriodData.has(e))return null;i=this.PeriodData.get(e),i=i.Data}else{r=Jr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(ut.IsDayPeriod(a.Period,!0)&&ut.IsMinutePeriod(this.Period,!0)){var n=this.PeriodData.get("DAY");i=0==a.Period?n.Data:n.GetPeriodData(a.Period)}else{var s=new ut;if(s.Data=this.SourceData.Data,s.Period=this.Period,s.Right=this.Right,ut.IsDayPeriod(a.Period,!0)&&s.Right>0){var o=s.GetRightData(s.Right);s.Data=o}i=s.GetPeriodData(a.Period)}}var h=this.Data.ConverPeriod(i,this.Period,a.Period),l=new ut;l.Data=h;var u=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return l.GetClose();case"O":case"OPEN":return l.GetOpen();case"H":case"HIGH":return l.GetHigh();case"L":case"LOW":return l.GetLow();case"AMO":case"AMOUNT":return l.GetAmount();case"V":case"VOL":return Mr.IsSHSZ(u)?l.GetVol(100):l.GetVol();case"VOLINSTK":return l.GetPosition();default:return null}},this.GetSymbolPeriodCacheData2=function(t,e,a){var i=Jr.GetPeriodInfo({Name:e});if(!i)return null;var r=Jr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>i.Order)return null;if(r.Period==i.Period)u=this.Data;else{var n;if(this.IsApiPeriod){if(!this.PeriodData.has(e))return null;n=this.PeriodData.get(e)}else if(ut.IsMinutePeriod(r.Period,!0)&&ut.IsDayPeriod(i.Period,!0)){var s=this.PeriodData.get("DAY");n=0==i.Period?s:s.GetPeriodData(i.Period)}else{var o=new ut;if(o.Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,ut.IsDayPeriod(i.Period,!0)&&o.Right>0){var h=o.GetRightData(o.Right);o.Data=h}n=o.GetPeriodData(i.Period)}var l=this.Data.ConverPeriod(n,this.Period,i.Period),u=new ut;u.Data=l}if(ze.IsPlusNumber(a)){var c=new ut;l=u.GetRef(a);c.Data=l,u=c}var d=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return u.GetClose();case"O":case"OPEN":return u.GetOpen();case"H":case"HIGH":return u.GetHigh();case"L":case"LOW":return u.GetLow();case"AMO":case"AMOUNT":return u.GetAmount();case"V":case"VOL":return Mr.IsSHSZ(d)?u.GetVol(100):u.GetVol();case"VOLINSTK":return u.GetPosition();default:return null}},this.GetCurrBarsCount=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=e-1;a>=0;--a)t.push(a+1);return t},this.GetBarPos=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t.push(a+1);return t},this.GetTotalTradeMinuteCount=function(){var t=Nr.GetCoordinateData(this.Symbol);return t&&t.Count>0?t.Count-1:242},this.GetTotalBarsCount=function(){var t=this.Data.Data.length;return t},this.GetIsLastBar=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)a==e-1?t.push(1):t.push(0);return t},this.GetBarStatus=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t[a]=0==a?1:a==e-1?2:0;return t},this.GetMarginCacheData=function(t,e){var a=sn.GetMarginJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持MARGIN("+t+")"),this.MarginData.has(a)?this.MarginData.get(a):[]},this.GetMarginData=function(t){if(this.MarginData.has(t))return this.Execute.RunNextJob();l.Complier.Log("[JSSymbolData::GetMarginData] jobID=",t);var e=this,a=["name","date","symbol"];switch(t){case sn.JOB_DOWNLOAD_MARGIN_BALANCE:a.push("margin.balance");break;case sn.JOB_DOWNLOAD_MARGIN_RATE:a.push("margin.rate");break;case sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case sn.JOB_DOWNLOAD_MARGIN_BUY_NET:a.push("margin.buy");break;case sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case sn.JOB_DOWNLOAD_MARGIN_SELL_NET:a.push("margin.sell");break}$n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvMarginData(a,t),e.Execute.RunNextJob()}})},this.RecvMarginData=function(t,e){if(l.Complier.Log(t),t.stock&&1==t.stock.length){var a=t.stock[0],i=new Array,r=[],n=[],s=[];for(var o in a.stockday){var h=a.stockday[o],u=h.margin;if(u){var c=new st;switch(c.Date=h.date,e){case sn.JOB_DOWNLOAD_MARGIN_BALANCE:if(!this.IsNumber(u.balance))continue;c.Value=u.balance,i.push(c);break;case sn.JOB_DOWNLOAD_MARGIN_RATE:if(!this.IsNumber(u.rate))continue;c.Value=u.rate,i.push(c);break;case sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case sn.JOB_DOWNLOAD_MARGIN_BUY_NET:var d=u.buy;if(!d)continue;if(!this.IsNumber(d.balance)||!this.IsNumber(d.amount)||!this.IsNumber(d.repay)||!this.IsNumber(d.net))continue;c.Value=d.balance;var f=new st;f.Date=h.date,f.Value=d.amount;var C=new st;C.Date=h.date,C.Value=d.repay;var m=new st;m.Date=h.date,m.Value=d.net,i.push(c),r.push(f),n.push(C),s.push(m);break;case sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case sn.JOB_DOWNLOAD_MARGIN_SELL_NET:var D=u.sell;if(!D)continue;if(!this.IsNumber(D.balance)||!this.IsNumber(D.volume)||!this.IsNumber(D.repay)||!this.IsNumber(D.net))continue;c.Value=d.balance;f=new st;f.Date=h.date,f.Value=d.volume;C=new st;C.Date=h.date,C.Value=d.repay;m=new st;m.Date=h.date,m.Value=d.net,i.push(c),r.push(f),n.push(C),s.push(m);break;default:continue}}}var p=[];for(var v in e===sn.JOB_DOWNLOAD_MARGIN_BALANCE||e===sn.JOB_DOWNLOAD_MARGIN_RATE?p.push({JobID:e,Data:i}):e===sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE||e===sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT||e===sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY||e===sn.JOB_DOWNLOAD_MARGIN_BUY_NET?(p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE,Data:i}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT,Data:r}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY,Data:n}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_BUY_NET,Data:s})):e!==sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE&&e!==sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME&&e!==sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY&&e!==sn.JOB_DOWNLOAD_MARGIN_SELL_NET||(p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE,Data:i}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME,Data:r}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY,Data:n}),p.push({JobID:sn.JOB_DOWNLOAD_MARGIN_SELL_NET,Data:s})),p){var g=this.SourceData.GetFittingData(p[v].Data),S=new ut;if(S.Data=g,S.Period=this.Period,S.Period>0){var I=S.GetPeriodSingleData(S.Period);S.Data=I}var T=S.GetValue();this.MarginData.set(p[v].JobID,T)}}},this.GetNewsAnalysisCacheData=function(t,e){var a=sn.GetNewsAnalysisID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持NEWS("+t+")"),this.NewsAnalysisData.has(a)?this.NewsAnalysisData.get(a):[]},this.GetHKToSHSZData=function(t){var e=t.Args,a=this.Symbol;if(e.length>0){var i=e[0];if(i.Type==Zr.Literal)a=i.Value;else if(i.Type==Zr.Identifier){var r=!1;for(var n in this.Arguments){var s=this.Arguments[n];if(s.Name==i.Name){a=s.Value,r=!0;break}}if(!r){var o=t.Token;this.Execute.ErrorHandler.ThrowError(o.Index,o.Line,0,"HK2SHSZ() Error: can't read ".concat(i.Name))}}}t.Symbol=a,1==a||2==a||3==a?this.GetHKToSHSZMarketData(a,t):this.GetHKToSHSZStockData(a,t)},this.GetHKToSHSZStockData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a=t.toLowerCase(),i=this,r="".concat(this.HKToSHSZApiUrl[3],"/").concat(a,".json");$n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){i.RecvHKToSHSZStockData(t,e),i.Execute.RunNextJob()},error:function(t){console.warn("[JSSymbolData::GetHKToSHSZStockData] request url=".concat(r," failed. error=").concat(t.status)),i.RecvHKToSHSZStockData(null,e),i.Execute.RunNextJob()}})},this.RecvHKToSHSZStockData=function(t,e){if(t){for(var a=t.symbol,i=a.toUpperCase(),r=[],n=0;n<t.date.length;++n){var s=new st;s.Date=t.date[n],s.Value=t.vol[n],r.push(s)}var o=this.Data.GetFittingData(r),h=new ut;if(h.Data=o,h.Period=this.Period,h.Period>0){var l=h.GetPeriodSingleData(h.Period);h.Data=l}t=h.GetValue();this.HKToSHSZData.set(i,t)}},this.GetHKToSHSZMarketData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a,i=0;this.DataType===un.MINUTE_ID?i=1:this.DataType==un.MULTIDAY_MINUTE_ID?i=2:this.Period<=3&&(i=0),a=this.HKToSHSZApiUrl[i];var r=this;l.Complier.Log("[JSSymbolData::GetHKToSHSZMarketData] code=".concat(t," url=").concat(a,", dataType=").concat(i)),2===i?$n.HttpRequest({url:a,data:{symbol:this.Symbol,daycount:this.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){r.RecvMulitMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}}):$n.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(t){0==i?r.RecvHKToSHSZData(t,e):1==i&&r.RecvMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}})},this.RecvMinuteHKToSHSZData=function(t,e){var a=[],i=[],r=[];if(this.IsBeforeData){for(s in this.SourceData.Data){var n=this.SourceData.Data[s];if(!n.Before)break;a.push(null),i.push(null),r.push(null)}for(var s=0;s<t.time.length;++s){var o=t.time[s];if(925!==o){var h=t.hk2sh[s],l=t.hk2sz[s],u=h+l;a.push(u),i.push(h),r.push(l)}}}else for(s=0;s<t.time.length;++s){o=t.time[s],h=t.hk2sh[s],l=t.hk2sz[s],u=h+l;a.push(u),i.push(h),r.push(l)}var c=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var s in c){n=c[s];this.HKToSHSZData.set(n.ID,n.Data)}},this.RecvHKToSHSZData=function(t,e){for(var a=[],i=[],r=[],n=0;n<t.date.length;++n){var s=t.date[n],o=1e6*t.hk2sh[n],h=1e6*t.hk2sz[n],l=o+h,u=new st;u.Date=s,u.Value=l;var c=new st;c.Date=s,c.Value=o;var d=new st;d.Date=s,d.Value=h,a.push(u),i.push(c),r.push(d)}var f=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var C in f){var m=this.Data.GetFittingData(f[C].Data),D=new ut;if(D.Data=m,D.Period=this.Period,D.Period>0){var p=D.GetPeriodSingleData(D.Period);D.Data=p}var v=D.GetValue();this.HKToSHSZData.set(f[C].ID,v)}},this.RecvMulitMinuteHKToSHSZData=function(t,e){if(t.data&&!(t.data.length<=0)){for(var a=[],i=[],r=[],n=0,s=0;n<this.Data.Data.length&&s<t.data.length;){a[n]=null,i[n]=null,r[n]=null;var o=this.Data.Data[n],h=o.DateTime;if(h){var l=h.split(" ");if(2==l.length){var u=parseInt(l[0]),c=t.data[s];if(!c.minute||c.minute.length<=0)++s;else if(c.date>u)++n;else if(c.date<u)++s;else{for(var d in c.minute){var f=c.minute[d],C=f[1],m=f[2],D=C+m;a[n]=D,i[n]=C,r[n]=m,++n}++s}}else++n}else++n}var p=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var n in p){o=p[n];this.HKToSHSZData.set(o.ID,o.Data)}}},this.GetHKToSHSZCacheData=function(t,e){return t||(t=this.Symbol),"string"==typeof t&&(t=t.toUpperCase()),this.HKToSHSZData.has(t)?this.HKToSHSZData.get(t):[]},this.GetNewsAnalysisData=function(t){if(this.NewsAnalysisData.has(t))return this.Execute.RunNextJob();var e=this,a=new Map([[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE,"negative"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH,"research"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT,"interact"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,"holderchange"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,"holderchange"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER,"trustholder"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING,"Blocktrading"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS,"companynews"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS,"topmanagers"],[sn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE,"Pledge"]]);if(a.has(t)){var i=a.get(t),r=this.StockNewsAnalysisApiUrl+"/"+i+"/"+this.Symbol+".json";$n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(a){e.RecvNewsAnalysisData(a,t),e.Execute.RunNextJob()},error:function(a,i){e.RecvNewsAnalysisDataError(a,i,t),e.Execute.RunNextJob()}})}else this.Execute.RunNextJob()},this.RecvNewsAnalysisDataError=function(t,e,a){l.Complier.Log("[JSSymbolData::RecvNewsAnalysisDataError] ajax error.",t.status);for(var i=[],r=0;r<this.Data.Data.length;++r){var n=new st;n.Date=this.Data.Data[r].Date,n.Value=0,i.push(n)}var s=new ut;s.Data=i,this.NewsAnalysisData.set(a,s.GetValue())},this.RecvNewsAnalysisData=function(t,e){if(t.data&&t.date&&!(t.data.length<=0||t.data.length!=t.date.length))if(l.Complier.Log("[JSSymbolData::RecvNewsAnalysisData] jobID",e,t.update),e==sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE||e==sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2){for(var a=[],i=[],r=0;r<t.data.length;++r){var n=new st;n.Date=t.date[r],n.Value=t.data[r],this.IsNumber(n.Value)&&a.push(n),r<t.data2.length&&(n=new st,n.Date=t.date[r],n.Value=t.data2[r],this.IsNumber(n.Value)&&i.push(n))}var s=this.Data.GetFittingData2(a,0),o=new ut;o.Data=s,this.NewsAnalysisData.set(sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,o.GetValue()),s=this.Data.GetFittingData2(i,0),o=new ut,o.Data=s,this.NewsAnalysisData.set(sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,o.GetValue())}else{for(a=[],r=0;r<t.data.length;++r){n=new st;n.Date=t.date[r],n.Value=t.data[r],a.push(n)}var h=this.Data.GetFittingData2(a,0);o=new ut;o.Data=h,this.NewsAnalysisData.set(e,o.GetValue())}},this.GetSectionFinanceData=function(t){var e=t.SF[0],a=t.SF[1].Period;if(this.SectionFinanceData.has(e))return this.Execute.RunNextJob();l.Complier.Log("[JSSymbolData::GetSectionFinanceData] ".concat(a.Year,"-").concat(a.Quarter));var i="announcement"+a.Quarter,r=this,n=["name","date","symbol",i,"finance"+a.Quarter],s=[i+".year","int32","eq",a.Year.toString()];$n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:n,symbol:[this.Symbol],condition:[{item:s}]},type:"post",dataType:"json",async:!0,success:function(e){r.RecvSectionFinanceData(e,t),r.Execute.RunNextJob()}})},this.RecvSectionFinanceData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0];if(a.stockday&&!(a.stockday.length<=0)){var i=a.stockday[0],r=e.SF[1].Period,n=null;if(1===r.Quarter?n=i.finance1:2===r.Quarter?n=i.finance2:3===r.Quarter?n=i.finance3:4===r.Quarter&&(n=i.finance4),n){t=new Map([[sn.JOB_DOWNLOAD_SECTION_F_01,n.currentassets],[sn.JOB_DOWNLOAD_SECTION_F_02,n.monetaryfunds],[sn.JOB_DOWNLOAD_SECTION_F_03,n.inventory],[sn.JOB_DOWNLOAD_SECTION_F_04,n.currentliabilities],[sn.JOB_DOWNLOAD_SECTION_F_05,n.ncurrentliabilities],[sn.JOB_DOWNLOAD_SECTION_F_06,n.expenses3],[sn.JOB_DOWNLOAD_SECTION_F_07,n.investmentincome],[sn.JOB_DOWNLOAD_SECTION_F_08,n.pcnprofit],[sn.JOB_DOWNLOAD_SECTION_F_09,n.nnetprofit],[sn.JOB_DOWNLOAD_SECTION_F_10,n.npersearning],[sn.JOB_DOWNLOAD_SECTION_F_11,n.woewa],[sn.JOB_DOWNLOAD_SECTION_F_12,n.inprocess],[sn.JOB_DOWNLOAD_SECTION_F_13,n.accdepreciation],[sn.JOB_DOWNLOAD_SECTION_F_14,n.mholderprofit],[sn.JOB_DOWNLOAD_SECTION_F_15,n.lossexchange],[sn.JOB_DOWNLOAD_SECTION_F_16,n.baddebts],[sn.JOB_DOWNLOAD_SECTION_F_17,n.fixedassets],[sn.JOB_DOWNLOAD_SECTION_F_18,n.curdepreciation],[sn.JOB_DOWNLOAD_SECTION_F_19,n.orevenues],[sn.JOB_DOWNLOAD_SECTION_F_20,n.moprofit],[sn.JOB_DOWNLOAD_SECTION_F_21,n.oprofit],[sn.JOB_DOWNLOAD_SECTION_F_22,n.nprofit],[sn.JOB_DOWNLOAD_SECTION_F_23,n.areceivable],[sn.JOB_DOWNLOAD_SECTION_F_24,n.financialcost],[sn.JOB_DOWNLOAD_SECTION_F_25,n.ccfo],[sn.JOB_DOWNLOAD_SECTION_F_26,n.totalassets],[sn.JOB_DOWNLOAD_SECTION_F_27,n.totalliabilities],[sn.JOB_DOWNLOAD_SECTION_F_28,n.totalownersequity],[sn.JOB_DOWNLOAD_SECTION_F_29,n.grossmargin],[sn.JOB_DOWNLOAD_SECTION_F_30,n.percreserve],[sn.JOB_DOWNLOAD_SECTION_F_31,n.peruprofit],[sn.JOB_DOWNLOAD_SECTION_F_32,n.persearning],[sn.JOB_DOWNLOAD_SECTION_F_33,n.pernetasset],[sn.JOB_DOWNLOAD_SECTION_F_34,n.perccfo],[sn.JOB_DOWNLOAD_SECTION_F_38,n.alratio],[sn.JOB_DOWNLOAD_SECTION_F_39,n.profityoy]]);4===r.Quarter&&(t.set(sn.JOB_DOWNLOAD_SECTION_F_35,n.nnprofitincrease),t.set(sn.JOB_DOWNLOAD_SECTION_F_36,n.nnprofitspeed),t.set(sn.JOB_DOWNLOAD_SECTION_F_37,n.nprofitincrease));var s=e.SF[0];this.SectionFinanceData.set(s,t)}}}},this.GetSectionFinanceCacheData=function(t,e,a,i){var r=sn.GetSectionReportPeriod(t,e);r||this.Execute.ThrowUnexpectedNode(i,"不支持FS(".concat(t,", ").concat(e,", '").concat(a,"') 报告期错误"));var n=sn.GetSectionFinanceID(a);n||this.Execute.ThrowUnexpectedNode(i,"不支持FS(".concat(t,", ").concat(e,",'").concat(a,"') 财务数据字段名称错误"));var s=r.Year+"-"+r.Quarter;if(!this.SectionFinanceData.has(s)&&!this.ThrowSFPeirod.has(s)){this.ThrowSFPeirod.add(s);var o={ID:sn.JOB_DOWNLOAD_SECTION_SF,SF:[s,{Period:r,Fields:new Set([n])}]};this.Execute.ThrowDownloadSF(i,o,"FS(".concat(t,", ").concat(e,", '").concat(a,"') 动态下载"))}if(!this.SectionFinanceData.has(s))return this.Execute.ThrowUnexpectedNode(i,"不支持FS(".concat(t,", ").concat(e,", '").concat(a,"') 没有这期财务数据"));var h=this.SectionFinanceData.get(s);return h.has(n)||this.Execute.ThrowUnexpectedNode(i,"不支持FS(".concat(t,", ").concat(e,", '").concat(a,"') 没有这期财务数据字段")),h.get(n)},this.GetFinOne=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetFinOne",Explain:"财务数据FINONE(ID,Y,MMDD)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:r}},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,(function(e){i.RecvStockValue(e,t,a,1),i.Execute.RunNextJob()})),1==n.PreventDefault)return}var s=new gn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,1),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}});s.Download()},this.GetStockDataKey=function(t,e){var a=t.FunctionName;if(e.length>0){a+="(";for(var i=0;i<e.length;++i)i>0&&(a+=","),a+=e[i].toString();a+=")"}return a},this.GetFinValue=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetFinValue",Explain:"财务数据FINVALUE(ID)",JobID:t.ID,Request:{Url:r.StockHistoryDayApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,(function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()})),1==s.PreventDefault)return}var o=new vn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}});o.Download()},this.GetFinance=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetFinance",Explain:"财务数据FINANCE(ID)",JobID:t.ID,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,(function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()})),1==s.PreventDefault)return}var o=new Sn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}});o.Download()},this.GetGPJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetGPJYValue",Explain:"股票交易类数据GPJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,(function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()})),1==s.PreventDefault)return}var o=new In({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}});o.Download()},this.GetSCJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetSCJYValue",Explain:"股票交易类数据SCJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,(function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()})),1==s.PreventDefault)return}var o=new Tn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}});o.Download()},this.GetVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=this;if(this.NetworkFilter){var i=this.Data.GetDateRange(),r={Name:"JSSymbolData::GetVariantData",Explain:"变量数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:i}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,(function(i){if(i.Error)a.AddStockValueError(e,i.Error);else{var r=0;ze.IsNumber(i.DataType)&&(r=i.DataType),a.RecvStockValue(i.Data,t,e,r)}a.Execute.RunNextJob()})),1==r.PreventDefault)return}var n,s=function(t){a.AddStockValueError(e,t)};if("CAPITAL"==t.VariantName||"TOTALCAPITAL"==t.VariantName||"EXCHANGE"==t.VariantName){var o=function(t,e,i){a.RecvStockValue(t,e,i,0),a.Execute.RunNextJob()};n=new Sn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:o,ErrorCallback:s})}else{if("HYBLOCK"!=t.VariantName&&"DYBLOCK"!=t.VariantName&&"GNBLOCK"!=t.VariantName){if("INBLOCK"==t.VariantName){var h="".concat(t.VariantName,", 请对接外部数据.");return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}h="不支持变量".concat(t.VariantName,", 请对接外部数据.");return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}o=function(t,e,i,r){a.RecvStockValue(t,e,i,r),a.Execute.RunNextJob()};n=new xn({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:o,ErrorCallback:s})}n.Download()},this.GetCustomVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=Xr.CustomVariant.Data.get(e),i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomVariantData",Explain:"自定义变量数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:r,period:this.Period}},Self:this,VariantInfo:a,PreventDefault:!1};this.NetworkFilter(n,(function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()}))}else this.AddStockValueError(e,"自定义变量".concat(e,"下载失败")),this.Execute.RunNextJob()},this.GetCustomFunctionData=function(t){var e=t.FunctionName,a=Xr.CustomFunction.Data.get(e);if(!a.IsDownload)return this.Execute.RunNextJob();if(this.StockData.has(e))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomFunctionData",Explain:"自定义函数数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{FunctionName:t.FunctionName,symbol:this.Symbol,daterange:r,JobItem:t}},Self:this,FunctionInfo:a,PreventDefault:!1};this.NetworkFilter(n,(function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()}))}else this.AddStockValueError(e,"自定义函数".concat(e,"下载失败")),this.Execute.RunNextJob()},this.RecvStockValue=function(t,e,a,i){if(t){if(0==i)if(Array.isArray(t)){var r=this.Data;if(this.DataType==un.KLINE_ID)if(ut.IsDayPeriod(this.Period,!0))u=r.GetFittingFinanceData(t);else{if(!ut.IsMinutePeriod(this.Period,!0))return;u=r.GetMinuteFittingFinanceData(t)}else u=r.GetMinuteFittingFinanceData(t);var n=new ut;n.Data=u;var s=n.GetValue();if("EXCHANGE"==a)for(var o in s){var h=r.Data[o];ze.IsPlusNumber(s[o])&&(s[o]=h.Vol/s[o]*100)}this.StockData.set(a,{Data:s})}else this.StockData.set(a,{Data:t.Value});else if(1==i)this.StockData.set(a,{Data:t.Value});else if(2==i){var u;r=this.Data;if(this.DataType==un.KLINE_ID)if(ut.IsDayPeriod(this.Period,!0))u=r.GetFittingTradeData(t,0);else if(ut.IsMinutePeriod(this.Period,!0))u=r.GetMinuteFittingTradeData(t,0);else{if(!ut.IsTickPeriod(this.Period))return;u=r.GetMinuteFittingTradeData(t,0)}else u=r.GetMinuteFittingTradeData(t,0);n=new ut;n.Data=u;s=n.GetValue();this.StockData.set(a,{Data:s})}}else l.Complier.Log("[JSSymbolData::RecvStockValue] key=".concat(a," data is null"))},this.AddStockValueError=function(t,e){this.StockData.set(t,{Error:e})},this.GetStockCacheData=function(t){var e;if(t.FunctionName)e=this.GetStockDataKey({FunctionName:t.FunctionName},t.Args);else if(t.VariantName)e=t.VariantName;else{if(!t.CustomName)return null;e=t.CustomName}if(!this.StockData.has(e))return null;var a=this.StockData.get(e);return a.Error&&this.Execute.ThrowUnexpectedNode(t.Node,a.Error),a.Data},this.IsInBlock=function(t,e){var a=this.GetStockCacheData({VariantName:"INBLOCK",Node:e});if(!a)return 0;for(var i=a.split("|"),r=0;r<i.length;++r){var n=i[r];if(n==t)return 1}return 0},this.JobArgumentsToArray=function(t,e){var a=t.Args;if(a.length!=e){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"".concat(t.FunctionName,"() Error: argument count error."))}for(var r=[],n=0;n<a.length;++n){var s=a[n];if(ze.IsNumber(s))r.push(s);else if(s.Type==Zr.Literal)r.push(s.Value);else if(s.Type==Zr.Identifier){var o=!1;for(var h in this.Arguments){var l=this.Arguments[h];if(l.Name==s.Name){r.push(l.Value),o=!0;break}}if(!o){i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"".concat(t.FunctionName,"() Error: can't read ").concat(s.Name))}}}return r},this.DownloadCustomAPIData=function(t){if(!this.NetworkFilter)return this.Execute.RunNextJob();var e=[];for(var a in t.Args){var i=t.Args[a];if(i.Type==Zr.Literal)e.push(i.Value);else{if(i.Type!=Zr.Identifier)return this.Execute.RunNextJob();var r=!1;for(var n in this.Arguments){var s=this.Arguments[n];if(s.Name==i.Name){e.push(s.Value),r=!0;break}}if(!r){var o=t.Token;this.Execute.ErrorHandler.ThrowError(o.Index,o.Line,0,"LoadAPIData() Error: can't read ".concat(i.Name))}}}var h=this,l={Name:"JSSymbolData::DownloadCustomAPIData",Explain:"下载自定义api数据",Period:this.Period,Right:this.Right,Symbol:this.Symbol,KData:this.Data,Cache:this.CustomAPIData,Args:e,Self:this,PreventDefault:!1};this.NetworkFilter(l,(function(t){h.RecvCustomAPIData(t,e),h.Execute.RunNextJob()})),1!=l.PreventDefault&&this.Execute.RunNextJob()},this.RecvCustomAPIData=function(t,e){t&&(1==t.Type?this.RecvCustomAPISingleData(t,e):this.RecvCustomAPIGroupData(t,e))},this.RecvCustomAPIGroupData=function(t,e){if(t&&t.data){var a=t.data,i=this.GenerateCustomAPIKey(e);if(ut.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)var s=a[n]}else if(ut.IsDayPeriod(this.Period,!0)){if(!a.date)return;r=a.date;var o={__Type__:"Object"};for(var n in a)if("date"!=n){s=a[n];if(Array.isArray(s)){var h=this.FittingCustomAPIArray(s,r);o[n]=h}else this.IsNumber(s)&&(o[n]=s)}this.CustomAPIData.set(i,o)}}},this.RecvCustomAPISingleData=function(t,e){var a=t.data,i=this.GenerateCustomAPIKey(e);if(ut.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)a[n]}else if(ut.IsDayPeriod(this.Period,!0)){if(!a.date)return;r=a.date;var s=a.value,o=null;o=Array.isArray(s)?1==t.DataType?this.FittingCustomAPIFinanceArray(s,r):this.FittingCustomAPIArray(s,r):s,this.CustomAPIData.set(i,o)}},this.FittingCustomAPIFinanceArray=function(t,e,a){var i,r=this.Data,n=[];for(var s in t){var o=t[s],h=new st;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=o,n.push(h)}if(ut.IsDayPeriod(this.Period,!0))i=r.GetFittingFinanceData(n);else{if(!ut.IsMinutePeriod(this.Period,!0))return null;i=r.GetMinuteFittingFinanceData(n)}var l=new ut;l.Data=i;var u=l.GetValue();return u},this.FittingCustomAPIArray=function(t,e,a){var i,r=this.Data,n=[];for(var s in t){var o=t[s],h=new st;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=o,n.push(h)}if(ut.IsDayPeriod(this.Period,!0))i=r.GetFittingData(n);else{if(!ut.IsMinutePeriod(this.Period,!0))return null;i=r.GetMinuteFittingData(n)}var l=new ut;l.Data=i;var u=l.GetValue();return u},this.GenerateCustomAPIKey=function(t){if(t.length<=0)return"__12_EMPTY_ARGS__";var e="";for(var a in t)e.length>0&&(e+=","),e+=t[a];return e},this.GetCustomApiData=function(t){var e=this.GenerateCustomAPIKey(t);return this.CustomAPIData.has(e)?this.CustomAPIData.get(e):(l.Complier.Log("[JSSymbolData::GetCustomApiData] can't find api data key=[".concat(e,"]")),null)},this.ReadArgumentValue=function(t,e){if(e.Name=t.Name,t.Type==Zr.Literal)return e.Value=t.Value,!0;if(t.Type==Zr.Identifier){var a=!1;for(var i in this.Arguments){var r=this.Arguments[i];if(r.Name==t.Name)return e.Value=r.Value,a=!0,!0}if(!a)return e.Error="can't read ".concat(t.Name),!1}return e.Error="can't read ".concat(t.Name,", type error."),!1},this.ReadIndexFunctionOut=function(t,e){var a={};if("object"===(0,s.default)(t)){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;return e.OutIndex=a.Value,e.Out=null,!0},this.ReadIndexFunctionValue=function(t,e){var a={};if("object"===(0,s.default)(t)){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;var i=a.Value.indexOf(".");if(-1!=i){e.Name=a.Value.slice(0,i);var r=a.Value.indexOf("#",i+1);-1!=r?(e.Out=a.Value.slice(i+1,r),e.Period=a.Value.slice(r+1)):e.Out=a.Value.slice(i+1)}else{r=a.Value.indexOf("#");-1!=r?(e.Name=a.Value.slice(0,r),e.Period=a.Value.slice(r+1)):e.Name=a.Value}var n=new Map([["DAY",0],["WEEK",1],["MONTH",2],["SEASON",9],["YEAR",3],["HALFYEAR",22],["WEEK2",21],["MIN1",4],["MIN5",5],["MIN15",6],["MIN30",7],["MIN60",8],["MIN120",11],["MIN240",12],["DAY2",40002],["MULTIDAY",40002],["DAY3",40003],["DAY4",40004],["DAY5",40005],["DAY6",40006],["DAY7",40007],["DAY8",40008],["DAY9",40009],["DAY10",40010],["DAY11",40011],["DAY12",40012],["DAY13",40013],["DAY14",40014],["DAY15",40015]]);if(e.Period){if(!n.has(e.Period))return e.Error="".concat(e.Period,", 周期错误"),!1;e.PeriodID=n.get(e.Period)}return!0},this.ReadSymbolArgumentValue=function(t,e){var a={};if("object"===(0,s.default)(t)){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;""==a.Value&&(a.Value=this.Symbol);var i=a.Value;return i.indexOf(".SH")>0?e.Symbol=i.replace(".SH",".sh"):i.indexOf(".SZ")>0?e.Symbol=i.replace(".SZ",".sz"):0==i.indexOf("SH")?e.Symbol=i.slice(2)+".sh":0==i.indexOf("SZ")?e.Symbol=i.slice(2)+".sz":e.Symbol=i,!0},this.ReadIndexArgumentValue=function(t,e){for(var a in e.Args=[],e.SytemIndex.Args){var i=e.SytemIndex.Args[a];e.Args.push({Value:i.Value,Name:i.Name})}if(t.length>2&&e.SytemIndex.Args&&e.SytemIndex.Args.length>0){a=2;for(var r=0;a<t.length&&r<e.SytemIndex.Args.length;++a,++r){var n={};i=t[a];if("object"===(0,s.default)(i)){if(!this.ReadArgumentValue(i,n))return e.Error=n.Error,!1}else n.Value=i;e.Args[r].Value=n.Value}}return!0},this.GenerateScriptIndexKey=function(t){var e="",a=t.Args;for(var i in a){e.length>0&&(e+=",");var r=a[i];e+=r.Value.toString()}var n="ALL";t.Out?n=t.Out:ze.IsPlusNumber(t.OutIndex)&&(n="Out[".concat(t.OutIndex-1,"]"));var s="(".concat(t.Symbol,",").concat(t.PeriodID,"), ").concat(t.Name,"(").concat(e,")=>").concat(n);return s},this.CallMemberScriptIndex=function(t){var e=this;if(t.Member.Object.Type!=Zr.Identifier||t.Member.Property.Type!=Zr.Identifier){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: 参数错误")}var i=t.Member.Object.Name,r=t.Member.Property.Name;if(""==r||null==r){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: ".concat(i,".").concat(r," 指标输出变量错误"))}if(this.Execute.VarTable.has(i)){var n=this.Execute.VarTable.get(i);if(n.hasOwnProperty(r))return l.Complier.Log("[JSSymbolData::CallMemberScriptIndex] index data ".concat(i,".").concat(r," in cache.")),this.Execute.RunNextJob()}var s=i+"."+r,o={Job:t,PeriodID:this.Period,Symbol:this.Symbol};if(!this.ReadIndexFunctionValue(s,o)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '".concat(s,"' ").concat(o.Error))}var h=new d,u=h.Get(o.Name);if(!u){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '".concat(s,"' ").concat(o.Name," 指标不存在"))}if(Array.isArray(u.Args)&&u.Args.length>0)for(var c in o.Args=[],u.Args){var f=u.Args[c];o.Args.push({Value:f.Value,Name:f.Name})}l.Complier.Log("[JSSymbolData::CallMemberScriptIndex] call script index",o);var C=this.Data.GetDateRange(),m={HQDataType:this.DataType,Symbol:o.Symbol,Name:"",Right:this.Right,Period:o.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvMemberScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:o,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:o.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:C};ln.Execute(u.Script,m,(function(t,a){e.ExecuteScriptIndexError(t,a)}))},this.CallScriptIndex=function(t){var e=this;if(t.Member)return this.CallMemberScriptIndex(t);if(!t.Args||!(t.Args.length>=2)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: ".concat(t.FunctionName," 参数错误"))}var i={Job:t,PeriodID:this.Period};if(!this.ReadSymbolArgumentValue(t.Args[0],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: ".concat(i.Error))}if(!this.ReadIndexFunctionValue(t.Args[1],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: ".concat(i.Error))}if("CALCSTOCKINDEX"==t.FunctionName&&!this.ReadIndexFunctionOut(t.Args[2],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: ".concat(i.Error))}var r=new d,n=r.Get(i.Name);if(!n){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() ".concat(i.Name," 指标不存在"))}if(i.SytemIndex=n,!this.ReadIndexArgumentValue(t.Args,i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() ".concat(i.Name," 指标参数错误 : ").concat(i.Error," "))}l.Complier.Log("[JSSymbolData::CallScriptIndex] call script index",i);var s=null;if(this.Data&&this.Data.Data.length>0){var o=this.Data.Data[0],h=this.Data.Data[this.Data.Data.length-1];s={Start:{Date:o.Date,Time:o.Time},End:{Date:h.Date,Time:h.Time}}}var u={HQDataType:this.DataType,Symbol:i.Symbol,Name:"",Right:this.Right,Period:i.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:i,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:i.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:s};ln.Execute(i.SytemIndex.Script,u,(function(t,a){e.ExecuteScriptIndexError(t,a)}))},this.RecvMemberScriptIndexData=function(t,e,a){l.Complier.Log("[JSSymbolData::RecvMemberScriptIndexData] ",t,e,a);var i=a.Data.Data,r=t,n=this.Data.FitKLineIndex(i,r,this.Period,e.PeriodID),s=e.Job.Member,o=s.Object.Name,h=(s.Property.Name,{});for(var u in this.Execute.VarTable.has(o)?h=this.Execute.VarTable.get(o):this.Execute.VarTable.set(o,h),n){var c=t[u].Name;e.Period&&(c+="#"+e.Period),h[c]=n[u].Data}},this.RecvScriptIndexData=function(t,e,a){var i=this.GenerateScriptIndexKey(e);l.Complier.Log("[JSSymbolData::RecvScriptIndexData] ",t,e,a,i);var r=a.Data.Data,n=t;if(e.Out){for(var s=0;s<t.length;++s){var o=t[s];if(o.Name==e.Out){n=[o];break}}var h=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,h[0].Data)}else if(ze.IsPlusNumber(e.OutIndex)){var u=e.OutIndex-1;n=[t[u]];h=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,h[0].Data)}else{h=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);var c={__Type__:"Object"};for(var s in h){o=h[s];c[o.Name]=o.Data}this.ScriptIndexOutData.set(i,c)}},this.ExecuteScriptIndexError=function(t,e){var a=e.Job.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() ".concat(e.Name," 指标执行错误 : ").concat(t," "))},this.GetScriptIndexOutData=function(t,e,a){var i={PeriodID:this.Period};this.ReadSymbolArgumentValue(t[0],i)||this.Execute.ThrowUnexpectedNode(e,"".concat(a,"() 股票代码错误: ").concat(i.Error)),this.ReadIndexFunctionValue(t[1],i)||this.Execute.ThrowUnexpectedNode(e,"".concat(a,"() 指标错误: ").concat(i.Error)),"CALCSTOCKINDEX"==a&&(this.ReadIndexFunctionOut(t[2],i)||this.Execute.ThrowUnexpectedNode(e,"".concat(a,"() Error: ").concat(i.Error)));var r=new d,n=r.Get(i.Name);n||this.Execute.ThrowUnexpectedNode(e,"".concat(a,"() 指标错误: ").concat(i.Name," 指标不存在")),i.SytemIndex=n,this.ReadIndexArgumentValue(t,i)||this.Execute.ThrowUnexpectedNode(e,"".concat(a,"()  指标参数错误: ").concat(i.Error));var s=this.GenerateScriptIndexKey(i);return this.ScriptIndexOutData.has(s)?this.ScriptIndexOutData.get(s):null},this.JsonDataToHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new at;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],e[i].length>8&&(r.Up=e[i][8]),e[i].length>9&&(r.Down=e[i][9]),e[i].length>10&&(r.Stop=e[i][10]),e[i].length>11&&(r.Unchanged=e[i][11]),isNaN(r.Open)||r.Open<=0||a.push(r)}return a},this.JsonDataToMinuteHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new at;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],r.Time=e[i][8],a.push(r)}for(var n=0;n<a.length;++n){var s=a[n];if(null==s&&coninue,isNaN(s.Open)||s.Open<=0||isNaN(s.High)||s.High<=0||isNaN(s.Low)||s.Low<=0||isNaN(s.Close)||s.Close<=0||isNaN(s.YClose)||s.YClose<=0)if(0==n)s.YClose>0&&(s.Open=s.YClose,s.High=s.YClose,s.Low=s.YClose,s.Close=s.YClose);else for(var o=n-1;o>=0;--o){var h=a[o];if(null==h&&coninue,h.Open>0&&h.High>0&&h.Low>0&&h.Close>0){s.YClose<=0&&(s.YClose=h.Close),s.Open=h.Open,s.High=h.High,s.Low=h.Low,s.Close=h.Close;break}}}return a},this.JsonDataToMinuteData=function(t){var e=new Array;for(var a in t.stock[0].minute){var i=t.stock[0].minute[a],r=new it;r.Close=i.price,r.Open=i.open,r.High=i.high,r.Low=i.low,r.Vol=i.vol,r.Amount=i.amount,r.DateTime=0==a?t.stock[0].date.toString()+" 0925":t.stock[0].date.toString()+" "+i.time.toString(),r.Date=t.stock[0].date,r.Time=i.time,r.Increase=i.increase,r.Risefall=i.risefall,r.AvPrice=i.avprice,e[a]=r}return e},this.JsonDataToMultiDayMinuteData=function(t){var e=t.symbol,a=e.toUpperCase(),i=Mr.IsSHSZ(a),r=(Mr.IsChinaFutures(a),[]);for(var n in t.data){var s=[],o=t.data[n],h=o.date,l=o.yclose,u=l,c=null;for(var d in o.minute){var f=o.minute[d];f[2]&&(u=f[2]);var C=new it;C.Close=f[2],C.Open=f[1],C.High=f[3],C.Low=f[4],C.Vol=f[5]/100,C.Amount=f[6],7<f.length&&f[7]>0&&(C.AvPrice=f[7],c=f[7]),C.DateTime=h.toString()+" "+f[0].toString(),C.Date=h,C.Time=f[0],C.Close||(C.Close=u,C.Open=C.High=C.Low=C.Close),!C.AvPrice&&c&&(C.AvPrice=c),C.Close&&l?C.Increase=(C.Close-l)/l*100:C.Increase=null,0==d&&(i&&(C.DateTime=h.toString()+" 0925"),C.IsFristData=!0),C.Open<=0&&(C.Open=null),C.Close<=0&&(C.Close=null),C.AvPrice<=0&&(C.AvPrice=null),C.High<=0&&(C.High=null),C.Low<=0&&(C.Low=null),C.AvPrice<=0&&(C.AvPrice=null),s[d]=C}var m=new ut;m.Data=s,m.YClose=l,m.Close=o.close,m.Date=h,r.push(m)}for(s=[],n=r.length-1;n>=0;--n){C=r[n];for(var d in C.Data)s.push(C.Data[d])}return s},this.CODELIKE=function(t){return this.Symbol&&0==this.Symbol.indexOf(t)?1:0},this.NAMELIKE=function(t){return this.Name&&0==this.Name.indexOf(t)?1:0},this.SETCODE=function(){return this.Symbol.indexOf(".sh")?1:(this.Symbol.indexOf(".sz"),0)},this.GetSymbol=function(){return this.Symbol},this.GetName=function(){return this.Name},this.DATE=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];t[e]=a.Date-19e6}return t},this.YEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date/1e4):t[e]=null}return t},this.DAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%100):t[e]=null}return t},this.MONTH=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%1e4/100):t[e]=null}return t},this.TIME=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=a.Time:t[e]=0}return t},this.TIME2=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=100*a.Time:t[e]=0}return t},this.DateTime=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=ut.IsMinutePeriod(this.Period,!0),a=0;a<this.Data.Data.length;++a){var i=this.Data.Data[a];t[a]=e?1e4*i.Date+i.Time:i.Date}return t},this.WEEK=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;var e=new Date;for(var a in this.Data.Data){var i=this.Data.Data[a];if(t[a]=null,this.IsNumber(i.Date)){var r=parseInt(i.Date/1e4),n=parseInt(i.Date%1e4/100),s=i.Date%100;e.setFullYear(r,n-1,s),t[a]=e.getDay()}}return t},this.DAYSTOTODAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=0;i<this.Data.Data.length;++i){var r=this.Data.Data[i];if(t[i]=null,this.IsNumber(r.Date)){var n=parseInt(r.Date/1e4),s=parseInt(r.Date%1e4/100),o=r.Date%100,h=new Date(n,s-1,o),l=Math.ceil((a-h)/864e5);t[i]=l}}return t},this.WEEKOFYEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(t[e]=null,this.IsNumber(a.Date)){var i=parseInt(a.Date/1e4),r=parseInt(a.Date%1e4/100),n=a.Date%100,s=new Date(i,r-1,n),o=new Date(i,0,1),h=Math.ceil((s-o)/864e5);h+=o.getDay()+1-1;var l=Math.ceil(h/7),u=l;t[e]=u}}return t},this.GetYearWeek=function(t){var e=new Date(t.getFullYear(),0,1),a=t.getDay();0==a&&(a=7);var i=e.getDay();0==i&&(i=7);var r=t.getTime()-e.getTime(),n=Math.floor((r+864e5*(i-a))/864e5);return Math.ceil(n/7)+1},this.REFDATE=function(t,e){var a=null;if(Array.isArray(e)?e.length>0&&(a=e[e.length-1]):this.IsNumber(e)&&(a=e),null==a)return null;a<5e6&&(a+=19e6);var i=null;for(var r in this.Data.Data)if(this.Data.Data[r].Date==a){i=parseInt(r);break}return null==i||i>=t.length?null:t[i]},this.PERIOD=function(){var t=[5,6,7,11,0,1,2,3,4,5,9];return this.Period>=0&&this.Period<=t.length-1?t[this.Period]:this.Period},this.GetDrawNull=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data)t[e]=null;return t},this.SysParam=function(t,e){if(!this.DrawInfo)return[];if(2==t){if(e.IsUsePageData=!0,ze.IsNumber(this.DrawInfo.Start))return this.DrawInfo.Start+1}else if(3==t){if(e.IsUsePageData=!0,ze.IsNumber(this.DrawInfo.End))return this.DrawInfo.End+1}else{if(4==t){if(e.IsUsePageData=!0,!ze.IsNumber(this.DrawInfo.End)||!ze.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return[];for(var a=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];ze.IsNumber(r.High)&&((null==a||a<r.High)&&(a=r.High))}return a}if(5==t){if(e.IsUsePageData=!0,!ze.IsNumber(this.DrawInfo.End)||!ze.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return[];var n=null;for(i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){r=this.Data.Data[i];ze.IsNumber(r.Low)&&((null==n||n>r.Low)&&(n=r.Low))}return n}}return[]}}nn.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},nn.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},nn.prototype.JsonDataToFinance=function(t){for(var e,a=1;a<=4;++a){switch(a){case 1:var i=t.finance1,r=t.announcement1;break;case 2:i=t.finance2,r=t.announcement2;break;case 3:i=t.finance3,r=t.announcement3;break;case 4:i=t.finance4,r=t.announcement4;break;default:break}i&&r&&this.IsNumber(r.year)&&this.IsNumber(r.quarter)&&(e?e.Announcement.year<r.year&&(e={Date:t.date,Finance:i,Announcement:r}):e={Date:t.date,Finance:i,Announcement:r})}return e};var sn={JOB_DOWNLOAD_SYMBOL_DATA:1,JOB_DOWNLOAD_INDEX_DATA:2,JOB_DOWNLOAD_SYMBOL_LATEST_DATA:3,JOB_DOWNLOAD_INDEX_INCREASE_DATA:4,JOB_DOWNLOAD_VOLR_DATA:5,JOB_DOWNLOAD_LATEST_INDEX_DATA:8,JOB_DOWNLOAD_OTHER_SYMBOL_DATA:9,JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:10,JOB_DOWNLOAD_FINVALUE:301,JOB_DOWNLOAD_FINONE:302,JOB_DOWNLOAD_FINANCE:303,JOB_DOWNLOAD_GPJYVALUE:304,JOB_DOWNLOAD_VARIANT:305,JOB_DOWNLOAD_SCJYVALUE:306,JOB_DOWNLOAD_MARGIN_BALANCE:1e3,JOB_DOWNLOAD_MARGIN_RATE:1001,JOB_DOWNLOAD_MARGIN_BUY_BALANCE:1010,JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:1011,JOB_DOWNLOAD_MARGIN_BUY_REPAY:1012,JOB_DOWNLOAD_MARGIN_BUY_NET:1013,JOB_DOWNLOAD_MARGIN_SELL_BALANCE:1020,JOB_DOWNLOAD_MARGIN_SELL_VOLUME:1021,JOB_DOWNLOAD_MARGIN_SELL_REPAY:1022,JOB_DOWNLOAD_MARGIN_SELL_NET:1023,JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:2e3,JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:2001,JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:2002,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:2003,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:2004,JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:2005,JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:2006,JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:2007,JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:2008,JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:2009,JOB_DOWNLOAD_HK_TO_SH:2050,JOB_DOWNLOAD_HK_TO_SZ:2051,JOB_DOWNLOAD_HK_TO_SH_SZ:2052,JOB_DOWNLOAD_HK_TO_SHSZ:2053,JOB_CUSTOM_FUNCTION_DATA:6e3,JOB_CUSTOM_VARIANT_DATA:6001,JOB_DOWNLOAD_SECTION_SF:2e4,JOB_DOWNLOAD_SECTION_F_01:20001,JOB_DOWNLOAD_SECTION_F_02:20002,JOB_DOWNLOAD_SECTION_F_03:20003,JOB_DOWNLOAD_SECTION_F_04:20004,JOB_DOWNLOAD_SECTION_F_05:20005,JOB_DOWNLOAD_SECTION_F_06:20006,JOB_DOWNLOAD_SECTION_F_07:20007,JOB_DOWNLOAD_SECTION_F_08:20008,JOB_DOWNLOAD_SECTION_F_09:20009,JOB_DOWNLOAD_SECTION_F_10:20010,JOB_DOWNLOAD_SECTION_F_11:20011,JOB_DOWNLOAD_SECTION_F_12:20012,JOB_DOWNLOAD_SECTION_F_13:20013,JOB_DOWNLOAD_SECTION_F_14:20014,JOB_DOWNLOAD_SECTION_F_15:20015,JOB_DOWNLOAD_SECTION_F_16:20016,JOB_DOWNLOAD_SECTION_F_17:20017,JOB_DOWNLOAD_SECTION_F_18:20018,JOB_DOWNLOAD_SECTION_F_19:20019,JOB_DOWNLOAD_SECTION_F_20:20020,JOB_DOWNLOAD_SECTION_F_21:20021,JOB_DOWNLOAD_SECTION_F_22:20022,JOB_DOWNLOAD_SECTION_F_23:20023,JOB_DOWNLOAD_SECTION_F_24:20024,JOB_DOWNLOAD_SECTION_F_25:20025,JOB_DOWNLOAD_SECTION_F_26:20026,JOB_DOWNLOAD_SECTION_F_27:20027,JOB_DOWNLOAD_SECTION_F_28:20028,JOB_DOWNLOAD_SECTION_F_29:20029,JOB_DOWNLOAD_SECTION_F_30:20030,JOB_DOWNLOAD_SECTION_F_31:20031,JOB_DOWNLOAD_SECTION_F_32:20032,JOB_DOWNLOAD_SECTION_F_33:20033,JOB_DOWNLOAD_SECTION_F_34:20034,JOB_DOWNLOAD_SECTION_F_35:20035,JOB_DOWNLOAD_SECTION_F_36:20036,JOB_DOWNLOAD_SECTION_F_37:20037,JOB_DOWNLOAD_SECTION_F_38:20038,JOB_DOWNLOAD_SECTION_F_39:20039,JOB_DOWNLOAD_CUSTOM_API_DATA:3e4,JOB_EXECUTE_INDEX:30010,JOB_RUN_SCRIPT:1e4,GetMarginJobID:function(t){var e=new Map([[1,sn.JOB_DOWNLOAD_MARGIN_BALANCE],[2,sn.JOB_DOWNLOAD_MARGIN_RATE],[3,sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE],[4,sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT],[5,sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY],[6,sn.JOB_DOWNLOAD_MARGIN_BUY_NET],[7,sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE],[8,sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME],[9,sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY],[10,sn.JOB_DOWNLOAD_MARGIN_SELL_NET]]);return e.has(t)?e.get(t):null},GetNewsAnalysisID:function(t){var e=new Map([[1,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE],[2,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH],[3,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT],[4,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE],[5,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2],[6,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER],[7,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING],[8,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS],[9,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS],[10,sn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE]]);return e.has(t)?e.get(t):null},GetSectionFinanceID:function(t){var e=new Map([["流动资产",sn.JOB_DOWNLOAD_SECTION_F_01],["货币资金",sn.JOB_DOWNLOAD_SECTION_F_02],["存货",sn.JOB_DOWNLOAD_SECTION_F_03],["流动负债",sn.JOB_DOWNLOAD_SECTION_F_04],["非流动负债",sn.JOB_DOWNLOAD_SECTION_F_05],["三项费用",sn.JOB_DOWNLOAD_SECTION_F_06],["投资收益",sn.JOB_DOWNLOAD_SECTION_F_07],["归母净利润",sn.JOB_DOWNLOAD_SECTION_F_08],["扣非净利润",sn.JOB_DOWNLOAD_SECTION_F_09],["扣非每股收益",sn.JOB_DOWNLOAD_SECTION_F_10],["加权平均净资产收益",sn.JOB_DOWNLOAD_SECTION_F_11],["在建工程",sn.JOB_DOWNLOAD_SECTION_F_12],["累计折旧",sn.JOB_DOWNLOAD_SECTION_F_13],["少数股东利润",sn.JOB_DOWNLOAD_SECTION_F_14],["汇兑损益",sn.JOB_DOWNLOAD_SECTION_F_15],["坏账计提",sn.JOB_DOWNLOAD_SECTION_F_16],["固定资产",sn.JOB_DOWNLOAD_SECTION_F_17],["当期折旧",sn.JOB_DOWNLOAD_SECTION_F_18],["营业总收入",sn.JOB_DOWNLOAD_SECTION_F_19],["主营业务利润",sn.JOB_DOWNLOAD_SECTION_F_20],["营业利润",sn.JOB_DOWNLOAD_SECTION_F_21],["净利润",sn.JOB_DOWNLOAD_SECTION_F_22],["应收账款",sn.JOB_DOWNLOAD_SECTION_F_23],["财务费用",sn.JOB_DOWNLOAD_SECTION_F_24],["经营性现金流",sn.JOB_DOWNLOAD_SECTION_F_25],["资产总计",sn.JOB_DOWNLOAD_SECTION_F_26],["负债总计",sn.JOB_DOWNLOAD_SECTION_F_27],["所有者权益总计",sn.JOB_DOWNLOAD_SECTION_F_28],["毛利率",sn.JOB_DOWNLOAD_SECTION_F_29],["每股资本公积金",sn.JOB_DOWNLOAD_SECTION_F_30],["每股未分配利润",sn.JOB_DOWNLOAD_SECTION_F_31],["每股收益",sn.JOB_DOWNLOAD_SECTION_F_32],["每股净资产",sn.JOB_DOWNLOAD_SECTION_F_33],["每股经营性现金流",sn.JOB_DOWNLOAD_SECTION_F_34],["扣非净利润涨幅",sn.JOB_DOWNLOAD_SECTION_F_35],["扣非净利润涨速",sn.JOB_DOWNLOAD_SECTION_F_36],["净利润涨幅",sn.JOB_DOWNLOAD_SECTION_F_37],["资产负债率",sn.JOB_DOWNLOAD_SECTION_F_38],["利润同比",sn.JOB_DOWNLOAD_SECTION_F_39]]);return e.has(t)?e.get(t):null},GetSectionReportPeriod:function(t,e){return t>=2e3&&e>=1&&e<=4?{Year:t,Quarter:e}:null}};function on(t,e){var a=this;this.AST=t,this.ErrorHandler=new Qr,this.VarTable=new Map,this.VarDrawTable=new Map,this.OutVarTable=[],this.Arguments=[],this.ErrorCallback,this.GetEventCallback,this.IsUsePageData=!1,this.IndexCtrl,this.Debug=0,this.DebugFilter,this.Interrupt={Exit:!1},this.ConstVarTable=new Map([["CLOSE",null],["VOL",null],["OPEN",null],["HIGH",null],["LOW",null],["AMOUNT",null],["C",null],["V",null],["O",null],["H",null],["L",null],["AMO",null],["VOLR",null],["VOLINSTK",null],["OPI",null],["QHJSJ",null],["SETTLE",null],["ZSTJJ",null],["ISEQUAL",null],["ISUP",null],["ISDOWN"],["DATE",null],["YEAR",null],["MONTH",null],["PERIOD",null],["WEEK",null],["TIME",null],["DAY",null],["DATETIME",null],["TIME2",null],["WEEKOFYEAR",null],["DAYSTOTODAY",null],["INDEXA",null],["INDEXC",null],["INDEXH",null],["INDEXL",null],["INDEXO",null],["INDEXV",null],["INDEXADV",null],["INDEXDEC",null],["ADVANCE",null],["DECLINE",null],["FROMOPEN",null],["TOTALFZNUM",null],["CURRBARSCOUNT",null],["TOTALBARSCOUNT",null],["ISLASTBAR",null],["BARSTATUS",null],["BARPOS",null],["CAPITAL",null],["TOTALCAPITAL",null],["EXCHANGE",null],["SETCODE",null],["CODE",null],["STKNAME",null],["TQFLAG",null],["HYBLOCK",null],["DYBLOCK",null],["GNBLOCK",null],["FGBLOCK",null],["ZSBLOCK",null],["ZHBLOCK",null],["ZDBLOCK",null],["HYZSCODE",null],["GNBLOCKNUM",null],["FGBLOCKNUM",null],["ZSBLOCKNUM",null],["ZHBLOCKNUM",null],["ZDBLOCKNUM",null],["HYSYL",null],["HYSJL",null],["DRAWNULL",null],["NULL",null],["MACHINEDATE",null],["MACHINETIME",null],["MACHINEWEEK",null]]),this.SymbolData=new nn(this.AST,e,this),this.Algorithm=new en(this.ErrorHandler,this.SymbolData),this.Draw=new an(this.ErrorHandler,this.SymbolData),this.JobList=[],this.UpdateUICallback=null,this.CallbackParam=null,this.IsSectionMode=!1,e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam,this.CallbackParam.HQChart&&(this.GetEventCallback=function(t){return a.CallbackParam.HQChart.GetEventCallback(t)})),e.Arguments&&(this.Arguments=e.Arguments),e.IsSectionMode&&(this.IsSectionMode=e.IsSectionMode),e.Self&&(this.IndexCtrl=e.Self),ze.IsNumber(e.Debug)&&(this.Debug=e.Debug),e.DebugFilter&&(this.DebugFilter=e.DebugFilter)),this.Execute=function(){for(var t in this.OutVarTable=[],this.VarTable=new Map,this.VarDrawTable=new Map,l.Complier.Log("[JSExecute::Execute] Load Arguments",this.Arguments),this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}this.RunNextJob()},this.RunNextJob=function(){if(!(this.JobList.length<=0)){l.Complier.Log("[JSExecute::Execute] JobList",this.JobList);var t=this.JobList.shift();switch(t.ID){case sn.JOB_DOWNLOAD_SYMBOL_DATA:return this.SymbolData.GetSymbolData();case sn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:return this.SymbolData.GetSymbolPeriodData(t);case sn.JOB_DOWNLOAD_INDEX_DATA:return this.SymbolData.GetIndexData();case sn.JOB_DOWNLOAD_LATEST_INDEX_DATA:return this.SymbolData.GetLatestIndexData();case sn.JOB_DOWNLOAD_INDEX_INCREASE_DATA:return this.SymbolData.GetIndexIncreaseData(t);case sn.JOB_DOWNLOAD_SYMBOL_LATEST_DATA:return this.SymbolData.GetLatestData(t);case sn.JOB_DOWNLOAD_VOLR_DATA:return this.SymbolData.GetVolRateData(t);case sn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA:return this.SymbolData.GetOtherSymbolData(t);case sn.JOB_DOWNLOAD_RELEASE_DATE_DATA:return this.SymbolData.GetCompanyReleaseDate(t.ID);case sn.JOB_DOWNLOAD_MARGIN_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_RATE:case sn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case sn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case sn.JOB_DOWNLOAD_MARGIN_BUY_NET:case sn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case sn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case sn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case sn.JOB_DOWNLOAD_MARGIN_SELL_NET:return this.SymbolData.GetMarginData(t.ID);case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:case sn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:return this.SymbolData.GetNewsAnalysisData(t.ID);case sn.JOB_DOWNLOAD_HK_TO_SHSZ:return this.SymbolData.GetHKToSHSZData(t);case sn.JOB_DOWNLOAD_SECTION_SF:return this.SymbolData.GetSectionFinanceData(t);case sn.JOB_DOWNLOAD_FINONE:return this.SymbolData.GetFinOne(t);case sn.JOB_DOWNLOAD_FINVALUE:return this.SymbolData.GetFinValue(t);case sn.JOB_DOWNLOAD_FINANCE:return this.SymbolData.GetFinance(t);case sn.JOB_DOWNLOAD_GPJYVALUE:return this.SymbolData.GetGPJYValue(t);case sn.JOB_DOWNLOAD_SCJYVALUE:return this.SymbolData.GetSCJYValue(t);case sn.JOB_DOWNLOAD_VARIANT:return this.SymbolData.GetVariantData(t);case sn.JOB_CUSTOM_VARIANT_DATA:return this.SymbolData.GetCustomVariantData(t);case sn.JOB_CUSTOM_FUNCTION_DATA:return this.SymbolData.GetCustomFunctionData(t);case sn.JOB_DOWNLOAD_CUSTOM_API_DATA:return this.SymbolData.DownloadCustomAPIData(t);case sn.JOB_EXECUTE_INDEX:return this.SymbolData.CallScriptIndex(t);case sn.JOB_RUN_SCRIPT:return 1===this.Debug&&this.DebugFilter?this.DebugRun():this.Run()}}},this.ReadSymbolData=function(t,e){switch(t){case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":case"OPI":case"VOLINSTK":case"SETTLE":case"QHJSJ":case"ZSTJJ":case"ISEQUAL":case"ISUP":case"ISDOWN":return this.SymbolData.GetSymbolCacheData(t);case"VOLR":return this.SymbolData.GetVolRateCacheData(e);case"INDEXA":case"INDEXC":case"INDEXH":case"INDEXH":case"INDEXO":case"INDEXV":case"INDEXL":case"INDEXADV":case"INDEXDEC":return this.SymbolData.GetIndexCacheData(t);case"CURRBARSCOUNT":return this.SymbolData.GetCurrBarsCount();case"BARPOS":return this.SymbolData.GetBarPos();case"TOTALBARSCOUNT":return this.SymbolData.GetTotalBarsCount();case"TOTALFZNUM":return this.SymbolData.GetTotalTradeMinuteCount();case"ISLASTBAR":return this.SymbolData.GetIsLastBar();case"BARSTATUS":return this.SymbolData.GetBarStatus();case"TOTALCAPITAL":case"CAPITAL":case"EXCHANGE":case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":case"FGBLOCK":case"ZSBLOCK":case"ZHBLOCK":case"ZDBLOCK":case"HYZSCODE":case"GNBLOCKNUM":case"FGBLOCKNUM":case"ZSBLOCKNUM":case"ZHBLOCKNUM":case"ZDBLOCKNUM":case"HYSYL":case"HYSJL":return this.SymbolData.GetStockCacheData({VariantName:t,Node:e});case"SETCODE":return this.SymbolData.SETCODE();case"CODE":return this.SymbolData.GetSymbol();case"STKNAME":return this.SymbolData.GetName();case"TIME":return this.SymbolData.TIME();case"TIME2":return this.SymbolData.TIME2();case"DATE":return this.SymbolData.DATE();case"DATETIME":return this.SymbolData.DateTime();case"YEAR":return this.SymbolData.YEAR();case"MONTH":return this.SymbolData.MONTH();case"WEEK":return this.SymbolData.WEEK();case"DAY":return this.SymbolData.DAY();case"PERIOD":return this.SymbolData.PERIOD();case"FROMOPEN":return this.SymbolData.GetLatestIndexCacheData("FROMOPEN");case"DRAWNULL":case"NULL":return this.SymbolData.GetDrawNull();case"ADVANCE":case"DECLINE":return this.SymbolData.GetIndexIncreaseCacheData(t,this.SymbolData.Symbol,e);case"TQFLAG":return this.SymbolData.Right;case"MACHINEDATE":var a=new Date;return 1e4*a.getFullYear()+1*a.getMonth()*100+a.getDate()-19e6;case"MACHINETIME":a=new Date;return 1e4*a.getHours()+1*a.getMinutes()*100+a.getSeconds();case"MACHINEWEEK":a=new Date;return a.getDay();case"WEEKOFYEAR":return this.SymbolData.WEEKOFYEAR();case"DAYSTOTODAY":return this.SymbolData.DAYSTOTODAY()}},this.ReadCustomVariant=function(t,e){return this.SymbolData.GetStockCacheData({VariantName:t,Node:e})},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){var a=this.ConstVarTable.get(t);return null==a&&(a=this.ReadSymbolData(t,e),this.ConstVarTable.set(t,a)),a}if(Xr.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolData.GetSymbolPeriodCacheData(i[0],i[1])}if(0==t.indexOf("COLOR")){var r=ln.ColorVarToRGB(t);if(r)return r}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在",t),null},this.ReadMemberVariable=function(t){var e,a=t.Object,i=t.Property;if(e=a.Type==Zr.BinaryExpression||a.Type==Zr.LogicalExpression?this.VisitBinaryExpression(a):a.Type==Zr.CallExpression?this.VisitCallExpression(a):this.GetNodeValue(a),!e)return null;var r=e[i.Name];return r||null},this.SingleDataToArrayData=function(t){for(var e=this.SymbolData.Data.Data.length,a=[],i=0;i<e;++i)a[i]=t;return a},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t=0;t<this.AST.Body.length;++t){var e=this.AST.Body[t];if(this.RunASTNode(e,t),this.Interrupt&&this.Interrupt.Exit){l.Complier.Log("[JSExecute::RunAST] Interrupt",this.Interrupt);break}}return l.Complier.Log("[JSExecute::RunAST]",this.VarTable),this.OutVarTable},this.RunASTNode=function(t,e){this.VisitNode(t);var a=e;if(t.Type==Zr.ExpressionStatement&&t.Expression)if(t.Expression.Type==Zr.AssignmentExpression){if(":"==t.Expression.Operator&&t.Expression.Left){var i=t.Expression,r=i.Left.Name,n=this.VarTable.get(r);if(this.VarDrawTable.has(r)){var o=this.VarDrawTable.get(r);this.OutVarTable.push({Name:o.Name,Draw:o,Type:1})}else{var h=0;if(n&&"object"==(0,s.default)(n)&&"Object"==n.__Type__)h=1e3;else if(!this.IsSectionMode&&!Array.isArray(n))if("string"==typeof n){var l=parseFloat(n);ze.IsNumber(l)?n=this.SingleDataToArrayData(l):(n=this.SingleDataToArrayData(n),h=1001)}else n=this.SingleDataToArrayData(n);this.OutVarTable.push({Name:r,Data:n,Type:h})}}}else if(t.Expression.Type==Zr.CallExpression){var u=t.Expression;if(this.Draw.IsDrawFunction(u.Callee.Name)){var c=u.Draw;c.Name=u.Callee.Name,this.OutVarTable.push({Name:c.Name,Draw:c,Type:1})}else if("IFC"===u.Callee.Name&&u.Draw){var d=u.Draw;d.Name=d.DrawType,this.OutVarTable.push({Name:d.Name,Draw:d,Type:1})}else{var f=u.Out;p="__temp_c_".concat(u.Callee.Name,"_").concat(a,"__");h=0;Array.isArray(f)||(f=this.SingleDataToArrayData(f)),this.OutVarTable.push({Name:p,Data:f,Type:h,NoneName:!0})}}else if(t.Expression.Type==Zr.Identifier){var C=t.Expression.Name,m=this.ReadVariable(C,t.Expression);h=0;m&&"object"==(0,s.default)(m)&&"Object"==m.__Type__?h=1e3:this.IsSectionMode||Array.isArray(m)||(m="string"==typeof m?this.SingleDataToArrayData(parseFloat(m)):this.SingleDataToArrayData(m)),C="__temp_i_"+a+"__",this.OutVarTable.push({Name:C,Data:m,Type:h,NoneName:!0})}else if(t.Expression.Type==Zr.Literal){var D=t.Expression.Value;ze.IsString(D)&&D.indexOf("$")>0&&(D=this.SymbolData.GetOtherSymolCacheData({Literal:D})),p="__temp_li_"+a+"__";h=0;this.OutVarTable.push({Name:p,Data:D,Type:h,NoneName:!0})}else if(t.Expression.Type==Zr.BinaryExpression){var p="__temp_b_"+a+"__",v=t.Expression.Out;h=0;Array.isArray(v)||(v=this.SingleDataToArrayData(v)),this.OutVarTable.push({Name:p,Data:v,Type:h,NoneName:!0})}else if(t.Expression.Type==Zr.LogicalExpression){p="__temp_l_"+a+"__";var g=t.Expression.Out;h=0;Array.isArray(g)||(g=this.SingleDataToArrayData(g)),this.OutVarTable.push({Name:p,Data:g,Type:h,NoneName:!0})}else if(t.Expression.Type==Zr.SequenceExpression){for(var S,I,T,x,y,A,b=!1,w=!1,F=!1,M=!1,L=!1,E=!1,N=!1,P=!1,O=!1,R=!0,B=!1,_=!1,k=!1,G=!1,V=!0,H=!1,Y=!1,X=!1,W=-1,U=-1,z=-1,K=null,J=null,Q=null,$=null,j=0;j<t.Expression.Expression.length;++j){var Z=t.Expression.Expression[j];if(Z.Type==Zr.AssignmentExpression&&":"==Z.Operator&&Z.Left){if(0==j){S=Z.Left.Name;var q=this.VarTable.get(S);this.VarDrawTable.has(S)?I=this.VarDrawTable.get(S):Array.isArray(q)||(q=this.SingleDataToArrayData(q),this.VarTable.set(S,q))}}else if(Z.Type==Zr.Identifier){var tt=Z.Name;if("COLORSTICK"===tt)b=!0;else if("POINTDOT"===tt)w=!0;else if("CIRCLEDOT"===tt)M=!0;else if("DOTLINE"===tt)_=!0;else if("UPDOWNDOT"==tt)F=!0;else if("LINESTICK"===tt)L=!0;else if("STICK"===tt)E=!0;else if("VOLSTICK"===tt)N=!0;else if("LINEAREA"==tt)P=!0;else if("DRAWABOVE"===tt)H=!0;else if("DRAWCENTER"===tt)Y=!0;else if("DRAWBELOW"==tt)X=!0;else if("STEPLINE"==tt)O=!0;else if(0==tt.indexOf("COLOR"))T=tt;else if(0==tt.indexOf("RGBX")&&10==tt.length)T=tt;else if(0==tt.indexOf("LINETHICK"))A=tt;else if("ALIGN0"==tt)W=0;else if("ALIGN1"==tt)W=1;else if("ALIGN2"==tt)W=2;else if("VALIGN0"==tt)U=0;else if("VALIGN1"==tt)U=1;else if("VALIGN2"==tt)U=2;else if(0==tt.indexOf("NODRAW"))R=!1;else if(0==tt.indexOf("EXDATA"))B=!0;else if(0==tt.indexOf("LINEOVERLAY"))k=!0;else if(0==tt.indexOf("NOTEXT")||0==tt.indexOf("NOTITLE"))V=!1;else if(0==tt.indexOf("FONTSIZE")){var et=tt.replace("FONTSIZE","");z=parseInt(et)}else if(0==j){S=Z.Name;var at=this.ReadVariable(S,Z);Array.isArray(at)||(at=this.SingleDataToArrayData(at)),S="__temp_si_"+a+"__",G=!0,this.VarTable.set(S,at)}}else if(Z.Type==Zr.Literal){if(0==j){var it=this.SingleDataToArrayData(Z.Value);S=Z.Value.toString(),this.VarTable.set(S,it)}}else if(Z.Type==Zr.CallExpression)if(0==j)if(this.Draw.IsDrawFunction(Z.Callee.Name))I=Z.Draw,I.Name=Z.Callee.Name;else{var rt=Z.Out;S="__temp_sc_".concat(Z.Callee.Name,"_").concat(a,"__"),G=!0,this.VarTable.set(S,rt)}else if("RGB"==Z.Callee.Name||"RGBA"==Z.Callee.Name)T=Z.Out;else if("UPCOLOR"==Z.Callee.Name)x=Z.Out;else if("DOWNCOLOR"==Z.Callee.Name)y=Z.Out;else if("XMOVE"==Z.Callee.Name)Q=Z.Out;else if("YMOVE"==Z.Callee.Name)$=Z.Out;else if("SOUND"==Z.Callee.Name){this.GetSoundEvent();S=null}else if("ICON"==Z.Callee.Name){var nt=this.VarTable.get(S);nt&&(I=this.GetOutIconData(nt,Z.Draw),I&&(I.Name=Z.Callee.Name)),S=null}else"BACKGROUND"==Z.Callee.Name?(K=Z.Draw,S=null):"CKLINE"==Z.Callee.Name&&(J=Z.Draw,S=null);else if(Z.Type==Zr.BinaryExpression&&0==j){S="__temp_sb_"+a+"__";var st=Z.Out;G=!0,this.VarTable.set(S,st)}}if(w&&S){var ot=this.VarTable.get(S);Array.isArray(ot)||(ot=this.SingleDataToArrayData(ot));var ht={Name:S,Data:ot,Radius:xi.POINTDOT.Radius,Type:3};T&&(ht.Color=T),A&&(ht.LineWidth=A),this.OutVarTable.push(ht)}else if(M&&S){var lt=this.VarTable.get(S);Array.isArray(lt)||(lt=this.SingleDataToArrayData(lt));var ut={Name:S,Data:lt,Radius:xi.CIRCLEDOT.Radius,Type:3};T&&(ut.Color=T),A&&(ut.LineWidth=A),this.OutVarTable.push(ut)}else if(F&&S){var ct=this.VarTable.get(S);Array.isArray(ct)||(ct=this.SingleDataToArrayData(ct));var dt={Name:S,Data:ct,Radius:xi.CIRCLEDOT.Radius,Type:3,UpDownDot:!0};T&&(dt.Color=T),A&&(dt.LineWidth=A),this.OutVarTable.push(dt)}else if(L&&S){var ft=this.VarTable.get(S),Ct={Name:S,Data:ft,Type:4};T&&(Ct.Color=T),A&&(Ct.LineWidth=A),this.OutVarTable.push(Ct)}else if(E&&S){var mt=this.VarTable.get(S),Dt={Name:S,Data:mt,Type:5};T&&(Dt.Color=T),A&&(Dt.LineWidth=A),this.OutVarTable.push(Dt)}else if(N&&S){var pt=this.VarTable.get(S),vt={Name:S,Data:pt,Type:6};T&&(vt.Color=T),x&&(vt.UpColor=x),y&&(vt.DownColor=y),this.OutVarTable.push(vt)}else if(P&&S){var gt=this.VarTable.get(S),St={Name:S,Data:gt,Type:9};T&&(St.Color=T),x&&(St.UpColor=x),y&&(St.DownColor=y),A&&(St.LineWidth=A),this.OutVarTable.push(St)}else if(b&&S){var It=this.VarTable.get(S),Tt={Name:S,Data:It,Color:T,Type:2};A&&(Tt.LineWidth=A),T&&(Tt.Color=T),x&&(Tt.UpColor=x),y&&(Tt.DownColor=y),this.OutVarTable.push(Tt)}else if(S&&T&&!I){var xt=this.VarTable.get(S);Array.isArray(xt)||(xt=this.SingleDataToArrayData(xt));var yt={Name:S,Data:xt,Color:T,Type:0};A&&(yt.LineWidth=A),0==R&&(yt.IsShow=!1),1==B&&(yt.IsExData=!0),1==_&&(yt.IsDotLine=!0),1==k&&(yt.IsOverlayLine=!0),1==G&&(yt.NoneName=!0),0==V&&(yt.IsShowTitle=!1),1==O&&(yt.Type=7),this.OutVarTable.push(yt)}else if(I){var At={Name:I.Name,Draw:I,Type:1};T&&(At.Color=T),1==_&&(At.IsDotLine=!0),A&&(At.LineWidth=A),H&&(At.IsDrawAbove=!0),Y&&(At.IsDrawCenter=!0),X&&(At.IsDrawBelow=!0),W>=0&&(At.DrawAlign=W),U>=0&&(At.DrawVAlign=U),z>0&&(At.DrawFontSize=z),K&&(At.Background=K),J&&(At.VerticalLine=J),ze.IsNumber(Q)&&(At.XOffset=Q),ze.IsNumber($)&&(At.YOffset=$),this.OutVarTable.push(At)}else if(S){var bt=this.VarTable.get(S),wt={Name:S,Data:bt,Type:0};T&&(wt.Color=T),A&&(wt.LineWidth=A),0==R&&(wt.IsShow=!1),1==B&&(wt.IsExData=!0),1==_&&(wt.IsDotLine=!0),1==k&&(wt.IsOverlayLine=!0),0==V&&(wt.IsShowTitle=!1),1==O&&(wt.Type=7),this.OutVarTable.push(wt)}}},this.GetOutIconData=function(t,e){if(Array.isArray(t)){for(var a=0;a<t.length&&a<e.DrawData.length;++a){var i=t[a];i<=0&&(e.DrawData[a]=null)}return e}return t?e:null},this.GetSoundEvent=function(){return this.GetEventCallback?this.GetEventCallback(C.ON_PLAY_SOUND):null},this.Run=function(){try{var t=this.RunAST();l.Complier.Log("[JSComplier.Run] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(l.Complier.Log("[JSComplier.Run] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==sn.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))}catch(e){l.Complier.Log(e),e.Job?(l.Complier.Log("[JSComplier.Run] download job and reexectue",e.Job),this.JobList.push(e.Job),this.JobList.push({ID:sn.JOB_RUN_SCRIPT}),this.Execute()):this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(e,this.CallbackParam))}},this.DebugRun_End=function(){var t=this.OutVarTable;l.Complier.Log("[JSComplier.DebugRun_End] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(l.Complier.Log("[JSComplier.DebugRun_End] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==sn.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))},this.DebugRun_Next=function(t){var e=this;if(t.ExeLine<t.LineCount){var a=this.AST.Body[t.ExeLine];this.RunASTNode(a),++t.ExeLine,this.DebugFilter(t,(function(){e.DebugRun_Next(t)}))}else this.DebugRun_End(),t.Status=2,this.DebugFilter(t,null)},this.DebugRun=function(){var t=this;try{this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();var e={LineCount:this.AST.Body.length,ExeLine:0,Self:this,Status:1};this.DebugFilter(e,(function(){t.DebugRun_Next(e)}))}catch(a){this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(a,this.CallbackParam))}},this.VisitNode=function(t){switch(t.Type){case Zr.SequenceExpression:this.VisitSequenceExpression(t);break;case Zr.ExpressionStatement:this.VisitNode(t.Expression);break;case Zr.AssignmentExpression:this.VisitAssignmentExpression(t);break;case Zr.BinaryExpression:case Zr.LogicalExpression:this.VisitBinaryExpression(t);break;case Zr.CallExpression:this.VisitCallExpression(t);break}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){for(var e=t.Callee.Name,a=[],i=0;i<t.Arguments.length;++i){var r=t.Arguments[i];if("IFC"===e&&i>=1)break;n=r.Type==Zr.BinaryExpression||r.Type==Zr.LogicalExpression?this.VisitBinaryExpression(r):r.Type==Zr.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if("IFC"===e){var n,s=this.Algorithm.IFC(a[0]);r=s?t.Arguments[1]:t.Arguments[2];return n=r.Type==Zr.BinaryExpression||r.Type==Zr.LogicalExpression?this.VisitBinaryExpression(r):r.Type==Zr.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),t.Out=n,r.Draw&&(t.Draw=r.Draw),t.Out}if(Xr.IsCustomFunction(e)){var o=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,o&&(o.Out&&(t.Out=o.Out),o.Draw&&(t.Draw=o.Draw)),t.Out}switch(e){case"DYNAINFO":t.Out=this.SymbolData.GetLatestCacheData(a[0]);break;case"STICKLINE":t.Draw=this.Draw.STICKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT":t.Draw=this.Draw.DRAWTEXT(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXT_FIX":t.Draw=this.Draw.DRAWTEXT_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"SUPERDRAWTEXT":t.Draw=this.Draw.SUPERDRAWTEXT(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWICON":t.Draw=this.Draw.DRAWICON(a[0],a[1],a[2]),t.Out=[];break;case"ICON":t.Draw=this.Draw.ICON(a[0],a[1]),t.Out=[];break;case"TIPICON":t.Draw=this.Draw.TIPICON(a[0],a[1],a[2],a[3]),t.Out=[];break;case"BACKGROUND":t.Draw=this.Draw.BACKGROUND(a[0],a[1],a[2],a[3],a[4],a[5]),t.Out=[];break;case"CKLINE":t.Draw=this.Draw.CKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWLINE":t.Draw=this.Draw.DRAWLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData;break;case"DRAWBAND":t.Draw=this.Draw.DRAWBAND(a[0],a[1],a[2],a[3]),t.Out=[];break;case"FILLRGN":a.length>=4?t.Draw=this.Draw.FILLRGN2(a):t.Draw=this.Draw.FILLRGN(a[0],a[1],a[2]),t.Out=[];break;case"FLOATRGN":t.Draw=this.Draw.FLOATRGN(a),t.Out=[];break;case"FILLTOPRGN":t.Draw=this.Draw.FILLBGRGN(1,a),t.Out=[];break;case"FILLBOTTOMRGN":t.Draw=this.Draw.FILLBGRGN(0,a),t.Out=[];break;case"FILLVERTICALRGN":t.Draw=this.Draw.FILLVERTICALRGN(a),t.Out=[];break;case"DRAWKLINE":case"DRAWKLINE1":t.Draw=this.Draw.DRAWKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE_IF":t.Draw=this.Draw.DRAWKLINE_IF(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWCOLORKLINE":t.Draw=this.Draw.DRAWCOLORKLINE(a[0],a[1],a[2]),t.Out=[];break;case"PLOYLINE":case"POLYLINE":t.Draw=this.Draw.POLYLINE(a[0],a[1]),t.Out=t.Draw.DrawData;break;case"DRAWNUMBER":t.Draw=this.Draw.DRAWNUMBER(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Value;break;case"DRAWNUMBER_FIX":t.Draw=this.Draw.DRAWNUMBER_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData.Value;break;case"DRAWCHANNEL":t.Draw=this.Draw.DRAWCHANNEL(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"RGB":t.Out=this.Draw.RGB(a[0],a[1],a[2]);break;case"RGBA":t.Out=this.Draw.RGBA(a[0],a[1],a[2],a[3]);break;case"UPCOLOR":t.Out=this.Draw.UPCOLOR(a[0]);break;case"DOWNCOLOR":t.Out=this.Draw.DOWNCOLOR(a[0]);break;case"XMOVE":t.Out=this.Draw.XMOVE(a[0]);break;case"YMOVE":t.Out=this.Draw.YMOVE(a[0]);break;case"PARTLINE":t.Draw=this.Draw.PARTLINE(a),t.Out=[];break;case"DRAWGBK":t.Draw=this.Draw.DRAWGBK(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK2":t.Draw=this.Draw.DRAWGBK2(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK_DIV":t.Draw=this.Draw.DRAWGBK_DIV(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT_LINE":t.Draw=this.Draw.DRAWTEXT_LINE(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"DRAWRECTREL":t.Draw=this.Draw.DRAWRECTREL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXTREL":t.Draw=this.Draw.DRAWTEXTREL(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXTABS":t.Draw=this.Draw.DRAWTEXTABS(a[0],a[1],a[2]),t.Out=[];break;case"DRAWOVERLAYLINE":t.Draw=this.Draw.DRAWOVERLAYLINE(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Data;break;case"DRAWSL":t.Draw=this.Draw.DRAWSL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"VERTLINE":t.Draw=this.Draw.VERTLINE(a[0],a[1]),t.Out=t.Draw.DrawData.Data;break;case"HORLINE":t.Draw=this.Draw.HORLINE(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"CODELIKE":t.Out=this.SymbolData.CODELIKE(a[0]);break;case"NAMELIKE":case"NAMEINCLUDE":t.Out=this.SymbolData.NAMELIKE(a[1]);break;case"REFDATE":t.Out=this.SymbolData.REFDATE(a[0],a[1]);break;case"FINANCE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:1,Node:t});break;case"FINVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:1,Node:t});break;case"FINONE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"GPJYVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"SCJYVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"MARGIN":t.Out=this.SymbolData.GetMarginCacheData(a[0],t);break;case"HK2SHSZ":t.Out=this.SymbolData.GetHKToSHSZCacheData(a[0],t);break;case"NEWS":t.Out=this.SymbolData.GetNewsAnalysisCacheData(a[0],t);break;case"UPCOUNT":case"DOWNCOUNT":t.Out=this.SymbolData.GetIndexIncreaseCacheData(e,a[0],t);break;case"SF":t.Out=this.SymbolData.GetSectionFinanceCacheData(a[0],a[1],a[2],t);break;case"LOADAPIDATA":t.Out=this.SymbolData.GetCustomApiData(a);break;case"STKINDI":case"CALCSTOCKINDEX":t.Out=this.SymbolData.GetScriptIndexOutData(a,t,e);break;case"SOUND":t.Draw=this.Draw.SOUND(a[0]),t.Out=[];break;case"PLAYSOUND":t.Draw=this.Draw.PLAYSOUND(a[0],a[1]),t.Out=[];break;case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":t.Out=this.SymbolData.GetOtherSymolCacheData({FunctionName:e,Args:a});break;case"INBLOCK":t.Out=this.SymbolData.IsInBlock(a[0],t);break;case"COVER_C":case"COVER_O":case"COVER_H":case"COVER_L":case"COVER_A":case"COVER_V":return 2==a.length?this.SymbolData.GetSymbolPeriodCacheData2(Jr.GetConvertValueName(e),a[0],a[1]):this.SymbolData.GetSymbolPeriodCacheData(Jr.GetConvertValueName(e),a[0]);case"SYSPARAM":return this.SymbolData.SysParam(a[0],this);case"TESTSKIP":var h=this.Algorithm.TESTSKIP(a[0],t);if(t.Out=null,h&&(this.Interrupt.Exit=!0,t&&t.Marker)){var l=t.Marker;this.Interrupt.Line=l.Line,this.Interrupt.Index=l.Index,this.Interrupt.Column=l.Column}break;default:t.Out=this.Algorithm.CallFunction(e,a,t,this.SymbolData);break}return t.Out},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=Zr.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null,n=null;if(i.Type==Zr.BinaryExpression||i.Type==Zr.LogicalExpression)r=this.VisitBinaryExpression(i);else if(i.Type==Zr.CallExpression)r=this.VisitCallExpression(i),i.Draw&&(n=i.Draw);else if(i.Type==Zr.Literal)r=i.Value,ze.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.SymbolData.GetOtherSymolCacheData({Literal:r}));else if(i.Type==Zr.Identifier)r=this.ReadVariable(i.Name,i);else if(i.Type==Zr.MemberExpression)r=this.ReadMemberVariable(i);else if(i.Type==Zr.UnaryExpression)if("-"==i.Operator){var s=this.GetNodeValue(i.Argument);r=this.Algorithm.Subtract(0,s)}else r=i.Argument.Value;n&&this.VarDrawTable.set(a,n),this.VarTable.set(a,r)},this.VisitBinaryExpression=function(t){var e=[];e.push(t);var a=null;while(0!=e.length)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==Zr.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);switch(i.Out=null,i.Operator){case"-":i.Out=this.Algorithm.Subtract(r,n);break;case"*":i.Out=this.Algorithm.Multiply(r,n);break;case"/":i.Out=this.Algorithm.Divide(r,n);break;case"+":i.Out=this.Algorithm.Add(r,n);break;case">":i.Out=this.Algorithm.GT(r,n);break;case">=":i.Out=this.Algorithm.GTE(r,n);break;case"<":i.Out=this.Algorithm.LT(r,n);break;case"<=":i.Out=this.Algorithm.LTE(r,n);break;case"==":case"=":i.Out=this.Algorithm.EQ(r,n);break;case"!=":case"<>":i.Out=this.Algorithm.NEQ(r,n);break}0}else if(i.Type==Zr.LogicalExpression){var s=this.GetNodeValue(i.Left),o=this.GetNodeValue(i.Right);switch(i.Out=null,i.Operator){case"&&":case"AND":i.Out=this.Algorithm.And(s,o);break;case"||":case"OR":i.Out=this.Algorithm.Or(s,o);break}0}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case Zr.Literal:return t.Value;case Zr.UnaryExpression:if("-"==t.Operator){var e=this.GetNodeValue(t.Argument);return this.Algorithm.Subtract(0,e)}return t.Argument.Value;case Zr.Identifier:var a=this.ReadVariable(t.Name,t);return a;case Zr.BinaryExpression:case Zr.LogicalExpression:return t.Out;case Zr.CallExpression:return this.VisitCallExpression(t);case Zr.MemberExpression:return this.ReadMemberVariable(t);default:this.ThrowUnexpectedNode(t)}},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)},this.ThrowDownloadSF=function(t,e,a){var i=t.Marker,r=a;return this.ErrorHandler.ThrowDownloadJob(i.Index,i.Line,i.Column,r,e)},this.ThrowError=function(){}}function hn(t,e){this.AST=t,this.ErrorHandler=new Qr,this.ErrorCallback,this.UpdateUICallback,this.CallbackParam,this.JobList=[],this.VarTable=new Map,this.OutVarTable=[],this.ConstVarTable=new Map([["CLOSE","收盘价"],["VOL","成交量"],["OPEN","开盘价"],["HIGH","最高价"],["LOW","最低价"],["AMOUNT","成交量"],["C","收盘价"],["V","成交量"],["O","开盘价"],["H","最高价"],["L","最低价"],["AMO","成交量"],["VOLR","量比"],["VOLINSTK","持仓量"],["OPI","持仓量"],["ZSTJJ","均价"],["QHJSJ","结算价"],["SETTLE","结算价"],["DATE","日期"],["YEAR","年份"],["MONTH","月份"],["PERIOD","周期"],["WEEK","星期"],["TIME","时间"],["INDEXA","大盘成交额"],["INDEXC","大盘收盘价"],["INDEXH","大盘最高价"],["INDEXL","大盘最低价"],["INDEXO","大盘开盘价"],["INDEXV","大盘成交量"],["INDEXADV","大盘上涨家数"],["INDEXDEC","´大盘下跌家数"],["ADVANCE","上涨家数"],["DECLINE","下跌家数"],["FROMOPEN","当前离开盘分钟数"],["TOTALFZNUM","总分钟数"],["CURRBARSCOUNT","到最后交易的周期"],["TOTALBARSCOUNT","总的周期数"],["ISLASTBAR","是否是最后一个周期"],["BARSTATUS","数据位置状态"],["CAPITAL","当前流通股本(手)"],["TOTALCAPITAL","当前总股本(手)"],["EXCHANGE","换手率"],["SETCODE","市场类型"],["CODE","品种代码"],["STKNAME","品种名称"],["TQFLAG","当前复权状态"],["HYBLOCK","所属行业"],["DYBLOCK","所属地域"],["GNBLOCK","所属概念"],["FGBLOCK","所属风格板块"],["ZSBLOCK","所属指数板块"],["ZHBLOCK","所属组合板块"],["ZDBLOCK","所属自定义板块"],["HYZSCODE","所属行业的板块指数代码"],["GNBLOCKNUM","所属概念板块的个数"],["FGBLOCKNUM","所属风格板块的个数"],["ZSBLOCKNUM","所属指数板块的个数"],["ZHBLOCKNUM","所属组合板块的个数"],["ZDBLOCKNUM","所属自定义板块的个数"],["HYSYL","指数市盈率或个股所属行业的市盈率"],["HYSJL","指数市净率或个股所属行业的市净率"],["DRAWNULL","无效数据"]]),e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam),e.Arguments&&(this.Arguments=e.Arguments)),this.Run=function(){try{for(var t in this.OutVarTable=[],this.VarTable=new Map,l.Complier.Log("[JSExecute::JSExplainer] Load Arguments",this.Arguments),this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}var a=this.RunAST();l.Complier.Log("[JSExplainer.Run] explain finish",a),this.UpdateUICallback&&(l.Complier.Log("[JSExplainer.Run] invoke UpdateUICallback."),this.UpdateUICallback(a))}catch(i){l.Complier.Log("[JSExplainer.Run] throw error ",i),this.ErrorCallback&&this.ErrorCallback(i,this.OutVarTable)}},this.RunAST=function(){for(var t in this.AST||this.ThrowError(),this.AST.Body||this.ThrowError(),this.AST.Body){var e=this.AST.Body[t];if(this.VisitNode(e),e.Type==Zr.ExpressionStatement&&e.Expression)if(e.Expression.Type==Zr.AssignmentExpression){if(":"==e.Expression.Operator&&e.Expression.Left){var a=e.Expression,i=a.Left.Name,r="输出".concat(i,": ").concat(this.VarTable.get(i));this.OutVarTable.push({Name:i,Data:r,Type:0})}else if(":="==e.Expression.Operator&&e.Expression.Left){var n=e.Expression,s=n.Left.Name,o="赋值".concat(s,": ").concat(this.VarTable.get(s));this.OutVarTable.push({Name:s,Data:o,Type:0,IsOut:!1})}}else if(e.Expression.Type==Zr.CallExpression){var h=e.Expression;if(this.IsDrawFunction(h.Callee.Name)){var u=h.Out,c=h.Callee.Name;this.OutVarTable.push({Name:c,Draw:"输出: ".concat(u),Type:1})}else{var d=h.Out;D="__temp_c_".concat(h.Callee.Name,"_").concat(t,"__"),this.OutVarTable.push({Name:D,Data:"输出: ".concat(d),Type:0,NoneName:!0})}}else if(e.Expression.Type==Zr.Identifier){var f=e.Expression.Name,C=this.ReadVariable(f,e.Expression);f="__temp_i_"+t+"__",this.OutVarTable.push({Name:f,Data:"输出: ".concat(C),Type:0,NoneName:!0})}else if(e.Expression.Type==Zr.Literal){var m=e.Expression.Value;ze.IsString(m)&&m.indexOf("$")>0&&(m=this.GetOtherSymbolExplain({Literal:m},e)),D="__temp_li_"+t+"__";this.OutVarTable.push({Name:D,Data:"输出: ".concat(m),Type:0,NoneName:!0})}else if(e.Expression.Type==Zr.BinaryExpression){var D="__temp_b_"+t+"__",p=e.Expression.Out;this.OutVarTable.push({Name:D,Data:"输出: ".concat(p),Type:0,NoneName:!0})}else if(e.Expression.Type==Zr.LogicalExpression){D="__temp_l_"+t+"__";var v=e.Expression.Out;this.OutVarTable.push({Name:D,Data:"输出: ".concat(v),Type:0,NoneName:!0})}else if(e.Expression.Type==Zr.SequenceExpression){var g,S=void 0,I=void 0,T=void 0,x=void 0,y=void 0,A=!1,b=!1,w=!1,F=!1,M=!1,L=!1,E=!0,N=!1,P=!1,O=!1;for(var R in e.Expression.Expression){var B=e.Expression.Expression[R];if(B.Type==Zr.AssignmentExpression&&":"==B.Operator&&B.Left){S=B.Left.Name;var _=this.VarTable.get(S);this.VarTable.set(S,_)}else if(B.Type==Zr.Identifier){var k=B.Name;if("COLORSTICK"===k)A=!0;else if("POINTDOT"===k)b=!0;else if("CIRCLEDOT"===k)w=!0;else if("DOTLINE"===k)N=!0;else if("LINESTICK"===k)F=!0;else if("STICK"===k)M=!0;else if("VOLSTICK"===k)L=!0;else if("DRAWABOVE"===k)O=!0;else if(0==k.indexOf("COLOR"))x=k;else if(0==k.indexOf("LINETHICK"))y=k;else if(0==k.indexOf("NODRAW"))E=!1;else if(0==k.indexOf("EXDATA"))!0;else if(0==k.indexOf("LINEOVERLAY"))!0;else{S=B.Name;var G=this.ReadVariable(S,B);S="__temp_si_"+t+"__",P=!0,this.VarTable.set(S,G)}}else if(B.Type==Zr.Literal){var V=B.Value;S=B.Value.toString(),P=!0,this.VarTable.set(S,V)}else if(B.Type==Zr.CallExpression)if(this.IsDrawFunction(B.Callee.Name))T=B.Out,I=B.Callee.Name;else{var H=B.Out;S="__temp_sc_".concat(B.Callee.Name,"_").concat(t,"__"),P=!0,this.VarTable.set(S,H)}else if(B.Type==Zr.BinaryExpression){S="__temp_sb_"+t+"__";var Y=B.Out;P=!0,this.VarTable.set(S,Y)}}if(g=T?"输出: ".concat(T):P?"输出: ".concat(this.VarTable.get(S)):"输出".concat(S,": ").concat(this.VarTable.get(S)),x&&(g+=",颜色".concat(this.GetColorExplain(x))),y&&(g+=",线段粗细".concat(this.GetLineWidthExplain(y))),0==E&&(g+=",不显示"),1==N&&(g+=",画虚线"),1==O&&(g+=",显示在位置之上"),b&&S){g+=",画小圆点线";var X={Name:S,Data:g,Radius:xi.POINTDOT.Radius,Type:3};this.OutVarTable.push(X)}else if(w&&S){g+=",画小圆圈线";var W={Name:S,Data:g,Radius:xi.CIRCLEDOT.Radius,Type:3};this.OutVarTable.push(W)}else if(F&&S){g+=",画出柱状线和指标线";var U={Name:S,Data:g,Type:4};this.OutVarTable.push(U)}else if(M&&S){g+=",画柱状线";var z={Name:S,Data:g,Type:5};this.OutVarTable.push(z)}else if(L&&S){g+=",画成交量柱状线";var K={Name:S,Data:g,Type:6};this.OutVarTable.push(K)}else if(S&&x){var J={Name:S,Data:g,Color:x,Type:0};this.OutVarTable.push(J)}else if(T){var Q={Name:I,Data:g,Type:1};this.OutVarTable.push(Q)}else if(A&&S){g+=",画彩色柱状线";var $={Name:S,Data:g,Color:x,Type:2};this.OutVarTable.push($)}else if(S){var j={Name:S,Data:g,Type:0};this.OutVarTable.push(j)}}}return l.Complier.Log("[JSExplainer::Run]",this.VarTable),this.OutVarTable},this.VisitNode=function(t){switch(t.Type){case Zr.SequenceExpression:this.VisitSequenceExpression(t);break;case Zr.ExpressionStatement:this.VisitNode(t.Expression);break;case Zr.AssignmentExpression:this.VisitAssignmentExpression(t);break;case Zr.BinaryExpression:case Zr.LogicalExpression:this.VisitBinaryExpression(t);break;case Zr.CallExpression:this.VisitCallExpression(t);break}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){var e=t.Callee.Name,a=[];for(var i in t.Arguments){var r=t.Arguments[i],n=void 0;n=r.Type==Zr.BinaryExpression||r.Type==Zr.LogicalExpression?this.VisitBinaryExpression(r):r.Type==Zr.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if(l.Complier.Log("[JSExplainer::VisitCallExpression]",e,"(",a.toString(),")"),Xr.IsCustomFunction(e)){var s=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,s&&(s.Out&&(t.Out=s.Out),s.Draw&&(t.Draw=s.Draw)),t.Out}return t.Out=this.CallFunctionExplain(e,a,t),t.Out},this.FUNCTION_INFO_LIST=new Map([["REF",{Name:"REF",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日前的").concat(t[0])}}],["REFX",{Name:"REFX",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日后的").concat(t[0])}}],["REFV",{Name:"REFV",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日前的(未作平滑处理)").concat(t[0])}}],["REFXV",{Name:"REFXV",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日后的(未作平滑处理)").concat(t[0])}}],["REFDATE",{Name:"REFDATE",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日").concat(t[0])}}],["COUNT",{Name:"COUNT",Param:{Count:2},ToString:function(t){return"统计".concat(t[1],"日中满足").concat(t[0],"的天数")}}],["BARSLASTCOUNT",{Name:"BARSLASTCOUNT",Param:{Count:1},ToString:function(t){return"条件".concat(t[0],"连续成立次数")}}],["BARSCOUNT",{Name:"BARSCOUNT",Param:{Count:1},ToString:function(t){return"".concat(t[0],"有效数据周期数")}}],["BARSLAST",{Name:"BARSLAST",Param:{Count:1},ToString:function(t){return"上次".concat(t[0],"不为0距今天数")}}],["BARSNEXT",{Name:"BARSNEXT",Param:{Count:1},ToString:function(t){return"下次".concat(t[0],"不为0距今天数")}}],["BARSSINCEN",{Name:"BARSSINCEN",Param:{Count:2},ToString:function(t){return"在".concat(t[1],"周期内首次").concat(t[0],"距今天数")}}],["BARSSINCE",{Name:"BARSSINCE",Param:{Count:1},ToString:function(t){return"首次".concat(t[0],"距今天数")}}],["HHV",{Name:"HHV",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日内").concat(t[0],"的最高值")}}],["LLV",{Name:"LLV",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日内").concat(t[0],"的最低值")}}],["ZTPRICE",{Name:"ZTPRICE",Param:{Count:2},ToString:function(t){return"计算涨停价"}}],["DTPRICE",{Name:"DTPRICE",Param:{Count:2},ToString:function(t){return"计算跌停价"}}],["BACKSET",{Name:"BACKSET",Param:{Count:2},ToString:function(t){return"若".concat(t[0],"则将最近").concat(t[1],"周期置为1")}}],["HOD",{Name:"HOD",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日内").concat(t[0],"的高值名次")}}],["LOD",{Name:"LOD",Param:{Count:2},ToString:function(t){return"".concat(t[1],"日内").concat(t[0],"的低值名次")}}],["REVERSE",{Name:"REVERSE",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的相反数")}}],["FILTER",{Name:"FILTER",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日过滤")}}],["FILTERX",{Name:"FILTERX",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日反向过滤")}}],["TFILTER",{Name:"TFILTER",Param:{Count:3},ToString:function(t){return"信号过滤(多头)"}}],["SUMBARS",{Name:"SUMBARS",Param:{Count:2},ToString:function(t){return"".concat(t[0],"累加至").concat(t[1],"的天数")}}],["MA",{Name:"MA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日简单移动平均")}}],["SMA",{Name:"SMA",Param:{Count:3},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日[").concat(t[2],"日权重]移动平均")}}],["MEMA",{Name:"MEMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日平滑移动平均")}}],["EMA",{Name:"EMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日指数移动平均")}}],["EXPMA",{Name:"EXPMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日指数移动平均")}}],["EXPMEMA",{Name:"EXPMEMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日指数平滑移动平均")}}],["WMA",{Name:"WMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日加权移动平均")}}],["DMA",{Name:"DMA",Param:{Count:2},ToString:function(t){return"以".concat(t[1],"为权重").concat(t[0],"的动态移动平均")}}],["XMA",{Name:"XMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日偏移移动平均")}}],["RANGE",{Name:"RANGE",Param:{Count:3},ToString:function(t){return"".concat(t[0],"位于").concat(t[1],"和").concat(t[2],"之间")}}],["CONST",{Name:"CONST",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的最后一日值")}}],["TOPRANGE",{Name:"TOPRANGE",Param:{Count:1},ToString:function(t){return"当前值是近".concat(t[0],"周期的最大值")}}],["LOWRANGE",{Name:"LOWRANGE",Param:{Count:1},ToString:function(t){return"当前值是近".concat(t[0],"周期的最小值")}}],["FINDHIGH",{Name:"FINDHIGH",Param:{Count:4},ToString:function(t){return"".concat(t[0],"在").concat(t[1],"日前的").concat(t[2],"天内第").concat(t[3],"个最高价")}}],["FINDHIGHBARS",{Name:"FINDHIGHBARS",Param:{Count:4},ToString:function(t){return"".concat(t[0],"在").concat(t[1],"日前的").concat(t[2],"天内第").concat(t[3],"个最高价到当前周期的周期数")}}],["FINDLOW",{Name:"FINDLOW",Param:{Count:4},ToString:function(t){return"".concat(t[0],"在").concat(t[1],"日前的").concat(t[2],"天内第").concat(t[3],"个最低价")}}],["FINDLOWBARS",{Name:"FINDLOWBARS",Param:{Count:2},ToString:function(t){return"".concat(t[0],"在").concat(t[1],"日前的").concat(t[2],"天内第").concat(t[3],"个最低价到当前周期的周期数")}}],["SUM",{Name:"SUM",Param:{Count:2},ToString:function(t){return"".concat(t[0]).concat(t[1],"日累加")}}],["MULAR",{Name:"MULAR",Param:{Count:2},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"日累乘")}}],["AMA",{Name:"AMA",Param:{Count:2},ToString:function(t){return"以".concat(t[1],"为权重").concat(t[0],"的自适应均线")}}],["TMA",{Name:"TMA",Param:{Count:3},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日[").concat(t[2],"日权重]移动平均")}}],["CROSS",{Name:"CROSS",Param:{Count:2},ToString:function(t){return"".concat(t[0],"上穿").concat(t[1])}}],["LONGCROSS",{Name:"LONGCROSS",Param:{Count:3},ToString:function(t){return"".concat(t[0],"小于").concat(t[1],"保持").concat(t[2],"个交易日后交叉上穿")}}],["UPNDAY",{Name:"UPNDAY",Param:{Count:2},ToString:function(t){return"最近".concat(t[1],"日").concat(t[0],"连涨")}}],["DOWNNDAY",{Name:"DOWNNDAY",Param:{Count:2},ToString:function(t){return"最近".concat(t[1],"日").concat(t[0],"连跌")}}],["NDAY",{Name:"NDAY",Param:{Count:3},ToString:function(t){return"最近".concat(t[2],"日").concat(t[0],"一直大于").concat(t[1])}}],["EXIST",{Name:"EXIST",Param:{Count:2},ToString:function(t){return"最近".concat(t[1],"日存在").concat(t[0])}}],["EXISTR",{Name:"EXISTR",Param:{Count:3},ToString:function(t){return"从前".concat(t[1],"日到前").concat(t[2],"日存在").concat(t[0])}}],["EVERY",{Name:"EVERY",Param:{Count:2},ToString:function(t){return"最近".concat(t[1],"日一直存在").concat(t[0])}}],["LAST",{Name:"LAST",Param:{Count:3},ToString:function(t){return"从前".concat(t[1],"日到前").concat(t[2],"日持续").concat(t[0])}}],["NOT",{Name:"NOT",Param:{Count:1},ToString:function(t){return"".concat(t[0],"取反")}}],["IF",{Name:"IF",Param:{Count:3},ToString:function(t){return"如果".concat(t[0],",返回").concat(t[1],",否则返回").concat(t[2])}}],["IFF",{Name:"IFF",Param:{Count:3},ToString:function(t){return"如果".concat(t[0],",返回").concat(t[1],",否则返回").concat(t[2])}}],["IFN",{Name:"IFN",Param:{Count:3},ToString:function(t){return"如果".concat(t[0],",返回").concat(t[1],",否则返回").concat(t[2])}}],["IFC",{Name:"IFC",Param:{Count:3},ToString:function(t){return"如果".concat(t[0],",返回").concat(t[1],",否则返回").concat(t[2])}}],["TESTSKIP",{Name:"TESTSKIP",Param:{Count:1},ToString:function(t){return"如果满足条件".concat(t[0],",公式返回")}}],["VALUEWHEN",{Name:"VALUEWHEN",Param:{Count:2},ToString:function(t){return"如果".concat(t[0],",返回").concat(t[1],",否则返回上个输出值 ")}}],["MAX",{Name:"MAX",Param:{Count:2},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"的较大值")}}],["MIN",{Name:"MIN",Param:{Count:2},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"的较小值")}}],["ACOS",{Name:"ACOS",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的反余弦")}}],["ASIN",{Name:"ASIN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的反正弦")}}],["ATAN",{Name:"ATAN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的反正切")}}],["COS",{Name:"COS",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的余弦")}}],["SIN",{Name:"SIN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的正弦")}}],["TAN",{Name:"TAN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的正切")}}],["EXP",{Name:"EXP",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的指数")}}],["LN",{Name:"LN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的自然对数")}}],["LOG",{Name:"LOG",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的对数")}}],["SQRT",{Name:"SQRT",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的开方")}}],["ABS",{Name:"ABS",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的绝对值")}}],["POW",{Name:"POW",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"乘幂")}}],["CEILING",{Name:"CEILING",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的向上舍入")}}],["FLOOR",{Name:"FLOOR",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的向上舍入")}}],["INTPART",{Name:"INTPART",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的整数部分")}}],["BETWEEN",{Name:"BETWEEN",Param:{Count:3},ToString:function(t){return"".concat(t[0],"位于").concat(t[1],"和").concat(t[2],"之间")}}],["FRACPART",{Name:"FRACPART",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的小数部分")}}],["ROUND",{Name:"ROUND",Param:{Count:1},ToString:function(t){return"对".concat(t[0],"(进行)四舍五入")}}],["ROUND2",{Name:"ROUND2",Param:{Count:2},ToString:function(t){return"对".concat(t[0],"(进行)四舍五入")}}],["SIGN",{Name:"SIGN",Param:{Count:1},ToString:function(t){return"".concat(t[0],"的符号")}}],["MOD",{Name:"MOD",Param:{Count:2},ToString:function(t){return"".concat(t[0],"关于").concat(t[1],"的模")}}],["RAND",{Name:"RAND",Param:{Count:1},ToString:function(t){return"随机正整数"}}],["AVEDEV",{Name:"AVEDEV",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日平均绝对偏差")}}],["DEVSQ",{Name:"DEVSQ",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日数据偏差平方和")}}],["FORCAST",{Name:"FORCAST",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日线性回归预测值")}}],["TSMA",{Name:"TSMA",Param:{Count:2},ToString:function(t){return"".concat(t[0],"在").concat(t[1],"个周期内的时间序列三角移动平均")}}],["SLOPE",{Name:"SLOPE",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日线性回归斜率")}}],["STD",{Name:"STD",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日估算标准差")}}],["STDP",{Name:"STDP",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日总体标准差")}}],["STDDEV",{Name:"STDDEV",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日标准偏差")}}],["VAR",{Name:"VAR",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日估算样本方差")}}],["VARP",{Name:"VARP",Param:{Count:2},ToString:function(t){return"".concat(t[0],"的").concat(t[1],"日总体样本方差")}}],["COVAR",{Name:"COVAR",Param:{Count:3},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"的").concat(t[2],"周期的协方差")}}],["RELATE",{Name:"RELATE",Param:{Count:3},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"的").concat(t[0],"周期的相关系数")}}],["BETA",{Name:"BETA",Param:{Count:1},ToString:function(t){return"β(Beta)系数"}}],["BETAEX",{Name:"BETAEX",Param:{Count:3},ToString:function(t){return"".concat(t[0],"和").concat(t[1],"的").concat(t[2],"周期的相关放大系数")}}],["COST",{Name:"COST",Param:{Count:1},ToString:function(t){return"获利盘为".concat(t[0],"%的成本分布")}}],["WINNER",{Name:"WINNER",Param:{Count:1},ToString:function(t){return"以".concat(t[0],"计算的获利盘比例")}}],["LWINNER",{Name:"LWINNER",Param:{Count:2},ToString:function(t){return"最近".concat(t[0],"日那部分成本以").concat(t[1],"价格卖出的获利盘比例")}}],["PWINNER",{Name:"PWINNER",Param:{Count:2},ToString:function(t){return"".concat(t[0],"日前那部分成本以").concat(t[1],"价格卖出的获利盘比例")}}],["COSTEX",{Name:"COSTEX",Param:{Count:2},ToString:function(t){return"位于价格".concat(t[0],"和").concat(t[1],"间的成本")}}],["PPART",{Name:"PPART",Param:{Count:2},ToString:function(t){return"".concat(t[0],"日前那部分成本占总成本的比例")}}],["SAR",{Name:"SAR",Param:{Count:3},ToString:function(t){return"步长为".concat(t[1],"极限值为").concat(t[0],"的").concat(t[2],"日抛物转向")}}],["SARTURN",{Name:"SARTURN",Param:{Count:3},ToString:function(t){return"步长为".concat(t[1],"极限值为").concat(t[0],"的").concat(t[2],"日抛物转向点")}}],["CON2STR",{Name:"CON2STR",Param:{Count:2},ToString:function(t){return"".concat(t[0],"转为字符串")}}],["VAR2STR",{Name:"VAR2STR",Param:{Count:2},ToString:function(t){return"".concat(t[0],"转为字符串")}}],["STR2CON",{Name:"STR2CON",Param:{Count:1},ToString:function(t){return"".concat(t[0],"转为数字")}}],["STRLEN",{Name:"STRLEN",Param:{Count:1},ToString:function(t){return"得到".concat(t[0],"字符串长度")}}],["STRCAT",{Name:"STRCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["VARCAT",{Name:"VARCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["STRSPACE",{Name:"STRSPACE",Param:{Count:1},ToString:function(t){return"字符串".concat(t[0],"加一空格")}}],["SUBSTR",{Name:"SUBSTR",Param:{Count:3},ToString:function(t){return"字符串".concat(t[0],"中取一部分")}}],["STRCMP",{Name:"STRCMP",Param:{Count:2},ToString:function(t){return"字符串".concat(t[0],"和字符串").concat(t[1],"比较")}}],["FINDSTR",{Name:"FINDSTR",Param:{Count:2},ToString:function(t){return"字符串".concat(t[0],"中查找字符串").concat(t[1])}}],["NAMEINCLUD",{Name:"NAMEINCLUD",Param:{Count:1},ToString:function(t){return"查找品种名称中包含".concat(t[0])}}],["CODELIKE",{Name:"CODELIKE",Param:{Count:1},ToString:function(t){return"查找品种名称中包含".concat(t[0])}}],["INBLOCK",{Name:"AVEDEV",Param:{Count:1},ToString:function(t){return"属于".concat(t[0],"板块")}}],["STKINDI",{Name:"STKINDI",Param:{Dynamic:!0},ToString:function(t){return"指标引用"}}],["HHVBARS",{Name:"HHVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史".concat(t[0],"新高距今天数"):"".concat(t[1],"日内").concat(t[0],"新高距今天数")}}],["LLVBARS",{Name:"LLVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史".concat(t[0],"新低距今天数"):"".concat(t[1],"日内").concat(t[0],"新低距今天数")}}]]),this.CallFunctionExplain=function(t,e,a){if(this.FUNCTION_INFO_LIST.has(t)){var i=this.FUNCTION_INFO_LIST.get(t);return!0===i.Param.Dynamic||i.Param.Count!=e.length&&this.ThrowUnexpectedNode(a,"函数".concat(t,"参数个数不正确. 需要").concat(i.Param.Count,"个参数")),i.ToString(e)}switch(t){case"CALCSTOCKINDEX":return"引用".concat(e[0],"的").concat(e[1],"指标第").concat(e[2],"个输出值");case"PEAK":case"PEAKBARS":case"ZIG":case"ZIGA":case"TROUGH":case"TROUGHBARS":return this.GetZIGExplain(t,e);case"FINANCE":return this.GetFinanceExplain(e);case"DYNAINFO":return this.GetDynainfoExplain(e);case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":return this.GetOtherSymbolExplain({FunctionName:t,Args:e},a);case"PLOYLINE":return"当满足条件".concat(e[0],"时以").concat(e[1],"位置为顶点画折线连接");case"DRAWLINE":return"当满足条件".concat(e[0],"时,在").concat(e[1],"位置画直线起点，当满足条件").concat(e[2],"时,在").concat(e[3],"位置画直线终点,").concat(e[4],"表示是否延长");case"DRAWSL":return"当满足条件".concat(e[0],"时,在").concat(e[1],"位置画斜线线性回归,").concat(e[2],"斜率,").concat(e[3],"长度,").concat(e[4],"方向");case"DRAWKLINE":case"DRAWKLINE1":return"K线";case"DRAWICON":return"当满足条件".concat(e[0],"时,在").concat(e[1],"位置画").concat(e[2],"号图标");case"DRAWTEXT":return"当满足条件".concat(e[0],"时,在").concat(e[1],"位置书写文字");case"DRAWTEXT_FIX":return"当满足条件".concat(e[0],"时,在横轴").concat(e[1],"纵轴").concat(e[2],"位置书写文字");case"DRAWNUMBER":return"当满足条件".concat(e[0],"时,在").concat(e[1],"位置书写数字");case"DRAWNUMBER_FIX":return"当满足条件".concat(e[0],"时,在横轴").concat(e[1],"纵轴").concat(e[2],"位置书写数字");case"RGB":return"自定色[".concat(e[0],",").concat(e[1],",").concat(e[2],"]");case"DRAWBAND":return"画带状线";case"DRAWRECTREL":return"相对位置上画矩形.";case"DRAWGBK":return"填充背景";case"STICKLINE":var r="";return r=-1==e[4]?"虚线空心柱":0==e[4]?"实心柱":"实线空心柱","当满足条件".concat(e[0],"时, 在").concat(e[1],"和").concat(e[2],"位置之间画柱状线,宽度为").concat(e[3],",").concat(r);default:this.ThrowUnexpectedNode(a,"函数".concat(t,"不存在"))}},this.GetDynainfoExplain=function(t){var e=new Map([[3,"前收盘价"],[4,"开盘价"],[5,"最高价"],[6,"最低价"],[7,"现价"],[8,"总量"],[9,"现量"],[10,"总金额"],[11,"均价"],[12,"日涨跌"],[13,"振幅"],[14,"涨幅"],[15,"开盘时的成交金额"],[16,"前5日每分钟均量"],[17,"量比"],[18,"上涨家数"],[19,"下跌家数"]]),a=t[0];return e.has(a)?e.get(a):"即时行情[".concat(a,"]")},this.GetFinanceExplain=function(t){var e=new Map([[1,"总股本"],[2,"市场类型"],[3,"沪深品种类型"],[4,"沪深行业代码"],[5,"B股"],[6,"H股"],[7,"流通股本[股]"],[8,"股东人数[户]"],[9,"资产负债率%"],[10,"总资产"],[11,"流动资产"],[12,"固定资产"],[13,"无形资产"],[15,"流动负债"],[16,"少数股东权益"]]),a=t[0];return e.has(a)?e.get(a):"财务数据[".concat(a,"]")},this.GetZIGExplain=function(t,e){var a=e[0];switch(0==a?a="开盘价":1==a?a="最高价":2==a?a="最低价":3==a&&(a="收盘价"),t){case"PEAK":return"".concat(a,"的").concat(e[1],"%之字转向的前").concat(e[2],"个波峰值");case"PEAKBARS":return"".concat(a,"的").concat(e[1],"5%之字转向的前").concat(e[2],"个波峰位置");case"ZIG":return"".concat(a,"的").concat(e[1],"的之字转向");case"ZIGA":return"".concat(a,"变化").concat(e[1],"的之字转向");case"TROUGH":return"".concat(a,"的").concat(e[1],"%之字转向的前").concat(e[2],"个波谷值");case"TROUGHBARS":return"".concat(a,"的").concat(e[1],"%之字转向的前").concat(e[2],"个波谷位置")}},this.GetColorExplain=function(t){var e=new Map([["COLORBLACK","黑色"],["COLORBLUE","蓝色"],["COLORGREEN","绿色"],["COLORCYAN","青色"],["COLORRED","红色"],["COLORMAGENTA","洋红色"],["COLORBROWN","棕色"],["COLORLIGRAY","淡灰色"],["COLORGRAY","深灰色"],["COLORLIBLUE","淡蓝色"],["COLORLIGREEN","淡绿色"],["COLORLICYAN","淡青色"],["COLORLIRED","淡红色"],["COLORLIMAGENTA","淡洋红色"],["COLORWHITE","白色"],["COLORYELLOW","黄色"]]);return e.has(t)?e.get(t):0==t.indexOf("COLOR")?"#"+t.substr(5):"rgb(30,144,255)"},this.GetLineWidthExplain=function(t){var e=parseInt(t.replace("LINETHICK",""));return ze.IsPlusNumber(e)?e:1},this.SymbolPeriodExplain=function(t,e){var a=new Map([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]),i=new Map([["MIN1","1分钟"],["MIN5","5分钟"],["MIN15","15分钟"],["MIN30","30分钟"],["MIN60","60分钟"],["DAY","日"],["WEEK","周"],["MONTH","月"],["SEASON","季"],["YEAR","年"],["WEEK2","双周"],["HALFYEAR","半年"]]),r=t;a.has(t)&&(r=a.get(t));var n=e;return i.has(e)&&(n=i.get(e)),"".concat(r,"[取").concat(n,"数据]")},this.GetOtherSymbolExplain=function(t,e){var a=new Map([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]);if(t.FunctionName){var i=t.Args,r=a.get(t.FunctionName);return"[".concat(i[0],"]").concat(r)}if(t.Literal){var n=t.Literal.toUpperCase();i=n.split("$");if(!a.has(i[1]))return"";var s=i[0];r=a.get(i[1]);return"[".concat(s,"]").concat(r)}},this.IsDrawFunction=function(t){var e=new Set(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2"]);return!!e.has(t)},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=Zr.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null;if(i.Type==Zr.BinaryExpression||i.Type==Zr.LogicalExpression)r=this.VisitBinaryExpression(i);else if(i.Type==Zr.CallExpression)r=this.VisitCallExpression(i);else if(i.Type==Zr.Literal)r=i.Value,ze.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.GetOtherSymbolExplain({Literal:r},t));else if(i.Type==Zr.Identifier)r=this.ReadVariable(i.Name,i);else if(i.Type==Zr.MemberExpression)r=this.ReadMemberVariable(i);else if(i.Type==Zr.UnaryExpression)if("-"==i.Operator){var n=this.GetNodeValue(i.Argument);r="-"+n}else r=i.Argument.Value;l.Complier.Log("[JSExplainer::VisitAssignmentExpression]",a," = ",r),this.VarTable.set(a,r)},this.ReadMemberVariable=function(t){var e,a=t.Object,i=t.Property;if(a.Type==Zr.BinaryExpression||a.Type==Zr.LogicalExpression)e=this.VisitBinaryExpression(a);else{if(a.Type!=Zr.CallExpression){if(i.Name.indexOf("#")>0)var r=i.Name.split("#"),n="".concat(a.Name,"的").concat(r[0],"[周期").concat(r[1],"]");else n="".concat(a.Name,"的").concat(i.Name);return n}e=this.VisitCallExpression(a)}if(!e)return null;n=e[i.Name];return n||null},this.VisitBinaryExpression=function(t){var e=[];e.push(t);var a=null;while(0!=e.length)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==Zr.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);l.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Out="(".concat(r," ").concat(i.Operator," ").concat(n,")"),"收盘价"==r&&"开盘价"==n?">"==i.Operator?i.Out="(收阳线)":"<"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)"):"开盘价"==r&&"收盘价"==n&&("<"==i.Operator?i.Out="(收阳线)":">"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)")),l.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==Zr.LogicalExpression){var s=this.GetNodeValue(i.Left),o=this.GetNodeValue(i.Right);switch(l.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,s,o),i.Out=null,i.Operator){case"&&":case"AND":i.Out="(".concat(s," 并且 ").concat(o,")");break;case"||":case"OR":i.Out="(".concat(s," 或者 ").concat(o,")");break}l.Complier.Log("[JSExplainer::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case Zr.Literal:return t.Value;case Zr.UnaryExpression:if("-"==t.Operator){var e=this.GetNodeValue(t.Argument);return"-"+e}return t.Argument.Value;case Zr.Identifier:var a=this.ReadVariable(t.Name,t);return a;case Zr.BinaryExpression:case Zr.LogicalExpression:return t.Out;case Zr.CallExpression:return this.VisitCallExpression(t);default:this.ThrowUnexpectedNode(t)}},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){var a=this.ConstVarTable.get(t);return a}if(Xr.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolPeriodExplain(i[0],i[1])}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在"),t},this.ThrowUnexpectedNode=function(t,e){var a=t.Marker,i=e||"执行异常";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)},this.ThrowError=function(){}}function ln(){}ln.Tokenize=function(t){l.Complier.Log("[JSComplier.Tokenize]",t);var e=new jr(t),a=[];try{while(1){var i=e.GetNextToken();if(!i)break;a.push(i)}}catch(r){}return a},ln.Parse=function(t){l.Complier.Log("[JSComplier.Parse]",t);var e=new tn(t);e.Initialize();var a=e.ParseScript(),i=a;return i},ln.Execute=function(t,e,a){(function(){try{e.Self&&(e.Self.Status=1),l.Complier.Log("[JSComplier.Execute]",t,e),l.Complier.Log("[JSComplier.Execute] parser .....");var i=new tn(t);i.Initialize();var r=i.ParseScript(),n=r;l.Complier.Log("[JSComplier.Execute] parser finish.",n),e.Self&&(e.Self.Status=2),l.Complier.Log("[JSComplier.Execute] execute .....");var s=new on(n,e);s.ErrorCallback=a,s.JobList=i.Node.GetDataJobList(),"ScriptIndexConsole"==e.ClassName&&s.JobList.unshift({ID:sn.JOB_DOWNLOAD_SYMBOL_DATA}),s.JobList.push({ID:sn.JOB_RUN_SCRIPT}),e.Self&&(e.Self.Status=3);s.Execute()}catch(o){l.Complier.Log(o),a&&a(o,e.CallbackParam),e.Self&&(e.Self.Status=0)}})(),l.Complier.Log("[JSComplier.Execute] async execute.")},ln.Explain=function(t,e,a){(function(){try{l.Complier.Log("[JSComplier.Explain]",t,e),l.Complier.Log("[JSComplier.Explain] parser .....");var i=new tn(t);i.Initialize();var r=i.ParseScript(),n=r;l.Complier.Log("[JSComplier.Explain] parser finish.",n),l.Complier.Log("[JSComplier.Explain] explain .....");var s=new hn(n,e);s.ErrorCallback=a,s.JobList=i.Node.GetDataJobList(),s.JobList.push({ID:sn.JOB_RUN_SCRIPT});s.Run()}catch(o){l.Complier.Log(o),a&&a(o,e.CallbackParam)}})(),l.Complier.Log("[JSComplier.Explain] async explain.")},ln.SetDomain=function(t,e){t&&(Xr.Domain=t),e&&(Xr.CacheDomain=e)},ln.AddIcon=function(t){Xr.CustomDrawIcon.Data.set(t.ID,t)},ln.AddFunction=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Xr.CustomFunction.Data.set(e,t)}},ln.AddVariant=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Xr.CustomVariant.Data.set(e,t)}},ln.ColorVarToRGB=function(t){var e=new Map([["COLORBLACK","rgb(0,0,0)"],["COLORBLUE","rgb(18,95,216)"],["COLORGREEN","rgb(25,158,0)"],["COLORCYAN","rgb(0,255,198)"],["COLORRED","rgb(238,21,21)"],["COLORMAGENTA","rgb(255,0,222)"],["COLORBROWN","rgb(149,94,15)"],["COLORLIGRAY","rgb(218,218,218)"],["COLORGRAY","rgb(133,133,133)"],["COLORLIBLUE","rgb(94,204,255)"],["COLORLIGREEN","rgb(183,255,190)"],["COLORLICYAN","rgb(154,255,242)"],["COLORLIRED","rgb(255,172,172)"],["COLORLIMAGENTA","rgb(255,145,241)"],["COLORWHITE","rgb(255,255,255)"],["COLORYELLOW","rgb(255,198,0)"]]);if(e.has(t))return e.get(t);if(0==t.indexOf("COLOR")){var a=t.substr(5);if(6!=a.length)return null;var i=a.substr(0,2),r=parseInt(i,16);i=a.substr(2,2);var n=parseInt(i,16);i=a.substr(4,2);var s=parseInt(i,16);return"rgb(".concat(s,",").concat(n,",").concat(r,")")}if(0==t.indexOf("RGBX")){a=t.substr(4);if(6!=a.length)return null;i=a.substr(0,2),s=parseInt(i,16);i=a.substr(2,2);n=parseInt(i,16);i=a.substr(4,2);r=parseInt(i,16);return"rgb(".concat(s,",").concat(n,",").concat(r,")")}return null};var un={KLINE_ID:0,MINUTE_ID:2,HISTORY_MINUTE_ID:3,MULTIDAY_MINUTE_ID:4},cn={OVERLAY_BARS:"OVERLAY_BARS",KLINE_TABLE:"KLINE_TABLE",SCATTER_PLOT:"SCATTER_PLOT"};var dn=new function(){this.DataMap=new Map,this.Add=function(t,e){this.DataMap.set(t,{MinuteFittingCallback:e.MinuteFittingCallback,KLineFittingCallback:e.KLineFittingCallback,CreateChartCallback:e.CreateChartCallback,FormatTitleCallback:e.FormatTitleCallback})},this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Has=function(t){return this.DataMap.has(t)}};function fn(t,e,a,i){this.newMethod=Ui,this.newMethod(t),delete this.newMethod,this.ClassName="ScriptIndex",this.Script=e,this.Arguments=[],this.OutVar=[],this.ID,this.FloatPrecision=2,this.StringFormat,this.KLineType=null,this.InstructionType,this.YSpecificMaxMin=null,this.YSplitScale=null,this.Condition=null,this.OutName=null,this.YSplitType,this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20,this.LockMinWidth=null,this.TitleFont=xi.TitleFont,this.IsShortTitle=!1,this.IsUsePageData=!1,this.Debug,this.IsSync=!1,this.IsShow=!0,i&&(i.FloatPrecision>=0&&(this.FloatPrecision=i.FloatPrecision),i.StringFormat>0&&(this.StringFormat=i.StringFormat),i.ID&&(this.ID=i.ID),(i.KLineType>=0||-1===i.KLineType)&&(this.KLineType=i.KLineType),i.InstructionType&&(this.InstructionType=i.InstructionType),i.YSpecificMaxMin&&(this.YSpecificMaxMin=i.YSpecificMaxMin),i.YSplitScale&&(this.YSplitScale=i.YSplitScale),i.Condition&&(this.Condition=i.Condition),i.TitleFont&&(this.TitleFont=i.TitleFont),i.IsShortTitle&&(this.IsShortTitle=i.IsShortTitle),i.OutName&&(this.OutName=i.OutName),ze.IsNumber(i.YSplitType)&&(this.YSplitType=i.YSplitType),ze.IsBool(i.IsSync)&&(this.IsSync=i.IsSync),i.Debug&&ze.IsPlusNumber(i.Debug.Count)&&i.Debug.Callback&&(this.Debug={Count:i.Debug.Count,Callback:i.Debug.Callback})),i&&i.Lock&&(1==i.Lock.IsLocked&&(this.IsLocked=!0),i.Lock.Callback&&(this.LockCallback=i.Lock.Callback),i.Lock.ID&&(this.LockID=i.Lock.ID),i.Lock.BG&&(this.LockBG=i.Lock.BG),i.Lock.TextColor&&(this.LockTextColor=i.Lock.TextColor),i.Lock.Text&&(this.LockText=i.Lock.Text),i.Lock.Font&&(this.LockFont=i.Lock.Font),i.Lock.Count&&(this.LockCount=i.Lock.Count),i.Lock.MinWidth&&(this.LockMinWidth=i.Lock.MinWidth*I())),a&&(this.Arguments=a),this.CopyTo=function(t){t.FloatPrecision=this.FloatPrecision,t.StringFormat=this.StringFormat,t.KLineType=this.KLineType,t.InstructionType=this.InstructionType,t.Condition=this.Condition,t.TitleFont=this.TitleFont,t.IsShortTitle=this.IsShortTitle,t.OutName=this.OutName,t.Arguments=this.Arguments,t.Script=this.Script,t.Name=this.Name,t.ID=this.ID},this.SetLock=function(t){1==t.IsLocked?(this.IsLocked=!0,t.Callback&&(this.LockCallback=t.Callback),t.ID&&(this.LockID=t.ID),t.BG&&(this.LockBG=t.BG),t.TextColor&&(this.LockTextColor=t.TextColor),t.Text&&(this.LockText=t.Text),t.Font&&(this.LockFont=t.Font),t.Count&&(this.LockCount=t.Count),t.MinWidth&&(this.LockMinWidth=t.MinWidth*I())):(this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20)},this.ExecuteScript=function(t,e,a){this.OutVar=[];var i={HQChart:t,WindowIndex:e,HistoryData:a,Self:this},r=un.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?r=t.DayCount>1?un.MULTIDAY_MINUTE_ID:un.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(r=un.HISTORY_MINUTE_ID);var n={HQDataType:r,Symbol:t.Symbol,Name:t.Name,Data:a,SourceData:t.SourceData,Callback:this.RecvResultData,CallbackParam:i,Async:!0,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Arguments:this.Arguments,Condition:this.Condition,IsBeforeData:t.IsBeforeData,IsApiPeriod:t.IsApiPeriod,DrawInfo:null,Self:this};if(this.Debug&&ze.IsPlusNumber(this.Debug.Count)&&this.Debug.Callback&&(--this.Debug.Count,n.Debug=1,n.DebugFilter=this.Debug.Callback),t&&t.ChartPaint[0]){var s=t.ChartPaint[0];s&&s.DrawKRange&&(n.DrawInfo={Start:s.DrawKRange.Start,End:s.DrawKRange.End})}if(r===un.HISTORY_MINUTE_ID&&(n.TrateDate=t.TradeDate),r===un.MULTIDAY_MINUTE_ID&&(n.DayCount=t.DayCount),t.NetworkFilter&&(n.NetworkFilter=t.NetworkFilter),!this.Condition||this.IsMeetCondition(i,n)){var o=this.Script;ln.Execute(o,n,t.ScriptErrorCallback)}else this.ShowConditionError(i,this.Condition.Message)},this.IsMeetCondition=function(t,e){if(l.Complier.Log("[ScriptIndex::IsMeetCondition] ",this.Condition),this.Condition.Period){if(!this.IsMeetPeriodCondition(t,e))return!1;if(!this.IsMeetIncludeCondition(t,e))return!1}return!0},this.IsMeetPeriodCondition=function(t,e){if(!this.Condition.Period)return!0;for(var a in this.Condition.Period){var i=this.Condition.Period[a];switch(i){case u.MINUTE_ID:if(e.HQDataType==un.MINUTE_ID)return!0;break;case u.MULTIDAY_MINUTE_ID:if(e.HQDataType==un.MULTIDAY_MINUTE_ID)return!0;break;case u.KLINE_DAY_ID:case u.KLINE_WEEK_ID:case u.KLINE_MONTH_ID:case u.KLINE_YEAR_ID:case u.KLINE_TWOWEEK_ID:case u.KLINE_QUARTER_ID:case u.KLINE_MINUTE_ID:case u.KLINE_5_MINUTE_ID:case u.KLINE_15_MINUTE_ID:case u.KLINE_30_MINUTE_ID:case u.KLINE_60_MINUTE_ID:if(t.HQChart.Period==i)return!0;break}}return!1},this.IsMeetIncludeCondition=function(t,e){if(!this.Condition.Include||this.Condition.Include.length<=0)return!0;var a=t.HQChart.Symbol;for(var i in a&&(a=a.toUpperCase()),this.Condition.Include){var r=this.Condition.Include[i];if(a==r)return!0}return!1},this.ShowConditionError=function(t,e){var a=t.HQChart,i=t.WindowIndex;a.DeleteIndexPaint(i),0==i&&a.ShowKLine(!0);var r="指标不支持当前品种或周期";e&&(r=e);var n=new Ft;n.Canvas=a.Canvas,n.ChartBorder=a.Frame.SubFrame[i].Frame.ChartBorder,n.ChartFrame=a.Frame.SubFrame[i].Frame,n.NotSupportMessage=r,a.ChartPaint.push(n),a.UpdataDataoffset(),a.UpdateFrameMaxMin(),a.Draw()},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;if(e.Self.OutVar=t,e.Self.BindData(a,i,r),0==e.Self.IsLocked)e.HQChart.Frame.SubFrame[i].Frame.SetLock(null);else{var n={IsLocked:!0,Callback:e.Self.LockCallback,IndexName:e.Self.Name,ID:e.Self.LockID,BG:e.Self.LockBG,Text:e.Self.LockText,TextColor:e.Self.LockTextColor,Font:e.Self.LockFont,Count:e.Self.LockCount,MinWidth:e.Self.LockMinWidth};e.HQChart.Frame.SubFrame[i].Frame.SetLock(n)}if(e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),!1===e.Self.IsSync&&e.HQChart.Draw(),a.GetIndexEvent){var s=a.GetIndexEvent();if(s){var o=e.Self,h={OutVar:o.OutVar,WindowIndex:i,Name:o.Name,Arguments:o.Arguments,HistoryData:r,Stock:{Symbol:a.Symbol,Name:a.Name}};s.Callback(s,h,o)}}},this.SetChartIndexName=function(t){this.Name?t.IndexName=this.Name:this.ID&&(t.IndexName,this.ID),t.Script=this},this.ReloadChartResource=function(t,e,a){var i=t.GetEventCallback(C.ON_RELOAD_INDEX_CHART_RESOURCE);if(i&&i.Callback){var r={Chart:a,IndexName:this.Name,IndexID:this.ID,HQChart:t,WindowIndex:e};i.Callback(i,r,this)}},this.CreateLine=function(t,e,a,i,r){if(7==r)var n=new Ot;else n=new Ft;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),8==r&&(n.DrawType=2,n.BreakPoint=a.BreakPoint),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(n.LineWidth=s)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var o=e+1;n.Data.Data=a.Data,this.ReloadChartResource(t,e,n),!1===a.IsShowTitle||ze.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[o].Data[i]=new ya(n.Data,null,n.Color):t.TitlePaint[o].Data[i]=new ya(n.Data,a.Name,n.Color),t.TitlePaint[o].Data[i].ChartClassName=n.ClassName),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateArea=function(t,e,a,i){var r=new Mt;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Identify=this.Guid,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.DownColor?r.AreaColor=a.DownColor:a.UpColor&&(r.AreaColor=a.UpColor,r.AreaDirection=1),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));ze.IsPlusNumber(n)&&(r.LineWidth=n)}ze.IsNonEmptyArray(a.LineDash)&&(r.LineDash=a.LineDash),0==a.IsShow&&(r.IsShow=!1);var s=e+1;r.Data.Data=a.Data,!1===a.IsShowTitle||ze.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[s].Data[i]=new ya(r.Data,null,r.Color):t.TitlePaint[s].Data[i]=new ya(r.Data,a.Name,r.Color),t.TitlePaint[s].Data[i].ChartClassName=r.ClassName),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateOverlayLine=function(t,e,a,i,r){if(7==r)var n=new Ot;n=new Et;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(n.LineWidth=s)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var o=e+1;n.Data.Data=a.Data,t.TitlePaint[o].Data[i]=new ya(n.Data,a.Name,n.Color),t.TitlePaint[o].Data[i].ChartClassName=n.ClassName,t.ChartPaint.push(n)},this.CreateBar=function(t,e,a,i){var r=new Xt;r.Canvas=t.Canvas,a.Draw.Width>0?r.Width=a.Draw.Width:r.Width=0,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i);r.Data.Data=a.Draw.DrawData,r.BarType=a.Draw.Type,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateText=function(t,e,a,i,r){var n=new Wt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.ReloadResource(),a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(n.TextAlign="center"),!0===a.IsDrawAbove&&(n.Direction=1),!0===a.IsDrawBelow&&(n.Direction=2);a.Draw.Position&&(n.Position=a.Draw.Position),a.Draw.DrawData&&(n.Data.Data=a.Draw.DrawData),n.Text=a.Draw.Text,a.Draw.Direction>0&&(n.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(n.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(n.TextAlign=a.Draw.TextAlign),a.DrawVAlign>=0&&(0==a.DrawVAlign?n.Direction=1:1==a.DrawVAlign?n.Direction=0:2==a.DrawVAlign&&(n.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?n.TextAlign="left":1==a.DrawAlign?n.TextAlign="center":2==a.DrawAlign&&(n.TextAlign="right")),a.DrawFontSize>0&&(n.FixedFontSize=a.DrawFontSize),a.Background&&(n.TextBG=a.Background),t.ChartPaint.push(n)},this.CreateDrawNumber=function(t,e,a,i){var r=new zt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine);t.ChartPaint.push(r)},this.CreateDrawTextV2=function(t,e,a,i){var r=new Ut;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),a.Draw.DrawData&&(r.Data.Data=a.Draw.DrawData),r.Text=a.Draw.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine),ze.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),ze.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset);t.ChartPaint.push(r)},this.CreateMACD=function(t,e,a,i){var r=new qt;if(r.Canvas=t.Canvas,r.Identify=this.Guid,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data;var o=this.GetDefaultColor(i);a.Color&&(o=this.GetColor(a.Color)),a.UpColor&&(r.UpColor=a.UpColor),a.DownColor&&(r.DownColor=a.DownColor),this.ReloadChartResource(t,e,r),t.TitlePaint[s].Data[i]=new ya(r.Data,a.Name,o),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreatePointDot=function(t,e,a,i,r){var n=new Bt;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.Radius&&(n.Radius=a.Radius),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(n.Radius=s)}ze.IsBool(a.UpDownDot)&&(n.EnableUpDownColor=a.UpDownDot,n.HistoryData=r);var o=e+1;n.Data.Data=a.Data,t.TitlePaint[o].Data[i]=new ya(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateStick=function(t,e,a,i){var r=new _t;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data,this.ReloadChartResource(t,e,r),t.TitlePaint[s].Data[i]=new ya(r.Data,a.Name,r.Color),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateLineStick=function(t,e,a,i){var r=new kt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new ya(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateStraightLine=function(t,e,a,i){var r=new Ft;if(r.DrawType=1,r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData,"DRAWLINE"==a.Name&&(t.TitlePaint[s].Data[i]=new ya(r.Data,null,r.Color)),t.ChartPaint.push(r)},this.CreateVolStick=function(t,e,a,i,r){var n=new Gt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.KLineDrawType=t.KLineDrawType,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.UpColor&&(n.UpColor=a.UpColor),a.DownColor&&(n.DownColor=a.DownColor);var s=e+1;n.Data.Data=a.Data,n.HistoryData=r,this.ReloadChartResource(t,e,n),t.TitlePaint[s].Data[i]=new ya(n.Data,a.Name,n.Color),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateBand=function(t,e,a,i){var r=new ee;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.FirstColor=a.Draw.Color[0],r.SecondColor=a.Draw.Color[1],r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillRGN=function(t,e,a,i){var r=new ae;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),t.ChartPaint.push(r)},this.CreateFillRGN2=function(t,e,a,i){var r=new ie;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillBGRGN=function(t,e,a,i){var r=new ne;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFLOATRGN=function(t,e,a,i){var r=new re;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateKLine=function(t,e,a,i){var r=new St;r.Canvas=t.Canvas,r.Name=a.Name,r.Identify=this.Guid,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,r.IsShowMaxMinPrice=!1,r.IsShowKTooltip=!1,a.Color&&(r.UnchagneColor=r.DownColor=r.UpColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateDrawColorKLine=function(t,e,a,i){var r=new It;r.Canvas=t.Canvas,r.Name=a.Name,r.DrawName="DRAWCOLORKLINE",r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,ze.IsBool(a.Draw.IsEmptyBar)&&(r.IsEmptyBar=a.Draw.IsEmptyBar),a.Draw.Color&&(r.Color=a.Draw.Color),t.ChartPaint.push(r)},this.CreatePolyLine=function(t,e,a,i){var r=new Ft;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData,t.TitlePaint[s].Data[i]=new ya(r.Data," ",r.Color),t.ChartPaint.push(r)},this.CreateChartSlopeLine=function(t,e,a,i){var r=new Rt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData.Data,r.Option=a.Draw.DrawData.Option,t.TitlePaint[s].Data[i]=new ya(r.Data,null,r.Color),t.ChartPaint.push(r)},this.CreateChartVericaltLine=function(t,e,a,i){var r=new Vt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.SetChartLineDash=function(t,e){if(ze.IsNumber(e.LineType)){var a=e.LineType,i=I();switch(a){case 1:t.LineType=[10*i,10*i];break;case 2:t.LineType=[0,10*i],t.LineCap="square";break;case 3:t.LineType=[10*i,3*i,3*i,3*i];break;case 4:t.LineType=[10*i,3*i,3*i,3*i,3*i,3*i];break}}else if(ze.IsString(e.LineType)){for(var r=e.LineType.split(","),n=[],s=0;s<r.length;++s)n.push(parseInt(r[s]));t.LineType=n}},this.CreateChartHorizontalLine=function(t,e,a,i){var r=new Ht;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.ExtendType=a.Draw.DrawData.Extend,r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateBackgroud=function(t,e,a,i){var r=new oe;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,r.ColorAngle=n.Angle,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateBackgroundDiv=function(t,e,a,i){var r=new he;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.AryColor=n.AryColor,r.ColorType=n.ColorType,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateLineMultiData=function(t,e,a,i){var r=new Yt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,n.PointColor&&(r.PointColor=n.PointColor),ze.IsPlusNumber(n.PointRadius)&&(r.PointRadius=n.PointRadius),ze.IsPlusNumber(n.LineWidth)&&(r.LineWidth=n.LineWidth),n.Data&&(r.Data.Data=n.Data)}var s=e+1,o=new ya(r.Data,a.Name,r.Color);o.DataType="MULTI_POINT_LINE",t.TitlePaint[s].Data[i]=o,t.ChartPaint.push(r)},this.CreateTextLine=function(t,e,a,i){var r=new ue;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Text=n.Text,r.Line=n.Line,r.Price=n.Price}t.ChartPaint.push(r)},this.CreateNumberText=function(t,e,a,i){var r=new Wt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),r.TextAlign="center",a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=2,a.Draw.Position&&(r.Position=a.Draw.Position);r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,t.ChartPaint.push(r)},this.CreateDrawText=function(t,e,a,i){var r=new Wt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=0,a.DrawFontSize>0&&(r.TextFont="".concat(a.DrawFontSize*I(),"px 微软雅黑"));r.DrawData=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateIcon=function(t,e,a,i){var r=new Wt;r.Canvas=t.Canvas,r.TextAlign="center",r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Direction=2,a.IsDrawAbove&&(r.Direction=1),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.Direction=1:1==a.DrawVAlign?r.Direction=0:2==a.DrawVAlign&&(r.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right"));r.Data.Data=a.Draw.DrawData;var n=a.Draw.Icon;1==n.IconFont?(r.IconFont={Family:n.Family,Text:n.Symbol,Color:n.Color},a.Color&&(r.IconFont.Color=this.GetColor(a.Color))):(r.Text=n.Symbol,a.Color?r.Color=this.GetColor(a.Color):n.Color?r.Color=n.Color:r.Color="rgb(0,0,0)"),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),ze.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset),ze.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),t.ChartPaint.push(r)},this.CreateTipIcon=function(t,e,a,i){var r=new pe;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.Icon.Family,r.TextFont=xi.TIPICON.TextFont;var n=xi.TIPICON.Size,s=xi.TIPICON.Color,o=0,h=2;if(ze.IsNumber(a.YOffset)&&(o=a.YOffset),a.Color&&(s=this.GetColor(a.Color)),a.DrawFontSize>0&&(n=a.DrawFontSize),a.DrawVAlign>=0&&(h=a.DrawVAlign),a.Draw&&ze.IsNonEmptyArray(a.Draw.DrawData)&&a.Draw.Icon){var l=a.Draw.DrawData,u=[],c=Array.isArray(a.Draw.Text),d=null;!c&&a.Draw.Text&&(d={Text:a.Draw.Text});for(var f=0;f<l.length;++f){var C=l[f];if(ze.IsNumber(C)){var m={Index:f,Value:C,SVG:{Symbol:a.Draw.Icon.Symbol,Size:n,Color:s,YOffset:o,VAlign:h}};if(c){var D=a.Draw.Text[f];D&&(m.Tooltip={Text:D})}else m.Tooltip=d;u.push(m)}}r.Texts=u}t.ChartPaint.push(r)},this.CreateChannel=function(t,e,a,i){var r=new se;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw.AreaColor?r.AreaColor=a.Draw.AreaColor:a.Color?r.AreaColor=this.GetColor(a.Color):r.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?r.LineColor=a.Draw.Border.Color:r.LineColor=null,a.Draw.Border.Dotted&&(r.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(r.LineWidth=a.Draw.Border.Width),r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreatePartLine=function(t,e,a,i){var r=new Pt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));ze.IsPlusNumber(n)&&(r.LineWidth=n)}r.Data.Data=a.Draw.DrawData,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMultiLine=function(t,e,a,i){var r=new de;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Lines=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),a.Draw.LineDash&&(r.LineDash=a.Draw.LineDash),ze.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var n=a.Draw.Arrow;1==n.Start&&(r.Arrow.Start=!0),1==n.End&&(r.Arrow.End=!0),ze.IsNumber(n.Angle)&&(r.ArrawAngle=n.Angle),ze.IsNumber(n.Length)&&(r.ArrawLength=n.Length),ze.IsNumber(n.LineWidth)&&(r.ArrawLineWidth=n.LineWidth)}t.ChartPaint.push(r);var s=e+1,o=new ya(r.Data,r.Name,null);o.DataType="ChartMultiLine",o.Lines=r.Lines,t.TitlePaint[s].Data[i]=o},this.CreateMultiPoint=function(t,e,a,i){var r=new fe;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.PointGroup=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),t.ChartPaint.push(r);var n=e+1,s=new ya(r.Data,r.Name,null);s.DataType="ChartMultiPoint",s.PointGroup=r.PointGroup,t.TitlePaint[n].Data[i]=s},this.CreateMultiBar=function(t,e,a,i){var r=new ce;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Bars=a.Draw.DrawData;var n=e+1,s=new ya({KData:r.Data,BarData:r.Bars},a.Name,null);s.IsShow=!1,s.DataType="MULTI_BAR",t.TitlePaint[n].Data[i]=s,t.ChartPaint.push(r)},this.CreateMultiText=function(t,e,a,i){var r=new Ce;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=new me;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.DrawData.Family,r.Icon=a.Draw.DrawData.Icon,t.ChartPaint.push(r)},this.CreateChartDrawSVG=function(t,e,a,i){var r=new pe;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,ze.IsBool(a.Draw.DrawData.EnableTooltip)&&(r.EnableTooltip=a.Draw.DrawData.EnableTooltip),ze.IsBool(a.Draw.DrawData.IsDrawFirst)&&(r.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),r.Family=a.Draw.DrawData.Family,r.TextFont=a.Draw.DrawData.TextFont,r.Texts=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=new De;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,r.DrawCallback=a.Draw.Callback,t.ChartPaint.push(r)},this.CreateStackedBar=function(t,e,a,i){var r=new Se;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,ze.IsNonEmptyArray(a.Draw.BarColor)&&(r.BarColor=a.Draw.BarColor),ze.IsNonEmptyArray(a.Draw.BarName)&&(r.BarName=a.Draw.BarName),ze.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),ze.IsNumber(a.Draw.BarType)&&(r.BarType=a.Draw.BarType),t.ChartPaint.push(r);var n=e+1,s=new ya(r.Data,r.BarName,r.BarColor);s.DataType="ChartStackedBar",t.TitlePaint[n].Data[i]=s},this.CreateKLineTable=function(t,e,a,i){var r=new At;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,ze.IsNumber(a.Draw.RowCount)&&(r.RowCount=a.Draw.RowCount),ze.IsBool(a.Draw.IsShowRowName)&&(r.IsShowRowName=a.Draw.IsShowRowName),ze.IsNonEmptyArray(a.Draw.RowName)&&(r.RowName=a.Draw.RowName),a.Draw.BGColor&&(r.BGColor=a.Draw.BGColor),t.ChartPaint.push(r);var n=e+1,s=new ya(r.Data,r.BarName,r.BarColor);s.DataType="ChartKLineTable",t.TitlePaint[n].Data[i]=s},this.CreateScatterPlot=function(t,e,a,i){var r=new Lt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,r.Color=a.Draw.Color,r.Radius=a.Draw.Radius,t.ChartPaint.push(r)},this.CreateColorKLine=function(t,e,a,i){var r=new It;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.KLineColor=a.Draw.DrawData.KLine,a.Color&&(r.Color=a.Color),t.ChartPaint.push(r)},this.CreateRectangle=function(t,e,a,i){var r=new le;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Color=[a.Draw.DrawData.Color],r.Rect=a.Draw.DrawData.Rect,a.Color&&(r.BorderColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateScriptOverlayLine=function(t,e,a,i){var r=new Nt;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var s=e+1;r.Data.Data=a.Draw.DrawData.Data,r.MainData.Data=a.Draw.DrawData.MainData,a.Draw.DrawData.Title&&(t.TitlePaint[s].Data[i]=new ya(r.Data,a.Draw.DrawData.Title,r.Color)),t.ChartPaint.push(r)},this.CreateSelfKLine=function(t,e,a){var i=new St;i.Canvas=t.Canvas,i.Name="Self Kline",i.Identify=this.Guid,i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Data=a,i.IsShowMaxMinPrice=!1,i.IsShowKTooltip=!1,i.DrawType=this.KLineType,t.ChartPaint.push(i)},this.BindInstructionData=function(t,e,a){if(!(null==this.OutVar||this.OutVar.length<0)){var i="";for(var r in this.Arguments){var n=this.Arguments[r];i.length>0&&(i+=","),i+=n.Value.toString()}if(i.length>0&&(i="("+i+")"),2==this.InstructionType){var s=this.OutVar[this.OutVar.length-1];return t.SetInstructionData(this.InstructionType,{Data:s.Data,Name:this.Name,Param:i,ID:this.ID}),!0}if(1==this.InstructionType){var o,h;for(var l in this.OutVar){var u=this.OutVar[l];"ENTERLONG"==u.Name?o=u.Data:"EXITLONG"==u.Name&&(h=u.Data)}return t.SetInstructionData(this.InstructionType,{Buy:o,Sell:h,Name:this.Name,Param:i,ID:this.ID}),!0}}},this.BindData=function(t,e,a){if(0==e&&this.InstructionType)this.BindInstructionData(t,e,a);else if(t.DeleteIndexPaint(e),0==e&&t.ShowKLine(!0),!(null==this.OutVar||this.OutVar.length<0)){for(var i in null!=this.KLineType&&(0===this.KLineType||1===this.KLineType||2===this.KLineType?this.CreateSelfKLine(t,e,a):-1===this.KLineType&&0==e&&t.ShowKLine(!1)),e>=1&&t.Frame&&(t.Frame.SubFrame[e].Frame.YSplitOperator.FloatPrecision=this.FloatPrecision,this.YSpecificMaxMin&&(t.Frame.SubFrame[e].Frame.YSpecificMaxMin=this.YSpecificMaxMin),this.YSplitScale&&(t.Frame.SubFrame[e].Frame.YSplitScale=this.YSplitScale)),ze.IsNumber(this.YSplitType)&&(t.Frame.SubFrame[e].Frame.YSplitOperator.SplitType=this.YSplitType),this.OutVar){var r=this.OutVar[i];if(!0!==r.IsExData&&(1e3!=r.Type&&1001!=r.Type)){if(0==r.Type)r.IsOverlayLine?this.CreateOverlayLine(t,e,r,i,r.Type):this.CreateLine(t,e,r,i,r.Type);else if(1==r.Type)switch(r.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,r,i);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,r,i);break;case"SUPERDRAWTEXT":this.CreateText(t,e,r,i);break;case"DRAWLINE":this.CreateStraightLine(t,e,r,i);break;case"DRAWBAND":this.CreateBand(t,e,r,i);break;case"FILLRGN":this.CreateFillRGN(t,e,r,i);break;case"FILLRGN2":this.CreateFillRGN2(t,e,r,i);break;case"FILLTOPRGN":case"FILLBOTTOMRGN":case"FILLVERTICALRGN":this.CreateFillBGRGN(t,e,r,i);break;case"FLOATRGN":this.CreateFLOATRGN(t,e,r,i);break;case"DRAWKLINE":case"DRAWKLINE1":this.CreateKLine(t,e,r,i);break;case"DRAWCOLORKLINE":this.CreateDrawColorKLine(t,e,r,i);break;case"DRAWKLINE_IF":this.CreateKLine(t,e,r,i);break;case"POLYLINE":this.CreatePolyLine(t,e,r,i);break;case"DRAWGBK":case"DRAWGBK2":this.CreateBackgroud(t,e,r,i);break;case"DRAWGBK_DIV":this.CreateBackgroundDiv(t,e,r,i);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,r,i);break;case"DRAWNUMBER":this.CreateDrawNumber(t,e,r,i);break;case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,r,i);break;case"DRAWICON":this.CreateIcon(t,e,r,i);break;case"ICON":this.CreateIcon(t,e,r,i);break;case"TIPICON":this.CreateTipIcon(t,e,r,i);break;case"DRAWCHANNEL":this.CreateChannel(t,e,r,i);break;case"PARTLINE":this.CreatePartLine(t,e,r,i);break;case"DRAWRECTREL":this.CreateRectangle(t,e,r,i);break;case"DRAWTEXTABS":case"DRAWTEXTREL":this.CreateDrawText(t,e,r,i);break;case"DRAWOVERLAYLINE":this.CreateScriptOverlayLine(t,e,r,i);break;case"DRAWSL":this.CreateChartSlopeLine(t,e,r,i);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,r,i);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,r,i);break;case"MULTI_LINE":this.CreateMultiLine(t,e,r,i);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,r,i);break;case"MULTI_BAR":this.CreateMultiBar(t,e,r,i);break;case"MULTI_TEXT":this.CreateMultiText(t,e,r,i);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,r,i);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,r,i);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,r,i);break;case"COLOR_KLINE":this.CreateColorKLine(t,e,r,i);break;case"KLINE_BG":this.CreateBackgroud(t,e,r,i);break;case"MULTI_POINT_LINE":this.CreateLineMultiData(t,e,r,i);break;case cn.OVERLAY_BARS:this.CreateStackedBar(t,e,r,i);break;case cn.KLINE_TABLE:this.CreateKLineTable(t,e,r,i);break;case cn.SCATTER_PLOT:this.CreateScatterPlot(t,e,r,i);break;default:var n=dn.Get(r.Draw.DrawType);n&&n.CreateChartCallback&&n.CreateChartCallback(t,e,r,i,this);break}else 2==r.Type?this.CreateMACD(t,e,r,i):3==r.Type?this.CreatePointDot(t,e,r,i,a):4==r.Type?this.CreateLineStick(t,e,r,i):5==r.Type?this.CreateStick(t,e,r,i):6==r.Type?this.CreateVolStick(t,e,r,i,a):7==r.Type||8==r.Type?this.CreateLine(t,e,r,i,r.Type):9==r.Type&&this.CreateArea(t,e,r,i);var s=t.TitlePaint[e+1];s&&s.Data&&i<s.Data.length&&(this.StringFormat>0&&(s.Data[i].StringFormat=this.StringFormat),this.FloatPrecision>=0&&(s.Data[i].FloatPrecision=this.FloatPrecision),this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&s.SetDynamicTitle(this.OutName,this.Arguments))}}var o=e+1;if(t.TitlePaint[o].Title=this.Name,t.TitlePaint[o].Identify=this.Guid,t.TitlePaint[o].ArgumentsText=null,t.TitlePaint[o].Script=this,!this.IsShortTitle){for(var h="",l=0;l<this.Arguments.length;++l){var u=this.Arguments[l];h.length>0&&(h+=","),h+=u.Value.toString()}h.length>0&&(t.TitlePaint[o].ArgumentsText="(".concat(h,")"))}return this.TitleFont&&(t.TitlePaint[o].Font=this.TitleFont),!0}},this.GetDefaultColor=function(t){var e=null;xi&&xi.Index&&xi.Index.LineColor&&(e=xi.Index.LineColor),e&&Array.isArray(e)||(e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"]);var a=parseInt(t);return e[a%(e.length-1)]},this.GetColor=function(t){if(0==t.indexOf("RGB("))return t.toLowerCase();if(0==t.indexOf("rgb("))return t;if(0==t.indexOf("RGBA("))return t.toLowerCase();if(0==t.indexOf("rgba("))return t;var e=ln.ColorVarToRGB(t);return e||"rgb(30,144,255)"}}function Cn(t,e,a,i){this.newMethod=fn,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="OverlayScriptIndex",this.OverlayIndex=null,this.ShowConditionError=function(t,e){var a=t.HQChart,i=(t.WindowIndex,"指标不支持当前品种或周期");e&&(i=e);var r=this.OverlayIndex,n=r.Frame;n.ChartPaint=[];var s=new Ft;s.Canvas=a.Canvas,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.NotSupportMessage=i,n.ChartPaint.push(s),a.Draw()},this.BindData=function(t,e,a){if(this.OverlayIndex&&1==this.OverlayIndex.IsOverlay&&(this.OverlayIndex.Frame.ChartPaint=[],ze.IsNonEmptyArray(this.OutVar))){ze.IsNumber(this.YSplitType)&&(this.OverlayIndex.Frame.Frame.YSplitOperator.SplitType=this.YSplitType);var i={Data:[],Title:this.Name,Frame:this.OverlayIndex.Frame.Frame,Script:this},r="";for(var n in this.Arguments){var s=this.Arguments[n];r.length>0&&(r+=","),r+=s.Value.toString()}r.length>0&&(i.Title=this.Name+"("+r+")");var o=e+1,h=t.TitlePaint[o];h.OverlayIndex.set(this.OverlayIndex.Identify,i),this.OverlayIndex.Frame.Frame.Title=i.Title,this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&h.SetDynamicTitle(this.OutName,this.Arguments,this.OverlayIndex.Identify);for(n=0;n<this.OutVar.length;++n){var l=this.OutVar[n];if(!0!==l.IsExData){if(0==l.Type)this.CreateLine(t,e,l,n,l.Type);else if(1==l.Type)switch(l.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,l,n);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,l,n);break;case"SUPERDRAWTEXT":this.CreateText(t,e,l,n);break;case"DRAWLINE":this.CreateStraightLine(t,e,l,n);break;case"DRAWBAND":this.CreateBand(t,e,l,n);break;case"DRAWKLINE":this.CreateKLine(t,e,l,n);break;case"DRAWKLINE_IF":this.CreateKLine(t,e,l,n);break;case"POLYLINE":this.CreatePolyLine(t,e,l,n);break;case"DRAWNUMBER":case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,l,n);break;case"DRAWICON":this.CreateIcon(t,e,l,n);break;case"DRAWCHANNEL":this.CreateChannel(t,e,l,n);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,l,n);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,l,n);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,l,n);break;case"MULTI_LINE":this.CreateMultiLine(t,e,l,n);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,l,n);break;case"MULTI_BAR":this.CreateMultiBar(t,e,l,n);break;case"MULTI_TEXT":this.CreateMultiText(t,e,l,n);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,l,n);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,l,n);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,l,n);break;case"KLINE_BG":this.CreateBackgroud(t,e,l,n);break;case"PARTLINE":this.CreatePartLine(t,e,l,n);break;case cn.OVERLAY_BARS:this.CreateStackedBar(t,e,l,n);break;default:var u=dn.Get(l.Draw.DrawType);u&&u.CreateChartCallback&&u.CreateChartCallback(t,e,l,n,this);break}else 2==l.Type?this.CreateMACD(t,e,l,n):3==l.Type?this.CreatePointDot(t,e,l,n,a):4==l.Type?this.CreateLineStick(t,e,l,n):5==l.Type?this.CreateStick(t,e,l,n):6==l.Type?this.CreateVolStick(t,e,l,n,a):(7==l.Type||8==l.Type)&&this.CreateLine(t,e,l,n,l.Type);var c=i.Data[n];c&&this.FloatPrecision>=0&&(c.FloatPrecision=this.FloatPrecision)}}return!0}},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;e.Self.OutVar=t,e.Self.BindData(a,i,r),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw();var n=a.GetOverlayIndexEvent();if(n){var s=e.Self,o={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:r,Identify:s.OverlayIndex.Identify,Stock:{Symbol:a.Symbol,Name:a.Name}};n.Callback(n,o,s)}},this.ReloadChartResource=function(t,e,a){var i=t.GetEventCallback(C.ON_RELOAD_OVERLAY_INDEX_CHART_RESOURCE);if(i&&i.Callback){var r=this.OverlayIndex,n=r.Frame,s=n.Script,o={Chart:a,IndexName:s.Name,IndexID:s.ID,HQChart:t,WindowIndex:e,Guid:r.Identify};i.Callback(i,o,this)}},this.CreateLine=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame;if(7==r)var o=new Ot;else o=new Ft;if(o.Canvas=t.Canvas,o.DrawType=1,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),8==r&&(o.DrawType=2,o.BreakPoint=a.BreakPoint),a.LineWidth){var h=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(h)&&h>0&&(o.LineWidth=h)}0==a.IsShow&&(o.IsShow=!1),o.Data.Data=a.Data,this.ReloadChartResource(t,e,o);var l=e+1,u=t.TitlePaint[l],c=new ya(o.Data,a.Name,o.Color);c.ChartClassName=o.ClassName,u.OverlayIndex.get(n.Identify).Data[i]=c,this.SetChartIndexName(o),s.ChartPaint.push(o)},this.CreateBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Xt;s.Canvas=t.Canvas,a.Draw.Width>0?s.Width=a.Draw.Width:s.Width=1,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);s.Data.Data=a.Draw.DrawData,this.SetChartIndexName(s),n.ChartPaint.push(s)},this.CreateDrawTextV2=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ut;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.ReloadResource(),a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(s.TextAlign="center"),!0===a.IsDrawAbove&&(s.TextBaseline="bottom"),!0===a.IsDrawBelow&&(s.TextBaseline="top"),a.Draw.DrawData&&(s.Data.Data=a.Draw.DrawData),s.Text=a.Draw.Text,a.Draw.Direction>0&&(s.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(s.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(s.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?s.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(s.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?s.TextBaseline="top":1==a.DrawVAlign?s.TextBaseline="middle":2==a.DrawVAlign&&(s.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?s.TextAlign="left":1==a.DrawAlign?s.TextAlign="center":2==a.DrawAlign&&(s.TextAlign="right")),a.DrawFontSize>0&&(s.FixedFontSize=a.DrawFontSize),a.Background&&(s.TextBG=a.Background),a.VerticalLine&&(s.VerticalLine=a.VerticalLine),ze.IsNumber(a.XOffset)&&(s.ShowOffset.X=a.XOffset),ze.IsNumber(a.YOffset)&&(s.ShowOffset.Y=a.YOffset),n.ChartPaint.push(s)},this.CreateText=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame,o=new Wt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,o.ReloadResource(),a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);a.Draw.Position&&(o.Position=a.Draw.Position),a.Draw.DrawData&&(o.Data.Data=a.Draw.DrawData),o.Text=a.Draw.Text,a.Draw.Direction>0&&(o.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(o.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(o.TextAlign=a.Draw.TextAlign),s.ChartPaint.push(o)},this.CreateMACD=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new qt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify;var o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o],l=this.GetDefaultColor(i);a.Color&&(l=this.GetColor(a.Color)),a.UpColor&&(s.UpColor=a.UpColor),a.DownColor&&(s.DownColor=a.DownColor),this.ReloadChartResource(t,e,s),h.OverlayIndex.get(r.Identify).Data[i]=new ya(s.Data,a.Name,l),n.ChartPaint.push(s)},this.CreatePointDot=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame,o=new Bt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.Radius&&(o.Radius=a.Radius),a.LineWidth){var h=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(h)&&h>0&&(o.Radius=h)}ze.IsBool(a.UpDownDot)&&(o.EnableUpDownColor=a.UpDownDot,o.HistoryData=r);var l=e+1;o.Data.Data=a.Data;var u=t.TitlePaint[l];u.OverlayIndex.get(n.Identify).Data[i]=new ya(o.Data,a.Name,o.Color),s.ChartPaint.push(o)},this.CreateStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new _t;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Data,this.ReloadChartResource(t,e,s);var l=t.TitlePaint[h];l.OverlayIndex.get(r.Identify).Data[i]=new ya(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateLineStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new kt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Data;var l=t.TitlePaint[h];l.OverlayIndex.get(r.Identify).Data[i]=new ya(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateStraightLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ft;if(s.DrawType=1,s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateVolStick=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame,o=new Gt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,o.KLineDrawType=t.KLineDrawType,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.UpColor&&(o.UpColor=a.UpColor),a.DownColor&&(o.DownColor=a.DownColor);var h=e+1;o.Data.Data=a.Data,o.HistoryData=r,this.ReloadChartResource(t,e,o);var l=t.TitlePaint[h];l.OverlayIndex.get(n.Identify).Data[i]=new ya(o.Data,a.Name,o.Color),this.SetChartIndexName(o),s.ChartPaint.push(o)},this.CreateBand=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new ee;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.FirstColor=a.Draw.Color[0],s.SecondColor=a.Draw.Color[1],s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateKLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new St;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data.Data=a.Draw.DrawData,s.IsShowMaxMinPrice=!1,s.IsShowKTooltip=!1,a.Color&&(s.UnchagneColor=s.DownColor=s.UpColor=this.GetColor(a.Color)),n.ChartPaint.push(s)},this.CreatePolyLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ft;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Draw.DrawData;var l=t.TitlePaint[h];l.OverlayIndex.get(r.Identify).Data[i]=new ya(line.Data," ",line.Color),n.ChartPaint.push(s)},this.CreateNumberText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Wt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.ReloadResource(),s.TextAlign="center",a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.IsDrawAbove?s.Direction=1:s.Direction=2,a.Draw.Position&&(s.Position=a.Draw.Position);s.Data.Data=a.Draw.DrawData.Value,s.Text=a.Draw.DrawData.Text,n.ChartPaint.push(s)},this.CreateTextLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new ue;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,a.Draw&&a.Draw.DrawData){var o=a.Draw.DrawData;s.Text=o.Text,s.Line=o.Line,s.Price=o.Price}n.ChartPaint.push(s)},this.CreateStackedBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Se;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,ze.IsNonEmptyArray(a.Draw.BarColor)&&(s.BarColor=a.Draw.BarColor),ze.IsNonEmptyArray(a.Draw.BarName)&&(s.BarName=a.Draw.BarName),ze.IsNumber(a.Draw.LineWidth)&&(s.LineWidth=a.Draw.LineWidth),ze.IsNumber(a.Draw.BarType)&&(s.BarType=a.Draw.BarType),s.Data.Data=a.Draw.DrawData;var o=e+1,h=t.TitlePaint[o],l=new ya(s.Data,s.BarName,s.BarColor);l.DataType="ChartStackedBar",h.OverlayIndex.get(r.Identify).Data[i]=l,n.ChartPaint.push(s)},this.CreateIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Wt;s.Canvas=t.Canvas,s.TextAlign="center",s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.DrawVAlign>=0&&(0==a.DrawVAlign?s.Direction=1:1==a.DrawVAlign?s.Direction=0:2==a.DrawVAlign&&(s.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?s.TextAlign="left":1==a.DrawAlign?s.TextAlign="center":2==a.DrawAlign&&(s.TextAlign="right")),ze.IsNumber(a.XOffset)&&(s.ShowOffset.X=a.XOffset),ze.IsNumber(a.YOffset)&&(s.ShowOffset.Y=a.YOffset),s.Data.Data=a.Draw.DrawData;var o=a.Draw.Icon;1==o.IconFont?s.IconFont={Family:o.Family,Text:o.Symbol,Color:o.Color}:(s.Text=o.Symbol,a.Color?s.Color=this.GetColor(a.Color):o.Color?s.Color=o.Color:s.Color="rgb(0,0,0)"),n.ChartPaint.push(s)},this.CreateChannel=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new se;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Draw.AreaColor?s.AreaColor=a.Draw.AreaColor:a.Color?s.AreaColor=this.GetColor(a.Color):s.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?s.LineColor=a.Draw.Border.Color:s.LineColor=null,a.Draw.Border.Dotted&&(s.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(s.LineWidth=a.Draw.Border.Width),s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreatePartLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Pt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));ze.IsPlusNumber(o)&&(s.LineWidth=o)}s.Data.Data=a.Draw.DrawData,this.SetChartIndexName(s),n.ChartPaint.push(s)},this.CreateMultiLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new de;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Lines=a.Draw.DrawData,a.Draw.LineDash&&(s.LineDash=a.Draw.LineDash),ze.IsNumber(a.Draw.LineWidth)&&(s.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var o=a.Draw.Arrow;1==o.Start&&(s.Arrow.Start=!0),1==o.End&&(s.Arrow.End=!0),ze.IsNumber(o.Angle)&&(s.ArrawAngle=o.Angle),ze.IsNumber(o.Length)&&(s.ArrawLength=o.Length),ze.IsNumber(o.LineWidth)&&(s.ArrawLineWidth=o.LineWidth)}n.ChartPaint.push(s)},this.CreateMultiPoint=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new fe;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.PointGroup=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateBackgroud=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new oe;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Draw&&a.Draw.DrawData){var o=a.Draw.DrawData;s.Color=o.Color,s.ColorAngle=o.Angle,o.Data&&(s.Data.Data=o.Data)}n.ChartPaint.push(s)},this.CreateMultiBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new ce;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Bars=a.Draw.DrawData;var o=e+1,h=t.TitlePaint[o],l=new ya({KData:s.Data,BarData:s.Bars},a.Name,null);l.IsShow=!1,l.DataType="MULTI_BAR",h.OverlayIndex.get(r.Identify).Data[i]=l,n.ChartPaint.push(s)},this.CreateMultiText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ce;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Texts=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new me;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Family=a.Draw.DrawData.Family,s.Icon=a.Draw.DrawData.Icon,n.ChartPaint.push(s)},this.CreateChartDrawSVG=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new pe;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,t.ChartPaint[0].IsMinuteFrame()?s.Data=t.SourceData:s.Data=t.ChartPaint[0].Data,ze.IsBool(a.Draw.DrawData.EnableTooltip)&&(s.EnableTooltip=a.Draw.DrawData.EnableTooltip),ze.IsBool(a.Draw.DrawData.IsDrawFirst)&&(s.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),s.Family=a.Draw.DrawData.Family,s.TextFont=a.Draw.DrawData.TextFont,s.Texts=a.Draw.DrawData.Data,n.ChartPaint.push(s)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new De;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,s.Data=t.ChartPaint[0].Data,s.Texts=a.Draw.DrawData,s.DrawCallback=a.Draw.Callback,n.ChartPaint.push(s)},this.CreateChartVericaltLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Vt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}this.SetChartLineDash(s,a.Draw.DrawData),s.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(s)},this.CreateChartHorizontalLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ht;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}this.SetChartLineDash(s,a.Draw.DrawData),s.ExtendType=a.Draw.DrawData.Extend,s.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(s)},this.CreateSelfKLine=function(t,e,a){var i=this.OverlayIndex,r=i.Frame,n=new St;n.Canvas=t.Canvas,n.Name="Self Kline",n.ChartBorder=r.Frame.ChartBorder,n.ChartFrame=r.Frame,n.Identify=i.Identify,n.Data=a,n.IsShowMaxMinPrice=!1,n.IsShowKTooltip=!1,n.DrawType=this.KLineType,r.ChartPaint.push(n)},this.GetDefaultColor=function(t){var e=["rgb(24,71,178)","rgb(42,230,215)","rgb(252,96,154)","rgb(0,128,255)","rgb(229,0,79)","rgb(68,114,196)","rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)"],a=parseInt(t);return e[a%(e.length-1)]}}function mn(t,e,a,i,r){this.newMethod=r?Cn:fn,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="APIScriptIndex",this.IsOverlayIndex=1==r,this.ApiUrl,this.HQDataType,this.Version=1,i&&i.API&&(i.API.Url&&(this.ApiUrl=i.API.Url),i.API.Name&&(this.Name=this.ID=i.API.Name),i.API.ID&&(this.ID=i.API.ID),i.API.Version>0&&(this.Version=i.API.Version),!0===i.API.IsUsePageData&&(this.IsUsePageData=i.API.IsUsePageData)),this.Super_CopyTo=this.CopyTo,this.CopyTo=function(t){this.Super_CopyTo(t),t.ApiUrl=this.ApiUrl,t.Version=this.Version,t.IsOverlayIndex=this.IsOverlayIndex},this.RecvSubscribeData=function(t,e,a,i){2==this.Version?this.RecvAPIData2(t,e,a,i):this.RecvAPIData(t,e,a,i)},this.ExecuteScript=function(t,e,a){l.Complier.Log("[APIScriptIndex::ExecuteScript] name, Arguments ",this.Name,this.Arguments);var i=un.KLINE_ID,r=null;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?(i=t.DayCount>1?un.MULTIDAY_MINUTE_ID:un.MINUTE_ID,r=a.GetDateRange()):"HistoryMinuteChartContainer"===t.ClassName?i=un.HISTORY_MINUTE_ID:r=a.GetDateRange();var n,s=[];if(this.Arguments)for(var o in this.Arguments){var h=this.Arguments[o];s.push({name:h.Name,value:h.Value})}t.GetRequestDataCount&&(n=t.GetRequestDataCount());var u=this,c={indexname:this.ID,symbol:t.Symbol,script:this.Script,args:s,period:t.Period,right:t.Right,hqdatatype:i};if(r&&(c.DateRange=r),n&&(c.maxdatacount=n.MaxRequestDataCount,c.maxminutedaycount=n.MaxRequestMinuteDayCount),i!=un.MULTIDAY_MINUTE_ID&&i!=un.MINUTE_ID||(c.daycount=t.DayCount),this.HQDataType=i,t.NetworkFilter){var d={Name:"APIScriptIndex::ExecuteScript",Explain:"指标计算",Request:{Url:u.ApiUrl,Type:"POST",Data:c},Self:this,HQChart:t,PreventDefault:!1};if(t.NetworkFilter(d,(function(i){2==u.Version?u.RecvAPIData2(i,t,e,a):u.RecvAPIData(i,t,e,a)})),1==d.PreventDefault)return}$n.HttpRequest({url:u.ApiUrl,data:c,type:"post",dataType:"json",async:!0,success:function(i){u.RecvAPIData(i,t,e,a)},error:function(t){u.RecvError(t)}})},this.RecvAPIData2=function(t,e,a,i){if(l.Complier.Log("[APIScriptIndex::RecvAPIData2] recv data ",this.Name,t),(this.HQDataType==un.KLINE_ID||this.HQDataType==un.MINUTE_ID||this.HQDataType==un.MULTIDAY_MINUTE_ID)&&(this.OutVar=this.ConvertToLocalData(t,e),l.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)),this.BindData(e,a,i),e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var r=e.GetIndexEvent();if(r){t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};r.Callback(r,t,this)}}},this.ConvertToLocalData=function(t,e){var a=t.OutVar;if("MinuteChartContainer"==e.ClassName||"MinuteChartHScreenContainer"==e.ClassName)var i=e.SourceData,r=i.GetAPIDataIndex(t.Date,t.Time);else{i=e.ChartPaint[0].Data;if(ut.IsDayPeriod(t.Period,!0))r=i.GetAPIDataIndex(t.Date);else r=i.GetAPIDataIndex(t.Date,t.Time)}var n=[];for(var s in a){var o=a[s],h={Type:o.Type,Name:o.Name};if(0==o.Type){h.Data=[];for(var l=0;l<r.length;++l){var u=r[l];u.Index<0?h.Data[l]=null:h.Data[l]=o.Data[u.Index]}h.Name&&h.Name.indexOf("@NODRAW@")>=0&&(h.Name=h.Name.replace("@NODRAW@",""))}else{if(1!=o.Type)continue;h.Name=o.DrawType,h.Draw={DrawType:o.DrawType};var c=o.Draw;switch(o.DrawType){case"STICKLINE":var d=[];for(l=0;l<r.length;++l){d[l]=null;u=r[l];var f=u.Index;if(!(f<0)){var C=c.Price[f],m=c.Price2[f];ze.IsNumber(C)&&ze.IsNumber(m)&&(d[l]={Value:C,Value2:m})}}h.Draw.DrawData=d,h.Draw.Width=c.Width,h.Draw.Type=c.Empty;break;case"DRAWTEXT":d=[];var D=[];for(l=0;l<r.length;++l){d[l]=null;u=r[l],f=u.Index;if(!(f<0)){C=c.Price[f];if(ze.IsNumber(C)&&(d[l]=C),Array.isArray(c.Text)){o=c.Text[f];ze.IsString(o)&&(D[l]=o)}}}Array.isArray(c.Text)?h.Draw.Text=D:h.Draw.Text=c.Text,h.Draw.DrawData=d;break;case"DRAWNUMBER":for(d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=null,d.Text[l]=null;u=r[l],f=u.Index;if(!(f<0)){C=c.Price[f];var p=c.Number[f];ze.IsNumber(C)&&ze.IsNumber(p)&&(d.Value[l]=C,d.Text[l]=p.toFixed(2))}}h.Draw.DrawData=d;break;case"DRAWBAND":for(d=[],l=0;l<r.length;++l){d[l]=null;u=r[l],f=u.Index;if(!(f<0)){C=c.Val1[f],m=c.Val2[f];ze.IsNumber(C)&&ze.IsNumber(m)&&(d[l]={Value:C,Value2:m})}}h.Draw.DrawData=d,h.Draw.Color=[null,null],c.Color1&&(h.Draw.Color[0]=c.Color1.toLowerCase()),c.Color2&&(h.Draw.Color[1]=c.Color2.toLowerCase());break;case"DRAWKLINE":for(d=[],l=0;l<r.length;++l){o={Open:null,High:null,Low:null,Close:null};d[l]=o;u=r[l],f=u.Index;if(!(f<0)){var v=c.High[f],g=c.Low[f],S=c.Open[f],I=c.Close[f];ze.IsPlusNumber(v)&&ze.IsPlusNumber(g)&&ze.IsPlusNumber(S)&&ze.IsPlusNumber(I)&&(o.Open=S,o.Close=I,o.High=v,o.Low=g)}}h.Draw.DrawData=d;break;case"DRAWTEXT_FIX":for(d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=0,d.Text[l]=null;u=r[l],f=u.Index;if(!(f<0)){var T=c.Cond[f];T&&(d.Value[l]=1,d.Text[l]=c.Text)}}h.Draw.DrawData=d,h.Draw.Position={X:c.X,Y:c.Y,Type:c.Type};break;case"DRAWNUMBER_FIX":for(d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=null,d.Text[l]=null;u=r[l],f=u.Index;if(!(f<0)){var x=c.Number[f];ze.IsNumber(x)&&(d.Value[l]=x,d.Text[l]=ze.RemoveZero(x.toFixed(2)))}}h.Draw.DrawData=d,h.Draw.Position={X:c.X,Y:c.Y,Type:c.Type};break;case"DRAWICON":var y=Xr.GetDrawIcon(c.Type);y||Xr.GetDrawTextIcon(c.Type),y||(y={Symbol:"??"}),h.Draw.Icon=y;for(d=[],l=0;l<r.length;++l){d[l]=null;u=r[l],f=u.Index;if(!(f<0)){x=c.Price[f];ze.IsNumber(x)&&(d[l]=x)}}h.Draw.DrawData=d;break;case"PARTLINE":for(d=[],l=0;l<r.length;++l){d[l]={Value:null,RGB:null};u=r[l],f=u.Index;if(!(f<0)){var A=c.Color[f];if(ze.IsString(A)){x=c.Price[f];ze.IsNumber(x)&&(d[l].Value=x,d[l].RGB=A)}}}h.Draw.DrawData=d;break;case"FILLRGN":for(d=[],l=0;l<r.length;++l){d[l]=null;u=r[l],f=u.Index;if(!(f<0)){A=c.Color[f];if(ze.IsString(A)){x=c.Price[f];if(ze.IsNumber(x)){var b=c.Price2[f];ze.IsNumber(b)&&(d[l]={Value:x,Value2:b,Color:A})}}}}h.Draw.DrawData=d,h.Draw.DrawType="FILLRGN2";break;default:continue}}for(var s in o.Attribute){var w=o.Attribute[s];switch(w){case"COLORSTICK":h.Type=2;break;case"POINTDOT":h.Radius=xi.POINTDOT.Radius,h.Type=3;break;case"CIRCLEDOT":h.Radius=xi.CIRCLEDOT.Radius,h.Type=3;break;case"DOTLINE":h.IsDotLine=!0;break;case"DRAWABOVE":h.IsDrawAbove=!0;break;case"LINESTICK":h.Type=4;break;case"STICK":h.Type=5;break;case"VOLSTICK":h.Type=6;break;case"LINEAREA":h.Type=9;break;case"NODRAW":h.IsShow=!1;break;case"NONE_OUT_NAME":h.NoneName=!0;break;case"NOTEXT":h.IsShowTitle=!1;break}0==w.indexOf("COLOR")?h.Color=w:0==w.indexOf("LINETHICK")&&(h.LineWidth=w)}n.push(h)}return n},this.RecvAPIData=function(t,e,a,i){if(l.Complier.Log("[APIScriptIndex::RecvAPIData] recv data ",this.Name,t),0==t.code)if(!e.EnableVerifyRecvData||t.stock&&e.Symbol==t.stock.symbol)if(t.error&&ze.IsString(t.error.message)){var r={HQChart:e,WindowIndex:a,HistoryData:i,Self:this};this.ShowConditionError(r,t.error.message)}else{if(t.outdata&&t.outdata.name&&(this.Name=t.outdata.name),t.outdata.args)for(var n in this.Arguments=[],t.outdata.args){var s=t.outdata.args[n];this.Arguments.push({Name:s.name,Value:s.value})}if(this.HQDataType==un.KLINE_ID?(this.OutVar=this.FittingData(t.outdata,e),l.Complier.Log("[APIScriptIndex::RecvAPIData] conver to OutVar ",this.OutVar)):this.OutVar=this.FittingMinuteData(t.outdata,e),this.BindData(e,a,i),0==this.IsLocked)e.Frame.SubFrame[a].Frame.SetLock(null);else{var o={IsLocked:!0,Callback:this.LockCallback,IndexName:this.Name,ID:this.LockID,BG:this.LockBG,Text:this.LockText,TextColor:this.LockTextColor,Font:this.LockFont,Count:this.LockCount,MinWidth:this.LockMinWidth};e.Frame.SubFrame[a].Frame.SetLock(o)}if(e.UpdataDataoffset(),e.UpdateFrameMaxMin(),!1===t.Redraw||e.Draw(),e.GetIndexEvent){var h=e.GetIndexEvent();if(h){t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};h.Callback(h,t,this)}}}else l.Chart.Warn("[APIScriptIndex::RecvAPIData] recv data symbol not match. HQChart[".concat(e.Symbol,"]"))},this.FittingArray=function(t,e,a,i,r){var n,s=i.ChartPaint[0].Data,o=[];for(var h in t){var l=t[h],u=new st;u.Date=e[h],a&&h<a.length&&(u.Time=a[h]),u.Value=l,o.push(u)}n=ut.IsDayPeriod(i.Period,!0)?s.GetFittingData(o):s.GetMinuteFittingData(o);var c,d=new ut;return d.Data=n,c=1==r?d.GetObject():d.GetValue(),c},this.FittingMultiLine=function(t,e,a,i){var r=i.ChartPaint[0].Data;if(ut.IsDayPeriod(i.Period,!0)){r=i.ChartPaint[0].Data;var n=[];for(var s in t){var o=t[s];for(var h in o.Point){var l=o.Point[h];n.push(l)}}return n.sort((function(t,e){return t.Date-e.Date})),r.GetDateIndex(n),t}if(ut.IsMinutePeriod(i.Period,!0)||ut.IsTickPeriod(i.Period)||ut.IsSecondPeriod(i.Period)){r=i.ChartPaint[0].Data,n=[];for(var s in t){o=t[s];for(var h in o.Point){l=o.Point[h];n.push(l)}}return n.sort((function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date})),r.GetDateTimeIndex(n),t}if(this.HQDataType==un.MINUTE_ID||this.HQDataType==un.MULTIDAY_MINUTE_ID){var u=i.SourceData;n=[];for(var s in t){o=t[s];for(var h in o.Point){l=o.Point[h];n.push(l)}}return n.sort((function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date})),u.GetDateTimeIndex(n),t}return null},this.FittingMultiText=function(t,e,a,i){if(ut.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data;return t.sort((function(t,e){return t.Date-e.Date})),r.GetDateIndex(t),t}if(ut.IsMinutePeriod(i.Period,!0)||ut.IsTickPeriod(i.Period)||ut.IsSecondPeriod(i.Period)){r=i.ChartPaint[0].Data;return t.sort((function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date})),r.GetDateTimeIndex(t),t}if(this.HQDataType==un.MINUTE_ID||this.HQDataType==un.MULTIDAY_MINUTE_ID){var n=i.SourceData;return t.sort((function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date})),n.GetDateTimeIndex(t),t}return null},this.FittingData=function(t,e){var a=t.outvar,i=t.date,r=t.time,n=(e.ChartPaint[0].Data,[]);if(!a)return n;for(var s=0;s<a.length;++s){var o=a[s],h={Name:o.name,Type:o.type};if(o.color&&(h.Color=o.color),o.data)h.Data=this.FittingArray(o.data,i,r,e),o.color&&(h.Color=o.color),o.linewidth&&(h.LineWidth=o.linewidth),0==o.isshow&&(h.IsShow=!1),1==o.isexdata&&(h.IsExData=!0),o.BreakPoint&&(h.BreakPoint=o.BreakPoint),n.push(h);else if(o.Draw){var l=o.Draw,u={};if("DRAWICON"==l.DrawType)u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("DRAWTEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("STICKLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if("DRAWBAND"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),u.Color=l.Color,h.Draw=u,n.push(h);else if("MULTI_LINE"==l.DrawType){if(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),ze.IsNonEmptyArray(u.DrawData))for(var c=0;c<u.DrawData.length;++c)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,l.LineDash&&(u.LineDash=l.LineDash),l.Arrow&&(u.Arrow=l.Arrow),ze.IsNumber(l.LineWidth)&&(u.LineWidth=l.LineWidth),n.push(h)}else if("MULTI_POINT"==l.DrawType){if(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),ze.IsNonEmptyArray(u.DrawData))for(c=0;c<u.DrawData.length;++c)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,n.push(h)}else if("MULTI_BAR"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if(l.DrawType==cn.OVERLAY_BARS)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.BarName=l.BarName,u.BarColor=l.BarColor,u.LineWidth=l.LineWidth,u.BarType=l.BarType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if(l.DrawType==cn.SCATTER_PLOT)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),u.Color=l.Color,u.Radius=l.Radius,h.Draw=u,n.push(h);else if(l.DrawType==cn.KLINE_TABLE)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),u.RowCount=l.RowCount,u.RowName=l.RowName,u.IsShowRowName=l.IsShowRowName,u.BGColor=l.BGColor,h.Draw=u,n.push(h);else if("MULTI_TEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("MULTI_SVGICON"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,r,e),Family:l.DrawData.Family},this.GetKLineData(u.DrawData.Icon,e),h.Draw=u,n.push(h);else if("DRAWSVG"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Data:this.FittingMultiText(l.Data,i,r,e),Family:l.Family,TextFont:l.TextFont,EnableTooltip:l.EnableTooltip,IsDrawFirst:l.IsDrawFirst},this.GetKLineData(u.DrawData.Data,e),h.Draw=u,n.push(h);else if("MULTI_HTMLDOM"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.Callback=l.Callback,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("COLOR_KLINE"==l.DrawType){u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType;var d=this.FittingMultiText(l.DrawData.KLine,i,r,e),f=new Map;for(var s in d){o=d[s];f.set(o.Index,o)}u.DrawData={KLine:f},l.Color&&(h.Color=l.Color),h.Draw=u,n.push(h)}else if("KLINE_BG"==l.DrawType)u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={},u.DrawData.Color=l.Color,u.DrawData.Angle=l.Angle,2==l.Ver?u.DrawData.Data=this.FittingKLineBG_V2(l.DrawData,e):u.DrawData.Data=this.FittingKLineBG(l.DrawData,e),h.Draw=u,h.Name=l.DrawType,n.push(h);else if("MULTI_POINT_LINE"==l.DrawType)u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={},u.DrawData.Color=l.Color,u.DrawData.PointRadius=l.PointRadius,u.DrawData.PointColor=l.PointColor,u.DrawData.LineWidth=l.LineWidth,u.DrawData.Data=this.FittingMultiPointLine(l.DrawData,e),h.Draw=u,n.push(h);else if("PARTLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),h.Draw=u,l.LineWidth&&(h.LineWidth=l.LineWidth),n.push(h);else{var C=dn.Get(l.DrawType);C&&C.KLineFittingCallback&&C.KLineFittingCallback(o,h,{Date:i,Time:r,HQChart:e},this)&&n.push(h)}}}return n},this.GetKLineData=function(t,e){if(t&&Array.isArray(t)){if(this.HQDataType==un.MINUTE_ID||this.HQDataType==un.MULTIDAY_MINUTE_ID)var a=e.SourceData;else a=e.ChartPaint[0].Data;for(var i in t){var r=t[i];if(ze.IsString(r.Value)&&(ze.IsNumber(r.Index)&&!(r.Index<0||r.Index>=a.Data.length))){var n=r.Value.toUpperCase(),s=a.Data[r.Index];switch(n){case"HIGH":case"H":r.Value=s.High;break;case"L":case"LOW":r.Value=s.Low;break;case"C":case"CLOSE":r.Value=s.Close;break}}}}},this.FittingKLineBG=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(ut.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,s=0;n<a.Data.length;){i[n]=0;var o=a.Data[n];if(s>=t.length)++n;else{var h=t[s];h.Date<o.Date?++s:(h.Date>o.Date||(r=!0,i[n]=1,++s),++n)}}if(r)return i}else if(ut.IsMinutePeriod(e.Period,!0)){for(r=!1,n=0,s=0;n<a.Data.length;){i[n]=0;o=a.Data[n];if(s>=t.length)++n;else{h=t[s];h.Date<o.Date||h.Date==o.Date&&h.Time<o.Time?++s:(h.Date>o.Date||h.Date==o.Date&&h.Time>o.Time||(r=!0,i[n]=1,++s),++n)}}if(r)return i}return null},this.FittingKLineBG_V2=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(ut.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,s=0;n<a.Data.length;++n){i[n]=0;var o=a.Data[n],h=o.Date;for(s=0;s<t.length;++s){var l=t[s];if(h>=l.Start.Date&&h<=l.End.Date){i[n]=1,r=!0;break}}}if(r)return i}else if(ut.IsMinutePeriod(e.Period,!0)){var u=[];for(n=0;n<t.length;++n){var c=t[n],d=1e4*c.Start.Date;ze.IsNumber(c.Start.Time)&&(d+=c.Start.Time);var f=1e4*c.End.Date;ze.IsNumber(c.End.Time)&&(f+=c.End.Time),u.push({Start:d,End:f})}for(r=!1,n=0,s=0;n<a.Data.length;++n){i[n]=0;o=a.Data[n],h=1e4*o.Date+o.Time;for(s=0;s<u.length;++s){l=u[s];if(h>=l.Start&&h<=l.End){i[n]=1,r=!0;break}}}if(r)return i}return null},this.FittingMinuteData=function(t,e){for(var a=t.outvar,i=t.date,r=t.time,n=[],s=0;s<a.length;++s){var o=a[s],h={Name:o.name,Type:o.type};if(o.data)h.Data=this.FittingMinuteArray(o.data,i,r,e),o.color&&(h.Color=o.color),o.linewidth>=1&&(h.LineWidth=o.linewidth),0==o.isshow&&(h.IsShow=!1),1==o.isexdata&&(h.IsExData=!0),o.BreakPoint&&(h.BreakPoint=o.BreakPoint),n.push(h);else if(o.Draw){var l=o.Draw,u={};if("DRAWICON"==l.DrawType)u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("DRAWTEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("STICKLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if(l.DrawType==cn.OVERLAY_BARS)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.BarName=l.BarName,u.BarColor=l.BarColor,u.LineWidth=l.LineWidth,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if("MULTI_LINE"==l.DrawType){for(var c in u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),u.DrawData)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,l.LineDash&&(u.LineDash=l.LineDash),l.Arrow&&(u.Arrow=l.Arrow),n.push(h)}else if("MULTI_POINT"==l.DrawType){if(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),ze.IsNonEmptyArray(u.DrawData))for(c=0;c<u.DrawData.length;++c)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,n.push(h)}else if("MULTI_TEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("MULTI_SVGICON"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,r,e),Family:l.DrawData.Family},this.GetKLineData(u.DrawData.Icon,e),h.Draw=u,n.push(h);else if("DRAWSVG"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Data:this.FittingMultiText(l.Data,i,r,e),Family:l.Family,TextFont:l.TextFont,EnableTooltip:l.EnableTooltip,IsDrawFirst:l.IsDrawFirst},this.GetKLineData(u.DrawData.Data,e),h.Draw=u,n.push(h);else if("MULTI_HTMLDOM"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.Callback=l.Callback,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else{var d=dn.Get(l.DrawType);d&&d.MinuteFittingCallback&&d.MinuteFittingCallback(o,h,{Date:i,Time:r,HQChart:e},this)&&n.push(h)}}}return n},this.FittingMinuteArray=function(t,e,a,i,r){var n,s=i.SourceData,o=[];for(var h in t){var l=t[h],u=new st;u.Date=e[h],a&&h<a.length&&(u.Time=a[h]),u.Value=l,o.push(u)}n=5==r?s.GetMinuteFittingDataV2(o):s.GetMinuteFittingData(o);var c=new ut;c.Data=n;var d=c.GetValue();return d},this.FittingMultiPointLine=function(t,e){var a=e.Period,i=t.Data,r=[];if(ut.IsDayPeriod(a,!0)){var n=i[0],s=e.ChartPaint[0].Data,o=s.Data[0],h=0,l=0;if(n.Date>o.Date){var u=0;for(h=0;h<s.Data.length;++h){var c=s.Data[h];if(c.Date==n.Date)break;if(c.Date>n.Date){h=u;break}u=h}}else for(l=0;l<i.length;++l){var d=i[l];if(d.Date>=o.Date)break}for(var f=null,C=h,m=l;C<s.Data.length&&m<i.length;){c=s.Data[C],d=i[m];d.Date<=c.Date?(r[C]||(r[C]=[]),r[C].push({Date:d.Date,Value:d.Value,Data:d.Data,KDate:c.Date,Type:1}),f=d,++m):(f&&!r[C]&&(r[C]={Date:f.Date,Value:f.Value,Type:0}),++C)}if(f)for(;C<s.Data.length;++C)r[C]||(r[C]={Date:f.Date,Value:f.Value,Type:0});return r}if(ut.IsMinutePeriod(a,!0)){s=e.ChartPaint[0].Data;return r}}}function Dn(t,e,a){this.newMethod=fn,this.newMethod(t,null,e,null),delete this.newMethod,this.JsonData,a.JsonData&&(this.JsonData=a.JsonData),this.RequestData=function(t,e,a){if(!this.JsonData)return console.warn("[LocalJsonDataIndex::RequestData] JsonData is null"),void(param.HQChart.ScriptErrorCallback&&param.HQChart.ScriptErrorCallback("json 数据不能为空"));this.OutVar=this.FittingData(this.JsonData,a),this.BindData(t,e,a)},this.FittingData=function(t,e){for(i in outVar=t.OutVar,date=t.Date,time=t.Time,result=[],outVar)if(item=outVar[i],l.Complier.Log("[LocalJsonDataIndex::FittingData] item",item),0==item.Type||3==item.Type){var a=[];for(j in outVarItem={Name:item.Name,Type:item.Type},item.Data){var r=new st;r.Date=date[j],time&&j<time.length&&(r.Time=time[j]),r.Value=item.Data[j],a.push(r)}if(e.Period<4)var n=e.GetFittingData(a);else n=e.GetMinuteFittingData(a);var s=new ut;s.Data=n,outVarItem.Data=s.GetValue(),result.push(outVarItem)}else console.warn("[LocalJsonDataIndex::FittingData] can't support ",item.Name,item.Type);return result}}function pn(t){this.ID,this.Name,this.Script,this.Arguments=[],this.ClassName="ScriptIndexConsole",this.ErrorCallback,this.FinishCallback,this.IsSectionMode=!1,this.NetworkFilter,t&&(t.Name&&(this.Name=t.Name),t.Script&&(this.Script=t.Script),t.ID&&(this.ID=t.ID),t.Args&&(this.Arguments=t.Args),t.ErrorCallback&&(this.ErrorCallback=t.ErrorCallback),t.FinishCallback&&(this.FinishCallback=t.FinishCallback),t.IsSectionMode&&(this.IsSectionMode=t.IsSectionMode),t.NetworkFilter&&(this.NetworkFilter=t.NetworkFilter)),this.ExecuteScript=function(t){this.OutVar=[];var e={Self:this},a={HQDataType:t.HQDataType,Symbol:t.Stock.Symbol,Name:t.Stock.Name,Period:t.Period,Right:t.Right,Callback:this.RecvResultData,CallbackParam:e,Async:!0,MaxRequestDataCount:t.Request.MaxDataCount,MaxRequestMinuteDayCount:t.Request.MaxMinuteDayCount,Arguments:this.Arguments,IsSectionMode:this.IsSectionMode,ClassName:"ScriptIndexConsole",NetworkFilter:this.NetworkFilter};t.HQDataType===un.HISTORY_MINUTE_ID&&(a.TrateDate=t.Request.TradeDate),t.HQDataType==un.MULTIDAY_MINUTE_ID&&(a.DayCount=t.DayCount);var i=this.Script;ln.Execute(i,a,this.ErrorCallback)},this.RecvResultData=function(t,e){var a=e.Self,i=e.JSExecute,r=null;i.SymbolData.Data&&(r=i.SymbolData.Data.GetDate());var n={Out:t,Date:r,Stock:{Name:i.SymbolData.Name,Symbol:i.SymbolData.Symbol},Index:{Name:a.Name,ID:a.ID}};(i.SymbolData.DataType==un.MULTIDAY_MINUTE_ID||i.SymbolData.DataType==un.MINUTE_ID||i.SymbolData.DataType==un.KLINE_ID&&ut.IsMinutePeriod(i.SymbolData.Period,!0))&&(n.Time=i.SymbolData.Data.GetTime()),a.FinishCallback&&a.FinishCallback(n,e.JSExecute)}}function vn(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],") can't support."),this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);$n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:[{item:["finance","doc","exists","true"]}],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort((function(t,e){return t.Date-e.Date})),t.RecvCallback(a,t.Job,t.DataKey)}})},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Set,i=t.stock[0];for(var r in i.stockday){var n=i.stockday[r];if(n.announcement1){var s=this.ToHQChartItemData(n.announcement1,n.finance1,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement2){s=this.ToHQChartItemData(n.announcement2,n.finance2,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement3){s=this.ToHQChartItemData(n.announcement3,n.finance3,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement4){s=this.ToHQChartItemData(n.announcement4,n.finance4,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}}return e},this.ToHQChartItemData=function(t,e,a){var i=this.Args[0],r=1e4*t.year,n=t.quarter;switch(n){case 1:r+=331;break;case 2:r+=630;break;case 3:r+=930;break;case 4:r+=1231;break;default:return null}var s={Date:r,Value:0};switch(i){case 0:s.Value=r%1e6;break;case 1:s.Value=e.persearning;break;case 3:s.Value=e.peruprofit;break;case 4:s.Value=e.pernetasset;break;case 5:s.Value=e.percreserve;break;case 6:s.Value=e.woewa;break;case 7:s.Value=e.perccfo;break;case 8:s.Value=e.monetaryfunds;break;case 11:s.Value=e.areceivable;break}return s},this.GetFieldList=function(){var t=this.Args[0];switch(t){case 0:return["finance.date"];case 1:return["finance.persearning"];case 3:return["finance.peruprofit"];case 4:return["finance.pernetasset"];case 5:return["finance.percreserve"];case 6:return["finance.woewa"];case 7:return["finance.perccfo"];case 8:return["finance.monetaryfunds"];case 11:return["finance.areceivable"];default:return null}}}function gn(t){this.newMethod=vn,this.newMethod(t),delete this.newMethod,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],", ").concat(this.Args[1],", ").concat(this.Args[2],") can't support."),this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);var a=[{item:["finance","doc","exists","true"]}],i=this.Args[1],r=this.Args[2],n=0,s=3,o=null;0==i&&0==r||(0==i&&r<300?(n=r,s=200):0==r&&i<1e3?o=i:i>1909&&(331==r?(a=[{item:["announcement1.year","int32","eq",i]},{item:["finance1","doc","exists","true"]}],e.push("announcement1.year"),e.push("announcement1.quarter")):630==r?(a=[{item:["announcement2.year","int32","eq",i]},{item:["finance2","doc","exists","true"]}],e.push("announcement2.year"),e.push("announcement2.quarter")):930==r?(a=[{item:["announcement3.year","int32","eq",i]},{item:["finance3","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")):(a=[{item:["announcement4.year","int32","eq",i]},{item:["finance4","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")))),$n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:a,start:0,end:s},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e),i=null;a&&a.length>0&&(a.sort((function(t,e){return e.Date-t.Date})),i=null==o?a[n]:t.GetPreYearData(a,o)),t.RecvCallback(i,t.Job,t.DataKey)}})},this.GetPreYearData=function(t,e){if(331!=e&&630!=e&&930!=e&&1231!=e){for(var a=t[0].Date%1e3,i=(r=1,0);r<t.length;++r){n=t[r];if(n.Date%1e4==a&&(++i,i==e))return n}return null}for(var r in t){var n=t[r];if(n.Date%1e4==e)return n}}}function Sn(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case 1:case 7:case"EXCHANGE":this.DownloadHistoryData(t);break;case 3:this.GetSymbolType(t);break;case 9:case 18:case 30:case 32:case 33:case 34:case 38:case 40:case 41:case 42:case 43:case"CAPITAL":case"TOTALCAPITAL":case 100:this.DownloadRealtimeData(t);break;default:this.DownloadRealtimeData(t);break}},this.GetSymbolType=function(t){var e=1;Mr.IsSHSZIndex(this.Symbol)&&(e=0);var a={Date:null,Value:e};this.RecvCallback(a,this.Job,this.DataKey)},this.DownloadRealtimeData=function(t){var e=this,a=this.GetFieldList();if(!a)return this.Job.FunctionName2?message="".concat(this.Job.FunctionName2," can't support."):this.Job.FunctionName?message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],") can't support."):message="".concat(this.Args[0]," can't support."),this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);$n.HttpRequest({url:this.RealtimeUrl,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:10},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RealtimeDataToHQChartData(t);e.RecvCallback(a,e.Job,e.DataKey)}})},this.DownloadHistoryData=function(t){var e=this,a=this.GetFieldList();if(!a)return message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],") can't support."),this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);$n.HttpRequest({url:this.Url,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(t){var a=e.ToHQChartData(t);a&&a.sort((function(t,e){return t.Date-e.Date})),e.RecvCallback(a,e.Job,e.DataKey)}})},this.GetFieldList=function(){var t=this.Args[0];switch(t){case 1:return["capital.total","capital.date"];case 7:return["capital.a","capital.date"];case"EXCHANGE":return["capital.a","capital.date"];case 9:return["finance.peruprofit","symbol","date"];case 18:return["finance.percreserve","symbol","date"];case 30:return["finance.nprofit","symbol","date"];case 32:return["finance.peruprofit","symbol","date"];case 33:return["finance.persearning","symbol","date"];case 34:return["finance.pernetasset","symbol","date"];case 38:return["finance.persearning","symbol","date"];case 40:return["capital.a","capital.date","symbol","date","price"];case 41:return["capital.total","capital.date","symbol","date","price"];case"CAPITAL":return["capital.a","capital.date","symbol","date"];case"TOTALCAPITAL":return["capital.total","capital.date","symbol","date"];case 42:return["company.releasedate","symbol","date"];case 43:return["dividendyield","symbol","date"];case 100:return["shareholder","symbol","date"];default:return null}},this.RealtimeDataToHQChartData=function(t,e){if(!t.stock||1!=t.stock.length)return null;var a=t.stock[0],i=(e=this.Args[0],a.date);switch(e){case 9:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 18:return a.finance?{Date:i,Value:a.finance.percreserve}:null;case 30:return a.finance?{Date:i,Value:a.finance.nprofit}:null;case 32:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 33:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 34:return a.finance?{Date:i,Value:a.finance.pernetasset}:null;case 38:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 40:return a.capital?{Date:i,Value:a.capital.a*a.price}:null;case 41:return a.capital?{Date:i,Value:a.capital.total*a.price}:null;case 42:if(!a.company)return null;var r=a.company.releasedate,n=parseInt(r/1e4),s=parseInt(r%1e4/100),o=r%100,h=new Date(n,s-1,o),l=new Date,u=parseInt((l.getTime()-h.getTime())/864e5);return{Date:i,Value:u+1};case 43:return a.dividendyield?{Date:i,Value:a.dividendyield.quarter4}:null;case 100:return a.shareholder?{Date:i,Value:a.shareholder.count}:null;case"CAPITAL":return a.capital?{Date:i,Value:a.capital.a/100}:null;case"TOTALCAPITAL":return a.capital?{Date:i,Value:a.capital.total/100}:null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Set,i=t.stock[0],r=this.Args[0];for(var n in i.stockday){var s=i.stockday[n],o=this.ToHQChartItemData(s,r);o&&!a.has(o.Date)&&(e.push(o),a.add(o.Date))}return e},this.ToHQChartItemData=function(t,e){if(!t)return null;var a=t.date;switch(e){case 1:return t.capital?{Date:a,Value:t.capital.total}:null;case 7:case"EXCHANGE":return t.capital?{Date:a,Value:t.capital.a}:null;default:return null}}}function In(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],", ").concat(this.Args[1],", ").concat(this.Args[2],") can't support."),this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);$n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],orderfield:"date",order:-1,start:0,end:5},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.length>0&&a.sort((function(t,e){return t.Date-e.Date})),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetFieldList=function(){var t=this.Args[0];switch(t){case 1:return["shareholder","date","symbol"];case 2:return["tradedetail.buy","tradedetail.sell","date","symbol"];case 3:return["margin","date","symbol"];case 4:return["blocktrading.amount","blocktrading.price","date","symbol"];default:return null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Set,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var s in i.stockday){var o=i.stockday[s],h=this.ToHQChartItemData(o,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date;switch(e){case 1:return t.shareholder?{Date:i,Value:t.shareholder.count}:null;case 2:return!t.tradedetail&&t.tradedetail[0]?null:0==a?{Date:i,Value:t.tradedetail[0].buy}:{Date:i,Value:t.tradedetail[0].sell};case 3:if(!t.margin)return null;if(0==a){if(t.margin.buy)return{Date:i,Value:t.margin.buy.balance}}else if(t.margin.sell)return{Date:i,Value:t.margin.sell.balance};return null;case 4:return t.blocktrading?0==a?{Date:i,Value:t.blocktrading.price}:{Date:i,Value:t.blocktrading.amount}:null;default:return null}}}function Tn(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetQueryCondtion();if(!e)return message="".concat(this.Job.FunctionName,"(").concat(this.Args[0],", ").concat(this.Args[1],", ").concat(this.Args[2],") can't support."),this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);$n.HttpRequest({url:this.Url,data:{field:e.Field,symbol:e.Symbol,condition:e.Cond,start:0,end:2e3},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort((function(t,e){return t.Date-e.Date})),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetQueryCondtion=function(){var t=new Date,e=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();t.setDate(t.getDate()-100);var a=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate(),i=this.Args[0];switch(i){case 1:var r={Symbol:["CNA.ci"],Field:["margin"],Cond:[{item:["date","int32","gte",a.toString(),"lte",e.toString()]},{item:["margin","doc","exists","true"]}]};return r}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Set,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var s in i.stockday){var o=i.stockday[s],h=this.ToHQChartItemData(o,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date,r=null;switch(e){case 1:return t.margin?(r=t.margin,1==a?r.buy&&ze.IsNumber(r.buy.balance)?{Date:i,Value:r.buy.balance}:null:ze.IsNumber(r.sell.balance)?{Date:i,Value:r.sell.balance}:null):null;default:return null}}}function xn(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":this.DownloadGroupName(t);break}},this.DownloadGroupName=function(t){var e=this,a=["name","symbol"];"HYBLOCK"==t?a.push("industry"):"DYBLOCK"==t?a.push("region"):"GNBLOCK"==t&&a.push("concept"),$n.HttpRequest({url:e.RealtimeUrl,data:{field:a,symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RecvGroupName(t);e.RecvCallback(a,e.Job,e.DataKey,1)},error:function(t){e.ErrorCallback(t)}})},this.RecvGroupName=function(t){if(!t.stock||1!=t.stock.length)return null;var e=t.stock[0],a=this.Args[0],i=null;if("HYBLOCK"==a){var r=e.industry;if(!r)return null;for(var n in r){var s=r[n];i=s.name}}else if("DYBLOCK"==a){var o=e.region;if(!o)return null;for(var n in o){s=o[n];i=s.name}}else if("GNBLOCK"==a){var h=e.concept;if(!h)return null;for(var n in i="",h){s=h[n];i.length>0&&(i+=" "),i+=s.name}}return{Value:i}}}pn.SetDomain=function(t,e){ln.SetDomain(t,e)};var yn={BLACK_ID:1,WHITE_ID:0};function An(){}function bn(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsdeallist-drawing",this.CanvasElement.id=b(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&l.Chart.Log("[JSDealChart::JSDealList] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=I();this.CanvasElement.height*=e,this.CanvasElement.width*=e,l.Chart.Log("[JSDealChart::OnSize] devicePixelRatio=".concat(window.devicePixelRatio,", height=").concat(this.CanvasElement.height,", width=").concat(this.CanvasElement.width)),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSDealChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.Symbol?e.ChangeSymbol(t.Symbol):e.Draw()},this.CreateJSDealChartContainer=function(t){var e=new wn(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),ze.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),ze.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;ze.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),ze.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),ze.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),ze.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=I();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(l.Chart.Log("[JSDealChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSDealChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}function wn(t){this.ClassName="JSDealChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="Loading",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.Symbol,this.Name,this.TradeDate,this.NetworkFilter,this.Data={DataOffset:0,Data:[]},this.SourceData={DataOffset:0,Data:[]},this.IsShowLastPage=!0,this.mapEvent=new Map,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.LoadDataSplashTitle="Loading",this.UIElement=t,this.LastPoint=new N,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.EnableFilterData=!1,this.FilterData=function(t){if(!this.EnableFilterData)return t;var e=this.GetEventCallback(C.ON_FILTER_DEAL_DATA);if(!e||!e.Callback)return t;var a={Data:t,Result:[]};return e.Callback(e,a,this),a.Result},this.EnableFilter=function(t,e){this.EnableFilterData=t,this.Data.Data=this.FilterData(this.SourceData.Data),this.Data.DataOffset=0,e&&(1==e.GotoLastPage&&this.GotoLastPage(),1==e.Redraw&&this.Draw())},this.CloneArray=function(t){var e=[];if(!ze.IsNonEmptyArray(t))return e;for(var a=0;a<t.length;++a)e.push(t[a]);return e},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new Fn,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new Ln;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint[0]=a,t&&(ze.IsBool(t.IsSingleTable)&&(a.IsSingleTable=t.IsSingleTable),ze.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),ze.IsBool(t.IsShowLastPage)&&(this.IsShowLastPage=t.IsShowLastPage),ze.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine));var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,l.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,l.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",(function(t){e.OnKeyDown(t)}),!0),r&&this.UIElement.addEventListener("wheel",(function(t){e.OnWheel(t)}),!0)},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=I();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(e=0;e<this.ChartPaint.length;++e){a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.ChangeSymbol=function(t,e){this.Symbol=t,this.Data=null,this.SourceData=null;var a=this.ChartPaint[0];a&&(a.Data=null),e&&ze.IsNumber(e.TradeDate)&&(this.TradeDate=e.TradeDate),this.Symbol?this.RequestDealData():this.Draw()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdateEvent=function(t,e){var a=t?C.RECV_START_AUTOUPDATE:C.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestDealData=function(){this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealData",Explain:"成交明细",Request:{Data:{symbol:t.Symbol,tradeDate:t.TradeDate}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdateEvent(!0,"JSDealChartContainer::RequestDealData"),t.AutoUpdate()})),1==e.PreventDefault)return}var a="".concat(xi.CacheDomain,"/cache/dealday/today/").concat(this.Symbol,".json");$n.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvDealData=function(t){var e=wn.JsonDataToDealData(t);this.SourceData={DataOffset:0,Data:e},this.Data={DataOffset:0,Data:this.FilterData(this.CloneArray(e))},this.Symbol=t.symbol,this.Name=t.name;var a=this.ChartPaint[0];if(a.Data=this.Data,a.Symbol=this.Symbol,a.YClose=t.yclose,a.Open=t.open,this.IsShowLastPage){var i=a.GetPageSize(!0),r=e.length-i;r<0&&(r=0),this.Data.DataOffset=r}this.Draw()},this.RequestDealUpdateData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealUpdateData",Explain:"增量成交明细",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var a=this.Data.Data[this.Data.Data.length-1];e.LastItem=a}if(this.NetworkFilter(e,(function(e){t.RecvDealUpdateData(e),t.AutoUpdate()})),1==e.PreventDefault)return}},this.RecvDealUpdateData=function(t){var e=wn.JsonDataToDealData(t);ze.IsNonEmptyArray(e)&&(1===t.UpdateType?(this.SourceData.Data=e,this.Data.Data=this.FilterData(this.CloneArray(e)),this.Data.DataOffset>=this.Data.Data.length&&(this.Data.DataOffset=0)):(this.AddDealData(this.SourceData,e),this.AddDealData(this.Data,this.FilterData(e))),this.Draw())},this.AddDealData=function(t,e){if(t.Data){var a=0,i=this.ChartPaint[0];i&&(a=i.GetPageSize());for(var r=0;r<e.length;++r)t.Data.push(e[r]),t.DataOffset+a<t.Data.length&&++t.DataOffset}else t.Data=e},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=Mr.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout((function(){e.AutoUpdate()}),i):2==a&&(this.AutoUpdateTimer=setTimeout((function(){e.RequestDealUpdateData()}),i))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.OnSize=function(){if(this.Frame){this.SetSizeChange(!0);var t=this.ChartPaint[0];if(t&&this.Data&&this.Data.DataOffset>0&&ze.IsNonEmptyArray(this.Data.Data)){var e=t.GetPageSize(!0);e+this.Data.DataOffset>=this.Data.Data.length&&this.GotoLastPage()}this.Draw()}},this.SetSizeChange=function(t){var e=this.ChartPaint[0];e&&(e.SizeChange=t)},this.OnWheel=function(t){if(l.Chart.Log("[JSDealChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var e,a=t.clientX-this.UIElement.getBoundingClientRect().left,i=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),e=this.Canvas.isPointInPath(a,i),e){var r=this.ChartPaint[0];if(r){var n=t.wheelDelta;ze.IsObjectExist(t.wheelDelta)||(n=-.01*t.deltaY),n<0?this.GotoNextPage()&&this.Draw():n>0&&this.GotoPreviousPage()&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.keyCode?t.keyCode:t.which;switch(e){case 38:this.GotoPreviousPage()&&this.Draw();break;case 40:this.GotoNextPage()&&this.Draw();break}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.GotoNextPage=function(){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetPageSize();if(e>this.Data.Data.length)return!1;var a=this.Data.DataOffset+e;return a+e!=this.Data.Data.length-1&&(a+e>this.Data.Data.length?this.Data.DataOffset=this.Data.Data.length-e:this.Data.DataOffset=a,!0)},this.GotoPreviousPage=function(){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;if(this.Data.DataOffset<=0)return!1;var e=t.GetPageSize(),a=this.Data.DataOffset;return a-=e,a<0&&(a=0),this.Data.DataOffset=a,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())}}function Fn(){this.ChartBorder,this.Canvas,this.BorderColor=xi.DealList.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=xi.DealList.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font},this.Draw=function(t){var e=F(this.ChartBorder.GetLeft()),a=F(this.ChartBorder.GetTop()),i=F(this.ChartBorder.GetRight()),r=F(this.ChartBorder.GetBottom()),n=i-e,s=r-a;ze.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(e,a,n,s))},this.DrawLogo=function(){var t=xi.FrameLogo.Text;if(ze.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetLeft()+5,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}An.GetStyleConfig=function(t){switch(t){case yn.BLACK_ID:return function(){var t={BGColor:"rgb(0,0,0)",TooltipBGColor:"rgb(255, 255, 255)",TooltipAlpha:.92,SelectRectBGColor:"rgba(1,130,212,0.06)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(228,228,228)",EmptyBarBGColor:"rgb(0,0,0)",HLCArea:{HighLineColor:"rgb(238,21,21)",LowLineColor:"rgb(25,158,0)",CloseLineColor:"rgb(156,156,156)",LineWidth:2*I(),UpAreaColor:"rgba(238,21,21, 0.3)",DownAreaColor:"rgba(25,158,0, 0.3)"},Minute:{VolBarColor:null,PriceColor:"rgb(25,180,231)",AreaPriceColor:"rgba(63,158,255,.3)",AvPriceColor:"rgb(255,236,0)",PositionColor:"rgb(218,165,32)",VolTitleColor:"rgb(190,190,190)",Before:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)",CloseIcon:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"}},After:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)"}},DefaultTextColor:"rgb(101,104,112)",DefaultTextFont:14*I()+"px 微软雅黑",TitleFont:13*I()+"px 微软雅黑",IndexTitleColor:"rgb(190, 190 ,190)",IndexTitleBGColor:"rgb(0,0,0)",IndexTitleBorderColor:"rgb(211, 211, 211)",IndexTitleBorderMoveOnColor:"rgb(30,144,255)",UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(190, 190 ,190)",CloseLineColor:"rgb(178,34,34)",Title:{TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(190, 190 ,190)",AmountColor:"rgb(190, 190 ,190)",DateTimeColor:"rgb(190, 190 ,190)",SettingColor:"rgb(190, 190 ,190)",NameColor:"rgb(190, 190 ,190)",TurnoverRateColor:"rgb(101,104,112)",PositionColor:"rgb(101,104,112)"},FrameBorderPen:"rgba(236,236,236,0.13)",MultiDayBorderPen:"rgba(236,236,236,0.5)",FrameSplitPen:"rgba(236,236,236,0.13)",FrameSplitTextColor:"rgb(101,104,112)",FrameSplitTextFont:12*I()+"px 微软雅黑",FrameTitleBGColor:"rgb(0,0,0)",OverlayIndexTitleBGColor:"rgba(0,0,0,0.7)",Frame:{XBottomOffset:1*I(),PercentageText:{PriceColor:"rgb(101,104,112)",PercentageColor:"rgb(101,104,112)",SplitColor:"rgb(101,104,112)",Font:14*I()+"px 微软雅黑"}},FrameLatestPrice:{TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(190,190,190)",BGAlpha:.6,EmptyBGColor:"rgb(0,0,0)"},CorssCursorBGColor:"rgb(43,54,69)",CorssCursorTextColor:"rgb(255,255,255)",CorssCursorTextFont:12*I()+"px 微软雅黑",CorssCursorHPenColor:"rgb(130,130,130)",CorssCursorVPenColor:"rgb(130,130,130)",CorssCursor:{RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},OrderFlow:{UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(248,248,255)",Family:"Arial",FontMaxSize:16,MaxValue:"8888"},Line:{UpDownColor:"rgb(220,220,220)",MiddleColor:"rgb(211,211,211)"}},KLine:{MaxMin:{Font:12*I()+"px 微软雅黑",Color:"rgb(255,250,240)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},VirtualKLine:{Color:"rgb(119,136,153)",LineDash:[2,2]},Index:{LineColor:["rgb(255,189,09)","rgb(22,198,255)","rgb(174,35,161)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],NotSupport:{Font:"".concat(14*I(),"px 微软雅黑"),TextColor:"rgb(250,250,250)"}},ColorArray:["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],Buttons:{CloseOverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},CloseWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ChangeIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},OverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ModifyIndexParam:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},MaxMinWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},TitleWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ExportData:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"}},DrawPicture:{LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(0,0,0)"]},TooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:13*I()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)"},PCTooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:12*I()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(161,154,3)",AmountColor:"rgb(161,154,3)"},MinuteInfo:{TextColor:"rgb(84,143,255)",Font:14*I()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,1)"},DepthMapPaint:{LineColor:"rgba(255,185,15)",AreaColor:"rgba(255,185,15,0.8)",TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},KLineYAxisBGPaint:{Font:12*I()+"px 微软雅黑",TextColor:"rgb(255,255,255)",LineColor:"rgb(255,255,255)"},StockChip:{InfoColor:"rgb(255,255,255)",DayInfoColor:"rgb(0,0,0)"},DepthChart:{BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.5)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.5)"},LineWidth:4},DepthCorss:{BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(54,54,54, 0.8)",TextColor:"rgb(203,215,224)",Border:{Top:5,Left:20,Bottom:5,Center:5},Font:14*I()+"px 微软雅黑",LineHeight:16}},ChartDrawVolProfile:{BGColor:"rgba(244,250,254,0.3)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},RectSelect:{LineColor:"rgb(115,83,64)",LineWidth:1*I(),LineDotted:[3,3],AreaColor:"rgba(26,13,7,0.5)"},SelectedChart:{LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},DragMovePaint:{TextColor:"rgb(255,255,255)"},DealList:{BorderColor:"rgb(38,38,41)",Header:{Color:"RGB(245,245,245)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(192,192,0)",Time:"rgb(245,245,245)",Deal:"rgb(111,128,112)",Index:"rgb(245,245,245)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)"},Report:{BorderColor:"rgb(38,38,41)",SelectedColor:"rgb(49,48,56)",Header:{Color:"RGB(245,245,245)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}},FixedItem:{Font:{Size:15,Name:"微软雅黑"}},LimitBorder:{Color:"rgb(64,64,64)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},FieldColor:{Index:"rgb(245,245,245)",Symbol:"rgb(255,255,255)",Name:"rgb(255,255,255)",Amount:"rgb(2,226,244)",Vol:"rgb(192,192,0)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(220,220,220,0.5)",AreaColor:"rgba(220,220,220,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(240,240,240)",DataWidth:16,DistanceWidth:3},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)",Tab:{Font:{Size:12,Name:"微软雅黑"},ScrollBarWidth:100,ButtonColor:"rgb(13,12,15)",BarColor:"rgb(48,48,48)",BorderColor:"rgb(48,48,48)",TabTitleColor:"rgb(153,153,153)",TabSelectedTitleColor:"rgb(255,255,255)",TabSelectedBGColor:"rgb(13,12,15)",TabMoveOnTitleColor:"rgb(255,255,255)",TabBGColor:"rgb(28,28,31)"},PageInfo:{Font:{Size:15,Name:"微软雅黑"},TextColor:"rgb(255,255,255)",BGColor:"rgba(49,48,56,0.8)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(255,250, 250,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(135,206,250)",SrcRowColor:"rgb(49,48,56)"}},ScrollBar:{BorderColor:"rgb(38,38,41)",XSplitTextColor:"rgb(240,240,240)",XSplitLineColor:"rgb(38,38,41)",Slider:{DateFont:"".concat(14*I(),"px 微软雅黑"),DateColor:"rgb(240,240,240)",BarColor:"rgb(105,105,105)",BarAreaColor:"rgba(128,128,128,0.65)"},BGChart:{Color:"rgb(105,113,125)",LineWidth:1,AreaColor:"rgba(24,28,42,0.5)"}}};return t}();case yn.WHITE_ID:return new Ti;default:return null}},bn.Init=function(t){var e=new bn(t);return e.OnSize(),e},wn.JsonDataToDealData=function(t){t.symbol;var e=[];if(!ze.IsNonEmptyArray(t.detail))return e;for(var a=0;a<t.detail.length;++a){var i=t.detail[a],r={Time:i[0],Price:i[1],Vol:i[2],BS:i[4],Amount:i[3]};r.Source=i,i[5]&&(r.StrTime=i[5]),i[6]&&(r.ID=i[6]),e.push(r)}return e};var Mn={TIME_ID:0,PRICE_ID:1,VOL_ID:2,DEAL_ID:3,BS_ID:4,UPDOWN_ID:5,STRING_TIME_ID:6,INDEX_ID:7,MULTI_BAR_ID:8,CENTER_BAR_ID:9,CUSTOM_TEXT_ID:10};function Ln(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartDealList",this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.Symbol,this.YClose,this.Open,this.Decimal=2,this.IsSingleTable=!1,this.IsShowHeader=!0,this.SizeChange=!0,this.UpColor=xi.DealList.UpTextColor,this.DownColor=xi.DealList.DownTextColor,this.UnchagneColor=xi.DealList.UnchagneTextColor,this.BorderColor=xi.DealList.BorderColor,this.HeaderFontConfig={Size:xi.DealList.Header.Font.Size,Name:xi.DealList.Header.Font.Name},this.HeaderColor=xi.DealList.Header.Color,this.HeaderMergin={Left:xi.DealList.Header.Mergin.Left,Right:xi.DealList.Header.Mergin.Right,Top:xi.DealList.Header.Mergin.Top,Bottom:xi.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:xi.DealList.Row.Font.Size,Name:xi.DealList.Row.Font.Name},this.RowMergin={Top:xi.DealList.Row.Mergin.Top,Bottom:xi.DealList.Row.Mergin.Bottom},this.BarMergin={Top:xi.DealList.Row.BarMergin.Top,Left:xi.DealList.Row.BarMergin.Left,Right:xi.DealList.Row.BarMergin.Right,Bottom:xi.DealList.Row.BarMergin.Bottom},this.HeaderFont=12*I()+"px 微软雅黑",this.ItemFont=15*I()+"px 微软雅黑",this.RowCount=0,this.TableWidth=0,this.TableCount=0,this.HeaderHeight=0,this.Column=[{Type:Mn.TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:Mn.PRICE_ID,Title:"价格",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:Mn.VOL_ID,Title:"成交",TextAlign:"right",Width:null,TextColor:xi.DealList.FieldColor.Vol,MaxText:"888888"},{Type:Mn.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"擎"}],this.RectClient={},this.ReloadResource=function(t){this.UpColor=xi.DealList.UpTextColor,this.DownColor=xi.DealList.DownTextColor,this.UnchagneColor=xi.DealList.UnchagneTextColor,this.BorderColor=xi.DealList.BorderColor,this.HeaderFontConfig={Size:xi.DealList.Header.Font.Size,Name:xi.DealList.Header.Font.Name},this.HeaderColor=xi.DealList.Header.Color,this.HeaderMergin={Left:xi.DealList.Header.Mergin.Left,Right:xi.DealList.Header.Mergin.Right,Top:xi.DealList.Header.Mergin.Top,Bottom:xi.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:xi.DealList.Row.Font.Size,Name:xi.DealList.Row.Font.Name},this.RowMergin={Top:xi.DealList.Row.Mergin.Top,Bottom:xi.DealList.Row.Mergin.Bottom};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==Mn.TIME_ID||a.Type==Mn.STRING_TIME_ID?a.TextColor=xi.DealList.FieldColor.Time:a.Type==Mn.VOL_ID?a.TextColor=xi.DealList.FieldColor.Vol:a.Type==Mn.DEAL_ID?a.TextColor=xi.DealList.FieldColor.Deal:a.Type==Mn.INDEX_ID&&(a.TextColor=xi.DealList.FieldColor.Index)}},this.SetColumn=function(t){if(ze.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.Type==Mn.MULTI_BAR_ID||a.Type==Mn.CENTER_BAR_ID){if(!ze.IsNumber(a.DataIndex))continue;i.DataIndex=a.DataIndex}this.Column.push(i)}}}},this.GetDefaultColunm=function(t){for(var e=[{Type:Mn.TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:Mn.PRICE_ID,Title:"价格",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:Mn.VOL_ID,Title:"成交",TextAlign:"right",Width:null,TextColor:xi.DealList.FieldColor.Vol,MaxText:"888888"},{Type:Mn.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"擎"},{Type:Mn.DEAL_ID,Title:"笔数",TextAlign:"right",Width:null,TextColor:xi.DealList.FieldColor.Deal,MaxText:"8888"},{Type:Mn.UPDOWN_ID,Title:"涨跌",TextAlign:"right",Width:null,MaxText:"-8888.88"},{Type:Mn.STRING_TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.Time,MaxText:"88:88:88"},{Type:Mn.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.Index,MaxText:"88888"},{Type:Mn.MULTI_BAR_ID,Title:"柱子",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:Mn.CENTER_BAR_ID,Title:"柱子2",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:Mn.CUSTOM_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:xi.DealList.FieldColor.Text,MaxText:"擎擎擎擎擎"}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.DrawBorder(),this.DrawHeader(),this.DrawBody(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom(),this.Decimal=Hr(this.Symbol)},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.TableCount*this.RowCount;return e},this.CalculateSize=function(){this.UpdateCacheData();var t=I();this.HeaderFont="".concat(this.HeaderFontConfig.Size*t,"px ").concat(this.HeaderFontConfig.Name),this.ItemFont="".concat(this.ItemFontConfig.Size*t,"px ").concat(this.ItemFontConfig.Name),this.Canvas.font=this.ItemFont;for(var e=0,a=0,i=0;i<this.Column.length;++i){var r=this.Column[i];a=this.Canvas.measureText(r.MaxText).width,r.Width=a+4,e+=r.Width}var n=this.RectClient.Right-this.RectClient.Left;this.TableCount=parseInt(n/e),this.IsSingleTable&&(this.TableCount=1),this.TableWidth=n/this.TableCount,this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight)/this.RowHeight)},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left+this.HeaderMergin.Left,e=this.RectClient.Top,a=e+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;for(var i=0,r=0;i<this.TableCount;++i){var n=t+this.TableWidth*i,s=n;for(r=0;r<this.Column.length;++r){var o=this.Column[r],h=o.Width;r==this.Column.length-1&&(h=this.TableWidth-(s-n)-this.HeaderMergin.Right-this.HeaderMergin.Left);var l=s;"center"==o.TextAlign?(l=s+h/2,this.Canvas.textAlign="center"):"right"==o.TextAlign?(l=s+h,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(o.Title,l,a),s+=o.Width}}}},this.DrawBorder=function(){var t=F(this.RectClient.Left),e=F(this.RectClient.Right),a=F(this.RectClient.Top),i=F(this.RectClient.Bottom);this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.IsShowHeader&&(this.Canvas.moveTo(t,a+this.HeaderHeight),this.Canvas.lineTo(e,a+this.HeaderHeight));for(var r=F(t+this.TableWidth),n=1;n<this.TableCount;++n)this.Canvas.moveTo(r,a),this.Canvas.lineTo(r,i),r=F(r+this.TableWidth);this.Canvas.stroke()},this.DrawBody=function(){if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;for(var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left+this.HeaderMergin.Left,a=this.Data.Data.length,i=this.Data.DataOffset,r=0,n=0;r<this.TableCount;++r){var s=e+this.TableWidth*r,o=s,h=t;for(n=0;n<this.RowCount&&i<a;++n,++i){var l=this.Data.Data[i];this.DrawRow(l,o,h,i),h+=this.RowHeight}}}},this.DrawRow=function(t,e,a,i,r){for(var n=e,s=e+this.TableWidth,o=0;o<this.Column.length;++o){var h=this.Column[o],l=h.TextColor,u=null,c=h.Width,d=h.TextAlign;if(e+c>s)break;if(o==this.Column.length-1&&(c=this.TableWidth-(e-n)-this.HeaderMergin.Right-this.HeaderMergin.Left),h.Type==Mn.TIME_ID)u=ze.FormatTimeString(t.Time,h.Foramt);else if(h.Type==Mn.STRING_TIME_ID)u=t.StrTime;else if(h.Type==Mn.PRICE_ID)l=t.Price>this.YClose?this.UpColor:t.Price<this.YClose?this.DownColor:this.UnchagneColor,u=t.Price.toFixed(this.Decimal);else if(h.Type==Mn.VOL_ID)u=ze.FormatValueString(t.Vol,0),l=this.GetVolColor(h,t);else if(h.Type==Mn.DEAL_ID)u=ze.FormatValueString(t.Deal,0);else if(h.Type==Mn.BS_ID)1==t.BS?(u="B",l=this.UpColor):2==t.BS&&(u="S",l=this.DownColor);else if(h.Type==Mn.UPDOWN_ID){if(ze.IsNumber(this.YClose)){var f=t.Price-this.YClose;u=f.toFixed(2),l=f>0?this.UpColor:f<0?this.DownColor:this.UnchagneColor}}else if(h.Type==Mn.INDEX_ID)u=(i+1).toString();else if(h.Type==Mn.MULTI_BAR_ID){var C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawMultiBar(h,t,C)}else if(h.Type==Mn.CENTER_BAR_ID){C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawCenterBar(h,t,C)}else if(h.Type==Mn.CUSTOM_TEXT_ID){var m={Text:null,TextColor:null,TextAlign:null};C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawCustomText(h,t,C,i,o,m)&&(m.Text&&(u=m.Text),m.TextColor&&(l=m.TextColor),m.TextAlign&&(d=m.TextAlign))}this.DrawItemText(u,l,d,e,a,c),e+=h.Width}},this.DrawItemText=function(t,e,a,i,r,n){var s=i;"center"==a?(s=i+n/2,this.Canvas.textAlign="center"):"right"==a?(s=i+n,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,t&&this.Canvas.fillText(t,s,r+this.RowHeight/2)},this.DrawMultiBar=function(t,e,a){if(!e.Source||!ze.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!ze.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,o=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=n+r,l=0;l<i.Value.length;++l){var u=i.Value[l];if(!(u<=0)){if(n>=h)break;var c=r*u;c<1&&(c=1),n+c>h&&(c=h-n);var d=l;ze.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(d=i.Color[l]),this.Canvas.fillStyle=xi.DealList.FieldColor.Bar[d],this.Canvas.fillRect(n,s,c,o),n+=c}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!ze.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!ze.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,s=n+r,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,h=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=0;l<i.Value.length&&l<2;++l){var u=i.Value[l];if(!(u<=0)){u>1&&(u=1);var c=r*u;c<1&&(c=1);var d=l;ze.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(d=i.Color[l]),this.Canvas.fillStyle=xi.DealList.FieldColor.Bar[d],0==l?this.Canvas.fillRect(s,o,-c,h):this.Canvas.fillRect(s,o,c,h)}}},this.DrawCustomText=function(t,e,a,i,r,n){var s=this.GetEventCallback(C.ON_DRAW_DEAL_TEXT);if(!s||!s.Callback)return!1;var o={Data:e,DataIndex:i,ColumnIndex:r,ColumnInfo:t,Out:{Text:null,TextColor:null,TextAlign:null}};return s.Callback(s,o,this),!!o.Out.Text&&(n.Text=o.Out.Text,o.Out.TextColor&&(n.TextColor=o.Out.TextColor),o.Out.TextAlign&&(n.TextAlign=o.Out.TextAlign),!0)},this.GetVolColor=function(t,e){var a=this.GetEventCallback(C.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return T(this.Canvas,t,e)}}function En(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsreportlist-drawing",this.CanvasElement.id=b(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&l.Chart.Log("[JSReportChart::JSReportChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=I();this.CanvasElement.height*=e,this.CanvasElement.width*=e,l.Chart.Log("[JSReportChart::OnSize] devicePixelRatio=".concat(window.devicePixelRatio,", height=").concat(this.CanvasElement.height,", width=").concat(this.CanvasElement.width)),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSReportChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.Symbol&&(e.Symbol=t.Symbol),t.Name&&(e.Name=t.Name);var a={Callback:null};e.Symbol&&(a.Callback=function(){e.RequestMemberListData()}),e.RequestStockListData(a)},this.CreateJSReportChartContainer=function(t){var e=new Pn(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),ze.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),ze.IsNonEmptyArray(t.Tab)&&e.SetTab(t.Tab),ze.IsNumber(t.TabSelected)&&e.SetSelectedTab(t.TabSelected),ze.IsBool(t.EnableDragRow)&&(e.EnableDragRow=t.EnableDragRow),ze.IsNumber(t.DragRowType)&&(e.DragRowType=t.DragRowType),ze.IsBool(t.EnableDragHeader)&&(e.EnableDragHeader=t.EnableDragHeader),t.SortInfo){var a=t.SortInfo;ze.IsNumber(a.Field)&&(e.SortInfo.Field=a.Field),ze.IsNumber(a.Sort)&&(e.SortInfo.Sort=a.Sort)}if(this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),ze.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var i=0;i<t.EventCallback.length;++i){a=t.EventCallback[i];e.AddEventCallback(a)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;ze.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),ze.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),ze.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),ze.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=I();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(l.Chart.Log("[JSReportChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSReportChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(l.Chart.Log("[JSReportChart:Draw] "),this.JSChartContainer.Draw())}}function Nn(){this.OriginalSymbol,this.Symbol,this.Name,this.YClose,this.Open,this.Price,this.High,this.Low,this.Amount,this.Vol,this.Increase,this.UpDown,this.Exchange,this.Amplitude,this.BuyPrice,this.BuyVol,this.SellPrice,this.SellVol,this.AvPrice,this.LimitHigh,this.LimitLow,this.VolIn,this.VolOut,this.DealNum,this.OutShares,this.TotalShares,this.MarketValue,this.CircMarketValue,this.CloseLine,this.ExtendData}function Pn(t){this.ClassName="JSReportChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="Loading",this.SplashTitle={StockList:"下载码表中.....",MemberList:"下载成分中....."},this.Canvas=t.getContext("2d"),this.Tooltip=document.createElement("div"),this.Tooltip.className="jsreport-tooltip",this.Tooltip.style.background=xi.TooltipBGColor,this.Tooltip.style.opacity=xi.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=b(),t.parentNode.appendChild(this.Tooltip),this.Symbol,this.Name,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[]},this.SourceData={Data:[]},this.BlockData=new Map,this.MapStockData=new Map,this.FixedRowData={Data:[],Type:0,Symbol:[]},this.FlashBG=new Map,this.FlashBGTimer=null,this.GlobalOption={FlashBGCount:0},this.SortInfo={Field:-1,Sort:0},this.DragRow,this.DragColumnWidth,this.EnableDragRow=!1,this.DragRowType=0,this.AutoDragScrollTimer=null,this.EnablePageScroll=!1,this.DragMove,this.DragHeader,this.EnableDragHeader=!1,this.mapEvent=new Map,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.DelayUpdateTimer=null,this.DelayUpdateFrequency=500,this.UIElement=t,this.LastPoint=new N,this.IsOnTouch=!1,this.TouchDrag,this.TouchMoveMinAngle=70,this.YStepPixel=5*I(),this.XStepPixel=10*I(),this.PageUpDownCycle=!0,this.DragPageCycle=!0,this.DragXScroll=null,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.StopAutoDragScrollTimer=function(){l.Chart.Log("[JSReportChartContainer::StopAutoDragScrollTimer] stop "),this.EnablePageScroll=!1,null!=this.AutoDragScrollTimer&&(clearTimeout(this.AutoDragScrollTimer),this.AutoDragScrollTimer=null)},this.AutoScrollPage=function(t){var e=this;this.AutoDragScrollTimer=setTimeout((function(){e.ChartOperator_Temp_ScrollPage(t)}),300)},this.ChartOperator_Temp_ScrollPage=function(t){if(this.EnablePageScroll){var e=this.GetReportChart();if(e){if(t>0){var a=e.GetCurrentPageStatus();if(a.IsEnd)return;this.MoveYOffset(t,!1),++t}else{if(!(t<0))return;if(this.Data.YOffset<=0)return;this.MoveYOffset(t,!1),--t}this.Draw(),this.EnablePageScroll&&this.AutoScrollPage(t)}}},this.ClearFixedRowData=function(){this.FixedRowData.Data=[],this.FixedRowData.Symbol=[]},this.SetFixedRowCount=function(t){var e=this.GetReportChart();e&&(e.FixedRowCount=t)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new On,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new _n;if(a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.GetBlockDataCallback=function(t){return e.GetBlockData(t)},a.GetFlashBGDataCallback=function(t,a){return e.GetFlashBGData(t,a)},a.Data=this.Data,a.GlobalOption=this.GlobalOption,a.FixedRowData=this.FixedRowData,a.SortInfo=this.SortInfo,a.Tab=new kn,a.Tab.Frame=this.Frame,a.Tab.Canvas=this.Canvas,a.Tab.ChartBorder=this.Frame.ChartBorder,a.Tab.Report=a,this.ChartPaint[0]=a,t&&!0===t.PageInfo){var i=new Gn;i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.Canvas=this.Canvas,i.Report=a,this.ChartPaint[1]=i}if(t&&(ze.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),ze.IsNumber(t.FixedColumn)&&(a.FixedColumn=t.FixedColumn),ze.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine),ze.IsBool(t.TabShow)&&(a.Tab.IsShow=t.TabShow),ze.IsNumber(t.FixedRowCount)&&(a.FixedRowCount=t.FixedRowCount),ze.IsBool(t.ItemBorder)&&(a.IsDrawBorder=t.ItemBorder),ze.IsNumber(t.SelectedModel)&&(a.SelectedModel=t.SelectedModel),ze.IsNonEmptyArray(t.FixedSymbol))){a.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var r=t.FixedSymbol,n=0;n<r.length;++n){var s=r[n];this.FixedRowData.Symbol.push(s.Symbol),++a.FixedRowCount}}var o=!0,h=!0;t&&(!1===t.KeyDown&&(o=!1,l.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(h=!1,l.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),o&&this.UIElement.addEventListener("keydown",(function(t){e.OnKeyDown(t)}),!0),h&&this.UIElement.addEventListener("wheel",(function(t){e.OnWheel(t)}),!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.onmouseup=function(t){e.UIOnMounseUp(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)},this.UIElement.ontouchstart=function(t){e.OnTouchStart(t)},this.UIElement.ontouchmove=function(t){e.OnTouchMove(t)},this.UIElement.ontouchend=function(t){e.OnTouchEnd(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=I();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(e=0;e<this.ChartPaint.length;++e){a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}this.GlobalOption.FlashBGCount>0&&this.DelayDraw(500)}},this.DelayDraw=function(t){var e=this;"number"==typeof this.FlashBGTimer&&(clearTimeout(this.FlashBGTimer),this.FlashBGTimer=null),this.FlashBGTimer=setTimeout((function(){e.Draw()}),t)},this.ResetReportStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetReportSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1)},this.ClearData=function(){this.SourceData.Data=[],this.Data.Data=[],this.BlockData=new Map},this.ResetSortStatus=function(){this.SortInfo.Field=-1,this.SortInfo.Sort=0},this.SetSymbolList=function(t,e){if(this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),ze.IsNonEmptyArray(t))for(var a=0;a<t.length;++a)this.Data.Data.push(t[a]);var i=this.ChartPaint[0];i&&(i.Data=this.Data),this.Draw()},this.ChangeSymbol=function(t,e){if(this.Symbol=t,this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),this.ResetReportSelectStatus(),e){if(ze.IsNumber(e.TabSelected)){var a=this.GetTabChart();a&&(a.SelectedTabIndex=e.TabSelected)}if(Array.isArray(e.FixedSymbol)){var i=this.GetReportChart();if(i){i.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var r=e.FixedSymbol,n=0;n<r.length;++n){var s=r[n];this.FixedRowData.Symbol.push(s.Symbol),++i.FixedRowCount}this.SetSizeChange(!0)}}if(e.SortInfo){s=e.SortInfo;ze.IsNumber(s.Field)&&(this.SortInfo.Field=s.Field),ze.IsNumber(s.Sort)&&(this.SortInfo.Sort=s.Sort)}}this.RequestMemberListData()},this.RequestMemberListData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSReportChartContainer::RequestMemberListData",Explain:"板块成分数据",Request:{Data:{symbol:this.Symbol}},Self:this,PreventDefault:!1};if(this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var a=this.GetReportChart();if(a){var i=a.Column[this.SortInfo.Field];e.Sort={Column:i,Field:this.SortInfo.Field,Sort:this.SortInfo.Sort}}}if(this.NetworkFilter(e,(function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMemberListData(e)})),1==e.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestMemberListData",Error:"(板块成分数据)不提供内置测试数据"}},this.RecvMemberListData=function(t){if(this.ClearData(),ze.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e)this.Data.Data.push(t.data[e]),this.SourceData.Data.push(t.data[e]);this.Draw(),this.UpdateStockData()},this.AutoUpdateEvent=function(t,e){var a=t?C.RECV_START_AUTOUPDATE:C.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestStockListData=function(t){this.ChartSplashPaint.SetTitle(this.SplashTitle.StockList),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var e=this;if(this.NetworkFilter){var a={Name:"JSReportChartContainer::RequestStockListData",Explain:"码表数据",Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(a){e.ChartSplashPaint.EnableSplash(!1),e.RecvStockListData(a,t)})),1==a.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockListData",Error:"(码表数据)不提供内置测试数据"}},this.RecvStockListData=function(t,e){if(ze.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0],n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Nn,n.OriginalSymbol=r,this.MapStockData.set(r,n)),n.Symbol=this.GetSymbolNoSuffix(r),n.Name=i[1],this.ReadStockJsonData(n,i)}e&&e.Callback?e.Callback():(this.Draw(),this.UpdateStockData())},this.UpdateMapStockData=function(t){if(t&&ze.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e){var a=t.data[e],i=a[0],r=null;this.MapStockData.has(i)?r=this.MapStockData.get(i):(r=new Nn,r.OriginalSymbol=i,this.MapStockData.set(i,r)),r.Symbol=this.GetSymbolNoSuffix(i),r.Name=a[1],this.ReadStockJsonData(r,a)}},this.GetStockData=function(t){return this.MapStockData&&this.MapStockData.has(t)?this.MapStockData.get(t):null},this.GetBlockData=function(t){return this.BlockData&&this.BlockData.has(t)?this.BlockData.get(t):null},this.SetFlashBGItem=function(t,e){var a={ID:e.ID,Color:e.Color,Count:1};if(ze.IsNumber(e.Count)&&(a.Count=e.Count),ze.IsNumber(e.Time)?a.Time=e.Time:a.Time=Date.now(),this.FlashBG.has(t)){var i=this.FlashBG.get(t);i.LastTime=a.Time,i.Data.set(a.ID,a)}else{i={LastTime:a.Time,Data:new Map([[a.ID,a]])};this.FlashBG.set(t,i)}},this.GetFlashBGData=function(t,e){if(!this.FlashBG)return null;if(!this.FlashBG.has(t))return null;var a=this.FlashBG.get(t);if(e-a.LastTime>=3e3)return this.FlashBG.delete(t),null;if(!a.Data||a.Data.size<=0)return this.FlashBG.delete(t),null;var i,r=[],n=(0,h.default)(a.Data);try{for(n.s();!(i=n.n()).done;){var s=i.value,o=s[1];(e-o.Time>=3e3||o.Count<=0)&&r.push(o.ID)}}catch(u){n.e(u)}finally{n.f()}if(ze.IsNonEmptyArray(r)){for(var l=0;l<r.length;++l)a.Data.delete(r[l]);if(a.Data.size<=0)return this.FlashBG.delete(t),null}return a},this.DelayUpdateStockData=function(){var t=this;null!=this.DelayUpdateTimer&&(clearTimeout(this.DelayUpdateTimer),this.DelayUpdateTimer=null);var e=this.DelayUpdateFrequency;this.DelayUpdateTimer=setTimeout((function(){t.UpdateStockData()}),e)},this.UpdateStockData=function(){if(ze.IsNonEmptyArray(this.Data.Data)){var t=this.ChartPaint[0];if(t){if(this.SortInfo&&this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var e=t.Column[this.SortInfo.Field];if(2==e.Sort)return void this.RequestStockSortData(e,this.SortInfo.Field,this.SortInfo.Sort)}var a=t.ShowSymbol;ze.IsNonEmptyArray(a)&&this.RequestStockData(a)}}},this.RequestStockData=function(t){var e=this;if(this.NetworkFilter){var a={Name:"JSDealChartContainer::RequestStockData",Explain:"报价列表股票数据",Request:{Data:{stocks:t}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,(function(t){e.RecvStockData(t),e.AutoUpdate()})),1==a.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockData",Error:"(报价列表股票数据)不提供内置测试数据"}},this.RecvStockData=function(t){var e=new Set;if(ze.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0];if(r){var n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Nn,n.OriginalSymbol=r,n.Symbol=this.GetSymbolNoSuffix(r),this.MapStockData.set(r,n)),this.ReadStockJsonData(n,i),e.has(r)||e.add(r)}}var s=this.ChartPaint[0];if(s){var o=!1,h=s.ShowSymbol;for(a=0;a<h.length;++a)if(e.has(h[a].Symbol)){o=!0;break}o&&this.Draw()}},this.ReadStockJsonData=function(t,e){ze.IsString(e[1])&&(t.Name=e[1]),ze.IsNumber(e[2])&&(t.YClose=e[2]),ze.IsNumber(e[3])&&(t.Open=e[3]),ze.IsNumber(e[4])&&(t.High=e[4]),ze.IsNumber(e[5])&&(t.Low=e[5]),ze.IsNumber(e[6])&&(t.Price=e[6]),ze.IsNumber(e[7])&&(t.Vol=e[7]),ze.IsNumber(e[8])&&(t.Amount=e[8]),ze.IsNumber(e[9])&&(t.BuyPrice=e[9]),ze.IsNumber(e[10])&&(t.BuyVol=e[10]),ze.IsNumber(e[11])&&(t.SellPrice=e[11]),ze.IsNumber(e[12])&&(t.SellVol=e[12]),ze.IsNumber(e[13])&&(t.AvPrice=e[13]),ze.IsNumber(e[14])&&(t.OutShares=e[14]),ze.IsNumber(e[15])&&(t.TotalShares=e[15]),ze.IsNumber(e[16])&&(t.LimitHigh=e[16]),ze.IsNumber(e[17])&&(t.LimitLow=e[17]),ze.IsNumber(e[18])&&(t.VolIn=e[18]),ze.IsNumber(e[19])&&(t.VolOut=e[19]),ze.IsNumber(e[20])&&(t.DealNum=e[20]),ze.IsNumber(e[21])&&(t.Increase=e[21]),ze.IsNumber(e[22])&&(t.UpDown=e[22]),ze.IsNumber(e[23])&&(t.Exchange=e[23]),ze.IsNumber(e[24])&&(t.Amplitude=e[24]),ze.IsNumber(e[25])&&(t.CircMarketValue=e[25]),ze.IsNumber(e[26])&&(t.MarketValue=e[26]),e[27]&&(t.NameEx=e[27]),ze.IsNumber(e[21])||ze.IsNumber(t.Price)&&ze.IsNumber(t.YClose)&&0!=t.YClose&&(t.Increase=(t.Price-t.YClose)/t.YClose*100),ze.IsNumber(e[22])||ze.IsNumber(t.Price)&&ze.IsNumber(t.YClose)&&(t.UpDown=t.Price-t.YClose),ze.IsNumber(e[23])||ze.IsNumber(t.Vol)&&ze.IsNumber(t.OutShares)&&t.OutShares>0&&(t.Exchange=t.Vol/t.OutShares*100),ze.IsNumber(e[24])||ze.IsNumber(t.High)&&ze.IsNumber(t.Low)&&ze.IsNumber(t.YClose)&&0!=t.YClose&&(t.Amplitude=(t.High-t.Low)/t.YClose*100),ze.IsNumber(e[25])||ze.IsNumber(t.OutShares)&&ze.IsNumber(t.Price)&&(t.CircMarketValue=t.OutShares*t.Price),ze.IsNumber(e[26])||ze.IsNumber(t.TotalShares)&&ze.IsNumber(t.Price)&&(t.MarketValue=t.TotalShares*t.Price),e[30]&&(t.ExtendData=e[30]),e[31]&&this.BlockData.set(t.OriginalSymbol,e[31]),e[32]&&(t.CloseLine=e[32]),e[33]&&(t.KLine=e[33])},this.GetSymbolNoSuffix=function(t){var e=t.lastIndexOf(".");return e>0?t.substring(0,e):t},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate){var e=this,a=2,i=this.GetEventCallback(C.ON_REPORT_MARKET_STATUS);if(i&&i.Callback){var r={MarketStatus:2};i.Callback(i,r,this),ze.IsNumber(r.MarketStatus)&&(a=r.MarketStatus)}if(0!=a&&3!=a){var n=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout((function(){e.AutoUpdate()}),n):2==a&&(this.AutoUpdateTimer=setTimeout((function(){e.UpdateStockData()}),n))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw(),this.DelayUpdateStockData())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(l.Chart.Log("[JSReportChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var e,a=t.clientX-this.UIElement.getBoundingClientRect().left,i=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),e=this.Canvas.isPointInPath(a,i),e){var r=this.ChartPaint[0];if(r){var n=t.wheelDelta;ze.IsObjectExist(t.wheelDelta)||(n=-.01*t.deltaY),n<0?this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData()):n>0&&this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData()),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=t.keyCode?t.keyCode:t.which;switch(a){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 38:var i=this.MoveSelectedRow(-1);i&&(i.Redraw&&this.Draw(),i.Update&&this.DelayUpdateStockData());break;case 40:i=this.MoveSelectedRow(1);i&&(i.Redraw&&this.Draw(),i.Update&&this.DelayUpdateStockData());break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw();break}t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.UIOnDblClick=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)},this.UIOnMouseDown=function(t){var e=this;this.DragXScroll=null,this.DragHeader=null,this.DragColumnWidth=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=I(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var s=n.PtInHeaderDragBorder(i,r);if(s)this.DragColumnWidth={ClickPoint:{X:i,Y:r},LastPoint:{X:i,Y:r},ClickData:s,ColumnWidth:s.Column.Width};else{var o=n.OnMouseDown(i,r,t);if(!o)return;if(2!=o.Type&&4!=o.Type||0!=t.button&&2!=t.button){if(3==o.Type&&0==t.button)this.DragHeader={ClickPoint:{X:i,Y:r},Click:{X:t.clientX,Y:t.clientY},ClickData:o,LastMove:{X:t.clientX,Y:t.clientY},MovePoint:null,MoveToData:null};else if(1==o.Type&&0==t.button){var h=o.Tab;1==h.Type?this.MoveXOffset(-1)&&this.Draw():2==h.Type?this.MoveXOffset(1)&&this.Draw():3==h.Type?this.DragXScroll={Click:{X:i,Y:r},LastMove:{X:i,Y:r}}:4==h.Type?this.SetXOffset(h.Pos)&&this.Draw():5==h.Type&&this.OnClickTab(h,t)}}else 0==t.button&&2==o.Type&&this.EnableDragRow&&this.SortInfo.Sort<=0&&(this.DragRow={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:o}),1==o.Redraw&&this.Draw()}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnMounseUp=function(t){console.log('"UIOnMounseUp')},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(!this.DragRow&&!this.DrawHeader&&!this.DragColumnWidth){var r=this.GetTabChart();if(r){var n=r.PtInTab(a,i);if(n){var s=n.Index;r.MoveOnTabIndex!=s&&(r.MoveOnTabIndex=s,this.Draw())}}var o={Cursor:"default",Name:"Default"},h=this.GetReportChart(),u=null;if(h){var c=h.PtInHeaderDragBorder(a,i);c?(o={Cursor:"col-resize",Name:"DragHeaderWidth"},l.Chart.Log("[JSReportChartContainer::UIOnMouseMove] drag column width ",c)):u=h.PtInCell(a,i)}var d=this.GetEventCallback(C.ON_REPORT_MOUSE_MOVE);if(d){var f={X:a,Y:i,Cell:u};d.Callback(d,f,this)}o&&(this.UIElement.style.cursor=o.Cursor)}},this.UIOnMounseOut=function(t){var e=this.GetTabChart();e&&e.MoveOnTabIndex>=0&&(e.MoveOnTabIndex=-1,this.Draw())},this.UIOnMouseleave=function(t){var e=this.GetTabChart();e&&e.MoveOnTabIndex>=0&&(e.MoveOnTabIndex=-1,this.Draw())},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,this.DragMove.Move.X==this.DragMove.PreMove.X&&this.DragMove.Move.Y==this.DragMove.PreMove.Y||this.StopAutoDragScrollTimer(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragRow){var r=this.DragRow,n=r.LastMove.Y-t.clientY;if(Math.abs(n)<2)return;var s=this.GetReportChart();if(r.LastMove.X=t.clientX,r.LastMove.Y=t.clientY,r.Inside={X:a,Y:i},s){var o=s.OnDrawgRow(a,i,t);if(o)if(2==o.Type)o.Data.DataIndex!=r.Data.Row.DataIndex&&(r.MoveRow=o);else if(7==o.Type){var h=s.GetCurrentPageStatus();h.IsEnd||(this.MoveYOffset(1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(2))}else 5==o.Type&&this.Data.YOffset>0&&(this.MoveYOffset(-1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(-2));s.DragRow=r}this.Draw()}else if(this.DragXScroll){var l=this.ChartPaint[0];if(!l||!l.Tab)return;this.DragXScroll.LastMove.X=a,this.DragXScroll.LastMove.Y=i;var u=l.Tab.GetScrollPostionByPoint(a,i);this.SetXOffset(u)&&this.Draw()}else if(this.DragHeader&&this.DragHeader.ClickData){if(this.DragHeader.ClickData.Header.IsFixed)return;if(!this.EnableDragHeader)return;var c=t.clientX-this.DragHeader.Click.X,d=t.clientY-this.DragHeader.Click.Y;if(Math.abs(d)<=1&&Math.abs(c)<=1)return;this.DragHeader.LastMove.X=t.clientX,this.DragHeader.LastMove.Y=t.clientY,this.DragHeader.MovePoint?(this.DragHeader.MovePoint.X=a,this.DragHeader.MovePoint.Y=i):this.DragHeader.MovePoint={X:a,Y:i},this.OnMoveDragHeader(a,i,t),this.ShowDragHeaderTooltip(a,i,t)}else if(this.DragColumnWidth&&this.DragColumnWidth.ClickData){c=a-this.DragColumnWidth.ClickPoint.X;if(Math.abs(c)<1)return;var f=this.DragColumnWidth.ColumnWidth+c;if(f<=10)return;var m=this.DragColumnWidth.ClickData.Index,D=this.GetEventCallback(C.ON_REPORT_DRAG_COLUMN_WIDTH);if(D&&D.Callback){var p={Index:m,Width:f,PreventDefault:!1};if(this.DragColumnWidth&&this.DragColumnWidth.ClickData&&(p.Column=this.DragColumnWidth.ClickData.Column),D.Callback(D,p,this),p.PreventDefault)return}this.SetColumnFixedWidth(m,f),this.DragColumnWidth.LastPoint.X=a,this.DragColumnWidth.LastPoint.Y=i}}},this.SetColumnFixedWidth=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Column[t];i&&(i.FixedWidth=e,this.SetSizeChange(!0),this.Draw())}},this.OnMoveDragHeader=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this.DragHeader.ClickData;if(this.DragHeader.MoveToData=null,!r.Header.IsFixed){var n=this.DragHeader.ClickPoint.Y,s=i.OnMouseDown(t,n,a);if(!s||!s.Header)return;if(s.Header.IsFixed)return;if(s.Header.Index==r.Header.Index)return;this.DragHeader.MoveToData=s,console.log("[JSReportChartContainer::OnMoveDragHeader] Click[Index=".concat(r.Header.Index,", Title=").concat(r.Header.Column.Title,"] => Move[Index=").concat(s.Header.Index,", Title=").concat(s.Header.Column.Title,"]"))}}},this.ShowDragHeaderTooltip=function(t,e,a){if(this.DragHeader){var i=this.DragHeader;if(i.ClickData&&i.MovePoint){var r=this.GetEventCallback(C.ON_REPORT_DRAG_HEADER_TOOLTIP);if(r){var n={PreventDefault:!1,e:a,X:t,Y:e,DragHeader:this.DragHeader,Tooltip:this.Tooltip};if(r.Callback(r,n,this),n.PreventDefault)return}var s=i.ClickData.Header.Column.Title;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=a.clientX+"px",this.Tooltip.style.top=a.clientY+"px",this.Tooltip.style.width="100px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=s,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.StopAutoDragScrollTimer(),this.HideTooltip();var e=this.GetReportChart(),a={Cursor:"default",Name:"Default"},i=!1;this.DragRow&&(e&&(this.OnDragRow(),e.DragRow=null),i=!0);var r=this.DragHeader;if(this.DragHeader=null,this.DragXScroll=null,this.DragRow=null,this.DragMove=null,this.DragColumnWidth=null,i&&this.Draw(),r){var n=r.ClickData,s=r.MoveToData;n&&s?this.SwapColumn(n.Header.Index,s.Header.Index,{Redraw:!0}):this.OnClickHeader(n,t)}a&&(this.UIElement.style.cursor=a.Cursor)},this.OnDragRow=function(){if(this.SourceData&&ze.IsNonEmptyArray(this.SourceData.Data)&&this.DragRow&&this.DragRow.MoveRow){var t=this.DragRow,e=t.Data.Row.DataIndex,a=t.MoveRow.Data.DataIndex;if(!(e==a||e<0||a<0)){var i=this.SourceData.Data;if(!(e>=i.length||a>=i.length)){var r=this.GetEventCallback(C.ON_REPORT_DRAG_ROW);if(r){var n={Symbol:this.Symbol,Src:{Index:e,Symbol:i[e]},To:{Index:a,Symbol:i[a]},PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}if(1==this.DragRowType){var s=i[e];i[e]=i[a],i[a]=s,this.Data.Data=i.slice(0)}else{var o=i[e];i.splice(e,1),i.splice(a,0,o),this.Data.Data=i.slice(0)}var h=this.GetReportChart();h&&(0==h.SelectedModel?h.SelectedRow=t.MoveRow.Data.Index:h.SelectedRow=t.MoveRow.Data.DataIndex)}}}},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.GetTouchData=function(t){for(var e=[],a=I(),i=0;i<t.touches.length;++i){var r=t.touches[i],n={clientX:r.clientX*a,clientY:r.clientY*a,pageX:r.pageX*a,pageY:r.pageY*a,InsideX:(r.clientX-this.UIElement.getBoundingClientRect().left)*a,InsideY:(r.clientY-this.UIElement.getBoundingClientRect().top)*a};e.push(n)}return e},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y),r=180*Math.atan(a/i)/Math.PI;return r},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0;var e=this.GetReportChart();if(e&&this.IsPhoneDragging(t)){var a={Click:{},LastMove:{},InsideClick:{}},i=this.GetTouchData(t);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.InsideClick.X=i[0].InsideX,a.InsideClick.Y=i[0].InsideY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,a.IsXMove=!1,a.IsYMove=!1,e.IsPtInBody(a.InsideClick.X,a.InsideClick.Y)&&(this.TouchDrag=a),this.TouchInfo={InsideClick:{X:i[0].InsideX,Y:i[0].InsideY},Click:{X:i[0].clientX,Y:i[0].clientY}},this.PreventTouchEvent(t)}}},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var s=parseInt(a/n);return!(s<=0)&&(0==r&&(s*=-1),this.MoveYOffset(s,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var s=parseInt(a/n);return!(s<=0)&&(r||(s*=-1),this.MoveXOffset(s)&&(t.IsXMove=!0,this.Draw()),!0)},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=this.GetTouchData(t);if(this.IsPhoneDragging(t)){var i=this.TouchDrag;if(this.TouchInfo.Move={X:a[0].clientX,Y:a[0].clientY},i){this.PreventTouchEvent(t);var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),s=Math.abs(i.LastMove.Y-a[0].clientY);if(1==i.IsYMove){if(this.ShowPageInfo(!0),!this.OnDragYOffset(i,a,s,t))return}else if(1==i.IsXMove){if(!this.OnDragXOffset(i,a,n,t))return}else if(s>0&&r<this.TouchMoveMinAngle){if(this.ShowPageInfo(!0),!this.OnDragYOffset(i,a,s,t))return}else{if(!(n>0&&r>=this.TouchMoveMinAngle))return;if(!this.OnDragXOffset(i,a,n,t))return}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}}}},this.OnTouchEnd=function(t){l.Chart.Log("[JSReportChartContainer:OnTouchEnd]",t),this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||(this.ShowPageInfo(!1),this.OnTouchClick(this.TouchInfo,t),this.IsOnTouch=!1,this.TouchDrag=null,this.TouchInfo=null)},this.OnTouchClick=function(t,e){if(!t||!t.Click)return!1;if(t.Move)return!1;var a=t.InsideClick,i=this.GetReportChart();if(!i)return!1;var r=i.OnMouseDown(a.X,a.Y,e);if(!r)return!1;2==r.Type||4==r.Type?1==r.Redraw&&this.Draw():3==r.Type&&this.OnClickHeader(r,e),l.Chart.Log("[JSReportChartContainer:OnTouchClick] clickData",r)},this.GetTabChart=function(){var t=this.ChartPaint[0];return t?t.Tab:null},this.GetReportChart=function(){var t=this.ChartPaint[0];return t},this.GotoNextPage=function(t){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset+a>=this.Data.Data.length)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;var i=this.Data.Data.length-this.Data.YOffset;return 0==e.SelectedModel&&e.SelectedRow>i-1&&(e.SelectedRow=i-1),!0},this.GotoPreviousPage=function(t){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=this.Data.Data.length-a,!0);var i=this.Data.YOffset;return i-=a,i<0&&(i=0),this.Data.YOffset=i,!0},this.MoveYOffset=function(t,e){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,s=this.Data.YOffset;if(e)for(var o=0;o<t;++o)++s,s+n>r&&(s=0);else{if(s+n>=r)return!1;for(o=0;o<t;++o){if(s+n+1>r)break;++s}}return this.Data.YOffset=s,!0}if(t<0){t=Math.abs(t);s=this.Data.YOffset;if(e)for(n=i.PageSize,o=0;o<t;++o)--s,s<0&&(s=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(o=0;o<t;++o){if(s-1<0)break;--s}}return this.Data.YOffset=s,!0}return!1},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1,Update:!1};if(0==e.SelectedModel){var i=e.GetCurrentPageStatus(),r=i.End-i.Start+1,n=i.SelectedRow;if(t>0)return n+=t,n%=r,e.SelectedRow=n,e.SelectedFixedRow=-1,a.Redraw=!0,a;if(t<0)return n+=t,n<0&&(n%=r,n=r+n),e.SelectedRow=n,e.SelectedFixedRow=-1,a.Redraw=!0,a}else if(1==e.SelectedModel){i=e.GetCurrentPageStatus(),r=i.PageSize,n=i.SelectedRow;if(t>0){if(n<0||n<i.Start||n>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var s=this.Data.YOffset,o=0;o<t;++o)++n,n>i.End&&++s,n>=this.Data.Data.length&&(n=0,s=0);return a.Redraw=!0,a.Update=s!=this.Data.YOffset,e.SelectedRow=n,this.Data.YOffset=s,a}if(t<0){if(n<0||n<i.Start||n>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(s=this.Data.YOffset,o=0;o<t;++o)--n,n<i.Start&&--s,n<0&&(n=this.Data.Data.length-1,s=this.Data.Data.length-r,s<0&&(s=0));return a.Redraw=!0,a.Update=s!=this.Data.YOffset,e.SelectedRow=n,this.Data.YOffset=s,a}}return null},this.MoveXOffset=function(t){var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();if(a<=0)return!1;if(t>0){if(this.Data.XOffset>=a)return!1;for(var i=0;i<t;++i){if(this.Data.XOffset>=a)break;++this.Data.XOffset}return!0}if(t<0){if(this.Data.XOffset<=0)return!1;t=Math.abs(t);for(i=0;i<t;++i){if(this.Data.XOffset-1<0)break;--this.Data.XOffset}return!0}return!1},this.SetXOffset=function(t){if(!ze.IsNumber(t))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();return t<0&&(t=0),t>a&&(t=a),this.Data.XOffset=t,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.SetTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SetTabList(t),e&&e.Redraw&&this.Draw())}},this.SetSelectedTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SelectedTabIndex=t)}},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.OnClickHeader=function(t,e){var a=this,i=t.Header;if(i.Column&&(1==i.Column.Sort||2==i.Column.Sort)){var r=i.Index,n={Field:this.SortInfo.Field,Sort:this.SortInfo.Sort},s=i.Column.SortType;if(n.Field!=r)n.Field=r,n.Sort=s[0];else if(1==s.length)n.Sort=s[0];else for(var o=0;o<s.length;++o)if(n.Sort==s[o]){n.Sort=s[(o+1)%s.length];break}if(1==i.Column.Sort||2==i.Column.Sort){if(0==n.Sort){this.Data.Data=[];for(o=0;o<this.SourceData.Data.length;++o)this.Data.Data.push(this.SourceData.Data[o])}else if(1==i.Column.Sort){var h=this.GetEventCallback(C.ON_REPORT_LOCAL_SORT);if(h&&h.Callback){var l={Column:i.Column,SortInfo:n,SymbolList:this.Data.Data,Result:null};h.Callback(h,l,this),Array.isArray(l.Result)&&(this.Data.Data=l.Result)}else this.Data.Data.sort((function(t,e){return a.LocalSort(t,e,i.Column,n.Sort)}))}else if(2==i.Column.Sort){if(!ze.IsNonEmptyArray(this.Data.Data))return;return this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Data.YOffset=0,this.ResetReportSelectStatus(),void this.RequestStockSortData(i.Column,n.Field,n.Sort)}this.Data.YOffset=0,this.ResetReportSelectStatus(),this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Draw(),this.DelayUpdateStockData()}}},this.OnClickTab=function(t,e){if(t.Tab){var a=!1,i=I(),r=(e.clientX-this.UIElement.getBoundingClientRect().left)*i,n=(e.clientY,this.UIElement.getBoundingClientRect().top,{Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top});if(t.Tab.IsMenu){var s=this.GetEventCallback(C.ON_CLICK_REPORT_TABMENU);if(s&&s.Callback){a=!0;var o=t.Rect,h={Left:o.Left/i,Right:o.Right/i,Top:o.Top/i,Bottom:o.Bottom/i},l={Data:t,IsSide:{X:r,Y:r},UIElement:n,Rect:h,e:e,Redraw:a};s.Callback(s,l,this),ze.IsBool(l.Redraw)&&(a=l.Redraw)}this.SetSelectedTab(t.Index)}else{s=this.GetEventCallback(C.ON_CLICK_REPORT_TAB);if(s&&s.Callback){l={Data:t,IsSide:{X:r,Y:r},UIElement:n,e:e,Redraw:a};s.Callback(s,l,this),ze.IsBool(l.Redraw)&&(a=l.Redraw)}this.SetSelectedTab(t.Index)}a&&this.Draw()}},this.SwapColumn=function(t,e,a){var i=this.GetReportChart();i&&i.SwapColumn(t,e)&&a&&a.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.LocalSort=function(t,e,a,i){switch(a.Type){case Rn.SYMBOL_ID:case Rn.NAME_ID:return this.LocalStringSort(t,e,a,i);case Rn.NAME_EX_ID:return this.LocalNameExSort(t,e,a,i);case Rn.PRICE_ID:case Rn.VOL_ID:case Rn.INCREASE_ID:case Rn.UPDOWN_ID:case Rn.BUY_PRICE_ID:case Rn.SELL_PRICE_ID:case Rn.AMOUNT_ID:case Rn.BUY_VOL_ID:case Rn.SELL_VOL_ID:case Rn.YCLOSE_ID:case Rn.OPEN_ID:case Rn.HIGH_ID:case Rn.LOW_ID:case Rn.AVERAGE_PRICE_ID:case Rn.OUTSTANDING_SHARES_ID:case Rn.TOTAL_SHARES_ID:case Rn.CIRC_MARKET_VALUE_ID:case Rn.MARKET_VALUE_ID:case Rn.EXCHANGE_RATE_ID:case Rn.AMPLITUDE_ID:case Rn.LIMIT_HIGH_ID:case Rn.LIMIT_LOW_ID:case Rn.VOL_IN_ID:case Rn.VOL_OUT_ID:return this.LocalNumberSort(t,e,a,i);case Rn.CUSTOM_NUMBER_TEXT_ID:return this.LoacCustomNumberSort(t,e,a,i);case Rn.CUSTOM_STRING_TEXT_ID:return this.LoacCustomStringSort(t,e,a,i);case Rn.CUSTOM_DATETIME_TEXT_ID:return this.LoacCustomDateTimeSort(t,e,a,i);default:return 0}},this.GetStockExtendData=function(t,e){if(ze.IsNumber(e.DataIndex)){if(e.DataIndex<0)return null;var a=this.GetStockData(t);return a&&a.ExtendData?a.ExtendData[e.DataIndex]:null}if(ze.IsNumber(e.BlockIndex)){if(e.BlockIndex<0)return null;a=this.GetBlockData(t);return a?a[e.BlockIndex]:null}return null},this.LocalNameExSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),s="",o="";return 2==i&&(s="啊啊啊啊啊",o="啊啊啊啊啊"),r&&r.Name&&(s=r.Name),n&&n.Name&&(o=n.Name),1==i?o<s?-1:o<s?1:0:s<o?-1:s>o?1:0},this.LocalStringSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),s="",o="";2==i&&(s="啊啊啊啊啊",o="啊啊啊啊啊");var h=Bn.get(a.Type);return r&&r[h]&&(s=r[h]),n&&n[h]&&(o=n[h]),1==i?o<s?-1:o<s?1:0:s<o?-1:s>o?1:0},this.LocalNumberSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),s=-99999999999999,o=-99999999999999;2==i&&(s=o=99999999999999);var h=Bn.get(a.Type);return r&&ze.IsNumber(r[h])&&(s=r[h]),n&&ze.IsNumber(n[h])&&(o=n[h]),1==i?o<s?-1:o<s?1:0:s<o?-1:s>o?1:0},this.LoacCustomNumberSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var s=this.GetStockExtendData(t,a);ze.IsNumber(s)&&(r=s);s=this.GetStockExtendData(e,a);return ze.IsNumber(s)&&(n=s),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.LoacCustomDateTimeSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var s=this.GetStockExtendData(t,a);ze.IsNumber(s)&&(r=s);s=this.GetStockExtendData(e,a);return ze.IsNumber(s)&&(n=s),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.RequestStockSortData=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this,n=this.Data.YOffset,s=i.GetPageSize(),o=n+s;if(o>=this.Data.Data.length&&(o=this.Data.Data.length-1),this.NetworkFilter){var h={Name:"JSDealChartContainer::RequestStockSortData",Explain:"报价列表股票排序数据",Request:{Data:{range:{start:n,end:o,count:this.Data.Data.length},column:{name:t.Title,type:t.Type,index:e,ID:t.ID},sort:a,symbol:this.Symbol,name:this.Name,pageSize:s}},Self:this,PreventDefault:!1};if(i.FixedRowCount>0&&1==i.FixedRowData.Type){for(var l=[],u=0;u<i.FixedRowData.Symbol.length;++u){var c=i.FixedRowData.Symbol[u];c&&l.push(c)}h.Request.FixedSymbol=l}if(this.NetworkFilter(h,(function(t){r.RecvStockSortData(t),r.AutoUpdate()})),1==h.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockSortData",Error:"(报价列表股票排序数据)不提供内置测试数据"}}},this.RecvStockSortData=function(t){var e=[];if(ze.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0];if(r){var n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Nn,n.OriginalSymbol=r,n.Symbol=this.GetSymbolNoSuffix(r),this.MapStockData.set(r,n)),this.ReadStockJsonData(n,i),e.push(r)}}if(ze.IsNonEmptyArray(t.index))for(a=0;a<t.index.length;++a){var s=t.index[a],o=e[a],h=this.Data.Data[s];o!=h&&(this.Data.Data[s]=o)}var l=this.ChartPaint[0];if(l){this.Draw()}},this.ShowPageInfo=function(t){var e=this.ChartPaint[1];return!!e&&(e.IsShow=t,!0)}}function On(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=xi.Report.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=xi.Report.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font},this.Draw=function(){var t=F(this.ChartBorder.GetLeft()),e=F(this.ChartBorder.GetTop()),a=F(this.ChartBorder.GetRight()),i=F(this.ChartBorder.GetBottom()),r=a-t,n=i-e;ze.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=xi.FrameLogo.Text;if(ze.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}En.Init=function(t){var e=new En(t);return e.OnSize(),e},En.SetStyle=function(t){t&&xi.SetStyle(t)},En.GetResource=function(){return xi};var Rn={SYMBOL_ID:0,NAME_ID:1,PRICE_ID:2,VOL_ID:3,INCREASE_ID:4,UPDOWN_ID:5,BUY_PRICE_ID:6,SELL_PRICE_ID:7,AMOUNT_ID:8,BUY_VOL_ID:9,SELL_VOL_ID:10,YCLOSE_ID:11,OPEN_ID:12,HIGH_ID:13,LOW_ID:14,AVERAGE_PRICE_ID:15,INDEX_ID:16,OUTSTANDING_SHARES_ID:17,TOTAL_SHARES_ID:18,CIRC_MARKET_VALUE_ID:19,MARKET_VALUE_ID:20,EXCHANGE_RATE_ID:21,AMPLITUDE_ID:22,LIMIT_HIGH_ID:23,LIMIT_LOW_ID:24,VOL_IN_ID:25,VOL_OUT_ID:26,NAME_EX_ID:27,CLOSE_LINE_ID:28,KLINE_ID:29,SYMBOL_NAME_ID:99,CUSTOM_STRING_TEXT_ID:100,CUSTOM_NUMBER_TEXT_ID:101,CUSTOM_DATETIME_TEXT_ID:102,CUSTOM_ICON_ID:103},Bn=new Map([[Rn.SYMBOL_ID,"Symbol"],[Rn.NAME_ID,"Name"],[Rn.PRICE_ID,"Price"],[Rn.INCREASE_ID,"Increase"],[Rn.UPDOWN_ID,"UpDown"],[Rn.VOL_ID,"Vol"],[Rn.BUY_PRICE_ID,"BuyPrice"],[Rn.SELL_PRICE_ID,"SellPrice"],[Rn.AMOUNT_ID,"Amount"],[Rn.BUY_VOL_ID,"BuyVol"],[Rn.SELL_VOL_ID,"SellVol"],[Rn.YCLOSE_ID,"YClose"],[Rn.OPEN_ID,"Open"],[Rn.HIGH_ID,"High"],[Rn.LOW_ID,"Low"],[Rn.AVERAGE_PRICE_ID,"AvPrice"],[Rn.OUTSTANDING_SHARES_ID,"OutShares"],[Rn.TOTAL_SHARES_ID,"TotalShares"],[Rn.CIRC_MARKET_VALUE_ID,"CircMarketValue"],[Rn.MARKET_VALUE_ID,"MarketValue"],[Rn.EXCHANGE_RATE_ID,"Exchange"],[Rn.AMPLITUDE_ID,"Amplitude"],[Rn.LIMIT_HIGH_ID,"LimitHigh"],[Rn.LIMIT_LOW_ID,"LimitLow"],[Rn.VOL_IN_ID,"VolIn"],[Rn.VOL_OUT_ID,"VolOut"],[Rn.NAME_EX_ID,"NameEx"]]);function _n(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReport",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.GetStockDataCallback,this.GetFlashBGDataCallback,this.GetBlockDataCallback,this.Data,this.FixedRowData,this.SortInfo,this.FixedColumn=2,this.FixedRowCount=0,this.IsShowHeader=!0,this.SizeChange=!0,this.SelectedModel=0,this.SelectedRow=-1,this.SelectedFixedRow=-1,this.IsDrawBorder=1,this.ShowSymbol=[],this.DragRow,this.Tab,this.GlobalOption,this.UpColor=xi.Report.UpTextColor,this.DownColor=xi.Report.DownTextColor,this.UnchagneColor=xi.Report.UnchagneTextColor,this.BorderColor=xi.Report.BorderColor,this.SelectedColor=xi.Report.SelectedColor,this.HeaderFontConfig={Size:xi.Report.Header.Font.Size,Name:xi.Report.Header.Font.Name},this.HeaderColor=xi.Report.Header.Color,this.SortColor=xi.Report.Header.SortColor,this.HeaderMergin={Left:xi.Report.Header.Mergin.Left,Right:xi.Report.Header.Mergin.Right,Top:xi.Report.Header.Mergin.Top,Bottom:xi.Report.Header.Mergin.Bottom},this.ItemFontConfig={Size:xi.Report.Item.Font.Size,Name:xi.Report.Item.Font.Name},this.ItemFixedFontConfg={Size:xi.Report.FixedItem.Font.Size,Name:xi.Report.FixedItem.Font.Name},this.ItemMergin={Left:xi.Report.Item.Mergin.Left,Right:xi.Report.Item.Mergin.Right,Top:xi.Report.Item.Mergin.Top,Bottom:xi.Report.Item.Mergin.Bottom},this.BarMergin={Top:xi.Report.Item.BarMergin.Top,Left:xi.Report.Item.BarMergin.Left,Right:xi.Report.Item.BarMergin.Right,Bottom:xi.Report.Item.BarMergin.Bottom},this.LimitDrawType=0,this.LimitBorderColor=xi.Report.LimitBorder.Color,this.LimitUpBGColor=xi.Report.LimitColor.UpColor,this.LimitDownBGColor=xi.Report.LimitColor.DownColor,this.LimitTextColor=xi.Report.LimitColor.TextColor,this.LimitMergin={Top:xi.Report.LimitBorder.Mergin.Top,Left:xi.Report.LimitBorder.Mergin.Left,Right:xi.Report.LimitBorder.Mergin.Right,Bottom:xi.Report.LimitBorder.Mergin.Bottom},this.DragRowColor=xi.Report.DragRow.Color,this.DragRowTextColor=xi.Report.DragRow.TextColor,this.DragMoveRowColor=xi.Report.DragRow.MoveRowColor,this.DragSrcRowColor=xi.Report.DragRow.SrcRowColor,this.CloseLineConfig={CloseColor:xi.Report.CloseLine.CloseColor,YCloseColor:xi.Report.CloseLine.YCloseColor,AreaColor:xi.Report.CloseLine.AreaColor},this.KLineConfig={UpColor:xi.Report.KLine.UpColor,DownColor:xi.Report.KLine.DownColor,UnchagneColor:xi.Report.KLine.UnchagneColor,DataWidth:xi.Report.KLine.DataWidth,DistanceWidth:xi.Report.KLine.DistanceWidth},this.ItemSymbolFontConfig={Size:xi.Report.Item.SymbolFont.Size,Name:xi.Report.Item.SymbolFont.Name},this.ItemNameFontConfg={Size:xi.Report.Item.NameFont.Size,Name:xi.Report.Item.NameFont.Name},this.HeaderFont=12*I()+"px 微软雅黑",this.ItemFont=15*I()+"px 微软雅黑",this.ItemFixedFont=15*I()+"px 微软雅黑",this.ItemSymbolFont=12*I()+"px 微软雅黑",this.ItemNameFont=15*I()+"px 微软雅黑",this.ItemNameHeight=0,this.RowCount=0,this.HeaderHeight=0,this.FixedRowHeight=0,this.RowHeight=0,this.BottomToolbarHeight=0,this.IsShowAllColumn=!1,this.Column=[{Type:Rn.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:xi.Report.FieldColor.Index,MaxText:"8888"},{Type:Rn.SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Symbol,MaxText:"888888"},{Type:Rn.NAME_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Name,MaxText:"擎擎擎擎"},{Type:Rn.INCREASE_ID,Title:"涨幅%",TextAlign:"right",Width:null,MaxText:"-888.88"}],this.RectClient={},this.TooltipRect=[],this.ReloadResource=function(t){this.UpColor=xi.Report.UpTextColor,this.DownColor=xi.Report.DownTextColor,this.UnchagneColor=xi.Report.UnchagneTextColor,this.BorderColor=xi.Report.BorderColor,this.SelectedColor=xi.Report.SelectedColor,this.HeaderFontConfig={Size:xi.Report.Header.Font.Size,Name:xi.Report.Header.Font.Name},this.HeaderColor=xi.Report.Header.Color,this.SortColor=xi.Report.Header.SortColor,this.HeaderMergin={Left:xi.Report.Header.Mergin.Left,Right:xi.Report.Header.Mergin.Right,Top:xi.Report.Header.Mergin.Top,Bottom:xi.Report.Header.Mergin.Bottom},this.ItemFontConfig={Size:xi.Report.Item.Font.Size,Name:xi.Report.Item.Font.Name},this.ItemMergin={Left:xi.Report.Item.Mergin.Left,Right:xi.Report.Item.Mergin.Right,Top:xi.Report.Item.Mergin.Top,Bottom:xi.Report.Item.Mergin.Bottom},this.BarMergin={Top:xi.Report.Item.BarMergin.Top,Left:xi.Report.Item.BarMergin.Left,Right:xi.Report.Item.BarMergin.Right,Bottom:xi.Report.Item.BarMergin.Bottom},this.LimitBorderColor=xi.Report.LimitBorder.Color,this.LimitMergin={Top:xi.Report.LimitBorder.Mergin.Top,Left:xi.Report.LimitBorder.Mergin.Left,Right:xi.Report.LimitBorder.Mergin.Right,Bottom:xi.Report.LimitBorder.Mergin.Bottom};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==Rn.INDEX_ID?a.TextColor=xi.Report.FieldColor.Index:a.Type==Rn.SYMBOL_ID?a.TextColor=xi.Report.FieldColor.Symbol:a.Type==Rn.NAME_ID?a.TextColor=xi.Report.FieldColor.Name:a.Type==Rn.VOL_ID||a.Type==Rn.BUY_VOL_ID||a.Type==Rn.SELL_VOL_ID?a.TextColor=xi.Report.FieldColor.Vol:a.Type==Rn.AMOUNT_ID?a.TextColor=xi.Report.FieldColor.Amount:a.Type==Rn.VOL_IN_ID?a.TextColor=xi.Report.DownTextColor:a.Type==Rn.VOL_OUT_ID?a.TextColor=xi.Report.UpTextColor:a.TextColor=xi.Report.FieldColor.Text}this.Tab&&this.Tab.ReloadResource(t)},this.SetColumn=function(t){if(ze.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.ID&&(i.ID=a.ID),ze.IsNumber(a.Sort)&&(i.Sort=a.Sort),ze.IsBool(a.EnableTooltip)&&(i.EnableTooltip=a.EnableTooltip),ze.IsNumber(a.FixedWidth)&&(i.FixedWidth=a.FixedWidth),ze.IsBool(a.EnableDragWidth)&&(i.EnableDragWidth=a.EnableDragWidth),ze.IsBool(a.IsDrawCallback)?i.IsDrawCallback=a.IsDrawCallback:i.IsDrawCallback=!1,1!=a.Sort&&2!=a.Sort||(i.SortType=[1,2],ze.IsNonEmptyArray(a.SortType)&&(i.SortType=a.SortType.slice())),a.Type==Rn.CUSTOM_STRING_TEXT_ID){if(!ze.IsNumber(a.DataIndex)&&!ze.IsNumber(a.BlockIndex))continue;ze.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),ze.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex)}else if(a.Type==Rn.CUSTOM_NUMBER_TEXT_ID){if(!ze.IsNumber(a.DataIndex)&&!ze.IsNumber(a.BlockIndex))continue;ze.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),ze.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.Decimal=2,i.FormatType=0,i.ColorType=0,ze.IsNumber(a.Decimal)&&(i.Decimal=a.Decimal),ze.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),ze.IsNumber(a.ColorType)&&(i.ColorType=a.ColorType)}else if(a.Type==Rn.CUSTOM_DATETIME_TEXT_ID){if(!ze.IsNumber(a.DataIndex)&&!ze.IsNumber(a.BlockIndex))continue;ze.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),ze.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.FormatType=0,i.ValueType=0,ze.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),ze.IsNumber(a.ValueType)&&(i.FormatType=a.ValueType)}else a.Type==Rn.CUSTOM_ICON_ID||a.Type==Rn.CLOSE_LINE_ID&&ze.IsBool(a.IsDrawArea)&&(i.IsDrawArea=a.IsDrawArea);this.Column.push(i)}}}},this.SwapColumn=function(t,e){if(!ze.IsNumber(t)||!ze.IsNumber(e))return!1;var a=this.Column.length;if(t<0||t>=a)return!1;if(e<0||e>=a)return!1;if(t!=e){var i=this.Column[t];return this.Column[t]=this.Column[e],this.Column[e]=i,!0}},this.GetXScrollPos=function(){return this.Data.XOffset},this.GetXScrollRange=function(){var t=this.Column.length-this.FixedColumn-3;return t<0?0:t},this.GetDefaultColunm=function(t){for(var e=[{Type:Rn.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:xi.Report.FieldColor.Index,MaxText:"8888"},{Type:Rn.SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Symbol,MaxText:"888888"},{Type:Rn.NAME_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Name,MaxText:"擎擎擎擎0"},{Type:Rn.NAME_EX_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Name,MaxText:"擎擎擎擎擎擎"},{Type:Rn.SYMBOL_NAME_ID,Title:"股票名称",TextAlign:"left",Width:null,TextColor:xi.Report.FieldColor.Name,MaxText:"擎擎擎擎0"},{Type:Rn.INCREASE_ID,Title:"涨幅%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:Rn.PRICE_ID,Title:"现价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.UPDOWN_ID,Title:"涨跌",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:Rn.AMPLITUDE_ID,Title:"振幅%",TextAlign:"right",Width:null,MaxText:"888.88"},{Type:Rn.BUY_PRICE_ID,Title:"买价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.SELL_PRICE_ID,Title:"卖价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.AVERAGE_PRICE_ID,Title:"均价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.OPEN_ID,Title:"今开",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.HIGH_ID,Title:"最高",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.LOW_ID,Title:"最低",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.YCLOSE_ID,Title:"昨收",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Rn.VOL_ID,Title:"总量",TextAlign:"right",TextColor:xi.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Rn.AMOUNT_ID,Title:"总金额",TextAlign:"right",TextColor:xi.Report.FieldColor.Amount,Width:null,MaxText:"8888.8擎"},{Type:Rn.EXCHANGE_RATE_ID,Title:"换手%",TextAlign:"right",TextColor:xi.Report.FieldColor.Text,Width:null,MaxText:"88.88"},{Type:Rn.OUTSTANDING_SHARES_ID,Title:"流通股本",TextAlign:"right",TextColor:xi.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Rn.TOTAL_SHARES_ID,Title:"总股本",TextAlign:"right",TextColor:xi.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Rn.CIRC_MARKET_VALUE_ID,Title:"流通市值",TextAlign:"right",TextColor:xi.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Rn.MARKET_VALUE_ID,Title:"总市值",TextAlign:"right",TextColor:xi.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Rn.VOL_IN_ID,Title:"内盘",TextAlign:"right",TextColor:xi.Report.DownTextColor,Width:null,MaxText:"8888.8擎"},{Type:Rn.VOL_OUT_ID,Title:"外盘",TextAlign:"right",TextColor:xi.Report.UpTextColor,Width:null,MaxText:"8888.8擎"},{Type:Rn.CLOSE_LINE_ID,Title:"走势",TextAlign:"center",TextColor:xi.Report.CloseLineColor,Width:null,MaxText:"88888.88888"},{Type:Rn.BUY_VOL_ID,Title:"买量",TextAlign:"right",TextColor:xi.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Rn.SELL_VOL_ID,Title:"卖量",TextAlign:"right",TextColor:xi.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Rn.CUSTOM_STRING_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:xi.Report.FieldColor.Text,MaxText:"擎擎擎擎擎"},{Type:Rn.CUSTOM_NUMBER_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:xi.Report.FieldColor.Text,MaxText:"擎擎擎擎擎"},{Type:Rn.CUSTOM_DATETIME_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:xi.Report.FieldColor.Text,MaxText:"9999-99-99"},{Type:Rn.CUSTOM_ICON_ID,Title:"  ",TextAlign:"left",FixedWidth:20,TextColor:xi.Report.FieldColor.Text},{Type:Rn.KLINE_ID,Title:"K线",TextAlign:"left",FixedWidth:50,TextColor:xi.Report.FieldColor.Text}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){if(this.ShowSymbol=[],this.TooltipRect=[],this.GlobalOption&&(this.GlobalOption.FlashBGCount=0),this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip(),this.DrawHeader(),this.DrawBody(),this.Canvas.restore(),this.Tab&&this.BottomToolbarHeight>0){var t=this.ChartBorder.GetBottom();this.Tab.DrawTab(this.RectClient.Left,t-this.BottomToolbarHeight,this.RectClient.Right,t),this.Tab.DrawScrollbar(this.RectClient.Left,t-this.BottomToolbarHeight,this.RectClient.Right,t)}this.DrawBorder(),this.DrawDragRow(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()-this.BottomToolbarHeight},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.RowCount;return e},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return ze.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Star=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.Tab&&this.Tab.IsShow?(this.Tab.CalculateSize(),this.BottomToolbarHeight=this.Tab.Height):this.BottomToolbarHeight=0,this.UpdateCacheData();var t=I();this.HeaderFont="".concat(this.HeaderFontConfig.Size*t,"px ").concat(this.HeaderFontConfig.Name),this.ItemFont="".concat(this.ItemFontConfig.Size*t,"px ").concat(this.ItemFontConfig.Name),this.ItemFixedFont="".concat(this.ItemFixedFontConfg.Size*t,"px ").concat(this.ItemFixedFontConfg.Name),this.ItemSymbolFont="".concat(this.ItemSymbolFontConfig.Size*t,"px ").concat(this.ItemSymbolFontConfig.Name),this.ItemNameFont="".concat(this.ItemNameFontConfg.Size*t,"px ").concat(this.ItemNameFontConfg.Name),this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.FixedRowHeight=this.GetFontHeight(this.ItemFixedFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.Canvas.font=this.ItemFont;for(var e=0,a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Type==Rn.SYMBOL_NAME_ID){this.Canvas.font=this.ItemNameFont;var r=this.Canvas.measureText(i.MaxText).width,n=this.GetFontHeight(this.ItemNameFont,"擎");this.ItemNameHeight=n,this.Canvas.font=this.ItemSymbolFont;var s=this.Canvas.measureText(i.MaxText).width,o=this.GetFontHeight(this.ItemSymbolFont,"擎");this.Canvas.font=this.ItemFont,e=Math.max(r,s),i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right;var h=n+o+this.ItemMergin.Top+this.ItemMergin.Bottom;h>this.RowHeight&&(this.RowHeight=h),h>this.FixedRowHeight&&(this.FixedRowHeight=h)}else e=ze.IsNumber(i.FixedWidth)?i.FixedWidth:this.Canvas.measureText(i.MaxText).width,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right}this.Canvas.font=this.HeaderFont;for(a=0;a<this.Column.length;++a){i=this.Column[a];if(i.Title&&!(i.Title.length<=0)){var l=i.Title;i.Sort>0&&(l+="↓"),e=this.Canvas.measureText(l).width,e+=4+this.HeaderMergin.Left+this.HeaderMergin.Right,i.Width<e&&(i.Width=e)}}this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.FixedRowCount<=0&&(this.FixedRowHeight=0),this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight-this.FixedRowHeight*this.FixedRowCount)/this.RowHeight);var u=0,c=this.RectClient.Right-this.RectClient.Left;for(a=0;a<this.Column.length;++a){i=this.Column[a];u+=i.Width}this.IsShowAllColumn=u<c},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left,e=this.RectClient.Top,a=e+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;for(var i=t,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r],s=n.Width,o=s-this.HeaderMergin.Left-this.HeaderMergin.Right,h=i+this.HeaderMergin.Left;this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,h,a,o,this.SortInfo.Sort):this.DrawText(n.Title,n.TextAlign,h,a,o),i+=n.Width}for(r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){n=this.Column[r],s=n.Width,o=s-this.HeaderMergin.Left-this.HeaderMergin.Right,h=i+this.HeaderMergin.Left;this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,h,a,o,this.SortInfo.Sort):this.DrawText(n.Title,n.TextAlign,h,a,o),i+=n.Width}}},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.DrawSortHeader=function(t,e,a,i,r,n){var s=1==n?"↓":"↑",o=this.Canvas.measureText(s).width,h=this.Canvas.measureText(t).width+2;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left","center"==e?a=a+r/2-(o+h)/2:"right"==e&&(a=a+r-o-h),this.Canvas.fillText(t,a,i),this.Canvas.fillStyle=this.SortColor,this.Canvas.fillText(s,a+h,i),this.Canvas.fillStyle=this.HeaderColor},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,F(a+this.HeaderHeight)),this.Canvas.lineTo(e,F(a+this.HeaderHeight));for(var i=a+this.HeaderHeight+this.RowHeight,r=i,n=0;n<this.FixedRowCount;++n){var s=F(i);this.Canvas.moveTo(t,s),this.Canvas.lineTo(e,s),r=i,i+=this.FixedRowHeight}for(i=a+this.HeaderHeight+this.RowHeight+this.FixedRowHeight*this.FixedRowCount,r=i,n=0;n<this.RowCount;++n){s=F(i);this.Canvas.moveTo(t,s),this.Canvas.lineTo(e,s),r=i,i+=this.RowHeight}var o=t;for(n=0;n<this.FixedColumn&&n<this.Column.length;++n){var h=this.Column[n],l=F(o+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),o+=h.Width}for(n=this.FixedColumn+this.Data.XOffset;n<this.Column.length;++n){h=this.Column[n],l=F(o+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),o+=h.Width}this.Canvas.stroke()}},this.DrawBody=function(){if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFixedFont;for(var r=0;r<this.FixedRowCount;++r)this.SelectedFixedRow==r&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.FixedRowHeight)),1==this.FixedRowData.Type?this.DrawFixedSymbolRow(i,r):this.DrawFixedRow(i,r),i+=this.FixedRowHeight;i=t+this.FixedRowHeight*this.FixedRowCount,this.Canvas.font=this.ItemFont;r=this.Data.YOffset;for(var n=0;r<this.Data.Data.length&&n<this.RowCount;++r,++n){var s=this.Data.Data[r],o=!1;if(0==this.SelectedModel?n==this.SelectedRow&&(o=!0):r==this.SelectedRow&&(o=!0),this.DragRow){if(this.DragRow.Data){var h=this.DragRow.Data.Row.DataIndex;h==r&&(this.Canvas.fillStyle=this.DragSrcRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}if(this.DragRow.MoveRow){h=this.DragRow.MoveRow.Data.DataIndex;h==r&&(this.Canvas.fillStyle=this.DragMoveRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}o=!1}o&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.RowHeight)),this.DrawRow(s,i,r),this.ShowSymbol.push({Index:r,Symbol:s}),i+=this.RowHeight}}},this.DrawFixedSymbolRow=function(t,e){this.RectClient.Left,this.RectClient.Right;if(this.FixedRowData&&ze.IsNonEmptyArray(this.FixedRowData.Symbol)){var a=this.FixedRowData.Symbol[e];a&&(this.DrawRow(a,t,e,1),this.ShowSymbol.push({Index:e,Symbol:a,RowType:1}))}},this.DrawFixedRow=function(t,e){for(var a=this.RectClient.Left,i=this.RectClient.Right,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),a+=n.Width,a>=i)break}for(r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),a+=n.Width,a>=i)break}},this.DrawFixedItem=function(t,e,a,i,r){var n=i+this.ItemMergin.Left,s=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,o={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign};if(this.GetFixedRowTextDrawInfo(t,e,a,o))this.DrawItemText(o.Text,o.TextColor,o.TextAlign,n,r,s);else if(this.FixedRowData&&ze.IsNonEmptyArray(this.FixedRowData.Data)){var h=this.FixedRowData.Data,l=h[t];if(ze.IsNonEmptyArray(l)){var u=l[e];u&&u.Text&&(o.Text=u.Text,u.Color&&(o.TextColor=u.Color),u.TextAlign&&(o.TextAlign=u.TextAlign),this.DrawItemText(o.Text,o.TextColor,o.TextAlign,n,r,s))}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,s={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(s.Stock=this.GetStockDataCallback(t)),this.GetBlockDataCallback&&(s.Block=this.GetBlockDataCallback(t)),this.GetFlashBGDataCallback&&(s.FlashBG=this.GetFlashBGDataCallback(t,Date.now())),s.Decimal=Hr(t);for(var o=0;o<this.FixedColumn&&o<this.Column.length;++o){var h=this.Column[o];if(this.DrawItem(a,s,h,r,e,i),r+=h.Width,r>=n)break}for(o=this.FixedColumn+this.Data.XOffset;o<this.Column.length;++o){h=this.Column[o];if(this.DrawItem(a,s,h,r,e,i),r+=h.Width,r>=n)break}},this.DrawItem=function(t,e,a,i,r,n){a.Width;var s=i+this.ItemMergin.Left,o=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,h=e.Stock,l={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign},u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};if(u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,l.Rect=u,!0===a.EnableTooltip&&this.TooltipRect.push({Rect:u,Stock:h,Index:t,Column:a,RowType:n}),a.Type==Rn.INDEX_ID){if(1==n)return;l.Text=(t+1).toString()}else if(a.Type==Rn.SYMBOL_ID)h&&h.Symbol?l.Text=h.Symbol:l.Text=e.Symbol,this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.SYMBOL_NAME_ID)this.DrawSymbolName(e,a,i,r,n),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.NAME_ID)h&&h.Name&&ze.IsString(h.Name)&&(l.Text=this.TextEllipsis(h.Name,o,a.MaxText),l.TextColor=this.GetNameColor(a,e.Symbol,n)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.NAME_EX_ID){if(h&&h.NameEx){var c=h.NameEx;l.Text=this.TextEllipsis(c.Text,o,a.MaxText),l.TextColor=this.GetNameColor(a,e.Symbol,n),c.Symbol&&(l.Symbol=c.Symbol)}}else if(a.Type==Rn.PRICE_ID)h&&this.GetPriceDrawInfo(h.Price,h,e,l,{LimitBG:!0}),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.OPEN_ID)h&&(this.DrawLimitPriceBorder(h.Open,h,i,r,a.Width),this.GetPriceDrawInfo(h.Open,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.HIGH_ID)h&&(this.DrawLimitPriceBorder(h.High,h,i,r,a.Width),this.GetPriceDrawInfo(h.High,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.LOW_ID)h&&(this.DrawLimitPriceBorder(h.Low,h,i,r,a.Width),this.GetPriceDrawInfo(h.Low,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.YCLOSE_ID)h&&this.GetPriceDrawInfo(h.YClose,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.BUY_PRICE_ID)h&&this.GetPriceDrawInfo(h.BuyPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.SELL_PRICE_ID)h&&this.GetPriceDrawInfo(h.SellPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.AVERAGE_PRICE_ID)h&&this.GetPriceDrawInfo(h.AvPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.EXCHANGE_RATE_ID)h&&ze.IsNumber(h.Exchange)&&(l.Text=h.Exchange.toFixed(2)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.BUY_VOL_ID)h&&ze.IsNumber(h.BuyVol)&&(l.Text=this.FormatVolString(h.BuyVol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.SELL_VOL_ID)h&&ze.IsNumber(h.SellVol)&&(l.Text=this.FormatVolString(h.SellVol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.VOL_ID)h&&ze.IsNumber(h.Vol)&&(l.Text=this.FormatVolString(h.Vol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.VOL_IN_ID)h&&ze.IsNumber(h.VolIn)&&(l.Text=this.FormatVolString(h.VolIn)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.VOL_OUT_ID)h&&ze.IsNumber(h.VolOut)&&(l.Text=this.FormatVolString(h.VolOut)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.TOTAL_SHARES_ID)h&&ze.IsNumber(h.TotalShares)&&(l.Text=this.FormatVolString(h.TotalShares)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.OUTSTANDING_SHARES_ID)h&&ze.IsNumber(h.OutShares)&&(l.Text=this.FormatVolString(h.OutShares)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Rn.CIRC_MARKET_VALUE_ID||a.Type==Rn.MARKET_VALUE_ID||a.Type==Rn.AMOUNT_ID){var d=Bn.get(a.Type);h&&ze.IsNumber(h[d])&&(l.Text=this.FormatVolString(h[d])),this.FormatDrawInfo(a,h,l,e)}else if(a.Type==Rn.INCREASE_ID||a.Type==Rn.AMPLITUDE_ID||a.Type==Rn.UPDOWN_ID){d=Bn.get(a.Type);if(h&&ze.IsNumber(h[d])){var f=h[d];l.Text=f.toFixed(2),l.TextColor=this.GetUpDownColor(f,0)}this.FormatDrawInfo(a,h,l,e)}else if(a.Type==Rn.CUSTOM_STRING_TEXT_ID)this.GetCustomStringDrawInfo(e,a,l);else if(a.Type==Rn.CUSTOM_NUMBER_TEXT_ID)this.GetCustomNumberDrawInfo(e,a,l);else if(a.Type==Rn.CUSTOM_DATETIME_TEXT_ID)this.GetCustomDateTimeDrawInfo(e,a,l);else if(a.Type==Rn.CUSTOM_ICON_ID)this.GetCustomIconDrawInfo(e,a,l);else if(a.Type==Rn.CLOSE_LINE_ID){u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.DrawLine(h.CloseLine,a,u)}else if(a.Type==Rn.KLINE_ID){u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.DrawKLine(h.KLine,a,u,e)}if(3==n&&(l.TextColor=this.DragRowTextColor),l.Symbol)this.DrawItemTextEx(l,s,r,o);else if(a.Type==Rn.CUSTOM_ICON_ID)this.DrawIconItem(l,s,r,o);else{if(e.FlashBG&&e.FlashBG.Data&&void 0!=a.ID&&e.FlashBG.Data.has(a.ID)){var C=e.FlashBG.Data.get(a.ID),m={Rect:l.Rect,BGColor:C.Color};--C.Count,this.DrawItemBG(m),this.GlobalOption&&++this.GlobalOption.FlashBGCount}this.DrawItemBG(l),this.DrawItemText(l.Text,l.TextColor,l.TextAlign,s,r,o,l.BGColor)}},this.DrawSymbolName=function(t,e,a,i,r){var n,s=t.Stock,o=t.Symbol;if(s&&(o=s.Symbol,n=s.Name),o||n){var h=i+this.ItemMergin.Top+this.ItemNameHeight,l=a+this.ItemMergin.Left,u=l,c=e.Width-this.ItemMergin.Left-this.ItemMergin.Right,d=e.TextAlign;"center"==d?(u=l+c/2,this.Canvas.textAlign="center"):"right"==d?(u=l+c-2,this.Canvas.textAlign="right"):(u+=2,this.Canvas.textAlign="left");var f=this.GetNameColor(e,o,r),C=n;C&&(this.Canvas.textBaseline="ideographic",this.Canvas.fillStyle=f,this.Canvas.font=this.ItemNameFont,C=this.TextEllipsis(C,c,e.MaxText),C&&this.Canvas.fillText(C,u,h)),C=o,C&&(this.Canvas.textBaseline="top",this.Canvas.font=this.ItemSymbolFont,this.Canvas.fillStyle=f,this.Canvas.fillText(C,u,h)),this.Canvas.font=this.ItemFont}},this.DrawLimitPriceBorder=function(t,e,a,i,r){if(ze.IsNumber(t)&&e){var n=!1;if(ze.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(n=!0),ze.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(n=!0),n){var s=a+this.ItemMergin.Left+this.LimitMergin.Left,o=r-this.ItemMergin.Left-this.ItemMergin.Right-this.LimitMergin.Left-this.LimitMergin.Right,h=i+this.ItemMergin.Top+this.LimitMergin.Top,l=this.RowHeight-this.ItemMergin.Top-this.ItemMergin.Bottom-this.LimitMergin.Top-this.LimitMergin.Bottom;this.Canvas.strokeStyle=this.LimitBorderColor,this.Canvas.strokeRect(F(s),F(h),L(o),L(l))}}},this.GetExtendData=function(t,e){if(ze.IsNumber(e.DataIndex)){if(!t.Stock||!t.Stock.ExtendData)return null;if(e.DataIndex<0)return;return t.Stock.ExtendData[e.DataIndex]}if(ze.IsNumber(e.BlockIndex)){if(!t.Block)return;if(e.BlockIndex<0)return;return t.Block[e.BlockIndex]}return null},this.GetCustomStringDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);e.IsDrawCallback?this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t):ze.IsString(i)&&(a.Text=i)},this.GetCustomNumberDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);if(e.IsDrawCallback)this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t);else if(ze.IsNumber(i)){switch(e.FormatType){case 1:a.Text=i.toFixed(e.Decimal);break;case 2:a.Text=ze.FormatValueThousandsString(i,e.Decimal);break;case 3:a.Text=this.FormatVolString(i);break;default:a.Text=ze.FormatValueString(i,e.Decimal);break}switch(e.ColorType){case 1:a.TextColor=this.GetUpDownColor(i,0);break;case 2:ze.IsNumber(t.Stock.YClose)?a.TextColor=this.GetUpDownColor(i,t.Stock.YClose):a.TextColor=this.UnchagneColor;break;default:break}}},this.GetCustomDateTimeDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);ze.IsNumber(i)&&(e.IsDrawCallback?this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t):0==e.ValueType&&(1==e.FormatType?a.Text=ze.FormatDateString(i,"YYYY/MM/DD"):a.Text=ze.FormatDateString(i)))},this.GetCustomIconDrawInfo=function(t,e,a){e.IsDrawCallback&&this.GetCustomIconData(e,t.Symbol,a,t)},this.GetCustomIconData=function(t,e,a,i){var r=this.GetEventCallback(C.ON_REPORT_DRAW_CUSTOM_ICON);if(!r||!r.Callback)return!1;var n={Symbol:e,Column:t,Data:i,Out:{Text:null,TextColor:null,TextAlign:null,Font:null}};return r.Callback(r,n,this),n.Out.Text&&(a.Text=n.Out.Text),n.Out.TextColor&&(a.TextColor=n.Out.TextColor),n.Out.TextAlign&&(a.TextAlign=n.Out.TextAlign),n.Out.BGColor&&(a.BGColor=n.Out.BGColor),n.Out.Font&&(a.Font=n.Out.Font),!0},this.GetPriceDrawInfo=function(t,e,a,i,r){if(!ze.IsNumber(t))return!1;i.Text=t.toFixed(a.Decimal),ze.IsNumber(e.YClose)?i.TextColor=this.GetUpDownColor(t,e.YClose):i.TextColor=this.UnchagneColor,r&&r.LimitBG&&(ze.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(i.BGColor=this.LimitUpBGColor,i.TextColor=this.LimitTextColor),ze.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(i.BGColor=this.LimitDownBGColor,i.TextColor=this.LimitTextColor))},this.GetUpDownColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.FormatVolString=function(t,e){return ze.FormatVolString(t,e)},this.DrawItemBG=function(t){if(t.BGColor&&t.Rect){var e=t.Rect;this.Canvas.fillStyle=t.BGColor,this.Canvas.fillRect(e.Left,e.Top,e.Width,e.Height)}},this.DrawItemText=function(t,e,a,i,r,n,s){if(t){var o=i;"center"==a?(o=i+n/2,this.Canvas.textAlign="center"):"right"==a?(o=i+n-2,this.Canvas.textAlign="right"):(o+=2,this.Canvas.textAlign="left");var h=this.Canvas.measureText(t).width+1,l=!1;if(h>=n){this.Canvas.save(),l=!0;var u={Left:i,Top:r+this.ItemMergin.Top,Width:n,Height:this.RowHeight};this.Canvas.beginPath(),this.Canvas.rect(u.Left,u.Top,u.Width,u.Height),this.Canvas.clip()}this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,this.Canvas.fillText(t,o,r+this.ItemMergin.Top+this.RowHeight/2),l&&this.Canvas.restore()}},this.DrawItemTextEx=function(t,e,a,i){var r=t.Text,n=t.TextColor,s=t.Symbol,o=t.TextAlign,h=this.Canvas.measureText(r).width+1,l=h,u="".concat(s.Size*I(),"px ").concat(s.Family);this.Canvas.font=u;for(var c=[],d=0;d<s.Data.length;++d){var f=s.Data[d],C=this.Canvas.measureText(f.Text).width+1;if(l+C>i)break;l+=C,c[d]=C}var m=e,D=a+this.ItemMergin.Top+this.RowHeight/2;"center"==o?m=e+(i-l)/2:"right"==o?m=e+(i-l):m+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.ItemFont,this.Canvas.fillStyle=n,this.Canvas.fillText(r,m,D),m+=h,this.Canvas.font=u;for(d=0;d<c.length;++d){f=s.Data[d];this.Canvas.fillStyle=f.Color,this.Canvas.fillText(f.Text,m,D),m+=c[d]}this.Canvas.font=this.ItemFont},this.DrawIconItem=function(t,e,a,i){if(t&&t.Font&&t.Text){var r=t.Text,n=t.TextColor,s=t.TextAlign;this.Canvas.font=t.Font;var o=this.Canvas.measureText(r).width+1,h=e,l=a+this.ItemMergin.Top+this.RowHeight/2;"center"==s?h=e+(i-o)/2:"right"==s?h=e+(i-o):h+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=n,this.Canvas.fillText(r,h,l),this.Canvas.font=this.ItemFont}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var s=r+t[n]+"...",o=this.Canvas.measureText(s).width;if(o>e){r+="...";break}r+=t[n]}return r},this.DrawMultiBar=function(t,e,a){if(!e.Source||!ze.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!ze.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,o=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=n+r,l=0;l<i.Value.length;++l){var u=i.Value[l];if(!(u<=0)){if(n>=h)break;var c=r*u;c<1&&(c=1),n+c>h&&(c=h-n);var d=l;ze.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(d=i.Color[l]),this.Canvas.fillStyle=xi.DealList.FieldColor.Bar[d],this.Canvas.fillRect(n,s,c,o),n+=c}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!ze.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!ze.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,s=n+r,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,h=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=0;l<i.Value.length&&l<2;++l){var u=i.Value[l];if(!(u<=0)){u>1&&(u=1);var c=r*u;c<1&&(c=1);var d=l;ze.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(d=i.Color[l]),this.Canvas.fillStyle=xi.DealList.FieldColor.Bar[d],0==l?this.Canvas.fillRect(s,o,-c,h):this.Canvas.fillRect(s,o,c,h)}}},this.DrawLine=function(t,e,a){if(!t)return!1;if(!ze.IsNonEmptyArray(t.Data))return!1;var i=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,r=a.Left+this.ItemMergin.Left,n=a.Top+this.ItemMergin.Top,s=a.Height-this.ItemMergin.Top-this.ItemMergin.Bottom,o=r+i,h=n+s,l=function(e){var a=t.Count;if(1==a)return 0==e?r:o;if(a<=0)return r;if(e>=a)return o;var n=r+i*e/a;return n},u=t.Max,c=t.Min;if(ze.IsNumber(t.YClose))if(t.YClose==u&&t.YClose==c)u=t.YClose+.1*t.YClose,c=t.YClose-.1*t.YClose;else{var d=Math.max(Math.abs(t.YClose-u),Math.abs(t.YClose-c));u=t.YClose+d,c=t.YClose-d}var f=function(t){if(t<=c)return h;if(t>=u)return n;t=s*(t-c)/(u-c);return h-t};this.Canvas.save();var C=null;if(ze.IsNumber(t.YClose)){var m=f(t.YClose);m=F(m),C=m,this.Canvas.setLineDash([2,2]),this.Canvas.strokeStyle=this.CloseLineConfig.YCloseColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,m),this.Canvas.lineTo(o,m),this.Canvas.stroke(),this.Canvas.setLineDash([])}t.Color?this.Canvas.strokeStyle=t.Color:this.Canvas.strokeStyle=this.CloseLineConfig.CloseColor;for(var D,p=!0,v={},g=0,S=0;S<t.Data.length;++S){var I=t.Data[S];ze.IsNumber(I)&&(D=l(S),m=f(I),p?(this.Canvas.beginPath(),this.Canvas.moveTo(D,m),p=!1,v={X:D,Y:m}):this.Canvas.lineTo(D,m),++g)}g>0&&(this.Canvas.stroke(),e.IsDrawArea&&ze.IsNumber(C)&&(this.Canvas.lineTo(D,C),this.Canvas.lineTo(v.X,C),this.Canvas.closePath(),this.SetFillStyle(this.CloseLineConfig.AreaColor,r,n,r,h),this.Canvas.fill())),this.Canvas.restore()},this.DrawKLine=function(t,e,a,i){if(e.IsDrawCallback){var r=this.GetEventCallback(C.ON_REPORT_DRAW_KLINE);if(r||r.Callback){var n={Column:e,Data:i,KLineData:t,Rect:a,PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}}if(t&&ze.IsNonEmptyArray(t.Data)){var s=t.Data[1],o=t.Data[2],h=[{Open:t.Data[0],High:s,Low:o,Close:t.Data[3]}];this.DrawKLineBar(h,s,o,a)}},this.DrawKLineBar=function(t,e,a,i){for(var r,n,s=(i.Left,this.ItemMergin.Left),o=i.Width-this.ItemMergin.Left-this.ItemMergin.Right,h=(s=i.Left+this.ItemMergin.Left,i.Top+this.ItemMergin.Top+4),l=i.Height-this.ItemMergin.Top-this.ItemMergin.Bottom-8,u=s+o,c=h+l,d=function(t){if(t<=a)return c;if(t>=e)return h;t=l*(t-a)/(e-a);return c-t},f=this.KLineConfig.DataWidth,C=this.KLineConfig.DistanceWidth,m=s,D=0;D<t.length;++D,m+=f+C){var p=t[D];if(r=m,n=m+f,r+(n-r)/2,n>u)break;var v=d(p.Low),g=d(p.High),S=d(p.Open),I=d(p.Close);p.Open<p.Close?this.DrawKBarItem(p,f,this.KLineConfig.UpColor,1,r,n,v,g,S,I):p.Open>p.Close?this.DrawKBarItem(p,f,this.KLineConfig.DownColor,0,r,n,v,g,S,I):this.DrawKBarItem(p,f,this.KLineConfig.UnchagneColor,0,r,n,v,g,S,I)}},this.DrawKBarItem=function(t,e,a,i,r,n,s,o,h,l){var u=!1;1==i&&(u=!0);var c=Math.min(h,l),d=Math.max(h,l),f=Math.max(t.Open,t.Close),C=Math.min(t.Open,t.Close);this.Canvas.fillStyle=a,this.Canvas.strokeStyle=a;var m=r+(n-r)/2;if(u&&e%2!=0&&(e-=1),e>=4){if(t.High>f){this.Canvas.beginPath();var D=m;u&&(D=r+e/2),this.Canvas.moveTo(F(D),F(c)),this.Canvas.lineTo(F(D),F(o)),this.Canvas.stroke()}if(Math.abs(d-c)<1?this.Canvas.fillRect(L(r),L(c),L(e),1):u?(this.Canvas.beginPath(),this.Canvas.rect(F(r),F(c),L(e),L(d-c)),this.Canvas.stroke()):this.Canvas.fillRect(L(r),L(c),L(e),L(d-c)),t.Low<C){this.Canvas.beginPath();D=m;u&&(D=r+e/2),this.Canvas.moveTo(F(D),F(d)),this.Canvas.lineTo(F(D),F(s)),this.Canvas.stroke()}}},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),s=1/t.length;for(var o in t)n.addColorStop(o*s,t[o]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetCustomTextDrawInfo=function(t,e,a,i,r){var n=this.GetEventCallback(C.ON_DRAW_CUSTOM_TEXT);if(!n||!n.Callback)return!1;var s={Symbol:e,Column:t,Value:a,Data:r,Out:{Text:null,TextColor:null,TextAlign:null}};return n.Callback(n,s,this),s.Out.Text&&(i.Text=s.Out.Text),s.Out.TextColor&&(i.TextColor=s.Out.TextColor),s.Out.TextAlign&&(i.TextAlign=s.Out.TextAlign),s.Out.BGColor&&(i.BGColor=s.Out.BGColor),!0},this.FormatDrawInfo=function(t,e,a,i){if(!t.IsDrawCallback)return!1;var r=this.GetEventCallback(C.ON_REPORT_FORMAT_DRAW_INFO);if(!r||!r.Callback)return!1;var n={Stock:e,Column:t,Data:i,DrawInfo:a};r.Callback(r,n,this)},this.GetFixedRowTextDrawInfo=function(t,e,a,i){var r=this.GetEventCallback(C.ON_DRAW_REPORT_FIXEDROW_TEXT);if(!r||!r.Callback)return!1;var n={RowIndex:t,ColIndex:e,Column:a,Data:this.FixedRowData,Out:{Text:null,TextColor:null,TextAlign:null}};return r.Callback(r,n,this),n.Out.Text&&(i.Text=n.Out.Text),n.Out.TextColor&&(i.TextColor=n.Out.TextColor),n.Out.TextAlign&&(i.TextAlign=n.Out.TextAlign),!0},this.GetVolColor=function(t,e){var a=this.GetEventCallback(C.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetNameColor=function(t,e,a){var i=this.GetEventCallback(C.ON_DRAW_REPORT_NAME_COLOR);if(i&&i.Callback){var r={Symbol:e,TextColor:null,RowType:a};if(i.Callback(i,r,this),r.TextColor)return r.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return T(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;if(this.Tab){var i=this.Tab.OnMouseDown(t,e,a);if(i)return{Type:1,Tab:i}}var r=I(),n={X:t/r,Y:e/r};if(this.UIElement)var s={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else s={Left:null,Top:null};var o=this.PtInFixedBody(t,e);if(o){var h=!0,l=C.ON_CLICK_REPORT_FIXEDROW;return 2==a.button&&(l=C.ON_RCLICK_REPORT_FIXEDROW),this.SendClickEvent(l,{Data:o,X:t,Y:e,e:a,Inside:n,UIElement:s}),this.SelectedFixedRow=o.Index,this.SelectedRow=-1,{Type:4,Redraw:h,Row:o}}o=this.PtInBody(t,e);if(o){h=!0;0==this.SelectedModel?(this.SelectedRow==o.Index&&(h=!1),this.SelectedRow=o.Index,this.SelectedFixedRow=-1):(this.SelectedRow==o.DataIndex&&(h=!1),this.SelectedRow=o.DataIndex,this.SelectedFixedRow=-1);l=C.ON_CLICK_REPORT_ROW;return 2==a.button&&(l=C.ON_RCLICK_REPORT_ROW),this.SendClickEvent(l,{Data:o,X:t,Y:e,e:a,Inside:n,UIElement:s}),{Type:2,Redraw:h,Row:o}}var u=this.PtInHeader(t,e);if(u){l=C.ON_CLICK_REPORT_HEADER;return 2==a.button?l=C.ON_RCLICK_REPORT_HEADER:0==a.button&&(l=C.ON_CLICK_REPORT_HEADER),this.SendClickEvent(l,{Data:o,X:t,Y:e,e:a,Inside:n,UIElement:s}),{Type:3,Redraw:h,Header:u}}return null},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),s=r+this.FixedRowHeight*this.FixedRowCount;if(e<s+i)return{Type:5};for(var o=this.Data.YOffset,h=0;o<this.Data.Data.length&&h<this.RowCount;++o,++h){var l=this.Data.Data[o],u={Left:0,Top:s,Right:n,Bottom:s+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var c={DataIndex:o,Index:h,Symbol:l,Pos:0};return 0==h?c.Pos=1:h==this.RowCount-1&&(c.Pos=2),{Type:2,Data:c}}s+=this.RowHeight}return h<this.RowCount?{Type:6}:{Type:7}},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInHeaderDragBorder(t,e);if(i)return this.SendClickEvent(C.ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH,{Data:i,X:t,Y:e}),!0;var r=this.PtInBody(t,e);return!!r&&(this.SendClickEvent(C.ON_DBCLICK_REPORT_ROW,{Data:r,X:t,Y:e}),!0)},this.PtInBody=function(t,e){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a+this.FixedRowHeight*this.FixedRowCount),s=this.Data.YOffset,o=0;s<this.Data.Data.length&&o<this.RowCount;++s,++o){var h=this.Data.Data[s],l={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom){var u={Rect:l,DataIndex:s,Index:o,Symbol:h};return u.Item=this.PtInItem(t,e,l.Top,l.Bottom),u}n+=this.RowHeight}return null},this.PtInFixedBody=function(t,e){if(this.FixedRowCount<=0)return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),s=0;s<this.FixedRowCount;++s){var o={Left:i,Top:n,Right:r,Bottom:n+this.FixedRowHeight};if(t>=o.Left&&t<=o.Right&&e>=o.Top&&e<=o.Bottom){var h={Rect:o,Index:s};return h.Item=this.PtInItem(t,e,o.Top,o.Bottom),h}n+=this.FixedRowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,s=r,o=0;o<this.FixedColumn&&o<this.Column.length;++o){var h=this.Column[o],l={Left:s,Right:s+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:o,IsFixed:!0};s+=h.Width}for(o=this.FixedColumn+this.Data.XOffset;o<this.Column.length;++o){h=this.Column[o];if(s>=n)break;l={Left:s,Right:s+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:o,IsFixed:!1};s+=h.Width}return null},this.PtInHeader=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n?this.PtInItem(t,e,r,n):null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.IsPtInHeader=function(t,e){if(!this.IsShowHeader)return!1;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)},this.DrawDragRow=function(){if(this.DragRow){var t=this.DragRow;if(t.Data&&t.Inside&&t.Data.Row){var e=t.Data.Row.DataIndex;if(ze.IsNumber(e)&&!(e<0)){var a=t.Inside.Y-this.RowHeight/2,i=a,r=this.RectClient.Left,n=this.RectClient.Right-this.RectClient.Left;this.Canvas.fillStyle=this.DragRowColor,this.Canvas.fillRect(r,a,n,this.RowHeight);var s=this.Data.Data[e],o={Symbol:s,Stock:null,Block:null};this.GetStockDataCallback&&(o.Stock=this.GetStockDataCallback(s)),this.GetBlockDataCallback&&(o.Block=this.GetBlockDataCallback(s)),o.Decimal=Hr(s);var h=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var l=0;l<this.FixedColumn&&l<this.Column.length;++l){var u=this.Column[l];if(this.DrawItem(e,o,u,r,i,3),r+=u.Width,r>=h)break}for(l=this.FixedColumn+this.Data.XOffset;l<this.Column.length;++l){u=this.Column[l];if(this.DrawItem(e,o,u,r,i,3),r+=u.Width,r>=h)break}}}}},this.PtInCell=function(t,e){if(!ze.IsNonEmptyArray(this.TooltipRect))return null;for(var a=0;a<this.TooltipRect.length;++a){var i=this.TooltipRect[a],r=i.Rect;if(r&&(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom))return{Rect:i.Rect,Stock:i.Stock,Column:i.Column,Index:i.Index}}},this.PtInHeaderDragBorder=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;if(!(t>=a&&t<=i&&e>=r&&e<=n))return null;for(var s=a,o=5*I(),h=0;h<this.FixedColumn&&h<this.Column.length;++h){var l=this.Column[h];if(!0===l.EnableDragWidth){var u={Right:s+l.Width,Top:r,Bottom:n};if(u.Left=u.Right-o,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:l,Index:h,IsFixed:!0}}s+=l.Width}for(h=this.FixedColumn+this.Data.XOffset;h<this.Column.length;++h){l=this.Column[h];if(s>=i)break;if(!0===l.EnableDragWidth){u={Right:s+l.Width,Top:r,Bottom:n};if(u.Left=u.Right-o,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:l,Index:h,IsFixed:!1}}s+=l.Width}return null}}function kn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReportTab",this.IsDrawFirst=!1,this.GetEventCallback,this.Report,this.IsShow=!0,this.TabList=[],this.SelectedTabIndex=-1,this.MoveOnTabIndex=-1,this.MaxPos=15,this.CurrentPos=15,this.Step=1,this.ScrollBarWidth=xi.Report.Tab.ScrollBarWidth,this.ButtonColor=xi.Report.Tab.ButtonColor,this.BarColor=xi.Report.Tab.BarColor,this.BorderColor=xi.Report.Tab.BorderColor,this.Mergin={Left:2,Right:2,Top:2,Bottom:2},this.TabFontConfig={Size:xi.Report.Tab.Font.Size,Name:xi.Report.Tab.Font.Name},this.TabFont,this.TabTitleColor=xi.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=xi.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=xi.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=xi.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=xi.Report.Tab.TabBGColor,this.TabMergin={Top:xi.Report.Tab.Mergin.Top,Left:xi.Report.Tab.Mergin.Left,Right:xi.Report.Tab.Mergin.Right,Bottom:xi.Report.Tab.Mergin.Bottom},this.Height,this.ButtonSize=25,this.TabWidth=0,this.RectScroll={Left:null,Right:null,Bar:null,Client:null},this.ReloadResource=function(t){this.ScrollBarWidth=xi.Report.Tab.ScrollBarWidth,this.ButtonColor=xi.Report.Tab.ButtonColor,this.BarColor=xi.Report.Tab.BarColor,this.BorderColor=xi.Report.Tab.BorderColor,this.TabFontConfig={Size:xi.Report.Tab.Font.Size,Name:xi.Report.Tab.Font.Name},this.TabTitleColor=xi.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=xi.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=xi.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=xi.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=xi.Report.Tab.TabBGColor,this.TabMergin={Top:xi.Report.Tab.Mergin.Top,Left:xi.Report.Tab.Mergin.Left,Right:xi.Report.Tab.Mergin.Right,Bottom:xi.Report.Tab.Mergin.Bottom}},this.SetTabList=function(t){this.TabList=[];for(var e=0;e<t.length;++e){var a=t[e];if(a.Title){var i={Title:a.Title,IsMenu:!1,FixedSymbol:[],FixedRowCount:0};if(a.ID&&(i.ID=a.ID),a.MenuID&&(i.MenuID=a.MenuID),ze.IsBool(a.IsMenu)&&(i.IsMenu=a.IsMenu),ze.IsNonEmptyArray(a.FixedSymbol))for(var r=0;r<a.FixedSymbol.length;++r){var n=a.FixedSymbol[r];n&&n.Symbol&&(i.FixedSymbol.push(n),++i.FixedRowCount)}this.TabList.push(i)}}},this.CalculateSize=function(){var t=I();this.TabFont="".concat(this.TabFontConfig.Size*t,"px ").concat(this.TabFontConfig.Name),this.Height=this.GetFontHeight(this.TabFont,"8")+this.Mergin.Top+this.Mergin.Bottom;var e=Math.min(25,this.Height-this.Mergin.Top-this.Mergin.Bottom);this.ButtonSize=e},this.DrawScrollbar=function(t,e,a,i){this.RectScroll={Left:null,Right:null,Bar:null,Client:null};var r=this.Report.GetXScrollPos(),n=this.Report.GetXScrollRange();if(!(n<=0)&&!this.Report.IsShowAllColumn){t=t+this.TabWidth;if(!(t+2*this.ScrollBarWidth>a)){this.MaxPos=n,this.CurrentPos=r;var s=this.ButtonSize,o={Left:t+this.Mergin.Left,Top:i-s-this.Mergin.Bottom,Width:s,Height:s};o.Right=o.Left+s,o.Bottom=o.Top+s;var h={Left:a-s-this.Mergin.Right,Top:o.Top,Width:s,Height:s};h.Right=h.Left+s,h.Bottom=h.Top+s,this.Canvas.fillStyle=this.ButtonColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height),this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(o.Left,o.Top,o.Width,o.Height),this.Canvas.strokeRect(h.Left,h.Top,h.Width,h.Height);var l=h.Left-2-(o.Right+2),u=l-this.ScrollBarWidth,c=u*this.CurrentPos/this.MaxPos,d=o.Right+2+c,f={Left:d,Top:o.Top,Width:this.ScrollBarWidth,Height:o.Height};f.Right=f.Left+this.ScrollBarWidth,f.Bottom=o.Bottom,this.Canvas.fillStyle=this.BarColor,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height),this.RectScroll.Left=o,this.RectScroll.Right=h,this.RectScroll.Bar=f,this.RectScroll.Client={Left:o.Right,Right:h.Left,Top:o.Top,Bottom:o.Bottom}}}},this.DrawTab=function(t,e,a,i){this.TabWidth=0,this.Canvas.font=this.TabFont,this.Canvas.textBaseline="bottom";var r,n=i-e,s=t+1,o=i-this.TabMergin.Bottom,h=0,l=0,u=0;for(u=0;u<this.TabList.length;++u){var c=this.TabList[u];r=c.Title,c.IsMenu&&(r+="▲"),h=s+this.TabMergin.Left,l=this.Canvas.measureText(r).width;var d={Left:s,Top:e,Width:l+this.TabMergin.Left+this.TabMergin.Right,Height:n};if(d.Right=d.Left+d.Width,d.Bottom=d.Top+d.Height,d.Right>a)break;var f=this.TabBGColor;u==this.SelectedTabIndex&&(f=this.TabSelectedBGColor),this.Canvas.fillStyle=f,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height),this.Canvas.textAlign="left";var C=this.TabTitleColor;u==this.MoveOnTabIndex&&(C=this.TabMoveOnTitleColor),u==this.SelectedTabIndex&&(C=this.TabSelectedTitleColor),this.Canvas.fillStyle=C,this.Canvas.fillText(r,h,o),c.Rect=d,s+=d.Width+1,this.TabWidth+=d.Width+1}for(;u<this.TabList.length;++u){c=this.TabList[u];c.Rect=null}},this.OnMouseDown=function(t,e,a){var i=this.PtInTab(t,e);return i||this.PtInScroll(t,e)},this.PtInScroll=function(t,e){if(!this.RectScroll)return null;if(this.RectScroll.Left){var a=this.RectScroll.Left;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:1,Rect:a}}if(this.RectScroll.Right){a=this.RectScroll.Right;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:2,Rect:a}}if(this.RectScroll.Bar){a=this.RectScroll.Bar;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:3,Rect:a}}if(this.RectScroll.Client){a=this.RectScroll.Client;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:4,Rect:a,Pos:this.GetScrollPostionByPoint(t,e)}}return null},this.PtInTab=function(t,e){for(var a=0;a<this.TabList.length;++a){var i=this.TabList[a];if(i.Rect){var r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom){var n={Type:5,Rect:r,Tab:i,Index:a};return i.IsMenu,n}}}return null},this.GetFontHeight=function(t,e){return T(this.Canvas,t,e)},this.GetScrollPostionByPoint=function(t,e){var a=this.RectScroll.Client,i=a.Right-a.Left-this.ScrollBarWidth,r=parseInt(this.MaxPos*(t-a.Left)/i);return r}}function Gn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartPageInfo",this.IsDrawFirst=!1,this.IsShow=!1,this.SizeChange=!0,this.Report,this.FontConfig={Size:xi.Report.PageInfo.Font.Size,Name:xi.Report.PageInfo.Font.Name},this.TextColor=xi.Report.PageInfo.TextColor,this.BGColor=xi.Report.PageInfo.BGColor,this.Mergin={Top:xi.Report.PageInfo.Mergin.Top,Left:xi.Report.PageInfo.Mergin.Left,Right:xi.Report.PageInfo.Mergin.Right,Bottom:xi.Report.PageInfo.Mergin.Bottom},this.Font,this.TextHeight=0,this.ReloadResource=function(t){this.FontConfig={Size:xi.Report.PageInfo.Font.Size,Name:xi.Report.PageInfo.Font.Name},this.TextColor=xi.Report.PageInfo.TextColor,this.BGColor=xi.Report.PageInfo.BGColor,this.Mergin={Top:xi.Report.PageInfo.Mergin.Top,Left:xi.Report.PageInfo.Mergin.Left,Right:xi.Report.PageInfo.Mergin.Right,Bottom:xi.Report.PageInfo.Mergin.Bottom}},this.Draw=function(){if(this.IsShow&&this.Report){var t=this.Report.GetCurrentPageStatus();if(!t.IsSinglePage){if(this.SizeChange){var e=I();this.Font="".concat(this.FontConfig.Size*e,"px ").concat(this.FontConfig.Name),this.TextHeight=T(this.Canvas,this.Font,"擎")+this.Mergin.Top+this.Mergin.Bottom}var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),r=this.ChartBorder.GetBottom()-2,n=a+(i-a)/2,s="".concat(t.DataCount,"/").concat(t.DataCount);this.Canvas.font=this.Font;var o=this.Canvas.measureText(s).width+4,h=n-o/2-this.Mergin.Left,l=r-this.TextHeight;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(h,l,o+(this.Mergin.Left+this.Mergin.Right),this.TextHeight),s="".concat(t.Start+1,"/").concat(t.DataCount),this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(s,n,r-this.Mergin.Bottom),this.SizeChange=!1}}}}function Vn(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jskeyboard-drawing",this.CanvasElement.id=b(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&l.Chart.Log("[JSKeyboardChart::JSRepoJSKeyboardChartrtChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=I();this.CanvasElement.height*=e,this.CanvasElement.width*=e,l.Chart.Log("[JSKeyboardChart::OnSize] devicePixelRatio=".concat(window.devicePixelRatio,", height=").concat(this.CanvasElement.height,", width=").concat(this.CanvasElement.width)),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSKeyboardChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,e.Draw()},this.CreateJSKeyboardChartContainer=function(t){var e=new Hn(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),ze.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),ze.IsNumber(t.BorderLine)&&(e.Frame.BorderLine=t.BorderLine),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;ze.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),ze.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),ze.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),ze.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=I();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(l.Chart.Log("[JSKeyboardChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSKeyboardChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(l.Chart.Log("[JSKeyboardChart:Draw] "),this.JSChartContainer.Draw())},this.SetSymbolData=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(l.Chart.Log("[JSKeyboardChart:SetSymbolData] ",t),this.JSChartContainer.SetSymbolData(t))},this.Search=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Search&&(l.Chart.Log("[JSKeyboardChart:Search] ",t),this.JSChartContainer.Search(t))},this.OnKeyDown=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OnKeyDown&&(l.Chart.Log("[JSKeyboardChart:OnKeyDown] ",t),this.JSChartContainer.OnKeyDown(t))},this.ClearSearch=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearSearch&&(l.Chart.Log("[JSKeyboardChart:ClearSearch] ",t),this.JSChartContainer.ClearSearch(t))}}function Hn(t){this.ClassName="JSKeyboardChartContainer",this.Frame,this.ChartPaint=[],this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[]},this.MapSymbol=new Map,this.SourceData={Data:[]},this.mapEvent=new Map,this.UIElement=t,this.LastPoint=new N,this.DragYScroll=null,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0},this.ClearSearch=function(t){this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0,t&&1==t.Redraw&&this.Draw()},this.Search=function(t){var e=[],a=[];this.MapSymbol.clear(),this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0;var i=t.trim();if(i.length>0)for(var r=0;r<this.SourceData.Data.length;++r){var n=this.SourceData.Data[r];this.SearchSymbol(n,i,e,a)||this.SearchSpell(n,i,e,a)}(ze.IsNonEmptyArray(e)||ze.IsNonEmptyArray(a))&&(this.Data.Data=e.concat(a)),this.ChartPaint[0].SelectedRow=0,l.Chart.Log("[JSKeyboardChart:Search] search=".concat(i,", source=").concat(this.SourceData.Data.length," match=").concat(this.Data.Data.length)),this.Draw()},this.SearchSymbol=function(t,e,a,i){var r=t.Symbol.indexOf(e);return!(r<0)&&(0==r?a.push(t.Symbol):i.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0)},this.SearchSpell=function(t,e,a,i){if(!ze.IsString(t.Spell))return!1;var r=t.Spell.indexOf(e);return 0==r&&(a.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0)},this.SetSymbolData=function(t){this.SourceData.Data=t},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.Frame=new Yn,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas;var a=new Wn;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.Data=this.Data,this.ChartPaint[0]=a;var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,l.Chart.Log("[JSKeyboardChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,l.Chart.Log("[JSKeyboardChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",(function(t){e.OnKeyDown(t)}),!0),r&&this.UIElement.addEventListener("wheel",(function(t){e.OnWheel(t)}),!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=I();this.Canvas.lineWidth=t,this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(e=0;e<this.ChartPaint.length;++e){a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.GetStockData=function(t){return this.MapSymbol.has(t)?this.MapSymbol.get(t):null},this.ResetStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(l.Chart.Log("[JSKeyboardChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var e,a=t.clientX-this.UIElement.getBoundingClientRect().left,i=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),e=this.Canvas.isPointInPath(a,i),e){var r=this.ChartPaint[0];if(r){var n=t.wheelDelta;ze.IsObjectExist(t.wheelDelta)||(n=-.01*t.deltaY),n<0?this.GotoNextPage(this.PageUpDownCycle)&&this.Draw():n>0&&this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=t.keyCode?t.keyCode:t.which;switch(a){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw();break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&this.Draw();break;case 38:var i=this.MoveSelectedRow(-1);i&&i.Redraw&&this.Draw();break;case 40:i=this.MoveSelectedRow(1);i&&i.Redraw&&this.Draw();break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw();break;case 13:this.OnSelectedSymbol();break}t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.OnSelectedSymbol=function(){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetSelectedSymbol(),a=this.GetEventCallback(C.ON_KEYBOARD_SELECTED);a&&a.Callback&&a.Callback(a,{Data:e},this)},this.UIOnDblClick=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)&&this.OnSelectedSymbol()},this.UIOnMouseDown=function(t){var e=this;this.DragXScroll=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=I(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var s=n.OnMouseDown(i,r,t);if(!s)return;2!=s.Type||0!=t.button&&2!=t.button||1==s.Redraw&&this.Draw()}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=I();t.clientX,this.UIElement.getBoundingClientRect().left,t.clientY,this.UIElement.getBoundingClientRect().top},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragRow){var r=this.DragRow,n=r.LastMove.Y-t.clientY;if(Math.abs(n)<2)return;var s=this.GetReportChart();if(r.LastMove.X=t.clientX,r.LastMove.Y=t.clientY,r.Inside={X:a,Y:i},s){var o=s.OnDrawgRow(a,i,t);if(o)if(2==o.Type)o.Data.DataIndex!=r.Data.Row.DataIndex&&(r.MoveRow=o);else if(7==o.Type){var h=s.GetCurrentPageStatus();h.IsEnd||(this.MoveYOffset(1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(2))}else 5==o.Type&&this.Data.YOffset>0&&(this.MoveYOffset(-1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(-2));s.DragRow=r}this.Draw()}else if(this.DragXScroll){var l=this.ChartPaint[0];if(!l||!l.Tab)return;this.DragXScroll.LastMove.X=a,this.DragXScroll.LastMove.Y=i;var u=l.Tab.GetScrollPostionByPoint(a,i);this.SetXOffset(u)&&this.Draw()}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null;var e=this.GetEventCallback(C.ON_KEYBOARD_MOUSEUP);e&&e.Callback&&e.Callback(e,{},this)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y),r=180*Math.atan(a/i)/Math.PI;return r},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var s=parseInt(a/n);return!(s<=0)&&(0==r&&(s*=-1),this.MoveYOffset(s,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var s=parseInt(a/n);return!(s<=0)&&(r||(s*=-1),this.MoveXOffset(s)&&(t.IsXMove=!0,this.Draw()),!0)},this.GetReportChart=function(){var t=this.ChartPaint[0];return t},this.GotoNextPage=function(t){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset+a>=this.Data.Data.length)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;this.Data.Data.length,this.Data.YOffset;return e.SelectedRow=this.Data.YOffset,!0},this.GotoPreviousPage=function(t){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=this.Data.Data.length-a,!0);var i=this.Data.YOffset;return i-=a,i<0&&(i=0),this.Data.YOffset=i,e.SelectedRow=this.Data.YOffset,!0},this.MoveYOffset=function(t,e){if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,s=this.Data.YOffset;if(e)for(var o=0;o<t;++o)++s,s+n>r&&(s=0);else{if(s+n>=r)return!1;for(o=0;o<t;++o){if(s+n+1>r)break;++s}}return this.Data.YOffset=s,!0}if(t<0){t=Math.abs(t);s=this.Data.YOffset;if(e)for(n=i.PageSize,o=0;o<t;++o)--s,s<0&&(s=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(o=0;o<t;++o){if(s-1<0)break;--s}}return this.Data.YOffset=s,!0}return!1},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1},i=e.GetCurrentPageStatus(),r=(i.PageSize,i.SelectedRow);if(t>0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var n=this.Data.YOffset,s=0;s<t;++s){if(++r,r>i.End&&++n,r>=this.Data.Data.length)break;a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n}return a}if(t<0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(n=this.Data.YOffset,s=0;s<t;++s){if(--r,r<i.Start&&--n,r<0)break;a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n}return a}}}function Yn(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=xi.Report.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=xi.Report.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font},this.Draw=function(){var t=F(this.ChartBorder.GetLeft()),e=F(this.ChartBorder.GetTop()),a=F(this.ChartBorder.GetRight()),i=F(this.ChartBorder.GetBottom()),r=a-t,n=i-e;ze.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=xi.FrameLogo.Text;if(ze.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}Vn.Init=function(t){var e=new Vn(t);return e.OnSize(),e},Vn.SetStyle=function(t){t&&xi.SetStyle(t)};var Xn={SHORT_SYMBOL_ID:0,SYMBOL_ID:1,NAME_ID:2,TYPE_ID:3};function Wn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartSymbolList",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.SizeChange=!0,this.SelectedRow=-1,this.IsDrawBorder=!1,this.ShowSymbol=[],this.BorderColor=xi.Keyboard.BorderColor,this.SelectedColor=xi.Keyboard.SelectedColor,this.TextColor=xi.Keyboard.TextColor,this.ItemFontConfig={Size:xi.Keyboard.Item.Font.Size,Name:xi.Keyboard.Item.Font.Name},this.ItemMergin={Left:xi.Keyboard.Item.Mergin.Left,Right:xi.Keyboard.Item.Mergin.Right,Top:xi.Keyboard.Item.Mergin.Top,Bottom:xi.Keyboard.Item.Mergin.Bottom},this.ItemFont=15*I()+"px 微软雅黑",this.ItemSymbolFont=12*I()+"px 微软雅黑",this.ItemNameFont=15*I()+"px 微软雅黑",this.ItemNameHeight=0,this.RowCount=0,this.RowHeight=0,this.Column=[{Type:Xn.SHORT_SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,MaxText:"888888"},{Type:Xn.NAME_ID,Title:"名称",TextAlign:"left",Width:null,MaxText:"擎擎擎擎擎擎"},{Type:Xn.TYPE_ID,Title:"类型",TextAlign:"right",Width:null,MaxText:"擎擎擎擎"}],this.RectClient={},this.ReloadResource=function(t){},this.SetColumn=function(t){ze.IsNonEmptyArray(t)},this.Draw=function(){this.ShowSymbol=[],this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip(),this.DrawBody(),this.Canvas.restore(),this.DrawBorder(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.RowCount;return e},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return ze.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Star=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.UpdateCacheData();var t=I();this.ItemFont="".concat(this.ItemFontConfig.Size*t,"px ").concat(this.ItemFontConfig.Name),this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom;var e=this.RectClient.Left,a=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var i=0,r=0;r<this.Column.length;++r){var n=this.Column[r];i=this.Canvas.measureText(n.MaxText).width,n.Width=i+4+this.ItemMergin.Left+this.ItemMergin.Right,r==this.Column.length-1&&e+n.Width<a&&(n.Width=a-e),e+=n.Width}this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top)/this.RowHeight)},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,F(a)),this.Canvas.lineTo(e,F(a));for(var i=a+this.RowHeight,r=i,n=0;n<this.RowCount;++n){var s=F(i);this.Canvas.moveTo(t,s),this.Canvas.lineTo(e,s),r=i,i+=this.RowHeight}var o=t;for(n=this.Data.XOffset;n<this.Column.length;++n){var h=this.Column[n],l=F(o+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),o+=h.Width}this.Canvas.stroke()}},this.GetSelectedSymbol=function(){return this.SelectedRow<0||this.SelectedRow>=this.Data.Data.length?null:{Symbol:this.Data.Data[this.SelectedRow],RowID:this.SelectedRow}},this.DrawBody=function(){if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFont;for(var r=this.Data.YOffset,n=0;r<this.Data.Data.length&&n<this.RowCount;++r,++n){var s=this.Data.Data[r],o=!1;r==this.SelectedRow&&(o=!0),o&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e+1,i,a,this.RowHeight)),this.DrawRow(s,i,r),this.ShowSymbol.push({Index:r,Symbol:s}),i+=this.RowHeight}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,s={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(s.Stock=this.GetStockDataCallback(t));for(var o=this.Data.XOffset;o<this.Column.length;++o){var h=this.Column[o];if(this.DrawItem(a,s,h,r,e,i),r+=h.Width,r>=n)break}},this.DrawItem=function(t,e,a,i,r,n){a.Width;var s=i+this.ItemMergin.Left,o=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,h=e.Stock,l={Text:null,TextColor:this.TextColor,TextAlign:a.TextAlign};a.Type==Xn.SHORT_SYMBOL_ID?(h&&h.ShortSymbol?l.Text=h.ShortSymbol:l.Text=e.Symbol,h.Color&&(l.TextColor=h.Color)):a.Type==Xn.NAME_ID?h&&h.Name&&(l.Text=this.TextEllipsis(h.Name,o,a.MaxText),h.Color&&(l.TextColor=h.Color)):a.Type==Xn.TYPE_ID&&h&&h.Type&&(l.Text=this.TextEllipsis(h.Type,o,a.MaxText),h.Color&&(l.TextColor=h.Color)),this.DrawItemText(l.Text,l.TextColor,l.TextAlign,s,r,o)},this.DrawItemText=function(t,e,a,i,r,n){if(t){var s=i;"center"==a?(s=i+n/2,this.Canvas.textAlign="center"):"right"==a?(s=i+n-2,this.Canvas.textAlign="right"):(s+=2,this.Canvas.textAlign="left"),this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,this.Canvas.fillText(t,s,r+this.ItemMergin.Top+this.RowHeight/2)}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var s=r+t[n]+"...",o=this.Canvas.measureText(s).width;if(o>e){r+="...";break}r+=t[n]}return r},this.GetFontHeight=function(t,e){return T(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;var i=I(),r={X:t/i,Y:e/i};if(this.UIElement)var n={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else n={Left:null,Top:null};var s=this.PtInBody(t,e);if(s){var o=!0;0==this.SelectedModel?(this.SelectedRow==s.Index&&(o=!1),this.SelectedRow=s.Index,this.SelectedFixedRow=-1):(this.SelectedRow==s.DataIndex&&(o=!1),this.SelectedRow=s.DataIndex,this.SelectedFixedRow=-1);var h=C.ON_CLICK_REPORT_ROW;return 2==a.button&&(h=C.ON_RCLICK_REPORT_ROW),this.SendClickEvent(h,{Data:s,X:t,Y:e,e:a,Inside:r,UIElement:n}),{Type:2,Redraw:o,Row:s}}return null},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),s=r;if(e<s+i)return{Type:5};for(var o=this.Data.YOffset,h=0;o<this.Data.Data.length&&h<this.RowCount;++o,++h){var l=this.Data.Data[o],u={Left:0,Top:s,Right:n,Bottom:s+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var c={DataIndex:o,Index:h,Symbol:l,Pos:0};return 0==h?c.Pos=1:h==this.RowCount-1&&(c.Pos=2),{Type:2,Data:c}}s+=this.RowHeight}return h<this.RowCount?{Type:6}:{Type:7}},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInBody(t,e);return!!i},this.PtInBody=function(t,e){if(!this.Data)return null;if(!ze.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),s=this.Data.YOffset,o=0;s<this.Data.Data.length&&o<this.RowCount;++s,++o){var h=this.Data.Data[s],l={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom){var u={Rect:l,DataIndex:s,Index:o,Symbol:h};return u.Item=this.PtInItem(t,e,l.Top,l.Bottom),u}n+=this.RowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,s=r,o=0;o<this.FixedColumn&&o<this.Column.length;++o){var h=this.Column[o],l={Left:s,Right:s+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:o};s+=h.Width}for(o=this.FixedColumn+this.Data.XOffset;o<this.Column.length;++o){h=this.Column[o];if(s>=n)break;l={Left:s,Right:s+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:o};s+=h.Width}return null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)}}function Un(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsscrollbar-drawing",this.CanvasElement.id=b(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&l.Chart.Log("[JSScrollBarChart::JSScrollBarChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=I();this.CanvasElement.height*=e,this.CanvasElement.width*=e,l.Chart.Log("[JSScrollBarChart::OnSize] devicePixelRatio=".concat(window.devicePixelRatio,", height=").concat(this.CanvasElement.height,", width=").concat(this.CanvasElement.width)),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSScrollBarChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),e.Draw(),this.JSChartContainer=e,this.DivElement.JSChart=this},this.CreateJSScrollBarChartContainer=function(t){var e=new zn(this.CanvasElement);if(e.Create(t),ze.IsNumber(t.DelayDragFrequency)&&(e.DelayDragFrequency=t.DelayDragFrequency),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;ze.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),ze.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),ze.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),ze.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var i=I();t.Frame.ChartBorder.Left*=i,t.Frame.ChartBorder.Right*=i,t.Frame.ChartBorder.Top*=i,t.Frame.ChartBorder.Bottom*=i,ze.IsBool(a.AutoLeft)&&(t.AutoMargin.Left=a.AutoLeft),ze.IsBool(a.AutoRight)&&(t.AutoMargin.Right=a.AutoRight)}},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(l.Chart.Log("[JSScrollBarChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(l.Chart.Log("[JSScrollBarChart:Draw] "),this.JSChartContainer.Draw())},this.RecvData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RecvData&&(l.Chart.Log("[JSScrollBarChart:RecvData] "),this.JSChartContainer.RecvData(t,e))},this.UpdateSlider=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.UpdateSlider&&(l.Chart.Log("[JSScrollBarChart:UpdateSlider] "),this.JSChartContainer.UpdateSlider(t))},this.Reset=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Reset&&(l.Chart.Log("[JSScrollBarChart:Reset] "),this.JSChartContainer.Reset(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(l.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}function zn(t){this.ClassName="JSScrollBarChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="无数据",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.XOffsetData={Start:-1,End:-1,Count:0},this.SourceData,this.SliderChart,this.DragMove,this.DragSlider,this.DragTimer,this.DelayDragFrequency=150,this.AutoMargin={Left:!1,Right:!1},this.mapEvent=new Map,this.UIElement=t,this.LastPoint=new N,this.IsDestroy=!1,this.HQChart=null,this.ChartDestory=function(){this.IsDestroy=!0},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ia,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new Kn,this.Frame.ChartBorder=new R,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new Qn;a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint.push(a);a=new Jn;a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.OffsetData=this.XOffsetData,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.SliderChart=a,this.ChartPaint.push(a),this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=I();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(e=0;e<this.ChartPaint.length;++e){a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.UpdateFrameMaxMin=function(){for(var t=null,e=null,a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];if(i.GetMaxMin){var r=i.GetMaxMin();null!=r&&null!=r.Max&&null!=r.Min&&((null==t||t<r.Max)&&(t=r.Max),(null==e||e>r.Min)&&(e=r.Min))}}ze.IsNumber(t)&&ze.IsNumber(e)&&(this.Frame.HorizontalMax=t,this.Frame.HorizontalMin=e)},this.UIOnDblClick=function(t){},this.CancelDragTimer=function(){this.DragTimer&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.UIOnMouseDown=function(t){var e=this;this.CancelDragTimer(),this.DragSlider=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=I(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(this.SliderChart){var n=this.SliderChart.PtInChart(i,r);if(!n)return;this.DragSlider={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:n},this.DragSlider.DrawCount=0}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=I(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(!this.DragSlider){var r=r={Cursor:"default"},n=this.SliderChart.PtInChart(a,i);if(n)switch(n.Data.Type){case 0:r={Cursor:"move",Name:"SliderChart"};break;case 1:case 2:r={Cursor:"ew-resize",Name:"SliderChart"};break}r&&(this.UIElement.style.cursor=r.Cursor)}},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){var e=this;if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=I(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(l.Chart.Log("[JSScrollBarChartContainer::DocOnMouseMove] x=".concat(i,", y=").concat(r)),this.DragSlider){var n=this.DragSlider,s=(t.clientX-n.LastMove.X)*a;if(Math.abs(s)<1)return;var o=this.GetPageRange(),h=this.Frame.ChartBorder.GetLeft(),u=this.Frame.ChartBorder.GetRight();this.SliderChart.DragMode=!0;var c=n.Data.Data.Type,d=this.SliderChart.XStart+s,f=this.SliderChart.XEnd+s;0==c?(d<h?(d=o.First.XStart,f=o.First.XEnd):f>=u&&(d=o.Last.XStart,f=o.Last.XEnd),this.SliderChart.XStart=d,this.SliderChart.XEnd=f):1==c?(d<=h&&(d=o.First.XStart),this.SliderChart.XStart=d):2==c&&(f>=u&&(f=o.Last.XEnd),this.SliderChart.XEnd=f),n.UpdateData={XStart:d,XEnd:f,Type:c},n.LastMove.X=t.clientX,n.LastMove.Y=t.clientY,0==n.DrawCount?this.DragUpdate(n):this.DragTimer=setTimeout((function(){e.DragUpdate(e.DragSlider)}),this.DelayDragFrequency)}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.CancelDragTimer();var e=this.DragSlider;this.DragMove=null,this.DragSlider=null,this.SliderChart.DragMode=!1,this.DragUpdate(e)},this.DragUpdate=function(t){t&&t.UpdateData&&(this.UpdateXDataOffset(t.UpdateData),this.Draw(),++t.DrawCount)},this.Reset=function(t){this.SourceData=null,this.XOffsetData.Start=-1,this.XOffsetData.End=-1,this.XOffsetData.Count=0,this.Frame.Data=null;for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.Data=null}this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!0),t.Draw&&this.Draw()},this.UpdateSlider=function(t){if(!this.SliderChart.DragMode){var e=!1;(this.AutoMargin.Left||this.AutoMargin.Right)&&t.Border&&(this.AutoMargin.Left&&this.Frame.ChartBorder.Left!=t.Border.Left&&(e=!0),this.AutoMargin.Right&&this.Frame.ChartBorder.Right!=t.Border.Right&&(e=!0));var a=t.Data;if(this.XOffsetData.Start!=t.Start||this.XOffsetData.End!=t.End||this.SourceData!=a||e){this.SourceData=a;var i=a.Data.length;ze.IsNumber(t.RightSpaceCount)&&(i+=t.RightSpaceCount),this.Frame.XPointCount=i,this.Frame.Data=a,this.XOffsetData.Count=i,this.XOffsetData.Start=t.Start,this.XOffsetData.End=t.End;for(var r=0;r<this.ChartPaint.length;++r){var n=this.ChartPaint[r];n.Data=a}this.AutoMargin.Left&&t.Border&&ze.IsNumber(t.Border.Left)&&(this.Frame.ChartBorder.Left=t.Border.Left),this.AutoMargin.Right&&t.Border&&ze.IsNumber(t.Border.Right)&&(this.Frame.ChartBorder.Right=t.Border.Right),this.UpdateFrameMaxMin(),this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!1),t.Draw&&this.Draw()}}},this.UpdateXDataOffset=function(t){if(0==t.Type){var e=this.Frame.GetXData(t.XStart);e=parseInt(e);var a=e-this.XOffsetData.Start;this.XOffsetData.Start=e,this.XOffsetData.End+=a}else if(1==t.Type){e=this.Frame.GetXData(t.XStart);e=parseInt(e),this.XOffsetData.Start=e}else if(2==t.Type){var i=this.Frame.GetXData(t.XEnd);i=parseInt(i),this.XOffsetData.End=i}var r=this.SourceData.Data[this.XOffsetData.End],n=this.SourceData.Data[this.XOffsetData.Start],s={Type:t.Type,Count:this.XOffsetData.Count};if(this.XOffsetData.End>this.XOffsetData.Start?(s.Start={Index:this.XOffsetData.Start,Item:n},s.End={Index:this.XOffsetData.End,Item:r}):(s.Start={Index:this.XOffsetData.End,Item:r},s.End={Index:this.XOffsetData.Start,Item:n}),this.HQChart&&this.HQChart.JSChartContainer){var o=this.HQChart.JSChartContainer;if(o.ChartOperator){t={ID:m.OP_SCROOLBAR_SLIDER_CHANGED,Start:s.Start,End:s.End,Type:s.Type};o.ChartOperator(t)}}var h=this.GetEventCallback(C.ON_SCROLLBAR_SLIDER_CHANGED);h&&h.Callback(h,s,this)},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.GetPageRange=function(){var t={},e=Math.abs(this.XOffsetData.Start-this.XOffsetData.End);t.ShowCount=e;var a=this.Frame.GetXFromIndex(0),i=this.Frame.GetXFromIndex(e);t.First={XStart:a,XEnd:i};var r=this.Frame.XPointCount-1;i=this.Frame.GetXFromIndex(r),a=this.Frame.GetXFromIndex(r-e);return t.Last={XStart:a,XEnd:i},t},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}1==t.Draw&&this.Draw()}}function Kn(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.Data,this.Count=0,this.ClassName="JSScrollBarFrame",this.HorizontalMax=10,this.HorizontalMin=5,this.XPointCount=0,this.XSplitTextFont=xi.ScrollBar.XSplitTextFont,this.XSplitTextColor=xi.ScrollBar.XSplitTextColor,this.XSplitLineColor=xi.ScrollBar.XSplitLineColor,this.BorderColor=xi.ScrollBar.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=xi.ScrollBar.BorderColor,this.LogoTextColor=xi.FrameLogo.TextColor,this.LogoTextFont=xi.FrameLogo.Font},this.Draw=function(){this.DrawBorder(),this.DrawLogo(),this.DrawVertical()},this.DrawLogo=function(){var t=xi.FrameLogo.Text;if(ze.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var e=this.ChartBorder.GetLeft()+2,a=this.ChartBorder.GetTop()+2;this.Canvas.fillText(t,e,a)}},this.DrawBorder=function(){var t=F(this.ChartBorder.GetLeft()),e=F(this.ChartBorder.GetTop()),a=F(this.ChartBorder.GetRight()),i=F(this.ChartBorder.GetBottom()),r=a-t,n=i-e;ze.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.GetXFromIndex=function(t){var e=this.XPointCount;if(1==e)return 0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight();if(e<=0)return this.ChartBorder.GetLeft();if(t>=e)return this.ChartBorder.GetRight();var a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e;return a},this.GetYFromData=function(t){if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();var e=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-e},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.GetPreSetpWidth=function(){return 1*this.XPointCount/this.ChartBorder.GetWidth()},this.DrawVertical=function(){if(!(this.ChartBorder.Bottom<=5)&&this.Data&&ze.IsNonEmptyArray(this.Data.Data)){var t=this.Data.Data[0],e=parseInt(t.Date/1e4),a=t.Date%1e4;this.Canvas.font=this.XSplitTextFont,this.Canvas.fillStyle=this.XSplitTextColor,this.Canvas.textBaseline="top";var i=this.ChartBorder.GetBottom()+2,r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom(),s=0,o=ut.IsMinutePeriod(this.Data.Period,!0);if(o)for(var h=0;h<this.Data.Data.length;++h){t=this.Data.Data[h];var l=t.Date%1e4;if(0!=h){if(l!=a){u=ze.FormatDateString(t.Date,"MM-DD"),c=this.GetXFromIndex(h),d=this.Canvas.measureText(u).width+2;c-d/2>s&&(this.Canvas.textAlign="center",this.Canvas.fillText(u,c,i),s=c+d/2),c=F(c),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,r),this.Canvas.lineTo(c,n),this.Canvas.stroke(),a=l}}else{var u=ze.FormatDateString(t.Date,"MM-DD"),c=this.ChartBorder.GetLeft();this.Canvas.textAlign="left",this.Canvas.fillText(u,c,i);var d=this.Canvas.measureText(u).width+2;s=c+d,a=l}}else for(h=0;h<this.Data.Data.length;++h){t=this.Data.Data[h];var f=parseInt(t.Date/1e4);if(0!=h){if(f!=e){u="".concat(f),c=this.GetXFromIndex(h),d=this.Canvas.measureText(u).width+2;c-d/2>s&&(this.Canvas.textAlign="center",this.Canvas.fillText(u,c,i),s=c+d/2),c=F(c),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,r),this.Canvas.lineTo(c,n),this.Canvas.stroke(),e=f}}else{var u="".concat(f),c=this.ChartBorder.GetLeft(),d=this.Canvas.measureText(u).width+2;this.Canvas.textAlign="left",this.Canvas.fillText(u,c,i),s=c+d,e=f}}}}}function Jn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="SliderChart",this.OffsetData,this.Color=xi.ScrollBar.Slider.BarAreaColor,this.BarColor=xi.ScrollBar.Slider.BarColor,this.BarWidth=10,this.BarPadding=10,this.DateFont=xi.ScrollBar.Slider.DateFont,this.DateColor=xi.ScrollBar.Slider.DateColor,this.AryRect=[],this.XStart,this.XEnd,this.SizeChange=!0,this.DragMode=!1,this.ReloadResource=function(t){this.Color=xi.ScrollBar.Slider.BarAreaColor,this.BarColor=xi.ScrollBar.Slider.BarColor,this.DateFont=xi.ScrollBar.Slider.DateFont,this.DateColor=xi.ScrollBar.Slider.DateColor},this.Draw=function(){if(this.AryRect=[],this.OffsetData&&ze.IsPlusNumber(this.OffsetData.Count)&&ze.IsNumber(this.OffsetData.Start)&&ze.IsNumber(this.OffsetData.End)){var t,e,a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom();if(this.DragMode){var r=this.XStart,n=this.XEnd,s=this.ChartFrame.GetXData(r),o=this.ChartFrame.GetXData(n);s=parseInt(s),o=parseInt(o),t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:s<o?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:o>s?1:0}}else{var h=this.OffsetData.Start,l=this.OffsetData.End;r=this.ChartFrame.GetXFromIndex(h),n=this.ChartFrame.GetXFromIndex(l);this.XStart=r,this.XEnd=n,t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:r<n?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:n>r?1:0}}this.Canvas.fillStyle=this.Color;var u={Left:Math.min(r,n),Top:a,Width:Math.abs(n-r),Height:i-a};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:0});var c=I(),d=this.BarWidth*c,f=i-a-2*this.BarPadding*c,C=r-this.BarWidth/2,m=a+this.BarPadding*c;this.Canvas.fillStyle=this.BarColor;u={Left:C,Top:m,Width:d,Height:f};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:1});C=n-this.BarWidth/2,u={Left:C,Top:m,Width:d,Height:f};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:2}),this.DrawDateTime(t),this.DrawDateTime(e)}},this.DrawDateTime=function(t){if(t&&t.Data){var e=ze.FormatDateString(t.Data.Date),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=ut.IsMinutePeriod(this.Data.Period,!0),n=null;if(r&&(n=ze.FormatTimeString(t.Data.Time,"HH:MM")),0==t.Type){this.Canvas.textAlign="right";var s=t.X-this.BarWidth/2}else if(1==t.Type){this.Canvas.textAlign="left";s=t.X+this.BarWidth/2}this.Canvas.font=this.DateFont;var o=this.Canvas.measureText("擎").width;this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.DateColor;var h=a+(i-a)/2;this.Canvas.fillText(e,s,h),n&&(h+=o,this.Canvas.fillText(n,s,h))}},this.PtInChart=function(t,e){if(!ze.IsNonEmptyArray(this.AryRect))return null;for(var a=this.AryRect.length-1;a>=0;--a){var i=this.AryRect[a],r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom)return{Data:i}}return null}}function Qn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ScrollBarBGChart",this.SizeChange=!0,this.Data,this.Color=xi.ScrollBar.BGChart.Color,this.LineWidth=xi.ScrollBar.BGChart.LineWidth,this.AreaColor=xi.ScrollBar.BGChart.AreaColor,this.ReloadResource=function(t){this.Color=xi.ScrollBar.BGChart.Color,this.LineWidth=xi.ScrollBar.BGChart.LineWidth,this.AreaColor=xi.ScrollBar.BGChart.AreaColor},this.Draw=function(){if(this.Data&&ze.IsNonEmptyArray(this.Data.Data)){this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*I());var t=this.ChartBorder.GetBottom();this.Canvas.strokeStyle=this.Color;for(var e,a,i=!0,r=0,n={},s=0;s<this.Data.Data.length;++s){var o=this.Data.Data[s],h=o.Close;ze.IsNumber(h)&&(e=this.ChartFrame.GetXFromIndex(s),a=this.ChartFrame.GetYFromData(h),i?(this.Canvas.beginPath(),this.Canvas.moveTo(e,a),i=!1,n={X:e,Y:a}):this.Canvas.lineTo(e,a),++r)}r>0&&(this.Canvas.stroke(),this.Canvas.lineTo(e,t),this.Canvas.lineTo(n.X,t),this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()),this.Canvas.restore()}},this.GetMaxMin=function(){var t={Max:null,Min:null};if(!this.Data||!ze.IsNonEmptyArray(this.Data.Data))return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e],i=a.Close;ze.IsNumber(i)&&((null==t.Max||t.Max<i)&&(t.Max=i),(null==t.Min||t.Min>i)&&(t.Min=i))}return t}}Un.Init=function(t){var e=new Un(t);return e.OnSize(),e},Un.SetStyle=function(t){t&&xi.SetStyle(t)},Un.GetResource=function(){return xi};function $n(){}(function(){var t="*************************************************************************************************************\n*\n*   HQChart                                             Ver: ".concat("1.1.12314"," \n*                             \n*   License: Apache License 2.0                                                                              \n*   Source: https://github.com/jones2000/HQChart\n*\n*************************************************************************************************************\n");console.log(t)})(),$n.HttpRequest=function(t){var e=t.type.toUpperCase();uni.request({url:t.url,data:t.data,method:e,success:function(e){t.success(e.data)},fail:t.error})};var jn=(n={JSChart:f,ChartData:ut,MARKET_SUFFIX_NAME:Mr,IFrameSplitOperator:ze,FrameSplitKLinePriceY:Ke,FrameSplitKLineX:Qe,JSKLineInfoMap:ir,JSCHART_EVENT_ID:C,JSCHART_OPERATOR_ID:m,JSAlgorithm:en,JSComplier:ln,JSIndexScript:d,GetDevicePixelRatio:I},(0,o.default)(n,"GetDevicePixelRatio",I),(0,o.default)(n,"ScriptIndexConsole",pn),(0,o.default)(n,"STYLE_TYPE_ID",yn),(0,o.default)(n,"HQChartStyle",An),(0,o.default)(n,"JSConsole",l),(0,o.default)(n,"KLineTooltipPaint",Me),(0,o.default)(n,"MinuteTooltipPaint",Le),(0,o.default)(n,"CoordinateInfo",O),(0,o.default)(n,"JSDealChart",bn),(0,o.default)(n,"DEAL_COLUMN_ID",Mn),(0,o.default)(n,"JSReportChart",En),(0,o.default)(n,"REPORT_COLUMN_ID",Rn),(0,o.default)(n,"JSKeyboardChart",Vn),(0,o.default)(n,"KEYBOARD_COLUMN_ID",Xn),(0,o.default)(n,"JSScrollBarChart",Un),n);e.default=jn},"4c10":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-09e9487a], uni-scroll-view[data-v-09e9487a], uni-swiper-item[data-v-09e9487a]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-line[data-v-09e9487a]{vertical-align:middle}',""]),t.exports=e},"4c12":function(t,e,a){var i=a("c86c"),r=a("2ec5"),n=a("6182");e=i(!1);var s=r(n);e.push([t.i,"uni-page-body[data-v-15523df2]{background:#f7f8fa}body.?%PAGE?%[data-v-15523df2]{background:#f7f8fa}.submit-btn[data-v-15523df2]{background:var(--mainColor);color:#fff;width:70px;border-radius:5px;background-image:url("+s+");background-size:50%;background-position:50%;background-repeat:no-repeat}",""]),t.exports=e},"4d92":function(t,e,a){var i=a("7312");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("4d428493",i,!0,{sourceMap:!1,shadowMode:!1})},"4e16":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uUpload:a("6c7b").default,"u-Input":a("2354").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},["black"==this.$store.state.bgColor?i("v-uni-view",{staticStyle:{width:"100%",height:"12px",background:"#1A1C24"}}):t._e(),"while"==this.$store.state.bgColor?i("v-uni-view",{staticStyle:{width:"100%",height:"12px",background:"#F7F8FA"}}):t._e(),0==t.userstatus.real_status?i("v-uni-view",{style:"black"==this.$store.state.bgColor?"display: flex;flex-direction: column; width: 100%; color: #fff;":"display: flex;flex-direction: column; width: 100%; "},[i("v-uni-text",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-left":"15px",padding:"35px","padding-left":"0px"}},[t._v(t._s(t.i18n.upload_the_front_and_back))]),i("v-uni-view",{staticStyle:{display:"flex",width:"100%"}},[i("v-uni-view",{style:"black"==this.$store.state.bgColor?"display: flex; flex: 1; margin-left: 15px;height: 144px;background: #22252F;color: #fff;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1; width: 40%; flex-direction: column; justify-content: center; align-items: center; padding: 2px; padding-bottom: 10px;":"display: flex; flex: 1; margin-left: 15px;height: 144px;background: #FFFFFF;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1; width: 40%; flex-direction: column; justify-content: center; align-items: center; padding: 2px; padding-bottom: 10px;"},[i("v-uni-text",{staticStyle:{"margin-top":"8px","font-size":"18px","font-weight":"bold"}},[t._v(t._s(t.i18n.front))]),i("u-upload",{attrs:{fileList:t.fileList1,multiple:!0,name:"1",width:"226",height:"226",maxCount:1},on:{afterRead:function(e){arguments[0]=e=t.$handleEvent(e),t.afterRead.apply(void 0,arguments)},delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deletePic.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"275rpx",height:"226rpx","margin-top":"15px"},attrs:{src:a("8094"),mode:"widthFix"}})],1)],1),i("v-uni-view",{staticStyle:{width:"4%"}}),i("v-uni-view",{style:"black"==this.$store.state.bgColor?"display: flex; flex: 1; margin-right: 15px;height: 144px;background: #22252F;color: #fff;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1; width: 40%; flex-direction: column; justify-content: center; align-items: center; padding: 2px;padding-bottom: 10px;":"display: flex; flex: 1; margin-right: 15px;height: 144px;background: #FFFFFF;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1; width: 40%; flex-direction: column; justify-content: center; align-items: center; padding: 2px;padding-bottom: 10px;"},[i("v-uni-text",{staticStyle:{"margin-top":"8px","font-size":"18px","font-weight":"bold"}},[t._v(t._s(t.i18n.back))]),i("u-upload",{attrs:{fileList:t.fileList2,multiple:!0,name:"2",width:"226",height:"226",maxCount:1},on:{afterRead:function(e){arguments[0]=e=t.$handleEvent(e),t.afterReadTwo.apply(void 0,arguments)},delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deletePicTwo.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"275rpx",height:"226rpx","margin-top":"15px"},attrs:{src:a("8094"),mode:"widthFix"}})],1)],1)],1),i("v-uni-view",{staticStyle:{width:"100%",padding:"10px","padding-left":"0px"}},[i("v-uni-text",{staticStyle:{color:"#6F747C","margin-left":"14px"}},[t._v(t._s(t.i18n.improve_information))])],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[i("v-uni-view",{staticStyle:{"font-size":"12px",width:"25%","margin-left":"15px"}},[t._v(t._s(t.i18n.name))]),i("v-uni-view",{staticStyle:{width:"100%"}},["black"==this.$store.state.bgColor?i("u--input",{staticClass:"bsone",staticStyle:{margin:"1px"},attrs:{color:"#fff",placeholder:t.i18n.enter_name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):t._e(),"while"==this.$store.state.bgColor?i("u--input",{staticStyle:{"margin-left":"15px"},attrs:{border:"none",placeholder:t.i18n.enter_name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):t._e()],1)],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[i("v-uni-view",{staticStyle:{"font-size":"12px",width:"25%","margin-left":"15px"}},[t._v(t._s(t.i18n.passport_idnumber))]),i("v-uni-view",{staticStyle:{width:"100%"}},["black"==this.$store.state.bgColor?i("u--input",{staticClass:"bsone",staticStyle:{margin:"15px"},attrs:{color:"#fff",placeholder:t.i18n.enter_passport_idnumber},model:{value:t.card,callback:function(e){t.card=e},expression:"card"}}):t._e(),"while"==this.$store.state.bgColor?i("u--input",{staticStyle:{"margin-left":"15px"},attrs:{border:"none",placeholder:t.i18n.enter_passport_idnumber},model:{value:t.card,callback:function(e){t.card=e},expression:"card"}}):t._e()],1)],1),i("v-uni-view",{staticStyle:{width:"100%"}},[i("v-uni-button",{staticStyle:{background:"#0166fc","margin-top":"20px","border-radius":"60px",border:"0","font-size":"12px",margin:"15px",height:"45px",color:"#FFFFFF","line-height":"45px !important"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onsubmits.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.submit))])],1)],1):t._e(),1==t.userstatus.real_status?i("v-uni-view",{staticStyle:{width:"50%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",margin:"0 auto","margin-top":"50px"}},[i("v-uni-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:a("1966")}}),"black"==t.$store.state.bgColor?i("v-uni-text",{staticStyle:{"font-size":"16px","font-weight":"bold",color:"#fff"}},[t._v(t._s(t.i18n.under_review))]):t._e(),"while"==t.$store.state.bgColor?i("v-uni-text",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.i18n.under_review))]):t._e()],1):t._e(),2==t.userstatus.real_status?i("v-uni-view",{style:"black"==t.$store.state.bgColor?"display: flex; flex-direction: column; width: 95%; margin: 0 auto; height: 85px;background: #22252F;color: #fff;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1;":"display: flex; flex-direction: column; width: 95%; margin: 0 auto; height: 85px;background: #FFFFFF;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1;"},[i("v-uni-view",{staticStyle:{display:"flex",width:"90%","justify-content":"space-between",height:"20px",margin:"0 auto","margin-top":"15px"}},[i("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v(t._s(t.i18n.name)+":")]),i("v-uni-text",[t._v(t._s(t.nameFormats(t.userstatus.real_data.name)))])],1),i("v-uni-view",{staticStyle:{display:"flex",width:"90%","justify-content":"space-between",height:"20px",margin:"0 auto","margin-top":"20px"}},[i("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v(t._s(t.i18n.passport_idnumber)+":")]),i("v-uni-text",[t._v(t._s(t.formatIDcards(t.userstatus.real_data.card_id)))])],1)],1):t._e()],1)},n=[]},"4e1a":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("b7c7"));a("d4b5"),a("5ef2"),a("5c47"),a("a1c1"),a("fd3c"),a("aa9c"),a("c223"),a("0506"),a("23f4"),a("7d2f"),a("9c4e"),a("ab80");var n={data:function(){return{messageList:[],pages:1,status:!1,loding:"",scrollH:0,noData:" "}},computed:{i18n:function(){return this.$t("service")}},mounted:function(){this.getData();uni.setNavigationBarTitle({title:this.$t("mine.announcement")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},onShow:function(){this.getData()},onReachBottom:function(){this.scrolltolower()},methods:{scrolltolower:function(){if(this.status)return!1;this.pages+=1,this.getData()},goArticle:function(t){var e="/pages/article/article?item="+encodeURIComponent(JSON.stringify(t));e.indexOf("%")>-1&&(e=e.replace(/%/g,"%25")),uni.navigateTo({url:e})},getData:function(){var t=this;this.status=!0;this.$H.post("/api/v1/getAnnouncement",!1,{language:uni.getStorageSync("lang")||"en",page:this.page}).then((function(e){if("ok"==e.type){var a=[];if(e.data.data.length<=0)return t.status=!1,void(t.pages-=1);e.data.data.map((function(e){var i=new Date(Date.parse(new Date(e.create_time)));e.create_time=t.formatDate(i,"yyyy-MM-dd"),a.push(e)})),t.messageList.length>0&&t.pages>1?t.messageList=[].concat((0,r.default)(t.messageList),a):t.messageList=a,t.status=!1}}))},formatDate:function(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(e)){var r=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?r:this.padLeftZero(r))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)}}};e.default=n},"4eaf":function(t,e,a){"use strict";a.r(e);var i=a("169e"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"4f30":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uTransition:a("16a8").default,uIcon:a("b1c0").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u-transition",{attrs:{mode:"fade",show:t.show,duration:t.fade?1e3:0}},[a("v-uni-view",{staticClass:"u-image",style:[t.wrapStyle,t.backgroundStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t.isError?t._e():a("v-uni-image",{staticClass:"u-image__image",style:{borderRadius:"circle"==t.shape?"10000px":t.$u.addUnit(t.radius),width:t.$u.addUnit(t.width),height:t.$u.addUnit(t.height)},attrs:{src:t.src,mode:t.mode,"show-menu-by-longpress":t.showMenuByLongpress,"lazy-load":t.lazyLoad},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.onErrorHandler.apply(void 0,arguments)},load:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoadHandler.apply(void 0,arguments)}}}),t.showLoading&&t.loading?a("v-uni-view",{staticClass:"u-image__loading",style:{borderRadius:"circle"==t.shape?"50%":t.$u.addUnit(t.radius),backgroundColor:this.bgColor,width:t.$u.addUnit(t.width),height:t.$u.addUnit(t.height)}},[t._t("loading",[a("u-icon",{attrs:{name:t.loadingIcon,width:t.width,height:t.height}})])],2):t._e(),t.showError&&t.isError&&!t.loading?a("v-uni-view",{staticClass:"u-image__error",style:{borderRadius:"circle"==t.shape?"50%":t.$u.addUnit(t.radius),width:t.$u.addUnit(t.width),height:t.$u.addUnit(t.height)}},[t._t("error",[a("u-icon",{attrs:{name:t.errorIcon,width:t.width,height:t.height}})])],2):t._e()],1)],1)},n=[]},"4f97":function(t,e,a){"use strict";a.r(e);var i=a("4f30"),r=a("a217");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("de62");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"34501f9b",null,!1,i["a"],void 0);e["default"]=o.exports},5023:function(t,e,a){"use strict";a.r(e);var i=a("8e54"),r=a("bea5");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("e4b1");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"686b42e6",null,!1,i["a"],void 0);e["default"]=o.exports},"502e":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uIcon:a("b1c0").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-number-box"},[t.showMinus&&t.$slots.minus?a("v-uni-view",{staticClass:"u-number-box__slot",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart("minus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimeout.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clickHandler("minus")}}},[t._t("minus")],2):t.showMinus?a("v-uni-view",{staticClass:"u-number-box__minus",class:{"u-number-box__minus--disabled":t.isDisabled("minus")},style:[t.buttonStyle("minus")],attrs:{"hover-class":"u-number-box__minus--hover","hover-stay-time":"150"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart("minus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimeout.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clickHandler("minus")}}},[a("u-icon",{attrs:{name:"minus",color:t.isDisabled("minus")?"#c8c9cc":"#323233",size:"15",bold:!0,customStyle:t.iconStyle}})],1):t._e(),t._t("input",[a("v-uni-input",{staticClass:"u-number-box__input",class:{"u-number-box__input--disabled":t.disabled||t.disabledInput},style:[t.inputStyle],attrs:{disabled:t.disabledInput||t.disabled,"cursor-spacing":t.getCursorSpacing,type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)}},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})]),t.showPlus&&t.$slots.plus?a("v-uni-view",{staticClass:"u-number-box__slot",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart("plus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimeout.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clickHandler("plus")}}},[t._t("plus")],2):t.showPlus?a("v-uni-view",{staticClass:"u-number-box__plus",class:{"u-number-box__minus--disabled":t.isDisabled("plus")},style:[t.buttonStyle("plus")],attrs:{"hover-class":"u-number-box__plus--hover","hover-stay-time":"150"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart("plus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimeout.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clickHandler("plus")}}},[a("u-icon",{attrs:{name:"plus",color:t.isDisabled("plus")?"#c8c9cc":"#323233",size:"15",bold:!0,customStyle:t.iconStyle}})],1):t._e()],2)},n=[]},"509a":function(t,e,a){"use strict";var i=a("3403"),r=a.n(i);r.a},"512f":function(t,e,a){"use strict";a.r(e);var i=a("912b"),r=a("26da");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("2ac6");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"ad5d33e8",null,!1,i["a"],void 0);e["default"]=o.exports},"527f":function(t,e,a){"use strict";t.exports=function(t,e){var a,i,r,n,s,o,h,l,u,c,d,f,C,m,D,p,v,g,S,I,T,x,y,A,b;a=t.state,i=t.next_in,A=t.input,r=i+(t.avail_in-5),n=t.next_out,b=t.output,s=n-(e-t.avail_out),o=n+(t.avail_out-257),h=a.dmax,l=a.wsize,u=a.whave,c=a.wnext,d=a.window,f=a.hold,C=a.bits,m=a.lencode,D=a.distcode,p=(1<<a.lenbits)-1,v=(1<<a.distbits)-1;t:do{C<15&&(f+=A[i++]<<C,C+=8,f+=A[i++]<<C,C+=8),g=m[f&p];e:for(;;){if(S=g>>>24,f>>>=S,C-=S,S=g>>>16&255,0===S)b[n++]=65535&g;else{if(!(16&S)){if(0===(64&S)){g=m[(65535&g)+(f&(1<<S)-1)];continue e}if(32&S){a.mode=12;break t}t.msg="invalid literal/length code",a.mode=30;break t}I=65535&g,S&=15,S&&(C<S&&(f+=A[i++]<<C,C+=8),I+=f&(1<<S)-1,f>>>=S,C-=S),C<15&&(f+=A[i++]<<C,C+=8,f+=A[i++]<<C,C+=8),g=D[f&v];a:for(;;){if(S=g>>>24,f>>>=S,C-=S,S=g>>>16&255,!(16&S)){if(0===(64&S)){g=D[(65535&g)+(f&(1<<S)-1)];continue a}t.msg="invalid distance code",a.mode=30;break t}if(T=65535&g,S&=15,C<S&&(f+=A[i++]<<C,C+=8,C<S&&(f+=A[i++]<<C,C+=8)),T+=f&(1<<S)-1,T>h){t.msg="invalid distance too far back",a.mode=30;break t}if(f>>>=S,C-=S,S=n-s,T>S){if(S=T-S,S>u&&a.sane){t.msg="invalid distance too far back",a.mode=30;break t}if(x=0,y=d,0===c){if(x+=l-S,S<I){I-=S;do{b[n++]=d[x++]}while(--S);x=n-T,y=b}}else if(c<S){if(x+=l+c-S,S-=c,S<I){I-=S;do{b[n++]=d[x++]}while(--S);if(x=0,c<I){S=c,I-=S;do{b[n++]=d[x++]}while(--S);x=n-T,y=b}}}else if(x+=c-S,S<I){I-=S;do{b[n++]=d[x++]}while(--S);x=n-T,y=b}while(I>2)b[n++]=y[x++],b[n++]=y[x++],b[n++]=y[x++],I-=3;I&&(b[n++]=y[x++],I>1&&(b[n++]=y[x++]))}else{x=n-T;do{b[n++]=b[x++],b[n++]=b[x++],b[n++]=b[x++],I-=3}while(I>2);I&&(b[n++]=b[x++],I>1&&(b[n++]=b[x++]))}break}}break}}while(i<r&&n<o);I=C>>3,i-=I,C-=I<<3,f&=(1<<C)-1,t.next_in=i,t.next_out=n,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=n<o?o-n+257:257-(n-o),a.hold=f,a.bits=C}},"52d0":function(t,e,a){var i=a("2bef");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("15183728",i,!0,{sourceMap:!1,shadowMode:!1})},5335:function(t,e,a){var i;a("7a76"),a("c9b5");var r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){var e=0;while(0!==t)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!==typeof t)throw new Error('"toSJISFunc" is not a valid function.');i=t},e.isKanjiModeEnabled=function(){return"undefined"!==typeof i},e.toSJIS=function(t){return i(t)}},"54eb":function(t,e,a){"use strict";var i,r=a("82de"),n=a("6632"),s=a("2a98"),o=a("d960"),h=a("d80f");function l(t,e){return t.msg=h[e],e}function u(t){return(t<<1)-(t>4?9:0)}function c(t){var e=t.length;while(--e>=0)t[e]=0}function d(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(r.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function f(t,e){n._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,d(t.strm)}function C(t,e){t.pending_buf[t.pending++]=e}function m(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function D(t,e,a,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,r.arraySet(e,t.input,t.next_in,n,a),1===t.state.wrap?t.adler=s(t.adler,e,n,a):2===t.state.wrap&&(t.adler=o(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)}function p(t,e){var a,i,r=t.max_chain_length,n=t.strstart,s=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+258,f=l[n+s-1],C=l[n+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,l[a+s]===C&&l[a+s-1]===f&&l[a]===l[n]&&l[++a]===l[n+1]){n+=2,a++;do{}while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<d);if(i=258-(d-n),n=d-258,i>s){if(t.match_start=e,s=i,i>=o)break;f=l[n+s-1],C=l[n+s]}}}while((e=c[e&u])>h&&0!==--r);return s<=t.lookahead?s:t.lookahead}function v(t){var e,a,i,n,s,o=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-262)){r.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,a=t.hash_size,e=a;do{i=t.head[--e],t.head[e]=i>=o?i-o:0}while(--a);a=o,e=a;do{i=t.prev[--e],t.prev[e]=i>=o?i-o:0}while(--a);n+=o}if(0===t.strm.avail_in)break;if(a=D(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=3){s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;while(t.insert)if(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+3-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,t.lookahead+t.insert<3)break}}while(t.lookahead<262&&0!==t.strm.avail_in)}function g(t,e){for(var a,i;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=p(t,a)),t.match_length>=3)if(i=n._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function S(t,e){for(var a,i,r;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=p(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(f(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=n._tr_tally(t,0,t.window[t.strstart-1]),i&&f(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function I(t,e,a,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=r}function T(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,n._tr_init(e),0):l(t,-2)}function y(t){var e=x(t);return 0===e&&function(t){t.window_size=2*t.w_size,c(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function A(t,e,a,i,n,s){if(!t)return-2;var o=1;if(-1===e&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>9||8!==a||i<8||i>15||e<0||e>9||s<0||s>4)return l(t,-2);8===i&&(i=9);var h=new T;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=n+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<n+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=a,y(t)}i=[new I(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,f(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(f(t,!1),t.strm.avail_out),1)})),new I(4,4,8,4,g),new I(4,5,16,8,g),new I(4,6,32,32,g),new I(4,4,16,16,S),new I(8,16,32,32,S),new I(8,16,128,128,S),new I(8,32,128,256,S),new I(32,128,258,1024,S),new I(32,258,258,4096,S)],e.deflateInit=function(t,e){return A(t,e,8,15,8,0)},e.deflateInit2=A,e.deflateReset=y,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var a,r,s,h;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(r.strm=t,a=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,C(r,31),C(r,139),C(r,8),r.gzhead?(C(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),C(r,255&r.gzhead.time),C(r,r.gzhead.time>>8&255),C(r,r.gzhead.time>>16&255),C(r,r.gzhead.time>>24&255),C(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),C(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(C(r,255&r.gzhead.extra.length),C(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=o(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(C(r,0),C(r,0),C(r,0),C(r,0),C(r,0),C(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),C(r,3),r.status=113);else{var D=8+(r.w_bits-8<<4)<<8,p=-1;p=r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3,D|=p<<6,0!==r.strstart&&(D|=32),D+=31-D%31,r.status=113,m(r,D),0!==r.strstart&&(m(r,t.adler>>>16),m(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){s=r.pending;while(r.gzindex<(65535&r.gzhead.extra.length)){if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),d(t),s=r.pending,r.pending===r.pending_buf_size))break;C(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++}r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),d(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,C(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),d(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,C(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&d(t),r.pending+2<=r.pending_buf_size&&(C(r,255&t.adler),C(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(d(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&u(e)<=u(a)&&4!==e)return l(t,-5);if(666===r.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var g=2===r.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var a,i,r,s,o=t.window;;){if(t.lookahead<=258){if(v(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=t.strstart+258;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=n._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(r,e):i[r.level].func(r,e);if(3!==g&&4!==g||(r.status=666),1===g||3===g)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===g&&(1===e?n._tr_align(r):5!==e&&(n._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),d(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(C(r,255&t.adler),C(r,t.adler>>8&255),C(r,t.adler>>16&255),C(r,t.adler>>24&255),C(r,255&t.total_in),C(r,t.total_in>>8&255),C(r,t.total_in>>16&255),C(r,t.total_in>>24&255)):(m(r,t.adler>>>16),m(r,65535&t.adler)),d(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status,42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0)):-2},e.deflateSetDictionary=function(t,e){var a,i,n,o,h,l,u,d,f=e.length;if(!t||!t.state)return-2;if(a=t.state,o=a.wrap,2===o||1===o&&42!==a.status||a.lookahead)return-2;1===o&&(t.adler=s(t.adler,e,f,0)),a.wrap=0,f>=a.w_size&&(0===o&&(c(a.head),a.strstart=0,a.block_start=0,a.insert=0),d=new r.Buf8(a.w_size),r.arraySet(d,e,f-a.w_size,a.w_size,0),e=d,f=a.w_size),h=t.avail_in,l=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,v(a);while(a.lookahead>=3){i=a.strstart,n=a.lookahead-2;do{a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+3-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++}while(--n);a.strstart=i,a.lookahead=2,v(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=l,t.input=u,t.avail_in=h,a.wrap=o,0},e.deflateInfo="pako deflate (from Nodeca project)"},"55c8":function(t,e,a){"use strict";function i(t){var e="";for(var a in t){var i=t[a];e+="".concat(a,":").concat(i,";")}return e}a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("64aa"),a("0c26"),a("e6d5"),a("6e12"),a("5c47"),a("a1c1");var r={name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:function(){return{color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"}}},errorMessage:{type:[String,Boolean],default:""}},data:function(){return{focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}},computed:{isVal:function(){var t=this.val;return!(!t&&0!==t)},msg:function(){return this.localMsg||this.errorMessage},inputMaxlength:function(){return Number(this.maxlength)},boxStyle:function(){return"color:".concat(this.inputBorder&&this.msg?"#e43d33":this.styles.color,";")},inputContentClass:function(){return function(t){var e="";for(var a in t){var i=t[a];i&&(e+="".concat(a," "))}return e}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle:function(){var t=this.focusShow?this.primaryColor:this.styles.borderColor,e=this.inputBorder&&this.msg?"#dd524d":t;return i({"border-color":e||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle:function(){var t="password"===this.type||this.clearable||this.prefixIcon?"":"10px";return i({"padding-right":t,"padding-left":this.prefixIcon?"":"10px"})}},watch:{value:function(t){this.val=t},modelValue:function(t){this.val=t},focus:function(t){var e=this;this.$nextTick((function(){e.focused=e.focus,e.focusShow=e.focus}))}},created:function(){var t=this;this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(function(e){t.localMsg=e}))},mounted:function(){var t=this;this.$nextTick((function(){t.focused=t.focus,t.focusShow=t.focus}))},methods:{init:function(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon:function(t){this.$emit("iconClick",t)},onEyes:function(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput:function(t){var e=t.detail.value;this.trim&&("boolean"===typeof this.trim&&this.trim&&(e=this.trimStr(e)),"string"===typeof this.trim&&(e=this.trimStr(e,this.trim))),this.errMsg&&(this.errMsg=""),this.val=e,this.$emit("input",e),this.$emit("update:modelValue",e)},onFocus:function(){var t=this;this.$nextTick((function(){t.focused=!0})),this.$emit("focus",null)},_Focus:function(t){this.focusShow=!0,this.$emit("focus",t)},onBlur:function(){this.focused=!1,this.$emit("focus",null)},_Blur:function(t){t.detail.value;if(this.focusShow=!1,this.$emit("blur",t),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){var e=this.form.validateTrigger;"blur"===e&&this.formItem.onFieldChange()}},onConfirm:function(t){var e=this;this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((function(){e.isEnter=!1}))},onClear:function(t){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange:function(t){this.$emit("keyboardheightchange",t)},trimStr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return"both"===e?t.trim():"left"===e?t.trimLeft():"right"===e?t.trimRight():"start"===e?t.trimStart():"end"===e?t.trimEnd():"all"===e?t.replace(/\s+/g,""):t}}};e.default=r},"564f":function(t,e,a){a("5c47"),a("a1c1"),a("23f4"),a("7d2f"),a("9c4e"),a("ab80"),a("0506");var i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");var r="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";e.KANJI=new RegExp(i,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var n=new RegExp("^"+i+"$"),s=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return n.test(t)},e.testNumeric=function(t){return s.test(t)},e.testAlphanumeric=function(t){return o.test(t)}},5695:function(t,e,a){"use strict";a.r(e);var i=a("b25f"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},5770:function(t,e,a){"use strict";var i=a("61c1"),r=a.n(i);r.a},"588c":function(t,e,a){t.exports=a.p+"static/tcdl2 1@2x.png"},"5a15":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("b7c7")),n=i(a("fcf3")),s=i(a("9b1b"));a("64aa"),a("bf0f"),a("2797"),a("c223"),a("5c47"),a("a1c1");var o=a("e14e"),h={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:function(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default:function(){return{}}},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:function(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler:function(t){t?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject:function(){var t=(0,s.default)((0,s.default)({},this.styles),{},{"transition-duration":this.duration/1e3+"s"}),e="";for(var a in t){var i=this.toLine(a);e+=i+":"+t[a]+";"}return e},transformStyles:function(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created:function(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.duration&&(this.durationTime=t.duration),this.animation=(0,o.createAnimation)(Object.assign(this.config,t),this)},onClick:function(){this.$emit("click",{detail:this.isShow})},step:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.animation){for(var a in t)try{var i;if("object"===(0,n.default)(t[a]))(i=this.animation)[a].apply(i,(0,r.default)(t[a]));else this.animation[a](t[a])}catch(s){console.error("方法 ".concat(a," 不存在"))}return this.animation.step(e),this}},run:function(t){this.animation&&this.animation.run(t)},open:function(){var t=this;clearTimeout(this.timer),this.transform="",this.isShow=!0;var e=this.styleInit(!1),a=e.opacity,i=e.transform;"undefined"!==typeof a&&(this.opacity=a),this.transform=i,this.$nextTick((function(){t.timer=setTimeout((function(){t.animation=(0,o.createAnimation)(t.config,t),t.tranfromInit(!1).step(),t.animation.run(),t.$emit("change",{detail:t.isShow})}),20)}))},close:function(t){var e=this;this.animation&&this.tranfromInit(!0).step().run((function(){e.isShow=!1,e.animationData=null,e.animation=null;var t=e.styleInit(!1),a=t.opacity,i=t.transform;e.opacity=a||1,e.transform=i,e.$emit("change",{detail:e.isShow})}))},styleInit:function(t){var e=this,a={transform:""},i=function(t,i){"fade"===i?a.opacity=e.animationType(t)[i]:a.transform+=e.animationType(t)[i]+" "};return"string"===typeof this.modeClass?i(t,this.modeClass):this.modeClass.forEach((function(e){i(t,e)})),a},tranfromInit:function(t){var e=this,a=function(t,a){var i=null;"fade"===a?i=t?0:1:(i=t?"-100%":"0","zoom-in"===a&&(i=t?.8:1),"zoom-out"===a&&(i=t?1.2:1),"slide-right"===a&&(i=t?"100%":"0"),"slide-bottom"===a&&(i=t?"100%":"0")),e.animation[e.animationMode()[a]](i)};return"string"===typeof this.modeClass?a(t,this.modeClass):this.modeClass.forEach((function(e){a(t,e)})),this.animation},animationType:function(t){return{fade:t?1:0,"slide-top":"translateY(".concat(t?"0":"-100%",")"),"slide-right":"translateX(".concat(t?"0":"100%",")"),"slide-bottom":"translateY(".concat(t?"0":"100%",")"),"slide-left":"translateX(".concat(t?"0":"-100%",")"),"zoom-in":"scaleX(".concat(t?1:.8,") scaleY(").concat(t?1:.8,")"),"zoom-out":"scaleX(".concat(t?1:1.2,") scaleY(").concat(t?1:1.2,")")}},animationMode:function(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine:function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}}};e.default=h},"5b71":function(t,e,a){"use strict";a.r(e);var i=a("43c8"),r=a("e5a6");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("8616");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"fa08a900",null,!1,i["a"],void 0);e["default"]=o.exports},"5c18":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-badge--x"},[t._t("default"),t.text?a("v-uni-text",{staticClass:"uni-badge",class:t.classNames,style:[t.positionStyle,t.customStyle,t.dotStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick()}}},[t._v(t._s(t.displayValue))]):t._e()],2)},r=[]},"5c73":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("e0ef")),n={name:"u-cell",data:function(){return{}},mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{titleTextStyle:function(){return uni.$u.addStyle(this.titleStyle)}},methods:{clickHandler:function(t){this.disabled||(this.$emit("click",{name:this.name}),this.openPage(),this.stop&&this.preventEvent(t))}}};e.default=n},"5cae":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{src:{type:String,default:uni.$u.props.image.src},mode:{type:String,default:uni.$u.props.image.mode},width:{type:[String,Number],default:uni.$u.props.image.width},height:{type:[String,Number],default:uni.$u.props.image.height},shape:{type:String,default:uni.$u.props.image.shape},radius:{type:[String,Number],default:uni.$u.props.image.radius},lazyLoad:{type:Boolean,default:uni.$u.props.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:uni.$u.props.image.showMenuByLongpress},loadingIcon:{type:String,default:uni.$u.props.image.loadingIcon},errorIcon:{type:String,default:uni.$u.props.image.errorIcon},showLoading:{type:Boolean,default:uni.$u.props.image.showLoading},showError:{type:Boolean,default:uni.$u.props.image.showError},fade:{type:Boolean,default:uni.$u.props.image.fade},webp:{type:Boolean,default:uni.$u.props.image.webp},duration:{type:[String,Number],default:uni.$u.props.image.duration},bgColor:{type:String,default:uni.$u.props.image.bgColor}}};e.default=i},"5d0c":function(t,e){t.exports="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCABUAFQDASIAAhEBAxEB/8QAGwABAQEAAwEBAAAAAAAAAAAAAAMGAQUHBAr/xAAyEAABBAACCgADCAMAAAAAAAABAAIDBAURBhIUITRUc5Oz0gcTMRciMkFSdJTjNTZR/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAMBBP/EACIRAAIABgMAAwEAAAAAAAAAAAABETFRkfDxAnGxIUHB0f/aAAwDAQACEQMRAD8A/ebZs2G2J2tnmDRNKABK8AAPcAAA7IADcANwCjtVnmJ+9J7Ja4mx15vI5QV0lBfH0vz+KxCLq75RWL7VZ5ifvSeybVZ5ifvSeygi2Cos0rGRdXmlYvtVnmJ+9J7JtVnmJ+9J7KCJBUWaVhF1eaVi+1WeYn70nsm1WeYn70nsoIkFRZpWEXV5pWL7VZ5ifvSeybVZ5ifvSeygiQVFmlYRdXmlY2VYl1eBziS4wxEkkkkljSSSd5JO8k7yUXFXhq/Qh8bUXOXUl0jK2uJsdebyOUFe1xNjrzeRygr8ZLpeEAiItARRmsQVmh9ieGBhOqHzSMiaXEEhoc9zQSQCcs88gT+S4gtVbOts1mvY1Mtf5E0curnnlrfLc7VzyOWeWeRy+iAuiIgCIiA2NXhq/Qh8bUSrw1foQ+NqLnL8ZLpeGVtcTY683kcoK9ribHXm8jlBX4yXS8IBZPTXFruC4DYvUHsjstmrxMkfG2UMEkmTiGPBYXZDIazXAZndnkRrFgfiV/qtn91U8hWg8hEmlGn1uOGSVlnYo3vdLI2GpTqRSOGvLMYo2tzcWgfdZJM5rDqtLWHLmajpJoJahvwTwBlqN8MN+m9lylYaQHPiIljALgQHNEsLcy0uiLtQkfTotLUu4LjejkmIQYVcxCStYq2bUhirWPkE69SeUfhDtxaPvFxcS1jizUd9GLsrYBoq7R+TFKeKYjcxKO6Y6ExsVaEMTC0n5ha0iWU5ZtLI3EOJ1cm6zwPS/h/j+J4/h92bE5WTS17bY45GQxwnUdEHarmxNYw5OzIOqHbyCTuy368n+E3+LxT99H4AvWEAREQGxq8NX6EPjaiVeGr9CHxtRc5fjJdLwytribHXm8jlBXtcTY683kcoK/GS6XhALrcWwmljVKXD77HPrylriGPdG9r2HWY9rm/QtP5EOafoWkLskWg88+zHRf8ARf8A5n9afZjov+i//M/rXoaIDpcD0fw3R6vJWw1kjWTS/NldNK6V736oaMycgA1oyAa0f9OZ3rukRAEREBsavDV+hD42olXhq/Qh8bUXOX4yXS8Mra4mx15vI5QV7XE2OvN5HKCvxkul4QCIi0BERAEREAREQGxq8NX6EPjaiVeGr9CHxtRc5fjJdLw5Nau4lzoIS4kkkxMJJJzJJLcySd5J3krjZa3LwdmP1RFsXV5pWNgqZiVhstbl4OzH6pstbl4OzH6oiRdXmlYyCos0rDZa3LwdmP1TZa3LwdmP1REi6vNKwgqLNKw2Wty8HZj9U2Wty8HZj9URIurzSsIKizSsNlrcvB2Y/VNlrcvB2Y/VESLq80rCCos0rFgA0BrQA0AAAAAAAZAADcABuAG4BERYaf/Z"},"5d42":function(t,e,a){"use strict";var i=a("6fa4"),r=a.n(i);r.a},"5edd":function(t,e,a){"use strict";a.r(e);var i=a("0732"),r=a("2561");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("b3e4");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"2ee8a662",null,!1,i["a"],void 0);e["default"]=o.exports},"5f2b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAAAXNSR0IArs4c6QAACYVJREFUeF7tnW1QFdcZx/9n4fJyebFRE1B8SczYFEZUQhsUU8ECwSs0HTVozCT6odPMNC3QNO2HfMhMZvIhH5qMAdrM1H6SOEkGrB+MCigGMoJKDKYRIyozlSZiQciAvNx74cKezrkBe9Ubds++XHa5Z7/e55z77P+359mzZ88+D4E4bKUAsZW3wlkIYDa7CAQwAcxmCtjMXTHCBDCbKWAzd8UIE8BspoDN3BUjTACzmQI2c9fUEZaW9mZU0mMj6cBkFpXlVAlkMSXEYTONZnWXUOqTQQeIJHUCkW19NxI6rlx5c8KsczQaGMlylSY4JbKaytLzEqG7KLDCLOet2C8BvpEpaolEP3LLtKutrmoEADXKV8OAZWa+7IhPis2VKN0HiWwFxSKjnLRlPwTfQab1MiEHR/s8ze3tB3xGnIchwDaWlMTGuFNeB6W/AWgSQAzp14gTnNs+KAXIbRBywOvseftcba1Hrz96hSX5xWXLp2SyH8AOvc7M8/ZHJiT6auuxym/1hEhdwPKLy1ZMyqSCAMUAIue54HpPb5ICx3wSLW89VvmN1s40A/OHwbGlhwA8K2Cpln8SwFFv3K0XtYZHTcDYBCMx2fkGKH1DtavC8P8KEPLWcK/7LS0TES3ASM628nwJqAaQLDhoUqBPBl767ERFI+/9jBtYlqs00QnyPgheELNBTbAYIwqKD92gr7TVVQ3z9MINbEtRWSZAGsL+OYtH5WC27DkNtLDpeGU7T1fcwHJdf/gLIfRPPH8ibIMrQCneba6r4NKSCxhbG0x+dLAr3JabzLrg2DJWb/dDq3nWHrmAbSl6LRN08guzTiAs+yWRP206/q7qsMgJrPwVUPwtLIU166QJftd0vOJ9td1zAct1lVYRIv1ebefCTlkBSuW/NtdVlSpbfm/BBewXrrKPKCHPq+1cyY4QgpgYJ+LjFyA5aRni4hIhWWzdWKYUY2PD6O27idHRO/B63aBsTdegg1D68ad1lXvUdscFbMu28sMAdqrtfDY7hyMKaalPIvUnGUhJeRQOR7QR3ZrWh883jp6e/+BKZzs6r34Jn8+wd5T/bDpR8Zxax+cEWGSEA4WFu/DEE2sRZXFQ9wvJwF29dgkNDTWYnDLkFZe1gbGR9UxBCdLX/EztRWVJu47LF3DyVK0RI826wNg9a216FvLytttuZAUbaacaj6Dj8ud672nWBeZ0xuNXz+7DyhWrLTlqeJ3q7r6Oo58chNszxts00N66wB5+eCn2vlhu+QmGWvXZ/az6UAX6+2+pbRLMzrrA0tc8haJtL+g5Ocu1PX7iQ39Y1HFYF9iGrHzk5rDdBPPnONNSh9azDXpOyLrAsjcUYPPmIj0nZ7m2F79swclT7PFU8yGAaZZOQ0MBLIhoExNe9Pf3wu1mm2jVHZGOKCQnL0dsjFNdA41WAliAcG73KNovnsEX7Z9hfNzLLemiRUnYuf3XWLjwEe62ahsIYNNKeb0eNJyswdVrX4FSWa1+D9jlbC7Gxg35mtsrNRTAphVis6+z507qXUWAq3A31q3bqKS75t8FMAAezxiqD72HwcH+u0JGR8ciJiZWtbAEBMuWrUJ+3nb/KxyzDgEMQP/Af1FT+3eMjAzd1bkg/zk8vioVbD1SzSFJEthSWESEuTvIBTAAfbd7cPjwAYyM3rnLZt9Lf8SSJcZ8asZmnR6PGwsWLFTDflYbAcxkYDKV0dJaj/PnT8O1dbf/JaqeUSiAmQxsamoKTc1H/Y8KMdGxYLPItWuzNEMTwEIIjMU6Bo29n2ML01oOASzEwBgkNpHZ5tqjKTwKYHMAbGakaQmPAtgcAdMaHgUwTmC+SR++/voCbt9W99aX7SnsuXXjB+15w6MAxgnMO+4Be+vb1dWhZc4QtI1/9phT7N8wpDTlF8AsAIxRZCv9u0t+i8TEH4kHZ6WhwLPSYcYIi4iIQEbG08j5eRHYPsrZDjHCOEfYxMQ4zredxs2b/1a6Dvy/s29Vh4a+u2edMrAhu4c9mfE0NmUX+tcilQ4BjBMYm0QwaFNTLKOC8iHLU2hpbcC/vjr7gDGDlfVUHrI3FiAqSt1efwGME5gyonstApemAn9hYXD9umz/UpVaWKy9ADYHwHjDYCBoASzEwLSEQQHsvrjGM0vUExK1hkEBLITAZFnGmZYTaPv8U2Ss36R6NvhDF4YIiSaHRCb88MgQhgYH/PsWeSYYwaAJYCEAxhtGxYOzgmLBN+HsxOOr0lRvwiFEQlyc2ISj66N0tR9DeLxuVH+w/8FtbtGxqvMeiG1uAPRmEVALjA1AozaSFj6zCxnrs42Mgvf0Je5h03J4x92or6/BteuXxFbtgEtE3a7M6QahHGHsL/V+DLF4URJ2iI8htCdW4QmJgXFnfMKLAd7PjSKjkLxEfG4UkkmHaTccEzoW9zATRDWzy3kNTHyUHvTSse43ziLtg82AicQqNgPmT130y71YufLHZt5WQtZ3d/c1HP2kev6mLppJDpaft0NxN1LIVNf4R2wfSePpeZ4cjGnDto0VFpRgjc3T712+fAEN8z393szFzBJcbp1OcGn1TKT3D0A2sq5fv4T6cElwOSMAG2ksfWxaWiZSlq60fIa371PIduNK50X7pJA1I0kzy1QTN52kOTHxIcTFJWi8q5jTbGxsBMPDg/4kzWOjd8Be/dgmSbNIg278RWFqGvQtRaLQgOHIzCw0IEp5GI4LMLOUhyiWYyww04vlMHdzXeXvEILXjHU9PHujlLzTXPfen3nOnuuNM+tYFHzjkXcW21AVfBMlFY0AFsKSiiytxXTR0g8AJBnhfhj20SsDe0NStJSJK8oC67zEQlwW2O+tKLytCdrcFN6ecXVTcdkKhyhtr5acv7R9pETLG+eitP20l2RTcdnyKJnsB7BDredhanckQqKvNh6r/Ja32HagXtzT+mBi+8OjO+V1UPoyQB8RBblnVGKl/EgfCPmH19nz9rnaWo/ei9UQYDMTkfik2FyJ0n2QyNawL8zNnrNkWi8TcnC0z9Pc3n7AkOpwhgGbCZFZrtIEp0RWU5nskQhKwq3mM1tukimpIZL8sVumXW11Vaw6gmFFM40Gds+IZ2uPSY+NpAOTWVSWUyWQxZQQh96wYKX2hFKfDDpAJKkTiGzru5HQwVNIm/dcTAXG64ywV1ZAAFPWyFIWApilcCg7I4Apa2QpCwHMUjiUnRHAlDWylIUAZikcys4IYMoaWcpCALMUDmVnBDBljSxlIYBZCoeyM/8DJiD9uFWcYf4AAAAASUVORK5CYII="},"5fae":function(t,e,a){"use strict";var i=a("a06a"),r=a.n(i);r.a},6182:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAB/NJREFUeF7tnW2apDYMhJuTJXuyzZwsuydjRwTP4zCAq2TJuG31n8ymwW2rXn3YGFhe8ZnaAsvUo4/BvwKAySEIAAKAcS2wruvf2ejyv9P//uv1ev2+scAv+W5Zlu2/I36GiAC70CKwCCqfM7Et9BMQEjC/RgDjLQHYBf/pLDYKzBcUy7L8g57Uy3FvAUAWykV0L++20mQD4l1g6BqAzNN7F/0Knu5h6BKAdV0llEo+f1fhz4D46DEqdAXALnzK7VYhubd2ugKhCwD2UP9vb0o596cLEB4FYIAcX8vIx77O8Njs4TEAnMN9vnAj8/bThZw0jz8sGCVR8/rDe33hsWjwCADrukq4tyrwkrjJm1xX7bJFJwHFsl55BIKmABiGfBG5ieClGH9YhbSA+kfLFcZmABgUemnFreslWKPU1gyCJgBUGmXz9pZeUfJ65Pt9zDVpoklKcAegQvy3FP4IR8X4pSl3CFwBqBi8+8ARL7Y8psIWrunADQBlzh/C6+/AUc6A3CDwBICd6g3n9VcgKKKBFL4/LCNSassFAMUApxE/GV5hIxcIzAFQDMwtvHl4jGWbijRp7igeAKyEkaYVP4sEsnjEXAgztZkpAKT3mw6EgK67Q8lIYJoKzAAgxTcPZd2pSnaItJ+Z81gCgIb+EP8CDgaC5XN7EcnY6eEmjRAdNw1fFgborQ1incDEkawAQL3fLHT1JpxVf5h6wCIKVANAeL8JsVaG7rkdwqbVDmUBAOT9FrT2LJp138BUUJ1SqwAgSA3vJwkhUkFVFKgFAPH+EJ8UP1skQq6nVEUBNQAEoQGAHgB0lVAdBWoAkK3MxU2RkfuV6u+ngbWA2slqAIjwX6ctdDZYZ6nTgAoAsFPyYAVV+5BlJjmISLWqNKASCARAHZYm0RYeJpgGVFFAC0CEf1i++gPBKNAXABH+64XPW1g/w26pRY3N6QgQ4b8kg8/3YBqg64AAwEcv81ZBx6PTgAYAl1BkbrHBGvSqAygAwE7E9M8JPo86gAUAWf2L6Z8fAMi1AaoOCACcxPJo1qMQ9ACAItDDUKO2CaZgKgKzAEQB+CBdIADUTCAAeFBQzU8DhaAPAB70aQww+zkAANQsDI4AIABU/pldTM34kUKQWRJmAIgpoEYx43MQAD4fVg0X4gGAsUDezfUOAEyet6FGbR+8JgDrwEQA81WoUUXyHBcIAFyLBQCeajm0bV2MmwLAVJ8OtpmiSRAAeC2AASBWATtArGsAZPqR2Uhuahj+tWteTBweSp2/3g55k8ozEaBgjO7fn+MlJtqu5cO00cfKmaYAdKAtHoFK9OXxQw2FT2PpMgIcDT38U0ERssBpHdJUfsxbAJA6DC9asFbo/Xgn8WXYtgA4dnRaCBrYFFoMKtYADTpKEdu7V6P9Qy7rom3dHFeE4BaARuKn/hc7a2CQLppobNfbFHsJALjgYGrQWVYSG3n/lzZ3dr0DALn+/7/K8+xFTiTtwxeEpD3y19WLrYsP5LjwyMui8BQARSdv3+lDRBO4ejUNPQ0bI7z/MiXu+rBAnDpXLQBw3gYhCAD+gxGyK+uoZ6uDVwAUL/ygncydC9nNMnId4OEEYJuXM61vAKBUaYRCOqtpt2EEr/opZPxKx1I/TUwLABSijtZCDBAAYOH/xLaqHVtnACANBQCKWIA4ALOj95BekSjwTTctAKrpGmKAiAD4lm4FAN+K7DMAigWgVqQAYEW8VOVcAgMwxQwAFJHb7BTEAbQpIAAwk8mvoQBgLYdAbXrxk82u5QAgAIgaoPSSxIgAullA1AB2kdqtpUgBkQIiBUQKKL4nONYB3GLwww1HCogUECkgUkCkALnaePmJaWBMA4v3KjycytU//y41ALIfQFWpIgaICOAaAWI/gNp9DU5EHEB7NRDcygcBgNwPoNq9i3QyIoAuAiC2PYPrbEMIMlURf6DTANLJAIC3K3gd4PQRsjUA0FEgtoWXL4czt3anrIQ4lhx75lw19wWk34ciAdhJGiqD1NysCbAGoKIraFdp83Qj7xUAaBpIxvvYyd0eCnX8EANX7TZupqDBDyFRcP+ZW8diHytzlVrvbg5FpoNnJslvaJS/5YZGAQr5QNEEaajXYwiP3bx2H0dyLLGjPCVMPqhNL71/SwtXhiK81srWw3u/GOoBu96+P6D0gAhtFNBAMQUAOwTd2LW47ErkLI3oXzXE55vmZf1hmk8vdi0CsBOLLA5pxRu68n8wxUIRFQLAEYIpxU9QkAUh42BwMQ0D4ADB1OJnEEg1z8yU7kCgH75JAXAgF3lo8VVnofDEIP/ux1ZGg9t1mDvbqAA4gCD/RGCg6Xx3UTX9J0GodqQqAI4DPDziXL7+WhlcluV0lVBjpBnOAWcJfQEwgzAtxohGAYsrp6YRoIVxZvgN4D7/zQwBwIA0oN6veZjUmbkiAnQEESG+ifdvUaSj8U/dFUZ8K+8PADpBjhTfzPsDgIcBYDd17N2tnvrlw44U0AiCXWz5Ne2mjm1dBX0bGDqsKQFQeh5qU7fjLKZ9x85NBwCbb93U5BuGr/AxTc8IQPFBmIwBGx3rIv50ReAT+/EMAHETPwAwUMexCfOCb/qVwDeKAKZTvTtIZ6wBPPc31gSER16uPR0AolBHM4G0R+L2pVs1VJXOnRKADAL5M91pU7KVxfe/90Y24XvYJDMtABZqjtBGADCCihVjCAAqjDfCqQHACCpWjOEPFFAszI132Q4AAAAASUVORK5CYII="},"61c1":function(t,e,a){var i=a("0948");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("858c3144",i,!0,{sourceMap:!1,shadowMode:!1})},6220:function(t,e,a){"use strict";a.r(e);var i=a("55c8"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},6239:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'[data-v-ad5d33e8] .jypzs .u-cell__title{flex:1;line-height:20px}[data-v-ad5d33e8] .v-modal{display:none}.jypzs[data-v-ad5d33e8]{color:#fff}.sfds[data-v-ad5d33e8]{color:#fff}.active[data-v-ad5d33e8]{margin:0 8px;height:28px;line-height:28px;padding:2px 5px;color:#fff;background-color:var(--mainColor)\n  /* 或者你想使用的任何颜色 */}.activeNo[data-v-ad5d33e8]{margin:0 8px;height:28px;line-height:28px;padding:2px 5px;color:#000;background-color:#fff\n  /* 或者你想使用的任何颜色 */}[data-v-ad5d33e8] .u-line{vertical-align:middle;border-bottom:0!important}.dhbts[data-v-ad5d33e8]{display:inline-block;\n  /* background: #fff; */margin:5px;width:70px;height:25px;line-height:25px;--tw-bg-opacity:1!important;background-color:rgb(243 244 246/var(--tw-bg-opacity));font-weight:700!important;--tw-text-opacity:1!important;color:rgb(0 0 0/var(--tw-text-opacity));border-radius:8vw!important;text-align:center}.cdhbts[data-v-ad5d33e8]{display:inline-block;background:#0166fc!important;margin:5px;width:70px;height:25px;line-height:25px;--tw-bg-opacity:1!important;font-weight:700!important;--tw-text-opacity:1!important;color:#fff;border-radius:8vw!important;text-align:center}[data-v-ad5d33e8] .u-cell__title{flex:1;line-height:58px}[data-v-ad5d33e8] .u-subsection--button__bar[data-v-244377f2]{background-color:inherit!important}.imgClass[data-v-ad5d33e8]{width:15%}[data-v-ad5d33e8] .u-image{padding-left:15px}[data-v-ad5d33e8] .u-subsection--button{background-color:inherit!important;height:50px;margin-left:-5px}[data-v-ad5d33e8] .uni-icons{width:5%;text-align:right;padding-right:20px}[data-v-ad5d33e8] .u-subsection__item__text{line-height:30px!important;display:flex;flex-direction:row;align-items:center;transition-property:color;transition-duration:.3s;font-size:15px!important;width:123px;text-align:center;justify-content:center}[data-v-ad5d33e8] .u-subsection--button__bar{background-color:inherit!important;border-bottom:2px solid #3f47f4;\n  /* width: 85px !important; */height:45px!important;border-radius:0!important;color:#fff!important}.DrawerPage[data-v-ad5d33e8]{position:relative;width:350;height:700;left:0;\n  /* background-color: #F7F8FA; */transition:all;overflow:hidden}.DrawerPage.show[data-v-ad5d33e8]{-webkit-transform:scaleX(.9);transform:scaleX(.9);left:66vw;box-shadow:0 0 %?60?% rgba(0,0,0,.2)\n  /* transform-origin: 0; */}.DrawerWindow[data-v-ad5d33e8]{position:absolute;width:62vw;height:100vh;left:0;top:0;-webkit-transform:scale(.9) translateX(-100%);transform:scale(.9) translateX(-100%);opacity:0;pointer-events:none;transition:all .6s;padding:%?100?% 0}.DrawerWindow.show[data-v-ad5d33e8]{-webkit-transform:scale(1) translateX(0);transform:scale(1) translateX(0);opacity:1;pointer-events:all}[data-v-ad5d33e8] .u-modal__content__text{word-break:break-all}.DrawerClose[data-v-ad5d33e8]{position:absolute;width:40vw;height:100vh;right:0;top:0;color:transparent;padding-bottom:%?30?%;display:flex;align-items:flex-end;justify-content:center;background-image:linear-gradient(90deg,rgba(0,0,0,.01),rgba(0,0,0,.6));letter-spacing:5px;font-size:%?50?%;opacity:0;pointer-events:none;transition:all .6s}.DrawerClose.show[data-v-ad5d33e8]{opacity:1;pointer-events:all;width:35vw;color:#fff}.DrawerPage .cu-bar.tabbar .action uni-button.cuIcon[data-v-ad5d33e8]{width:%?64?%;height:%?64?%;line-height:%?64?%;margin:0;display:inline-block}.DrawerPage .cu-bar.tabbar .action .cu-avatar[data-v-ad5d33e8]{margin:0}.DrawerPage .nav[data-v-ad5d33e8]{flex:1}.DrawerPage .nav .cu-item.cur[data-v-ad5d33e8]{border-bottom:0;position:relative}.DrawerPage .nav .cu-item.cur[data-v-ad5d33e8]::after{content:"";width:%?10?%;height:%?10?%;background-color:currentColor;position:absolute;bottom:%?10?%;border-radius:%?10?%;left:0;right:0;margin:auto}.DrawerPage .cu-bar.tabbar .action[data-v-ad5d33e8]{flex:initial}\n\n/* /deep/ .el-dialog__wrapper {\n\t\tz-index: 9999 !important;\n\t} */.DrawerWindow uni-view[data-v-ad5d33e8],\nuni-scroll-view[data-v-ad5d33e8],\nuni-swiper[data-v-ad5d33e8],\nuni-button[data-v-ad5d33e8],\nuni-input[data-v-ad5d33e8],\nuni-textarea[data-v-ad5d33e8],\nuni-label[data-v-ad5d33e8],\nuni-navigator[data-v-ad5d33e8],\nuni-image[data-v-ad5d33e8]{box-sizing:border-box}.DrawerClose uni-view[data-v-ad5d33e8],\nuni-scroll-view[data-v-ad5d33e8],\nuni-swiper[data-v-ad5d33e8],\nuni-button[data-v-ad5d33e8],\nuni-input[data-v-ad5d33e8],\nuni-textarea[data-v-ad5d33e8],\nuni-label[data-v-ad5d33e8],\nuni-navigator[data-v-ad5d33e8],\nuni-image[data-v-ad5d33e8]{box-sizing:border-box}uni-view[data-v-ad5d33e8],\nuni-image[data-v-ad5d33e8]{box-sizing:border-box}\n.uni-scroll-view-content uni-view[data-v-ad5d33e8],\nuni-image[data-v-ad5d33e8]{box-sizing:initial!important}.DrawerPage[data-v-ad5d33e8] .uni-scroll-view{height:91%!important}.choiceIndicator[data-v-ad5d33e8]{color:#0166fc}.klinecharts-pro-check-box[data-v-ad5d33e8]{display:flex;align-items:center;box-sizing:border-box;padding-left:5px;.is-checked{.el-checkbox__inner{background:var(--mainColor);border-color:var(--mainColor)}.el-checkbox__label{color:var(--mainColor)}}}.klinecharts-pro-check-box[data-v-ad5d33e8]:hover{background-color:rgba(133,189,0,.3)}.blacks[data-v-ad5d33e8] .uni-scroll-view{background:#1a1c24!important}.blacks .uni-scroll-view-content uni-view[data-v-ad5d33e8]{background:#22252f!important}uni-page-body[data-v-ad5d33e8]{overflow:initial}.nav[data-v-ad5d33e8]{background:url(),red;background-size:auto 100%;background-position:%?606?%}.dealer[data-v-ad5d33e8]{position:absolute;top:%?26?%;right:0;color:#fbe6cc;border-radius:%?31?% 0 0 %?31?%;background-image:linear-gradient(90deg,#574625,#6b552d);padding:%?14?% %?44?%;display:flex;align-items:center}.deposit[data-v-ad5d33e8]{color:#333;padding:0 14px;padding-top:19px;position:relative;border-radius:10px!important;margin:15px!important;color:#fff}.uni-page-body[data-v-ad5d33e8]{color:#303133}.deposit[data-v-ad5d33e8]{background:linear-gradient(1deg,#1a3771,#156290)}.deposit .earnings-wrap[data-v-ad5d33e8]{margin:0 -14px;margin-top:15px}.mt-30[data-v-ad5d33e8]{margin-top:15px!important}.opacity-50[data-v-ad5d33e8]{opacity:.5}.d-block[data-v-ad5d33e8]{display:block}.d-grid-columns-3[data-v-ad5d33e8]{display:grid;grid-template-columns:repeat(3,1fr)}.deposit .earnings-wrap .earnings[data-v-ad5d33e8]{padding:15px 14px 14px 14px}.klinecharts-pro-drawing-bar[data-v-ad5d33e8]{background-color:#0ff!important}\n\n/* 覆盖物 */.outer-div[data-v-ad5d33e8]{position:relative\n  /* 设置为相对定位 */\n  /* 可能还需要其他样式，例如宽度、高度等 */}.inner-div[data-v-ad5d33e8]{position:absolute;\n  /* 设置为绝对定位 */top:0;left:55px;z-index:9999!important;width:200px;background-color:#fff;\n  /* 设置一个较高的z-index值 */\n  /* 可能还需要设置top, right, bottom, left来精确位置 */box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.inner-div-item[data-v-ad5d33e8]{display:flex;align-items:center\n  /* background-color: #dcebff; */}.inner-div-item[data-v-ad5d33e8]:hover{background-color:#dcebff}.inner-hover[data-v-ad5d33e8]:hover{background-color:#dcebff}.dhbts[data-v-ad5d33e8]{display:inline-block;background:#fff;margin:5px;width:80px;height:30px;line-height:30px;--tw-bg-opacity:1!important;background-color:rgb(243 244 246/var(--tw-bg-opacity))!important;font-weight:700!important;--tw-text-opacity:1!important;color:rgb(0 0 0/var(--tw-text-opacity))!important;border-radius:8vw!important;text-align:center}.cdhbts[data-v-ad5d33e8]{display:inline-block;background:#0166fc;margin:5px;width:80px;height:30px;line-height:30px;--tw-bg-opacity:1!important;font-weight:700!important;--tw-text-opacity:1!important;color:#fff;border-radius:8vw!important;text-align:center}[data-v-ad5d33e8] .u-cell__title{flex:1;line-height:58px}.blacks[data-v-ad5d33e8] .u-popup__content{background:#222;color:#fff}.blacks[data-v-ad5d33e8] .u-modal__title{color:#fff}.blacks[data-v-ad5d33e8] .u-modal__content__text{color:#fff}[data-v-ad5d33e8] .u-subsection--button__bar[data-v-244377f2]{background-color:inherit!important}.blacks[data-v-ad5d33e8] .u-number-box__plus--hover{background:#22252f!important}.blacks[data-v-ad5d33e8] .u-number-box__plus{background:#22252f!important;color:#fff}.blacks[data-v-ad5d33e8] .u-icon__icon{color:#fff!important}.blacks[data-v-ad5d33e8] .u-number-box__minus{background:#22252f!important}.u-fade-enter-active[data-v-ad5d33e8],\n.u-fade-leave-active[data-v-ad5d33e8]{width:25%}[data-v-ad5d33e8] .u-image{\n\n  /* padding-left: 15px; */}[data-v-ad5d33e8] .u-subsection--button{background-color:inherit!important;height:50px;margin-left:-5px}[data-v-ad5d33e8] .uni-button-color{color:#007aff!important}[data-v-ad5d33e8] .uni-icons{width:20%;text-align:right;padding-right:20px}.blacks[data-v-ad5d33e8] .uni-popup-dialog{background-color:#22252f}.blacks[data-v-ad5d33e8] .uni-dialog-button-text{color:#fff}.blacks[data-v-ad5d33e8] .u-cell__body__content{color:#fff}.positive[data-v-ad5d33e8]{color:var(--mainColor)}.negative[data-v-ad5d33e8]{color:#fc0004}[data-v-ad5d33e8] .u-subsection__item__text{line-height:30px!important;display:flex;flex-direction:row;align-items:center;transition-property:color;transition-duration:.3s;font-size:15px!important;width:90px;text-align:center;justify-content:center}[data-v-ad5d33e8] .u-subsection--button__bar{background-color:inherit!important;border-bottom:2px solid #0166fc;\n  /* width: 85px !important; */height:45px!important;border-radius:0!important}.scroll-view[data-v-ad5d33e8]{display:flex;justify-content:space-between;height:%?100?%;line-height:%?100?%;white-space:nowrap;overflow:hidden;background:#fff;border-radius:6px;margin:0 auto}uni-button[data-v-ad5d33e8]{line-height:30px!important;color:#fff!important;font-size:14px!important}.scroll-view .scroll-items[data-v-ad5d33e8]{display:inline-block;width:30px;height:%?80?%;line-height:%?80?%;text-align:center;color:var(--mainColor)!important}.scroll-view .scroll-itembs[data-v-ad5d33e8]{display:inline-block;width:30px;height:%?80?%;line-height:%?80?%;text-align:center;background:#1a1b24;color:#fff!important}.scroll-view .scroll-itemb[data-v-ad5d33e8]{display:inline-block;width:35px;line-height:%?80?%;height:%?80?%;text-align:center;border-radius:6px}.scroll-view .scroll-item[data-v-ad5d33e8]{display:inline-block;width:80px;font-size:16px;line-height:%?80?%;height:%?80?%;text-align:center;border-radius:6px;color:#828397}.section-area[data-v-ad5d33e8] ::-webkit-scrollbar{width:0;height:0;color:transparent}.prtxts[data-v-ad5d33e8]{display:flex;--tw-text-opacity:1!important;color:rgb(0 0 0/var(--tw-text-opacity))!important;--tw-bg-opacity:1!important;border-radius:10px}.mcs[data-v-ad5d33e8]{border:1px solid #f8a0a6;color:#ef263d;padding:1px 7px;border-radius:10%;font-size:12px;cursor:pointer;margin-left:5px;margin-right:5px}.mrs[data-v-ad5d33e8]{border:1px solid #0166fc;color:#0166fc;padding:1px 7px;border-radius:10%;font-size:12px;cursor:pointer;margin-left:5px;margin-right:5px}.mrsDetal[data-v-ad5d33e8]{border:1px solid #0166fc;color:#0166fc;padding:1px 8px;border-radius:10%;font-size:10px;cursor:pointer;margin-left:10px;margin-right:5px}[data-v-ad5d33e8] .uicon-close{font-size:19px!important;top:5px!important}[data-v-ad5d33e8] .u-cell__title{flex:1;line-height:36px}\n\n/* \t/deep/.uni-scroll-view,\n\t\t\t.uni-scroll-view-content {\n\t\t\t\toverflow: hidden !important;\n\t\t\t} */[data-v-ad5d33e8] .u-list{height:100%!important}uni-page-wrapper[data-v-ad5d33e8]{overflow:hidden}.quantity_to_buy[data-v-ad5d33e8]{display:flex;align-items:center;border:1px solid #0166fc;justify-content:space-between;\n  /* width: 150px; 设置药丸的总宽度 */height:14px;border-radius:5px!important;\n  /* 较大的border-radius值使得角更圆 */overflow:hidden\n  /* 隐藏超出边界的元素 */}.left-side[data-v-ad5d33e8]{\n  /* width: 50%; */display:block;\n  /* 左侧占据一半的宽度 */height:100%;background-color:#0166fc;\n  /* 左侧背景颜色 */color:#fff;\n  /* 左侧文字颜色 */text-align:center;font-size:12px;font-weight:300;padding:0 6px;\n  /* 文字居中 */line-height:15px;\n  /* 文字垂直居中 */}.right-side[data-v-ad5d33e8]{display:block;\n  /* width: 50%; */\n  /* 右侧占据另一半的宽度 */height:100%;;\n  /* background-color: #4caf50; */\n  /* 右侧背景颜色 */color:#0061e7;\n  /* 右侧文字颜色 */text-align:center;font-size:12px;font-weight:500;padding:1px 6px;\n  /* 文字居中 */line-height:15px;\n  /* 文字垂直居中 */}.quantity_to_buy2[data-v-ad5d33e8]{display:flex;align-items:center;border:1px solid #f00004;justify-content:space-between;\n  /* width: 150px; 设置药丸的总宽度 */height:14px;border-radius:5px!important;\n  /* 较大的border-radius值使得角更圆 */overflow:hidden\n  /* 隐藏超出边界的元素 */}.left-side2[data-v-ad5d33e8]{\n  /* width: 50%; */display:block;\n  /* 左侧占据一半的宽度 */height:100%;background-color:#f00004;\n  /* 左侧背景颜色 */color:#fff;\n  /* 左侧文字颜色 */text-align:center;font-size:12px;font-weight:300;padding:0 6px;\n  /* 文字居中 */line-height:15px;\n  /* 文字垂直居中 */}.right-side2[data-v-ad5d33e8]{display:block;\n  /* width: 50%; */\n  /* 右侧占据另一半的宽度 */height:100%;;\n  /* background-color: #4caf50; */\n  /* 右侧背景颜色 */color:#f00004;\n  /* 右侧文字颜色 */text-align:center;font-size:12px;font-weight:500;padding:1px 6px;\n  /* 文字居中 */line-height:15px;\n  /* 文字垂直居中 */}[data-v-ad5d33e8] .u-fade-zoom-enter-active,\n.u-fade-zoom-leave-active[data-v-ad5d33e8]{z-index:111!important;background-color:rgba(0,0,0,.5)}[data-v-ad5d33e8] .uni-input-input{background:#f8f8f8}.blacks[data-v-ad5d33e8] .uni-input-input{background:#1a1c24;color:#fff}[data-v-ad5d33e8] .u-fade-enter-active,\n.u-fade-leave-active[data-v-ad5d33e8]{z-index:10!important}[data-v-ad5d33e8] .u-slide-up-enter-active{z-index:10!important}[data-v-ad5d33e8] .u-modal__title{text-align:inherit;margin-left:25px!important}[data-v-ad5d33e8] .u-modal__content[data-v-713d0fd3]{text-align:center}[data-v-ad5d33e8] .uni-popup .uni-popup__wrapper{z-index:999}[data-v-ad5d33e8] .u-subsection--button{height:50px;background-color:inherit!important}[data-v-ad5d33e8] .u-subsection__item__text{font-size:15px!important}.mhy-box[data-v-ad5d33e8]{.item{width:100%;height:50px;display:flex;justify-content:space-between;align-items:center;gap:10px;.label{width:80px;display:inline-block}.value{width:calc(100% - 80px)}}}',""]),t.exports=e},6289:function(t,e,a){a("f7a5");var i=a("f7d6");function r(t,e){var a=t.a/255,i=e+'="'+t.hex+'"';return a<1?i+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function n(t,e,a){var i=t+e;return"undefined"!==typeof a&&(i+=" "+a),i}e.render=function(t,e,a){var s=i.getOptions(e),o=t.modules.size,h=t.modules.data,l=o+2*s.margin,u=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+r(s.color.dark,"stroke")+' d="'+function(t,e,a){for(var i="",r=0,s=!1,o=0,h=0;h<t.length;h++){var l=Math.floor(h%e),u=Math.floor(h/e);l||s||(s=!0),t[h]?(o++,h>0&&l>0&&t[h-1]||(i+=s?n("M",l+a,.5+u+a):n("m",r,0),r=0,s=!1),l+1<e&&t[h+1]||(i+=n("h",o),o=0)):r++}return i}(h,o,s.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",C='<svg xmlns="http://www.w3.org/2000/svg" '+f+d+' shape-rendering="crispEdges">'+u+c+"</svg>\n";return"function"===typeof a&&a(null,C),C}},"62b0":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(e&&("object"===(0,i.default)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.default)(t)},a("7a76"),a("c9b5");var i=n(a("fcf3")),r=n(a("f478"));function n(t){return t&&t.__esModule?t:{default:t}}},"63e8":function(t,e,a){"use strict";a.r(e);var i=a("c192"),r=a("da1e");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3a7b6e9d",null,!1,i["a"],void 0);e["default"]=o.exports},6508:function(t,e,a){"use strict";a.r(e);var i=a("3688"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},6632:function(t,e,a){"use strict";var i=a("82de");function r(t){var e=t.length;while(--e>=0)t[e]=0}var n=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);r(l);var u=new Array(60);r(u);var c=new Array(512);r(c);var d=new Array(256);r(d);var f=new Array(29);r(f);var C,m,D,p=new Array(30);function v(t,e,a,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function S(t){return t<256?c[t]:c[256+(t>>>7)]}function I(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function T(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,I(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function x(t,e,a){T(t,a[2*e],a[2*e+1])}function y(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1}function A(t,e,a){var i,r,n=new Array(16),s=0;for(i=1;i<=15;i++)n[i]=s=s+a[i-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=y(n[o]++,o))}}function b(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function w(t){t.bi_valid>8?I(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function F(t,e,a,i){var r=2*e,n=2*a;return t[r]<t[n]||t[r]===t[n]&&i[e]<=i[a]}function M(t,e,a){var i=t.heap[a],r=a<<1;while(r<=t.heap_len){if(r<t.heap_len&&F(e,t.heap[r+1],t.heap[r],t.depth)&&r++,F(e,i,t.heap[r],t.depth))break;t.heap[a]=t.heap[r],a=r,r<<=1}t.heap[a]=i}function L(t,e,a){var i,r,o,h,l=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?x(t,r,e):(o=d[r],x(t,o+256+1,e),h=n[o],0!==h&&(r-=f[o],T(t,r,h)),i--,o=S(i),x(t,o,a),h=s[o],0!==h&&(i-=p[o],T(t,i,h)))}while(l<t.last_lit);x(t,256,e)}function E(t,e){var a,i,r,n=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<h;a++)0!==n[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):n[2*a+1]=0;while(t.heap_len<2)r=t.heap[++t.heap_len]=l<2?++l:0,n[2*r]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=s[2*r+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)M(t,n,a);r=h;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,n,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,n[2*r]=n[2*a]+n[2*i],t.depth[r]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,n[2*a+1]=n[2*i+1]=r,t.heap[1]=r++,M(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,r,n,s,o,h=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,C=e.stat_desc.max_length,m=0;for(n=0;n<=15;n++)t.bl_count[n]=0;for(h[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)i=t.heap[a],n=h[2*h[2*i+1]+1]+1,n>C&&(n=C,m++),h[2*i+1]=n,i>l||(t.bl_count[n]++,s=0,i>=f&&(s=d[i-f]),o=h[2*i],t.opt_len+=o*(n+s),c&&(t.static_len+=o*(u[2*i+1]+s)));if(0!==m){do{n=C-1;while(0===t.bl_count[n])n--;t.bl_count[n]--,t.bl_count[n+1]+=2,t.bl_count[C]--,m-=2}while(m>0);for(n=C;0!==n;n--){i=t.bl_count[n];while(0!==i)r=t.heap[--a],r>l||(h[2*r+1]!==n&&(t.opt_len+=(n-h[2*r+1])*h[2*r],h[2*r+1]=n),i--)}}}(t,e),A(n,l,t.bl_count)}function N(t,e,a){var i,r,n=-1,s=e[1],o=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)r=s,s=e[2*(i+1)+1],++o<h&&r===s||(o<l?t.bl_tree[2*r]+=o:0!==r?(r!==n&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,n=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))}function P(t,e,a){var i,r,n=-1,s=e[1],o=0,h=7,l=4;for(0===s&&(h=138,l=3),i=0;i<=a;i++)if(r=s,s=e[2*(i+1)+1],!(++o<h&&r===s)){if(o<l)do{x(t,r,t.bl_tree)}while(0!==--o);else 0!==r?(r!==n&&(x(t,r,t.bl_tree),o--),x(t,16,t.bl_tree),T(t,o-3,2)):o<=10?(x(t,17,t.bl_tree),T(t,o-3,3)):(x(t,18,t.bl_tree),T(t,o-11,7));o=0,n=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}}r(p);var O=!1;function R(t,e,a,r){T(t,0+(r?1:0),3),function(t,e,a,r){w(t),r&&(I(t,a),I(t,~a)),i.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}(t,e,a,!0)}e._tr_init=function(t){O||(function(){var t,e,a,i,r,h=new Array(16);for(a=0,i=0;i<28;i++)for(f[i]=a,t=0;t<1<<n[i];t++)d[a++]=i;for(d[a-1]=i,r=0,i=0;i<16;i++)for(p[i]=r,t=0;t<1<<s[i];t++)c[r++]=i;for(r>>=7;i<30;i++)for(p[i]=r<<7,t=0;t<1<<s[i]-7;t++)c[256+r++]=i;for(e=0;e<=15;e++)h[e]=0;t=0;while(t<=143)l[2*t+1]=8,t++,h[8]++;while(t<=255)l[2*t+1]=9,t++,h[9]++;while(t<=279)l[2*t+1]=7,t++,h[7]++;while(t<=287)l[2*t+1]=8,t++,h[8]++;for(A(l,287,h),t=0;t<30;t++)u[2*t+1]=5,u[2*t]=y(t,5);C=new v(l,n,257,286,15),m=new v(u,s,0,30,15),D=new v(new Array(0),o,0,19,7)}(),O=!0),t.l_desc=new g(t.dyn_ltree,C),t.d_desc=new g(t.dyn_dtree,m),t.bl_desc=new g(t.bl_tree,D),t.bi_buf=0,t.bi_valid=0,b(t)},e._tr_stored_block=R,e._tr_flush_block=function(t,e,a,i){var r,n,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),E(t,t.l_desc),E(t,t.d_desc),s=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),E(t,t.bl_desc),e=18;e>=3;e--)if(0!==t.bl_tree[2*h[e]+1])break;return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,n=t.static_len+3+7>>>3,n<=r&&(r=n)):r=n=a+5,a+4<=r&&-1!==e?R(t,e,a,i):4===t.strategy||n===r?(T(t,2+(i?1:0),3),L(t,l,u)):(T(t,4+(i?1:0),3),function(t,e,a,i){var r;for(T(t,e-257,5),T(t,a-1,5),T(t,i-4,4),r=0;r<i;r++)T(t,t.bl_tree[2*h[r]+1],3);P(t,t.dyn_ltree,e-1),P(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),L(t,t.dyn_ltree,t.dyn_dtree)),b(t),i&&w(t)},e._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(d[a]+256+1)]++,t.dyn_dtree[2*S(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){T(t,2,3),x(t,256,l),function(t){16===t.bi_valid?(I(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},"67aa":function(t,e,a){var i=a("12be");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("41f7fa4a",i,!0,{sourceMap:!1,shadowMode:!1})},"6c0b":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"uni-page-body[data-v-16d5ce06]{background:#f7f8fa}body.?%PAGE?%[data-v-16d5ce06]{background:#f7f8fa}",""]),t.exports=e},"6c16":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.chooseFile=function(t){var e=t.accept,a=t.multiple,i=t.capture,o=t.compressed,h=t.maxDuration,l=t.sizeType,u=t.camera,c=t.maxCount;return new Promise((function(t,d){switch(e){case"image":uni.chooseImage({count:a?Math.min(c,9):1,sourceType:i,sizeType:l,success:function(e){return t(function(t){return t.tempFiles.map((function(t){return(0,r.default)((0,r.default)({},n(t,["path"])),{},{type:"image",url:t.path,thumb:t.path,size:t.size,name:t.name})}))}(e))},fail:d});break;case"video":uni.chooseVideo({sourceType:i,compressed:o,maxDuration:h,camera:u,success:function(e){return t(function(t){return[(0,r.default)((0,r.default)({},n(t,["tempFilePath","thumbTempFilePath","errMsg"])),{},{type:"video",url:t.tempFilePath,thumb:t.thumbTempFilePath,size:t.size,name:t.name})]}(e))},fail:d});break;case"file":uni.chooseFile({count:a?c:1,type:e,success:function(e){return t(s(e))},fail:d});break;default:uni.chooseFile({count:a?c:1,type:"all",success:function(e){return t(s(e))},fail:d})}}))};var r=i(a("9b1b"));function n(t,e){return["[object Object]","[object File]"].includes(Object.prototype.toString.call(t))?Object.keys(t).reduce((function(a,i){return e.includes(i)||(a[i]=t[i]),a}),{}):{}}function s(t){return t.tempFiles.map((function(t){return(0,r.default)((0,r.default)({},n(t,["path"])),{},{url:t.path,size:t.size,name:t.name,type:t.type})}))}a("4626"),a("bf0f"),a("473f"),a("dc8a"),a("5ac7"),a("fd3c")},"6c31":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},a("bf0f"),a("7996"),a("6a88")},"6c7b":function(t,e,a){"use strict";a.r(e);var i=a("7499"),r=a("4eaf");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("5fae");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"4070810b",null,!1,i["a"],void 0);e["default"]=o.exports},"6d68":function(t,e,a){var i=a("f5fc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("af5a2098",i,!0,{sourceMap:!1,shadowMode:!1})},"6d8c":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{type:{type:String,default:uni.$u.props.text.type},show:{type:Boolean,default:uni.$u.props.text.show},text:{type:[String,Number],default:uni.$u.props.text.text},prefixIcon:{type:String,default:uni.$u.props.text.prefixIcon},suffixIcon:{type:String,default:uni.$u.props.text.suffixIcon},mode:{type:String,default:uni.$u.props.text.mode},href:{type:String,default:uni.$u.props.text.href},format:{type:[String,Function],default:uni.$u.props.text.format},call:{type:Boolean,default:uni.$u.props.text.call},openType:{type:String,default:uni.$u.props.text.openType},bold:{type:Boolean,default:uni.$u.props.text.bold},block:{type:Boolean,default:uni.$u.props.text.block},lines:{type:[String,Number],default:uni.$u.props.text.lines},color:{type:String,default:uni.$u.props.text.color},size:{type:[String,Number],default:uni.$u.props.text.size},iconStyle:{type:[Object,String],default:uni.$u.props.text.iconStyle},decoration:{type:String,default:uni.$u.props.text.decoration},margin:{type:[Object,String,Number],default:uni.$u.props.text.margin},lineHeight:{type:[String,Number],default:uni.$u.props.text.lineHeight},align:{type:String,default:uni.$u.props.text.align},wordWrap:{type:String,default:uni.$u.props.text.wordWrap}}};e.default=i},"6dc7":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",[a("v-uni-view",{style:"black"==t.$store.state.bgColor?"height: 10px;background: #1A1C24;":"height: 10px;"}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"bheight: 430px;background: #22252F;color: #ffffff;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;":"bheight: 430px;background: #FFFFFF;;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"90%","justify-content":"center","align-items":"center",height:"auto",margin:"0 auto","margin-top":"15px","padding-bottom":"13px"}},[a("v-uni-text",{staticStyle:{"text-align":"left",width:"100%"}}),a("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v(t._s(this.kefu))]),a("v-uni-text",{staticStyle:{"margin-top":"20px","font-size":"12px"}},[a("u-button",{staticStyle:{background:"var(--mainColor)",color:"#FFFFFF",width:"70px","border-radius":"5px"},attrs:{text:t.i18n.copy},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obutton.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)},n=[]},"6df0":function(t,e,a){"use strict";a.r(e);var i=a("fc7c"),r=a("9142");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("918a");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3740f4af",null,!1,i["a"],void 0);e["default"]=o.exports},"6e61":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("fd3c"),a("de6c");var r=i(a("9004")),n=a("44d8"),s={components:{tradingComponent:function(){return Promise.resolve().then((function(){return(0,r.default)(a("5edd"))}))},personalInformation:function(){return Promise.resolve().then((function(){return(0,r.default)(a("63e8"))}))},registerComponent:function(){return Promise.resolve().then((function(){return(0,r.default)(a("bfb6"))}))}},data:function(){return{formData:{password:""},types:"password",loading:!1,tyloading:!1,modalName:null,values:null,value:null,passwordShow:!0,registerSwitch:!1,usestring:"",passwords:"",imgcode:"",imgkey:"",clangs:{},language:[],mnUser:{}}},created:function(){var t=localStorage.getItem("VirtualAccount");console.log("啊飒飒111111111111",t),t||(console.log("啊飒飒"),this.obuttonsON())},mounted:function(){this.changeCodeImg(),this.language=n.langs,this.setLoads(),this.setLgs()},onShow:function(){this.setLgs()},methods:{setHistory:function(){uni.navigateTo({url:"/pages/register/register"})},setLoads:function(){var t=uni.getStorageSync("lang")||"en";this.language.map((function(e){return e.selected=!1,e.value==t&&(e.selected=!0),e}))},registerSwitchCloseIndex:function(){this.registerSwitch=!1},setLgs:function(){var t=this,e=uni.getStorageSync("lang")||"en";this.language.map((function(a){return a.value==e&&(t.clangs=a),a}))},setLang:function(t){var e=this.language.map((function(e){return e.selected=!1,e.value==t.value&&(e.selected=!0),e}));this.language=e,this._i18n.locale=t.value,uni.setStorageSync("lang",t.value),this.$utils.setTabbar(this),this.clangs=t,this.hideModal()},showModal:function(t){uni.navigateTo({url:"/pages/language/language"})},hideModal:function(t){this.modalName=null},sendData:function(t){this.$emit("data-sent",t)},changeCodeImg:function(){var t=this;this.$H.get("/api/v1/verification?"+Math.random(),!1).then((function(e){t.imgcode=e.img,t.imgkey=e.key}))},obutton:function(){var t=this,e=this.usestring,a=this.passwords;this.loading=!0;this.$H.post("/api/v1/user/login",!1,{user_string:e,password:a,captcha:this.values,key:this.imgkey}).then((function(e){"ok"==e.type?(t.$store.commit("login",e.data),t.$H.get("/api/v1/user",!1).then((function(e){t.$store.commit("setUser",e.data)})),setTimeout((function(){localStorage.setItem("VirtualAccount","已登录"),t.loading=!1,t.$store.commit("/"),window.location.reload()}),200)):(t.loading=!1,t.changeCodeImg())}))},obuttons:function(){var t=this;this.usestring,this.passwords;this.tyloading=!0;this.$H.get("/api/v1/generateAccount",!1).then((function(e){t.mnUser=e.data,console.log(t.mnUser);t.$H.post("/api/v1/user/login",!1,{user_string:t.mnUser.username,password:t.mnUser.password}).then((function(e){t.tyloading=!1,"ok"==e.type?(console.log(e.data),t.$store.commit("login",e.data),t.$H.get("/api/v1/user",!1).then((function(e){t.$store.commit("setUser",e.data)})),setTimeout((function(){localStorage.setItem("VirtualAccount","虚拟账号"),t.loading=!1,window.location.reload(),t.$store.commit("/")}),200)):(t.loading=!1,t.changeCodeImg())}))}))},obuttonsON:function(){var t=this;this.usestring,this.passwords;this.tyloading=!0;this.$H.get("/api/v1/generateAccount",!1).then((function(e){t.mnUser=e.data,console.log(t.mnUser);t.$H.post("/api/v1/user/login",!1,{user_string:t.mnUser.username,password:t.mnUser.password}).then((function(e){t.tyloading=!1,"ok"==e.type?(t.$store.commit("login",e.data),t.$H.get("/api/v1/user",!1).then((function(e){t.$store.commit("setUser",e.data)})),setTimeout((function(){localStorage.setItem("VirtualAccount","未登录"),t.loading=!1,window.location.reload(),t.$store.commit("/")}),200)):(t.loading=!1,t.changeCodeImg())}))}))},isShow:function(){this.types="password"===this.types?"text":"password"},suffix:function(){this.types="password"===this.types?"text":"password",this.passwordShow=!this.passwordShow,this.passwordShow&&(this.types="password")},goregister:function(){uni.navigateTo({url:"/pages/register/register"})},goresetPass:function(){uni.navigateTo({url:"/pages/resetPass/resetPass"})},backs:function(){this.obuttons(),uni.navigateTo({url:"/pages/index/index"})}},computed:{i18n:function(){return this.$t("login")},suffixIcon:function(){return this.passwordShow?"iconfont icon-biyan":"eye-filled"}}};e.default=s},"6e88":function(t,e,a){a("7a76"),a("c9b5");var i=a("f7d6");e.render=function(t,e,a){var r=a,n=e;"undefined"!==typeof r||e&&e.getContext||(r=e,e=void 0),e||(n=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=i.getOptions(r);var s=i.getImageWidth(t.modules.size,r),o=n.getContext("2d"),h=o.createImageData(s,s);return i.qrToImageData(h.data,t,r),function(t,e,a){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=a,e.width=a,e.style.height=a+"px",e.style.width=a+"px"}(o,n,s),o.putImageData(h,0,0),n},e.renderToDataURL=function(t,a,i){var r=i;"undefined"!==typeof r||a&&a.getContext||(r=a,a=void 0),r||(r={});var n=e.render(t,a,r),s=r.type||"image/png",o=r.rendererOpts||{};return n.toDataURL(s,o.quality)}},"6fa4":function(t,e,a){var i=a("8d12");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("71a9bbb4",i,!0,{sourceMap:!1,shadowMode:!1})},"6fda":function(t,e,a){"use strict";var i=a("a411"),r=a.n(i);r.a},7050:function(t,e,a){"use strict";a.r(e);var i=a("aa2a"),r=a("1587");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("9fb0");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"d7655832",null,!1,i["a"],void 0);e["default"]=o.exports},7111:function(t,e,a){"use strict";a.r(e);var i=a("0c65"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"722b":function(t,e,a){"use strict";a.r(e);var i=a("1885"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},7240:function(t,e,a){"use strict";a.r(e);var i=a("bfcf"),r=a("a832");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("5770");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"0577983a",null,!1,i["a"],void 0);e["default"]=o.exports},7312:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-d7655832], uni-scroll-view[data-v-d7655832], uni-swiper-item[data-v-d7655832]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-link[data-v-d7655832]{line-height:1;display:flex;flex-direction:row;flex-wrap:wrap;flex:1}',""]),t.exports=e},"739c":function(t,e,a){var i=a("ff36");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("7f65fa0e",i,!0,{sourceMap:!1,shadowMode:!1})},7499:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uIcon:a("b1c0").default,uLoadingIcon:a("639a").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-upload",style:[t.$u.addStyle(t.customStyle)]},[a("v-uni-view",{staticClass:"u-upload__wrap"},[t.previewImage?t._l(t.lists,(function(e,i){return a("v-uni-view",{key:i,staticClass:"u-upload__wrap__preview"},[e.isImage||e.type&&"image"===e.type?a("v-uni-image",{staticClass:"u-upload__wrap__preview__image",style:[{width:t.$u.addUnit(t.width),height:t.$u.addUnit(t.height)}],attrs:{src:e.thumb||e.url,mode:t.imageMode},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onPreviewImage(e)}}}):a("v-uni-view",{staticClass:"u-upload__wrap__preview__other"},[a("u-icon",{attrs:{color:"#80CBF9",size:"26",name:e.isVideo||e.type&&"video"===e.type?"movie":"folder"}}),a("v-uni-text",{staticClass:"u-upload__wrap__preview__other__text"},[t._v(t._s(e.isVideo||e.type&&"video"===e.type?"视频":"文件"))])],1),"uploading"===e.status||"failed"===e.status?a("v-uni-view",{staticClass:"u-upload__status"},[a("v-uni-view",{staticClass:"u-upload__status__icon"},["failed"===e.status?a("u-icon",{attrs:{name:"close-circle",color:"#ffffff",size:"25"}}):a("u-loading-icon",{attrs:{size:"22",mode:"circle",color:"#ffffff"}})],1),e.message?a("v-uni-text",{staticClass:"u-upload__status__message"},[t._v(t._s(e.message))]):t._e()],1):t._e(),"uploading"!==e.status&&(t.deletable||e.deletable)?a("v-uni-view",{staticClass:"u-upload__deletable",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteItem(i)}}},[a("v-uni-view",{staticClass:"u-upload__deletable__icon"},[a("u-icon",{attrs:{name:"close",color:"#ffffff",size:"10"}})],1)],1):t._e(),"success"===e.status?a("v-uni-view",{staticClass:"u-upload__success"},[a("v-uni-view",{staticClass:"u-upload__success__icon"},[a("u-icon",{attrs:{name:"checkmark",color:"#ffffff",size:"12"}})],1)],1):t._e()],1)})):t._e(),t.isInCount?[t.$slots.default||t.$slots.$default?a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[t._t("default")],2):a("v-uni-view",{staticClass:"u-upload__button",class:[t.disabled&&"u-upload__button--disabled"],style:[{width:t.$u.addUnit(t.width),height:t.$u.addUnit(t.height)}],attrs:{"hover-class":t.disabled?"":"u-upload__button--hover","hover-stay-time":"150"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[a("u-icon",{attrs:{name:t.uploadIcon,size:"26",color:t.uploadIconColor}}),t.uploadText?a("v-uni-text",{staticClass:"u-upload__button__text"},[t._v(t._s(t.uploadText))]):t._e()],1)]:t._e()],2)],1)},n=[]},7623:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uIcon:a("b1c0").default,"u-Text":a("882c").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-avatar",class:["u-avatar--"+t.shape],style:[{backgroundColor:t.text||t.icon?t.randomBgColor?t.colors[""!==t.colorIndex?t.colorIndex:t.$u.random(0,19)]:t.bgColor:"transparent",width:t.$u.addUnit(t.size),height:t.$u.addUnit(t.size)},t.$u.addStyle(t.customStyle)],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[t._t("default",[t.mpAvatar&&t.allowMp?void 0:t.icon?a("u-icon",{attrs:{name:t.icon,size:t.fontSize,color:t.color}}):t.text?a("u--text",{attrs:{text:t.text,size:t.fontSize,color:t.color,align:"center",customStyle:"justify-content: center"}}):a("v-uni-image",{staticClass:"u-avatar__image",class:["u-avatar__image--"+t.shape],style:[{width:t.$u.addUnit(t.size),height:t.$u.addUnit(t.size)}],attrs:{src:t.avatarUrl||t.defaultUrl,mode:t.mode},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.errorHandler.apply(void 0,arguments)}}})])],2)},n=[]},"77b1":function(t,e,a){var i=a("8ab7");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("444f8114",i,!0,{sourceMap:!1,shadowMode:!1})},7855:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("uvTextarea",{attrs:{value:t.value,placeholder:t.placeholder,height:t.height,confirmType:t.confirmType,disabled:t.disabled,count:t.count,focus:t.focus,autoHeight:t.autoHeight,fixed:t.fixed,cursorSpacing:t.cursorSpacing,cursor:t.cursor,showConfirmBar:t.showConfirmBar,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,adjustPosition:t.adjustPosition,disableDefaultPadding:t.disableDefaultPadding,holdKeyboard:t.holdKeyboard,maxlength:t.maxlength,border:t.border,customStyle:t.customStyle,formatter:t.formatter,ignoreCompositionEvent:t.ignoreCompositionEvent},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("focus")}.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("blur")}.apply(void 0,arguments)},linechange:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("linechange",e)}.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("confirm")}.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("input",e)}.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.$emit("keyboardheightchange")}.apply(void 0,arguments)}}})},r=[]},7859:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-4d47c3fb], uni-scroll-view[data-v-4d47c3fb], uni-swiper-item[data-v-4d47c3fb]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-cell__body[data-v-4d47c3fb]{display:flex;flex-direction:row;box-sizing:border-box;padding:10px 15px;font-size:15px;color:#303133;align-items:center}.u-cell__body__content[data-v-4d47c3fb]{display:flex;flex-direction:row;align-items:center;flex:1}.u-cell__body--large[data-v-4d47c3fb]{padding-top:13px;padding-bottom:13px}.u-cell__left-icon-wrap[data-v-4d47c3fb], .u-cell__right-icon-wrap[data-v-4d47c3fb]{display:flex;flex-direction:row;align-items:center;font-size:16px}.u-cell__left-icon-wrap[data-v-4d47c3fb]{margin-right:4px}.u-cell__right-icon-wrap[data-v-4d47c3fb]{margin-left:4px;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.u-cell__right-icon-wrap--up[data-v-4d47c3fb]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.u-cell__right-icon-wrap--down[data-v-4d47c3fb]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.u-cell__title[data-v-4d47c3fb]{flex:1}.u-cell__title-text[data-v-4d47c3fb]{font-size:15px;line-height:22px;color:#303133}.u-cell__title-text--large[data-v-4d47c3fb]{font-size:16px}.u-cell__label[data-v-4d47c3fb]{margin-top:5px;font-size:12px;color:#909193;line-height:18px}.u-cell__label--large[data-v-4d47c3fb]{font-size:14px}.u-cell__value[data-v-4d47c3fb]{text-align:right;font-size:14px;line-height:24px;color:#606266}.u-cell__value--large[data-v-4d47c3fb]{font-size:15px}.u-cell--clickable[data-v-4d47c3fb]{background-color:#f3f4f6}.u-cell--disabled[data-v-4d47c3fb]{color:#c8c9cc;cursor:not-allowed}.u-cell--center[data-v-4d47c3fb]{align-items:center}',""]),t.exports=e},"79c9":function(t,e,a){var i=a("21c5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("5052b415",i,!0,{sourceMap:!1,shadowMode:!1})},"79ed":function(t,e,a){var i=a("7ecf");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("78370929",i,!0,{sourceMap:!1,shadowMode:!1})},"7d52":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("fd3c");var r=i(a("9b1b")),n=i(a("9004")),s=a("44d8"),o=a("8f59"),h={components:{amounTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("cfcb"))}))},withdrawTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("10d1"))}))},inviteTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("b18d"))}))},changeTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("dabb"))}))},complaintTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("04e9"))}))},contactTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("17f4"))}))},noticeTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("6df0"))}))},financialTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("5b71"))}))},othersTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("c117"))}))},authenTmodule:function(){return Promise.resolve().then((function(){return(0,n.default)(a("9e20"))}))}},data:function(){return{modalName:null,wallet:"",switchChecked:uni.getStorageSync("bgColor")||!1,real_name_authentication:"",invite_friends:"",change_password:"",complaint_email:"",contact_customer_service:"",announcement:"",languages:"",style:"",other:"",darkness:"",light:"",tabPosition:"left",clangs:{},hideProperty:!0,value6:0,language:[]}},onHide:function(){},onUnload:function(){},onBackPress:function(t){},onLoad:function(){var t=this;this.setConfig(),this.$H.get("/api/v1/user",!1).then((function(e){t.$store.commit("setUser",e.data)})),this.language=s.langs},mounted:function(){this.$store.commit("changeTabbarIndex",4),this.auths((function(){})),this.setLgs(),this.setConfig()},onShow:function(){},computed:(0,r.default)({i18n:function(){return this.$t("mine")}},(0,o.mapState)({lgStatus:function(t){return t.lgStatus},users:function(t){return t.users}})),methods:{show11:function(){},setLgs:function(){var t=this,e=uni.getStorageSync("lang")||"en";this.language.map((function(a){return a.value==e&&(t.clangs=a),a}))},setConfig:function(){var t=this.$t("mine");this.wallet=t.wallet,this.real_name_authentication=t.real_name_authentication,this.invite_friends=t.invite_friends,this.change_password=t.change_password,this.complaint_email=t.complaint_email,this.contact_customer_service=t.contact_customer_service,this.announcement=t.announcement,this.languages=t.language,this.style=t.style,this.other=t.other},setLang:function(t){var e=this.language.map((function(e){return e.selected=!1,e.value==t.value&&(e.selected=!0),e}));this.language=e,this._i18n.locale=t.value,console.log(t.value),uni.setStorageSync("lang",t.value),this.setConfig(),this.$utils.setTabbar(this),this.clangs=t,this.hideModal()},showsLan:function(){console.log(this.$refs["openLanges"].$el);var t=this.$refs.openLanges;setTimeout((function(){t.click()}),10)},showModal:function(t){uni.navigateTo({url:"/pages/language/language"})},hideModal:function(t){this.modalName=null,uni.showTabBar()},disconnected:function(){console.log("disconnected")},connected:function(){console.log("connected")},onHideProperty:function(){event.stopPropagation(),this.hideProperty=!this.hideProperty},retry:function(){console.log("retry")},goArticle:function(){uni.navigateTo({url:"/pages/users/financial/financial"})},goWithdraw:function(){uni.navigateTo({url:"/pages/users/withdraw/withdraw"})},goothers:function(){uni.navigateTo({url:"/pages/users/others/others"})},goamount:function(){uni.navigateTo({url:"/pages/users/amount/amount"})},goauthen:function(){uni.navigateTo({url:"/pages/users/authen/authen"})},gowallet:function(){uni.navigateTo({url:"/pages/users/wallet/wallet"})},gouppwd:function(){uni.navigateTo({url:"/pages/users/uppwd/uppwd"})},gocontact:function(){uni.navigateTo({url:"/pages/users/contact/contact"})},gocomplaint:function(){uni.navigateTo({url:"complaint/complaint"})},gonotice:function(){uni.navigateTo({url:"/pages/users/notice/notice"})},goinvite:function(){uni.navigateTo({url:"/pages/users/invite/invite"})}}};e.default=h},"7d58":function(t,e,a){function i(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}a("7a76"),a("c9b5"),a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),i.prototype.set=function(t,e,a,i){var r=t*this.size+e;this.data[r]=a,i&&(this.reservedBit[r]=!0)},i.prototype.get=function(t,e){return this.data[t*this.size+e]},i.prototype.xor=function(t,e,a){this.data[t*this.size+e]^=a},i.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=i},"7e48":function(t,e,a){"use strict";var i=a("82de"),r=a("2a98"),n=a("d960"),s=a("527f"),o=a("2b44");function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,u(t)):-2}function d(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,c(t))):-2}function f(t,e){var a,i;return t?(i=new l,t.state=i,i.window=null,a=d(t,e),0!==a&&(t.state=null),a):-2}var C,m,D=!0;function p(t){if(D){var e;C=new i.Buf32(512),m=new i.Buf32(32),e=0;while(e<144)t.lens[e++]=8;while(e<256)t.lens[e++]=9;while(e<280)t.lens[e++]=7;while(e<288)t.lens[e++]=8;o(1,t.lens,0,288,C,0,t.work,{bits:9}),e=0;while(e<32)t.lens[e++]=5;o(2,t.lens,0,32,m,0,t.work,{bits:5}),D=!1}t.lencode=C,t.lenbits=9,t.distcode=m,t.distbits=5}function v(t,e,a,r){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>r&&(n=r),i.arraySet(s.window,e,a-r,n,s.wnext),r-=n,r?(i.arraySet(s.window,e,a-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}e.inflateReset=c,e.inflateReset2=d,e.inflateResetKeep=u,e.inflateInit=function(t){return f(t,15)},e.inflateInit2=f,e.inflate=function(t,e){var a,l,u,c,d,f,C,m,D,g,S,I,T,x,y,A,b,w,F,M,L,E,N,P,O=0,R=new i.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;a=t.state,12===a.mode&&(a.mode=13),d=t.next_out,u=t.output,C=t.avail_out,c=t.next_in,l=t.input,f=t.avail_in,m=a.hold,D=a.bits,g=f,S=C,E=0;t:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}while(D<16){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(2&a.wrap&&35615===m){a.check=0,R[0]=255&m,R[1]=m>>>8&255,a.check=n(a.check,R,2,0),m=0,D=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",a.mode=30;break}if(8!==(15&m)){t.msg="unknown compression method",a.mode=30;break}if(m>>>=4,D-=4,L=8+(15&m),0===a.wbits)a.wbits=L;else if(L>a.wbits){t.msg="invalid window size",a.mode=30;break}a.dmax=1<<L,t.adler=a.check=1,a.mode=512&m?10:12,m=0,D=0;break;case 2:while(D<16){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(a.flags=m,8!==(255&a.flags)){t.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=m>>8&1),512&a.flags&&(R[0]=255&m,R[1]=m>>>8&255,a.check=n(a.check,R,2,0)),m=0,D=0,a.mode=3;case 3:while(D<32){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.head&&(a.head.time=m),512&a.flags&&(R[0]=255&m,R[1]=m>>>8&255,R[2]=m>>>16&255,R[3]=m>>>24&255,a.check=n(a.check,R,4,0)),m=0,D=0,a.mode=4;case 4:while(D<16){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.head&&(a.head.xflags=255&m,a.head.os=m>>8),512&a.flags&&(R[0]=255&m,R[1]=m>>>8&255,a.check=n(a.check,R,2,0)),m=0,D=0,a.mode=5;case 5:if(1024&a.flags){while(D<16){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.length=m,a.head&&(a.head.extra_len=m),512&a.flags&&(R[0]=255&m,R[1]=m>>>8&255,a.check=n(a.check,R,2,0)),m=0,D=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(I=a.length,I>f&&(I=f),I&&(a.head&&(L=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),i.arraySet(a.head.extra,l,c,I,L)),512&a.flags&&(a.check=n(a.check,l,I,c)),f-=I,c+=I,a.length-=I),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===f)break t;I=0;do{L=l[c+I++],a.head&&L&&a.length<65536&&(a.head.name+=String.fromCharCode(L))}while(L&&I<f);if(512&a.flags&&(a.check=n(a.check,l,I,c)),f-=I,c+=I,L)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===f)break t;I=0;do{L=l[c+I++],a.head&&L&&a.length<65536&&(a.head.comment+=String.fromCharCode(L))}while(L&&I<f);if(512&a.flags&&(a.check=n(a.check,l,I,c)),f-=I,c+=I,L)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){while(D<16){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(m!==(65535&a.check)){t.msg="header crc mismatch",a.mode=30;break}m=0,D=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:while(D<32){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}t.adler=a.check=h(m),m=0,D=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=d,t.avail_out=C,t.next_in=c,t.avail_in=f,a.hold=m,a.bits=D,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){m>>>=7&D,D-=7&D,a.mode=27;break}while(D<3){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}switch(a.last=1&m,m>>>=1,D-=1,3&m){case 0:a.mode=14;break;case 1:if(p(a),a.mode=20,6===e){m>>>=2,D-=2;break t}break;case 2:a.mode=17;break;case 3:t.msg="invalid block type",a.mode=30}m>>>=2,D-=2;break;case 14:m>>>=7&D,D-=7&D;while(D<32){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if((65535&m)!==(m>>>16^65535)){t.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&m,m=0,D=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(I=a.length,I){if(I>f&&(I=f),I>C&&(I=C),0===I)break t;i.arraySet(u,l,c,I,d),f-=I,c+=I,C-=I,d+=I,a.length-=I;break}a.mode=12;break;case 17:while(D<14){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(a.nlen=257+(31&m),m>>>=5,D-=5,a.ndist=1+(31&m),m>>>=5,D-=5,a.ncode=4+(15&m),m>>>=4,D-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:while(a.have<a.ncode){while(D<3){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.lens[B[a.have++]]=7&m,m>>>=3,D-=3}while(a.have<19)a.lens[B[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,N={bits:a.lenbits},E=o(0,a.lens,0,19,a.lencode,0,a.work,N),a.lenbits=N.bits,E){t.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:while(a.have<a.nlen+a.ndist){for(;;){if(O=a.lencode[m&(1<<a.lenbits)-1],y=O>>>24,A=O>>>16&255,b=65535&O,y<=D)break;if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(b<16)m>>>=y,D-=y,a.lens[a.have++]=b;else{if(16===b){P=y+2;while(D<P){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(m>>>=y,D-=y,0===a.have){t.msg="invalid bit length repeat",a.mode=30;break}L=a.lens[a.have-1],I=3+(3&m),m>>>=2,D-=2}else if(17===b){P=y+3;while(D<P){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}m>>>=y,D-=y,L=0,I=3+(7&m),m>>>=3,D-=3}else{P=y+7;while(D<P){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}m>>>=y,D-=y,L=0,I=11+(127&m),m>>>=7,D-=7}if(a.have+I>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=30;break}while(I--)a.lens[a.have++]=L}}if(30===a.mode)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,N={bits:a.lenbits},E=o(1,a.lens,0,a.nlen,a.lencode,0,a.work,N),a.lenbits=N.bits,E){t.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,N={bits:a.distbits},E=o(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,N),a.distbits=N.bits,E){t.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(f>=6&&C>=258){t.next_out=d,t.avail_out=C,t.next_in=c,t.avail_in=f,a.hold=m,a.bits=D,s(t,S),d=t.next_out,u=t.output,C=t.avail_out,c=t.next_in,l=t.input,f=t.avail_in,m=a.hold,D=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;;){if(O=a.lencode[m&(1<<a.lenbits)-1],y=O>>>24,A=O>>>16&255,b=65535&O,y<=D)break;if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(A&&0===(240&A)){for(w=y,F=A,M=b;;){if(O=a.lencode[M+((m&(1<<w+F)-1)>>w)],y=O>>>24,A=O>>>16&255,b=65535&O,w+y<=D)break;if(0===f)break t;f--,m+=l[c++]<<D,D+=8}m>>>=w,D-=w,a.back+=w}if(m>>>=y,D-=y,a.back+=y,a.length=b,0===A){a.mode=26;break}if(32&A){a.back=-1,a.mode=12;break}if(64&A){t.msg="invalid literal/length code",a.mode=30;break}a.extra=15&A,a.mode=22;case 22:if(a.extra){P=a.extra;while(D<P){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.length+=m&(1<<a.extra)-1,m>>>=a.extra,D-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;;){if(O=a.distcode[m&(1<<a.distbits)-1],y=O>>>24,A=O>>>16&255,b=65535&O,y<=D)break;if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(0===(240&A)){for(w=y,F=A,M=b;;){if(O=a.distcode[M+((m&(1<<w+F)-1)>>w)],y=O>>>24,A=O>>>16&255,b=65535&O,w+y<=D)break;if(0===f)break t;f--,m+=l[c++]<<D,D+=8}m>>>=w,D-=w,a.back+=w}if(m>>>=y,D-=y,a.back+=y,64&A){t.msg="invalid distance code",a.mode=30;break}a.offset=b,a.extra=15&A,a.mode=24;case 24:if(a.extra){P=a.extra;while(D<P){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}a.offset+=m&(1<<a.extra)-1,m>>>=a.extra,D-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===C)break t;if(I=S-C,a.offset>I){if(I=a.offset-I,I>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=30;break}I>a.wnext?(I-=a.wnext,T=a.wsize-I):T=a.wnext-I,I>a.length&&(I=a.length),x=a.window}else x=u,T=d-a.offset,I=a.length;I>C&&(I=C),C-=I,a.length-=I;do{u[d++]=x[T++]}while(--I);0===a.length&&(a.mode=21);break;case 26:if(0===C)break t;u[d++]=a.length,C--,a.mode=21;break;case 27:if(a.wrap){while(D<32){if(0===f)break t;f--,m|=l[c++]<<D,D+=8}if(S-=C,t.total_out+=S,a.total+=S,S&&(t.adler=a.check=a.flags?n(a.check,u,S,d-S):r(a.check,u,S,d-S)),S=C,(a.flags?m:h(m))!==a.check){t.msg="incorrect data check",a.mode=30;break}m=0,D=0}a.mode=28;case 28:if(a.wrap&&a.flags){while(D<32){if(0===f)break t;f--,m+=l[c++]<<D,D+=8}if(m!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=30;break}m=0,D=0}a.mode=29;case 29:E=1;break t;case 30:E=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=d,t.avail_out=C,t.next_in=c,t.avail_in=f,a.hold=m,a.bits=D,(a.wsize||S!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&v(t,t.output,t.next_out,S-t.avail_out)?(a.mode=31,-4):(g-=t.avail_in,S-=t.avail_out,t.total_in+=g,t.total_out+=S,a.total+=S,a.wrap&&S&&(t.adler=a.check=a.flags?n(a.check,u,S,t.next_out-S):r(a.check,u,S,t.next_out-S)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===g&&0===S||4===e)&&0===E&&(E=-5),E)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var a;return t&&t.state?(a=t.state,0===(2&a.wrap)?-2:(a.head=e,e.done=!1,0)):-2},e.inflateSetDictionary=function(t,e){var a,i,n,s=e.length;return t&&t.state?(a=t.state,0!==a.wrap&&11!==a.mode?-2:11===a.mode&&(i=1,i=r(i,e,s,0),i!==a.check)?-3:(n=v(t,e,s,s),n?(a.mode=31,-4):(a.havedict=1,0))):-2},e.inflateInfo="pako inflate (from Nodeca project)"},"7e72":function(t,e,a){"use strict";a.r(e);var i=a("ab9a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"7ecf":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"[data-v-5b350092] .uni-swiper-slide-frame{height:100%!important}.bnsss[data-v-5b350092] .uni-picker-view-mask{background:inherit}.bnsss[data-v-5b350092] .u-picker__view__column__item{color:#fff}.bnsss[data-v-5b350092] .u-popup__content{border-radius:10px;background:#222}.wnsss[data-v-5b350092] .u-popup__content{border-radius:10px}.scroll-view[data-v-5b350092]{width:95%!important;height:%?85?%;line-height:%?85?%;white-space:nowrap;background:#f5f6fa;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:148px}uni-button[data-v-5b350092]{line-height:30px!important;color:#fff!important;font-size:14px!important}.scroll-view .scroll-items[data-v-5b350092]{display:inline-block;width:100%;height:%?80?%;line-height:%?80?%;text-align:center;background:var(--mainColor)!important;border-radius:6px;color:#fff!important;font-weight:700;font-size:14px}.scroll-view .scroll-item[data-v-5b350092]{display:inline-block;width:100%;line-height:%?85?%;height:%?85?%;text-align:center;border-radius:148px;color:#626779;font-size:14px}.bsone[data-v-5b350092]{background:#1a1c24!important;border:1px solid #2f3142!important}.section-area[data-v-5b350092] ::-webkit-scrollbar{width:0;height:0;color:transparent}[data-v-5b350092] .uni-scroll-view-content{\n\t\t/* overflow: hidden !important; */}uni-page-head[data-v-5b350092] .uni-btn-icon{color:#fff!important}[data-v-5b350092] .u-input{padding:12px 9px!important;\n\t\t/* border: 1px solid #2F3142!important; */background-color:#f8f8f8!important;border-radius:%?1000?%}[data-v-5b350092] .u-image__image{width:120px!important;height:120px!important;padding-top:8px}uni-page-body[data-v-5b350092]{position:inherit;overflow:hidden}.copy-btn[data-v-5b350092]{color:var(--mainColor)}.submit-btn[data-v-5b350092]{background:var(--mainColor);margin-top:20px;border-radius:%?1000?%;border:0;font-size:12px;height:45px;color:#fff;line-height:45px!important}",""]),t.exports=e},"7ee5":function(t,e,a){"use strict";a.r(e);var i=a("122c"),r=a("2f6b");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("91c0");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"4b14a8cb",null,!1,i["a"],void 0);e["default"]=o.exports},"806a":function(t,e,a){"use strict";var i=a("79c9"),r=a.n(i);r.a},8088:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-code"})},r=[]},8094:function(t,e,a){t.exports=a.p+"static/2664@2x.png"},"811f":function(t,e,a){a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1");var i=a("9275"),r=a("ada7");function n(t){this.mode=r.BYTE,"string"===typeof t&&(t=i(t)),this.data=new Uint8Array(t)}n.getBitsLength=function(t){return 8*t},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){for(var e=0,a=this.data.length;e<a;e++)t.put(this.data[e],8)},t.exports=n},"826d":function(t,e,a){"use strict";var i=a("67aa"),r=a.n(i);r.a},"82de":function(t,e,a){"use strict";var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){var e=Array.prototype.slice.call(arguments,1);while(e.length){var a=e.shift();if(a){if("object"!==typeof a)throw new TypeError(a+"must be non-object");for(var i in a)r(a,i)&&(t[i]=a[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),r);else for(var n=0;n<i;n++)t[r+n]=e[a+n]},flattenChunks:function(t){var e,a,i,r,n,s;for(i=0,e=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,a=t.length;e<a;e++)n=t[e],s.set(n,r),r+=n.length;return s}},s={arraySet:function(t,e,a,i,r){for(var n=0;n<i;n++)t[r+n]=e[a+n]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(i)},"82ee":function(t,e,a){"use strict";var i=a("b078"),r=a.n(i);r.a},"83f7":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",[a("v-uni-view",{style:"black"==t.$store.state.bgColor?"height: 10px;background: #1A1C24;":"height: 10px;"}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"bheight: 430px;background: #22252F;color: #ffffff;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;":"bheight: 430px;background: #FFFFFF;;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"90%","justify-content":"center","align-items":"center",height:"auto",margin:"0 auto","margin-top":"15px","padding-bottom":"13px"}},[a("v-uni-text",{staticStyle:{"text-align":"left",width:"100%"}}),a("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v(t._s(this.kefu))]),a("v-uni-text",{staticStyle:{"margin-top":"20px","font-size":"12px"}},[a("u-button",{staticStyle:{background:"var(--mainColor)",color:"#FFFFFF",width:"70px","border-radius":"5px"},attrs:{text:t.i18n.copy},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obutton.apply(void 0,arguments)}}})],1)],1)],1)],1),a("v-uni-view",[a("v-uni-view",{style:"black"==t.$store.state.bgColor?"height: 10px;background: #1A1C24;":"height: 10px;"}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"bheight: 430px;background: #22252F;color: #ffffff;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;":"bheight: 430px;background: #FFFFFF;;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"90%","justify-content":"center","align-items":"center",height:"auto",margin:"0 auto","margin-top":"15px","padding-bottom":"13px"}},[a("v-uni-text",{staticStyle:{"text-align":"left",width:"100%"}}),a("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v(t._s(this.zxkefu))]),a("v-uni-text",{staticStyle:{"margin-top":"20px","font-size":"12px"}},[a("u-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obuttonzxkf.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)},n=[]},8477:function(t,e,a){"use strict";a.r(e);var i=a("355a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"85a3":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@font-face{font-family:icomoon;src:url(data:application/vnd.ms-fontobject;base64,9AkAAFAJAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA48F/bAAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFxwAAALwAAABgY21hcBdW0ooAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlm5El8sgAAAXgAAAWAaGVhZCM+srIAAAb4AAAANmhoZWEHiQPJAAAHMAAAACRobXR4FgABpQAAB1QAAAAgbG9jYQQGAqoAAAd0AAAAEm1heHAADgC9AAAHiAAAACBuYW1lmUoJ+wAAB6gAAAGGcG9zdAADAAAAAAkwAAAAIAADA5oBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkDA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpA//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAtQBrA0sDCwAmAAAJATY0JyYiBwkBJiIHBhQXCQEGFBceATMyNjcJAR4BMzI2NzY0JwECLgEbCgoKGgr+5f7lChoKCgoBG/7jCgoEDQcGDQUBGwEbBQ0GBw0ECgr+4wG+AR0KGgoKCv7kAR4KCgoaCv7h/uQKGwoEBAQEAR3+4wQEBAQKGwoBHAAABQA/AHIDwQNGADAATABoAHMAfgAANy4BJyY0NzY3PgE3NjMyFhc3NjIXFhQPAR4BFxYUBwYHDgEHBiMiJicHBiInJjQ/ATceATMyNz4BNzY3NjQnLgEnBx4BFRQGIyImJwc3LgE1NDYzMhYXNy4BIyIHDgEHBgcGFBceARc3Fx4BMzI2NTQmJwc3LgEjIgYVFBYXN9hDSA4GBgweHmtQT29FcS5dCRcICQlUTFIOBgYMHh9rT1BuTXwwSQkXCQgIQ1kpZz9hRkdeGxoLAgINTEd8DxBUOxktEndSCQlUOxIjD3UmXDdhRkdeGxoLAgIMQz6CTgoYDSMzCAd2SAYNBiMzAgJr3Td5HhAhEBwzNGYmJh8aXggICBgIVTiEIRAhEBs0M2cmJiceSQkJCBgIQwgYHiIiWi4tGAYKBh56MnwSLRk7UxAOd6IPIxM6VAkIdRMXISJbLS4YBQsFHG8xgQIHCDMjDRgKdpgCAjIjBwwGagAABABy//kDxwNOAFAAoQCtALoAAAEXHgEXFRQGDwIXFgYPAQ4BLwEPAQ4BKwEiJi8CBwYmLwEuAT8BLwEuAT0BNDY/AicmNj8BPgEfAT8BPgE7ATIWHwI3NhYfAR4BDwEXBzc1Jy4BLwEmNj8BJwcOAS8BLgEvASMHDgEPAQYmLwEHFx4BDwEOAQ8BFRceAR8BFgYPARc3PgEfAR4BHwEzNz4BPwE2Fh8BNycuAT8BPgE3JTQ2MzIWFRQGIyImNxQWMzI2NTQmIyIGFQNFUhMaAxkSUxEwCwMONA4lD0UlDwQdEkkUHQMOJUUPJQ40DgMLMhFTEhkYD1MRMAsDDjQOJQ9HJQ4FHRJJEhwBDyVEECUOMw4ECzARG1tbCAwDHQMCBTQoSgYPCEQICgEROBACCQhGBhEGSyc0BAMDHQMMCFtbCAwDHQMDBDQnSwYPCEQICQIQOBEBCghGBhEGSig0BQIDHQMMCP5+RC4vQ0MvLkQ/HhUWHh4WFR4CCw4DHRRJFBwDDyVFDyUONA4DCzARUxIZGRJTETALAw40DiUPRyUPBB0SSRMcAw4lRQ8lDjQOAwsyEVMSGRgRUxEwCwMONA4lD0UlkRE2EAIJCEYGEQZLJzQEAwMdAwwIW1sIDAMdAwMENCdLBg8IRAgJAhA4EQEKCEYGEQZKKDQFAgMdAwwIW1sIDAMfAwIFNChKBg8IRAgKASwuREQuL0NDLxYeHhYVHh4VAAAABAA/AGsDwQMVACIARQBRAF4AACUiJy4BJyYnJjQ3Njc+ATc2MzIXHgEXFhcWFAcGBw4BBwYjAQYUFxYXHgEXFjMyNz4BNzY3NjQnJicuAScmIyIHDgEHBgcFIiY1NDYzMhYVFAYnIgYVFBYzMjY1NCYjAgBvT1BrHh4MBgYMHh5rUE9vblBPax8eDAYGDB4fa09Qbv50AgILGhteR0ZhYUZHXhsaCwICCxobXkdGYWFGR14bGgsBjDtUVDs7VFQ7IzMzIyMzMyNrJiZmMzQbECIQGzQzZiYmJiZmMzQbECIQGzQzZiYmAWAFCwUYLi5bIiEhIlouLhgFCwUYLi5bIiEhIlouLhiZUzs7U1M7O1PjMiMjMjIjIzIAAAABAAAAAAAAbH/B418PPPUACwQAAAAAAOAstzcAAAAA4Cy3NwAA//kDxwNOAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAPHAAEAAAAAAAAAAAAAAAAAAAAIBAAAAAAAAAAAAAAAAgAAAAQAALUEAAA/BAAAcgQAAD8AAAAAAAoAFAAeAGQBHgIyAsAAAAABAAAACAC7AAUAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==);src:url(data:application/vnd.ms-fontobject;base64,9AkAAFAJAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA48F/bAAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFxwAAALwAAABgY21hcBdW0ooAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlm5El8sgAAAXgAAAWAaGVhZCM+srIAAAb4AAAANmhoZWEHiQPJAAAHMAAAACRobXR4FgABpQAAB1QAAAAgbG9jYQQGAqoAAAd0AAAAEm1heHAADgC9AAAHiAAAACBuYW1lmUoJ+wAAB6gAAAGGcG9zdAADAAAAAAkwAAAAIAADA5oBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkDA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpA//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAtQBrA0sDCwAmAAAJATY0JyYiBwkBJiIHBhQXCQEGFBceATMyNjcJAR4BMzI2NzY0JwECLgEbCgoKGgr+5f7lChoKCgoBG/7jCgoEDQcGDQUBGwEbBQ0GBw0ECgr+4wG+AR0KGgoKCv7kAR4KCgoaCv7h/uQKGwoEBAQEAR3+4wQEBAQKGwoBHAAABQA/AHIDwQNGADAATABoAHMAfgAANy4BJyY0NzY3PgE3NjMyFhc3NjIXFhQPAR4BFxYUBwYHDgEHBiMiJicHBiInJjQ/ATceATMyNz4BNzY3NjQnLgEnBx4BFRQGIyImJwc3LgE1NDYzMhYXNy4BIyIHDgEHBgcGFBceARc3Fx4BMzI2NTQmJwc3LgEjIgYVFBYXN9hDSA4GBgweHmtQT29FcS5dCRcICQlUTFIOBgYMHh9rT1BuTXwwSQkXCQgIQ1kpZz9hRkdeGxoLAgINTEd8DxBUOxktEndSCQlUOxIjD3UmXDdhRkdeGxoLAgIMQz6CTgoYDSMzCAd2SAYNBiMzAgJr3Td5HhAhEBwzNGYmJh8aXggICBgIVTiEIRAhEBs0M2cmJiceSQkJCBgIQwgYHiIiWi4tGAYKBh56MnwSLRk7UxAOd6IPIxM6VAkIdRMXISJbLS4YBQsFHG8xgQIHCDMjDRgKdpgCAjIjBwwGagAABABy//kDxwNOAFAAoQCtALoAAAEXHgEXFRQGDwIXFgYPAQ4BLwEPAQ4BKwEiJi8CBwYmLwEuAT8BLwEuAT0BNDY/AicmNj8BPgEfAT8BPgE7ATIWHwI3NhYfAR4BDwEXBzc1Jy4BLwEmNj8BJwcOAS8BLgEvASMHDgEPAQYmLwEHFx4BDwEOAQ8BFRceAR8BFgYPARc3PgEfAR4BHwEzNz4BPwE2Fh8BNycuAT8BPgE3JTQ2MzIWFRQGIyImNxQWMzI2NTQmIyIGFQNFUhMaAxkSUxEwCwMONA4lD0UlDwQdEkkUHQMOJUUPJQ40DgMLMhFTEhkYD1MRMAsDDjQOJQ9HJQ4FHRJJEhwBDyVEECUOMw4ECzARG1tbCAwDHQMCBTQoSgYPCEQICgEROBACCQhGBhEGSyc0BAMDHQMMCFtbCAwDHQMDBDQnSwYPCEQICQIQOBEBCghGBhEGSig0BQIDHQMMCP5+RC4vQ0MvLkQ/HhUWHh4WFR4CCw4DHRRJFBwDDyVFDyUONA4DCzARUxIZGRJTETALAw40DiUPRyUPBB0SSRMcAw4lRQ8lDjQOAwsyEVMSGRgRUxEwCwMONA4lD0UlkRE2EAIJCEYGEQZLJzQEAwMdAwwIW1sIDAMdAwMENCdLBg8IRAgJAhA4EQEKCEYGEQZKKDQFAgMdAwwIW1sIDAMfAwIFNChKBg8IRAgKASwuREQuL0NDLxYeHhYVHh4VAAAABAA/AGsDwQMVACIARQBRAF4AACUiJy4BJyYnJjQ3Njc+ATc2MzIXHgEXFhcWFAcGBw4BBwYjAQYUFxYXHgEXFjMyNz4BNzY3NjQnJicuAScmIyIHDgEHBgcFIiY1NDYzMhYVFAYnIgYVFBYzMjY1NCYjAgBvT1BrHh4MBgYMHh5rUE9vblBPax8eDAYGDB4fa09Qbv50AgILGhteR0ZhYUZHXhsaCwICCxobXkdGYWFGR14bGgsBjDtUVDs7VFQ7IzMzIyMzMyNrJiZmMzQbECIQGzQzZiYmJiZmMzQbECIQGzQzZiYmAWAFCwUYLi5bIiEhIlouLhgFCwUYLi5bIiEhIlouLhiZUzs7U1M7O1PjMiMjMjIjIzIAAAABAAAAAAAAbH/B418PPPUACwQAAAAAAOAstzcAAAAA4Cy3NwAA//kDxwNOAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAPHAAEAAAAAAAAAAAAAAAAAAAAIBAAAAAAAAAAAAAAAAgAAAAQAALUEAAA/BAAAcgQAAD8AAAAAAAoAFAAeAGQBHgIyAsAAAAABAAAACAC7AAUAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("embedded-opentype"),url(data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBccAAAC8AAAAYGNtYXAXVtKKAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZuRJfLIAAAF4AAAFgGhlYWQjPrKyAAAG+AAAADZoaGVhB4kDyQAABzAAAAAkaG10eBYAAaUAAAdUAAAAIGxvY2EEBgKqAAAHdAAAABJtYXhwAA4AvQAAB4gAAAAgbmFtZZlKCfsAAAeoAAABhnBvc3QAAwAAAAAJMAAAACAAAwOaAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QP//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABALUAawNLAwsAJgAACQE2NCcmIgcJASYiBwYUFwkBBhQXHgEzMjY3CQEeATMyNjc2NCcBAi4BGwoKChoK/uX+5QoaCgoKARv+4woKBA0HBg0FARsBGwUNBgcNBAoK/uMBvgEdChoKCgr+5AEeCgoKGgr+4f7kChsKBAQEBAEd/uMEBAQEChsKARwAAAUAPwByA8EDRgAwAEwAaABzAH4AADcuAScmNDc2Nz4BNzYzMhYXNzYyFxYUDwEeARcWFAcGBw4BBwYjIiYnBwYiJyY0PwE3HgEzMjc+ATc2NzY0Jy4BJwceARUUBiMiJicHNy4BNTQ2MzIWFzcuASMiBw4BBwYHBhQXHgEXNxceATMyNjU0JicHNy4BIyIGFRQWFzfYQ0gOBgYMHh5rUE9vRXEuXQkXCAkJVExSDgYGDB4fa09Qbk18MEkJFwkICENZKWc/YUZHXhsaCwICDUxHfA8QVDsZLRJ3UgkJVDsSIw91Jlw3YUZHXhsaCwICDEM+gk4KGA0jMwgHdkgGDQYjMwICa903eR4QIRAcMzRmJiYfGl4ICAgYCFU4hCEQIRAbNDNnJiYnHkkJCQgYCEMIGB4iIlouLRgGCgYeejJ8Ei0ZO1MQDneiDyMTOlQJCHUTFyEiWy0uGAULBRxvMYECBwgzIw0YCnaYAgIyIwcMBmoAAAQAcv/5A8cDTgBQAKEArQC6AAABFx4BFxUUBg8CFxYGDwEOAS8BDwEOASsBIiYvAgcGJi8BLgE/AS8BLgE9ATQ2PwInJjY/AT4BHwE/AT4BOwEyFh8CNzYWHwEeAQ8BFwc3NScuAS8BJjY/AScHDgEvAS4BLwEjBw4BDwEGJi8BBxceAQ8BDgEPARUXHgEfARYGDwEXNz4BHwEeAR8BMzc+AT8BNhYfATcnLgE/AT4BNyU0NjMyFhUUBiMiJjcUFjMyNjU0JiMiBhUDRVITGgMZElMRMAsDDjQOJQ9FJQ8EHRJJFB0DDiVFDyUONA4DCzIRUxIZGA9TETALAw40DiUPRyUOBR0SSRIcAQ8lRBAlDjMOBAswERtbWwgMAx0DAgU0KEoGDwhECAoBETgQAgkIRgYRBksnNAQDAx0DDAhbWwgMAx0DAwQ0J0sGDwhECAkCEDgRAQoIRgYRBkooNAUCAx0DDAj+fkQuL0NDLy5EPx4VFh4eFhUeAgsOAx0USRQcAw8lRQ8lDjQOAwswEVMSGRkSUxEwCwMONA4lD0clDwQdEkkTHAMOJUUPJQ40DgMLMhFTEhkYEVMRMAsDDjQOJQ9FJZERNhACCQhGBhEGSyc0BAMDHQMMCFtbCAwDHQMDBDQnSwYPCEQICQIQOBEBCghGBhEGSig0BQIDHQMMCFtbCAwDHwMCBTQoSgYPCEQICgEsLkRELi9DQy8WHh4WFR4eFQAAAAQAPwBrA8EDFQAiAEUAUQBeAAAlIicuAScmJyY0NzY3PgE3NjMyFx4BFxYXFhQHBgcOAQcGIwEGFBcWFx4BFxYzMjc+ATc2NzY0JyYnLgEnJiMiBw4BBwYHBSImNTQ2MzIWFRQGJyIGFRQWMzI2NTQmIwIAb09Qax4eDAYGDB4ea1BPb25QT2sfHgwGBgweH2tPUG7+dAICCxobXkdGYWFGR14bGgsCAgsaG15HRmFhRkdeGxoLAYw7VFQ7O1RUOyMzMyMjMzMjayYmZjM0GxAiEBs0M2YmJiYmZjM0GxAiEBs0M2YmJgFgBQsFGC4uWyIhISJaLi4YBQsFGC4uWyIhISJaLi4YmVM7O1NTOztT4zIjIzIyIyMyAAAAAQAAAAAAAGx/weNfDzz1AAsEAAAAAADgLLc3AAAAAOAstzcAAP/5A8cDTgAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADxwABAAAAAAAAAAAAAAAAAAAACAQAAAAAAAAAAAAAAAIAAAAEAAC1BAAAPwQAAHIEAAA/AAAAAAAKABQAHgBkAR4CMgLAAAAAAQAAAAgAuwAFAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format("truetype"),url(data:font/woff;base64,d09GRgABAAAAAAmcAAsAAAAACVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIFx2NtYXAAAAFoAAAAVAAAAFQXVtKKZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAABYAAAAWA5El8smhlYWQAAAdEAAAANgAAADYjPrKyaGhlYQAAB3wAAAAkAAAAJAeJA8lobXR4AAAHoAAAACAAAAAgFgABpWxvY2EAAAfAAAAAEgAAABIEBgKqbWF4cAAAB9QAAAAgAAAAIAAOAL1uYW1lAAAH9AAAAYYAAAGGmUoJ+3Bvc3QAAAl8AAAAIAAAACAAAwAAAAMDmgGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QMDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkD//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQC1AGsDSwMLACYAAAkBNjQnJiIHCQEmIgcGFBcJAQYUFx4BMzI2NwkBHgEzMjY3NjQnAQIuARsKCgoaCv7l/uUKGgoKCgEb/uMKCgQNBwYNBQEbARsFDQYHDQQKCv7jAb4BHQoaCgoK/uQBHgoKChoK/uH+5AobCgQEBAQBHf7jBAQEBAobCgEcAAAFAD8AcgPBA0YAMABMAGgAcwB+AAA3LgEnJjQ3Njc+ATc2MzIWFzc2MhcWFA8BHgEXFhQHBgcOAQcGIyImJwcGIicmND8BNx4BMzI3PgE3Njc2NCcuAScHHgEVFAYjIiYnBzcuATU0NjMyFhc3LgEjIgcOAQcGBwYUFx4BFzcXHgEzMjY1NCYnBzcuASMiBhUUFhc32ENIDgYGDB4ea1BPb0VxLl0JFwgJCVRMUg4GBgweH2tPUG5NfDBJCRcJCAhDWSlnP2FGR14bGgsCAg1MR3wPEFQ7GS0Sd1IJCVQ7EiMPdSZcN2FGR14bGgsCAgxDPoJOChgNIzMIB3ZIBg0GIzMCAmvdN3keECEQHDM0ZiYmHxpeCAgIGAhVOIQhECEQGzQzZyYmJx5JCQkIGAhDCBgeIiJaLi0YBgoGHnoyfBItGTtTEA53og8jEzpUCQh1ExchIlstLhgFCwUcbzGBAgcIMyMNGAp2mAICMiMHDAZqAAAEAHL/+QPHA04AUAChAK0AugAAARceARcVFAYPAhcWBg8BDgEvAQ8BDgErASImLwIHBiYvAS4BPwEvAS4BPQE0Nj8CJyY2PwE+AR8BPwE+ATsBMhYfAjc2Fh8BHgEPARcHNzUnLgEvASY2PwEnBw4BLwEuAS8BIwcOAQ8BBiYvAQcXHgEPAQ4BDwEVFx4BHwEWBg8BFzc+AR8BHgEfATM3PgE/ATYWHwE3Jy4BPwE+ATclNDYzMhYVFAYjIiY3FBYzMjY1NCYjIgYVA0VSExoDGRJTETALAw40DiUPRSUPBB0SSRQdAw4lRQ8lDjQOAwsyEVMSGRgPUxEwCwMONA4lD0clDgUdEkkSHAEPJUQQJQ4zDgQLMBEbW1sIDAMdAwIFNChKBg8IRAgKARE4EAIJCEYGEQZLJzQEAwMdAwwIW1sIDAMdAwMENCdLBg8IRAgJAhA4EQEKCEYGEQZKKDQFAgMdAwwI/n5ELi9DQy8uRD8eFRYeHhYVHgILDgMdFEkUHAMPJUUPJQ40DgMLMBFTEhkZElMRMAsDDjQOJQ9HJQ8EHRJJExwDDiVFDyUONA4DCzIRUxIZGBFTETALAw40DiUPRSWRETYQAgkIRgYRBksnNAQDAx0DDAhbWwgMAx0DAwQ0J0sGDwhECAkCEDgRAQoIRgYRBkooNAUCAx0DDAhbWwgMAx8DAgU0KEoGDwhECAoBLC5ERC4vQ0MvFh4eFhUeHhUAAAAEAD8AawPBAxUAIgBFAFEAXgAAJSInLgEnJicmNDc2Nz4BNzYzMhceARcWFxYUBwYHDgEHBiMBBhQXFhceARcWMzI3PgE3Njc2NCcmJy4BJyYjIgcOAQcGBwUiJjU0NjMyFhUUBiciBhUUFjMyNjU0JiMCAG9PUGseHgwGBgweHmtQT29uUE9rHx4MBgYMHh9rT1Bu/nQCAgsaG15HRmFhRkdeGxoLAgILGhteR0ZhYUZHXhsaCwGMO1RUOztUVDsjMzMjIzMzI2smJmYzNBsQIhAbNDNmJiYmJmYzNBsQIhAbNDNmJiYBYAULBRguLlsiISEiWi4uGAULBRguLlsiISEiWi4uGJlTOztTUzs7U+MyIyMyMiMjMgAAAAEAAAAAAABsf8HjXw889QALBAAAAAAA4Cy3NwAAAADgLLc3AAD/+QPHA04AAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA8cAAQAAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAAACAAAABAAAtQQAAD8EAAByBAAAPwAAAAAACgAUAB4AZAEeAjICwAAAAAEAAAAIALsABQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA) format("woff"),url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxmb250IGlkPSJpY29tb29uIiBob3Jpei1hZHYteD0iMTAyNCI+PGZvbnQtZmFjZSB1bml0cy1wZXItZW09IjEwMjQiIGFzY2VudD0iOTYwIiBkZXNjZW50PSItNjQiLz48Z2x5cGggaG9yaXotYWR2LXg9IjUxMiIvPjxnbHlwaCB1bmljb2RlPSLupIAiIGdseXBoLW5hbWU9Imljb24tY2xvc2UiIGQ9Ik01NTguMDk2IDQ0Ni4zNDZsMjgzLjE2NSAyODQuNTM3YzEzLjE3IDEzLjIzNCAxMy4xNyAzMy4wODUgMCA0Ni4zMnMtMzIuOTI3IDEzLjIzNC00Ni4wOTcgMEw1MTIgNDkyLjY2NyAyMjguODM2IDc3OS40MDljLTEzLjE3MSAxMy4yMzQtMzIuOTI2IDEzLjIzNC00Ni4wOTcgMHMtMTMuMTctMzMuMDg2IDAtNDYuMzJsMjgzLjE2NC0yODYuNzQyTDE4MC41NDQgMTYxLjgxYy0xMy4xNy0xMy4yMzItMTMuMTctMzMuMDg3IDAtNDYuMzE5IDYuNTg1LTYuNjE2IDE1LjM2Ni04LjgyMyAyNC4xNDYtOC44MjNzMTcuNTYxIDIuMjA3IDI0LjE0NiA4LjgyM0w1MTIgNDAwLjAyNmwyODMuMTY0LTI4NC41MzVjNi41ODItNi42MTYgMTUuMzY2LTguODIzIDI0LjE0NC04LjgyMyA4Ljc4NCAwIDE3LjU2MiAyLjIwNyAyNC4xNDkgOC44MjMgMTMuMTcgMTMuMjMyIDEzLjE3IDMzLjA4NyAwIDQ2LjMxOUw1NTguMDk2IDQ0Ni4zNDd6Ii8+PGdseXBoIHVuaWNvZGU9Iu6kgSIgZ2x5cGgtbmFtZT0iaWNvbi1pbnZpc2libGUiIGQ9Ik0yMTYuNDE1IDIyMS4wODdDMTI3LjE2NCAyOTQuMTczIDgxLjAzNSAzODYuMzcgNjMuMzM5IDQyNy4wNzFjLTguNjAxIDIxLjMzMy04LjYwMSA0NC4wODkgMCA2NS40MjJDOTQuODc0IDU2NS4wMjYgMjE2LjcxNSA4MDEuMTE1IDUxMiA4MDEuMTE1YzkxLjY4NiAwIDE2Ni43NjQtMjIuOTg0IDIyNy42MzUtNTYuODEybDkzLjU4MiA5My41ODhjMTEuMTEgMTEuMTA4IDI5LjEyMSAxMS4xMDggNDAuMjMyIDAgMTEuMTA1LTExLjEwOCAxMS4xMDUtMjkuMTE4IDAtNDAuMjI2bC04NC44NzMtODQuODcyYzEwMS40ODQtNzQuOTA0IDE1My4yMTMtMTc2Ljg5MSAxNzIuMDgzLTIyMC4yOTkgOC42MDItMjEuMzMzIDguNjAyLTQ0LjA4OSAwLTY1LjQyMi0zMS41MzQtNzIuNTMzLTE1NC44MDYtMzA4LjYyMy00NDguNjYtMzA4LjYyMy0xMDIuNzgyIDAtMTg0LjU1IDI4LjYwNC0yNDguODEgNjguOTYxbC03My41OTQtNzMuNTk3Yy0xMS4xMDgtMTEuMTA1LTI5LjExOS0xMS4xMDUtNDAuMjI3IDAtMTEuMTA4IDExLjExLTExLjEwOCAyOS4xMjEgMCA0MC4yMjZsNjcuMDQ2IDY3LjA0OXptODguNTE2IDguMDYxYzU0Ljc5My0zMS44ODEgMTIzLjAzNi01My44MTEgMjA3LjA2OS01My44MTEgMjU5LjQ0NyAwIDM2OC4zOSAyMDkuMDY3IDM5NS42MjIgMjczLjA2NyAyLjg2NyA3LjExMSAyLjg2NyAxNC4yMjIgMCAyMS4zMzMtMTYuNzk5IDQwLjM1OS02NC42OTQgMTM1LjM4Mi0xNTkuODM1IDIwMi4yNjdMNjI0LjAzIDU0OC4yNDdjMTkuNTc2LTI0LjMyNiAzMS4zMTItNTUuMTAzIDMxLjMxMi04OC40NjYgMC03OC4yMjItNjQuNTA1LTE0Mi4yMjItMTQzLjM0My0xNDIuMjIyLTMzLjIyNSAwLTYzLjkwNSAxMS4zNjctODguMjgzIDMwLjM3NUwzMDQuOTMgMjI5LjE0OHptODEuNjA3IDE2Mi4wNmMtMTEuMzg2IDIwLjM2Ni0xNy44OCA0My43NTQtMTcuODggNjguNTc0IDAgNzguMjIyIDY0LjUwMyAxNDIuMjIyIDE0My4zNDIgMTQyLjIyMiAyNC42MTYgMCA0Ny44MzYtNi4yNCA2OC4xMy0xNy4yMDRsMTE3LjMwNSAxMTcuMzA1Yy01MC44MyAyNS40MjgtMTEyLjEyMyA0Mi4xMjEtMTg1LjQzNSA0Mi4xMjEtMjU5LjQ0OSAwLTM2OC4zODktMjA5LjA2Ny0zOTUuNjI0LTI3My4wNjctMi44NjctNy4xMTEtMi44NjctMTQuMjIyIDAtMjEuMzMzIDE1LjYzOS0zNy41NjcgNTguMjE5LTEyMi40OTkgMTQwLjc2OC0xODguMDEzbDEyOS4zOTQgMTI5LjM5NHptNzcuOTc2LTIuNDc3YzEzLjYzLTkuMDE2IDI5Ljk2OC0xNC4yODMgNDcuNDg2LTE0LjI4MyA0Ny4zMDMgMCA4Ni4wMDUgMzguNCA4Ni4wMDUgODUuMzMzIDAgMTcuNjE5LTUuNDU1IDM0LjAzNi0xNC43NzEgNDcuNjdMNDY0LjUxNCAzODguNzN6bTcyLjI5MSAxNTIuNzQ1YTg1Ljk1OSA4NS45NTkgMCAwMS0yNC44MDUgMy42NGMtNDcuMzAzIDAtODYuMDA1LTM4LjQtODYuMDA1LTg1LjMzM2E4NC4wMzMgODQuMDMzIDAgMDEzLjg2Ny0yNS4yNWwxMDYuOTQzIDEwNi45NDR6Ii8+PGdseXBoIHVuaWNvZGU9Iu6kgiIgZ2x5cGgtbmFtZT0iaWNvbi1zZXR0aW5nIiBkPSJNODM2LjYyNSA1MjMuMTE2bDgyLjg0Ny0xNC40OTljMjQuODU1LTQuMTQyIDQzLjQ5Ny0yNC44NTQgNDcuNjM5LTUxLjc4di03Mi40OTJjMC0yNi45MjYtMTguNjQyLTQ3LjYzOC00My40OTctNTEuNzhsLTgyLjg0Ny0xNC40OTgtMTYuNTY2LTM3LjI4MiA0Ny42MzMtNjguMzUxYzE0LjUwMS0yMC43MTMgMTIuNDMtNDcuNjM5LTYuMjEyLTY2LjI3NmwtNTEuNzgtNTEuNzhjLTE4LjYzNy0xOC42NDItNDUuNTYyLTIwLjcxMy02Ni4yNzYtNi4yMTJsLTY4LjM1MSA0Ny42MzMtMzcuMjgyLTE2LjU2Ni0xNC40OTgtODIuODQ3Yy02LjIxNC0yNC44NTUtMjYuOTI2LTQzLjQ5Ny01MS43OC00My40OTdoLTcyLjQ5MmMtMjYuOTI2IDAtNDcuNjM4IDE4LjY0Mi01MS43OCA0My40OTdsLTE0LjQ5OSA4Mi44NDctMzcuMjgyIDE2LjU2Ni02OC4zNDktNDcuNjMzYy0yMC43MTItMTQuNTAxLTQ3LjYzOC0xMi40My02Ni4yNzggNi4yMTJsLTUxLjc4IDUxLjc4Yy0xOC42NDEgMTguNjM3LTIwLjcxMiA0NS41NjItNi4yMTMgNjYuMjc2bDQ5LjcwOSA3MC40MjItMTYuNTcgMzcuMjgyLTgyLjg0OCAxNC40OThjLTI0Ljg1NCA2LjIxMy00My40OTUgMjYuOTI2LTQzLjQ5NSA1MS43OHY3Mi40OTJjMCAyNC44NTQgMTguNjQxIDQ1LjU2NiAzOS4zNTMgNDkuNzA4bDgyLjg0OCAxNC40OTkgMTYuNTY5IDM3LjI4Mi00Ny42MzggNjguMzVjLTE0LjQ5OCAyMC43MTItMTIuNDI3IDQ3LjYzNyA2LjIxMyA2Ni4yNzhsNTEuNzggNTEuNzhjMTguNjQxIDE4LjY0MSA0NS41NjYgMjAuNzEyIDY2LjI3OCA2LjIxM2w3MC40Mi00OS43MDkgMzcuMjgyIDE2LjU3IDE0LjQ5OSA4Mi44NDhjNi4yMTMgMjQuODU0IDI2LjkyNiA0My40OTUgNTEuNzggNDMuNDk1aDcyLjQ5MmMyNC44NTQgMCA0NS41NjYtMTguNjQxIDQ3LjYzOC00MS40MjRsMTQuNDk4LTgyLjg0OCAzNy4yODItMTYuNTY5IDY4LjM1MiA0Ny42MzhjMjAuNzA4IDE0LjQ5OCA0Ny42MzMgMTIuNDI3IDY2LjI3Ni02LjIxM2w1MS43OC01MS43OGMxOC42NDItMTguNjQxIDIwLjcxMy00NS41NjYgNi4yMTItNjYuMjc4bC00Ny42MzktNjguMzQ5IDE2LjU3Mi0zNy4yODJ6TTgwOS43IDM3OC4xMzFsOTEuMTM2IDE2LjU3djUzLjg1MUw4MDkuNyA0NjUuMTIxYy0xMC4zNTQgMi4wNzEtMTguNjQyIDguMjg1LTIyLjc4NCAxOC42NDFsLTI4Ljk5NiA3MC40MmMtNC4xNDIgOC4yODUtMi4wNzEgMjAuNzEyIDQuMTQyIDI4Ljk5N2w1MS43OCA3NC41NjMtMzkuMzUgMzkuMzUzLTc0LjU2NC01MS43OGMtOC4yODMtNi4yMTQtMTguNjQxLTguMjg1LTI4Ljk5Ny00LjE0M2wtNjguMzUgMjguOTk3Yy0xMC4zNTYgNC4xNDMtMTYuNTY5IDEyLjQyNy0xOC42NDEgMjIuNzgzbC0xNi41NjkgOTEuMTMzaC01NS45MjJsLTE2LjU2OS05MS4xMzNjLTIuMDcxLTEwLjM1Ni04LjI4NS0xOC42NDEtMTguNjQxLTIyLjc4M2wtNzAuNDItMjguOTk3Yy04LjI4NS00LjE0Mi0yMC43MTItMi4wNzEtMjguOTk3IDQuMTQzbC03NC41NjMgNTEuNzgtMzkuMzUzLTM5LjM1MyA1MS43OC03NC41NjNjNi4yMTQtOC4yODUgOC4yODUtMTguNjQxIDQuMTQzLTI4Ljk5NmwtMjguOTk3LTY4LjM1Yy00LjE0My0xMC4zNTYtMTIuNDI3LTE2LjU2OS0yMi43ODMtMTguNjQxbC05MS4xMzMtMTYuNTY5di01NS45MjJsOTEuMTMzLTE2LjU3YzEwLjM1Ni0yLjA3MSAxOC42NDEtOC4yODUgMjIuNzgzLTE4LjY0MWwyOC45OTctNzAuNDJjNC4xNDItOC4yODUgMi4wNzEtMjAuNzE0LTQuMTQzLTI4Ljk5N2wtNTEuNzgtNzQuNTY0IDM5LjM1My0zOS4zNSA3NC41NjMgNTEuNzhjOC4yODUgNi4yMTIgMTguNjQxIDguMjgzIDI4Ljk5NiA0LjE0Mmw2OC4zNS0yOC45OTZjMTAuMzU2LTQuMTQyIDE2LjU2OS0xMi40MyAxOC42NDEtMjIuNzg0bDE2LjU2OS05MS4xMzZINTY1LjNsMTYuNTY5IDkxLjEzNmMyLjA3MSAxMC4zNTQgOC4yODUgMTguNjQyIDE4LjY0MSAyMi43ODRsNzAuNDIxIDMxLjA2N2M4LjI4NSA0LjE0MiAyMC43MTQgMi4wNzEgMjguOTk3LTQuMTQybDc0LjU2NC01MS43OCAzOS4zNSAzOS4zNS01MS43OCA3NC41NjRjLTYuMjEyIDguMjgzLTguMjgzIDE4LjY0MS00LjE0MiAyOC45OTdsMjguOTk2IDY4LjM0OWM0LjE0MiAxMC4zNTYgMTIuNDMgMTYuNTcgMjIuNzg0IDE4LjY0MXptLTM4NS4yNDIgNDMuNDk2YzAgNjIuMTM2IDUxLjc4IDExMy45MTUgMTEzLjkxNSAxMTMuOTE1czExMy45MTYtNTEuNzggMTEzLjkxNi0xMTMuOTE1YzAtNjIuMTM2LTUxLjc4LTExMy45MTYtMTEzLjkxNi0xMTMuOTE2cy0xMTMuOTE1IDUxLjc4LTExMy45MTUgMTEzLjkxNnptNjIuMTM1IDBjMC0yOC45OTcgMjIuNzgzLTUxLjc4IDUxLjc4LTUxLjc4czUxLjc4IDIyLjc4MyA1MS43OCA1MS43OC0yMi43ODMgNTEuNzgtNTEuNzggNTEuNzgtNTEuNzgtMjIuNzgzLTUxLjc4LTUxLjc4eiIvPjxnbHlwaCB1bmljb2RlPSLupIMiIGdseXBoLW5hbWU9Imljb24tdmlzaWJsZSIgZD0iTTUxMiAxMDYuNjY3Yy0yOTUuMjg1IDAtNDE3LjEyNSAyMzYuMDg5LTQ0OC42NjEgMzA4LjYyMi04LjYwMSAyMS4zMzMtOC42MDEgNDQuMDg5IDAgNjUuNDIyQzk0Ljg3NCA1NTMuMjQ0IDIxNi43MTUgNzg5LjMzMyA1MTIgNzg5LjMzM2MyOTMuODU0IDAgNDE3LjEyNi0yMzYuMDg5IDQ0OC42Ni0zMDguNjIyIDguNjAyLTIxLjMzMyA4LjYwMi00NC4wODkgMC02NS40MjJDOTI5LjEyNiAzNDIuNzU2IDgwNS44NTQgMTA2LjY2NyA1MTIgMTA2LjY2N3pNMTE2LjM3NiA0NTkuMzc4Yy0yLjg2Ny03LjExMS0yLjg2Ny0xNC4yMjIgMC0yMS4zMzNDMTQzLjYxMSAzNzIuNjIzIDI1Mi41NTEgMTYzLjU1NiA1MTIgMTYzLjU1NmMyNTkuNDQ3IDAgMzY4LjM5IDIwOS4wNjcgMzk1LjYyMiAyNzMuMDY3IDIuODY3IDcuMTExIDIuODY3IDE0LjIyMiAwIDIxLjMzM0M4ODAuMzg5IDUyMy4zNzggNzcxLjQ0NyA3MzIuNDQ1IDUxMiA3MzIuNDQ1Yy0yNTkuNDQ5IDAtMzY4LjM4OS0yMDkuMDY3LTM5NS42MjQtMjczLjA2N3pNNTEyIDMwNS43NzhjLTc4LjgzOCAwLTE0My4zNDIgNjQtMTQzLjM0MiAxNDIuMjIyUzQzMy4xNjEgNTkwLjIyMiA1MTIgNTkwLjIyMmM3OC44MzggMCAxNDMuMzQzLTY0IDE0My4zNDMtMTQyLjIyMlM1OTAuODM4IDMwNS43NzggNTEyIDMwNS43Nzh6bTAgMjI3LjU1NWMtNDcuMzAzIDAtODYuMDA1LTM4LjQtODYuMDA1LTg1LjMzM3MzOC43MDItODUuMzMzIDg2LjAwNS04NS4zMzMgODYuMDA1IDM4LjQgODYuMDA1IDg1LjMzMy0zOC43MDIgODUuMzMzLTg2LjAwNSA4NS4zMzN6Ii8+PC9mb250PjwvZGVmcz48L3N2Zz4=) format("svg");font-weight:400;font-style:normal;font-display:block}[class^=icon-],[class*=" icon-"]{font-family:icomoon!important;speak:never;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-icon-close:before{content:"\\e900";color:#fff}.icon-icon-invisible:before{content:"\\e901";color:#fff}.icon-icon-setting:before{content:"\\e902";color:#fff}.icon-icon-visible:before{content:"\\e903";color:#fff}.klinecharts-pro-button{display:flex;flex-direction:row;align-items:center;justify-content:center;outline:none;width:90px;height:36px;font-size:14px;border-radius:2px;border:solid 1px var(--klinecharts-pro-primary-color);cursor:pointer;background-color:initial;margin-left:20px;box-sizing:border-box}.klinecharts-pro-button.confirm{color:#fff;background-color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-button.cancel{color:var(--klinecharts-pro-primary-color);border:solid 1px var(--klinecharts-pro-primary-color)}.klinecharts-pro-checkbox{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:14px;color:var(--klinecharts-pro-text-color);fill:var(--klinecharts-pro-text-color);cursor:pointer}.klinecharts-pro-checkbox .icon{width:20px;height:20px}.klinecharts-pro-checkbox .label{display:inline-block;margin-left:6px}.klinecharts-pro-checkbox.checked{color:var(--klinecharts-pro-primary-color);fill:var(--klinecharts-pro-primary-color)}.klinecharts-pro-list{position:relative;list-style:none;margin:0;padding:0;overflow-y:auto;font-size:14px;color:var(---klinecharts-pro-text-color);min-height:200px}.klinecharts-pro-list::-webkit-scrollbar{width:8px;height:8px}.klinecharts-pro-list::-webkit-scrollbar-thumb{width:8px;height:8px;border-radius:4px;background-color:var(--klinecharts-pro-border-color)}.klinecharts-pro-list li{display:flex;flex-direction:row;align-items:center;height:40px;padding:0 20px;box-sizing:border-box;cursor:pointer}.klinecharts-pro-list li:hover{background-color:var(--klinecharts-pro-hover-background-color)}.klinecharts-pro-modal{position:absolute;display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,.2);z-index:99}.klinecharts-pro-modal .inner{background-color:var(--klinecharts-pro-popover-background-color);box-shadow:0 6px 12px rgba(0,0,0,.3);border-radius:4px}.klinecharts-pro-modal .inner .title-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between;height:52px;padding:0 26px;font-size:18px;font-weight:700;color:var(--klinecharts-pro-text-color);position:relative;box-sizing:border-box;border-bottom:solid 1px var(--klinecharts-pro-border-color)}.klinecharts-pro-modal .inner .title-container .close-icon{width:14px;height:14px;cursor:pointer;fill:var(--klinecharts-pro-text-color)}.klinecharts-pro-modal .inner .title-container .close-icon:hover{fill:var(--klinecharts-pro-primary-color)}.klinecharts-pro-modal .inner .content-container{padding:0 26px;min-height:140px}.klinecharts-pro-modal .inner .button-container{display:flex;flex-direction:row;justify-content:flex-end;padding:20px 20px 26px}.klinecharts-pro-select{position:relative;display:flex;flex-direction:row;align-items:center;cursor:pointer;height:34px;width:100px;outline:none;color:var(--klinecharts-pro-text-color);font-size:14px}.klinecharts-pro-select .selector-container{display:flex;flex-direction:row;align-items:center;height:100%;width:100%;padding:0 10px;justify-content:space-between;border:solid 1px var(--klinecharts-pro-border-color);border-radius:2px;box-sizing:border-box}.klinecharts-pro-select .selector-container .arrow{display:inline;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid var(--klinecharts-pro-text-color);transition:all .2s}.klinecharts-pro-select .drop-down-container{background-color:var(--klinecharts-pro-popover-background-color);box-shadow:0 6px 12px rgba(0,0,0,.3);position:absolute;left:0;width:100%;top:calc(100% + 1px);transition:all .2s;-webkit-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:top;transform-origin:top;opacity:0;z-index:100;border-radius:2px;max-height:200px;overflow-y:auto}.klinecharts-pro-select .drop-down-container ul{list-style:none;margin:0;padding:0;overflow:hidden}.klinecharts-pro-select .drop-down-container ul li{display:flex;flex-direction:row;align-items:center;height:40px;padding:0 10px}.klinecharts-pro-select .drop-down-container ul li:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.klinecharts-pro-select .drop-down-container ul li:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.klinecharts-pro-select .drop-down-container ul li:hover{background-color:var(--klinecharts-pro-hover-background-color)}.klinecharts-pro-select-show .selector-container{border-color:var(--klinecharts-pro-primary-color)!important}.klinecharts-pro-select-show .selector-container .value{color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-select-show .selector-container .arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.klinecharts-pro-select-show .drop-down-container{-webkit-transform:scaleY(1)!important;transform:scaleY(1)!important;opacity:1!important}.klinecharts-pro-input{display:flex;flex-direction:row;align-items:center;position:relative;height:34px;border:solid 1px var(--klinecharts-pro-border-color);border-radius:2px;padding:0 12px;font-size:12px;color:var(--klinecharts-pro-text-color);box-sizing:border-box;cursor:pointer}.klinecharts-pro-input[data-status=focus]{border-color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-input .prefix{display:flex;white-space:nowrap;padding-right:10px}.klinecharts-pro-input .suffix{display:flex;white-space:nowrap;padding-left:10px}.klinecharts-pro-input .value{width:100%;outline:none;border:none;background:transparent;color:var(--klinecharts-pro-text-color);font-size:14px;cursor:pointer}.klinecharts-pro-loading{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;left:0;top:0;width:100%;height:100%;z-index:50;color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-loading .circle1,.klinecharts-pro-loading .circle2,.klinecharts-pro-loading .circle3{display:inline-block;width:10px;height:10px;pointer-events:none;border-radius:50%;background-color:currentColor;-webkit-animation:loading-anim .8s ease-in-out alternate infinite;animation:loading-anim .8s ease-in-out alternate infinite}.klinecharts-pro-loading .circle1{-webkit-animation-delay:.48s;animation-delay:.48s}.klinecharts-pro-loading .circle2{margin-left:.2em;margin-right:.2em;-webkit-animation-delay:.32s;animation-delay:.32s}.klinecharts-pro-loading .circle3{-webkit-animation-delay:.16s;animation-delay:.16s}@-webkit-keyframes loading-anim{0%{top:0}to{margin-top:-2.2em}}@keyframes loading-anim{0%{top:0}to{margin-top:-2.2em}}.klinecharts-pro-empty{display:flex;flex-direction:column;position:absolute;left:0;top:0;width:100%;height:100%;justify-content:center;align-items:center;z-index:99;fill:var(--klinecharts-pro-text-second-color);color:var(--klinecharts-pro-text-second-color)}.klinecharts-pro-empty .icon{width:50px;height:50px}.klinecharts-pro-switch{display:flex;flex-direction:row;position:relative;width:36px;height:18px;border-radius:9px;cursor:pointer}.klinecharts-pro-switch .thumb{display:inline-block;position:absolute;top:2px;width:14px;height:14px;border-radius:50%;z-index:10;background-color:#fff;transition:all .2s}.klinecharts-pro-switch.turn-off{background-color:var(--klinecharts-pro-border-color)}.klinecharts-pro-switch.turn-off .thumb{left:2px}.klinecharts-pro-switch.turn-on{background-color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-switch.turn-on .thumb{left:20px}.klinecharts-pro-period-bar{display:flex;flex-direction:row;align-items:center;height:38px;width:100%;box-sizing:border-box;border-bottom:solid 1px var(--klinecharts-pro-border-color)}.klinecharts-pro-period-bar .menu-container{display:flex;height:100%;flex-direction:row;justify-content:center;align-items:center;width:52px;box-sizing:border-box;border-right:solid 1px var(--klinecharts-pro-border-color)}.klinecharts-pro-period-bar .menu-container svg{fill:var(--klinecharts-pro-text-color);width:28px;height:28px;cursor:pointer;transition:all .2s}.klinecharts-pro-period-bar .menu-container svg.rotate{-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-transform-origin:center;transform-origin:center}.klinecharts-pro-period-bar .symbol{display:flex;flex-direction:row;align-items:center;height:100%;font-size:18px;padding:0 12px;font-weight:700;box-sizing:border-box;border-right:solid 1px var(--klinecharts-pro-border-color);cursor:pointer}.klinecharts-pro-period-bar .symbol img{width:20px;height:20px;margin-right:6px}.klinecharts-pro-period-bar .item{transition:all .2s;box-sizing:border-box;cursor:pointer;fill:var(--klinecharts-pro-text-color)}.klinecharts-pro-period-bar .item.selected{background-color:var(--klinecharts-pro-selected-color)!important;color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-period-bar .period{padding:2px 6px;margin:0 4px;border-radius:2px}.klinecharts-pro-period-bar .period:hover{background-color:var(--klinecharts-pro-hover-background-color)}.klinecharts-pro-period-bar .period:first-child{margin-left:8px}.klinecharts-pro-period-bar .symbol+.period,.klinecharts-pro-period-bar .menu-container+.period{margin-left:12px}.klinecharts-pro-period-bar .tools{display:flex;flex-direction:row;align-items:center;justify-content:center;height:100%;padding:0 12px;border-right:solid 1px var(--klinecharts-pro-border-color)}.klinecharts-pro-period-bar .tools:hover{fill:var(--klinecharts-pro-primary-color);color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-period-bar .tools svg{width:16px;height:16px;margin-right:4px}.klinecharts-pro-period-bar .period+.tools{border-left:solid 1px var(--klinecharts-pro-border-color);margin-left:8px}.klinecharts-pro-drawing-bar{width:52px;height:100%;box-sizing:border-box;border-right:solid 1px var(--klinecharts-pro-border-color)}.klinecharts-pro-drawing-bar .item{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:100%;margin-top:8px;cursor:pointer;color:var(--klinecharts-pro-text-second-color);fill:var(--klinecharts-pro-text-second-color);stroke:var(--klinecharts-pro-text-second-color)}.klinecharts-pro-drawing-bar .item .icon-overlay{width:32px;height:32px;border-radius:2px;transition:all .2s}.klinecharts-pro-drawing-bar .item .icon-overlay:hover{background-color:var(--klinecharts-pro-hover-background-color)}.klinecharts-pro-drawing-bar .item .icon-overlay.selected{background-color:var(--klinecharts-pro-selected-color)!important;fill:var(--klinecharts-pro-primary-color);stroke:var(--klinecharts-pro-primary-color)}.klinecharts-pro-drawing-bar .item .icon-arrow{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;top:0;right:0;height:32px;width:10px;opacity:0;transition:all .2s;border-top-left-radius:2px;border-bottom-left-radius:2px;z-index:10}.klinecharts-pro-drawing-bar .item .icon-arrow svg{width:4px;height:6px;transition:all .2s}.klinecharts-pro-drawing-bar .item .icon-arrow svg.rotate{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.klinecharts-pro-drawing-bar .item .icon-arrow:hover{background-color:var(--klinecharts-pro-hover-background-color)}.klinecharts-pro-drawing-bar .item .list{position:absolute;top:0;white-space:nowrap;left:calc(100% + 1px);background-color:var(--klinecharts-pro-popover-background-color);z-index:99;box-shadow:0 6px 12px rgba(0,0,0,.3);min-height:auto;max-height:320px}.klinecharts-pro-drawing-bar .item .list li{padding-left:16px}.klinecharts-pro-drawing-bar .item .list li .icon-overlay:hover{background-color:initial}.klinecharts-pro-drawing-bar .item:hover .icon-arrow{opacity:1}.klinecharts-pro-drawing-bar .split-line{display:block;width:100%;height:1px;background-color:var(--klinecharts-pro-border-color);margin-top:8px}.klinecharts-pro-indicator-modal-list{margin-left:-20px;margin-right:-20px;height:440px;position:relative}.klinecharts-pro-indicator-modal-list .title{position:-webkit-sticky;position:sticky;top:0;background-color:var(--klinecharts-pro-popover-background-color);font-size:16px;color:var(--klinecharts-pro-text-color);font-weight:400}.klinecharts-pro-indicator-modal-list .title:hover{background-color:var(--klinecharts-pro-popover-background-color)}.klinecharts-pro-indicator-modal-list .row:hover .checkbox{fill:var(--klinecharts-pro-primary-color);color:var(--klinecharts-pro-primary-color)}.klinecharts-pro-setting-modal-content{display:grid;grid-template-columns:auto auto auto auto;grid-row-gap:20px;margin-top:20px;margin-bottom:30px;align-items:center}.klinecharts-pro-indicator-setting-modal-content{display:grid;grid-template-columns:auto auto;grid-row-gap:20px;margin-top:20px;align-items:center}.klinecharts-pro-symbol-search-modal-input{margin:20px 0 10px;height:40px}.klinecharts-pro-symbol-search-modal-input svg{width:18px;height:18px;fill:var(--klinecharts-pro-text-second-color)}.klinecharts-pro-symbol-search-modal-input .value{font-size:16px}.klinecharts-pro-symbol-search-modal-list{height:400px;margin-left:-20px;margin-right:-20px}.klinecharts-pro-symbol-search-modal-list li{justify-content:space-between}.klinecharts-pro-symbol-search-modal-list li div{display:flex;flex-direction:row;align-items:center}.klinecharts-pro-symbol-search-modal-list li div img{width:16px;height:16px;margin-right:6px}.klinecharts-pro-symbol-search-modal-list li div span{width:300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.klinecharts-pro{--klinecharts-pro-primary-color:#1677ff;--klinecharts-pro-hover-background-color:rgba(22,119,255,0.15);--klinecharts-pro-background-color:#fff;--klinecharts-pro-popover-background-color:#fff;--klinecharts-pro-text-color:#051441;--klinecharts-pro-text-second-color:#76808f;--klinecharts-pro-border-color:#ebedf1;--klinecharts-pro-selected-color:rgba(22,119,255,0.15);position:relative;display:flex;flex-direction:column;color:var(--klinecharts-pro-text-color);background-color:var(--klinecharts-pro-background-color);font-size:14px;height:80vh}.klinecharts-pro[data-theme=dark]{--klinecharts-pro-hover-background-color:rgba(22,119,255,0.15);--klinecharts-pro-background-color:#151517;--klinecharts-pro-popover-background-color:#1c1c1f;--klinecharts-pro-text-color:#f8f8f8;--klinecharts-pro-text-second-color:#929aa5;--klinecharts-pro-border-color:#292929}.klinecharts-pro-watermark{position:absolute;left:50%;top:50%;z-index:1;-webkit-transform:translate(-50%) translateY(-50%);transform:translate(-50%) translateY(-50%)}.klinecharts-pro-watermark .logo{width:160px;height:184px;fill:var(--klinecharts-pro-border-color)}.klinecharts-pro-price-unit{display:none;position:absolute;top:50%;z-index:30;top:4px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);border-radius:4px;font-size:10px;font-weight:700;padding:1px 4px;color:var(--klinecharts-pro-text-second-color);box-shadow:0 3px 3px rgba(50,50,50,.3);border:solid 1px var(--klinecharts-pro-border-color);background-color:var(--klinecharts-pro-background-color)}.klinecharts-pro-load-icon{position:absolute;left:0;height:0;z-index:-1;opacity:0}.klinecharts-pro-content{position:relative;display:flex;flex-direction:row;width:100%;height:calc(100% - 38px)}.klinecharts-pro-widget{width:calc(100% - 52px);height:100%;margin-left:0}.klinecharts-pro-widget[data-drawing-bar-visible=false]{width:100%}',""]),t.exports=e},8616:function(t,e,a){"use strict";var i=a("07f8"),r=a.n(i);r.a},"861a":function(t,e,a){"use strict";a.r(e);var i=a("8088"),r=a("db6c");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("df4d");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"83991a1a",null,!1,i["a"],void 0);e["default"]=o.exports},8653:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},"87ca":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"uni-forms"},[e("v-uni-form",[this._t("default")],2)],1)},r=[]},"87de":function(t,e,a){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"87df":function(t,e,a){"use strict";a.r(e);var i=a("ae2e"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"882c":function(t,e,a){"use strict";a.r(e);var i=a("3f83"),r=a("7e72");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=o.exports},8845:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("da59")),n={name:"u-line",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{lineStyle:function(){var t={};return t.margin=this.margin,"row"===this.direction?(t.borderBottomWidth="1px",t.borderBottomStyle=this.dashed?"dashed":"solid",t.width=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleY(0.5)")):(t.borderLeftWidth="1px",t.borderLeftStyle=this.dashed?"dashed":"solid",t.height=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleX(0.5)")),t.borderColor=this.color,uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}}};e.default=n},"896c":function(t,e,a){"use strict";var i=a("13ae"),r=a.n(i);r.a},"89f8":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-4070810b], uni-scroll-view[data-v-4070810b], uni-swiper-item[data-v-4070810b]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-upload[data-v-4070810b]{display:flex;flex-direction:column;flex:1}.u-upload__wrap[data-v-4070810b]{display:flex;flex-direction:row;flex-wrap:wrap;flex:1}.u-upload__wrap__preview[data-v-4070810b]{border-radius:2px;margin:0 8px 8px 0;position:relative;overflow:hidden;display:flex;flex-direction:row}.u-upload__wrap__preview__image[data-v-4070810b]{width:80px;height:80px}.u-upload__wrap__preview__other[data-v-4070810b]{width:80px;height:80px;background-color:#f2f2f2;flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}.u-upload__wrap__preview__other__text[data-v-4070810b]{font-size:11px;color:#909193;margin-top:2px}.u-upload__deletable[data-v-4070810b]{position:absolute;top:0;right:0;background-color:#373737;height:14px;width:14px;display:flex;flex-direction:row;border-bottom-left-radius:100px;align-items:center;justify-content:center;z-index:3}.u-upload__deletable__icon[data-v-4070810b]{position:absolute;-webkit-transform:scale(.7);transform:scale(.7);top:0;right:0;top:1px;right:0}.u-upload__success[data-v-4070810b]{position:absolute;bottom:0;right:0;display:flex;flex-direction:row;border-style:solid;border-top-color:transparent;border-left-color:transparent;border-bottom-color:#5ac725;border-right-color:#5ac725;border-width:9px;align-items:center;justify-content:center}.u-upload__success__icon[data-v-4070810b]{position:absolute;-webkit-transform:scale(.7);transform:scale(.7);bottom:-10px;right:-10px}.u-upload__status[data-v-4070810b]{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;align-items:center;justify-content:center}.u-upload__status__icon[data-v-4070810b]{position:relative;z-index:1}.u-upload__status__message[data-v-4070810b]{font-size:12px;color:#fff;margin-top:5px}.u-upload__button[data-v-4070810b]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:80px;height:80px;background-color:#f4f5f7;border-radius:2px;margin:0 8px 8px 0;box-sizing:border-box}.u-upload__button__text[data-v-4070810b]{font-size:11px;color:#909193;margin-top:2px}.u-upload__button--hover[data-v-4070810b]{background-color:#e6e7e9}.u-upload__button--disabled[data-v-4070810b]{opacity:.5}',""]),t.exports=e},"8ab5":function(t,e,a){var i=a("5335").getSymbolSize;e.getPositions=function(t){var e=i(t);return[[0,0],[e-7,0],[0,e-7]]}},"8ab7":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-686b42e6], uni-scroll-view[data-v-686b42e6], uni-swiper-item[data-v-686b42e6]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),t.exports=e},"8af1":function(t,e,a){a("aa9c"),a("dc69");var i=a("5335").getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];for(var e=Math.floor(t/7)+2,a=i(t),r=145===a?26:2*Math.ceil((a-13)/(2*e-2)),n=[a-7],s=1;s<e-1;s++)n[s]=n[s-1]-r;return n.push(6),n.reverse()},e.getPositions=function(t){for(var a=[],i=e.getRowColCoords(t),r=i.length,n=0;n<r;n++)for(var s=0;s<r;s++)0===n&&0===s||0===n&&s===r-1||n===r-1&&0===s||a.push([i[n],i[s]]);return a}},"8b6b":function(t,e,a){a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),a("f7a5");var i=a("da21");e.mul=function(t,e){for(var a=new Uint8Array(t.length+e.length-1),r=0;r<t.length;r++)for(var n=0;n<e.length;n++)a[r+n]^=i.mul(t[r],e[n]);return a},e.mod=function(t,e){var a=new Uint8Array(t);while(a.length-e.length>=0){for(var r=a[0],n=0;n<e.length;n++)a[n]^=i.mul(e[n],r);var s=0;while(s<a.length&&0===a[s])s++;a=a.slice(s)}return a},e.generateECPolynomial=function(t){for(var a=new Uint8Array([1]),r=0;r<t;r++)a=e.mul(a,new Uint8Array([1,i.exp(r)]));return a}},"8b76":function(t,e,a){"use strict";a.r(e);var i=a("dc2f"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"8bce":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-5052f25e]{background-color:#fff}body.?%PAGE?%[data-v-5052f25e]{background-color:#fff}uni-page[data-v-5052f25e]{height:auto!important}.u-input[data-v-fdbb9fe6][data-v-5052f25e]{padding:11px 9px!important}.bsone[data-v-5052f25e]{background:#1a1c24!important;border:1px solid #2f3142!important}[data-v-5052f25e] .u-upload__deletable{background-color:initial}',""]),t.exports=e},"8c6f":function(t,e,a){"use strict";a.r(e);var i=a("c05b"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"8ca8":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("2634")),n=i(a("2fdc")),s=i(a("45e3")),o={data:function(){return{urls:"",erwims:""}},mounted:function(){this.makeQRCode(this.$store.state.users.extension_code);uni.setNavigationBarTitle({title:this.$t("invite.invite_friends")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},computed:{i18n:function(){return this.$t("invite")}},methods:{obutton:function(){this.seccendCopy()},seccendCopy:function(){var t=this;this.$copyText(this.erwims).then((function(e){uni.$u.toast(t.$t("out.successful"))}),(function(t){uni.$u.toast("复制失败")}))},makeQRCode:function(t){var e=this;return(0,n.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.erwims="http://mobile.worldbit.finance/#/pages/registerTwo/registerTwo?invite_code="+e.$store.state.users.extension_code,t.next=3,s.default.toDataURL("http://mobile.worldbit.finance/#/pages/registerTwo/registerTwo?invite_code="+e.$store.state.users.extension_code);case 3:e.urls=t.sent;case 4:case"end":return t.stop()}}),t)})))()}}};e.default=o},"8d12":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-e8b3007e], uni-scroll-view[data-v-e8b3007e], uni-swiper-item[data-v-e8b3007e]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-modal[data-v-e8b3007e]{width:%?650?%;border-radius:6px;overflow:hidden}.u-modal__title[data-v-e8b3007e]{font-size:16px;font-weight:700;color:#606266;text-align:center;padding-top:25px}.u-modal__content[data-v-e8b3007e]{padding:12px 25px 25px 25px;display:flex;flex-direction:row;justify-content:center}.u-modal__content__text[data-v-e8b3007e]{font-size:15px;color:#606266;flex:1}.u-modal__button-group[data-v-e8b3007e]{display:flex;flex-direction:row}.u-modal__button-group--confirm-button[data-v-e8b3007e]{flex-direction:column;padding:0 25px 15px 25px}.u-modal__button-group__wrapper[data-v-e8b3007e]{flex:1;display:flex;flex-direction:row;justify-content:center;align-items:center;height:48px}.u-modal__button-group__wrapper--confirm[data-v-e8b3007e], .u-modal__button-group__wrapper--only-cancel[data-v-e8b3007e]{border-bottom-right-radius:6px}.u-modal__button-group__wrapper--cancel[data-v-e8b3007e], .u-modal__button-group__wrapper--only-confirm[data-v-e8b3007e]{border-bottom-left-radius:6px}.u-modal__button-group__wrapper--hover[data-v-e8b3007e]{background-color:#f3f4f6}.u-modal__button-group__wrapper__text[data-v-e8b3007e]{color:#606266;font-size:16px;text-align:center}',""]),t.exports=e},"8e54":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{ref:"u-list-item-"+this.anchor,staticClass:"u-list-item",class:["u-list-item-"+this.anchor],attrs:{anchor:"u-list-item-"+this.anchor}},[this._t("default")],2)},r=[]},9004:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==(0,i.default)(t)&&"function"!==typeof t)return{default:t};var a=r(e);if(a&&a.has(t))return a.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var h=s?Object.getOwnPropertyDescriptor(t,o):null;h&&(h.get||h.set)?Object.defineProperty(n,o,h):n[o]=t[o]}n["default"]=t,a&&a.set(t,n);return n},a("bf0f"),a("18f7"),a("d0af"),a("de6c"),a("6a54"),a("9a2c");var i=function(t){return t&&t.__esModule?t:{default:t}}(a("fcf3"));function r(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,a=new WeakMap;return(r=function(t){return t?a:e})(t)}},"90bb":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"uni-page-body[data-v-b5b50a08]{background-color:#f7f8fa}body.?%PAGE?%[data-v-b5b50a08]{background-color:#f7f8fa}.wrap[data-v-b5b50a08]{padding:%?24?%}.u-border[data-v-b5b50a08]{border-color:#d2d6e8!important}.u-button--info[data-v-3bf2dba7][data-v-b5b50a08]{color:#4b53f5;border-color:#ebedf0;border-width:0;font-weight:700}",""]),t.exports=e},"912b":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uPopup:a("4b98").default,uList:a("1bd6").default,uListItem:a("5023").default,uCell:a("06fd").default,uAvatar:a("cbd3").default,uButton:a("e196").default,uNumberBox:a("0c82").default,uModal:a("3061").default,uniPopup:a("9263").default,uniPopupDialog:a("c2aa").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-header",{staticStyle:{display:"flex","justify-content":"space-between",height:"50px",padding:"9px"}},[i("div",{staticStyle:{display:"flex",overflow:"hidden","overflow-x":"scroll","white-space":"nowrap"}},[i("div",{staticClass:"activeNo"},[i("el-image",{staticStyle:{width:"55px",height:"55px"},attrs:{src:a("d123")}})],1),i("div",{class:{active:t.isActive.productList,activeNo:!t.isActive.productList},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleColor("productList")}}},[t._v(t._s(t.i18nIndent.product_list))]),i("div",{class:{active:t.isActive.order,activeNo:!t.isActive.order},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleColor("order")}}},[t._v(t._s(t.i18nIndent.place_order))]),i("div",{staticStyle:{display:"flex"}},t._l(t.timePeriodList,(function(e,a){return i("div",{key:a,class:{active:t.timePeriod===e.value,activeNo:t.timePeriod!==e.value},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ChangePeriod(e.value)}}},[t._v(t._s(e.label))])})),0)]),i("div",{staticClass:"activeNo inner-hover",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showIndex=!0}}},[t._v(t._s(t.i18nIndent.indicator))]),i("u-popup",{attrs:{show:t.showIndex,mode:"center",closeable:!0,title:"hello"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.closeIndex.apply(void 0,arguments)},open:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[i("el-scrollbar",{staticStyle:{height:"500px",padding:"20px"}},[i("div",[i("h3",[t._v(t._s(t.i18nIndent.indicator))]),t._l(t.indicators,(function(e,a){return i("div",{key:a,staticClass:"custom-checkbox",staticStyle:{display:"flex","flex-direction":"column",width:"300px"}},[i("div",{staticClass:"klinecharts-pro-check-box",class:{choiceIndicator:e.visible},staticStyle:{height:"40px"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleIndicator(e.name)}}},[i("el-checkbox",{model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"item.visible"}},[t._v(t._s(e.name))])],1)])}))],2),i("div",[i("h3",[t._v(t._s(t.i18nIndent.Secondary_graph_metrics))]),t._l(t.indicatorsPicture,(function(e,a){return i("div",{key:a,staticClass:"custom-checkbox",staticStyle:{display:"flex","flex-direction":"column",width:"300px"}},[i("div",{staticClass:"klinecharts-pro-check-box",class:{choiceIndicator:e.visible},staticStyle:{height:"40px"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toggleIndicatorPicture(e.name)}}},[i("el-checkbox",{model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"item.visible"}},[t._v(t._s(e.name))])],1)])}))],2)])],1),i("div",{staticStyle:{display:"flex",width:"355px","justify-content":"space-evenly"}},[i("el-select",{staticStyle:{width:"40%"},attrs:{size:"small",type:"success"},model:{value:t.clangs.name,callback:function(e){t.$set(t.clangs,"name",e)},expression:"clangs.name"}},t._l(t.language,(function(e,a){return i("el-option",{key:a,attrs:{label:e.name,value:e.name}},[[i("div",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setLang(e)}}},[t._v(t._s(e.name))])]],2)})),1),"已登录"==t.VirtualAccounts?i("span",{staticStyle:{"margin-left":"20px",color:"#000000","font-size":"14px",height:"32px","line-height":"32px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.personalInformationSwitch=!0}}},[t._v(t._s(t.users.account_number))]):t._e(),"虚拟账号"==t.VirtualAccounts?i("div",{staticStyle:{"margin-left":"20px",color:"#000000","font-size":"14px",display:"flex",height:"32px","line-height":"32px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.personalInformationSwitch=!0}}},[t._v(t._s(t.i18nUsers.mock_account))]):t._e(),"未登录"==t.VirtualAccounts?i("div",{staticStyle:{"margin-left":"20px",color:"#000000","font-size":"14px",display:"flex",height:"32px","line-height":"32px"}},[i("p",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginSwitch=!0}}},[t._v(t._s(t.i18nLogin.sign_in))]),t._v("丨"),i("p",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.registerSwitch=!0}}},[t._v(t._s(t.i18nRegister.register))])]):t._e()],1)],1),i("el-scrollbar",{staticStyle:{height:"90vh"}},[i("el-main",{staticClass:"containerPC",staticStyle:{display:"flex","flex-direction":"row",height:"750px"}},[i("div",{staticClass:"button-container nowPC"},t._l(t.overlayItems,(function(e,a){return i("div",{key:a,staticClass:"outer-div"},[i("div",[i("div",{staticStyle:{width:"43px",height:"50px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},[i("el-image",{staticClass:"inner-hover",staticStyle:{width:"33px",height:"33px"},attrs:{src:e.SelectInformation.imgUrl},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.createOverlay(e.SelectInformation.key,e.SelectInformation,a)}}}),i("div",{staticClass:"inner-hover",staticStyle:{width:"8px",height:"100%"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toggleInnerDiv(a)}}})],1),e.windowSwitch?i("div",{staticClass:"inner-div"},t._l(e.information,(function(e){return i("p",{key:e.key,staticClass:"inner-div-item",staticStyle:{height:"33px",display:"flex"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.createOverlay(e.key,e,a)}}},[i("el-image",{staticStyle:{width:"33px",height:"33px"},attrs:{src:e.imgUrl}}),t._v(t._s(e.text))],1)})),0):t._e()])])})),0),t.isActive.productList?i("el-scrollbar",{staticClass:"DrawerPage leftPC",staticStyle:{width:"350px",height:"75vh"}},[i("v-uni-view",{staticClass:"jypzs"},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"5px 16px"}},[i("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"搜索",size:"small",clearable:!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.checkInputs.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.checkInputs.apply(void 0,arguments)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),i("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择",size:"small",clearable:!0},on:{clear:function(e){arguments[0]=e=t.$handleEvent(e),t.itemCliks(null)}},model:{value:t.value222,callback:function(e){t.value222=e},expression:"value222"}},t._l(t.dataList,(function(e,a){return i("el-option",{key:a,attrs:{label:e.name,value:a,cle:!0}},[[i("div",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.itemCliks(e)}}},[t._v(t._s(e.name))])]],2)})),1)],1),i("v-uni-view",{staticClass:"u-page",staticStyle:{"margin-top":"0px",width:"100%"}},[i("u-list",{staticClass:"sfds",staticStyle:{width:"100%",overflow:"hidden"}},t._l(t.resData,(function(e,a){return t.resData?i("u-list-item",{key:a},["while"==t.$store.state.bgColor?i("u-cell",{staticStyle:{padding:"0px 8px !important","border-bottom":"1px solid rgb(225, 226, 227)"}},[i("u-avatar",{attrs:{slot:"icon",shape:"square",size:"55",src:t.domain+"/storage/"+e.logo,customStyle:"margin: -3px 1px -3px 0"},slot:"icon"}),"while"==t.$store.state.bgColor?i("div",{staticStyle:{display:"flex","margin-left":"5px","justify-content":"center","align-items":"center","font-weight":"bold"},attrs:{slot:"title"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickItems(e)}},slot:"title"},[i("p",{staticClass:"u-cell-text",staticStyle:{"text-align":"left","font-size":"13px","font-weight":"bold",flex:"1"}},[t._v(t._s(e.show_name))]),1==e.currency.opening?i("p",{staticClass:"u-cell-text",staticStyle:{flex:"1",display:"flex","justify-content":"center","text-align":"center","font-size":"13px","font-weight":"bold","padding-left":"10px"}}):t._e(),12==t.$utils.getColor(e.change)?i("p",{staticClass:"u-cell-text",staticStyle:{height:"20px",color:"var(--mainColor)"}},[t._v(t._s(Number(e.now_price).toFixed(2)))]):t._e(),13==t.$utils.getColor(e.change)?i("p",{staticClass:"u-cell-text",staticStyle:{height:"20px",color:"#f23c48"}},[t._v(t._s(Number(e.now_price).toFixed(2)))]):t._e(),14==t.$utils.getColor(e.change)?i("p",{staticClass:"u-cell-text",staticStyle:{height:"20px",color:"#f23c48"}},[t._v(t._s(Number(e.now_price).toFixed(2)))]):t._e(),i("dir",[0==e.currency.opening?i("div",{staticStyle:{color:"#ffffff",flex:"1","background-color":"#cbcbcb",width:"80px",height:"30px","border-radius":"8px","line-height":"30px","text-align":"center"}},[t._v(t._s(t.$t("market.closed")))]):t._e()]),1==e.currency.opening?i("div",[13==t.$utils.getColor(e.change)?i("div",{staticClass:"u-cell-text",staticStyle:{color:"#ffffff",flex:"1","background-color":"#f23c48",width:"80px",height:"30px","border-radius":"8px","line-height":"30px","text-align":"center"}},[t._v(t._s(e.change)+"%")]):t._e(),12==t.$utils.getColor(e.change)?i("div",{staticClass:"u-cell-text",staticStyle:{color:"#ffffff",flex:"1","background-color":"var(--mainColor)",width:"80px",height:"30px","border-radius":"8px","line-height":"30px","text-align":"center"}},[t._v(t._s(e.change)+"%")]):t._e(),14==t.$utils.getColor(e.change)?i("div",{staticClass:"u-cell-text",staticStyle:{color:"#ffffff",flex:"1","background-color":"#f23c48",width:"80px",height:"30px","border-radius":"8px","line-height":"30px","text-align":"center"}},[t._v(t._s(e.change)+"%")]):t._e()]):t._e()],1):t._e()],1):t._e()],1):t._e()})),1)],1)],1)],1):t._e(),i("div",{staticClass:"middlePC",staticStyle:{height:"750px"}},[i("div",{staticStyle:{height:"700px"},attrs:{id:"container"}},[i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"k-line-chart"}},[i("div",{attrs:{id:"candle_pane"}})])])]),t.isActive.order?i("div",{staticClass:"rightPC",staticStyle:{width:"324px",height:"100%"}},[i("div",{staticStyle:{width:"324px",padding:"10px 20px","background-color":"var(--mainColor)","box-shadow":"0 0 10px #a1a1a11f","margin-bottom":"18px","border-radius":"8px",color:"#ffffff",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","box-sizing":"border-box"}},[t.users.net_worth?i("p",{staticStyle:{width:"284px",height:"21px"}},[t._v(t._s(t.users.id))]):t._e(),"未登录"!==t.VirtualAccounts?i("p",{staticStyle:{margin:"10px 0","font-weight":"bold",color:"#ffffff","font-size":"14px"}},[t._v("UID:"+t._s(t.users.id))]):t._e(),i("p",{staticStyle:{width:"284px",height:"21px"}},[t._v(t._s(t.i18n.balance))]),"未登录"!==t.VirtualAccounts?i("p",{staticStyle:{width:"284px",height:"42px","line-height":"42px","font-size":"20px"}},[t._v(t._s(t.users.usdt.toFixed(2)))]):t._e(),"未登录"==t.VirtualAccounts?i("p",{staticStyle:{width:"284px",height:"42px","font-size":"33px","line-height":"42px"}},[t._v("----")]):t._e()]),i("el-tabs",{attrs:{type:"border-card"},model:{value:t.currentNav,callback:function(e){t.currentNav=e},expression:"currentNav"}},[i("el-tab-pane",{attrs:{label:t.i18n.contracts,name:"0"}},[i("div",{staticStyle:{padding:"5px 20px","box-shadow":"0 0 10px #a1a1a11f"}},[i("p",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.currency_name))]),t.symbolQuotation.now_price?i("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t._f("setPrecision")(t.symbolQuotation.now_price,t.symbolQuotation.precision_length)))]):t._e(),i("p",{staticStyle:{width:"100%","margin-top":"10px"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.switchingTransactions,callback:function(e){t.switchingTransactions=e},expression:"switchingTransactions"}},t._l(t.switchingTransactionsOptions,(function(e){return i("el-option",{key:e.name,attrs:{label:e.i18n,value:e.name}},[[t._v(t._s(e.i18n))]],2)})),1)],1),"marketPrice"===t.switchingTransactions?i("div",[i("div",{staticStyle:{display:"flex","flex-direction":"column",width:"100%","margin-top":"10px"}},[i("p",{staticStyle:{flex:"1","font-size":"15px",color:"black","margin-bottom":"5px"}},[t._v(t._s(t.i18n.multiplier))]),i("p",{staticStyle:{width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.multiple1,callback:function(e){t.multiple1=e},expression:"multiple1"}},t._l(t.multiples,(function(t){return i("el-option",{key:t.multiples,attrs:{label:t.multiples,value:t.multiples}})})),1)],1)]),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.i18n.stop_loss))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.hyzs,callback:function(e){t.hyzs=e},expression:"hyzs"}})],1)]),i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",color:t.hyzsc,min:0,disabled:t.hyzsd},model:{value:t.stop_loss_price,callback:function(e){t.stop_loss_price=e},expression:"stop_loss_price"}})],1)]),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.i18n.take_prodit))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.hyzy,callback:function(e){t.hyzy=e},expression:"hyzy"}})],1)]),i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",color:t.hyzyc,min:0,disabled:t.hyzyd},model:{value:t.target_profit_price,callback:function(e){t.target_profit_price=e},expression:"target_profit_price"}})],1)]),i("div",{staticClass:"composings",staticStyle:{width:"100%",display:"flex","flex-direction":"column","margin-top":"10px"}},[i("div",{staticStyle:{display:"flex",flex:"1",width:"50%","flex-direction":"column"}},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.i18n.buy_quantity))])]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",step:.1,color:t.hyzyc,min:t.symbolQuotation.lever_min_share,max:t.symbolQuotation.lever_max_share},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)]):t._e()]),"while"==t.$store.state.bgColor?i("div",{staticStyle:{height:"3rpx","background-color":"#F5F5F4","margin-top":"20px"}}):t._e(),"black"==t.$store.state.bgColor?i("div",{staticStyle:{height:"3rpx","background-color":"#424656","margin-top":"20px"}}):t._e(),i("div",{staticStyle:{width:"100%","font-size":"12px","font-weight":"bold"}},[i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.each))]),i("v-uni-text",[t._v(t._s(t.i18n.each)+"="+t._s(this.each_piece)+t._s(this.currency_name)+"/"+t._s(this.legal_name))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_commission))]),i("v-uni-text",[t._v(t._s(t.handlingFee))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_margin))]),i("v-uni-text",[t._v(t._s(t.margin))])],1)]),i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{display:"flex",width:"100%","padding-top":"10px"}},[i("u-button",{staticStyle:{"border-radius":"100rpx",background:"var(--mainColor)",border:"0",width:"49%","font-size":"12px",height:"35px",color:"#FFFFFF","line-height":"45px"},attrs:{loading:t.xdloading,loadingText:"",disabled:"未登录"==t.VirtualAccounts},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(1,1)}}},[t._v(t._s(t.i18n.buy_up))]),i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#F23C48",border:"0",width:"49%",height:"35px","line-height":"45px","font-size":"12px","margin-left":"13px",color:"#FFFFFF"},attrs:{loading:t.xdmloading,loadingText:"",disabled:"未登录"==t.VirtualAccounts},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(2,1)}}},[t._v(t._s(t.$t("trade.buy_down")))])],1)])]):t._e(),"pendingOrder"===t.switchingTransactions?i("div",[i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.price))])]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input",{staticStyle:{height:"25px"},attrs:{disabledColor:"#ffffff",placeholder:"",inputAlign:"center",suffixIcon:"arrow-right",suffixIconStyle:"color: #909399;font-size:16px;font-weight: bold;"},model:{value:t.target_price,callback:function(e){t.target_price=e},expression:"target_price"}})],1)]):t._e(),i("div",{staticStyle:{display:"flex","flex-direction":"column",width:"284px","margin-top":"10px"}},[i("p",{staticStyle:{flex:"1","font-size":"15px",color:"black"}},[t._v(t._s(t.i18n.multiplier))]),i("p",{staticStyle:{width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.multiple1,callback:function(e){t.multiple1=e},expression:"multiple1"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.stop_loss))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.ghyzs,callback:function(e){t.ghyzs=e},expression:"ghyzs"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,disabled:t.ghyzsd},model:{value:t.gstop_loss_price,callback:function(e){t.gstop_loss_price=e},expression:"gstop_loss_price"}})],1)]):t._e(),i("div",{staticStyle:{display:"flex",flex:"1",width:"100%","justify-content":"space-between","margin-top":"10px"}},[i("p",[t._v(t._s(t.i18n.take_prodit))]),i("p",[i("el-switch",{attrs:{space:"2",activeColor:"#0166fc",size:"30",min:0},model:{value:t.ghyzy,callback:function(e){t.ghyzy=e},expression:"ghyzy"}})],1)]),"while"==t.$store.state.bgColor?i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,disabled:t.ghyzyd},model:{value:t.gtarget_profit_price,callback:function(e){t.gtarget_profit_price=e},expression:"gtarget_profit_price"}})],1)]):t._e(),i("div",{staticClass:"composings",staticStyle:{width:"100%",display:"flex","flex-direction":"column","margin-top":"10px"}},[i("div",{staticStyle:{display:"flex",flex:"1",width:"50%","flex-direction":"column"}},[i("p",[t._v(t._s(t.i18n.buy_quantity))])]),i("div",{staticClass:"wnss",staticStyle:{width:"100%"}},[i("p",[i("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",step:.1,min:t.symbolQuotation.lever_min_share,max:t.symbolQuotation.lever_max_share},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)}},model:{value:t.gnumber,callback:function(e){t.gnumber=e},expression:"gnumber"}})],1)])]),i("div",{staticStyle:{height:"3rpx","background-color":"#F5F5F4","margin-top":"20px"}}),i("div",{staticStyle:{width:"100%","font-size":"12px","font-weight":"bold"}},[i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.each))]),i("v-uni-text",[t._v(t._s(t.i18n.each)+"="+t._s(this.each_piece)+t._s(this.currency_name)+"/"+t._s(this.legal_name))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_commission))]),i("v-uni-text",[t._v(t._s(t.ghandlingFee))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.estimated_margin))]),i("v-uni-text",[t._v(t._s(t.gmargin))])],1),i("div",{staticStyle:{display:"flex",height:"35px","line-height":"35px"}},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(t.i18n.balance))]),i("v-uni-text",[t._v(t._s(t.users.usdt))])],1)]),i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{display:"flex",width:"100%","padding-top":"10px"}},[i("u-button",{staticStyle:{"border-radius":"100rpx",background:"var(--mainColor)",border:"0",width:"49%","font-size":"12px",height:"35px",color:"#FFFFFF","line-height":"45px"},attrs:{loading:t.gdloading,disabled:"未登录"==t.VirtualAccounts,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(1,0)}}},[t._v(t._s(t.i18n.buy_up))]),i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#F23C48",border:"0",width:"49%",height:"35px","line-height":"45px","font-size":"12px","margin-left":"13px",color:"#FFFFFF"},attrs:{loading:t.gdmloading,disabled:"未登录"==t.VirtualAccounts,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClicks(2,0)}}},[t._v(t._s(t.$t("trade.buy_down")))])],1)])]):t._e()])]),i("el-tab-pane",{staticClass:"mhy-box",attrs:{label:t.i18n.second_contract,name:"1"}},[i("div",{staticStyle:{padding:"5px 20px","box-shadow":"0 0 10px #a1a1a11f"}},[i("div",{staticClass:"item",staticStyle:{"font-size":"16px"}},[i("span",{staticClass:"label"},[t._v(t._s(t.currency_name))]),i("span",{staticClass:"value"},[t._v(t._s(t._f("setPrecision")(t.symbolQuotation.now_price,t.symbolQuotation.precision_length)))])]),i("div",{staticClass:"item"},[i("span",{staticClass:"label"},[t._v(t._s(t.i18n.open_number))]),i("span",{staticClass:"value"},[i("el-input-number",{model:{value:t.kcnumber,callback:function(e){t.kcnumber=e},expression:"kcnumber"}})],1)]),i("div",{staticClass:"item"},[i("span",{staticClass:"label"},[t._v(t._s(t.i18n.opening_time))]),i("span",{staticClass:"value"},[i("el-select",{model:{value:t.kcvalues,callback:function(e){t.kcvalues=e},expression:"kcvalues"}},t._l(t.kccolumns[0],(function(t){return i("el-option",{key:t.id,attrs:{label:t.seconds,value:t.seconds}})})),1)],1)]),i("div",{staticClass:"item"},[i("span",{staticClass:"label"},[t._v(t._s(t.i18n.profit_rate))]),i("span",{staticClass:"value"},[t._v(t._s(t.profit_ratio)+"%")])]),i("div",{staticClass:"item"},[i("span",{staticClass:"label"},[t._v(t._s(t.i18n.estimated_commission))]),i("span",{staticClass:"value"},[t._v(t._s(parseFloat(t.mhyprices).toFixed(2)))])]),i("div",{staticClass:"item"},[i("span",{staticClass:"label"},[t._v(t._s(t.i18n.balance))]),i("span",{staticClass:"value"},[t._v(t._s(t.users.usdt))])]),i("div",{staticStyle:{display:"flex",width:"100%","padding-top":"10px"}},[i("u-button",{staticStyle:{"border-radius":"100rpx",background:"var(--mainColor)",border:"0",width:"49%","font-size":"12px",height:"35px",color:"#FFFFFF","line-height":"45px"},attrs:{loading:t.mhydloading,disabled:t.mhymrdis,loadingText:"",size:"small"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mhyOrder(1)}}},[t._v(t._s(t.i18n.buy_up))]),i("u-button",{staticStyle:{"border-radius":"100rpx",background:"#F23C48",border:"0",width:"49%",height:"35px","line-height":"45px","font-size":"12px","margin-left":"13px",color:"#FFFFFF"},attrs:{loading:t.mhymloading,disabled:t.mhymcdis,loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mhyOrder(2)}}},[t._v(t._s(t.i18n.buy_down))])],1)])])],1)],1):t._e()],1),"未登录"!==t.VirtualAccounts?i("el-footer",{staticStyle:{width:"100%",height:"200px"}},[i("el-tabs",{model:{value:t.currentNavcc,callback:function(e){t.currentNavcc=e},expression:"currentNavcc"}},[i("el-tab-pane",{attrs:{label:t.i18n.contracts,name:"0"}},[i("div",[i("div",[i("div",{staticClass:"scroll-view"},[i("div",t._l(t.navsList,(function(e,a){return i("div",{key:a,staticClass:"scroll-item",class:t.tabIndex===a?"scroll-items":"scroll-item",attrs:{id:"tab"+a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changesTabs(a)}}},[t._v(t._s(e))])})),0),0==t.tabIndex?i("div",{staticClass:"prtxts",staticStyle:{"font-size":"16px"}},[i("div",[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.profit_Loss)+"：")]),i("span",{class:{positive:t.hylist.yks>0,negative:t.hylist.yks<0}},[t._v(t._s(t.hylist.yks))])]),i("div",{staticStyle:{"margin-left":"30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.current_deposit)+":")]),i("span",[t._v(t._s(t.hylist.caution_money))])]),i("div",{staticStyle:{margin:"0 30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.risk_rate)+"：")]),i("span",[t._v(t._s(parseFloat(t.hylist.caution_money/this.$store.state.users.usdt*100).toFixed(4))+"%")])])]):t._e(),1==t.tabIndex?i("div",{staticClass:"prtxts",staticStyle:{"font-size":"16px"}},[i("div",[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.profit_Loss)+"：")]),i("span",{class:{positive:t.hylist.yks>0,negative:t.hylist.yks<0}},[t._v(t._s(t.hylist.yks))])]),i("div",{staticStyle:{"margin-left":"30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.current_deposit)+":")]),i("span",[t._v(t._s(t.hylist.caution_money))])]),i("div",{staticStyle:{margin:"0 30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.risk_rate)+"：")]),i("span",[t._v(t._s(parseFloat(t.hylist.caution_money/this.$store.state.users.usdt*100).toFixed(4))+"%")])])]):t._e(),2==t.tabIndex?i("div",{staticClass:"prtxts",staticStyle:{"font-size":"16px"}},[i("div",[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.profit_Loss)+"：")]),i("span",{class:{positive:t.hylist.yks>0,negative:t.hylist.yks<0}},[t._v(t._s(t.hylist.yks))])]),i("div",{staticStyle:{"margin-left":"30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.current_deposit)+":")]),i("span",[t._v(t._s(t.hylist.caution_money))])]),i("div",{staticStyle:{margin:"0 30px"}},[i("span",{staticStyle:{color:"#a6a6a6"}},[t._v(t._s(t.i18nIndent.risk_rate)+"：")]),i("span",[t._v(t._s(parseFloat(t.hylist.caution_money/this.$store.state.users.usdt*100).toFixed(4))+"%")])])]):t._e()]),i("div",{staticStyle:{height:"0px"}}),i("v-uni-swiper",{style:"height:"+t.scrollH+"px;overflow: hidden;width:95%;padding-left:15px; ",attrs:{duration:150,current:t.tabIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeTab.apply(void 0,arguments)}}},[i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":!0,"enable-flex":"true",catchtouchmove:"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower1()}}},[i("v-uni-view",{ref:"ulists0",staticStyle:{width:"100%"}},[i("v-uni-view",{staticStyle:{width:"100%"}},[t.indexList.length?i("u-list",{staticStyle:{width:"100%"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.indexList,"empty-text":""}},[i("el-table-column",{attrs:{prop:"symbol",label:t.i18nIndent.transaction_currency,width:"80"}}),i("el-table-column",{attrs:{prop:"id",label:t.i18nIndent.order_form,width:"80"}}),i("el-table-column",{attrs:{prop:"type_name",label:t.i18nIndent.direction,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["买入"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"var(--mainColor)",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_up")))]):t._e(),"卖出"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"#f23c48",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_down")))]):t._e()]}}],null,!1,2289505123)}),i("el-table-column",{attrs:{prop:"number",label:t.i18nIndent.quantity}}),i("el-table-column",{attrs:{prop:"price",label:t.i18nIndent.place_the_unit_price}}),i("el-table-column",{attrs:{prop:"update_price",label:t.i18nIndent.current_price}}),i("el-table-column",{attrs:{prop:"target_profit_price",label:t.i18nIndent.stop_profit}}),i("el-table-column",{attrs:{prop:"stop_loss_price",label:t.i18nIndent.stop_loss}}),i("el-table-column",{attrs:{prop:"trade_fee",label:t.i18nIndent.hanling_fee}}),i("el-table-column",{attrs:{prop:"caution_money",label:t.i18nIndent.deposit}}),i("el-table-column",{attrs:{label:t.i18nIndent.profit_Loss},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.upsdowns>=0?i("span",{staticStyle:{color:"var(--mainColor)","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e(),e.row.upsdowns<0?i("span",{staticStyle:{color:"#F23C48","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e()]}}],null,!1,2747579890)}),i("el-table-column",{attrs:{prop:"transaction_time",label:t.i18nIndent.opening_time}}),i("el-table-column",{staticStyle:{width:"200px"},attrs:{label:t.i18nIndent.operation},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{background:"#e8f4ff",color:"var(--mainColor)","border-radius":"100px",height:"30px","line-height":"30px","margin-right":"10px","text-align":"center",width:"180px"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clicksTp()}}},[t._v(t._s(t.i18nIndent.modify_TP_SL))]),i("div",{staticStyle:{background:"#ffece8",color:"#f23c48","border-radius":"100px","line-height":"30px",height:"30px",width:"120px","text-align":"center"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showModalPC(e.row)}}},[t._v(t._s(t.i18nIndent.closing_positions))])])]}}],null,!1,195772542)})],1)],1):t._e(),t.indexList.length?t._e():i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[i("v-uni-image",{staticStyle:{width:"250px"},attrs:{src:a("45fb")}}),i("v-uni-text",{staticStyle:{color:"#676767"}},[t._v(t._s(t.i18nIndent.no))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"15%"}})],1)],1),i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":!0,"enable-flex":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower2()}}},[i("v-uni-view",{ref:"ulists1",staticStyle:{width:"100%"}},[i("v-uni-view",[t.indexList1.length?i("u-list",{staticClass:"sfds",staticStyle:{width:"100%"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.indexList1}},[i("el-table-column",{attrs:{prop:"symbol",label:t.i18nIndent.transaction_currency,width:"80"}}),i("el-table-column",{attrs:{prop:"id",label:t.i18nIndent.order_form,width:"80"}}),i("el-table-column",{attrs:{prop:"type_name",label:t.i18nIndent.direction,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["买入"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"var(--mainColor)",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_up")))]):t._e(),"卖出"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"#f23c48",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_down")))]):t._e()]}}],null,!1,2289505123)}),i("el-table-column",{attrs:{prop:"number",label:t.i18nIndent.quantity}}),i("el-table-column",{attrs:{prop:"price",label:t.i18nIndent.place_the_unit_price}}),i("el-table-column",{attrs:{prop:"update_price",label:t.i18nIndent.current_price}}),i("el-table-column",{attrs:{prop:"target_profit_price",label:t.i18nIndent.stop_profit}}),i("el-table-column",{attrs:{prop:"stop_loss_price",label:t.i18nIndent.stop_loss}}),i("el-table-column",{attrs:{prop:"trade_fee",label:t.i18nIndent.hanling_fee}}),i("el-table-column",{attrs:{prop:"caution_money",label:t.i18nIndent.deposit}}),i("el-table-column",{attrs:{label:t.i18nIndent.profit_Loss},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.upsdowns>=0?i("span",{staticStyle:{color:"var(--mainColor)","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e(),e.row.upsdowns<0?i("span",{staticStyle:{color:"#F23C48","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e()]}}],null,!1,2747579890)}),i("el-table-column",{attrs:{prop:"transaction_time",label:t.i18nIndent.opening_time}}),i("el-table-column",{staticStyle:{width:"200px"},attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{background:"#ffece8",color:"#f23c48","border-radius":"100px","line-height":"30px",height:"30px",width:"120px","text-align":"center"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.clicksCd(e.row)}}},[t._v(t._s(t.i18nIndent.cancellation))])])]}}],null,!1,2837977416)})],1)],1):t._e(),t.indexList1.length?t._e():i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[i("v-uni-image",{staticStyle:{width:"250px"},attrs:{src:a("45fb")}}),i("v-uni-text",{staticStyle:{color:"#676767"}},[t._v(t._s(t.i18nIndent.no))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"15%"}})],1)],1),i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":!0,"enable-flex":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower3()}}},[i("v-uni-view",{ref:"ulists1",staticStyle:{width:"100%"}},[i("v-uni-view",[t.indexList2.length?i("u-list",{staticClass:"sfds",staticStyle:{width:"100%"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.indexList2}},[i("el-table-column",{attrs:{prop:"symbol",label:t.i18nIndent.transaction_currency,width:"80"}}),i("el-table-column",{attrs:{prop:"id",label:t.i18nIndent.order_form,width:"80"}}),i("el-table-column",{attrs:{prop:"type_name",label:t.i18nIndent.direction,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["买入"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"var(--mainColor)",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_up")))]):t._e(),"卖出"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"#f23c48",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_down")))]):t._e()]}}],null,!1,2289505123)}),i("el-table-column",{attrs:{prop:"number",label:t.i18nIndent.quantity}}),i("el-table-column",{attrs:{prop:"price",label:t.i18nIndent.place_the_unit_price}}),i("el-table-column",{attrs:{prop:"update_price",label:t.i18nIndent.current_price}}),i("el-table-column",{attrs:{prop:"target_profit_price",label:t.i18nIndent.stop_profit}}),i("el-table-column",{attrs:{prop:"stop_loss_price",label:t.i18nIndent.stop_loss}}),i("el-table-column",{attrs:{prop:"trade_fee",label:t.i18nIndent.hanling_fee}}),i("el-table-column",{attrs:{prop:"caution_money",label:t.i18nIndent.deposit}}),i("el-table-column",{attrs:{label:t.i18nIndent.profit_Loss},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.upsdowns>=0?i("span",{staticStyle:{color:"var(--mainColor)","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e(),e.row.upsdowns<0?i("span",{staticStyle:{color:"#F23C48","font-size":"24px"}},[t._v(t._s(e.row.upsdowns))]):t._e()]}}],null,!1,2747579890)}),i("el-table-column",{attrs:{prop:"transaction_time",label:t.i18nIndent.opening_time}})],1)],1):t._e(),t.indexList2.length?t._e():i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[i("v-uni-image",{staticStyle:{width:"250px"},attrs:{src:a("45fb")}}),i("v-uni-text",{staticStyle:{color:"#676767"}},[t._v(t._s(t.i18nIndent.no))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"15%"}})],1)],1)],1)],1),i("u-popup",{staticStyle:{"z-index":"999"},attrs:{show:t.showTp,mode:"center",round:30,duration:350,closeable:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.closeTp.apply(void 0,arguments)},open:function(e){arguments[0]=e=t.$handleEvent(e),t.openTp.apply(void 0,arguments)}}},[i("v-uni-view",{style:"black"==this.$store.state.bgColor?"height:330px; width: 300px; padding: 6px;background: #22252F; color: #fff;":"height:330px; width: 300px; padding: 6px;"},[i("v-uni-view",{staticStyle:{height:"45px","line-height":"40px","font-size":"16px","font-weight":"bold","margin-top":"5px","margin-left":"8px"}},[t._v(t._s(t.i18nIndent.modify_TP_SL))]),i("v-uni-view",{staticClass:"composings",staticStyle:{width:"95%",display:"flex","flex-direction":"column",margin:"8px"}},[i("v-uni-view",{staticStyle:{display:"flex",flex:"1",width:"50%"}},[i("v-uni-text",[t._v(t._s(t.i18nIndent.stop_profit))])],1),i("v-uni-view",{staticStyle:{width:"100%","margin-top":"20px"}},[i("v-uni-text",[i("u-number-box",{staticStyle:{border:"1px solid #D1D5E8"},attrs:{inputWidth:"100%",bgColor:"black"==this.$store.state.bgColor?"#22252F":"",iconStyle:"",min:0,"button-size":"70"},model:{value:t.target_profit_price,callback:function(e){t.target_profit_price=e},expression:"target_profit_price"}})],1)],1)],1),i("v-uni-view",{staticClass:"composings",staticStyle:{width:"95%",display:"flex","flex-direction":"column",margin:"8px","margin-top":"20px"}},[i("v-uni-view",{staticStyle:{display:"flex",flex:"1",width:"50%"}},[i("v-uni-text",[t._v(t._s(t.i18nIndent.stop_loss))])],1),i("v-uni-view",{staticStyle:{width:"100%","margin-top":"20px"}},[i("v-uni-view",[i("u-number-box",{staticStyle:{border:"1px solid #D1D5E8"},attrs:{inputWidth:"100%",bgColor:"black"==this.$store.state.bgColor?"#22252F":"",iconStyle:"",min:0,"button-size":"70"},model:{value:t.stop_loss_price,callback:function(e){t.stop_loss_price=e},expression:"stop_loss_price"}})],1)],1)],1),i("v-uni-button",{staticStyle:{background:"var(--mainColor)",border:"0",width:"95%",padding:"8px 8px !important","margin-top":"30px"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.confClicksTp()}}},[t._v(t._s(t.i18nIndent.modify_TP_SL))])],1)],1),i("u-modal",{attrs:{show:t.showMess,confirmText:t.cfmtext,cancelText:t.celtext,showCancelButton:!0,confirmColor:"#0166fc",title:t.titleMess,content:t.contentMess},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmPC.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),i("v-uni-view",[i("uni-popup",{ref:"alertDialog",attrs:{type:"dialog"}},[i("uni-popup-dialog",{attrs:{type:t.msgType,cancelText:t.i18nIndent.cancel,confirmText:t.i18nIndent.ok,title:t.i18nIndent.prompt,content:t.i18nIndent.confirm_cancellation},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.dialogConfirm.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.dialogClose.apply(void 0,arguments)}}})],1)],1)],1)]),i("el-tab-pane",{attrs:{label:t.i18n.second_contract,name:"1"}},[i("div",[i("div",[i("div",{staticClass:"scroll-view"},[i("div",t._l(t.cnavsList,(function(e,a){return i("div",{key:a,staticClass:"scroll-item",class:t.tabsIndex===a?"scroll-items":"scroll-item",attrs:{id:"tab"+a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mchangesTabs(a)}}},[t._v(t._s(e))])})),0)]),i("div",{staticStyle:{height:"0px"}}),i("v-uni-swiper",{style:"height:"+t.scrollH+"px;overflow: hidden;width:95%;padding-left:15px; ",attrs:{duration:150,current:t.tabsIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeTab.apply(void 0,arguments)}}},[i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":!0,"enable-flex":"true",catchtouchmove:"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower1()}}},[i("v-uni-view",{directives:[{name:"loading",rawName:"v-loading",value:t.secondsLoading,expression:"secondsLoading"}],ref:"ulists0",staticStyle:{width:"100%"}},[i("v-uni-view",{staticStyle:{width:"100%"}},[t.mhyIndexList.length?i("u-list",{staticStyle:{width:"100%"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.mhyIndexList,"empty-text":""}},[i("el-table-column",{attrs:{prop:"symbol",label:t.i18nIndent.transaction_currency},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.symbol))]),i("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(parseFloat(e.row.end_price))+"->"+t._s(parseFloat(e.row.end_price2)))])]}}],null,!1,2611227295)}),i("el-table-column",{attrs:{prop:"type_name",label:t.i18nIndent.direction,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["涨"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"var(--mainColor)",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_up")))]):t._e(),"跌"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"#f23c48",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_down")))]):t._e()]}}],null,!1,2894819806)}),i("el-table-column",{attrs:{prop:"price",label:t.i18n.price,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.profit_result>=0?i("v-uni-text",{staticClass:"u-cell-text",staticStyle:{color:"var(--mainColor)"}},[t._v(t._s(e.row.price))]):i("v-uni-text",{staticClass:"u-cell-text",staticStyle:{color:"#F23C48"}},[t._v("-"+t._s(e.row.price))])]}}],null,!1,1986215792)}),i("el-table-column",{attrs:{prop:"number",label:t.i18n.open_number,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(parseFloat(e.row.number).toFixed(2)))])]}}],null,!1,2461757809)}),i("el-table-column",{attrs:{prop:"seconds",label:t.i18n.opening_time,width:"120"}}),i("el-table-column",{attrs:{prop:"fee",label:t.i18n.estimated_commission,width:"150"}})],1)],1):t._e(),t.mhyIndexList.length?t._e():i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[i("v-uni-image",{staticStyle:{width:"250px"},attrs:{src:a("45fb")}}),i("v-uni-text",{staticStyle:{color:"#676767"}},[t._v(t._s(t.i18nIndent.no))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"15%"}})],1)],1),i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":!0,"enable-flex":"true",catchtouchmove:"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrolltolower1()}}},[i("v-uni-view",{directives:[{name:"loading",rawName:"v-loading",value:t.secondsLoading,expression:"secondsLoading"}],ref:"ulists0",staticStyle:{width:"100%"}},[i("v-uni-view",{staticStyle:{width:"100%"}},[t.mhyIndexList.length?i("u-list",{staticStyle:{width:"100%"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.mhyIndexList,"empty-text":""}},[i("el-table-column",{attrs:{prop:"symbol",label:t.i18nIndent.transaction_currency},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.symbol))]),i("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(parseFloat(e.row.end_price))+"->"+t._s(parseFloat(e.row.end_price2)))])]}}],null,!1,2611227295)}),i("el-table-column",{attrs:{prop:"type_name",label:t.i18nIndent.direction,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["涨"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"var(--mainColor)",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_up")))]):t._e(),"跌"==e.row.type_name?i("div",{staticStyle:{width:"60px",height:"30px","background-color":"#f23c48",color:"#ffffff","text-align":"center","line-height":"30px","border-radius":"100px"}},[t._v(t._s(t.$t("trade.buy_down")))]):t._e()]}}],null,!1,2894819806)}),i("el-table-column",{attrs:{prop:"price",label:t.i18n.price,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.profit_result>=0?i("v-uni-text",{staticClass:"u-cell-text",staticStyle:{color:"var(--mainColor)"}},[t._v(t._s(e.row.price))]):i("v-uni-text",{staticClass:"u-cell-text",staticStyle:{color:"#F23C48"}},[t._v("-"+t._s(e.row.price))])]}}],null,!1,1986215792)}),i("el-table-column",{attrs:{prop:"number",label:t.i18n.open_number,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(parseFloat(e.row.number).toFixed(2)))])]}}],null,!1,2461757809)}),i("el-table-column",{attrs:{prop:"seconds",label:t.i18n.opening_time,width:"120"}}),i("el-table-column",{attrs:{prop:"fee",label:t.i18n.estimated_commission,width:"150"}})],1)],1):t._e(),t.mhyIndexList.length?t._e():i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[i("v-uni-image",{staticStyle:{width:"250px"},attrs:{src:a("45fb")}}),i("v-uni-text",{staticStyle:{color:"#676767"}},[t._v(t._s(t.i18nIndent.no))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"15%"}})],1)],1)],1)],1)])])],1)],1):t._e(),i("u-popup",{attrs:{mode:"center",show:t.personalInformationSwitch,closeable:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.personalInformationCloseIndex.apply(void 0,arguments)}}},[i("personalInformation")],1),i("u-popup",{staticStyle:{width:"480px","border-radius":"20px"},attrs:{mode:"center",show:t.loginSwitch},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.loginSwitchCloseIndex.apply(void 0,arguments)}}},[i("loginComponent",{staticStyle:{width:"480px","border-radius":"20px"},on:{"data-sent":function(e){arguments[0]=e=t.$handleEvent(e),t.handleData.apply(void 0,arguments)}}})],1),i("u-popup",{staticStyle:{width:"480px","border-radius":"20px",height:""},attrs:{mode:"center",show:t.registerSwitch}},[i("registerComponent",{staticStyle:{width:"480px","border-radius":"20px"},on:{"data-sent":function(e){arguments[0]=e=t.$handleEvent(e),t.handleData.apply(void 0,arguments)}}})],1),i("u-popup",{staticStyle:{width:"480px","border-radius":"20px",height:""},attrs:{mode:"center",show:t.resetPassSwitch}},[i("resetPassComponent",{staticStyle:{width:"480px","border-radius":"20px"},on:{"data-sent":function(e){arguments[0]=e=t.$handleEvent(e),t.handleData.apply(void 0,arguments)}}})],1)],1)],1)},n=[]},9142:function(t,e,a){"use strict";a.r(e);var i=a("4e1a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"918a":function(t,e,a){"use strict";var i=a("6d68"),r=a.n(i);r.a},"91c0":function(t,e,a){"use strict";var i=a("0cab"),r=a.n(i);r.a},"91f8":function(t,e,a){"use strict";a.r(e);var i=a("b9a2"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},9263:function(t,e,a){"use strict";a.r(e);var i=a("3106"),r=a("8b76");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("281b");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3193bb52",null,!1,i["a"],void 0);e["default"]=o.exports},9275:function(t,e,a){"use strict";a("aa9c"),a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),t.exports=function(t){for(var e=[],a=t.length,i=0;i<a;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319&&a>i+1){var n=t.charCodeAt(i+1);n>=56320&&n<=57343&&(r=1024*(r-55296)+n-56320+65536,i+=1)}r<128?e.push(r):r<2048?(e.push(r>>6|192),e.push(63&r|128)):r<55296||r>=57344&&r<65536?(e.push(r>>12|224),e.push(r>>6&63|128),e.push(63&r|128)):r>=65536&&r<=1114111?(e.push(r>>18|240),e.push(r>>12&63|128),e.push(r>>6&63|128),e.push(63&r|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},9405:function(t,e,a){"use strict";a.r(e);var i=a("cb02"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},"94bc":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("uvImage",{attrs:{src:t.src,mode:t.mode,width:t.width,height:t.height,shape:t.shape,radius:t.radius,lazyLoad:t.lazyLoad,showMenuByLongpress:t.showMenuByLongpress,loadingIcon:t.loadingIcon,errorIcon:t.errorIcon,showLoading:t.showLoading,showError:t.showError,fade:t.fade,webp:t.webp,duration:t.duration,bgColor:t.bgColor,customStyle:t.customStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("click")},error:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("error")},load:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("load")}},scopedSlots:t._u([{key:"loading",fn:function(){return[t._t("loading")]},proxy:!0},{key:"error",fn:function(){return[t._t("error")]},proxy:!0}],null,!0)})},r=[]},"94d0":function(t,e,a){"use strict";var i=a("8bdb"),r=a("2e7f");i({target:"Math",stat:!0},{log10:r})},9674:function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},9903:function(t,e,a){"use strict";var i=a("f570"),r=a.n(i);r.a},"9b3f":function(t,e,a){t.exports=a.p+"static/Down_S 2@3x.png"},"9cb8":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-b90d6f18], uni-scroll-view[data-v-b90d6f18], uni-swiper-item[data-v-b90d6f18]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-textarea[data-v-b90d6f18]{border-radius:4px;background-color:#fff;position:relative;display:flex;flex-direction:row;flex:1;padding:9px}.u-textarea--radius[data-v-b90d6f18]{border-radius:4px}.u-textarea--no-radius[data-v-b90d6f18]{border-radius:0}.u-textarea--disabled[data-v-b90d6f18]{background-color:#f5f7fa}.u-textarea__field[data-v-b90d6f18]{flex:1;font-size:15px;color:#606266;width:100%}.u-textarea__count[data-v-b90d6f18]{position:absolute;right:5px;bottom:2px;font-size:12px;color:#909193;background-color:#fff;padding:1px 4px}',""]),t.exports=e},"9e20":function(t,e,a){"use strict";a.r(e);var i=a("4e16"),r=a("3dd3");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("c8e8");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"5052f25e",null,!1,i["a"],void 0);e["default"]=o.exports},"9fb0":function(t,e,a){"use strict";var i=a("4d92"),r=a.n(i);r.a},"9fcb":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{show:{type:Boolean,default:uni.$u.props.modal.show},title:{type:[String],default:uni.$u.props.modal.title},content:{type:String,default:uni.$u.props.modal.content},confirmText:{type:String,default:uni.$u.props.modal.confirmText},cancelText:{type:String,default:uni.$u.props.modal.cancelText},showConfirmButton:{type:Boolean,default:uni.$u.props.modal.showConfirmButton},showCancelButton:{type:Boolean,default:uni.$u.props.modal.showCancelButton},confirmColor:{type:String,default:uni.$u.props.modal.confirmColor},cancelColor:{type:String,default:uni.$u.props.modal.cancelColor},buttonReverse:{type:Boolean,default:uni.$u.props.modal.buttonReverse},zoom:{type:Boolean,default:uni.$u.props.modal.zoom},asyncClose:{type:Boolean,default:uni.$u.props.modal.asyncClose},closeOnClickOverlay:{type:Boolean,default:uni.$u.props.modal.closeOnClickOverlay},negativeTop:{type:[String,Number],default:uni.$u.props.modal.negativeTop},width:{type:[String,Number],default:uni.$u.props.modal.width},confirmButtonShape:{type:String,default:uni.$u.props.modal.confirmButtonShape}}};e.default=i},a06a:function(t,e,a){var i=a("89f8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("29284df8",i,!0,{sourceMap:!1,shadowMode:!1})},a12b:function(t,e,a){var i=a("db0b"),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case i.L:return r[4*(t-1)+0];case i.M:return r[4*(t-1)+1];case i.Q:return r[4*(t-1)+2];case i.H:return r[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case i.L:return n[4*(t-1)+0];case i.M:return n[4*(t-1)+1];case i.Q:return n[4*(t-1)+2];case i.H:return n[4*(t-1)+3];default:return}}},a217:function(t,e,a){"use strict";a.r(e);var i=a("3441"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},a35a:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("2634")),n=i(a("2fdc")),s=i(a("39d8"));a("64aa"),a("aa77"),a("bf0f"),a("c223"),a("2797"),a("5ef2"),a("d4b5"),a("aa9c"),a("de6c");var o=i(a("45e3d")),h=a("3b33"),l=i(a("9b8e"));l.default.prototype.binddata=function(t,e,a){if(a)this.$refs[a].setValue(t,e);else{var i;for(var r in this.$refs){var n=this.$refs[r];if(n&&n.$options&&"uniForms"===n.$options.name){i=n;break}}if(!i)return console.error("当前 uni-froms 组件缺少 ref 属性");i.setValue(t,e)}};var u={name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:function(){return null}},modelValue:{type:Object,default:function(){return null}},model:{type:Object,default:function(){return null}},rules:{type:Object,default:function(){return{}}},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide:function(){return{uniForm:this}},data:function(){return{formData:{},formRules:{}}},computed:{localData:function(){var t=this.model||this.modelValue||this.value;return t?(0,h.deepCopy)(t):{}}},watch:{rules:{handler:function(t,e){this.setRules(t)},deep:!0,immediate:!0}},created:function(){this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules:function(t){this.formRules=Object.assign({},this.formRules,t),this.validator=new o.default(t)},setValue:function(t,e){var a=this.childrens.find((function(e){return e.name===t}));return a?(this.formData[t]=(0,h.getValue)(t,e,this.formRules[t]&&this.formRules[t].rules||[]),a.onFieldChange(this.formData[t])):null},validate:function(t,e){return this.checkAll(this.formData,t,e)},validateField:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;e=[].concat(e);var i={};return this.childrens.forEach((function(a){var r=(0,h.realName)(a.name);-1!==e.indexOf(r)&&(i=Object.assign({},i,(0,s.default)({},r,t.formData[r])))})),this.checkAll(i,[],a)},clearValidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=[].concat(t),this.childrens.forEach((function(e){if(0===t.length)e.errMsg="";else{var a=(0,h.realName)(e.name);-1!==t.indexOf(a)&&(e.errMsg="")}}))},submit:function(t,e,a){var i=this,r=function(t){var e=i.childrens.find((function(e){return e.name===t}));e&&void 0===i.formData[t]&&(i.formData[t]=i._getValue(t,i.dataValue[t]))};for(var n in this.dataValue)r(n);return a||console.warn("submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,t,e,"submit")},checkAll:function(t,e,a,i){var s=this;return(0,n.default)((0,r.default)().mark((function n(){var o,l,u,c,d,f,C,m,D,p,v;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s.validator){n.next=2;break}return n.abrupt("return");case 2:for(u in o=[],l=function(t){var e=s.childrens.find((function(e){return(0,h.realName)(e.name)===t}));e&&o.push(e)},t)l(u);a||"function"!==typeof e||(a=e),!a&&"function"!==typeof a&&Promise&&(c=new Promise((function(t,e){a=function(a,i){a?e(a):t(i)}}))),d=[],f=JSON.parse(JSON.stringify(t)),n.t0=(0,r.default)().keys(o);case 10:if((n.t1=n.t0()).done){n.next=23;break}return C=n.t1.value,m=o[C],D=(0,h.realName)(m.name),n.next=16,m.onFieldChange(f[D]);case 16:if(p=n.sent,!p){n.next=21;break}if(d.push(p),"toast"!==s.errShowType&&"modal"!==s.errShowType){n.next=21;break}return n.abrupt("break",23);case 21:n.next=10;break;case 23:if(Array.isArray(d)&&0===d.length&&(d=null),Array.isArray(e)&&e.forEach((function(t){var e=(0,h.realName)(t),a=(0,h.getDataValue)(t,s.localData);void 0!==a&&(f[e]=a)})),"submit"===i?s.$emit("submit",{detail:{value:f,errors:d}}):s.$emit("validate",d),{},v=(0,h.rawData)(f,s.name),a&&"function"===typeof a&&a(d,v),!c||!a){n.next=33;break}return n.abrupt("return",c);case 33:return n.abrupt("return",null);case 34:case"end":return n.stop()}}),n)})))()},validateCheck:function(t){this.$emit("validate",t)},_getValue:h.getValue,_isRequiredField:h.isRequiredField,_setDataValue:h.setDataValue,_getDataValue:h.getDataValue,_realName:h.realName,_isRealName:h.isRealName,_isEqual:h.isEqual}};e.default=u},a405:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("bdae")),n={name:"u-list",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],watch:{scrollIntoView:function(t){this.scrollIntoViewById(t)}},data:function(){return{innerScrollTop:0,offset:0,sys:uni.$u.sys()}},computed:{listStyle:function(){var t={},e=uni.$u.addUnit;return 0!=this.width&&(t.width=e(this.width)),0!=this.height&&(t.height=e(this.height)),t.height||(t.height=e(this.sys.windowHeight,"px")),uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}},provide:function(){return{uList:this}},created:function(){this.refs=[],this.children=[],this.anchors=[]},mounted:function(){},methods:{updateOffsetFromChild:function(t){this.offset=t},onScroll:function(t){var e;e=t.detail.scrollTop,this.innerScrollTop=e,this.$emit("scroll",Math.abs(e))},scrollIntoViewById:function(t){},scrolltolower:function(t){var e=this;uni.$u.sleep(30).then((function(){e.$emit("scrolltolower")}))},scrolltoupper:function(t){var e=this;uni.$u.sleep(30).then((function(){e.$emit("scrolltoupper"),e.offset=0}))}}};e.default=n},a411:function(t,e,a){var i=a("4c10");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("49078b90",i,!0,{sourceMap:!1,shadowMode:!1})},a57f:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:function(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{width:function(){return 8*String(this.text).length+12},classNames:function(){var t=this.inverted,e=this.type,a=this.size,i=this.absolute;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+a,i?"uni-badge--absolute":""].join(" ")},positionStyle:function(){if(!this.absolute)return{};var t=this.width/2,e=10;this.isDot&&(t=5,e=5);var a="".concat(-t+this.offset[0],"px"),i="".concat(-e+this.offset[1],"px"),r={rightTop:{right:a,top:i},rightBottom:{right:a,bottom:i},leftBottom:{left:a,bottom:i},leftTop:{left:a,top:i}},n=r[this.absolute];return n||r["rightTop"]},dotStyle:function(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue:function(){var t=this.isDot,e=this.text,a=this.maxNum;return t?"":Number(e)>a?"".concat(a,"+"):e}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},a832:function(t,e,a){"use strict";a.r(e);var i=a("0ad9"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},a926:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("ff1d")),n=i(a("47d8")),s={name:"u--textarea",mixins:[uni.$u.mpMixin,n.default,uni.$u.mixin],components:{uvTextarea:r.default}};e.default=s},a9eb:function(t,e,a){"use strict";var i=a("c9f3"),r=a.n(i);r.a},aa2a:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-text",{staticClass:"u-link",style:[t.linkStyle,t.$u.addStyle(t.customStyle)],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.openLink.apply(void 0,arguments)}}},[t._v(t._s(t.text))])},r=[]},aa95:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-list-item[data-v-ab364b0e]{display:flex;font-size:16px;position:relative;justify-content:space-between;align-items:center;background-color:#fff;flex-direction:row;cursor:pointer}.uni-list-item--disabled[data-v-ab364b0e]{opacity:.3}.uni-list-item__container[data-v-ab364b0e]{position:relative;display:flex;flex-direction:row;padding:12px 15px;padding-left:15px;flex:1;overflow:hidden}.container--right[data-v-ab364b0e]{padding-right:0}.uni-list--border[data-v-ab364b0e]{position:absolute;top:0;right:0;left:0}.uni-list--border[data-v-ab364b0e]:after{position:absolute;top:0;right:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);background-color:#e5e5e5}.uni-list-item__content[data-v-ab364b0e]{display:flex;padding-right:8px;flex:1;color:#3b4144;flex-direction:column;justify-content:space-between;overflow:hidden}.uni-list-item__content--center[data-v-ab364b0e]{justify-content:center}.uni-list-item__content-title[data-v-ab364b0e]{font-size:14px;color:#3b4144;overflow:hidden}.uni-list-item__content-note[data-v-ab364b0e]{margin-top:%?6?%;color:#999;font-size:12px;overflow:hidden}.uni-list-item__extra[data-v-ab364b0e]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center}.uni-list-item__header[data-v-ab364b0e]{display:flex;flex-direction:row;align-items:center}.uni-list-item__icon[data-v-ab364b0e]{margin-right:%?18?%;flex-direction:row;justify-content:center;align-items:center}.uni-list-item__icon-img[data-v-ab364b0e]{display:block;height:40px;width:40px;margin-right:10px}.uni-icon-wrapper[data-v-ab364b0e]{display:flex;align-items:center;padding:0 10px}.flex--direction[data-v-ab364b0e]{flex-direction:column;align-items:normal}.flex--justify[data-v-ab364b0e]{justify-content:normal}.uni-list--lg[data-v-ab364b0e]{height:40px;width:40px}.uni-list--base[data-v-ab364b0e]{height:40px;width:40px}.uni-list--sm[data-v-ab364b0e]{height:20px;width:20px}.uni-list-item__extra-text[data-v-ab364b0e]{color:#999;font-size:12px}.uni-ellipsis-1[data-v-ab364b0e]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.uni-ellipsis-2[data-v-ab364b0e]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',""]),t.exports=e},aac1:function(t,e,a){"use strict";a.r(e);var i=a("5c73"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},ab69:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("588c")),n=i(a("5f2b")),s={data:function(){return{ishow:!1,title:this.$t("other.alerts"),content:this.$t("other.to_log_out"),confirmText:this.$t("other.confirm"),cancelText:this.$t("other.cancel"),pic1:r.default,pic2:n.default}},computed:{i18n:function(){return this.$t("other")}},mounted:function(){uni.setNavigationBarTitle({title:this.$t("other.other")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},methods:{goexit:function(){this.ishow=!0},cancel:function(){this.ishow=!1},confirm:function(){this.logout(),this.ishow=!1},logout:function(){localStorage.setItem("VirtualAccount","未登录"),this.$store.commit("/"),setTimeout((function(){uni.reLaunch({url:"/"})}),1e3)}}};e.default=s},ab9a:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("7240")),n=i(a("6d8c")),s={name:"u--text",mixins:[uni.$u.mpMixin,n.default,uni.$u.mixin],components:{uvText:r.default}};e.default=s},ac20:function(t,e,a){"use strict";a.r(e);var i=a("a926"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},acb1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,i.default)(t,e)},a("7a76"),a("c9b5"),a("6a54");var i=function(t){return t&&t.__esModule?t:{default:t}}(a("e668"))},ad03:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5c47"),a("0506"),a("c223");var i={computed:{value:function(){var t=this.text,e=this.mode,a=this.format,i=this.href;return"price"===e?(/^\d+(\.\d+)?$/.test(t)||uni.$u.error("金额模式下，text参数需要为金额格式"),uni.$u.test.func(a)?a(t):uni.$u.priceFormat(t,2)):"date"===e?(!uni.$u.test.date(t)&&uni.$u.error("日期模式下，text参数需要为日期或时间戳格式"),uni.$u.test.func(a)?a(t):a?uni.$u.timeFormat(t,a):uni.$u.timeFormat(t,"yyyy-mm-dd")):"phone"===e?uni.$u.test.func(a)?a(t):"encrypt"===a?"".concat(t.substr(0,3),"****").concat(t.substr(7)):t:"name"===e?("string"!==typeof t&&uni.$u.error("姓名模式下，text参数需要为字符串格式"),uni.$u.test.func(a)?a(t):"encrypt"===a?this.formatName(t):t):"link"===e?(!uni.$u.test.url(i)&&uni.$u.error("超链接模式下，href参数需要为URL格式"),t):t}},methods:{formatName:function(t){var e="";if(2===t.length)e=t.substr(0,1)+"*";else if(t.length>2){for(var a="",i=0,r=t.length-2;i<r;i++)a+="*";e=t.substr(0,1)+a+t.substr(-1,1)}else e=t;return e}}};e.default=i},ada7:function(t,e,a){a("7a76"),a("c9b5"),a("bf0f"),a("ab80");var i=a("9674"),r=a("564f");e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!i.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return r.testNumeric(t)?e.NUMERIC:r.testAlphanumeric(t)?e.ALPHANUMERIC:r.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,a){if(e.isValid(t))return t;try{return function(t){if("string"!==typeof t)throw new Error("Param is not a string");var a=t.toLowerCase();switch(a){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(i){return a}}},ae2e:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("aa9c");var r=i(a("47d8")),n={name:"u-textarea",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:function(t){return t}}},watch:{value:{immediate:!0,handler:function(t,e){this.innerValue=t,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass:function(){var t=[],e=this.border,a=this.disabled;this.shape;return"surround"===e&&(t=t.concat(["u-border","u-textarea--radius"])),"bottom"===e&&(t=t.concat(["u-border-bottom","u-textarea--no-radius"])),a&&t.push("u-textarea--disabled"),t.join(" ")},textareaStyle:function(){return uni.$u.deepMerge({},uni.$u.addStyle(this.customStyle))}},methods:{setFormatter:function(t){this.innerFormatter=t},onFocus:function(t){this.$emit("focus",t)},onBlur:function(t){this.$emit("blur",t),uni.$u.formValidate(this,"blur")},onLinechange:function(t){this.$emit("linechange",t)},onInput:function(t){var e=this,a=t.detail||{},i=a.value,r=void 0===i?"":i,n=this.formatter||this.innerFormatter,s=n(r);this.innerValue=r,this.$nextTick((function(){e.innerValue=s,e.valueChange()}))},valueChange:function(){var t=this,e=this.innerValue;this.$nextTick((function(){t.$emit("input",e),t.changeFromInner=!0,t.$emit("change",e),uni.$u.formValidate(t,"change")}))},onConfirm:function(t){this.$emit("confirm",t)},onKeyboardheightchange:function(t){this.$emit("keyboardheightchange",t)}}};e.default=n},af23:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */',""]),t.exports=e},b078:function(t,e,a){var i=a("90bb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("09c4080f",i,!0,{sourceMap:!1,shadowMode:!1})},b153:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-8b393142]{background-color:#fff}body.?%PAGE?%[data-v-8b393142]{background-color:#fff}.bsone[data-v-8b393142]{background:#1a1c24!important;border:1px solid #2f3142!important;color:#fff}.wrap[data-v-8b393142]{padding:%?24?%}.input-with-select .el-input-group__prepend[data-v-8b393142]{background-color:#fff}.blacks .u-border[data-v-8b393142]{color:#fff;border:1px solid #2f3142!important}.u-border[data-v-8b393142]{border-color:#d2d6e8!important}.borderNone[data-v-8b393142]{border:none!important}.is-input-border[data-v-8b393142]{border:none!important}.u-button--info[data-v-3bf2dba7][data-v-8b393142]{height:35px;color:#fff;background-color:var(--mainColor);border-color:#ebedf0;border-width:0;font-weight:700}.inps[data-v-8b393142]{padding:10px!important}[data-v-8b393142] .u-icon__img{width:20px!important;height:20px!important}\n/* /deep/.u-icon__icon[data-v-172979f2] {\n\n\t    font-size: 22px !important;\n\t} */[data-v-8b393142] .content-clear-icon{color:initial!important}[data-v-8b393142] .uni-easyinput__content[data-v-abe12412]{border:none!important}.blacks[data-v-8b393142] .is-input-border{border:none!important;border:1px solid #2f3142!important;background:#222!important;color:#fff}.blacks[data-v-8b393142] .uni-input-input{color:#fff}[data-v-8b393142] .uni-easyinput__placeholder-class{border:none!important;font-size:15px;color:#c0c4cc;padding-left:3px!important}[data-v-8b393142] .uni-easyinput__content-input{border:none!important;padding-left:3px!important}',""]),t.exports=e},b18d:function(t,e,a){"use strict";a.r(e);var i=a("e7e5"),r=a("d491");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("82ee");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"b5b50a08",null,!1,i["a"],void 0);e["default"]=o.exports},b1c4:function(t,e,a){"use strict";var i=a("fad5"),r=a.n(i);r.a},b1ef:function(t,e,a){"use strict";a.r(e);var i=a("6e61"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},b224:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-popup-dialog"},[a("v-uni-view",{staticClass:"uni-dialog-title"},[a("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+t.dialogType]},[t._v(t._s(t.titleText))])],1),"base"===t.mode?a("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",[a("v-uni-text",{staticClass:"uni-dialog-content-text"},[t._v(t._s(t.content))])])],2):a("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",["checkbox"===t.inputType?a("v-uni-input",{staticClass:"uni-dialog-input",attrs:{placeholder:t.placeholderText,focus:t.focus,type:"checkbox"},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}}):"radio"===t.inputType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{placeholder:t.placeholderText,focus:t.focus,type:"radio"},domProps:{checked:t._q(t.val,null)},on:{change:function(e){t.val=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{placeholder:t.placeholderText,focus:t.focus,type:t.inputType},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}})])],2),a("v-uni-view",{staticClass:"uni-dialog-button-group"},[a("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDialog.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"uni-dialog-button-text"},[t._v(t._s(t.closeText))])],1),a("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onOk.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.okText))])],1)],1)],1)},r=[]},b25f:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var r=i(a("06f4")),n=a("d3b4"),s=i(a("40c1")),o=(0,n.initVueI18n)(s.default),h=o.t,l={name:"uniPopupDialog",mixins:[r.default],emits:["confirm","close"],props:{inputType:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:function(){return{dialogType:"error",focus:!1,val:""}},computed:{okText:function(){return this.confirmText||h("uni-popup.ok")},closeText:function(){return this.cancelText||h("uni-popup.cancel")},placeholderText:function(){return this.placeholder||h("uni-popup.placeholder")},titleText:function(){return this.title||h("uni-popup.title")}},watch:{type:function(t){this.dialogType=t},mode:function(t){"input"===t&&(this.dialogType="info")},value:function(t){this.val=t}},created:function(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted:function(){this.focus=!0},methods:{onOk:function(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog:function(){this.$emit("close"),this.beforeClose||this.popup.close()},close:function(){this.popup.close()}}};e.default=l},b2b8:function(t,e,a){"use strict";a.r(e);var i=a("3430"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},b3e4:function(t,e,a){"use strict";var i=a("52d0"),r=a.n(i);r.a},b606:function(t,e,a){var i=a("fcf4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("1589f5ea",i,!0,{sourceMap:!1,shadowMode:!1})},b62d:function(t,e,a){"use strict";a.r(e);var i=a("0213"),r=a("0035");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("6fda");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"09e9487a",null,!1,i["a"],void 0);e["default"]=o.exports},b6660:function(t,e,a){"use strict";var i=a("54eb"),r=a("82de"),n=a("2e30"),s=a("d80f"),o=a("87de"),h=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var a=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==a)throw new Error(s[a]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var u;if(u="string"===typeof e.dictionary?n.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=i.deflateSetDictionary(this.strm,u),0!==a)throw new Error(s[a]);this._dict_set=!0}}function u(t,e){var a=new l(e);if(a.push(t,!0),a.err)throw a.msg||s[a.err];return a.result}l.prototype.push=function(t,e){var a,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"===typeof t?o.input=n.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(l),o.next_out=0,o.avail_out=l),a=i.deflate(o,s),1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(n.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==a);return 4===s?(a=i.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a):2!==s||(this.onEnd(0),o.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=l,e.deflate=u,e.deflateRaw=function(t,e){return e=e||{},e.raw=!0,u(t,e)},e.gzip=function(t,e){return e=e||{},e.gzip=!0,u(t,e)}},b6b7:function(t,e,a){"use strict";var i=a("21cd"),r=a.n(i);r.a},b6d0:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{seconds:{type:[String,Number],default:uni.$u.props.code.seconds},startText:{type:String,default:uni.$u.props.code.startText},changeText:{type:String,default:uni.$u.props.code.changeText},endText:{type:String,default:uni.$u.props.code.endText},keepRunning:{type:Boolean,default:uni.$u.props.code.keepRunning},uniqueKey:{type:String,default:uni.$u.props.code.uniqueKey}}};e.default=i},b740:function(t,e,a){function i(){this.buffer=[],this.length=0}a("aa9c"),i.prototype={get:function(t){var e=Math.floor(t/8);return 1===(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var a=0;a<e;a++)this.putBit(1===(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=i},b7c7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)||(0,r.default)(t)||(0,n.default)(t)||(0,s.default)()};var i=o(a("4733")),r=o(a("d14d")),n=o(a("5d6b")),s=o(a("30f75"));function o(t){return t&&t.__esModule?t:{default:t}}},b878:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("2634")),n=i(a("2fdc")),s=i(a("9b1b"));a("fd3c"),a("aa9c"),a("bd06"),a("64aa"),a("aa77"),a("bf0f"),a("de6c"),a("e838"),a("dd2b"),a("d4b5"),a("5ef2"),a("c1a3"),a("18f7"),a("c223");var o=i(a("4b66")),h=a("8f59");a("c5ee");function l(){}l.GetKLineOption=function(){return{Type:"历史K线图",Windows:[{}],OverlayIndexFrameWidth:50,IsAutoUpdate:!1,IsApiPeriod:!0,IsCorssOnlyDrawKLine:!0,CorssCursorTouchEnd:!0,IsClickShowCorssCursor:!1,EnableScrollUpDown:!0,CorssCursorInfo:{Left:0,Right:0,Bottom:0,IsShowCorss:!1},Border:{Left:1,Right:79,Top:1,Bottom:25},KLine:{Right:0,Period:0,PageSize:33,IsShowTooltip:!1,DrawType:0},KLineTitle:{IsShowName:!1,IsShowSettingInfo:!1},Frame:[{SplitCount:8,IsShowLeftText:!1,SplitType:1,Custom:[{Type:0,Position:"right"}]},{SplitCount:4,IsShowLeftText:!1,SplitType:1},{SplitCount:4,IsShowLeftText:!1}],ExtendChart:[]}},l.GetMinuteOption=function(){return{Type:"历史K线图",Windows:[{Index:"EMPTY",Modify:!1,Change:!1,Close:!1,TitleHeight:0},{Index:"VOL",Modify:!1,Change:!1,Close:!1},{Index:"BOLL",Modify:!1,Change:!1,Close:!1}],OverlayIndexFrameWidth:50,IsAutoUpdate:!1,IsApiPeriod:!0,IsCorssOnlyDrawKLine:!0,CorssCursorTouchEnd:!0,IsClickShowCorssCursor:!1,EnableScrollUpDown:!0,CorssCursorInfo:{Left:0,Right:0,Bottom:0,IsShowCorss:!1},Border:{Left:1,Right:1,Top:1,Bottom:25},IsShowCorssCursorInfo:!1,KLine:{Right:0,Period:4,PageSize:160,IsShowTooltip:!1,DrawType:4},KLineTitle:{IsShowName:!1,IsShowSettingInfo:!1},Frame:[{SplitCount:8,IsShowLeftText:!1,SplitType:1,Custom:[{Type:0,Position:"right"}]},{SplitCount:4,IsShowLeftText:!1,SplitType:1},{SplitCount:4,IsShowLeftText:!1}],ExtendChart:[]}},l.GetDepthOption=function(){return{Type:"深度图",EnableZoomUpDown:{},Symbol:"BTCBUSD.bit",IsAutoUpdate:!1,AutoUpdateFrequency:1e4,EnableScrollUpDown:!0,MaxVolRate:1.2,CorssCursorInfo:{HPenType:0,VPenType:1,IsShowTooltip:!0},Listener:{},SplashTitle:"下载数据 ......",Language:"EN",Border:{Left:1,Right:1,Bottom:25,Top:1},Frame:{SplitCount:2,IsShowLeftText:!1,XLineType:3,XSplitCount:2}}};var u={KLINE_ID:1,MINUTE_KLINE_ID:2},c={JSChart:null},d={data:function(){var t={scrollH:600,scrollInto:"",tabIndex:0,isHide:!1,scrollHight1:500,scrollHight2:500,scrollHight3:500,navs:[],currentNav:0,currentNavcc:0,indicatorList:["VOL"],miansList:[],navsList:[],newsList:[],bgStatusOne:"",bgStatusTwo:"",indexList:[],show:!1,timer:null,values:"",each_piece:1,mainIndicaList:[{name:"MA",select:!1},{name:"BOLL",select:!1},{name:"SAR",select:!1},{name:"EMA",select:!1},{name:"BBI",select:!1}],indicaIndexList:[{name:"VOL",select:!0},{name:"MACD",select:!1},{name:"KDJ",select:!1},{name:"BIAS",select:!1},{name:"RSI",select:!1},{name:"OBV",select:!1},{name:"BRAR",select:!1},{name:"ROC",select:!1},{name:"DMA",select:!1},{name:"TRIX",select:!1},{name:"DMI",select:!1},{name:"CCI",select:!1},{name:"CR",select:!1},{name:"PSY",select:!1},{name:"VR",select:!1},{name:"WR",select:!1},{name:"MTM",select:!1},{name:"EMV",select:!1}],kcvalues:"",kcnumber:1,showSex:!1,value11:!1,ordershow:!1,dfindex:[0],kcdfindex:[0],isShow:0,hyzs:!1,hyzy:!1,hyzsd:!0,hyzyd:!0,hyzyc:"#BDC1D0",hyzsc:"#BDC1D0",ghyzs:!1,ghyzy:!1,ghyzsd:!0,ghyzyd:!0,xdloading:!1,xdmloading:!1,mrdis:!1,mcdis:!1,gdloading:!1,gdmloading:!1,gmrdis:!1,gmcdis:!1,mhydloading:!1,mhymloading:!1,mhymrdis:!1,mhymcdis:!1,dhbts:"dhbts",sdhbts:"sdhbts",showItemId:0,pids:4,ghyzyc:"#BDC1D0",ghyzsc:"#BDC1D0",target_profit_price:0,stop_loss_price:0,gtarget_profit_price:0,gstop_loss_price:0,profit_ratio:0,mhyprices:0,user_lever:0,margin:0,handlingFee:0,gmargin:0,ghandlingFee:0,symbolQuotation:{},target_price:1,currency_name:"",originalQuotation:[],zbshow:!1,quotation:[],ckone:"MA",cktwo:"VOL",legal_name:"",currency_id:"",buy_direction:"",currentIndex:"",bzsshow:!1,indicaList:[],price:"",multiple0:0,multiple1:0,number:1,gnumber:1,model1:{userInfo:{name:"uView UI",sex:""}},shows:!1,gshows:!1,kcshows:!1,columns:[],kccolumns:[],switchingTransactions:"marketPrice",switchingTransactionsOptions:[{name:"pendingOrder"},{name:"marketPrice"}],Symbol:"btcusdt.BIT",symboles:"",OriginalSymbol:"btcusdt",ChartWidth:300,ChartHeight:300,opening:1,dataes:[],msg:null,mhytimeList:[],mhytimeArray:[],isLoding:"",mhyfee:0,mhyusers:{},KLine:{Option:l.GetKLineOption()},SocketOpen:!1,LastSubString:null,intervals:{"1min":"1","5min":"5","15min":"15","30min":"30","60min":"60","1day":"360","1week":"1800","1mon":"10800","1year":"129600"},periods:{4:"1min",5:"5min",6:"15min",7:"30min",8:"60min",0:"1day",1:"1week",2:"1mon",3:"1year"},Update:{EnableLimit:!1,LastUpdateTime:null,Frequency:5e3,Cache:null}};return t},name:"KLineChart",watch:{currency_name:function(t){},"$store.state.bgColor":function(t){this.bgStatusOne=t},"$store.state.currency":function(t){this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||0,this.currentIndex=this.$store.state.currency.currentIndex||0,this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;var e={currency_name:this.currency_name,legal_name:this.legal_name,currency_id:this.currency_id};this.showBZ(e)},currentNav:function(t){var e=this;if(1==t){this.mhytimeList=[];this.$H.get("/api/v1/seconds",!1).then((function(t){"ok"==t.type&&(t.data.data.map((function(a){e.mhytimeList.push({id:a.id,seconds:a.seconds,profit_ratio:a.profit_ratio,mhyprices:t.data.fee/100,fee:t.data.fee/100})})),e.kccolumns=[],e.kccolumns.push(e.mhytimeList),e.kcvalues=e.kccolumns[0][0].seconds,e.profit_ratio=e.kccolumns[0][0].profit_ratio,e.mhyprices=e.kccolumns[0][0].mhyprices,e.mhyfee=e.kccolumns[0][0].fee)}))}},kcnumber:function(t){this.mhyprices=this.mhyfee*t},kcvalues:function(t){var e=this;this.mhytimeList.length>0&&this.mhytimeList.map((function(a){t==a.seconds&&(e.profit_ratio=a.profit_ratio,e.mhyprices=a.mhyprices,e.mhyfee=a.fee)}))},symbolQuotation:function(t){this.calc(),this.gcalc()},number:function(t){this.calc()},multiple0:function(t){this.calc()},gnumber:function(t){""==t&&this.gnumber,this.gcalc()},multiple1:function(t){this.gcalc()},hyzs:function(t){t?(this.hyzsd=!1,this.hyzsc="#222222",0==this.stop_loss_price&&(this.stop_loss_price=this.symbolQuotation.now_price)):(this.hyzsd=!0,this.hyzsc="#BDC1D0")},hyzy:function(t){t?(this.hyzyd=!1,this.hyzyc="#222222",0==this.target_profit_price&&(this.target_profit_price=this.symbolQuotation.now_price)):(this.hyzyd=!0,this.hyzyc="#BDC1D0")},ghyzs:function(t){t?(this.ghyzsd=!1,this.ghyzsc="#222222",0==this.gstop_loss_price&&(this.gstop_loss_price=this.symbolQuotation.now_price)):(this.ghyzsd=!0,this.ghyzsc="#BDC1D0")},ghyzy:function(t){t?(this.ghyzyd=!1,this.ghyzyc="#222222",0==this.gtarget_profit_price&&(this.gtarget_profit_price=this.symbolQuotation.now_price)):(this.ghyzyd=!0,this.ghyzyc="#BDC1D0")}},onLoad:function(t){var e=this,a=this.i18n;this.navs.push(a.contracts),this.navs.push(a.second_contract),this.navsList.push(a.trade),this.navsList.push(a.pending_order),this.isHide=!1,uni.$on("page-popup",(function(t){e.msg=t.msg,e.subNames()}));t.currency_name,t.legal_name,t.currency_id,t.buy_direction,t.currentIndex;if(""==this.isLoding){this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||72,this.currentIndex=this.$store.state.currency.currentIndex||0,this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;this.currency_name,this.legal_name,this.currency_id;uni.getSystemInfo({success:function(t){e.$nextTick((function(){e.isLoding="loading"}))}})}if(""!=this.isLoding){(""==this.currency_name||this.$store.state.currency.currency_name&&this.currency_name!=this.$store.state.currency.currency_name)&&(this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||72,this.currentIndex=this.$store.state.currency.currentIndex||0),this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;var i={currency_name:this.currency_name,legal_name:this.legal_name,currency_id:this.currency_id};this.showBZ(i)}},computed:(0,s.default)({i18n:function(){return this.$t("trade")}},(0,h.mapState)({socket:function(t){return t.socket},token:function(t){return t.token},users:function(t){return t.users},currency:function(t){return t.currency}})),onReady:function(){this.$nextTick((function(){}))},onShow:function(){var t=this;this.$store.commit("changeTabbarIndex",2),this.auths((function(){}));var e=this.i18n;this.navs=[],this.navsList=[],this.navs.push(e.contracts),this.navs.push(e.second_contract),this.navsList.push(e.trade),this.navsList.push(e.pending_order),(this.$store.state.currency.opening||0==this.$store.state.currency.opening)&&this.currency_name==this.$store.state.currency.currency_name&&(this.opening=this.$store.state.currency.opening),this.opening?this.isShowes(!1):this.isShowes(!0);this.getDatas(),this.bgStatusOne||(this.bgStatusOne=this.$store.state.bgColor),this.bgStatusTwo!=this.bgStatusOne&&(!1,c.JSChart&&this.ClearChart()),this.bgStatusTwo=this.$store.state.bgColor,uni.getSystemInfo({success:function(e){var a=e.windowWidth;e.windowHeight;t.ChartWidth=a-15,t.ChartHeight=500,t.$nextTick((function(){t.getQuotation(),t.InitalHQChart(),t.OnSize(),t.CreateKLineChart(u.KLINE_ID,4)}))}})},onHide:function(){this.isHide=!0},onUnload:function(){uni.$off("page-popup"),this.isHide=!1,this.socket.removeListener("daymarket"),this.socket.removeListener("kline"),this.ClearChart()},methods:{isShowes:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.mrdis=!0,this.mcdis=!0,this.gmrdis=!0,this.gmcdis=!0,this.mhymrdis=!0,this.mhymcdis=!0):(this.mrdis=!1,this.mcdis=!1,this.gmrdis=!1,this.gmcdis=!1,this.mhymrdis=!1,this.mhymcdis=!1)},isScs:function(){var t=this,e=this;this.$H.get("/api/v1/optional/list",!1).then((function(a){var i=a.data.findIndex((function(e){return e.currency_id==t.currency_id}));e.isShow=i>-1?1:0}))},collects:function(){var t=this;if(this.isShow){this.isShow=0;this.$H.post("/api/v1/optional/del",!1,{currency_id:this.currency_id}).then((function(e){"ok"==e.type&&t.$nextTick((function(){t.isShow=0}))}))}else{this.isShow=1;this.$H.post("/api/v1/optional/add",!1,{currency_id:this.currency_id}).then((function(e){"ok"==e.type&&t.$nextTick((function(){t.isShow=1}))}))}},ChangeSymbol:function(t){this.OriginalSymbol!=t&&(this.OriginalSymbol=t,this.Symbol=t+".BIT",c.JSChart.ChangeSymbol(this.Symbol))},onChange:function(t){""==this.gnumber&&(this.gnumber=0)},newLoads:function(){this.InitalHQChart(),this.OnSize(),this.CreateKLineChart(u.KLINE_ID,4)},showBZ:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currency_id=t.currency_id,this.currency_name=t.currency_name,this.legal_name=t.legal_name,this.symboles=this.currency_name+"/"+this.legal_name,a?(this.currentIndex=t.currentIndex,this.opening=t.opening,this.opening?this.isShowes(!1):this.isShowes(!0)):this.getDatas(),this.isScs(),this.timer=setTimeout((function(){e.getQuotation()}),2600),this.bzsshow=!1,this.currentNav=0,this.hyzs=!1,this.hyzy=!1,this.hyzsd=!0,this.hyzyd=!0,this.hyzyc="#BDC1D0",this.hyzsc="#BDC1D0",this.ghyzs=!1,this.ghyzy=!1,this.ghyzsd=!0,this.ghyzyd=!0,this.target_profit_price=0,this.stop_loss_price=0,this.gtarget_profit_price=0,this.gstop_loss_price=0,this.profit_ratio=0,this.mhyprices=0,this.kcnumber=1,this.ChangeSymbol(this.currency_name)},getDatas:function(){var t=this;this.$H.get("/api/v1/quotation_new",!1).then((function(e){t.indicaList=[];for(var a=0;a<e.data.length;a++)e.data[a].quotation.map((function(e){e.currentIndex=a,0==t.currency_id&&(t.currency_id=e.currency_id);var i={id:e.currency_id,currency_id:e.currency_id,name:e.show_name,currency_name:e.currency_name,legal_name:e.legal_name,currentIndex:e.currentIndex,opening:e.currency.opening};t.indicaList.push(i)}))}))},bzsClick:function(){this.bzsshow=!0},zbclick:function(){this.zbshow=!0},zbopen:function(){},zbclose:function(){this.zbshow=!1},bzsopen:function(){},bzsclose:function(){this.bzsshow=!1},mhyOrder:function(t){var e=this;1==t?(this.mhydloading=!0,this.mhymcdis=!0):(this.mhymloading=!0,this.mhymrdis=!0);var a=this.symbolQuotation,i=(this.currency_id,this.kcnumber),r=this.kcvalues,n=Number(a.id);this.$H.post("/api/v1/MicroOrder/submit",!1,{type:t,match_id:n,currency_id:1,seconds:r,number:i}).then((function(a){1==t?(e.mhydloading=!1,e.mhymcdis=!1):(e.mhymloading=!1,e.mhymrdis=!1),"ok"==a.type&&(e.ordershow=!0,e.$store.commit("setOrNum",2),e.$H.get("/api/v1/user",!1).then((function(t){e.$store.commit("setUser",t.data)})))}))},orders:function(){this.ordershow=!1,uni.navigateTo({url:"/pages/order/order"})},can:function(){this.ordershow=!1},subNames:function(){if("ok"==this.msg){var t=uni.getSubNVueById("modal");t.hide("none",300)}if("can"==this.msg){var e=uni.getSubNVueById("modal");e.hide("none",300)}},orderAppClicks:function(){var t=uni.getSubNVueById("bottoms");t.show("slide-in-bottom",300)},orderClicks:function(t,e){var a=this;1==t?e?(this.xdloading=!0,this.mcdis=!0):(this.gdloading=!0,this.gmcdis=!0):e?(this.xdmloading=!0,this.mrdis=!0):(this.gdmloading=!0,this.gmrdis=!0);var i=this.number,r=this.multiple0,n=this.currency_id,s=this.stop_loss_price,o=this.target_profit_price,h=this.gnumber,l=this.multiple1,u=i,c=r,d=s;this.hyzs||(d=0);var f=o;this.hyzy||(f=0);var C=0;e||(u=h,c=l,C=this.target_price,d=this.gstop_loss_price,this.ghyzs||(d=0),f=this.gtarget_profit_price,this.ghyzy||(f=0)),this.$H.post("/api/v1/lever/submit",!1,{share:u,multiple:c,legal_id:1,currency_id:n,type:t,status:e,target_profit_price:f,stop_loss_price:d,target_price:C}).then((function(i){1==t?e?(a.xdloading=!1,a.mcdis=!1):(a.gdloading=!1,a.gmcdis=!1):e?(a.xdmloading=!1,a.mrdis=!1):(a.gdmloading=!1,a.gmrdis=!1),"ok"==i.type&&(a.ordershow=!0,0==e&&a.$store.commit("setOrNum",1),a.$H.get("/api/v1/user",!1).then((function(t){a.$store.commit("setUser",t.data)})))}))},sectionChange:function(t){this.currentNav=t},changeHandler:function(t){},getQuotation:function(){var t=this;this.$H.get("/api/v1/quotation_new",!1).then((function(e){t.originalQuotation=e.data[t.currentIndex].quotation.map((function(e){return e.precision_length=t.$utils.getPrecisionLength(e.now_price),e})),t.quotation=t.originalQuotation,t.quotation=t.originalQuotation;var a=t.originalQuotation.find((function(e){return e.currency_id==t.currency_id}));if(a){t.symbolQuotation=a;var i=[];t.symbolQuotation.multiple.map((function(t){i.push(t.value)})),t.columns=[],t.columns.push(i),0==t.symbolQuotation.lever_min_share?t.number=1:t.number=t.symbolQuotation.lever_min_share,t.multiple0=t.columns[0][0],t.multiple1=t.columns[0][0],t.price=a.now_price}t.startSocket(),t.calc(),t.gcalc()}))},startSocket:function(){var t=this;this.currency_id;this.socket.on("daymarket",(function(e){t.currency_name==e.currency_name&&t.legal_name==e.legal_name&&(t.symbolQuotation=(0,s.default)((0,s.default)({},t.symbolQuotation),e),t.currency_id=e.currency_id)}))},confirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.uPicker;this.multiple0=e[0],this.shows=!1},cancel:function(t){this.shows=!1},gconfirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.guPicker;this.multiple1=e[0],this.gshows=!1},gcancel:function(t){this.gshows=!1},kcconfirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.uPickers;this.kcvalues=e[0].seconds,this.kcshows=!1},kccancel:function(t){this.kcshows=!1},onChangeTab:function(t){this.changesTabs(t.detail.current)},changesTabs:function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto="tab"+t)},open:function(){},close:function(){this.ordershow=!1},calc:function(){var t=this.symbolQuotation,e=this.buyDirection,a=this.multiple0,i=this.number,r=Number(t.spread),n=Number(t.lever_share_num),s=Number(t.lever_trade_fee),o=Number(t.now_price),h=parseFloat(o*r/100),l=0;l=0==e?parseFloat(o+h):parseFloat(o-h);var u=parseFloat(l*n*i);this.each_piece=t.each_piece,this.margin=(u/a*this.each_piece).toFixed(5),this.handlingFee=parseFloat(u*s/100*this.each_piece).toFixed(5)},gcalc:function(){var t=this.symbolQuotation,e=this.buyDirection,a=this.multiple1,i=this.gnumber,r=Number(t.spread),n=Number(t.lever_share_num),s=Number(t.lever_trade_fee),o=Number(t.now_price),h=parseFloat(o*r/100),l=0;l=0==e?parseFloat(o+h):parseFloat(o-h);var u=parseFloat(l*n*i);this.each_piece=t.each_piece,this.gmargin=(u/a*this.each_piece).toFixed(5),this.ghandlingFee=(parseFloat(u*s/100)*this.each_piece).toFixed(5)},loadmore:function(){this.quotation=this.resData},ChangePeriod:function(t){this.pids=t,-1==t?c.JSChart.KLineType!=u.MINUTE_KLINE_ID&&(this.ClearChart(),this.CreateKLineChart(u.MINUTE_KLINE_ID,4)):c.JSChart.KLineType==u.KLINE_ID?c.JSChart.ChangePeriod(t):(this.ClearChart(),this.CreateKLineChart(u.KLINE_ID,t))},ChangeIndex:function(t,e,a){if(t){var i=this.indicatorList.findIndex((function(t){return t==e}));if(i>-1)c.JSChart.RemoveIndexWindow(i+1),this.indicatorList.splice(i,1);else{if(this.indicatorList.length>=3)return;this.indicatorList.push(e),c.JSChart.AddIndexWindow(e)}a.select=!a.select}else{var r=this.miansList.findIndex((function(t){return t==e}));if(r>-1)c.JSChart.DeleteOverlayWindowsIndex(e),this.miansList.splice(r,1);else{this.miansList.push(e);var n={WindowIndex:t,IndexName:e,Identify:e,ShowRightText:!1,OverlayIndexFrameWidth:30,ShowToolbar:!1,IsShowIndexTitle:!1};c.JSChart.AddOverlayIndex(n)}a.select=!a.select}},OnSize:function(){this.OnSize_h5()},OnSize_h5:function(){var t=this.ChartHeight-150,e=this.ChartWidth,a=this.$refs.kline;a.style.width=e+"px",a.style.height=t+"px",c.JSChart&&c.JSChart.OnSize()},InitalHQChart:function(){o.default.MARKET_SUFFIX_NAME.GetBITDecimal=this.GetBITDecimal;var t=o.default.HQChartStyle.GetStyleConfig(o.default.STYLE_TYPE_ID.BLACK_ID);t.FrameTitleBGColor="rgb(255,255,255)","black"==this.$store.state.bgColor&&(t.FrameTitleBGColor="rgb(14, 24, 46)"),t.UpBarColor="#0166fc",t.DownBarColor="rgb(238,21,21)",t.FrameLatestPrice.UpBarColor="#0166fc",t.FrameLatestPrice.DownBarColor="rgb(238,21,21)",o.default.JSChart.SetStyle(t),this.$refs.kline.style.backgroundColor=t.FrameTitleBGColor},SetHQChartStyle:function(t){t.BGColor="rgb(155,255,255)",t.FrameTitleBGColor="rgb(0,0,0)",t.FrameSplitTextColor="rgb(101,117,138)",t.UpBarColor="#0166fc",t.UpTextColor=t.UpBarColor,t.DownBarColor="rgb(210,73,99)",t.DownTextColor=t.DownBarColor,t.UnchagneBarColor=t.UpBarColor,t.UnchagneTextColor=t.UpBarColor,t.Index.LineColor[0]="rgb(88,106,126)",t.Index.LineColor[1]="rgb(222,217,167)",t.Index.LineColor[2]="rgb(113,161,164)",t.FrameLatestPrice.UpBarColor="#0166fc",t.FrameLatestPrice.DownBarColor="rgb(210,73,99)",t.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UpBarColor,t.Frame.XBottomOffset=2},GetBITDecimal:function(t){return 5},ClearChart:function(){c.JSChart&&(c.JSChart.ChartDestory(),c.JSChart=null);var t=document.getElementById("kline");while(t.hasChildNodes())t.removeChild(t.lastChild)},CreateKLineChart_h5:function(t,e){if(!c.JSChart){o.default.HQChartStyle.GetStyleConfig(o.default.STYLE_TYPE_ID.BLACK_ID);this.KLine.Option.Symbol=this.Symbol;var a=o.default.JSChart.Init(this.$refs.kline);t==u.MINUTE_KLINE_ID?this.KLine.Option=l.GetMinuteOption():(t=u.KLINE_ID,this.KLine.Option=l.GetKLineOption()),this.KLine.Option.NetworkFilter=this.NetworkFilter,this.KLine.Option.Symbol=this.Symbol,this.KLine.Option.KLine.Period=e,o.default.JSChart.GetResource().FrameLogo.Text=null,a.SetOption(this.KLine.Option),c.JSChart=a,c.JSChart.KLineType=t}},CreateKLineChart_app:function(t,e){var a=this;if(!c.JSChart){var i=new JSCommon.JSCanvasElement;i.ID="kline2",i.Height=this.ChartHeight,i.Width=this.ChartWidth,c.JSChart=JSCommon.JSChart.Init(i),t==u.MINUTE_KLINE_ID?this.KLine.Option=l.GetMinuteOption():(t=u.KLINE_ID,this.KLine.Option=l.GetKLineOption()),this.KLine.Option.NetworkFilter=function(t,e){a.NetworkFilter(t,e)},this.KLine.Option.Symbol=this.Symbol,this.KLine.Option.IsClickShowCorssCursor=!0,this.KLine.Option.IsFullDraw=!0,this.KLine.Option.KLine.Period=e,JSCommon.JSChart.GetResource().FrameLogo.Text=null,c.JSChart.SetOption(this.KLine.Option),c.JSChart.KLineType=t}},CreateKLineChart:function(t,e){this.Update.Cache=null,this.CreateKLineChart_h5(t,e)},CreateDepthChart:function(){this.Update.Cache=null,this.CreateDepthChart_h5()},CreateDepthChart_h5:function(){if(!c.JSChart){var t=o.default.JSChart.Init(this.$refs.kline),e=l.GetDepthOption();e.Symbol=this.Symbol,e.NetworkFilter=this.NetworkFilter,t.SetOption(e),c.JSChart=t}},CreateDepthChart_app:function(){if(!c.JSChart){var t=new JSCommon.JSCanvasElement;t.ID="kline2",t.Height=this.ChartHeight,t.Width=this.ChartWidth;var e=JSCommon.JSChart.Init(t),a=l.GetDepthOption();a.Symbol=this.Symbol,a.IsFullDraw=!0,a.NetworkFilter=this.NetworkFilter,e.SetOption(a),c.JSChart=e}},ChangeDepthChart:function(){c.JSChart&&"DepthChartContainer"==c.JSChart.JSChartContainer.ClassName||(this.ClearChart(),this.CreateDepthChart())},NetworkFilter:function(t,e){switch(t.Name){case"KLineChartContainer::ReqeustHistoryMinuteData":this.RequestHistoryMinuteData(t,e);break;case"KLineChartContainer::RequestFlowCapitalData":this.RequestFlowCapitalData(t,e);break;case"KLineChartContainer::RequestHistoryData":this.RequestHistoryData(t,e);break;case"DepthChartContainer::RequestDepthData":this.RequestDepthData(t,e);break}},SendWSHeartMessage:function(){if(this.SocketOpen){var t={pong:(new Date).getTime()},e=JSON.stringify(t);uni.sendSocketMessage({data:e})}},SendUnSubscribeMessage:function(){if(this.LastSubString&&this.SocketOpen){var t=JSON.stringify({unsub:this.LastSubString});uni.sendSocketMessage({data:t}),this.LastSubString=null}},RequestWSData:function(t,e){var a=this;uni.onSocketMessage((function(i){if("40"!=i.data){var r=i.data.indexOf("[");r>2&&(r=i.data.indexOf("{")),i.data=i.data.substring(r,i.length);var n=JSON.parse(i.data);n.ping?a.SendWSHeartMessage():n.unsubbed||n.subbed||e(n,t)}})),uni.onSocketError((function(t){console.log(t)}))},GeneratePostData:function(t,e){var a=new Map([[4,"1min"],[5,"5min"],[6,"15min"],[7,"30min"],[8,"60min"],[0,"1day"],[1,"1week"],[2,"1mon"],[3,"1year"]]),i=a.get(e),r={req:"market.".concat(t,".kline.").concat(i),symbol:t,period:i},n={sub:"market.".concat(t,".kline.").concat(i),symbol:t,period:i};return{Req:r,Sub:n}},RequestHistoryMinuteData:function(t,e){t.PreventDefault=!0,this.Update.Cache=null;var a=t.Request.Data.symbol,i=t.Self.Period,r=this.GeneratePostData(this.OriginalSymbol,i),n={SendData:r.Req,Symbol:a,OriginalSymbol:this.OriginalSymbol,Period:i,Callback:e};this.RecvHistoryMinuteData({},n)},RecvHistoryMinuteData:function(t,e){var a=this;return(0,n.default)((0,r.default)().mark((function t(){var i,n,s,o,h,l,u,c,d,f,C;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={code:0,data:[]},i.symbol=e.Symbol,i.name=e.OriginalSymbol,n=Date.parse(new Date)/1e3-24*a.intervals[e.SendData.period]*60*60,s=Date.parse(new Date)/1e3,t.next=7,a.$H.post("/api/v1/klineMarket",!1,{symbol:a.symboles,period:e.SendData.period,from:n,to:s});case 7:for(l in o=t.sent,h=null,o.data)u=o.data[l],c=new Date,c.setTime(u.time),d=1e4*c.getFullYear()+100*(c.getMonth()+1)+c.getDate(),f=100*c.getHours()+c.getMinutes(),C=[d,h,parseFloat(u.open),parseFloat(u.high),parseFloat(u.low),parseFloat(u.close),parseFloat(u.volume),null,f],h=u.close,i.data.push(C);e.Callback(i),a.SubscribeMinuteRealtimeData(e);case 12:case"end":return t.stop()}}),t)})))()},SubscribeMinuteRealtimeData:function(t){var e=this,a=this.GeneratePostData(t.OriginalSymbol,t.Period),i={SendData:a.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};this.socket.on("kline",(function(t){e.RecvMinuteRealtimeData(t,i)}))},RecvMinuteRealtimeData:function(t,e){if(c.JSChart){var a=c.JSChart.JSChartContainer,i=a.Period,r=a.Symbol;if(r==e.Symbol&&i==e.Period){var n={code:0,data:[],ver:2};n.symbol=e.Symbol,n.name=e.OriginalSymbol;var s=null;if(t.currency_name==this.currency_name&&this.periods[i]===t.period){s=new Date,s.setTime(1e3*t.time);var o=1e4*s.getFullYear()+100*(s.getMonth()+1)+s.getDate(),h=100*s.getHours()+s.getMinutes(),l=[o,null,parseFloat(t.open),parseFloat(t.high),parseFloat(t.low),parseFloat(t.close),parseFloat(t.volume),null,h];if(this.Update.EnableLimit){if(this.Update.Cache){var u=this.Update.Cache;t=u.Data[u.Data.length-1];t[0]==l[0]&&t[8]==l[8]?u.Data[u.Data.length-1]=l:u.Data.push(l)}else this.Update.Cache={Data:[l]};var d=!0;if(this.Update.LastUpdateTime){var f=Date.now();f-this.Update.LastUpdateTime<this.Update.Frequency&&(d=!1)}if(!d)return;n.data=this.Update.Cache.Data,this.Update.Cache=null,this.Update.LastUpdateTime=Date.now()}else n.data.push(l);a.RecvMinuteRealtimeData(n)}}}},RequestHistoryData:function(t,e){t.PreventDefault=!0,this.Update.Cache=null;var a=t.Request.Data.symbol,i=t.Self.Period,r=this.GeneratePostData(this.OriginalSymbol,i),n={SendData:r.Req,Symbol:a,OriginalSymbol:this.OriginalSymbol,Period:i,Callback:e};this.RecvHistoryData({},n)},RecvHistoryData:function(t,e){var a=this;return(0,n.default)((0,r.default)().mark((function t(){var i,n,s,o,h,l,u,c,d,f;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={code:0,data:[]},i.symbol=e.Symbol,i.name=e.OriginalSymbol,n=Date.parse(new Date)/1e3-24*a.intervals[e.SendData.period]*60*60,s=Date.parse(new Date)/1e3,t.next=7,a.$H.post("/api/v1/klineMarket",!1,{symbol:a.symboles,period:e.SendData.period,from:n,to:s});case 7:for(l in o=t.sent,h=null,o.data)u=o.data[l],c=new Date,c.setTime(u.time),d=1e4*c.getFullYear()+100*(c.getMonth()+1)+c.getDate(),100*c.getHours()+c.getMinutes(),f=[d,parseFloat(h),parseFloat(u.open),parseFloat(u.high),parseFloat(u.low),parseFloat(u.close),parseFloat(u.amount),null],h=u.close,i.data.push(f);e.Callback(i),a.SubscribRealtimeData(e);case 12:case"end":return t.stop()}}),t)})))()},SubscribRealtimeData:function(t){var e=this,a=this.GeneratePostData(t.OriginalSymbol,t.Period),i={SendData:a.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};this.socket.on("kline",(function(t){e.RecvRealtimeData(t,i)}))},RecvRealtimeData:function(t,e){if(c.JSChart){var a=c.JSChart.JSChartContainer,i=a.Period,r=a.Symbol;if(r==e.Symbol&&i==e.Period&&"BTC"==t.currency_name&&this.periods[i]===t.period){var n={code:0,stock:[]};if(this.Update.EnableLimit){var s=Date.now();if(this.Update.LastUpdateTime&&s-this.Update.LastUpdateTime<this.Update.Frequency)return;this.Update.LastUpdateTime=s}var o={symbol:e.Symbol,name:e.OriginalSymbol},h=new Date;h.setTime(1e3*t.time);var l=1e4*h.getFullYear()+100*(h.getMonth()+1)+h.getDate();h.getHours(),h.getMinutes();o.date=l,o.yclose=null,o.open=t.open,o.high=t.high,o.low=t.low,o.price=t.close,o.vol=t.volume,o.amount=null,n.stock.push(o),a.RecvRealtimeData(n)}}},GeneratePostDepthData:function(t,e){var a={sub:"market.".concat(t,".depth.").concat(e),symbol:t};return{Req:{},Sub:a}},RequestDepthData:function(t,e){var a=this;t.PreventDefault=!0,this.Update.Cache=null;var i=t.Request.Data.symbol,r=(t.Self.Period,this.GeneratePostDepthData(this.OriginalSymbol,"step1")),n={SendData:r.Sub,Symbol:i,OriginalSymbol:this.OriginalSymbol,Callback:e};this.RequestWSData(n,(function(t,e){a.RecvDepthData(t,e)}))},RecvDepthData:function(t,e){if(t.ch==e.SendData.sub&&c.JSChart){var a=c.JSChart.JSChartContainer,i=a.Symbol;if(i==e.Symbol&&"DepthChartContainer"==a.ClassName){var r=t.tick,n=[],s=[];if(r.asks)for(var o=0;o<r.asks.length;++o){var h=r.asks[o];n.push([h[0],h[1]])}if(r.bids)for(o=0;o<r.bids.length;++o){h=r.bids[o];s.push([h[0],h[1]])}var l={code:0,asks:n,bids:s,datatype:"snapshot"};a.ChartSplashPaint.EnableSplash(!1),a.RecvDepthData(l)}}},KLineTouchStart:function(t){c.JSChart&&c.JSChart.OnTouchStart(t)},KLineTouchMove:function(t){c.JSChart&&c.JSChart.OnTouchMove(t)},KLineTouchEnd:function(t){c.JSChart&&c.JSChart.OnTouchEnd(t)}}};e.default=d},b9a2:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{tips:"111",code:"",confirmpasswords:null,passwords:null,seconds:"",loading:!1,passwordShow:!0,confirmpasswordShow:!0,getcode:null,email:"",types:"password",confirmtypes:"password"}},watch:{},mounted:function(){this.$store.state.token;this.email=this.$store.state.users.email;uni.setNavigationBarTitle({title:this.$t("mine.change_password")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},computed:{i18n:function(){return this.$t("reset")},suffixIcon:function(){return this.passwordShow?"iconfont icon-biyan":"eye-filled"},confirmsuffixIcon:function(){return this.confirmpasswordShow?"iconfont icon-biyan":"eye-filled"}},methods:{suffix:function(){this.types="password"===this.types?"text":"password",this.passwordShow=!this.passwordShow,this.passwordShow&&(this.types="password")},confirmsuffix:function(){this.confirmtypes="password"===this.confirmtypes?"text":"password",this.confirmpasswordShow=!this.confirmpasswordShow,this.passwordShow&&(this.types="password")},obuttons:function(){var t=this,e=this.code,a=this.passwords,i=this.confirmpasswords;if(!a)return uni.$u.toast(this.$t("reset.enter_new_password")),!1;this.loading=!0;this.$H.post("/api/v1/forgetPassword",!1,{code:e,password:a,repassword:i}).then((function(e){if(console.log(e.data),t.loading=!1,403==e.data.code)return uni.$u.toast(e.data.data.message),!1;"ok"==e.type&&(uni.$u.toast(t.$t("deposit.completed")),setTimeout((function(){uni.navigateBack({delta:1})}),300))}))},obutton:function(){this.loading=!0},codeChange:function(t){"获取验证码"!=t&&"重新获取"!=t||(t=this.$t("reset.get_ver_code")),this.tips=t},getCode:function(){var t=this,e=this.email;if(this.$refs.uCode.canGetCode){uni.showLoading({});this.$H.post("/api/v1/sms_mail",!1,{user_string:e}).then((function(e){uni.hideLoading(),"ok"==e.type&&(console.log(e),t.getcode=1,t.$refs.uCode.start())}))}},change:function(t){console.log("change",t)}}};e.default=i},b9f6:function(t,e,a){"use strict";var i=a("41d1"),r=a.n(i);r.a},ba8a:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".bnsss[data-v-29bc595b] .uni-picker-view-mask{background:inherit}.bnsss[data-v-29bc595b] .u-picker__view__column__item{color:#fff}.bnsss[data-v-29bc595b] .u-popup__content{border-radius:10px;background:#222}.wnsss[data-v-29bc595b] .u-popup__content{border-radius:10px}.scroll-view[data-v-29bc595b]{width:95%!important;height:%?85?%;line-height:%?85?%;white-space:nowrap;background:#f5f6fa;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:148px}uni-button[data-v-29bc595b]{line-height:30px!important;color:#fff!important;font-size:14px!important}.scroll-view .scroll-items[data-v-29bc595b]{display:inline-block;width:100%;height:%?80?%;line-height:%?80?%;text-align:center;background:var(--mainColor)!important;border-radius:6px;color:#fff!important;font-weight:700;font-size:14px}.scroll-view .scroll-item[data-v-29bc595b]{display:inline-block;width:100%;line-height:%?85?%;height:%?85?%;text-align:center;border-radius:148px;color:#626779;font-size:14px}.section-area[data-v-29bc595b] ::-webkit-scrollbar{width:0;height:0;color:transparent}.blacks[data-v-29bc595b]{background:#22252f}.whiles[data-v-29bc595b]{background:#fff}[data-v-29bc595b] .uni-scroll-view-content{overflow:hidden!important}.blacks[data-v-29bc595b] .u-border{border-color:#333748!important}.blacks[data-v-29bc595b] .uni-input-input{color:#fff;padding:0!important}.u-textarea[data-v-81cd9d32][data-v-29bc595b]{padding-left:0}.blacks .u-input[data-v-fdbb9fe6][data-v-29bc595b]{\n\t\t/* padding: 12px 9px !important; */background-color:#fff}.blacks .u-input[data-v-29bc595b]{\n\t\t/* padding: 12px 9px !important; */background-color:#222!important;\n\t\t/* border: 1px solid #373944 !important; */color:#222!important}.blacks .u-textarea[data-v-29bc595b]{background:#222;color:#fff}.blacks[data-v-29bc595b] .u-textarea__field{color:#fff}uni-page-body[data-v-29bc595b]{position:inherit;overflow:initial}.submit-btn[data-v-29bc595b]{background:var(--mainColor);margin-top:20px;border-radius:%?1000?%;border:0;font-size:12px;height:45px;color:#fff;line-height:45px!important}",""]),t.exports=e},bad6:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("d4b5"),a("5ef2"),a("5c47"),a("a1c1"),a("fd3c");var r=i(a("9004")),n=a("44d8"),s={components:{loginComponent:function(){return Promise.resolve().then((function(){return(0,r.default)(a("0c44"))}))},tradingComponent:function(){return Promise.resolve().then((function(){return(0,r.default)(a("5edd"))}))},personalInformation:function(){return Promise.resolve().then((function(){return(0,r.default)(a("63e8"))}))},registerComponent:function(){return Promise.resolve().then((function(){return(0,r.default)(a("bfb6"))}))}},data:function(){return{formData:{password:""},types:"password",confirmtypes:"password",usestring:"",invitecode:"",code:"",getcode:null,registerSwitch:!1,loading:!1,tips:"",seconds:"",values:null,value:null,passwordShow:!0,confirmpasswords:"",passwords:"",confirmpasswordShow:!0,xyname:null,checkboxValue1:[],clangs:{},language:[],modalName:null}},mounted:function(t){t&&(this.invitecode=t.invite_code),this.language=n.langs,this.setLoads()},onShow:function(){this.setLgs()},methods:{sendData:function(){this.$emit("data-sent","register")},ystz:function(t){if(t){var e="/pages/articles/articles?item="+encodeURIComponent(JSON.stringify(t));e.indexOf("%")>-1&&(e=e.replace(/%/g,"%25")),uni.navigateTo({url:e})}else{var a="/pages/articles/articles?item="+encodeURIComponent(JSON.stringify(t));a.indexOf("%")>-1&&(a=a.replace(/%/g,"%25")),uni.navigateTo({url:a})}},setLoads:function(){var t=uni.getStorageSync("lang")||"en";this.language.map((function(e){return e.selected=!1,e.value==t&&(e.selected=!0),e}))},setLgs:function(){var t=this,e=uni.getStorageSync("lang")||"en";this.language.map((function(a){return a.value==e&&(t.clangs=a),a}))},setLang:function(t){var e=this.language.map((function(e){return e.selected=!1,e.value==t.value&&(e.selected=!0),e}));console.log("22222222"),console.log(e),this.language=e,this._i18n.locale=t.value,console.log(t.value),uni.setStorageSync("lang",t.value),this.$utils.setTabbar(this),this.clangs=t,this.hideModal(),document.querySelector(".u-button__text").innerText=this.$t("reset.get_ver_code")},showModal:function(t){uni.navigateTo({url:"/pages/language/language"})},hideModal:function(t){this.modalName=null},obutton:function(){this.loading=!0},backs:function(){uni.navigateBack({delta:1})},isShow:function(){this.types="password"===this.types?"text":"password"},checkboxChange:function(){},obuttons:function(){var t=this,e=this.usestring,a=this.code,i=(this.invitecode,this.passwords),r=this.confirmpasswords;this.checkboxValue1;this.loading=!0;this.$H.post("/api/v1/user/register",!1,{user_string:e,code:a,password:i,re_password:r,type:"email"}).then((function(e){t.loading=!1,"ok"==e.type&&(uni.$u.toast(t.$t("deposit.completed")),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),300))}))},codeChange:function(t){"获取验证码"!=t&&"重新获取"!=t||(t=this.$t("reset.get_ver_code")),this.tips=t},registerSwitchCloseIndex:function(){},getCode:function(){var t=this,e=this.usestring;this.code,this.invitecode,this.passwords,this.confirmpasswords;if(this.$refs.uCode.canGetCode){uni.showLoading({});this.$H.post("/api/v1/sms_mail",!1,{user_string:e}).then((function(e){uni.hideLoading(),"ok"==e.type&&(console.log(e),t.getcode=1,t.$refs.uCode.start())}))}},suffix:function(){this.types="password"===this.types?"text":"password",this.passwordShow=!this.passwordShow,this.passwordShow&&(this.types="password")},confirmsuffix:function(){this.confirmtypes="password"===this.confirmtypes?"text":"password",this.confirmpasswordShow=!this.confirmpasswordShow,this.passwordShow&&(this.types="password")}},computed:{i18n:function(){return this.$t("register")},i18nReset:function(){return this.$t("reset")},i18n2:function(){return this.$t("invite")},suffixIcon:function(){return this.passwordShow?"iconfont icon-biyan":"eye-filled"},confirmsuffixIcon:function(){return this.confirmpasswordShow?"iconfont icon-biyan":"eye-filled"}}};e.default=s},bba6:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uIcon:a("b1c0").default,uLine:a("b62d").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-cell",class:[t.customClass],style:[t.$u.addStyle(t.customStyle)],attrs:{"hover-class":t.disabled||!t.clickable&&!t.isLink?"":"u-cell--clickable","hover-stay-time":250},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"u-cell__body",class:[t.center&&"u-cell--center","large"===t.size&&"u-cell__body--large"]},[a("v-uni-view",{staticClass:"u-cell__body__content"},[t.$slots.icon||t.icon?a("v-uni-view",{staticClass:"u-cell__left-icon-wrap"},[t.$slots.icon?t._t("icon"):a("u-icon",{attrs:{name:t.icon,"custom-style":t.iconStyle,size:"large"===t.size?22:18}})],2):t._e(),a("v-uni-view",{staticClass:"u-cell__title"},[t._t("title",[t.title?a("v-uni-text",{staticClass:"u-cell__title-text",class:[t.disabled&&"u-cell--disabled","large"===t.size&&"u-cell__title-text--large"],style:[t.titleTextStyle]},[t._v(t._s(t.title))]):t._e()]),t._t("label",[t.label?a("v-uni-text",{staticClass:"u-cell__label",class:[t.disabled&&"u-cell--disabled","large"===t.size&&"u-cell__label--large"]},[t._v(t._s(t.label))]):t._e()])],2)],1),t._t("value",[t.$u.test.empty(t.value)?t._e():a("v-uni-text",{staticClass:"u-cell__value",class:[t.disabled&&"u-cell--disabled","large"===t.size&&"u-cell__value--large"]},[t._v(t._s(t.value))])]),t.$slots["right-icon"]||t.isLink?a("v-uni-view",{staticClass:"u-cell__right-icon-wrap",class:["u-cell__right-icon-wrap--"+t.arrowDirection]},[t.$slots["right-icon"]?t._t("right-icon"):a("u-icon",{attrs:{name:t.rightIcon,"custom-style":t.rightIconStyle,color:t.disabled?"#c8c9cc":"info",size:"large"===t.size?18:16}})],2):t._e()],2),t.border?a("u-line"):t._e()],1)},n=[]},bbff:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"ani",class:t.customClass,style:t.transformStyles,attrs:{animation:t.animationData},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t._t("default")],2)},r=[]},bdae:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{showScrollbar:{type:Boolean,default:uni.$u.props.list.showScrollbar},lowerThreshold:{type:[String,Number],default:uni.$u.props.list.lowerThreshold},upperThreshold:{type:[String,Number],default:uni.$u.props.list.upperThreshold},scrollTop:{type:[String,Number],default:uni.$u.props.list.scrollTop},offsetAccuracy:{type:[String,Number],default:uni.$u.props.list.offsetAccuracy},enableFlex:{type:Boolean,default:uni.$u.props.list.enableFlex},pagingEnabled:{type:Boolean,default:uni.$u.props.list.pagingEnabled},scrollable:{type:Boolean,default:uni.$u.props.list.scrollable},scrollIntoView:{type:String,default:uni.$u.props.list.scrollIntoView},scrollWithAnimation:{type:Boolean,default:uni.$u.props.list.scrollWithAnimation},enableBackToTop:{type:Boolean,default:uni.$u.props.list.enableBackToTop},height:{type:[String,Number],default:uni.$u.props.list.height},width:{type:[String,Number],default:uni.$u.props.list.width},preLoadScreen:{type:[String,Number],default:uni.$u.props.list.preLoadScreen}}};e.default=i},be42:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("4028").default,uniBadge:a("fc44").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-list-item",class:{"uni-list-item--disabled":t.disabled},style:{"background-color":t.customStyle.backgroundColor},attrs:{"hover-class":!t.clickable&&!t.link||t.disabled||t.showSwitch?"":"uni-list-item--hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t.isFirstChild?t._e():a("v-uni-view",{staticClass:"border--left",class:{"uni-list--border":t.border}}),a("v-uni-view",{staticClass:"uni-list-item__container",class:{"container--right":t.showArrow||t.link,"flex--direction":"column"===t.direction},style:{paddingTop:t.padding.top,paddingLeft:t.padding.left,paddingRight:t.padding.right,paddingBottom:t.padding.bottom}},[t._t("header",[a("v-uni-view",{staticClass:"uni-list-item__header"},[t.thumb?a("v-uni-view",{staticClass:"uni-list-item__icon"},[a("v-uni-image",{staticClass:"uni-list-item__icon-img",class:["uni-list--"+t.thumbSize],attrs:{src:t.thumb}})],1):t.showExtraIcon?a("v-uni-view",{staticClass:"uni-list-item__icon"},[a("uni-icons",{attrs:{customPrefix:t.extraIcon.customPrefix,color:t.extraIcon.color,size:t.extraIcon.size,type:t.extraIcon.type}})],1):t._e()],1)]),t._t("body",[a("v-uni-view",{staticClass:"uni-list-item__content",class:{"uni-list-item__content--center":t.thumb||t.showExtraIcon||t.showBadge||t.showSwitch}},[t.title?a("v-uni-text",{staticClass:"uni-list-item__content-title",class:[0!==t.ellipsis&&t.ellipsis<=2?"uni-ellipsis-"+t.ellipsis:""]},[t._v(t._s(t.title))]):t._e(),t.note?a("v-uni-text",{staticClass:"uni-list-item__content-note"},[t._v(t._s(t.note))]):t._e()],1)]),t._t("footer",[t.rightText||t.showBadge||t.showSwitch?a("v-uni-view",{staticClass:"uni-list-item__extra",class:{"flex--justify":"column"===t.direction}},[t.rightText?a("v-uni-text",{staticClass:"uni-list-item__extra-text",staticStyle:{color:"#222222","margin-right":"5px"}},[t._v(t._s(t.rightText))]):t._e(),t.showBadge?a("uni-badge",{attrs:{type:t.badgeType,text:t.badgeText,"custom-style":t.badgeStyle}}):t._e(),t.showSwitch?a("v-uni-switch",{attrs:{color:"#3F47F4",disabled:t.disabled,checked:t.switchChecked},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwitchChange.apply(void 0,arguments)}}}):t._e()],1):t._e()])],2),t.showArrow||t.link?a("uni-icons",{staticClass:"uni-icon-wrapper",attrs:{size:16,color:"#bbb",type:"arrowright"}}):t._e()],1)},n=[]},bea3:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("4028").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-easyinput",class:{"uni-easyinput-error":t.msg},style:t.boxStyle},[a("v-uni-view",{staticClass:"uni-easyinput__content",class:t.inputContentClass,style:t.inputContentStyle},[t.prefixIcon?a("uni-icons",{staticClass:"content-clear-icon",attrs:{type:t.prefixIcon,color:"#c0c4cc",size:"22"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickIcon("prefix")}}}):t._e(),"textarea"===t.type?a("v-uni-textarea",{staticClass:"uni-easyinput__content-textarea",class:{"input-padding":t.inputBorder},attrs:{name:t.name,value:t.val,placeholder:t.placeholder,placeholderStyle:t.placeholderStyle,disabled:t.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:t.inputMaxlength,focus:t.focused,autoHeight:t.autoHeight,"cursor-spacing":t.cursorSpacing},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t._Blur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t._Focus.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),t.onkeyboardheightchange.apply(void 0,arguments)}}}):a("v-uni-input",{staticClass:"uni-easyinput__content-input",style:t.inputStyle,attrs:{type:"password"===t.type?"text":t.type,name:t.name,value:t.val,password:!t.showPassword&&"password"===t.type,placeholder:t.placeholder,placeholderStyle:t.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:t.disabled,maxlength:t.inputMaxlength,focus:t.focused,confirmType:t.confirmType,"cursor-spacing":t.cursorSpacing},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t._Focus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t._Blur.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),t.onkeyboardheightchange.apply(void 0,arguments)}}}),t._t("right")],2)],1)},n=[]},bea5:function(t,e,a){"use strict";a.r(e);var i=a("1b8a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},bfb6:function(t,e,a){"use strict";a.r(e);var i=a("43ab"),r=a("0270");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("b1c4");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"daaaf85a",null,!1,i["a"],void 0);e["default"]=o.exports},bfcf:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uIcon:a("b1c0").default,uLink:a("7050").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("v-uni-view",{staticClass:"u-text",class:[],style:{margin:t.margin,justifyContent:"left"===t.align?"flex-start":"center"===t.align?"center":"flex-end"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},["price"===t.mode?a("v-uni-text",{class:["u-text__price",t.type&&"u-text__value--"+t.type],style:[t.valueStyle]},[t._v("￥")]):t._e(),t.prefixIcon?a("v-uni-view",{staticClass:"u-text__prefix-icon"},[a("u-icon",{attrs:{name:t.prefixIcon,customStyle:t.$u.addStyle(t.iconStyle)}})],1):t._e(),"link"===t.mode?a("u-link",{attrs:{text:t.value,href:t.href,underLine:!0}}):t.openType&&t.isMp?[a("v-uni-button",{staticClass:"u-reset-button u-text__value",style:[t.valueStyle],attrs:{"data-index":t.index,openType:t.openType,lang:t.lang,"session-from":t.sessionFrom,"send-message-title":t.sendMessageTitle,"send-message-path":t.sendMessagePath,"send-message-img":t.sendMessageImg,"show-message-card":t.showMessageCard,"app-parameter":t.appParameter},on:{getuserinfo:function(e){arguments[0]=e=t.$handleEvent(e),t.onGetUserInfo.apply(void 0,arguments)},contact:function(e){arguments[0]=e=t.$handleEvent(e),t.onContact.apply(void 0,arguments)},getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.onGetPhoneNumber.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.onError.apply(void 0,arguments)},launchapp:function(e){arguments[0]=e=t.$handleEvent(e),t.onLaunchApp.apply(void 0,arguments)},opensetting:function(e){arguments[0]=e=t.$handleEvent(e),t.onOpenSetting.apply(void 0,arguments)}}},[t._v(t._s(t.value))])]:a("v-uni-text",{staticClass:"u-text__value",class:[t.type&&"u-text__value--"+t.type,t.lines&&"u-line-"+t.lines],style:[t.valueStyle]},[t._v(t._s(t.value))]),t.suffixIcon?a("v-uni-view",{staticClass:"u-text__suffix-icon"},[a("u-icon",{attrs:{name:t.suffixIcon,customStyle:t.$u.addStyle(t.iconStyle)}})],1):t._e()],2):t._e()},n=[]},c003:function(t,e,a){var i=a("4c12");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("72405c09",i,!0,{sourceMap:!1,shadowMode:!1})},c05b:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("9b1b"));a("8f71"),a("bf0f"),a("5c47"),a("a1c1"),a("5ef2"),a("c223"),a("f7a5"),a("c9b5"),a("ab80");var n=i(a("0c81")),s={name:"u-number-box",mixins:[uni.$u.mpMixin,uni.$u.mixin,n.default],data:function(){return{currentValue:"",longPressTimer:null}},watch:{watchChange:function(t){this.check()},value:function(t){t!==this.currentValue&&(this.currentValue=this.format(this.value))}},computed:{getCursorSpacing:function(){return uni.$u.getPx(this.cursorSpacing)},buttonStyle:function(){var t=this;return function(e){var a={backgroundColor:t.bgColor,height:uni.$u.addUnit(t.buttonSize),color:t.color};return t.isDisabled(e)&&(a.backgroundColor="#f7f8fa"),a}},inputStyle:function(){this.disabled||this.disabledInput;var t={color:this.color,backgroundColor:this.bgColor,height:uni.$u.addUnit(this.buttonSize),width:uni.$u.addUnit(this.inputWidth)};return t},watchChange:function(){return[this.integer,this.decimalLength,this.min,this.max]},isDisabled:function(){var t=this;return function(e){return"plus"===e?t.disabled||t.disablePlus||t.currentValue>=t.max:t.disabled||t.disableMinus||t.currentValue<=t.min}}},mounted:function(){this.init()},methods:{init:function(){this.currentValue=this.format(this.value)},format:function(t){return t=this.filter(t),t=""===t?0:+t,t=Math.max(Math.min(this.max,t),this.min),null!==this.decimalLength&&(t=t.toFixed(this.decimalLength)),t},filter:function(t){return t=String(t).replace(/[^0-9.-]/g,""),this.integer&&-1!==t.indexOf(".")&&(t=t.split(".")[0]),t},check:function(){var t=this.format(this.currentValue);t!==this.currentValue&&(this.currentValue=t)},onFocus:function(t){this.$emit("focus",(0,r.default)((0,r.default)({},t.detail),{},{name:this.name}))},onBlur:function(t){this.format(t.detail.value);this.$emit("blur",(0,r.default)((0,r.default)({},t.detail),{},{name:this.name}))},onInput:function(t){var e=t.detail||{},a=e.value,i=void 0===a?"":a;if(""!==i){var r=this.filter(i);if(null!==this.decimalLength&&-1!==r.indexOf(".")){var n=r.split(".");r="".concat(n[0],".").concat(n[1].slice(0,this.decimalLength))}r=this.format(r),this.emitChange(r)}},emitChange:function(t){var e=this;this.asyncChange||this.$nextTick((function(){e.$emit("input",t),e.currentValue=t,e.$forceUpdate()})),this.$emit("change",{value:t,name:this.name})},onChange:function(){var t=this.type;if(this.isDisabled(t))return this.$emit("overlimit",t);var e="minus"===t?-this.step:+this.step,a=this.format(this.add(+this.currentValue,e));this.emitChange(a),this.$emit(t)},add:function(t,e){var a=Math.pow(10,10);return Math.round((t+e)*a)/a},clickHandler:function(t){this.type=t,this.onChange()},longPressStep:function(){var t=this;this.clearTimeout(),this.longPressTimer=setTimeout((function(){t.onChange(),t.longPressStep()}),250)},onTouchStart:function(t){var e=this;this.longPress&&(this.clearTimeout(),this.type=t,this.longPressTimer=setTimeout((function(){e.onChange(),e.longPressStep()}),600))},onTouchEnd:function(){this.longPress&&this.clearTimeout()},clearTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){clearTimeout(this.longPressTimer),this.longPressTimer=null}))}};e.default=s},c117:function(t,e,a){"use strict";a.r(e);var i=a("3486"),r=a("18bb");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("b9f6");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"13605fe1",null,!1,i["a"],void 0);e["default"]=o.exports},c123:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa"),a("5c47"),a("0506");var i={props:{src:{type:String,default:uni.$u.props.avatar.src},shape:{type:String,default:uni.$u.props.avatar.shape},size:{type:[String,Number],default:uni.$u.props.avatar.size},mode:{type:String,default:uni.$u.props.avatar.mode},text:{type:String,default:uni.$u.props.avatar.text},bgColor:{type:String,default:uni.$u.props.avatar.bgColor},color:{type:String,default:uni.$u.props.avatar.color},fontSize:{type:[String,Number],default:uni.$u.props.avatar.fontSize},icon:{type:String,default:uni.$u.props.avatar.icon},mpAvatar:{type:Boolean,default:uni.$u.props.avatar.mpAvatar},randomBgColor:{type:Boolean,default:uni.$u.props.avatar.randomBgColor},defaultUrl:{type:String,default:uni.$u.props.avatar.defaultUrl},colorIndex:{type:[String,Number],validator:function(t){return uni.$u.test.range(t,[0,19])||""===t},default:uni.$u.props.avatar.colorIndex},name:{type:String,default:uni.$u.props.avatar.name}}};e.default=i},c192:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"800px"}},[a("div",{staticStyle:{width:"800px"}},[a("v-uni-view",{style:"black"==t.$store.state.bgColor?"background: #22252F !important; width: 90%;  margin: 0 auto; border-radius: 10px;":" width: 90%;  margin: 0 auto; border-radius: 10px; "},[a("el-tabs",{staticStyle:{height:"600px"},attrs:{"tab-position":t.tabPosition}},[a("el-tab-pane",{attrs:{label:"账单信息"}},[a("div",{staticStyle:{height:"23vh",width:"100%","z-index":"9999",position:"relative",margin:"0 auto",display:"flex","flex-direction":"column","padding-top":"15px","padding-bottom":"15px","align-items":"center","justify-content":"space-around"}},[a("div",{staticStyle:{display:"flex",width:"100%","margin-top":"12px"}},[a("div",{staticStyle:{"margin-left":"20px",display:"flex",flex:"1",color:"#ffffff",border:"0px #fff","flex-direction":"column"}},[a("span",{staticStyle:{color:"#d9d9d9","font-size":"12px"}},[t._v(t._s(t.i18n.balance))]),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t.hideProperty?a("v-uni-text",{staticStyle:{color:"#85bd00","font-size":"50rpx"}},[t._v("$"+t._s(t.users.usdt.toFixed(2)))]):t._e(),t.hideProperty?t._e():a("v-uni-text",{staticStyle:{color:"#ffffff","font-size":"50rpx"}},[t._v("$*****")])],1)]),a("div",{staticStyle:{width:"2px",background:"#F4F4F4",height:"40px"}})]),a("div",{staticStyle:{display:"flex",flex:"1","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("financialTmodule")],1)])]),a("el-tab-pane",{attrs:{label:t.i18n.cash_deposit}},[a("amounTmodule")],1),a("el-tab-pane",{attrs:{label:t.i18n.cash_out}},[a("withdrawTmodule")],1),a("el-tab-pane",{attrs:{label:t.real_name_authentication}},[a("authenTmodule")],1),a("el-tab-pane",{attrs:{label:t.invite_friends}},[a("inviteTmodule")],1),a("el-tab-pane",{attrs:{label:t.change_password}},[a("changeTmodule")],1),a("el-tab-pane",{attrs:{label:t.complaint_email}},[a("complaintTmodule")],1),a("el-tab-pane",{attrs:{label:t.announcement}},[a("noticeTmodule")],1),a("el-tab-pane",{attrs:{label:t.contact_customer_service}},[a("contactTmodule")],1),a("el-tab-pane",{attrs:{label:t.other}},[a("othersTmodule")],1)],1)],1)],1)])},r=[]},c2aa:function(t,e,a){"use strict";a.r(e);var i=a("b224"),r=a("5695");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("c94b");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"56681c50",null,!1,i["a"],void 0);e["default"]=o.exports},c433:function(t,e,a){t.exports=a.p+"static/buploads.png"},c5ee:function(t,e,a){"use strict";var i=a("82de").assign,r=a("b6660"),n=a("2c65"),s=a("d233"),o={};i(o,r,n,s),t.exports=o},c6b7:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-popup-dialog[data-v-56681c50]{width:300px;border-radius:11px;background-color:#fff}.uni-dialog-title[data-v-56681c50]{display:flex;flex-direction:row;justify-content:center;padding-top:25px}.uni-dialog-title-text[data-v-56681c50]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-56681c50]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:20px}.uni-dialog-content-text[data-v-56681c50]{font-size:14px;color:#6c6c6c}.uni-dialog-button-group[data-v-56681c50]{display:flex;flex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:1px}.uni-dialog-button[data-v-56681c50]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:45px}.uni-border-left[data-v-56681c50]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-56681c50]{font-size:16px;color:#333}.uni-button-color[data-v-56681c50]{color:#007aff}.uni-dialog-input[data-v-56681c50]{flex:1;font-size:14px;border:1px #eee solid;height:40px;padding:0 10px;border-radius:5px;color:#555}.uni-popup__success[data-v-56681c50]{color:#4cd964}.uni-popup__warn[data-v-56681c50]{color:#f0ad4e}.uni-popup__error[data-v-56681c50]{color:#dd524d}.uni-popup__info[data-v-56681c50]{color:#909399}',""]),t.exports=e},c7bc:function(t,e,a){var i=a("85a3");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("b40ef0d4",i,!0,{sourceMap:!1,shadowMode:!1})},c8b9:function(t,e,a){"use strict";a("aa9c"),a("7a76"),a("c9b5"),a("dc69"),a("4100");var i={single_source_shortest_paths:function(t,e,a){var r={},n={};n[e]=0;var s,o,h,l,u,c,d,f,C,m=i.PriorityQueue.make();m.push(e,0);while(!m.empty())for(h in s=m.pop(),o=s.value,l=s.cost,u=t[o]||{},u)u.hasOwnProperty(h)&&(c=u[h],d=l+c,f=n[h],C="undefined"===typeof n[h],(C||f>d)&&(n[h]=d,m.push(h,d),r[h]=o));if("undefined"!==typeof a&&"undefined"===typeof n[a]){var D=["Could not find a path from ",e," to ",a,"."].join("");throw new Error(D)}return r},extract_shortest_path_from_predecessor_list:function(t,e){var a=[],i=e;while(i)a.push(i),t[i],i=t[i];return a.reverse(),a},find_path:function(t,e,a){var r=i.single_source_shortest_paths(t,e,a);return i.extract_shortest_path_from_predecessor_list(r,a)},PriorityQueue:{make:function(t){var e,a=i.PriorityQueue,r={};for(e in t=t||{},a)a.hasOwnProperty(e)&&(r[e]=a[e]);return r.queue=[],r.sorter=t.sorter||a.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var a={value:t,cost:e};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=i},c8e8:function(t,e,a){"use strict";var i=a("db2d"),r=a.n(i);r.a},c94b:function(t,e,a){"use strict";var i=a("12cf"),r=a.n(i);r.a},c9f3:function(t,e,a){var i=a("ba8a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("18105530",i,!0,{sourceMap:!1,shadowMode:!1})},cad9:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,r.default)();return function(){var a,r=(0,i.default)(t);if(e){var s=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return(0,n.default)(this,a)}},a("6a88"),a("bf0f"),a("7996");var i=s(a("f1f8")),r=s(a("6c31")),n=s(a("62b0"));function s(t){return t&&t.__esModule?t:{default:t}}},cb02:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("2634")),n=i(a("2fdc")),s=i(a("9b1b"));a("aa77"),a("bf0f"),a("de6c"),a("fd3c"),a("aa9c"),a("dd2b"),a("f7a5"),a("5c47"),a("a1c1");i(a("0bf5"));var o=i(a("45e3")),h=(a("9b8e"),a("8f59")),l={data:function(){return{navsList:["数字货币"],tabIndex:0,scrollInto:"",remarks:"",scrollH:400,address:"",currency:3,values:"",maxNumber:30,cnumbers:0,types:0,shows:!1,tbvalues:"",imgPaths:"",account:"",imgPathstwo:"",urls:"",dfindex:[0],fileList1:[],fileList2:[],imgList4:[],imgList2:"",imgLists:[],imgListsTwo:[],cjyhvalues:"",yhtbvalues:"",yhnames:"",yhcnumber:null,yhremarks:"",yhrateses:0,yhsnumber:0,columns:[],tbcolumns:[["123456789123456789","200","300"]],payment_address:""}},onNavigationBarButtonTap:function(){uni.navigateTo({url:"/pages/users/rjrecord/rjrecord"})},watch:{values:function(t){var e=this.columns.find((function(e){return e.id==t}));e&&(this.currency=e.id,this.payment_address=e.payment_address,this.makeQRCode(this.payment_address))}},mounted:function(){var t=this;this.values=this.columns[0],this.tbvalues=this.tbcolumns[0],this.getData();uni.setNavigationBarTitle({title:this.$t("deposit.deposit")}),this.$nextTick((function(){t.scrollH=500;var e=document.querySelectorAll(".uni-page-head .uni-page-head-ft .uni-page-head-btn")[0];e&&(e.querySelector(".uni-btn-icon").innerText=t.$t("deposit.deposit_record"))}))},onShow:function(){},onReady:function(){},computed:(0,s.default)({i18n:function(){return this.$t("deposit")}},(0,h.mapState)({lgStatus:function(t){return t.lgStatus},users:function(t){return t.users}})),methods:{getData:function(){var t=this;this.$H.get("/api/v1/coinTopUpList",!1).then((function(e){"ok"==e.type&&(t.columns=e.data,e.data.map((function(e){var a=[];a.push({name:e.agreement,id:e.payment_address}),[].push(a),t.currency=t.columns[0].id})))}))},confirm:function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.uPicker;this.currency=e[0].id,this.values=e[0],this.shows=!1},cancel:function(t){this.shows=!1},asubmit:function(){var t=this;this.cnumbers,this.fileList1;console.log(this.currency),console.log(this.types),console.log(this.imgPaths),console.log(this.cnumbers);this.$H.post("/api/v1/chargeReq",!1,{currency:this.currency,account:this.imgPaths,amount:this.cnumbers}).then((function(e){"ok"==e.type&&(t.fileList1=[],t.cnumbers=0,t.imgPaths="",uni.$u.toast(t.$t("deposit.completed")))}))},yhtsubmit:function(){var t=this;this.yhcnumber,this.fileList2,this.$H.post("/api/v1/chargeReqBank",!1,{currency:1,account:this.imgPathstwo,amount:this.yhcnumber}).then((function(e){"ok"==e.type&&(t.fileList2=[],t.yhcnumber=0,t.imgPathstwo="",uni.$u.toast(t.$t("deposit.completed")))}))},obuttons:function(){this.seccendCopy()},seccendCopy:function(){var t=this;this.$copyText(this.payment_address).then((function(){uni.$u.toast(t.$t("out.successful"))}))},makeQRCode:function(t){var e=this;return(0,n.default)((0,r.default)().mark((function a(){return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o.default.toDataURL(t);case 2:e.urls=a.sent;case 3:case"end":return a.stop()}}),a)})))()},deletePic:function(t){this["fileList".concat(t.name)].splice(t.index,1)},afterRead:function(t){var e=this,a=this;a.uploadImgFinished=!1;var i=t.file;i.map((function(a){e["fileList".concat(t.name)].push((0,s.default)({},a))})),this.fileList1=this.fileList1.slice(0,9),this.imgLists=[];var r=this.$store.state.token;if(!r)return uni.$u.toast(this.$t("real.re_certification"));console.log(this.fileList1[0].url),this.imgPaths="",uni.uploadFile({url:this.$C.webUrl+"/api/v1/upload",filePath:this.fileList1[0].url,name:"file",formData:{type:0},header:{Authorization:"Bearer "+r},success:function(t){var e=t.data.replace(/\n/g,"").replace(/\n/g,"").replace(/\n/g,"").replace(/\s/g,"");t=JSON.parse(decodeURIComponent(e)),a.imgPaths=t.data.file_path},fail:function(t){reject(t)},complete:function(){uni.hideLoading()}}),console.log("待上传图片==",this.fileList1)},deletePicTwo:function(t){this["fileList".concat(t.name)].splice(t.index,1)},afterReadTwo:function(t){var e=this,a=this;a.uploadImgFinished=!1;var i=t.file;console.log("2222"),i.map((function(a){e["fileList".concat(t.name)].push((0,s.default)({},a))})),console.log("333333"),this.fileList2=this.fileList2.slice(0,9),this.imgListsTwo=[],console.log("444444"),console.log("待上传图片==",this.fileList2[0].url);var r=this.$store.state.token;if(!r)return uni.$u.toast(this.$t("real.re_certification"));this.imgPathstwo="",uni.uploadFile({url:this.$C.webUrl+"/api/v1/upload",filePath:this.fileList2[0].url,name:"file",formData:{type:0},header:{Authorization:"Bearer "+r},success:function(t){var e=t.data.replace(/\n/g,"").replace(/\n/g,"").replace(/\n/g,"").replace(/\s/g,"");t=JSON.parse(decodeURIComponent(e)),a.imgPathstwo=t.data.file_path},fail:function(t){reject(t)},complete:function(){uni.hideLoading()}})},changesTabs:function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto="tab"+t)},onChangeTab:function(t){this.changesTabs(t.detail.current)}}};e.default=l},cb0f:function(t,e,a){"use strict";a.r(e);var i=a("87ca"),r=a("2299");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("2436");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"d3d14bf0",null,!1,i["a"],void 0);e["default"]=o.exports},cb6e:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"}')},cbd3:function(t,e,a){"use strict";a.r(e);var i=a("7623"),r=a("0637");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("f4ba");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"39c5df65",null,!1,i["a"],void 0);e["default"]=o.exports},ceec:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uUpload:a("6c7b").default,"u-Input":a("2354").default,uPicker:a("3090").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:"black"==t.$store.state.bgColor?"background: #22252F;":"background: #fff;"},[i("v-uni-view",{staticStyle:{height:"20px"}}),i("v-uni-view",{style:"black"==t.$store.state.bgColor?"width:100%; display: flex; flex-direction: column; justify-content: center; align-items: center;    width: 90%;margin: 0 auto;padding: 5px; background: #22252F; color: #fff;":"width:100%; display: flex; flex-direction: column; justify-content: center; align-items: center;    width: 90%;margin: 0 auto;padding: 5px; "},[i("v-uni-view",{staticClass:"scroll-view"},t._l(t.navsList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"scroll-items",attrs:{id:"tab"+a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changesTabs(a)}}},[t._v(t._s(e))])})),1),i("v-uni-swiper",{style:"height:"+t.scrollH+"px;width:95%;padding-left:15px",attrs:{duration:150,current:t.tabIndex,"disable-touch":"true"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeTab.apply(void 0,arguments)}}},[i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",style:"height:"+t.scrollH+"px;",attrs:{"scroll-y":"true","scroll-x":"false","enable-flex":"true"}},[i("v-uni-view",{ref:"ulists0",staticStyle:{width:"95%"}},[i("div",{staticStyle:{display:"flex","margin-top":"15px","align-items":"center",width:"100%"}},[i("div",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.digital_currency))]),i("div",{staticStyle:{width:"50%","margin-top":"10px"}},[i("el-select",{staticStyle:{height:"25px"},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}},t._l(t.columns,(function(e){return i("el-option",{key:e.id,attrs:{label:e.agreement,value:e.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirm(e)}}})})),1)],1)]),i("v-uni-view",{staticStyle:{display:"flex","margin-top":"15px",width:"100%"}},[i("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.wallet_adress))]),i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"50%","margin-top":"10px","justify-content":"center","align-items":"center"}},[i("v-uni-view",{staticStyle:{width:"145px",height:"145px",margin:"0 auto",display:"flex","justify-content":"center","align-items":"center"}},[i("el-image",{staticStyle:{width:"auto",height:"auto"},attrs:{src:t.urls}})],1),i("v-uni-view",{staticStyle:{"margin-top":"20px",height:"30px","line-height":"30px"}},[t._v(t._s(t.payment_address))]),i("v-uni-view",{staticClass:"copy-btn",staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obuttons.apply(void 0,arguments)}}},[i("i",{staticClass:"el-icon-copy-document"}),i("v-uni-text",[t._v(t._s(t.i18n.copy))])],1)],1)],1),i("v-uni-view",{staticStyle:{display:"flex","margin-top":"10px","align-items":"center",width:"100%"}},[i("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.number_of_coins))]),i("div",{staticStyle:{width:"50%","margin-top":"15px"}},[i("el-input",{attrs:{border:"none",placeholder:t.i18n.enter_number_coins,type:"number"},model:{value:t.cnumbers,callback:function(e){t.cnumbers=e},expression:"cnumbers"}})],1)],1),i("v-uni-view",{staticStyle:{display:"flex",width:"100%","font-size":"12px","margin-top":"15px","padding-bottom":"10px",color:"#6D6F7C"}},[i("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"90%",color:"#222222","margin-top":"10px"}},[t._v(t._s(t.i18n.payment_voucher))]),i("u-upload",{attrs:{fileList:t.fileList1,multiple:!0,name:"1",width:"226",height:"226",maxCount:1},on:{afterRead:function(e){arguments[0]=e=t.$handleEvent(e),t.afterRead.apply(void 0,arguments)},delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deletePic.apply(void 0,arguments)}}},["while"==t.$store.state.bgColor?i("v-uni-image",{staticStyle:{width:"226rpx",height:"226rpx"},attrs:{src:a("5d0c"),mode:"widthFix"}}):t._e()],1)],1),i("v-uni-view",{staticStyle:{width:"100%"}},[i("v-uni-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.asubmit()}}},[t._v(t._s(t.i18n.submit))])],1)],1)],1)],1),i("v-uni-swiper-item",[i("v-uni-scroll-view",{staticClass:"section-area",attrs:{"scroll-y":"false","enable-flex":"true"}},[i("v-uni-view",{ref:"ulists1",staticStyle:{width:"95%"}},[i("v-uni-view",{staticStyle:{display:"flex","margin-top":"20px","align-items":"center",width:"100%"}},[i("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"100%"}},[t._v(t._s(t.i18n.number_of_coins))]),i("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"}},[i("u--input",{attrs:{placeholder:t.i18n.number_of_coins,type:"number"},model:{value:t.yhcnumber,callback:function(e){t.yhcnumber=e},expression:"yhcnumber"}})],1)],1),i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","font-size":"12px","margin-top":"15px","padding-bottom":"10px",color:"#6D6F7C"}},[i("v-uni-view",{staticStyle:{flex:"1","font-size":"15px","font-weight":"bold",width:"90%",color:"#222222","margin-top":"10px"}},[t._v(t._s(t.i18n.payment_voucher))]),i("u-upload",{attrs:{fileList:t.fileList2,multiple:!0,name:"2",width:"226",height:"226",maxCount:1},on:{afterRead:function(e){arguments[0]=e=t.$handleEvent(e),t.afterReadTwo.apply(void 0,arguments)},delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deletePicTwo.apply(void 0,arguments)}}},["black"==t.$store.state.bgColor?i("v-uni-image",{staticStyle:{width:"226rpx",height:"226rpx"},attrs:{src:a("c433"),mode:"widthFix"}}):t._e(),"while"==t.$store.state.bgColor?i("v-uni-image",{staticStyle:{width:"226rpx",height:"226rpx"},attrs:{src:a("5d0c"),mode:"widthFix"}}):t._e()],1)],1),i("v-uni-view",{staticStyle:{width:"100%"}},[i("v-uni-button",{staticStyle:{background:"#3F47F4","margin-top":"20px",border:"0","font-size":"12px",height:"55px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loadingText:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.yhtsubmit()}}},[t._v(t._s(t.i18n.submit))])],1)],1)],1)],1)],1)],1),"black"==t.$store.state.bgColor?i("u-picker",{ref:"uPicker",staticClass:"bnsss",staticStyle:{"border-radius":"18px",background:"#222"},attrs:{show:t.shows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}}):t._e(),"while"==t.$store.state.bgColor?i("u-picker",{ref:"uPicker",staticClass:"wnsss",staticStyle:{"border-radius":"18px",background:"#fff"},attrs:{show:t.shows,itemHeight:100,defaultIndex:t.dfindex,columns:t.columns,keyName:"name"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}}):t._e()],1)},n=[]},cfcb:function(t,e,a){"use strict";a.r(e);var i=a("ceec"),r=a("9405");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("ee5d");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"5b350092",null,!1,i["a"],void 0);e["default"]=o.exports},d123:function(t,e,a){t.exports=a.p+"static/brq@3x.png"},d233:function(t,e,a){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},d238:function(t,e,a){"use strict";a.r(e);var i=a("a57f"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},d2af:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("9b1b")),n=i(a("2634")),s=i(a("2fdc"));a("4259"),a("64aa"),a("d4b5"),a("5ef2"),a("c1a3"),a("bf0f"),a("18f7"),a("de6c"),a("c223"),a("aa9c"),a("e838");var o=a("02da"),h={data:function(){return{isLocked:!1,timePeriod:6,timePeriodList:[{value:4,label:"1M"},{value:5,label:"5M"},{value:6,label:"15M"},{value:7,label:"30M"},{value:8,label:"1H"},{value:0,label:"1D"},{value:1,label:"1W"},{value:2,label:"1M"}],indicators:[{name:"MA",visible:!1},{name:"EMA",visible:!1},{name:"SMA",visible:!1},{name:"BOLL",visible:!1},{name:"SAR",visible:!1}],indicatorsPicture:[{name:"MA",visible:!1},{name:"EMA",visible:!1},{name:"SMA",visible:!1},{name:"BOLL",visible:!1},{name:"KDJ",visible:!1},{name:"RSI",visible:!1},{name:"BIAS",visible:!1},{name:"BRAR",visible:!1},{name:"CCI",visible:!1},{name:"DMI",visible:!1},{name:"CR",visible:!1},{name:"PSY",visible:!1},{name:"DMA",visible:!1},{name:"TRIX",visible:!1},{name:"OBV",visible:!1},{name:"VR",visible:!1},{name:"WR",visible:!1},{name:"MTM",visible:!1},{name:"EMV",visible:!1},{name:"SMA",visible:!1},{name:"SAR",visible:!1},{name:"ROC",visible:!1},{name:"PVT",visible:!1},{name:"BBI",visible:!1},{name:"AO",visible:!1}],indicatorIds:{},showInnerDivs:[],overlayItems:[{information:[{key:"horizontalSegment",text:"horizontalSegment",imgUrl:"static/icon/1-01.png"},{key:"horizontalStraightLine",text:"horizontalStraightLine",imgUrl:"static/icon/1-02.png"},{key:"horizontalRayLine",text:"horizontalRayLine",imgUrl:"static/icon/1-03.png"},{key:"verticalRayLine",text:"verticalRayLine",imgUrl:"static/icon/1-04.png"},{key:"verticalSegment",text:"verticalSegment",imgUrl:"static/icon/1-05.png"},{key:"verticalStraightLine",text:"verticalStraightLine",imgUrl:"static/icon/1-06.png"},{key:"rayLine",text:"rayLine",imgUrl:"static/icon/1-07.png"},{key:"segment",text:"segment",imgUrl:"static/icon/1-08.png"},{key:"straightLine",text:"straightLine",imgUrl:"static/icon/1-09.png"},{key:"priceLine",text:"priceLine",imgUrl:"static/icon/1-10.png"}],SelectInformation:{key:"horizontalSegment",text:"horizontalSegment",imgUrl:"static/icon/1-02.png"},windowSwitch:!1},{information:[{key:"priceChannelLine",text:"priceChannelLine",imgUrl:"static/icon/1-15.png"},{key:"parallelStraightLine",text:"parallelStraightLine",imgUrl:"static/icon/1-15.png"},{key:"simpleAnnotation",text:"simpleAnnotation",imgUrl:"static/icon/1-15.png"},{key:"simpleTag",text:"simpleTag",imgUrl:"static/icon/1-15.png"}],SelectInformation:{key:"priceChannelLine",text:"priceChannelLine",imgUrl:"static/icon/1-19.png"},windowSwitch:!1},{information:[{key:"circle",text:"圆",imgUrl:"static/icon/1-15.png"},{key:"rect",text:"正方形",imgUrl:"static/icon/1-16.png"},{key:"priceChannelLine",text:"平行四边形",imgUrl:"static/icon/1-17.png"},{key:"triangle",text:"三角形",imgUrl:"static/icon/1-18.png"}],SelectInformation:{key:"circle",text:"圆",imgUrl:"static/icon/1-15.png"},windowSwitch:!1},{information:[{key:"fibonacciCircle",text:"fibonacciCircle",imgUrl:"static/icon/1-21.png"},{key:"fibonacciSegment",text:"fibonacci Segment",imgUrl:"static/icon/1-20.png"},{key:"fibonacciLine",text:"fibonacciLine",imgUrl:"static/icon/1-19.png"},{key:"fibonacciSpiral",text:"fibonacciSpiral",imgUrl:"static/icon/1-22.png"},{key:"fibonacciSector",text:"Fibonacci Sector",imgUrl:"static/icon/1-23.png"},{key:"fibonacciExtension",text:"Fibonacci Extension",imgUrl:"static/icon/1-24.png"},{key:"gannBox",text:"Gann Box",imgUrl:"static/icon/1-25.png"}],SelectInformation:{key:"fibonacciCircle",text:"fibonacciCircle",imgUrl:"static/icon/1-21.png"},windowSwitch:!1},{information:[{key:"LockPattern",text:"LockPattern",imgUrl:"static/icon/1-15.png"},{key:"LockPattern",text:"LockPattern",imgUrl:"static/icon/1-15.png"}],SelectInformation:{key:"LockPattern",text:"LockPattern",imgUrl:"static/icon/1-31.png"},windowSwitch:!1},{information:[{key:"ViewPattern",text:"ViewPattern",imgUrl:"static/icon/1-15.png"},{key:"ViewPattern",text:"ViewPattern",imgUrl:"static/icon/1-15.png"}],SelectInformation:{key:"ViewPattern",text:"ViewPattern",imgUrl:"static/icon/1-32.png"},windowSwitch:!1},{information:[{key:"RemovePattern",text:"RemovePattern",imgUrl:"static/icon/1-15.png"},{key:"RemovePattern",text:"RemovePattern",imgUrl:"static/icon/1-15.png"}],SelectInformation:{key:"RemovePattern",text:"RemovePattern",imgUrl:"static/icon/1-33.png"},windowSwitch:!1}],switchingTransactions:"marketPrice",switchingTransactionsOptions:[{name:"marketPrice",i18n:"trade"},{name:"pendingOrder",i18n:"pending_order"}]}},methods:{CreateKLineChart_pc:function(){var t=(0,o.init)("k-line-chart",{layout:[{type:"candle",content:["MA",{name:"EMA",calcParams:[10,30]}],options:{order:Number.MIN_SAFE_INTEGER}}]});t.setStyles("green_rise_red_fall"),t.applyNewData(this.KDataList),console.warn("KDataList",this.KDataList),this.chart=t},CreateKLineChart:function(t,e){this.Update.Cache=null,this.KLineInformation.Symbol=this.Symbol,this.updateMiddleWidth(),this.RequestHistoryMinuteData(this.KLineInformation,e)},NetworkFilter:function(t,e){switch(t.Name){case"KLineChartContainer::ReqeustHistoryMinuteData":this.RequestHistoryMinuteData(t,e);break;case"KLineChartContainer::RequestFlowCapitalData":this.RequestFlowCapitalData(t,e);break;case"KLineChartContainer::RequestHistoryData":this.RequestHistoryData(t,e);break;case"DepthChartContainer::RequestDepthData":this.RequestDepthData(t,e);break}},SendWSHeartMessage:function(){if(this.SocketOpen){var t={pong:(new Date).getTime()},e=JSON.stringify(t);uni.sendSocketMessage({data:e})}},SendUnSubscribeMessage:function(){if(this.LastSubString&&this.SocketOpen){var t=JSON.stringify({unsub:this.LastSubString});uni.sendSocketMessage({data:t}),this.LastSubString=null}},RequestWSData:function(t,e){var a=this;uni.onSocketMessage((function(i){if("40"!=i.data){var r=i.data.indexOf("[");r>2&&(r=i.data.indexOf("{")),i.data=i.data.substring(r,i.length);var n=JSON.parse(i.data);n.ping?a.SendWSHeartMessage():n.unsubbed||n.subbed||e(n,t)}})),uni.onSocketError((function(t){console.log(t)}))},GeneratePostData:function(t,e){var a=new Map([[4,"1min"],[5,"5min"],[6,"15min"],[7,"30min"],[8,"60min"],[0,"1day"],[1,"1week"],[2,"1mon"],[3,"1year"]]),i=a.get(e),r={req:"market.".concat(t,".kline.").concat(i),symbol:t,period:i},n={sub:"market.".concat(t,".kline.").concat(i),symbol:t,period:i};return{Req:r,Sub:n}},RequestHistoryMinuteData:function(t,e){t.PreventDefault=!0,this.KDataList=[];var a=this.currency_name,i=this.GeneratePostData(this.OriginalSymbol,e),r={SendData:i.Req,Symbol:a,OriginalSymbol:this.OriginalSymbol,Period:e};this.RecvHistoryMinuteData({},r)},RecvHistoryMinuteData:function(t,e){var a=this;return(0,s.default)((0,n.default)().mark((function t(){var i,r,s,o,h,l,u,c,d,f,C,m;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={code:0,data:[]},i.symbol=a.Symbol,i.name=e.OriginalSymbol,r=Date.parse(new Date)/1e3-24*a.intervals[e.SendData.period||"1min"]*60*60,s=Date.parse(new Date)/1e3,t.next=7,a.$H.post("/api/v1/klineMarket",!1,{symbol:a.symboles,period:e.SendData.period||"15min",from:r,to:s});case 7:for(h in o=t.sent,5e3,o.data)l=Number(o.data[h].open),u=Number(o.data[h].high),c=Number(o.data[h].low),d=Number(o.data[h].close),f=Number(o.data[h].volume),f=!f||Number.isNaN(f)?0:f,C=(l+u+c+d)/4*f,C=!C||Number.isNaN(C)?0:C,m=o.data[h].time,a.KDataList.push({timestamp:m,open:l,high:u,low:c,close:d,volume:f,turnover:C}),d;console.log(a.KDataList),null,a.SubscribeMinuteRealtimeData(e);case 14:case"end":return t.stop()}}),t)})))()},SubscribeMinuteRealtimeData:function(t){var e=this,a=this.GeneratePostData(t.OriginalSymbol,t.Period),i={SendData:a.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};this.CreateKLineChart_pc(),this.socket.on("kline",(function(t){e.RecvMinuteRealtimeData(t,i)}))},RecvMinuteRealtimeData:function(t,e){var a=this;this.chart?t.currency_name==this.currency_name&&e.SendData.period===t.period&&setTimeout((function(){var e=a.chart.getDataList(),i=e[e.length-1],n=(0,r.default)({},i);n.close=t.close,n.high=t.high,n.low=t.low,n.volume=t.volume,a.chart.updateData(n)}),600):this.CreateKLineChart_pc()},RequestHistoryData:function(t,e){t.PreventDefault=!0,this.Update.Cache=null;var a=this.symboles,i=t.Self.Period,r=this.GeneratePostData(this.OriginalSymbol,i),n={SendData:r.Req,Symbol:a,OriginalSymbol:this.OriginalSymbol,Period:i,Callback:e};this.RecvHistoryData({},n)},RecvHistoryData:function(t,e){var a=this;return(0,s.default)((0,n.default)().mark((function t(){var i,r,s,o,h,l,u,c,d,f;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={code:0,data:[]},i.symbol=e.Symbol,i.name=e.OriginalSymbol,r=Date.parse(new Date)/1e3-24*a.intervals[e.SendData.period]*60*60,s=Date.parse(new Date)/1e3,t.next=8,a.$H.post("/api/v1/klineMarket",!1,{symbol:a.symboles,period:e.SendData.period,from:r,to:s});case 8:for(l in o=t.sent,h=null,o.data)u=o.data[l],c=new Date,c.setTime(u.time),d=1e4*c.getFullYear()+100*(c.getMonth()+1)+c.getDate(),100*c.getHours()+c.getMinutes(),f=[d,parseFloat(h),parseFloat(u.open),parseFloat(u.high),parseFloat(u.low),parseFloat(u.close),parseFloat(u.amount),null],h=u.close,i.data.push(f);e.Callback(i),a.SubscribRealtimeData(e);case 13:case"end":return t.stop()}}),t)})))()},SubscribRealtimeData:function(t){var e=this,a=this.GeneratePostData(t.OriginalSymbol,t.Period),i={SendData:a.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};this.socket.on("kline",(function(t){e.RecvRealtimeData(t,i)}))},RecvRealtimeData:function(t,e){if(g_KLine.JSChart){var a=g_KLine.JSChart.JSChartContainer,i=a.Period,r=a.Symbol;if(r==e.Symbol&&i==e.Period&&"BTC"==t.currency_name&&this.periods[i]===t.period){var n={code:0,stock:[]};if(this.Update.EnableLimit){var s=Date.now();if(this.Update.LastUpdateTime&&s-this.Update.LastUpdateTime<this.Update.Frequency)return;this.Update.LastUpdateTime=s}var o={symbol:e.Symbol,name:e.OriginalSymbol},h=new Date;h.setTime(1e3*t.time);var l=1e4*h.getFullYear()+100*(h.getMonth()+1)+h.getDate();h.getHours(),h.getMinutes();o.date=l,o.yclose=null,o.open=t.open,o.high=t.high,o.low=t.low,o.price=t.close,o.vol=t.volume,o.amount=null,n.stock.push(o),a.RecvRealtimeData(n)}}},GeneratePostDepthData:function(t,e){var a={sub:"market.".concat(t,".depth.").concat(e),symbol:t};return{Req:{},Sub:a}},RequestDepthData:function(t,e){var a=this;t.PreventDefault=!0,this.Update.Cache=null;var i=t.Request.Data.symbol,r=(t.Self.Period,this.GeneratePostDepthData(this.OriginalSymbol,"step1")),n={SendData:r.Sub,Symbol:i,OriginalSymbol:this.OriginalSymbol,Callback:e};this.RequestWSData(n,(function(t,e){a.RecvDepthData(t,e)}))},RecvDepthData:function(t,e){if(t.ch==e.SendData.sub&&g_KLine.JSChart){var a=g_KLine.JSChart.JSChartContainer,i=a.Symbol;if(i==e.Symbol&&"DepthChartContainer"==a.ClassName){var r=t.tick,n=[],s=[];if(r.asks)for(var o=0;o<r.asks.length;++o){var h=r.asks[o];n.push([h[0],h[1]])}if(r.bids)for(o=0;o<r.bids.length;++o){h=r.bids[o];s.push([h[0],h[1]])}var l={code:0,asks:n,bids:s,datatype:"snapshot"};a.ChartSplashPaint.EnableSplash(!1),a.RecvDepthData(l)}}}}};e.default=h},d2d1:function(t,e,a){"use strict";a.r(e);var i=a("a405"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},d491:function(t,e,a){"use strict";a.r(e);var i=a("8ca8"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},d61b:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-textarea",class:t.textareaClass,style:[t.textareaStyle]},[a("v-uni-textarea",{staticClass:"u-textarea__field",style:{height:t.$u.addUnit(t.height)},attrs:{value:t.innerValue,placeholder:t.placeholder,"placeholder-style":t.$u.addStyle(t.placeholderStyle,"string"),"placeholder-class":t.placeholderClass,disabled:t.disabled,focus:t.focus,autoHeight:t.autoHeight,fixed:t.fixed,cursorSpacing:t.cursorSpacing,cursor:t.cursor,showConfirmBar:t.showConfirmBar,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,adjustPosition:t.adjustPosition,disableDefaultPadding:t.disableDefaultPadding,holdKeyboard:t.holdKeyboard,maxlength:t.maxlength,confirmType:t.confirmType,ignoreCompositionEvent:t.ignoreCompositionEvent},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)},linechange:function(e){arguments[0]=e=t.$handleEvent(e),t.onLinechange.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyboardheightchange.apply(void 0,arguments)}}}),t.count?a("v-uni-text",{staticClass:"u-textarea__count",style:{"background-color":t.disabled?"transparent":"#fff"}},[t._v(t._s(t.innerValue.length)+"/"+t._s(t.maxlength))]):t._e()],1)},r=[]},d7b0:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},d7b3:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("b7c7"));a("fd3c"),a("5c47"),a("0506"),a("aa9c"),a("c223");var n={data:function(){return{indexList:[],pages:1,status:!1,loding:""}},mounted:function(){this.getData();uni.setNavigationBarTitle({title:this.$t("records.financial_records")}),"black"==this.$store.state.bgColor&&uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#22252F"})},computed:{i18n:function(){return this.$t("records")}},methods:{scrolltolower:function(){if(this.status)return!1;this.pages+=1,this.loding="...........",this.getData()},getData:function(){var t=this;this.status=!0;this.$H.post("/api/v1/wallet/legalLog",!1,{page:this.pages}).then((function(e){if("ok"==e.type){var a=[];if(e.data.list.length<=0)return t.status=!1,t.loding="",void(t.pages-=1);e.data.list.map((function(e){var i=new Date(Date.parse(new Date(e.create_time)));e.create_time=t.$u.test.formatDate(i,"yyyy-MM-dd hh:mm"),a.push(e)})),t.indexList.length>0?t.indexList=[].concat((0,r.default)(t.indexList),a):t.indexList=a,t.status=!1}}))}}};e.default=n},d80f:function(t,e,a){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},d937:function(t,e,a){"use strict";var i=a("8bdb"),r=a("bb80"),n=a("497b"),s=a("83fa"),o=a("f298"),h=a("2e7f"),l=a("af9e"),u=RangeError,c=String,d=isFinite,f=Math.abs,C=Math.floor,m=Math.pow,D=Math.round,p=r(1..toExponential),v=r(o),g=r("".slice),S="-6.9000e-11"===p(-69e-12,4)&&"1.25e+0"===p(1.255,2)&&"1.235e+4"===p(12345,3)&&"3e+1"===p(25,0),I=!S||!function(){return l((function(){p(1,1/0)}))&&l((function(){p(1,-1/0)}))}()||!function(){return!l((function(){p(1/0,1/0),p(NaN,1/0)}))}();i({target:"Number",proto:!0,forced:I},{toExponential:function(t){var e=s(this);if(void 0===t)return p(e);var a=n(t);if(!d(e))return String(e);if(a<0||a>20)throw new u("Incorrect fraction digits");if(S)return p(e,a);var i="",r="",o=0,l="",I="";if(e<0&&(i="-",e=-e),0===e)o=0,r=v("0",a+1);else{var T=h(e);o=C(T);var x=0,y=m(10,o-a);x=D(e/y),2*e>=(2*x+1)*y&&(x+=1),x>=m(10,a+1)&&(x/=10,o+=1),r=c(x)}return 0!==a&&(r=g(r,0,1)+"."+g(r,1)),0===o?(l="+",I="0"):(l=o>0?"+":"-",I=c(f(o))),r+="e"+l+I,i+r}})},d960:function(t,e,a){"use strict";var i=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();t.exports=function(t,e,a,r){var n=i,s=r+a;t^=-1;for(var o=r;o<s;o++)t=t>>>8^n[255&(t^e[o])];return-1^t}},da1e:function(t,e,a){"use strict";a.r(e);var i=a("7d52"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},da21:function(t,e,a){a("4db2"),a("bf0f"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),a("7a76"),a("c9b5");var i=new Uint8Array(512),r=new Uint8Array(256);(function(){for(var t=1,e=0;e<255;e++)i[e]=t,r[t]=e,t<<=1,256&t&&(t^=285);for(var a=255;a<512;a++)i[a]=i[a-255]})(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return i[t]},e.mul=function(t,e){return 0===t||0===e?0:i[r[t]+r[e]]}},da59:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{color:{type:String,default:uni.$u.props.line.color},length:{type:[String,Number],default:uni.$u.props.line.length},direction:{type:String,default:uni.$u.props.line.direction},hairline:{type:Boolean,default:uni.$u.props.line.hairline},margin:{type:[String,Number],default:uni.$u.props.line.margin},dashed:{type:Boolean,default:uni.$u.props.line.dashed}}};e.default=i},dabb:function(t,e,a){"use strict";a.r(e);var i=a("42c5"),r=a("91f8");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("390b");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"8b393142",null,!1,i["a"],void 0);e["default"]=o.exports},db0b:function(t,e,a){a("7a76"),a("c9b5"),e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&"undefined"!==typeof t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,a){if(e.isValid(t))return t;try{return function(t){if("string"!==typeof t)throw new Error("Param is not a string");var a=t.toLowerCase();switch(a){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(i){return a}}},db2d:function(t,e,a){var i=a("8bce");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("659f4eb6",i,!0,{sourceMap:!1,shadowMode:!1})},db2f:function(t,e,a){a("bf0f"),t.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},db6c:function(t,e,a){"use strict";a.r(e);var i=a("49b5"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},dba9:function(t,e,a){t.exports=a.p+"static/Up_S 2@3x.png"},dc2f:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5ef2");var r=i(a("e54a")),n={name:"uniPopup",components:{keypress:r.default},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup:function(t){document.getElementsByTagName("body")[0].style.overflow=t?"hidden":"visible"}},data:function(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop:function(){return this.popupWidth>=500&&this.popupHeight>=500},bg:function(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted:function(){var t=this;(function(){var e=uni.getSystemInfoSync(),a=e.windowWidth,i=e.windowHeight,r=e.windowTop,n=e.safeArea,s=(e.screenHeight,e.safeAreaInsets);t.popupWidth=a,t.popupHeight=i+(r||0),n&&t.safeArea?t.safeAreaInsets=s.bottom:t.safeAreaInsets=0})()},destroyed:function(){this.setH5Visible()},created:function(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible:function(){document.getElementsByTagName("body")[0].style.overflow="visible"},closeMask:function(){this.maskShow=!1},disableMask:function(){this.mkclick=!1},clear:function(t){t.stopPropagation(),this.clearPropagation=!0},open:function(t){if(!this.showPopup){t&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(t)||(t=this.type),this.config[t]?(this[this.config[t]](),this.$emit("change",{show:!0,type:t})):console.error("缺少类型：",t)}},close:function(t){var e=this;this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((function(){e.showPopup=!1}),300)},touchstart:function(){this.clearPropagation=!1},onTap:function(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top:function(t){var e=this;this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((function(){e.messageChild&&"message"===e.type&&e.messageChild.timerClose()})))},bottom:function(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0)},center:function(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},t||(this.showPopup=!0,this.showTrans=!0)},left:function(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)},right:function(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)}}};e.default=n},de5a:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.initKline=function(){(0,n.registerLocale)("zh",{time:"時間：",open:"開：",high:"高：",low:"低：",close:"收：",volume:"成交量："}),(0,n.registerLocale)("jp",{time:"時間：",open:"開始：",high:"高：",low:"安：",close:"終値：",volume:"取引高："}),(0,n.registerLocale)("en",{time:"Time:",open:"Open:",high:"High:",low:"Low:",close:"Close:",volume:"Volume:"}),(0,n.registerLocale)("kor",{time:"시간:",open:"시가:",high:"고가:",low:"저가:",close:"종가:",volume:"거래량:"}),(0,n.registerLocale)("th",{time:"เวลา:",open:"เปิด:",high:"สูงสุด:",low:"ต่ำสุด:",close:"ปิด:",volume:"ปริมาณการซื้อขาย:"}),(0,n.registerLocale)("vie",{time:"Thời gian:",open:"Mở:",high:"Cao nhất:",low:"Thấp nhất:",close:"Đóng:",volume:"Khối lượng giao dịch:"}),(0,n.registerLocale)("ger",{time:"Zeit:",open:"Eröffnung:",high:"Hoch:",low:"Tief:",close:"Schluss:",volume:"Handelsvolumen:"}),(0,n.registerLocale)("rus",{time:"Время:",open:"Открытие:",high:"Максимум:",low:"Минимум:",close:"Закрытие:",volume:"Объем торгов:"}),(0,n.registerLocale)("spa",{time:"Hora:",open:"Apertura:",high:"Máximo:",low:"Mínimo:",close:"Cierre:",volume:"Volumen de operaciones:"}),(0,n.registerLocale)("por",{time:"Hora:",open:"Abertura:",high:"Máxima:",low:"Mínima:",close:"Fechamento:",volume:"Volume de negócios:"}),(0,n.registerLocale)("Ita",{time:"Ora:",open:"Apertura:",high:"Massimo:",low:"Minimo:",close:"Chiusura:",volume:"Volume di negoziazione:"}),(0,n.registerLocale)("ara",{time:"الوقت:",open:"الفتح:",high:"الأعلى:",low:"الأدنى:",close:"الإغلاق:",volume:"حجم التداول:"}),(0,n.registerLocale)("tur",{time:"Zaman:",open:"Açılış:",high:"En Yüksek:",low:"En Düşük:",close:"Kapanış:",volume:"İşlem Hacmi:"});var t="#f23c48",e="rgba(242, 60, 72, 1.0)",a="rgba(133, 189, 0, 1.0)";(0,n.registerStyles)("green_rise_red_fall",{candle:{bar:{upColor:"#85bd00",downColor:t,upBorderColor:"#85bd00",downBorderColor:t,upWickColor:"#85bd00",downWickColor:t},priceMark:{last:{upColor:"#85bd00",downColor:t}}},indicator:{ohlc:{upColor:a,downColor:e},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:a,downColor:e,noChangeColor:"#888888"}],circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:a,downColor:e,noChangeColor:"#888888"}]}}),(0,n.registerOverlay)({name:"circle",needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,totalStep:3,createPointFigures:function(t){var e=t.coordinates;if(2===e.length){var a=e[1].x-e[0].x,i=e[1].y-e[0].y,n=Math.sqrt(a*a+i*i);return{key:"circle",type:"circle",attrs:(0,r.default)((0,r.default)({},e[0]),{},{r:n}),styles:{style:"stroke_fill"}}}return[]}})};var r=i(a("9b1b")),n=a("02da")},de62:function(t,e,a){"use strict";var i=a("b606"),r=a.n(i);r.a},df2f:function(t,e,a){var i=a("af23");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("ea73c6f8",i,!0,{sourceMap:!1,shadowMode:!1})},df4d:function(t,e,a){"use strict";var i=a("43bd"),r=a.n(i);r.a},e0ef:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var i={props:{title:{type:[String,Number],default:uni.$u.props.cell.title},label:{type:[String,Number],default:uni.$u.props.cell.label},value:{type:[String,Number],default:uni.$u.props.cell.value},icon:{type:String,default:uni.$u.props.cell.icon},disabled:{type:Boolean,default:uni.$u.props.cell.disabled},border:{type:Boolean,default:uni.$u.props.cell.border},center:{type:Boolean,default:uni.$u.props.cell.center},url:{type:String,default:uni.$u.props.cell.url},linkType:{type:String,default:uni.$u.props.cell.linkType},clickable:{type:Boolean,default:uni.$u.props.cell.clickable},isLink:{type:Boolean,default:uni.$u.props.cell.isLink},required:{type:Boolean,default:uni.$u.props.cell.required},rightIcon:{type:String,default:uni.$u.props.cell.rightIcon},arrowDirection:{type:String,default:uni.$u.props.cell.arrowDirection},iconStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.iconStyle}},rightIconStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.rightIconStyle}},titleStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.titleStyle}},size:{type:String,default:uni.$u.props.cell.size},stop:{type:Boolean,default:uni.$u.props.cell.stop},name:{type:[Number,String],default:uni.$u.props.cell.name}}};e.default=i},e140:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("fd3c"),a("aa9c"),a("2797"),a("aa77"),a("bd06"),a("dd2b"),a("5c47"),a("0506"),a("e838"),a("8f71"),a("4626"),a("5ac7"),a("64aa"),a("c223"),a("4100"),a("de6c");var r=i(a("b7c7")),n=i(a("9b1b")),s=i(a("39d8")),o=i(a("9004")),h=a("44d8");a("02da");a("c7bc");var l,u=a("8f59"),c=i(a("0bf5")),d=a("de5a"),f=i(a("d2af"));(0,d.initKline)();var C={JSChart:{KLineType:""}},m={mixins:[f.default],components:{tradingComponent:function(){return Promise.resolve().then((function(){return(0,o.default)(a("5edd"))}))},personalInformation:function(){return Promise.resolve().then((function(){return(0,o.default)(a("63e8"))}))},loginComponent:function(){return Promise.resolve().then((function(){return(0,o.default)(a("0c44"))}))},registerComponent:function(){return Promise.resolve().then((function(){return(0,o.default)(a("bfb6"))}))},resetPassComponent:function(){return Promise.resolve().then((function(){return(0,o.default)(a("7ee5"))}))}},data:function(){return{secondsLoading:!1,isVisible:!0,overlayIds:[],currentNav:"0",disableds:!0,src:"../../static/image@3x.png",wheight:0,urls:[],usdt:"",countdown:10,value:"",value222:"",input:"",scindexList:[],quotationOriginal:[],modalName:null,resData:[],scresData:[],allresData:[],checkboxValue1:[],searchInput:"",mLists:null,KDataList:[],dataList:[],XXdataList:[],sctabsIndexs:"",tabsIndexs:"",lang:null,clangs:{},language:[],show:!1,showIndex:!1,TypeError:1,VirtualAccounts:null,isActive:{productList:!0,order:!0},showMess:!1,titleMess:this.$t("order.prompt"),contentMess:this.$t("order.position_closed"),cfmtext:this.$t("order.ok"),celtext:this.$t("order.cancel"),tabIndex:0,tabsIndex:0,msgType:"success",lshow:!1,scrollHight1:500,scrollHight2:500,scrollHight3:500,gshow:!1,cnavsList:[],newsList:[],indexList1:[],indexList2:[],mhyIndexList:[],mhyLIndexList:[],mhycshow:!1,mhyhylist1:{},mhyhylist2:{},target_profit_price:0,stop_loss_price:0,hylist:{},hylist1:{},hylist2:{},showTp:!1,items:{},itemsPC:{},page1:1,page2:1,page3:1,page4:1,page5:1,status:!1,status2:!1,status3:!1,status4:!1,status5:!1,loding:"",loding2:"",loding3:"",loding4:"",loding5:"",scrollH:600,scrollInto:"",isHide:!1,navs:[],currentNavcc:"0",indicatorList:["VOL"],miansList:[],navsList:[],newsListJY:[],bgStatusOne:"",bgStatusTwo:"",indexList:[],timer:null,values:"",each_piece:1,kcvalues:"",kcnumber:1,showSex:!1,value11:!1,ordershow:!1,dfindex:[0],kcdfindex:[0],isShow:0,hyzs:!1,hyzy:!1,hyzsd:!0,hyzyd:!0,hyzyc:"#BDC1D0",hyzsc:"#BDC1D0",ghyzs:!1,ghyzy:!1,ghyzsd:!0,ghyzyd:!0,xdloading:!1,xdmloading:!1,mrdis:!1,mcdis:!1,gdloading:!1,gdmloading:!1,gmrdis:!1,gmcdis:!1,mhydloading:!1,mhymloading:!1,mhymrdis:!1,mhymcdis:!1,dhbts:"dhbts",sdhbts:"sdhbts",showItemId:0,PCplotData:[],pids:4,ghyzyc:"#BDC1D0",ghyzsc:"#BDC1D0",gtarget_profit_price:0,gstop_loss_price:0,profit_ratio:0,mhyprices:0,user_lever:0,margin:0,handlingFee:0,gmargin:0,micro_trade_fee:0,ghandlingFee:0,symbolQuotation:{},target_price:1,currency_name:"",originalQuotation:[],zbshow:!1,quotation:[],ckone:"MA",cktwo:"VOL",legal_name:"",currency_id:"",buy_direction:"",currentIndex:"",bzsshow:!1,indicaList:[],price:"",multiples:[{multiples:100},{multiples:10},{multiples:1e3}],multiple0:0,multiple1:0,number:0,gnumber:0,model1:{userInfo:{name:"uView UI",sex:""}},shows:!1,gshows:!1,kcshows:!1,columns:[],kccolumns:[],KLineInformation:{Symbol:""},Symbol:"btcusdt.BIT",symboles:"",OriginalSymbol:"btcusdt",ChartWidth:300,ChartHeight:300,opening:1,dataes:[],msg:null,mhytimeList:[],mhytimeArray:[],isLoding:"",mhyfee:0,mhyusers:{},personalInformationSwitch:!1,loginSwitch:!0,registerSwitch:!1,resetPassSwitch:!1,mnUser:[],tyloading:!1,SocketOpen:!1,LastSubString:null,intervals:{"1min":"1","5min":"5","15min":"15","30min":"30","60min":"60","1day":"360","1week":"1800","1mon":"10800","1year":"129600"},periods:{4:"1min",5:"5min",6:"15min",7:"30min",8:"60min",0:"1day",1:"1week",2:"1mon",3:"1year"},Update:{EnableLimit:!1,LastUpdateTime:null,Frequency:5e3,Cache:null},chart:null,polygonIoApiKey:"GU00qAywFwgiNr_tEH4fK5SBp48FFZfp",title:"Welcome to fx7",content:"This platform is only used for demonstration, communication, and learning purposes, and is not for commercial use. No recharge transactions are allowed \n\n Due to policy reasons.services are not provided to North Korea, Israel, China,Vanuatu,and Cuba.",domain:c.default.imageDomain}},watch:(0,s.default)({"$store.state.lang":function(t){this.i18n;this.navs=this.$t("nav")},currency_name:function(t){},"$store.state.bgColor":function(t){this.bgStatusOne=t},"$store.state.currency":function(t){this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||0,this.currentIndex=this.$store.state.currency.currentIndex||0,this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;var e={currency_name:this.currency_name,legal_name:this.legal_name,currency_id:this.currency_id};this.showBZ(e)},currentNav:function(t){var e=this;if(this.currentNav="".concat(t),1==t){this.mhytimeList=[];this.$H.get("/api/v1/seconds",!1).then((function(t){"ok"==t.type&&(t.data.data.map((function(a){e.mhytimeList.push({id:a.id,seconds:a.seconds,profit_ratio:a.profit_ratio,mhyprices:t.data.fee/100,fee:t.data.fee/100})})),e.kccolumns=[],e.kccolumns.push(e.mhytimeList),e.kcvalues=e.kccolumns[0][0].seconds,e.profit_ratio=e.kccolumns[0][0].profit_ratio,e.mhyprices=e.kccolumns[0][0].mhyprices,e.mhyfee=e.kccolumns[0][0].fee)}))}},kcnumber:function(t){this.mhyprices=this.mhyfee*t},kcvalues:function(t){var e=this;this.mhytimeList.length>0&&this.mhytimeList.map((function(a){t==a.seconds&&(e.profit_ratio=a.profit_ratio,e.mhyprices=a.mhyprices,e.mhyfee=a.fee)}))},symbolQuotation:function(t){this.calc(),this.gcalc()},number:function(t){this.calc()},multiple0:function(t){this.calc()},gnumber:function(t){""==t&&this.gnumber,this.gcalc()},multiple1:function(t){this.gcalc()},hyzs:function(t){t?(this.hyzsd=!1,this.hyzsc="#222222",0==this.stop_loss_price&&(this.stop_loss_price=this.symbolQuotation.now_price)):(this.hyzsd=!0,this.hyzsc="#BDC1D0")},hyzy:function(t){t?(this.hyzyd=!1,0==this.target_profit_price&&(this.target_profit_price=this.symbolQuotation.now_price)):this.hyzyd=!0},ghyzs:function(t){t?(this.ghyzsd=!1,this.ghyzsc="#222222",0==this.gstop_loss_price&&(this.gstop_loss_price=this.symbolQuotation.now_price)):(this.ghyzsd=!0,this.ghyzsc="#BDC1D0")},ghyzy:function(t){t?(this.ghyzyd=!1,this.ghyzyc="#222222",0==this.gtarget_profit_price&&(this.gtarget_profit_price=this.symbolQuotation.now_price)):(this.ghyzyd=!0,this.ghyzyc="#BDC1D0")}},"symbolQuotation",(function(t){this.calc(),this.gcalc()})),computed:(0,n.default)({i18nUsers:function(){return this.$t("mine")},i18n:function(){return this.$t("trade")},i18nIndent:function(){return this.$t("order")},i18nLogin:function(){return this.$t("login")},i18nRegister:function(){return this.$t("register")}},(0,u.mapState)({socket:function(t){return t.socket},token:function(t){return t.token},currency:function(t){return t.currency},users:function(t){return t.users}})),mounted:function(){var t=this;this.auths((function(){}));var e=this.i18n;this.navs=[],this.navs.push(e.contracts),this.navs.push(e.second_contract),this.sertNavs(),this.getData(),this.getMhyData(),this.$store.state.orderNum>=1&&(1==this.$store.state.orderNum?this.tabIndex=1:2==this.$store.state.orderNum&&(this.currentNav=1)),(this.$store.state.currency.opening||0==this.$store.state.currency.opening)&&this.currency_name==this.$store.state.currency.currency_name&&(this.opening=this.$store.state.currency.opening),this.opening?this.isShowes(!1):this.isShowes(!0);this.getDatas(),this.bgStatusOne||(this.bgStatusOne=this.$store.state.bgColor),this.bgStatusTwo!=this.bgStatusOne&&(!1,C.JSChart&&this.ClearChart()),this.bgStatusTwo=this.$store.state.bgColor,uni.getSystemInfo({success:function(e){var a=e.windowWidth;e.windowHeight;t.ChartWidth=a-15,t.ChartHeight=500,t.$nextTick((function(){t.getQuotation(),t.CreateKLineChart()}))}}),this.VirtualAccounts||this.obuttonsON()},onHide:function(){this.isHide=!0},onUnload:function(){this.socket.removeListener("daymarket"),uni.$off("page-popup"),this.isHide=!1,this.socket.removeListener("daymarket"),this.socket.removeListener("kline"),this.ClearChart()},beforeDestroy:function(){this.chart&&this.chart.destroy()},created:function(){var t=localStorage.getItem("VirtualAccount");t&&(this.VirtualAccounts=t,"未登录"!==this.VirtualAccounts&&(this.loginSwitch=!1))},onLoad:function(t){var e=this,a=this.i18n;this.navs.push(a.contracts),this.navs.push(a.second_contract),this.isHide=!1,uni.$on("page-popup",(function(t){e.msg=t.msg,e.subNames()})),this.$H.get("/api/v1/user",!1).then((function(t){e.usdt=t.data.usdt,e.$store.commit("setUser",t.data)})),this.language=h.langs,this.setLgs(),this.sertNavs(),this.$utils.setTabbar(this),this.loadmore(),uni.setBackgroundColor({backgroundColor:"#1A1C24"}),uni.getSystemInfo({success:function(t){uni.setBackgroundColor({backgroundColor:"#1A1C24"})}});t.currency_name,t.legal_name,t.currency_id,t.buy_direction,t.currentIndex;if(""==this.isLoding){this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||72,this.currentIndex=this.$store.state.currency.currentIndex||0,this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;this.currency_name,this.legal_name,this.currency_id;uni.getSystemInfo({success:function(t){e.$nextTick((function(){e.isLoding="loading"}))}})}if(""!=this.isLoding){(""==this.currency_name||this.$store.state.currency.currency_name&&this.currency_name!=this.$store.state.currency.currency_name)&&(this.currency_name=this.$store.state.currency.currency_name||"BTC",this.legal_name=this.$store.state.currency.legal_name||"USDT",this.currency_id=this.$store.state.currency.currency_id||72,this.currentIndex=this.$store.state.currency.currentIndex||0),this.buyDirection=0,this.symboles=this.currency_name+"/"+this.legal_name;var i={currency_name:this.currency_name,legal_name:this.legal_name,currency_id:this.currency_id};this.showBZ(i)}},methods:(l={updateMiddleWidth:function(){var t=document.querySelector(".containerPC"),e=document.querySelector(".nowPC"),a=document.querySelector(".leftPC"),i=document.querySelector(".rightPC"),r=document.querySelector(".middlePC"),n=a?a.offsetWidth:0,s=i?i.offsetWidth:0,o=i?e.offsetWidth:0,h=t.offsetWidth;r.style.width="".concat(h-n-s-o,"px")},toggleInnerDiv:function(t){this.overlayItems.forEach((function(e,a){a!==t&&(e.windowSwitch=!1)})),this.overlayItems[t].windowSwitch=!this.overlayItems[t].windowSwitch},setLangLanguage:function(t){},updateData:function(){var t=this;setTimeout((function(){var e=t.chart.getDataList(),a=e[e.length-1],i=(0,n.default)({},a);i.close+=20*Math.random()-10,i.high=Math.max(i.high,i.close),i.low=Math.min(i.low,i.close),i.volume+=Math.round(10*Math.random()),t.chart.updateData(i),t.updateData()}),600)},handleData:function(t){console.log("Received data:",t),"resetPass"==t?(this.resetPassSwitch=!this.resetPassSwitch,this.loginSwitch=!this.loginSwitch):(this.loginSwitch=!this.loginSwitch,this.registerSwitch=!this.registerSwitch)},open:function(){},closeIndex:function(){this.showIndex=!1},personalInformationCloseIndex:function(){this.personalInformationSwitch=!1},loginSwitchCloseIndex:function(){"未登录"!==this.VirtualAccounts&&(this.loginSwitch=!1)},registerSwitchCloseIndex:function(){this.registerSwitch=!1},close:function(){this.show=!1},toggleColor:function(t){this.isActive[t]=!this.isActive[t],this.updateMiddleWidth()},obuttonsON:function(){var t=this;this.usestring,this.passwords;this.tyloading=!0;this.$H.get("/api/v1/generateAccount",!1).then((function(e){t.mnUser=e.data,console.log(t.mnUser);t.$H.post("/api/v1/user/login",!1,{user_string:t.mnUser.username,password:t.mnUser.password}).then((function(e){t.tyloading=!1,"ok"==e.type?(t.$store.commit("login",e.data),t.$H.get("/api/v1/user",!1).then((function(e){t.$store.commit("setUser",e.data)})),setTimeout((function(){t.loading=!1}),200)):(t.loading=!1,t.changeCodeImg())}))}))},createOverlay:function(t,e,a){var i=this;if(console.log("createOverlay执行",t,e,a,this.chart),this.overlayItems[a].SelectInformation=e,this.overlayItems[a].windowSwitch=!1,"RemovePattern"===t)this.chart.removeOverlay(),this.overlayIds=[];else if("ViewPattern"===t)this.isVisible=!this.isVisible,e.imgUrl="static/icon/".concat(this.isVisible?"1-32":"1-28",".png"),this.overlayItems[a].SelectInformation=e,this.overlayIds.forEach((function(t){i.chart.overrideOverlay({id:t,visible:i.isVisible})}));else if("LockPattern"===t)this.isLocked=!this.isLocked,e.imgUrl="static/icon/".concat(this.isLocked?"1-26":"1-31",".png"),this.overlayItems[a].SelectInformation=e,this.overlayIds.forEach((function(t){i.chart.overrideOverlay({id:t,lock:i.isLocked})}));else{var r=this.chart.createOverlay(t);this.overlayIds.push(r)}},addIndicator:function(t){var e=this;this.indicators.forEach((function(t){t.visible&&e.chart.createIndicator(t.name,!0,{id:"candle_pane"})}))},removeIndicator:function(t){this.chart.removeIndicator("candle_pane"),this.addIndicator(t)},toggleIndicator:function(t){var e=this.indicators.find((function(e){return e.name===t}));e.visible?(e.visible=!1,this.removeIndicator(t)):(e.visible=!0,this.removeIndicator(t))},addIndicatorPicture:function(t){this.indicatorIds[t]||(this.indicatorIds[t]=this.chart.createIndicator(t,!0,{id:"candle_pane_"+t}))},removeIndicatorPicture:function(t){this.indicatorIds[t]&&(this.chart.removeIndicator(this.indicatorIds[t]),delete this.indicatorIds[t])},toggleIndicatorPicture:function(t){var e=this.indicatorsPicture.find((function(e){return e.name===t}));e&&(e.visible?(this.removeIndicatorPicture(t),e.visible=!1):(this.addIndicatorPicture(t),e.visible=!0))},notClick:function(){uni.showTabBar(),this.show=!1},confirm:function(){var t=this;setTimeout((function(){t.show=!1}),3e3)},confirmPC:function(){var t=this;this.showMess=!1,this.show=!1;this.$H.post("/api/v1/lever/close",!1,{id:this.itemsPC.id}).then((function(e){if(uni.showTabBar(),"ok"==e.type){uni.$u.toast(t.$t("deposit.completed"));var a=t.indexList.findIndex((function(e){return e.id==t.itemsPC.id}));a>-1&&t.indexList.splice(a,1)}}))},setLgs:function(){var t=this,e=uni.getStorageSync("lang")||"en";this.language.map((function(a){return a.value==e&&(t.clangs=a),a}))},sertNavs:function(){this.navs=[],this.navsList=[],this.cnavsList=[];var t=this.i18n,e=this.i18nIndent;this.navs.push(t.traded_item),this.navs.push(t.my_fav),this.navs.push(e.contract),this.navs.push(e.second_contract),this.navsList.push(e.position),this.navsList.push(e.listing),this.navsList.push(e.history),this.switchingTransactionsOptions[0].i18n=t.trade,this.switchingTransactionsOptions[1].i18n=t.pending_order,this.newsListJY.push(t.trade),this.newsListJY.push(t.pending_order),this.cnavsList.push(e.position),this.cnavsList.push(e.history)},refresh:function(){this.getData(),1==this.currentNav&&this.getMhyData(),setTimeout((function(){uni.stopPullDownRefresh()}),3e3)},getMhyData:function(){var t=this;this.secondsLoading=!0,this.mhyIndexList=[],this.$H.post("/api/v1/MicroOrder/lists",!1,{status:0===this.tabsIndex?1:3}).then((function(e){if("ok"==e.type){var a=[];e.message.data.map((function(e){var i=new Date(Date.parse(new Date(e.created_at)));e.created_at=t.$u.test.formatDate(i,"yyyy-MM-dd hh:mm:ss");var r=new Date(Date.parse(new Date(e.updated_at)));e.updated_at=t.$u.test.formatDate(r,"yyyy-MM-dd hh:mm:ss"),a.push({symbol:e.symbol_name,type_name:e.type_name,number:e.number,seconds:e.seconds,price:(e.profit_ratio/100*e.number).toFixed(2),currency_id:e.currency_match.currency_id,fee:parseFloat(e.fee).toFixed(2),end_price:e.open_price,end_price2:e.end_price,profit_result:e.profit_result,created_at:e.created_at,complete_at:e.complete_at,update_prices:e.end_price}),"卖出"==e.type_name?parseFloat("-"+e.profit_ratio/100)*e.number:e.profit_ratio/100*e.number})),t.mhyIndexList=a}})).finally((function(){t.secondsLoading=!1}))},setLang:function(t){var e=this.language.map((function(e){return e.selected=!1,e.value==t.value&&(e.selected=!0),e}));this.chart.setLocale(t.value),this.language=e,this._i18n.locale=t.value,uni.setStorageSync("lang",t.value),this.sertNavs(),this.$utils.setTabbar(this),this.clangs=t,this.hideModal()},collects:function(t){var e=this;this.auths((function(){if(t.isCollect){t.isCollect=0;e.$H.post("/api/v1/optional/del",!1,{currency_id:t.currency_id}).then((function(a){"ok"==a.type&&e.$nextTick((function(){t.isCollect=0}))}))}else{t.isCollect=1;e.$H.post("/api/v1/optional/add",!1,{currency_id:t.currency_id}).then((function(a){"ok"==a.type&&e.$nextTick((function(){t.isCollect=1}))}))}}))},startSocketXX:function(){var t=this,e=this;this.currency_id;this.socket.on("daymarket",(function(a){t.currency_name==a.currency_name&&t.legal_name==a.legal_name&&(t.symbolQuotation=(0,n.default)((0,n.default)({},t.symbolQuotation),a),t.currency_id=a.currency_id);var i=e.resData.findIndex((function(t){return t.currency_id==a.currency_id}));if(i>-1){var r=(0,n.default)((0,n.default)({},e.resData[i]),a);e.resData.splice(i,1,r)}if(e.scresData.length>0){var s=e.scresData.findIndex((function(t){return t.currency_id==a.currency_id}));if(s>-1){var o=(0,n.default)((0,n.default)({},e.scresData[s]),a);e.scresData.splice(s,1,o)}}}))},checkInputs:function(){var t=this.searchInput,e=[];this.dataList.forEach((function(t){e.push.apply(e,(0,r.default)(t.quotation))})),this.resData=e.filter((function(e){return e.show_name.toLowerCase().includes(t)}))},itemCliks:function(t){if(null===t){var e=[];return this.dataList.map((function(t){e.push.apply(e,(0,r.default)(t.quotation))})),void(this.resData=e)}if(this.tabsIndexs==t.name)return this.tabsIndexs="",void this.loadmore();this.tabsIndexs=t.name;var a=this.dataList.findIndex((function(e){return e.id==t.id}));if(a>-1){var i=(0,n.default)({},this.dataList[a]);this.resData=i.quotation}},scitemCliks:function(t){if(this.sctabsIndexs==t.name)return this.sctabsIndexs="",void this.loadmore();this.sctabsIndexs=t.name;var e=this.dataList.findIndex((function(e){return e.id==t.id}));if(e>-1){var a=(0,n.default)({},this.dataList[e]);this.scresData=a.quotation}},searchs:function(){uni.navigateTo({url:"/pages/search/search"})},scrolltolower:function(){this.loadmore()},myLists:function(){var t=this,e=this;this.$H.get("/api/v1/optional/list",!1).then((function(a){t.mLists=a.data;for(var i=0;i<t.mLists.length;i++){var r=e.resData.findIndex((function(e){return e.currency_id==t.mLists[i].currency_id}));if(r>-1){var s={isCollect:1},o=(0,n.default)((0,n.default)({},e.resData[r]),s);e.resData.splice(r,1,o)}else{s={isCollect:0};var h=(0,n.default)((0,n.default)({},e.resData[r]),s);e.resData.splice(r,1,h)}}}))},clickItems:function(t){this.$store.commit("setCurrency",{currency_id:t.currency_id,currency_name:t.currency_name,"item.legal_name":t.legal_name,currentIndex:t.currentIndex,opening:t.currency.opening}),this.symboles=t.currency_name+"/"+t.legal_name,this.ChangePeriod(this.timePeriod)},showModal:function(t){this.show=!0,this.showMess=!0,uni.hideTabBar(),this.modalName=t.currentTarget.dataset.target},showModalPC:function(t){this.itemsPC=t,this.showMess=!0,uni.hideTabBar()},mhyclicks:function(t){this.itemsPC=t,this.mhycshow=!0,uni.hideTabBar()},clicks:function(t){this.show=!0,this.itemsPC=t,uni.hideTabBar()},gclicks:function(t){this.gshow=!0,this.itemsPC=t,uni.hideTabBar()},lclicks:function(t){this.lshow=!0,this.itemsPC=t,uni.hideTabBar()},clicksTp:function(){this.target_profit_price=0,this.stop_loss_price=0,this.showTp=!0,uni.hideTabBar()},clicksCd:function(t){this.itemsPC=t,this.$refs.alertDialog.open()},mhyclose:function(){this.mhycshow=!1,this.timer=setTimeout((function(){uni.showTabBar()}),10)}},(0,s.default)(l,"close",(function(){this.show=!1,this.timer=setTimeout((function(){uni.showTabBar()}),10)})),(0,s.default)(l,"gclose",(function(){this.gshow=!1,this.timer=setTimeout((function(){uni.showTabBar()}),10)})),(0,s.default)(l,"lclose",(function(){this.lshow=!1,this.timer=setTimeout((function(){uni.showTabBar()}),10)})),(0,s.default)(l,"openTp",(function(){})),(0,s.default)(l,"scrolltolower1",(function(){var t=this;this.status||(this.loding=".............",this.page1+=1,this.status=!0,this.$H.post("/api/v1/lever/myTrade",!1,{status:1,page:this.page1}).then((function(e){if(t.status=!1,"ok"==e.type){var a=[],i=0,n=0,s=0;if(e.data.message.data.length<=0)return t.status=!1,t.loding="",void(t.page1-=1);e.data.message.data.map((function(t){a.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:(parseFloat(t.update_price-t.price)*t.number).toFixed(2),currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),i+=(t.update_price-t.price)*t.number,n+=Number(t.caution_money),s+=0})),t.indexList.length>0?(t.indexList=[].concat((0,r.default)(t.indexList),a),t.hylist.yks=(parseFloat(t.hylist.yks)+parseFloat(i)).toFixed(2),t.hylist.caution_money=(parseFloat(t.hylist.caution_money)+parseFloat(n)).toFixed(2),t.hylist.fxl=(parseFloat(t.hylist.fxl)+parseFloat(s)).toFixed(2)):(t.indexList=a,t.hylist={yks:parseFloat(i).toFixed(2),caution_money:parseFloat(n).toFixed(2),fxl:parseFloat(s).toFixed(2)})}})))})),(0,s.default)(l,"scrolltolower2",(function(){var t=this;this.status2||(this.loding2=".............",this.page2+=1,this.status2=!0,this.$H.post("/api/v1/lever/myTrade",!1,{status:0,page:this.page2}).then((function(e){if(t.status2=!1,"ok"==e.type){var a=[],i=0,n=0,s=0;if(e.data.message.data.length<=0)return t.status2=!1,t.loding2="",void(t.page2-=1);e.data.message.data.map((function(t){a.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:(parseFloat(t.update_price-t.price)*t.number).toFixed(2),currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),i+=(t.update_price-t.price)*t.number,n+=Number(t.caution_money),s+=0})),t.indexList1.length>0?(t.indexList1=[].concat((0,r.default)(t.indexList1),a),t.hylist1.yks=(parseFloat(t.hylist1.yks)+parseFloat(i)).toFixed(2),t.hylist1.caution_money=(parseFloat(t.hylist1.caution_money)+parseFloat(n)).toFixed(2),t.hylist1.fxl=(parseFloat(t.hylist1.fxl)+parseFloat(s)).toFixed(2)):(t.indexList1=a,t.hylist1={yks:parseFloat(i).toFixed(2),caution_money:parseFloat(n).toFixed(2),fxl:parseFloat(s).toFixed(2)})}})))})),(0,s.default)(l,"scrolltolower3",(function(){var t=this;this.status3||(this.loding3=".............",this.page3+=1,this.status3=!0,this.$H.post("/api/v1/lever/myTrade",!1,{status:3,page:this.page3}).then((function(e){if(t.status3=!1,"ok"==e.type){var a=[],i=0,n=0,s=0;if(e.data.message.data.length<=0)return t.status3=!1,t.loding3="",void(t.page3-=1);e.data.message.data.map((function(t){a.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:(parseFloat(t.update_price-t.price)*t.number).toFixed(2),currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),i+=(t.update_price-t.price)*t.number,n+=Number(t.caution_money),s+=0})),t.indexList2.length>0?(t.indexList2=[].concat((0,r.default)(t.indexList2),a),t.hylist2.yks=(parseFloat(t.hylist2.yks)+parseFloat(i)).toFixed(2),t.hylist2.caution_money=(parseFloat(t.hylist1.caution_money)+parseFloat(n)).toFixed(2),t.hylist2.fxl=(parseFloat(t.hylist2.fxl)+parseFloat(s)).toFixed(2)):(t.indexList2=a,t.hylist2={yks:parseFloat(i).toFixed(2),caution_money:parseFloat(n).toFixed(2),fxl:parseFloat(s).toFixed(2)})}})))})),(0,s.default)(l,"scrolltolower4",(function(){var t=this;this.status4||(this.loding4=".............",this.page5+=1,this.status4=!0,this.$H.post("/api/v1/MicroOrder/lists",!1,{status:3,page:this.page5}).then((function(e){if("ok"==e.type){var a=[],i=0;if(e.message.data.length<=0)return t.status4=!1,t.loding4="",void(t.page5-=1);e.message.data.map((function(e){var r=new Date(Date.parse(new Date(e.created_at)));e.created_at=t.$u.test.formatDate(r,"yyyy-MM-dd hh:mm:ss");var n=new Date(Date.parse(new Date(e.updated_at)));e.updated_at=t.$u.test.formatDate(n,"yyyy-MM-dd hh:mm:ss"),a.push({symbol:e.symbol_name,type_name:e.type_name,number:e.number,seconds:e.seconds,price:(e.profit_ratio/100*e.number).toFixed(2),currency_id:e.currency_id,open_price:e.open_price,created_at:e.created_at,complete_at:e.complete_at}),"卖出"==e.type_name?i+=parseFloat("-"+e.profit_ratio/100)*e.number:i+=parseFloat(e.profit_ratio/100)*e.number})),t.mhyLIndexList.length>0?(t.mhyLIndexList=[].concat((0,r.default)(t.mhyLIndexList),a),t.mhyhylist2.yks=(parseFloat(t.mhyhylist2.yks)+parseFloat(i)).toFixed(2)):(t.mhyhylist2={yks:parseFloat(i).toFixed(2)},t.mhyLIndexList=a),t.status4=!1}})))})),(0,s.default)(l,"getData",(function(){var t=this,e=!1,a=!1;this.$H.post("/api/v1/lever/myTrade",!1,{status:1}).then((function(i){if("ok"==i.type){var r=[],n=0,s=0,o=0;i.data.message.data.map((function(t){r.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:"",currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),n+=(t.update_price-t.price)*t.number,s+=Number(t.caution_money),o+=0})),t.hylist={yks:parseFloat(n).toFixed(2),caution_money:parseFloat(s).toFixed(2),fxl:parseFloat(o).toFixed(2)},t.indexList=r,e=!0,a&&t.startSocket()}})),this.$H.post("/api/v1/lever/myTrade",!1,{status:0}).then((function(i){if("ok"==i.type){var r=[],n=0,s=0,o=0;i.data.message.data.map((function(t){r.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:"",currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),n+=(t.update_price-t.price)*t.number,s+=Number(t.caution_money),o+=0})),t.hylist1={yks:parseFloat(n).toFixed(2),caution_money:s,fxl:parseFloat(o).toFixed(2)},t.indexList1=r,a=!0,e&&t.startSocket()}})),this.$H.post("/api/v1/lever/myTrade",!1,{status:3}).then((function(e){if("ok"==e.type){var a=[],i=0,r=0,n=0;e.data.message.data.map((function(t){a.push({symbol:t.symbol,type_name:t.type_name,number:t.number,price:t.price,update_price:t.update_price,transaction_time:t.transaction_time,upsdowns:parseFloat(t.fact_profits).toFixed(2),currency_id:t.currency,caution_money:t.caution_money,id:t.id,target_profit_price:t.target_profit_price,stop_loss_price:t.stop_loss_price,trade_fee:t.trade_fee}),i+=(t.update_price-t.price)*t.number,r+=Number(t.caution_money),n+=0})),t.hylist2={yks:parseFloat(i).toFixed(2),caution_money:parseFloat(r).toFixed(2),fxl:parseFloat(n).toFixed(2)},t.indexList2=a}}))})),(0,s.default)(l,"startSocket",(function(){var t=this;this.socket.on("daymarket",(function(e){t.onhylist(e),t.onhylist1(e),t.onhyMhylist1(e)}))})),(0,s.default)(l,"onhylist",(function(t){var e=this,a=0,i=0,r=0;this.indexList.map((function(n){n.currency_id==t.currency_id&&(n.update_price=t.now_price,"卖出"==n.type_name?n.upsdowns=(parseFloat(n.price-t.now_price)*n.number*e.each_piece).toFixed(2):n.upsdowns=(parseFloat(t.now_price-n.price)*n.number*e.each_piece).toFixed(2)),"卖出"==n.type_name?a+=(n.price-n.update_price)*n.number*e.each_piece:a+=(n.update_price-n.price)*n.number*e.each_piece,i+=Number(n.caution_money),r+=0})),this.hylist={yks:parseFloat(a).toFixed(2),caution_money:parseFloat(i).toFixed(2),fxl:parseFloat(r).toFixed(2)}})),(0,s.default)(l,"onhyMhylist1",(function(t){this.mhyIndexList.map((function(e){e.currency_id==t.currency_id&&(e.update_prices=t.now_price)}))})),(0,s.default)(l,"onhylist1",(function(t){var e=this,a=0,i=0,r=0;this.indexList1.map((function(n){n.currency_id==t.currency_id&&(n.update_price=t.now_price,"卖出"==n.type_name?n.upsdowns=(parseFloat(n.price-t.now_price)*n.number*e.each_piece).toFixed(2):n.upsdowns=(parseFloat(t.now_price-n.price)*n.number*e.each_piece).toFixed(2)),"卖出"==n.type_name?a+=(n.price-n.update_price)*n.number*e.each_piece:a+=(n.update_price-n.price)*n.number*e.each_piece,i+=Number(n.caution_money),r+=0})),this.hylist1={yks:parseFloat(a).toFixed(2),caution_money:parseFloat(i).toFixed(2),fxl:parseFloat(r).toFixed(2)}})),(0,s.default)(l,"confClicksTp",(function(){var t=this;this.$H.post("/api/v1/lever/setStopPrice",!1,{id:this.items.id,target_profit_price:this.target_profit_price,stop_loss_price:this.stop_loss_price}).then((function(e){if(t.loading=!1,"ok"==e.type){uni.$u.toast(t.$t("deposit.completed")),t.items.target_profit_price=t.target_profit_price,t.items.stop_loss_price=t.stop_loss_price;var a=t.indexList.findIndex((function(e){return e.id==t.items.id}));if(a>-1){var i=(0,n.default)((0,n.default)({},t.indexList[a]),t.items);t.indexList.splice(a,1,i)}t.showTp=!1}}))})),(0,s.default)(l,"onChangeTab",(function(t){this.changesTabs(t.detail.current)})),(0,s.default)(l,"monChangeTab",(function(t){this.mchangesTabs(t.detail.current)})),(0,s.default)(l,"dialogClose",(function(){this.$refs.alertDialog.close()})),(0,s.default)(l,"dialogConfirm",(function(){var t=this;this.$H.post("/api/v1/lever/cancelTrade",!1,{id:this.itemsPC.id}).then((function(e){if(t.loading=!1,"ok"==e.type){uni.$u.toast(t.$t("deposit.completed"));var a=t.indexList1.findIndex((function(e){return e.id==t.itemsPC.id}));a>-1&&t.indexList1.splice(a,1),t.$refs.alertDialog.close(),t.gclose()}}))})),(0,s.default)(l,"sectionChange",(function(t){this.currentNav=t})),(0,s.default)(l,"changesTabs",(function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto="tab"+t)})),(0,s.default)(l,"mchangesTabs",(function(t){this.tabsIndex!==t&&(this.tabsIndex=t,this.scrollInto="tabs"+t,this.getMhyData())})),(0,s.default)(l,"hideModal",(function(t){this.modalName=null,uni.showTabBar()})),(0,s.default)(l,"loadmore",(function(){var t=this;this.allresData=[];this.$H.get("/api/v1/quotation_new",!1).then((function(e){t.dataList=e.data;var a=t;t.$H.get("/api/v1/optional/list",!1).then((function(i){var r=i.data.findIndex((function(e){return e.currency_id==t.currency_id}));a.isShow=r>-1?1:0,t.mLists=i.data;for(var n=0;n<e.data.length;n++)console.log("nnnnnnnnnn"),e.data[n].quotation.map((function(e){e.precision_length=t.$utils.getPrecisionLength(e.now_price),e.currentIndex=n;var a=t.mLists.findIndex((function(t){return t.currency_id==e.currency_id}));e.isCollect=a>-1?1:0,t.quotationOriginal.push(e),t.resData.push(e)}));t.startSocketXX(),t.allresData=t.resData.sort((function(t,e){return e.currency.sort-t.currency.sort}))}))}));this.quotation=this.resData,console.log(this.resData),this.indexList=[],this.scindexList=this.indexList})),(0,s.default)(l,"isShowes",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.mrdis=!0,this.mcdis=!0,this.gmrdis=!0,this.gmcdis=!0,this.mhymrdis=!0,this.mhymcdis=!0):(this.mrdis=!1,this.mcdis=!1,this.gmrdis=!1,this.gmcdis=!1,this.mhymrdis=!1,this.mhymcdis=!1)})),(0,s.default)(l,"isScs",(function(){var t=this,e=this;this.$H.get("/api/v1/optional/list",!1).then((function(a){var i=a.data.findIndex((function(e){return e.currency_id==t.currency_id}));e.isShow=i>-1?1:0}))})),(0,s.default)(l,"collectsJY",(function(){var t=this;if(this.isShow){this.isShow=0;this.$H.post("/api/v1/optional/del",!1,{currency_id:this.currency_id}).then((function(e){"ok"==e.type&&t.$nextTick((function(){t.isShow=0}))}))}else{this.isShow=1;this.$H.post("/api/v1/optional/add",!1,{currency_id:this.currency_id}).then((function(e){"ok"==e.type&&t.$nextTick((function(){t.isShow=1}))}))}})),(0,s.default)(l,"onChange",(function(t){""==this.gnumber&&(this.gnumber=0)})),(0,s.default)(l,"newLoads",(function(){this.CreateKLineChart()})),(0,s.default)(l,"showBZ",(function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currency_id=t.currency_id,this.currency_name=t.currency_name,this.legal_name=t.legal_name,this.symboles=this.currency_name+"/"+this.legal_name,a?(this.currentIndex=t.currentIndex,this.opening=t.opening,this.opening?this.isShowes(!1):this.isShowes(!0)):this.getDatas(),this.isScs(),this.timer=setTimeout((function(){e.getQuotation()}),2600),this.bzsshow=!1,this.currentNav="0",this.hyzs=!1,this.hyzy=!1,this.hyzsd=!0,this.hyzyd=!0,this.hyzyc="#BDC1D0",this.hyzsc="#BDC1D0",this.ghyzs=!1,this.ghyzy=!1,this.ghyzsd=!0,this.ghyzyd=!0,this.target_profit_price=0,this.stop_loss_price=0,this.gtarget_profit_price=0,this.gstop_loss_price=0,this.profit_ratio=0,this.mhyprices=0,this.kcnumber=1})),(0,s.default)(l,"getDatas",(function(){var t=this;this.$H.get("/api/v1/quotation_new",!1).then((function(e){t.indicaList=[];for(var a=0;a<e.data.length;a++)e.data[a].quotation.map((function(e){e.currentIndex=a,0==t.currency_id&&(t.currency_id=e.currency_id);var i={id:e.currency_id,currency_id:e.currency_id,name:e.show_name,currency_name:e.currency_name,legal_name:e.legal_name,currentIndex:e.currentIndex,opening:e.currency.opening};t.indicaList.push(i)}))}))})),(0,s.default)(l,"bzsClick",(function(){this.bzsshow=!0})),(0,s.default)(l,"zbclick",(function(){this.zbshow=!0})),(0,s.default)(l,"zbopen",(function(){})),(0,s.default)(l,"zbclose",(function(){this.zbshow=!1})),(0,s.default)(l,"bzsopen",(function(){})),(0,s.default)(l,"bzsclose",(function(){this.bzsshow=!1})),(0,s.default)(l,"mhyOrder",(function(t){var e=this;1==t?(this.mhydloading=!0,this.mhymcdis=!0):(this.mhymloading=!0,this.mhymrdis=!0);var a=this.symbolQuotation,i=this.currency_id,r=this.kcnumber,n=this.kcvalues,s=Number(a.id);this.$H.post("/api/v1/MicroOrder/submit",!1,{type:t,match_id:s,currency_id:i,seconds:n,number:r}).then((function(a){1==t?(e.mhydloading=!1,e.mhymcdis=!1):(e.mhymloading=!1,e.mhymrdis=!1),"ok"==a.type&&(e.ordershow=!0,e.$message.success(e.$t("trade.order_confirmed")),e.$store.commit("setOrNum",2),e.$H.get("/api/v1/user",!1).then((function(t){e.$store.commit("setUser",t.data)})))}))})),(0,s.default)(l,"orders",(function(){this.ordershow=!1,uni.navigateTo({url:"/pages/order/order"})})),(0,s.default)(l,"can",(function(){this.ordershow=!1})),(0,s.default)(l,"subNames",(function(){if("ok"==this.msg){var t=uni.getSubNVueById("modal");t.hide("none",300)}if("can"==this.msg){var e=uni.getSubNVueById("modal");e.hide("none",300)}})),(0,s.default)(l,"orderAppClicks",(function(){var t=uni.getSubNVueById("bottoms");t.show("slide-in-bottom",300)})),(0,s.default)(l,"orderClicks",(function(t,e){var a=this;1==t?e?(this.xdloading=!0,this.mcdis=!0):(this.gdloading=!0,this.gmcdis=!0):e?(this.xdmloading=!0,this.mrdis=!0):(this.gdmloading=!0,this.gmrdis=!0);var i=this.number,r=this.multiple0,n=this.currency_id,s=this.stop_loss_price,o=this.target_profit_price,h=this.gnumber,l=this.multiple1,u=i,c=r,d=s;this.hyzs||(d=0);var f=o;this.hyzy||(f=0);var C=0;e||(u=h,c=l,C=this.target_price,d=this.gstop_loss_price,this.ghyzs||(d=0),f=this.gtarget_profit_price,this.ghyzy||(f=0)),this.$H.post("/api/v1/lever/submit",!1,{share:u,multiple:c,legal_id:1,currency_id:n,type:t,status:e,target_profit_price:f,stop_loss_price:d,target_price:C}).then((function(i){1==t?e?(a.xdloading=!1,a.mcdis=!1):(a.gdloading=!1,a.gmcdis=!1):e?(a.xdmloading=!1,a.mrdis=!1):(a.gdmloading=!1,a.gmrdis=!1),"ok"==i.type&&(a.$alert("操作成功！","提示",{confirmButtonText:"确定",callback:function(t){a.getData(),console.log("Callback with: "+t)}}),a.ordershow=!0,0==e&&a.$store.commit("setOrNum",1),a.$H.get("/api/v1/user",!1).then((function(t){a.$store.commit("setUser",t.data)})))}))})),(0,s.default)(l,"getQuotation",(function(){var t=this;this.$H.get("/api/v1/quotation_new",!1).then((function(e){t.originalQuotation=e.data[t.currentIndex].quotation.map((function(e){return e.precision_length=t.$utils.getPrecisionLength(e.now_price),"0.00"!=e.micro_trade_fee&&(t.micro_trade_fee=e.micro_trade_fee),e})),t.quotation=t.originalQuotation;var a=t.originalQuotation.find((function(e){return e.currency_id==t.currency_id}));if(a){t.symbolQuotation=a;var i=[];t.symbolQuotation.multiple.map((function(t){i.push(t.value)})),t.columns=[],t.columns.push(i),0==t.symbolQuotation.lever_min_share?t.number=0:t.number=t.symbolQuotation.lever_min_share,t.multiple0=t.columns[0][0],t.multiple1=t.columns[0][0],t.price=a.now_price}t.startSocketXX(),t.calc(),t.gcalc()}))})),(0,s.default)(l,"confirm",(function(t){var e=this,a=(t.columnIndex,t.value),i=(t.values,t.index,t.picker);void 0===i&&this.$refs.uPicker;this.multiple0=a[0],this.shows=!1,this.showMess=!1,this.show=!1;this.$H.post("/api/v1/lever/close",!1,{id:this.items.id}).then((function(t){if(uni.showTabBar(),"ok"==t.type){uni.$u.toast(e.$t("deposit.completed"));var a=e.indexList.findIndex((function(t){return t.id==e.items.id}));a>-1&&e.indexList.splice(a,1)}}))})),(0,s.default)(l,"cancel",(function(t){this.shows=!1,this.showMess=!1})),(0,s.default)(l,"gconfirm",(function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.guPicker;this.multiple1=e[0],this.gshows=!1})),(0,s.default)(l,"gcancel",(function(t){this.gshows=!1})),(0,s.default)(l,"kcconfirm",(function(t){t.columnIndex;var e=t.value,a=(t.values,t.index,t.picker);void 0===a&&this.$refs.uPickers;this.kcvalues=e[0].seconds,this.kcshows=!1})),(0,s.default)(l,"kccancel",(function(t){this.kcshows=!1})),(0,s.default)(l,"changesTabs",(function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto="tab"+t)})),(0,s.default)(l,"open",(function(){})),(0,s.default)(l,"close",(function(){this.ordershow=!1,this.showMess=!1})),(0,s.default)(l,"ChangePeriod",(function(t){this.pids=t,this.timePeriod=t,this.ClearChart(),this.CreateKLineChart(1,t)})),(0,s.default)(l,"ChangeIndex",(function(t,e,a){if(t){var i=this.indicatorList.findIndex((function(t){return t==e}));if(i>-1)C.JSChart.RemoveIndexWindow(i+1),this.indicatorList.splice(i,1);else{if(this.indicatorList.length>=3)return;this.indicatorList.push(e),C.JSChart.AddIndexWindow(e)}a.select=!a.select}else{var r=this.miansList.findIndex((function(t){return t==e}));if(r>-1)C.JSChart.DeleteOverlayWindowsIndex(e),this.miansList.splice(r,1);else{this.miansList.push(e);var n={WindowIndex:t,IndexName:e,Identify:e,ShowRightText:!1,OverlayIndexFrameWidth:30,ShowToolbar:!1,IsShowIndexTitle:!1};C.JSChart.AddOverlayIndex(n)}a.select=!a.select}})),(0,s.default)(l,"GetBITDecimal",(function(t){return 5})),(0,s.default)(l,"ClearChart",(function(){var t=document.getElementById("k-line-chart");if(t)try{while(t.hasChildNodes())t.removeChild(t.lastChild)}finally{}this.chart=null})),(0,s.default)(l,"calc",(function(){var t=this.symbolQuotation,e=this.buyDirection,a=this.multiple0,i=this.number,r=Number(t.spread),n=Number(t.lever_share_num),s=(Number(t.lever_trade_fee),Number(t.now_price)),o=parseFloat(s*r/100),h=0;h=0==e?parseFloat(s+o):parseFloat(s-o);var l=parseFloat(h*n*i);this.each_piece=t.each_piece,this.margin=(l/a*this.each_piece).toFixed(5),this.handlingFee=this.micro_trade_fee*Math.ceil(i)})),(0,s.default)(l,"gcalc",(function(){var t=this.symbolQuotation,e=this.buyDirection,a=this.multiple1,i=this.gnumber,r=Number(t.spread),n=Number(t.lever_share_num),s=(Number(t.lever_trade_fee),Number(t.now_price)),o=parseFloat(s*r/100),h=0;h=0==e?parseFloat(s+o):parseFloat(s-o);var l=parseFloat(h*n*i);this.each_piece=t.each_piece,this.gmargin=(l/a*this.each_piece).toFixed(5),this.ghandlingFee=this.micro_trade_fee*Math.ceil(i)})),l)};e.default=m},e14e:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.createAnimation=function(t,e){if(!e)return;return clearTimeout(e.timer),new o(t,e)},a("4626"),a("5ac7"),a("c223"),a("bf0f"),a("2797");var r=i(a("9b1b")),n=i(a("80b1")),s=i(a("efe5")),o=function(){function t(e,a){(0,n.default)(this,t),this.options=e,this.animation=uni.createAnimation((0,r.default)({},e)),this.currentStepAnimates={},this.next=0,this.$=a}return(0,s.default)(t,[{key:"_nvuePushAnimates",value:function(t,e){var a=this.currentStepAnimates[this.next],i={};if(i=a||{styles:{},config:{}},h.includes(t)){i.styles.transform||(i.styles.transform="");var r="";"rotate"===t&&(r="deg"),i.styles.transform+="".concat(t,"(").concat(e+r,") ")}else i.styles[t]="".concat(e);this.currentStepAnimates[this.next]=i}},{key:"_animateRun",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.$.$refs["ani"].ref;if(a)return new Promise((function(i,n){nvueAnimation.transition(a,(0,r.default)({styles:t},e),(function(t){i()}))}))}},{key:"_nvueNextAnimate",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,r=t[a];if(r){var n=r.styles,s=r.config;this._animateRun(n,s).then((function(){a+=1,e._nvueNextAnimate(t,a,i)}))}else this.currentStepAnimates={},"function"===typeof i&&i(),this.isEnd=!0}},{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.animation.step(t),this}},{key:"run",value:function(t){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((function(){"function"===typeof t&&t()}),this.$.durationTime)}}]),t}(),h=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];h.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((function(t){o.prototype[t]=function(){var e;return(e=this.animation)[t].apply(e,arguments),this}}))},e29e:function(t,e,a){var i=a("4573");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("1b3709c5",i,!0,{sourceMap:!1,shadowMode:!1})},e3b2:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("33e6")),n={name:"u-link",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{linkStyle:function(){var t={color:this.color,fontSize:uni.$u.addUnit(this.fontSize),lineHeight:uni.$u.addUnit(uni.$u.getPx(this.fontSize)+2),textDecoration:this.underLine?"underline":"none"};return t}},methods:{openLink:function(){window.open(this.href),this.$emit("click")}}};e.default=n},e4b1:function(t,e,a){"use strict";var i=a("77b1"),r=a.n(i);r.a},e4fe:function(t,e,a){"use strict";a.r(e);var i=a("94bc"),r=a("7111");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=o.exports},e54a:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa77"),a("bf0f"),a("dc8a"),a("4626"),a("5ac7");var i={name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted:function(){var t=this,e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(function(a){if(!t.disable){var i=Object.keys(e).find((function(t){var i=a.key,r=e[t];return r===i||Array.isArray(r)&&r.includes(i)}));i&&setTimeout((function(){t.$emit(i,{})}),0)}}))},render:function(){}};e.default=i},e5a6:function(t,e,a){"use strict";a.r(e);var i=a("d7b3"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},e5a63:function(t,e,a){"use strict";a.r(e);var i=a("be42"),r=a("722b");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("f923");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"ab364b0e",null,!1,i["a"],void 0);e["default"]=o.exports},e668:function(t,e,a){"use strict";function i(t,a){return e.default=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,a)}a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,a("8a8d")},e6ce:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniForms:a("cb0f").default,"u-Input":a("2354").default,uniEasyinput:a("f5b2").default,uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.registerSwitch?t._e():a("v-uni-scroll-view",[a("v-uni-view",{staticStyle:{width:"100%",margin:"0 auto",padding:"10px 0 10px 0","text-align":"center","font-size":"18px"}},[t._v(t._s(t.i18n.welcome_sign_in))]),a("uni-forms",{attrs:{modelValue:t.formData}},[a("v-uni-view",{staticStyle:{opacity:"1",width:"90%",margin:"0 auto"}},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"10px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"}},[a("v-uni-text",{staticClass:"wrap_text",staticStyle:{color:"#0166fc"}},[t._v(t._s(t.i18n.emallogo))]),a("u--input",{staticStyle:{"border-radius":"55px","padding-left":"15px",height:"32px","background-color":"#f8f8f8",border:"none"},attrs:{placeholder:t.i18n.enter_email},model:{value:t.usestring,callback:function(e){t.usestring=e},expression:"usestring"}})],1)],1),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"5px"}},[a("v-uni-view",{staticStyle:{width:"100%","margin-top":"15px"}},[a("v-uni-text",{staticClass:"wrap_text"},[t._v(t._s(t.i18n.pwd))]),a("uni-easyinput",{staticClass:"uni-mt-5",attrs:{type:t.types,passwordIcon:!1,suffixIcon:t.suffixIcon,placeholder:t.i18n.enter_password},on:{iconClick:function(e){arguments[0]=e=t.$handleEvent(e),t.suffix.apply(void 0,arguments)}},model:{value:t.passwords,callback:function(e){t.passwords=e},expression:"passwords"}})],1)],1)],1),a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"15px",padding:"0 3px"}},[a("v-uni-view",{staticStyle:{color:"#9F9F9F","font-size":"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendData("login")}}},[t._v(t._s(t.i18n.have_account)),a("v-uni-text",{staticStyle:{color:"#537efd","font-weight":"bold","font-size":"15px","padding-left":"10px"}},[t._v(t._s(t.i18n.register))])],1),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendData("resetPass")}}},[a("v-uni-text",{staticStyle:{"font-size":"15px",color:"#9F9F9F"}},[t._v(t._s(t.i18n.forgot_password))])],1)],1),a("v-uni-view",{staticStyle:{width:"100%","margin-top":"30px","padding-bottom":"20px"}},[a("u-button",{staticStyle:{"border-radius":"55px",background:"#0166fc","margin-top":"40px",border:"0","font-size":"14px",height:"45px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loading:t.loading,loadingText:"",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obutton()}}},[t._v(t._s(t.i18n.sign_in))]),a("u-button",{staticStyle:{"border-radius":"55px",background:"#0166fc",border:"1px solid #0166fc","margin-top":"10px","font-size":"14px",height:"45px",color:"#FFFFFF","line-height":"15px !important"},attrs:{loading:t.tyloading,loadingText:"",loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obuttons()}}},[t._v(t._s(t.i18n.creat_account))])],1)],1)],1)],1)],1)],1)},n=[]},e7e5:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={"u-Image":a("e4fe").default,uButton:a("e196").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticStyle:{height:"15px"}}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"bheight: 430px;background: #22252F;color: #ffffff;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;":"bheight: 430px;background: #FFFFFF;;border-radius: 6px 6px 6px 6px;opacity: 1; width: 90%; margin: 0 auto;"},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","margin-top":"15px"}},[a("v-uni-view",{staticStyle:{flex:"1","font-size":"14px",color:"#dad5da",width:"100%","text-align":"center"}},[t._v(t._s(t.i18n.invitation_code))]),a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"100%","margin-top":"10px","justify-content":"center","align-items":"center"}},[a("v-uni-text",{staticStyle:{color:"var(--mainColor)","font-weight":"bold","font-size":"18px"}},[t._v(t._s(this.$store.state.users.extension_code))]),a("v-uni-view",{staticStyle:{width:"205px",height:"205px",margin:"0 auto",display:"flex","justify-content":"center","align-items":"center"}},[a("u--image",{attrs:{src:t.urls,mode:"widthFix",width:"380",height:"380"}})],1),a("v-uni-view",{staticStyle:{"margin-top":"1px",width:"260px","font-size":"14px",overflow:"hidden","word-wrap":"break-word","text-align":"center"}},[t._v(t._s(this.erwims))]),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"10px"}},[a("u-button",{staticStyle:{background:"var(--mainColor)","margin-top":"2px","border-radius":"100px",border:"0","font-size":"14px",width:"140px",color:"#FFFFFF","line-height":"55px !important"},attrs:{loadingSize:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.obutton()}}},[t._v(t._s(t.i18n.copy_invitation_link))])],1)],1)],1)],1)],1)],1)},n=[]},e7f9:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-01a2205d], uni-scroll-view[data-v-01a2205d], uni-swiper-item[data-v-01a2205d]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-list[data-v-01a2205d]{display:flex;flex-direction:column}',""]),t.exports=e},ea4b:function(t,e,a){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},ecb2:function(t,e,a){a("c9b5"),a("bf0f"),a("ab80"),a("e966");var i=a("ada7");function r(t){this.mode=i.NUMERIC,this.data=t.toString()}r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e,a,i;for(e=0;e+3<=this.data.length;e+=3)a=this.data.substr(e,3),i=parseInt(a,10),t.put(i,10);var r=this.data.length-e;r>0&&(a=this.data.substr(e),i=parseInt(a,10),t.put(i,3*r+1))},t.exports=r},ed14:function(t,e,a){"use strict";a.r(e);var i=a("2cb0"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},ee5d:function(t,e,a){"use strict";var i=a("79ed"),r=a.n(i);r.a},ef3c:function(t,e,a){"use strict";a.r(e);var i=a("5a15"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=r.a},f042:function(t,e,a){"use strict";var i=a("8bdb"),r=a("e78b");i({target:"Math",stat:!0},{sign:r})},f07e:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".whiles[data-v-fa08a900] .uni-scroll-view, .uni-scroll-view-content[data-v-fa08a900]{\n\t    /* background-color: #F7F8FA; */}.blacks[data-v-fa08a900] .uni-scroll-view, .uni-scroll-view-content[data-v-fa08a900]{color:#fff!important}.blacks[data-v-fa08a900] .u-line[data-v-e778bab2]{margin:0 auto!important;width:90%!important;border-bottom:1px solid #1a1c24!important}.whiles[data-v-fa08a900] .u-line[data-v-e778bab2]{margin:0 auto!important;width:90%!important}.uni-nav-bar[data-v-fa08a900]{background-color:#222}.blacks[data-v-fa08a900] .u-cell__body{color:#fff!important}.blacks[data-v-fa08a900]{background:#1a1c24}",""]),t.exports=e},f1f8:function(t,e,a){"use strict";function i(t){return e.default=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,a("8a8d"),a("926e")},f221b:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c");var r=i(a("39d8")),n=a("44d8"),s={data:function(){var t;return t={formData:{password:""},types:"password",confirmtypes:"password",loading:!1,tips:"",seconds:""},(0,r.default)(t,"loading",!1),(0,r.default)(t,"values",null),(0,r.default)(t,"value",null),(0,r.default)(t,"passwordShow",!0),(0,r.default)(t,"confirmpasswords",null),(0,r.default)(t,"passwords",null),(0,r.default)(t,"confirmpasswordShow",!0),(0,r.default)(t,"xyname",null),(0,r.default)(t,"checkboxValue1",null),(0,r.default)(t,"usestring",""),(0,r.default)(t,"getcode",null),(0,r.default)(t,"clangs",{}),(0,r.default)(t,"language",[]),(0,r.default)(t,"modalName",null),t},mounted:function(){this.language=n.langs,this.setLoads()},onShow:function(){this.setLgs()},methods:{sendData:function(){this.$emit("data-sent","resetPass")},setLoads:function(){var t=uni.getStorageSync("lang")||"en";this.language.map((function(e){return e.selected=!1,e.value==t&&(e.selected=!0),e}))},setLgs:function(){var t=this,e=uni.getStorageSync("lang")||"en";this.language.map((function(a){return a.value==e&&(t.clangs=a),a}))},setLang:function(t){var e=this.language.map((function(e){return e.selected=!1,e.value==t.value&&(e.selected=!0),e}));this.language=e,this._i18n.locale=t.value,uni.setStorageSync("lang",t.value),this.$utils.setTabbar(this),this.clangs=t,this.hideModal(),document.querySelector(".u-button__text").innerText=this.$t("reset.get_ver_code")},showModal:function(t){uni.navigateTo({url:"/pages/language/language"})},hideModal:function(t){this.modalName=null},obutton:function(){var t=this,e=this.usestring,a=this.code,i=this.passwords,r=this.confirmpasswords;this.loading=!0;this.$H.post("/api/v1/resetPassword",!1,{email:e,code:a,password:i,repassword:r}).then((function(e){t.loading=!1,"ok"==e.type&&(uni.$u.toast(t.$t("deposit.completed")),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),200))}))},isShow:function(){this.types="password"===this.types?"text":"password"},backs:function(){uni.navigateBack({delta:1})},checkboxChange:function(){},codeChange:function(t){"获取验证码"!=t&&"重新获取"!=t||(t=this.$t("reset.get_ver_code")),this.tips=t},getCode:function(){var t=this,e=this.usestring;if(this.$refs.uCode.canGetCode){uni.showLoading({});this.$H.post("/api/v1/sms_mail",!1,{user_string:e}).then((function(e){uni.hideLoading(),"ok"==e.type&&(console.log(e),t.getcode=1,t.$refs.uCode.start())}))}},suffix:function(){this.types="password"===this.types?"text":"password",this.passwordShow=!this.passwordShow,this.passwordShow&&(this.types="password")},confirmsuffix:function(){this.confirmtypes="password"===this.confirmtypes?"text":"password",this.confirmpasswordShow=!this.confirmpasswordShow,this.passwordShow&&(this.types="password")}},computed:{i18n:function(){return this.$t("reset")},suffixIcon:function(){return this.passwordShow?"iconfont icon-biyan":"eye-filled"},confirmsuffixIcon:function(){return this.confirmpasswordShow?"iconfont icon-biyan":"eye-filled"}}};e.default=s},f43b:function(t,e,a){"use strict";var i=a("4681"),r=a.n(i);r.a},f478:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},a("7a76"),a("c9b5")},f4ba:function(t,e,a){"use strict";var i=a("739c"),r=a.n(i);r.a},f570:function(t,e,a){var i=a("e7f9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("67343c4c",i,!0,{sourceMap:!1,shadowMode:!1})},f5a6:function(t,e,a){a("bf0f"),a("2797"),a("4db2"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),a("f7a5"),a("7a76"),a("c9b5");var i=a("5335"),r=a("db0b"),n=a("b740"),s=a("7d58"),o=a("8af1"),h=a("8ab5"),l=a("4a4b"),u=a("a12b"),c=a("00ac"),d=a("3916"),f=a("fffd"),C=a("ada7"),m=a("181e");function D(t,e,a){var i,r,n=t.size,s=f.getEncodedBits(e,a);for(i=0;i<15;i++)r=1===(s>>i&1),i<6?t.set(i,8,r,!0):i<8?t.set(i+1,8,r,!0):t.set(n-15+i,8,r,!0),i<8?t.set(8,n-i-1,r,!0):i<9?t.set(8,15-i-1+1,r,!0):t.set(8,15-i-1,r,!0);t.set(n-8,8,1,!0)}function p(t,e,a){var r=new n;a.forEach((function(e){r.put(e.mode.bit,4),r.put(e.getLength(),C.getCharCountIndicator(e.mode,t)),e.write(r)}));var s=i.getSymbolTotalCodewords(t),o=u.getTotalCodewordsCount(t,e),h=8*(s-o);r.getLengthInBits()+4<=h&&r.put(0,4);while(r.getLengthInBits()%8!==0)r.putBit(0);for(var l=(h-r.getLengthInBits())/8,d=0;d<l;d++)r.put(d%2?17:236,8);return function(t,e,a){for(var r=i.getSymbolTotalCodewords(e),n=u.getTotalCodewordsCount(e,a),s=r-n,o=u.getBlocksCount(e,a),h=r%o,l=o-h,d=Math.floor(r/o),f=Math.floor(s/o),C=f+1,m=d-f,D=new c(m),p=0,v=new Array(o),g=new Array(o),S=0,I=new Uint8Array(t.buffer),T=0;T<o;T++){var x=T<l?f:C;v[T]=I.slice(p,p+x),g[T]=D.encode(v[T]),p+=x,S=Math.max(S,x)}var y,A,b=new Uint8Array(r),w=0;for(y=0;y<S;y++)for(A=0;A<o;A++)y<v[A].length&&(b[w++]=v[A][y]);for(y=0;y<m;y++)for(A=0;A<o;A++)b[w++]=g[A][y];return b}(r,t,e)}function v(t,e,a,r){var n;if(Array.isArray(t))n=m.fromArray(t);else{if("string"!==typeof t)throw new Error("Invalid data");var u=e;if(!u){var c=m.rawSplit(t);u=d.getBestVersionForData(c,a)}n=m.fromString(t,u||40)}var f=d.getBestVersionForData(n,a);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<f)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+f+".\n")}else e=f;var C=p(e,a,n),v=i.getSymbolSize(e),g=new s(v);return function(t,e){for(var a=t.size,i=h.getPositions(e),r=0;r<i.length;r++)for(var n=i[r][0],s=i[r][1],o=-1;o<=7;o++)if(!(n+o<=-1||a<=n+o))for(var l=-1;l<=7;l++)s+l<=-1||a<=s+l||(o>=0&&o<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===o||6===o)||o>=2&&o<=4&&l>=2&&l<=4?t.set(n+o,s+l,!0,!0):t.set(n+o,s+l,!1,!0))}(g,e),function(t){for(var e=t.size,a=8;a<e-8;a++){var i=a%2===0;t.set(a,6,i,!0),t.set(6,a,i,!0)}}(g),function(t,e){for(var a=o.getPositions(e),i=0;i<a.length;i++)for(var r=a[i][0],n=a[i][1],s=-2;s<=2;s++)for(var h=-2;h<=2;h++)-2===s||2===s||-2===h||2===h||0===s&&0===h?t.set(r+s,n+h,!0,!0):t.set(r+s,n+h,!1,!0)}(g,e),D(g,a,0),e>=7&&function(t,e){for(var a,i,r,n=t.size,s=d.getEncodedBits(e),o=0;o<18;o++)a=Math.floor(o/3),i=o%3+n-8-3,r=1===(s>>o&1),t.set(a,i,r,!0),t.set(i,a,r,!0)}(g,e),function(t,e){for(var a=t.size,i=-1,r=a-1,n=7,s=0,o=a-1;o>0;o-=2){6===o&&o--;while(1){for(var h=0;h<2;h++)if(!t.isReserved(r,o-h)){var l=!1;s<e.length&&(l=1===(e[s]>>>n&1)),t.set(r,o-h,l),n--,-1===n&&(s++,n=7)}if(r+=i,r<0||a<=r){r-=i,i=-i;break}}}}(g,C),isNaN(r)&&(r=l.getBestMask(g,D.bind(null,g,a))),l.applyMask(r,g),D(g,a,r),{modules:g,version:e,errorCorrectionLevel:a,maskPattern:r,segments:n}}e.create=function(t,e){if("undefined"===typeof t||""===t)throw new Error("No input text");var a,n,s=r.M;return"undefined"!==typeof e&&(s=r.from(e.errorCorrectionLevel,r.M),a=d.from(e.version),n=l.from(e.maskPattern),e.toSJISFunc&&i.setToSJISFunction(e.toSJISFunc)),v(t,a,s,n)}},f5b2:function(t,e,a){"use strict";a.r(e);var i=a("bea3"),r=a("6220");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("896c");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"102d68aa",null,!1,i["a"],void 0);e["default"]=o.exports},f5fc:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,"uni-page-body[data-v-3740f4af]{background:#f7f8fa;overflow:initial;position:static}body.?%PAGE?%[data-v-3740f4af]{background:#f7f8fa}",""]),t.exports=e},f72c:function(t,e,a){var i=a("1238");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("7002d2c6",i,!0,{sourceMap:!1,shadowMode:!1})},f738:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* \tpage {\n\tbackground-color: #FFFFFF;\n}\n\n.u-border {\n\tborder-color: #D2D6E8 !important;\n}\n\n.u-button--info[data-v-3bf2dba7] {\n\tcolor: #4B53F5;\n\tborder-color: #ebedf0;\n\tborder-width: 0px;\n\tfont-weight: bold;\n} */.inps[data-v-daaaf85a]{background-color:#f8f8f8!important;padding:10px!important;height:25px;border-radius:55px}.my_u_button[data-v-daaaf85a]{background-color:#0166fc;height:35px;border-radius:25px;color:#fff!important}.wrap_text[data-v-daaaf85a]{display:block;margin-bottom:%?20?%;font-size:16px;font-weight:500}[data-v-daaaf85a] .uni-easyinput__content[data-v-abe12412]{background-color:#f8f8f8!important;border-radius:6vh;border:none;padding:4px}.br_55[data-v-daaaf85a]{\n\t/* border-radius: 65px; */}[data-v-daaaf85a] .u-input{background:#fff;border:none}[data-v-daaaf85a] .u-icon__img{width:20px!important;height:20px!important}\n\n/* /deep/.u-icon__icon[data-v-172979f2] {\n\n    font-size: 22px !important;\n} */[data-v-daaaf85a] .content-clear-icon{color:initial!important}[data-v-daaaf85a] .uni-easyinput__content[data-v-abe12412]{border-radius:55px;padding:4px;border:none}[data-v-daaaf85a] .uni-easyinput__placeholder-class{font-size:15px;color:#c0c4cc;padding-left:3px!important}[data-v-daaaf85a] .uni-easyinput__content-input{padding-left:3px!important}uni-page-body[data-v-daaaf85a]{position:inherit}\n\n/* \t/deep/.u-checkbox__icon-wrap--square{\n    border-radius: 50%;\n} */.DrawerPage[data-v-daaaf85a]{position:relative;width:100vw;\n\t/* height: 100vh; */left:0;background-color:#fff;transition:all .4s}.DrawerPage.show[data-v-daaaf85a]{-webkit-transform:scale(.9);transform:scale(.9);left:65vw;box-shadow:0 0 %?60?% rgba(0,0,0,.2);-webkit-transform-origin:0;transform-origin:0}.DrawerWindow[data-v-daaaf85a]{position:absolute;width:65vw;\n\t/* height: 100vh; */left:0;top:0;-webkit-transform:scale(.9) translateX(-100%);transform:scale(.9) translateX(-100%);opacity:0;pointer-events:none;transition:all .4s;padding:10px 0}.DrawerWindow.show[data-v-daaaf85a]{-webkit-transform:scale(1) translateX(0);transform:scale(1) translateX(0);opacity:1;pointer-events:all}.DrawerClose[data-v-daaaf85a]{position:absolute;width:40vw;\n\t/* height: 100vh; */right:0;top:0;color:transparent;padding-bottom:%?30?%;display:flex;align-items:flex-end;justify-content:center;background-image:linear-gradient(90deg,rgba(0,0,0,.01),rgba(0,0,0,.6));letter-spacing:5px;font-size:%?50?%;opacity:0;pointer-events:none;transition:all .4s}.DrawerClose.show[data-v-daaaf85a]{opacity:1;pointer-events:all;width:35vw;color:#fff}.DrawerPage .cu-bar.tabbar .action uni-button.cuIcon[data-v-daaaf85a]{width:%?64?%;height:%?64?%;line-height:%?64?%;margin:0;display:inline-block}.DrawerPage .cu-bar.tabbar .action .cu-avatar[data-v-daaaf85a]{margin:0}.DrawerPage .nav[data-v-daaaf85a]{flex:1}.DrawerPage .nav .cu-item.cur[data-v-daaaf85a]{border-bottom:0;position:relative}.DrawerPage .nav .cu-item.cur[data-v-daaaf85a]::after{content:"";width:%?10?%;height:%?10?%;background-color:currentColor;position:absolute;bottom:%?10?%;border-radius:%?10?%;left:0;right:0;margin:auto}.DrawerPage .cu-bar.tabbar .action[data-v-daaaf85a]{flex:initial}.DrawerWindow uni-view[data-v-daaaf85a],\nuni-scroll-view[data-v-daaaf85a],\nuni-swiper[data-v-daaaf85a],\nuni-button[data-v-daaaf85a],\nuni-input[data-v-daaaf85a],\nuni-textarea[data-v-daaaf85a],\nuni-label[data-v-daaaf85a],\nuni-navigator[data-v-daaaf85a],\nuni-image[data-v-daaaf85a]{box-sizing:border-box}.DrawerClose uni-view[data-v-daaaf85a],\nuni-scroll-view[data-v-daaaf85a],\nuni-swiper[data-v-daaaf85a],\nuni-button[data-v-daaaf85a],\nuni-input[data-v-daaaf85a],\nuni-textarea[data-v-daaaf85a],\nuni-label[data-v-daaaf85a],\nuni-navigator[data-v-daaaf85a],\nuni-image[data-v-daaaf85a]{box-sizing:border-box}uni-view[data-v-daaaf85a],\nuni-image[data-v-daaaf85a]{box-sizing:border-box}\n.uni-scroll-view-content uni-view[data-v-daaaf85a],\nuni-image[data-v-daaaf85a]{box-sizing:initial!important}',""]),t.exports=e},f7d6:function(t,e,a){function i(t){if("number"===typeof t&&(t=t.toString()),"string"!==typeof t)throw new Error("Color should be defined as hex string");var e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");var a=parseInt(e.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:255&a,hex:"#"+e.slice(0,6).join("")}}a("c9b5"),a("bf0f"),a("ab80"),a("7a76"),a("5c47"),a("a1c1"),a("f7a5"),a("c223"),a("fd3c"),a("aa9c"),a("e966"),e.getOptions=function(t){t||(t={}),t.color||(t.color={});var e="undefined"===typeof t.margin||null===t.margin||t.margin<0?4:t.margin,a=t.width&&t.width>=21?t.width:void 0,r=t.scale||4;return{width:a,scale:a?4:r,margin:e,color:{dark:i(t.color.dark||"#000000ff"),light:i(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,a){var i=e.getScale(t,a);return Math.floor((t+2*a.margin)*i)},e.qrToImageData=function(t,a,i){for(var r=a.modules.size,n=a.modules.data,s=e.getScale(r,i),o=Math.floor((r+2*i.margin)*s),h=i.margin*s,l=[i.color.light,i.color.dark],u=0;u<o;u++)for(var c=0;c<o;c++){var d=4*(u*o+c),f=i.color.light;if(u>=h&&c>=h&&u<o-h&&c<o-h){var C=Math.floor((u-h)/s),m=Math.floor((c-h)/s);f=l[n[C*r+m]?1:0]}t[d++]=f.r,t[d++]=f.g,t[d++]=f.b,t[d]=f.a}}},f923:function(t,e,a){"use strict";var i=a("fe8c"),r=a.n(i);r.a},fad5:function(t,e,a){var i=a("f738");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("25c10733",i,!0,{sourceMap:!1,shadowMode:!1})},fc24:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={watch:{accept:{immediate:!0,handler:function(t){"all"!==t&&"media"!==t||uni.$u.error("只有微信小程序才支持把accept配置为all、media之一")}}}};e.default=i},fc44:function(t,e,a){"use strict";a.r(e);var i=a("5c18"),r=a("d238");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("806a");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"1693f0ea",null,!1,i["a"],void 0);e["default"]=o.exports},fc7c:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t._l(t.messageList,(function(e,i){return t.messageList.length?a("v-uni-view",{key:i,on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goArticle(e)}}},[a("v-uni-view",{staticStyle:{height:"10px"}}),a("v-uni-view",{style:"black"==t.$store.state.bgColor?"display: flex; flex-direction: column; width: 95%; margin: 0 auto;  height: auto;background: #22252F;color: #fff;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1;":"display: flex; flex-direction: column; width: 95%; margin: 0 auto;  height: auto;background: #FFFFFF;box-shadow: 0px 0px 12px 0px rgba(0,33,123,0.16);border-radius: 6px 6px 6px 6px;opacity: 1;"},[a("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"90%","justify-content":"space-between",height:"auto",margin:"0 auto","margin-top":"15px","padding-bottom":"13px"}},[a("v-uni-text",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"#A0A2A5"}},[t._v(t._s(e.create_time))]),a("v-uni-text",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[t._v(t._s(e.title))])],1)],1)],1):t._e()})),a("el-empty",{attrs:{description:t.noData}})],2)},r=[]},fcad:function(t,e,a){a("7a76"),a("c9b5");var i=a("ada7"),r=a("5335");function n(t){this.mode=i.KANJI,this.data=t}n.getBitsLength=function(t){return 13*t},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var a=r.toSJIS(this.data[e]);if(a>=33088&&a<=40956)a-=33088;else{if(!(a>=57408&&a<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");a-=49472}a=192*(a>>>8&255)+(255&a),t.put(a,13)}},t.exports=n},fcf4:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-34501f9b], uni-scroll-view[data-v-34501f9b], uni-swiper-item[data-v-34501f9b]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-image[data-v-34501f9b]{position:relative;transition:opacity .5s ease-in-out}.u-image__image[data-v-34501f9b]{width:100%;height:100%}.u-image__loading[data-v-34501f9b], .u-image__error[data-v-34501f9b]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#f3f4f6;color:#909193;font-size:%?46?%}',""]),t.exports=e},fe73:function(t,e,a){"use strict";var i=a("f72c"),r=a.n(i);r.a},fe7e:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".blacks .uni-list-item[data-v-13605fe1]{background:#22252f!important;color:#fff!important}.blacks[data-v-13605fe1] .uni-list--border:after{position:static}.blacks[data-v-13605fe1] .u-popup__content{background:#222;color:#fff}.blacks[data-v-13605fe1] .u-modal__title{color:#fff}.blacks[data-v-13605fe1] .u-modal__content__text{color:#fff}.blacks[data-v-13605fe1] .uni-list-item__content-title{color:#fff}",""]),t.exports=e},fe8c:function(t,e,a){var i=a("aa95");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("967d").default;r("cbb4000a",i,!0,{sourceMap:!1,shadowMode:!1})},ff1d:function(t,e,a){"use strict";a.r(e);var i=a("d61b"),r=a("87df");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("f43b");var s=a("828b"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"b90d6f18",null,!1,i["a"],void 0);e["default"]=o.exports},ff36:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-39c5df65], uni-scroll-view[data-v-39c5df65], uni-swiper-item[data-v-39c5df65]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-avatar[data-v-39c5df65]{display:flex;flex-direction:row;align-items:center;justify-content:center}.u-avatar--circle[data-v-39c5df65]{border-radius:100px}.u-avatar--square[data-v-39c5df65]{border-radius:4px}.u-avatar__image--circle[data-v-39c5df65]{border-radius:100px}.u-avatar__image--square[data-v-39c5df65]{border-radius:4px}',""]),t.exports=e},fffd:function(t,e,a){var i=a("5335"),r=i.getBCHDigit(1335);e.getEncodedBits=function(t,e){var a=t.bit<<3|e,n=a<<10;while(i.getBCHDigit(n)-r>=0)n^=1335<<i.getBCHDigit(n)-r;return 21522^(a<<10|n)}}}]);