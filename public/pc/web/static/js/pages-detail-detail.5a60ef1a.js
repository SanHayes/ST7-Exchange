(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-detail"],{"0445":function(t,e,o){"use strict";o.r(e);var n=o("2727"),a=o("e4e7");for(var i in a)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(i);var l=o("828b"),s=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"71709c68",null,!1,n["a"],void 0);e["default"]=s.exports},2727:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}));var n={uTabbar:o("2579").default,uTabbarItem:o("96b9").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"divchart",staticStyle:{"background-color":"#0e182e"}},[o("div",[o("div",{ref:"kline",staticClass:"kline",attrs:{id:"kline"}})]),o("div",{staticClass:"button-sp-area"},[o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(-1)}}},[t._v("分时")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(0)}}},[t._v("日线")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(1)}}},[t._v("周线")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(4)}}},[t._v("1分钟")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangePeriod(6)}}},[t._v("15分钟")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeDepthChart()}}},[t._v("深度图")])],1),o("div",{staticClass:"button-sp-area"},[o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeSymbol("btcusdt")}}},[t._v("btcusdt")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeSymbol("ethusdt")}}},[t._v("ethusdt")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeIndex(0,"EMPTY")}}},[t._v("EMPTY")]),o("v-uni-button",{staticClass:"mini-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeIndex(1,"MACD")}}},[t._v("MACD")])],1),o("u-tabbar",{attrs:{value:t.value1,fixed:!1,placeholder:!1,safeAreaInsetBottom:!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change1.apply(void 0,arguments)}}},[o("u-tabbar-item",{attrs:{text:"首页",icon:"home"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click1.apply(void 0,arguments)}}}),o("u-tabbar-item",{attrs:{text:"放映厅",icon:"photo"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click1.apply(void 0,arguments)}}}),o("u-tabbar-item",{attrs:{text:"直播",icon:"play-right"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click1.apply(void 0,arguments)}}}),o("u-tabbar-item",{attrs:{text:"我的",icon:"account"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click1.apply(void 0,arguments)}}})],1)],1)},i=[]},e4e7:function(t,e,o){"use strict";o.r(e);var n=o("fad1"),a=o.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},fad1:function(t,e,o){"use strict";o("6a54");var n=o("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("d4b5"),o("c1a3"),o("bf0f"),o("18f7"),o("de6c"),o("c223"),o("aa9c");var a=n(o("2634")),i=n(o("2fdc")),l=n(o("9b1b")),s=n(o("4b66")),r=o("8f59");o("c5ee");function h(){}h.GetKLineOption=function(){return{Type:"历史K线图",Windows:[{Index:"MA",Modify:!1,Change:!1,Close:!1},{Index:"VOL",Modify:!1,Change:!1,Close:!1},{Index:"MACD2",Modify:!1,Change:!1,Close:!1}],IsAutoUpdate:!1,IsApiPeriod:!0,IsCorssOnlyDrawKLine:!0,CorssCursorTouchEnd:!0,Border:{Left:1,Right:1,Top:25,Bottom:25},KLine:{Right:0,Period:0,PageSize:30,IsShowTooltip:!1,DrawType:0},KLineTitle:{IsShowName:!1,IsShowSettingInfo:!1},Frame:[{SplitCount:3,IsShowLeftText:!1,SplitType:1,Custom:[{Type:0,Position:"right"}]},{SplitCount:2,IsShowLeftText:!1,SplitType:1},{SplitCount:2,IsShowLeftText:!1}],ExtendChart:[{Name:"KLineTooltip"}]}},h.GetMinuteOption=function(){return{Type:"历史K线图",Windows:[{Index:"EMPTY",Modify:!1,Change:!1,Close:!1,TitleHeight:0},{Index:"VOL",Modify:!1,Change:!1,Close:!1}],IsAutoUpdate:!1,IsApiPeriod:!0,IsCorssOnlyDrawKLine:!0,CorssCursorTouchEnd:!0,Border:{Left:1,Right:1,Top:25,Bottom:25},KLine:{Right:0,Period:4,PageSize:60,IsShowTooltip:!1,DrawType:4},KLineTitle:{IsShowName:!1,IsShowSettingInfo:!1},Frame:[{SplitCount:3,IsShowLeftText:!1,SplitType:1,Custom:[{Type:0,Position:"right"}]},{SplitCount:2,IsShowLeftText:!1,SplitType:1},{SplitCount:2,IsShowLeftText:!1}],ExtendChart:[{Name:"KLineTooltip"}]}},h.GetDepthOption=function(){return{Type:"深度图",EnableZoomUpDown:{},Symbol:"BTCBUSD.bit",IsAutoUpdate:!1,AutoUpdateFrequency:1e4,EnableScrollUpDown:!0,MaxVolRate:1.2,CorssCursorInfo:{HPenType:0,VPenType:1,IsShowTooltip:!0},Listener:{},SplashTitle:"下载数据 ......",Language:"EN",Border:{Left:1,Right:1,Bottom:25,Top:1},Frame:{SplitCount:2,IsShowLeftText:!1,XLineType:3,XSplitCount:2}}};var c={KLINE_ID:1,MINUTE_KLINE_ID:2},u={JSChart:null},d={data:function(){var t={Symbol:"btcusdt.BIT",OriginalSymbol:"btcusdt",ChartWidth:300,ChartHeight:600,KLine:{Option:h.GetKLineOption()},WSUrl:"ws://192.168.56.56:24419",SocketOpen:!1,LastSubString:null,periods:{4:"1min",5:"5min",6:"15min",0:"1day",1:"1week",2:"1mon"},Update:{EnableLimit:!1,LastUpdateTime:null,Frequency:5e3,Cache:null}};return t},name:"KLineChart",onLoad:function(){},computed:(0,l.default)({},(0,r.mapState)({socket:function(t){return t.socket},token:function(t){return t.token}})),onReady:function(){console.log("[KLineChart::onReady]"),this.$nextTick((function(){}))},onShow:function(){var t=this;uni.getSystemInfo({success:function(e){var o=e.windowWidth,n=e.windowHeight;t.ChartWidth=o,t.ChartHeight=n-130,t.$nextTick((function(){t.InitalHQChart(),t.OnSize(),t.CreateKLineChart(c.KLINE_ID,4)}))}})},onHide:function(){this.SocketOpen&&(uni.closeSocket(),this.SocketOpen=!1),this.ClearChart()},onUnload:function(){this.SocketOpen&&(uni.closeSocket(),this.SocketOpen=!1),this.ClearChart()},methods:{ChangePeriod:function(t){-1==t?u.JSChart.KLineType!=c.MINUTE_KLINE_ID&&(this.ClearChart(),this.CreateKLineChart(c.MINUTE_KLINE_ID,4)):u.JSChart.KLineType==c.KLINE_ID?u.JSChart.ChangePeriod(t):(this.ClearChart(),this.CreateKLineChart(c.KLINE_ID,t))},ChangeSymbol:function(t){this.OriginalSymbol!=t&&(this.OriginalSymbol=t,this.Symbol=t+".BIT",u.JSChart.ChangeSymbol(this.Symbol))},ChangeIndex:function(t,e){u.JSChart.ChangeIndex(t,e)},OnSize:function(){this.OnSize_h5()},OnSize_h5:function(){var t=this.ChartHeight,e=this.ChartWidth,o=this.$refs.kline;o.style.width=e+"px",o.style.height=t+"px",u.JSChart&&u.JSChart.OnSize()},InitalHQChart:function(){s.default.MARKET_SUFFIX_NAME.GetBITDecimal=this.GetBITDecimal;var t=s.default.HQChartStyle.GetStyleConfig(s.default.STYLE_TYPE_ID.BLACK_ID);this.SetHQChartStyle(t),s.default.JSChart.SetStyle(t)},SetHQChartStyle:function(t){t.BGColor="rgb(14,24,46)",t.TooltipPaint.BGColor="rgba(14,24,46,0.8)",t.FrameTitleBGColor="rgb(14,24,46)",t.FrameSplitTextColor="rgb(101,117,138)",t.UpBarColor="rgb(37,175,142)",t.UpTextColor=t.UpBarColor,t.DownBarColor="rgb(210,73,99)",t.DownTextColor=t.DownBarColor,t.UnchagneBarColor=t.UpBarColor,t.UnchagneTextColor=t.UpBarColor,t.Index.LineColor[0]="rgb(88,106,126)",t.Index.LineColor[1]="rgb(222,217,167)",t.Index.LineColor[2]="rgb(113,161,164)",t.FrameLatestPrice.UpBarColor="rgb(37,175,142)",t.FrameLatestPrice.DownBarColor="rgb(210,73,99)",t.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UpBarColor,t.Frame.XBottomOffset=2},GetBITDecimal:function(t){t.toLowerCase();return 2},ClearChart:function(){u.JSChart&&(u.JSChart.ChartDestory(),u.JSChart=null);var t=document.getElementById("kline");while(t.hasChildNodes())t.removeChild(t.lastChild)},CreateKLineChart_h5:function(t,e){if(!u.JSChart){this.KLine.Option.Symbol=this.Symbol;var o=s.default.JSChart.Init(this.$refs.kline);t==c.MINUTE_KLINE_ID?(console.log("+++++++++++++++++++"),this.KLine.Option=h.GetMinuteOption()):(console.log("-------------------------"),t=c.KLINE_ID,this.KLine.Option=h.GetKLineOption()),this.KLine.Option.NetworkFilter=this.NetworkFilter,this.KLine.Option.Symbol=this.Symbol,this.KLine.Option.KLine.Period=e,o.SetOption(this.KLine.Option),u.JSChart=o,u.JSChart.KLineType=t}},CreateKLineChart_app:function(t,e){var o=this;if(!u.JSChart){var n=new JSCommon.JSCanvasElement;n.ID="kline2",n.Height=this.ChartHeight,n.Width=this.ChartWidth,u.JSChart=JSCommon.JSChart.Init(n),t==c.MINUTE_KLINE_ID?this.KLine.Option=h.GetMinuteOption():(t=c.KLINE_ID,this.KLine.Option=h.GetKLineOption()),this.KLine.Option.NetworkFilter=function(t,e){o.NetworkFilter(t,e)},this.KLine.Option.Symbol=this.Symbol,this.KLine.Option.IsClickShowCorssCursor=!0,this.KLine.Option.IsFullDraw=!0,this.KLine.Option.KLine.Period=e,u.JSChart.SetOption(this.KLine.Option),u.JSChart.KLineType=t}},CreateKLineChart:function(t,e){this.Update.Cache=null,this.CreateKLineChart_h5(t,e)},CreateDepthChart:function(){this.Update.Cache=null,this.CreateDepthChart_h5()},CreateDepthChart_h5:function(){if(!u.JSChart){var t=s.default.JSChart.Init(this.$refs.kline),e=h.GetDepthOption();e.Symbol=this.Symbol,e.NetworkFilter=this.NetworkFilter,t.SetOption(e),u.JSChart=t}},CreateDepthChart_app:function(){if(!u.JSChart){var t=new JSCommon.JSCanvasElement;t.ID="kline2",t.Height=this.ChartHeight,t.Width=this.ChartWidth;var e=JSCommon.JSChart.Init(t),o=h.GetDepthOption();o.Symbol=this.Symbol,o.IsFullDraw=!0,o.NetworkFilter=this.NetworkFilter,e.SetOption(o),u.JSChart=e}},ChangeDepthChart:function(){u.JSChart&&"DepthChartContainer"==u.JSChart.JSChartContainer.ClassName||(this.ClearChart(),this.CreateDepthChart())},NetworkFilter:function(t,e){switch(console.log("[KLineChart::NetworkFilter] data",t),t.Name){case"KLineChartContainer::ReqeustHistoryMinuteData":console.log("ggggggggggg"),this.RequestHistoryMinuteData(t,e);break;case"KLineChartContainer::RequestFlowCapitalData":console.log("bbbbbbbbbbbb"),this.RequestFlowCapitalData(t,e);break;case"KLineChartContainer::RequestHistoryData":console.log("ggasdfggggggggg"),this.RequestHistoryData(t,e);break;case"DepthChartContainer::RequestDepthData":console.log("gggggggggggsss"),this.RequestDepthData(t,e);break}},SendWSHeartMessage:function(){if(console.log("2111111"),this.SocketOpen){var t={pong:(new Date).getTime()},e=JSON.stringify(t);uni.sendSocketMessage({data:e})}},SendUnSubscribeMessage:function(){if(console.log("2ooooooo"),this.LastSubString&&this.SocketOpen){var t=JSON.stringify({unsub:this.LastSubString});uni.sendSocketMessage({data:t}),this.LastSubString=null}},RequestWSData:function(t,e){var o=this;console.log("2222222222222"),this.SocketOpen,this.socket.on("kline",(function(n){console.log("333333333333"),console.log("333333333333"),console.log("33333recvData3333333"),o.periods["4"]===n.period&&(console.log("4444444444444444444444444"),console.log("llllllllllllllllllllllllllllll"),console.log("llllllllllllllllllllllllllllll"),console.log("llllllllllllllllllllllllllllll"),console.log("llllllllllllllllllllllllllllll"),console.log("llllllllllllllllllllllllllllll"),console.log(n),n.ping?(console.log("44444444444"),o.SendWSHeartMessage()):n.unsubbed?console.log("5555555555"):n.subbed?console.log("666666666666666"):(console.log("7777777777777777"),e(n,t)))})),uni.onSocketError((function(t){console.log(t)}))},GeneratePostData:function(t,e){var o=new Map([[4,"1min"],[5,"5min"],[6,"15min"],[0,"1day"],[1,"1week"],[2,"1mon"]]),n=o.get(e),a={req:"market.".concat(t,".kline.").concat(n),symbol:t,period:n},i={sub:"market.".concat(t,".kline.").concat(n),symbol:t,period:n};return{Req:a,Sub:i}},RequestHistoryMinuteData:function(t,e){t.PreventDefault=!0,this.Update.Cache=null;var o=t.Request.Data.symbol,n=t.Self.Period,a=this.GeneratePostData(this.OriginalSymbol,n),i={SendData:a.Req,Symbol:o,OriginalSymbol:this.OriginalSymbol,Period:n,Callback:e};this.RecvHistoryMinuteData({},i)},RecvHistoryMinuteData:function(t,e){var o=this;return(0,i.default)((0,a.default)().mark((function t(){var n,i,l,s,r,h,c,u,d;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.$H.post("/api/v1/klineMarket",!0,{symbol:"BTC/USDT",period:"1min",from:1692842991,to:1692865206});case 2:for(s in t.sent,n={code:0,data:[]},n.symbol=e.Symbol,n.name=e.OriginalSymbol,i=[{id:1692648120,open:26127.76,close:26149.12,low:26127.76,high:26149.12,amount:3.1703699796539158,vol:82872.18459971,count:624},{id:1692648180,open:26149.11,close:26124.33,low:26124.33,high:26149.12,amount:3.561071,vol:93068.68270964,count:270},{id:1692648240,open:26124.25,close:26141.75,low:26116.75,high:26141.75,amount:2.222965,vol:58071.53542927,count:358},{id:1692648300,open:26142,close:26143,low:26142,high:26146,amount:.4815846820163696,vol:12590.67186504,count:69},{id:1692648360,open:26137.75,close:26134,low:26134,high:26137.75,amount:.292679,vol:7649.24123688,count:72},{id:1692648420,open:26133.75,close:26114.76,low:26114.76,high:26133.75,amount:1.9860650705113534,vol:51877.48392245,count:219},{id:1692648480,open:26114.77,close:26117.95,low:26114.77,high:26117.95,amount:.396002,vol:10341.7342499,count:17},{id:1692648540,open:26117.95,close:26113.01,low:26111.85,high:26117.96,amount:.331649,vol:8660.83733487,count:50},{id:1692648600,open:26111.75,close:26109.92,low:26105.25,high:26111.75,amount:.369459,vol:9645.1703822,count:71},{id:1692648660,open:26109.92,close:26122,low:26109.92,high:26122,amount:.4341653068195742,vol:11338.87571857,count:132},{id:1692648720,open:26122,close:26122.25,low:26121.99,high:26122.49,amount:.104607,vol:2732.57728218,count:10},{id:1692648780,open:26122.26,close:26105.26,low:26105.26,high:26122.26,amount:1.5722051730187205,vol:41057.98614584,count:154},{id:1692648840,open:26105.26,close:26108.45,low:26105.26,high:26108.45,amount:.826708,vol:21582.35365874,count:30},{id:1692648900,open:26109.5,close:26112.11,low:26109.5,high:26112.11,amount:.136489,vol:3563.9158214,count:7},{id:1692648960,open:26112.11,close:26116.5,low:26112.11,high:26116.5,amount:.563644,vol:14720.03422313,count:74},{id:1692649020,open:26116.75,close:26117.25,low:26116.75,high:26117.25,amount:.289331,vol:7556.5046915,count:19},{id:1692649080,open:26117.24,close:26110.5,low:26110.5,high:26117.24,amount:.455723,vol:11900.71476728,count:103},{id:1692649140,open:26110.75,close:26109.25,low:26109.25,high:26114.25,amount:1.119225,vol:29225.63553902,count:70},{id:1692649200,open:26109.25,close:26111.47,low:26109.25,high:26112.99,amount:.184487,vol:4817.44690879,count:8},{id:1692649260,open:26114.5,close:26100.75,low:26100.75,high:26114.5,amount:.6061749495725621,vol:15823.724119729999,count:113},{id:1692649320,open:26101.02,close:26109.75,low:26101.02,high:26111,amount:.932342,vol:24341.3222537,count:94},{id:1692649380,open:26111.24,close:26105,low:26105,high:26111.25,amount:.824523,vol:21527.57158325,count:79},{id:1692649440,open:26104.75,close:26094.5,low:26094.5,high:26104.75,amount:.796899,vol:20797.69786722,count:164},{id:1692649500,open:26094.51,close:26101.51,low:26094.51,high:26101.51,amount:.97853,vol:25538.09806859,count:28},{id:1692649560,open:26101.75,close:26110.98,low:26101.75,high:26111,amount:.465958,vol:12164.75146861,count:158},{id:1692649620,open:26110.98,close:26106.75,low:26106.75,high:26110.98,amount:.256987,vol:6709.9784934,count:33},{id:1692649680,open:26107,close:26111,low:26106.99,high:26111,amount:.231988,vol:6057.13393236,count:7},{id:1692649740,open:26111.49,close:26106.25,low:26106.25,high:26111.5,amount:.471333,vol:12305.95291302,count:34},{id:1692649800,open:26106.25,close:26108.56,low:26106.25,high:26108.56,amount:.278562,vol:7272.59858612,count:14},{id:1692649860,open:26109.37,close:26115.75,low:26109.37,high:26115.75,amount:.465002,vol:12141.80723991,count:90},{id:1692649920,open:26116,close:26124.25,low:26116,high:26124.25,amount:1.379353,vol:36029.75383241,count:244},{id:1692649980,open:26124.25,close:26123.5,low:26123.5,high:26135.24,amount:3.497415,vol:91385.58361632,count:240},{id:1692650040,open:26123.25,close:26108.01,low:26107.15,high:26123.25,amount:.541615,vol:14142.79900047,count:201},{id:1692650100,open:26108.01,close:26105,low:26105,high:26108.01,amount:.1098,vol:2866.49341026,count:19},{id:1692650160,open:26104.75,close:26098.65,low:26095.81,high:26104.75,amount:.8019406196320499,vol:20933.24429256,count:86},{id:1692650220,open:26098.64,close:26094.51,low:26092.5,high:26098.65,amount:1.503734,vol:39241.4058343,count:75},{id:1692669840,open:26095.25,close:26100,low:26095.25,high:26100,amount:.312892,vol:8165.44110232,count:67}],l=null,console.log("count::::::::::::::::::::::::::::"),i)r=i[s],console.log(s),h=new Date,h.setTime(1e3*r.id),c=1e4*h.getFullYear()+100*(h.getMonth()+1)+h.getDate(),u=100*h.getHours()+h.getMinutes(),d=[c,l,r.open,r.high,r.low,r.close,r.amount,null,u],l=r.close,n.data.push(d);e.Callback(n),o.SubscribeMinuteRealtimeData(e);case 12:case"end":return t.stop()}}),t)})))()},SubscribeMinuteRealtimeData:function(t){var e=this;console.log("888888888aaaaaaa");var o=this.GeneratePostData(t.OriginalSymbol,t.Period),n={SendData:o.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};console.log("-1-1-1-1-1-1-1-1-1-1-"),this.RequestWSData(n,(function(t,o){e.RecvMinuteRealtimeData(t,o)}))},RecvMinuteRealtimeData:function(t,e){if(console.log("888888888b"),console.log(t),u.JSChart){console.log("888888888yyyyyyyyyyyyyy");var o=u.JSChart.JSChartContainer,n=o.Period,a=o.Symbol;if(console.log(n),console.log(a),a==e.Symbol&&n==e.Period){var i={code:0,data:[],ver:2};i.symbol=e.Symbol,i.name=e.OriginalSymbol;var l=t,s=new Date;console.log("datadatadatadatadatadatadatadatadatadatadatadatadatadatadatadata"),console.log(s),s.setTime(1e3*l.id);var r=1e4*s.getFullYear()+100*(s.getMonth()+1)+s.getDate(),h=100*s.getHours()+s.getMinutes(),c=[r,null,l.open,l.high,l.low,l.close,l.amount,null,h];if(this.Update.EnableLimit){if(this.Update.Cache){var d=this.Update.Cache;l=d.Data[d.Data.length-1];l[0]==c[0]&&l[8]==c[8]?d.Data[d.Data.length-1]=c:d.Data.push(c)}else this.Update.Cache={Data:[c]};var p=!0;if(this.Update.LastUpdateTime){var g=Date.now();g-this.Update.LastUpdateTime<this.Update.Frequency&&(p=!1)}if(!p)return;i.data=this.Update.Cache.Data,this.Update.Cache=null,this.Update.LastUpdateTime=Date.now()}else i.data.push(c);console.log("888888888t"),console.log(i),console.log(i.data),o.RecvMinuteRealtimeData(i)}}},RequestHistoryData:function(t,e){var o=this;t.PreventDefault=!0,this.Update.Cache=null;var n=t.Request.Data.symbol,a=t.Self.Period,i=this.GeneratePostData(this.OriginalSymbol,a),l={SendData:i.Req,Symbol:n,OriginalSymbol:this.OriginalSymbol,Period:a,Callback:e};this.RequestWSData(l,(function(t,e){o.RecvHistoryData(t,e)}))},RecvHistoryData:function(t,e){if(t.rep==e.SendData.req){var o={code:0,data:[]};if(o.symbol=e.Symbol,o.name=e.OriginalSymbol,t.data){var n=null;for(var a in t.data){var i=t.data[a],l=new Date;l.setTime(1e3*i.id);var s=1e4*l.getFullYear()+100*(l.getMonth()+1)+l.getDate(),r=(l.getHours(),l.getMinutes(),[s,n,i.open,i.high,i.low,i.close,i.amount,null]);n=i.close,o.data.push(r)}}e.Callback(o),this.SubscribRealtimeData(e)}},SubscribRealtimeData:function(t){var e=this,o=this.GeneratePostData(t.OriginalSymbol,t.Period),n={SendData:o.Sub,Symbol:t.Symbol,OriginalSymbol:t.OriginalSymbol,Period:t.Period};this.RequestWSData(n,(function(t,o){e.RecvRealtimeData(t,o)}))},RecvRealtimeData:function(t,e){if(console.log("888888888c"),u.JSChart){var o=u.JSChart.JSChartContainer,n=o.Period,a=o.Symbol;if(a==e.Symbol&&n==e.Period){var i={code:0,stock:[]};if(this.Update.EnableLimit){var l=Date.now();if(this.Update.LastUpdateTime&&l-this.Update.LastUpdateTime<this.Update.Frequency)return;this.Update.LastUpdateTime=l}var s={symbol:e.Symbol,name:e.OriginalSymbol},r=t.tick,h=new Date;h.setTime(1e3*r.id);var c=1e4*h.getFullYear()+100*(h.getMonth()+1)+h.getDate();h.getHours(),h.getMinutes();s.date=c,s.yclose=null,s.open=r.open,s.high=r.high,s.low=r.low,s.price=r.close,s.vol=r.amount,s.amount=null,i.stock.push(s),o.RecvRealtimeData(i)}}},GeneratePostDepthData:function(t,e){var o={sub:"market.".concat(t,".depth.").concat(e),symbol:t};return{Req:{},Sub:o}},RequestDepthData:function(t,e){var o=this;console.log("888888888e"),t.PreventDefault=!0,this.Update.Cache=null;var n=t.Request.Data.symbol,a=(t.Self.Period,this.GeneratePostDepthData(this.OriginalSymbol,"step1")),i={SendData:a.Sub,Symbol:n,OriginalSymbol:this.OriginalSymbol,Callback:e};this.RequestWSData(i,(function(t,e){o.RecvDepthData(t,e)}))},RecvDepthData:function(t,e){if(console.log("888888888f"),u.JSChart){var o=u.JSChart.JSChartContainer,n=o.Symbol;if(n==e.Symbol&&"DepthChartContainer"==o.ClassName){var a=t.tick,i=[],l=[];if(a.asks)for(var s=0;s<a.asks.length;++s){var r=a.asks[s];i.push([r[0],r[1]])}if(a.bids)for(s=0;s<a.bids.length;++s){r=a.bids[s];l.push([r[0],r[1]])}var h={code:0,asks:i,bids:l,datatype:"snapshot"};o.ChartSplashPaint.EnableSplash(!1),o.RecvDepthData(h)}}},KLineTouchStart:function(t){u.JSChart&&u.JSChart.OnTouchStart(t)},KLineTouchMove:function(t){u.JSChart&&u.JSChart.OnTouchMove(t)},KLineTouchEnd:function(t){u.JSChart&&u.JSChart.OnTouchEnd(t)}}};e.default=d}}]);